/*
Copyright (c) 2010, Yahoo! Inc. All rights reserved.
Code licensed under the BSD License:
http://developer.yahoo.com/yui/license.html
version: 2.8.1
*/
YAHOO.util.Attribute=function(B,A){if(A){this.owner=A;this.configure(B,true);}};YAHOO.util.Attribute.prototype={name:undefined,value:null,owner:null,readOnly:false,writeOnce:false,_initialConfig:null,_written:false,method:null,setter:null,getter:null,validator:null,getValue:function(){var A=this.value;if(this.getter){A=this.getter.call(this.owner,this.name,A);}return A;},setValue:function(F,B){var E,A=this.owner,C=this.name;var D={type:C,prevValue:this.getValue(),newValue:F};if(this.readOnly||(this.writeOnce&&this._written)){return false;}if(this.validator&&!this.validator.call(A,F)){return false;}if(!B){E=A.fireBeforeChangeEvent(D);if(E===false){return false;}}if(this.setter){F=this.setter.call(A,F,this.name);if(F===undefined){}}if(this.method){this.method.call(A,F,this.name);}this.value=F;this._written=true;D.type=C;if(!B){this.owner.fireChangeEvent(D);}return true;},configure:function(B,C){B=B||{};if(C){this._written=false;}this._initialConfig=this._initialConfig||{};for(var A in B){if(B.hasOwnProperty(A)){this[A]=B[A];if(C){this._initialConfig[A]=B[A];}}}},resetValue:function(){return this.setValue(this._initialConfig.value);},resetConfig:function(){this.configure(this._initialConfig,true);},refresh:function(A){this.setValue(this.value,A);}};(function(){var A=YAHOO.util.Lang;YAHOO.util.AttributeProvider=function(){};YAHOO.util.AttributeProvider.prototype={_configs:null,get:function(C){this._configs=this._configs||{};var B=this._configs[C];if(!B||!this._configs.hasOwnProperty(C)){return null;}return B.getValue();},set:function(D,E,B){this._configs=this._configs||{};var C=this._configs[D];if(!C){return false;}return C.setValue(E,B);},getAttributeKeys:function(){this._configs=this._configs;var C=[],B;for(B in this._configs){if(A.hasOwnProperty(this._configs,B)&&!A.isUndefined(this._configs[B])){C[C.length]=B;}}return C;},setAttributes:function(D,B){for(var C in D){if(A.hasOwnProperty(D,C)){this.set(C,D[C],B);}}},resetValue:function(C,B){this._configs=this._configs||{};if(this._configs[C]){this.set(C,this._configs[C]._initialConfig.value,B);return true;}return false;},refresh:function(E,C){this._configs=this._configs||{};var F=this._configs;E=((A.isString(E))?[E]:E)||this.getAttributeKeys();for(var D=0,B=E.length;D<B;++D){if(F.hasOwnProperty(E[D])){this._configs[E[D]].refresh(C);}}},register:function(B,C){this.setAttributeConfig(B,C);},getAttributeConfig:function(C){this._configs=this._configs||{};var B=this._configs[C]||{};var D={};for(C in B){if(A.hasOwnProperty(B,C)){D[C]=B[C];}}return D;},setAttributeConfig:function(B,C,D){this._configs=this._configs||{};C=C||{};if(!this._configs[B]){C.name=B;this._configs[B]=this.createAttribute(C);}else{this._configs[B].configure(C,D);}},configureAttribute:function(B,C,D){this.setAttributeConfig(B,C,D);},resetAttributeConfig:function(B){this._configs=this._configs||{};this._configs[B].resetConfig();},subscribe:function(B,C){this._events=this._events||{};if(!(B in this._events)){this._events[B]=this.createEvent(B);}YAHOO.util.EventProvider.prototype.subscribe.apply(this,arguments);},on:function(){this.subscribe.apply(this,arguments);},addListener:function(){this.subscribe.apply(this,arguments);},fireBeforeChangeEvent:function(C){var B="before";B+=C.type.charAt(0).toUpperCase()+C.type.substr(1)+"Change";C.type=B;return this.fireEvent(C.type,C);},fireChangeEvent:function(B){B.type+="Change";return this.fireEvent(B.type,B);},createAttribute:function(B){return new YAHOO.util.Attribute(B,this);}};YAHOO.augment(YAHOO.util.AttributeProvider,YAHOO.util.EventProvider);})();(function(){var B=YAHOO.util.Dom,D=YAHOO.util.AttributeProvider,C={mouseenter:true,mouseleave:true};var A=function(E,F){this.init.apply(this,arguments);};A.DOM_EVENTS={"click":true,"dblclick":true,"keydown":true,"keypress":true,"keyup":true,"mousedown":true,"mousemove":true,"mouseout":true,"mouseover":true,"mouseup":true,"mouseenter":true,"mouseleave":true,"focus":true,"blur":true,"submit":true,"change":true};A.prototype={DOM_EVENTS:null,DEFAULT_HTML_SETTER:function(G,E){var F=this.get("element");if(F){F[E]=G;}return G;},DEFAULT_HTML_GETTER:function(E){var F=this.get("element"),G;if(F){G=F[E];}return G;},appendChild:function(E){E=E.get?E.get("element"):E;return this.get("element").appendChild(E);},getElementsByTagName:function(E){return this.get("element").getElementsByTagName(E);},hasChildNodes:function(){return this.get("element").hasChildNodes();},insertBefore:function(E,F){E=E.get?E.get("element"):E;F=(F&&F.get)?F.get("element"):F;return this.get("element").insertBefore(E,F);},removeChild:function(E){E=E.get?E.get("element"):E;return this.get("element").removeChild(E);},replaceChild:function(E,F){E=E.get?E.get("element"):E;F=F.get?F.get("element"):F;return this.get("element").replaceChild(E,F);},initAttributes:function(E){},addListener:function(J,I,K,H){H=H||this;var E=YAHOO.util.Event,G=this.get("element")||this.get("id"),F=this;if(C[J]&&!E._createMouseDelegate){return false;}if(!this._events[J]){if(G&&this.DOM_EVENTS[J]){E.on(G,J,function(M,L){if(M.srcElement&&!M.target){M.target=M.srcElement;}if((M.toElement&&!M.relatedTarget)||(M.fromElement&&!M.relatedTarget)){M.relatedTarget=E.getRelatedTarget(M);}if(!M.currentTarget){M.currentTarget=G;}F.fireEvent(J,M,L);},K,H);}this.createEvent(J,{scope:this});}return YAHOO.util.EventProvider.prototype.subscribe.apply(this,arguments);},on:function(){return this.addListener.apply(this,arguments);},subscribe:function(){return this.addListener.apply(this,arguments);},removeListener:function(F,E){return this.unsubscribe.apply(this,arguments);},addClass:function(E){B.addClass(this.get("element"),E);},getElementsByClassName:function(F,E){return B.getElementsByClassName(F,E,this.get("element"));},hasClass:function(E){return B.hasClass(this.get("element"),E);},removeClass:function(E){return B.removeClass(this.get("element"),E);},replaceClass:function(F,E){return B.replaceClass(this.get("element"),F,E);},setStyle:function(F,E){return B.setStyle(this.get("element"),F,E);
},getStyle:function(E){return B.getStyle(this.get("element"),E);},fireQueue:function(){var F=this._queue;for(var G=0,E=F.length;G<E;++G){this[F[G][0]].apply(this,F[G][1]);}},appendTo:function(F,G){F=(F.get)?F.get("element"):B.get(F);this.fireEvent("beforeAppendTo",{type:"beforeAppendTo",target:F});G=(G&&G.get)?G.get("element"):B.get(G);var E=this.get("element");if(!E){return false;}if(!F){return false;}if(E.parent!=F){if(G){F.insertBefore(E,G);}else{F.appendChild(E);}}this.fireEvent("appendTo",{type:"appendTo",target:F});return E;},get:function(E){var G=this._configs||{},F=G.element;if(F&&!G[E]&&!YAHOO.lang.isUndefined(F.value[E])){this._setHTMLAttrConfig(E);}return D.prototype.get.call(this,E);},setAttributes:function(K,H){var F={},I=this._configOrder;for(var J=0,E=I.length;J<E;++J){if(K[I[J]]!==undefined){F[I[J]]=true;this.set(I[J],K[I[J]],H);}}for(var G in K){if(K.hasOwnProperty(G)&&!F[G]){this.set(G,K[G],H);}}},set:function(F,H,E){var G=this.get("element");if(!G){this._queue[this._queue.length]=["set",arguments];if(this._configs[F]){this._configs[F].value=H;}return;}if(!this._configs[F]&&!YAHOO.lang.isUndefined(G[F])){this._setHTMLAttrConfig(F);}return D.prototype.set.apply(this,arguments);},setAttributeConfig:function(E,F,G){this._configOrder.push(E);D.prototype.setAttributeConfig.apply(this,arguments);},createEvent:function(F,E){this._events[F]=true;return D.prototype.createEvent.apply(this,arguments);},init:function(F,E){this._initElement(F,E);},destroy:function(){var E=this.get("element");YAHOO.util.Event.purgeElement(E,true);this.unsubscribeAll();if(E&&E.parentNode){E.parentNode.removeChild(E);}this._queue=[];this._events={};this._configs={};this._configOrder=[];},_initElement:function(G,F){this._queue=this._queue||[];this._events=this._events||{};this._configs=this._configs||{};this._configOrder=[];F=F||{};F.element=F.element||G||null;var I=false;var E=A.DOM_EVENTS;this.DOM_EVENTS=this.DOM_EVENTS||{};for(var H in E){if(E.hasOwnProperty(H)){this.DOM_EVENTS[H]=E[H];}}if(typeof F.element==="string"){this._setHTMLAttrConfig("id",{value:F.element});}if(B.get(F.element)){I=true;this._initHTMLElement(F);this._initContent(F);}YAHOO.util.Event.onAvailable(F.element,function(){if(!I){this._initHTMLElement(F);}this.fireEvent("available",{type:"available",target:B.get(F.element)});},this,true);YAHOO.util.Event.onContentReady(F.element,function(){if(!I){this._initContent(F);}this.fireEvent("contentReady",{type:"contentReady",target:B.get(F.element)});},this,true);},_initHTMLElement:function(E){this.setAttributeConfig("element",{value:B.get(E.element),readOnly:true});},_initContent:function(E){this.initAttributes(E);this.setAttributes(E,true);this.fireQueue();},_setHTMLAttrConfig:function(E,G){var F=this.get("element");G=G||{};G.name=E;G.setter=G.setter||this.DEFAULT_HTML_SETTER;G.getter=G.getter||this.DEFAULT_HTML_GETTER;G.value=G.value||F[E];this._configs[E]=new YAHOO.util.Attribute(G,this);}};YAHOO.augment(A,D);YAHOO.util.Element=A;})();YAHOO.register("element",YAHOO.util.Element,{version:"2.8.1",build:"19"});LI.RequestQueue={requests:[],activeRequest:null,dequeue:function(){return this.requests.shift()
},enqueue:function(b){if(!this.activeRequest||!YAHOO.util.Connect.isCallInProgress(this.activeRequest)){YAHOO.util.Connect.setForm(b.form);
this.activeRequest=LI.asyncRequest(b.method,b.url,b.callback,b.postData);
var a=window.setInterval(function(){if(!YAHOO.util.Connect.isCallInProgress(LI.RequestQueue.activeRequest)){var c=LI.RequestQueue.dequeue();
if(!c){LI.RequestQueue.activeRequest=null;
window.clearInterval(a)
}else{LI.RequestQueue.activeRequest=LI.asyncRequest(c.method,c.url,c.callback,c.postData)
}}},10)
}else{this.requests.push(b)
}return true
}};
YAHOO.register("LI.RequestQueue",LI.RequestQueue,{});(function(){var a=2,d=500,e=400,k="btn-menu-open",b="btn-split-toggle-hover",g="menu-btn-item-selected",c="click",l="mouseout",f="mouseover";
function h(q,p){var s,n,o,r,m;
if(!q){return
}this.listEl=r=YDom.getChildrenBy(q,function(t){return t.tagName=="UL"
})[0];
if(!r){return
}p=p||{};
YAHOO.lang.augmentObject(p,{tier:"quaternary",split:false,camo:true,showOnHover:false,appendMenuToDocumentBody:false,appendMenuToElement:false});
this.el=q;
this.config=p;
n="btn-"+p.tier;
s="btn-menu "+n;
if(p.split){s+=" btn-split"
}if(p.camo){s+=" btn-camo"
}this.buttonContainer=o=LI.domify('<span class="'+s+'"><span class="toggle-btn"></span></span>');
this.toggleEl=YDom.getFirstChild(o);
q.insertBefore(o,r);
LI.hide(r);
YDom.removeClass(YDom.getElementsByClassName(n,"",r),n);
m=YDom.getElementsByClassName(g,"li",r)[0]||YDom.getFirstChild(r);
this.setButtonEl(m);
YEvent.on(o,f,this._onMouseOver,this,true);
YEvent.on(o,l,this._onMouseOut,this,true);
YEvent.on(o,c,this._onClick,this,true)
}h.prototype={_onClick:function(m){var o=YEvent.getTarget(m),n=o;
if(!this.config.split||o!=this.buttonEl){YEvent.preventDefault(m);
if(!this.menu){this.initMenu()
}this.menu.setVisible(!this.menu.getVisible())
}},_onDocMouseOver:function(m){var o=YEvent.getTarget(m),n=this,p=n.menu,q=n.hideMenuTimer;
if(p){if(YDom.isAncestor(n.el,o)||YDom.isAncestor(p.getEl(),o)){if(q){window.clearTimeout(q);
n.hideMenuTimer=null
}}else{if(!q){n.hideMenuTimer=window.setTimeout(function(){p.setVisible(false);
YEvent.removeListener(document.body,f,n._onDocMouseOver);
n.hideMenuTimer=null
},e)
}}}},_onMenuItemClick:function(m){},_onMenuVisibleChange:function(n){var o=this.buttonContainer,q,p,m;
if(n.newValue){q=YDom.getRegion(o);
p=this.menu.el;
m=(this.config.split)?q.right-YDom.getRegion(p).width:q.left;
YDom.setXY(p,[m,q.bottom+a]);
YDom.addClass(o,k)
}else{YDom.removeClass(o,k)
}},_onMouseOut:function(m){var n=YEvent.getTarget(m);
if(this.config.split&&n!==this.buttonEl){YDom.removeClass(this.buttonContainer,b)
}if(this.showMenuTimer&&!YDom.isAncestor(this.el,n)){window.clearTimeout(this.showMenuTimer)
}},_onMouseOver:function(m){var o=YEvent.getTarget(m),n=this;
if(n.config.split&&o!==n.buttonEl){YDom.addClass(n.buttonContainer,b)
}if(n.config.showOnHover){if(!n.menu){n.initMenu()
}if(!n.menu.getVisible()&&!n.showMenuTimer){n.showMenuTimer=window.setTimeout(function(){n.menu.setVisible(true);
YEvent.on(document.body,f,n._onDocMouseOver,n,true);
n.showMenuTimer=null
},d)
}}},initMenu:function(){var n=this.listEl,m=(this.config.appendMenuToDocumentBody)?document.body:((this.config.appendMenuToElement)?this.config.appendMenuToElement:this.el);
LI.show(n);
m.appendChild(n);
this.menu=new j(n);
this.menu.subscribe("visibleChange",this._onMenuVisibleChange,this,true);
this.menu.subscribe("menuItemClick",this._onMenuItemClick,this,true)
},setButtonEl:function(q){var r=YDom.getFirstChild(q),p=(this.config.split)?r:r.cloneNode(true),n=this.buttonEl,m=this.config.split,o;
YDom.addClass(p,"btn");
if(m){YDom.addClass(p,"btn-"+this.config.tier)
}p.setAttribute("data-li-backref",YDom.generateId(q));
this.buttonContainer.insertBefore(p,this.toggleEl);
if(m){YDom.setStyle(q,"display","none")
}else{YDom.addClass(q,g)
}this.buttonEl=p;
if(n){YDom.removeClass(n,"btn");
if(m){YDom.removeClass(n,"btn-"+this.config.tier)
}o=YDom.get(n.getAttribute("data-li-backref"));
if(m){YDom.setStyle(o,"display","");
o.appendChild(n)
}else{YDom.removeClass(o,g);
n.parentNode.removeChild(n)
}}}};
function i(n,m){m={tier:m.type||"ternary",split:true,camo:false};
return new h(n,m)
}function j(n,m){this.el=n;
m=m||{};
this.config={closeonclick:m.closeonclick||true,visible:false};
YDom.addClass(n,"menu-btn drop");
this.createEvent("visibleChange");
this.createEvent("menuItemClick")
}j.prototype={_onDocClick:function(m){this.setVisible(false)
},_onClick:function(m){var p=YEvent.getTarget(m),o=p,n;
if(this.el!==p){while(o.parentNode!==this.el){o=o.parentNode
}n={el:o};
this.fireEvent("menuItemClick",n)
}},getEl:function(){return this.el
},getVisible:function(){return this.config.visible
},setVisible:function(o){var n,m;
if(o==this.getVisible()){return false
}if(o){YDom.setStyle(this.el,"visibility","visible");
if(this.config.closeonclick){n=this;
window.setTimeout(function(){YEvent.on(document.body,c,n._onDocClick,n,true);
YEvent.on(n.el,c,n._onClick,n,true)
},10)
}}else{YDom.setStyle(this.el,"visibility","hidden");
if(this.config.closeonclick){YEvent.removeListener(document.body,c,this._onDocClick);
YEvent.removeListener(this.el,c,this._onClick)
}}m={name:"visible",prevValue:this.config.visible,newValue:o};
this.config.visible=o;
this.fireEvent("visibleChange",m)
}};
YAHOO.lang.augmentProto(j,YAHOO.util.EventProvider);
LI.MenuButton=h;
LI.SplitButton=i
})();(function(){var c="interrupt success-plus success-timeout task-modal task-modeless task-modeless-secondary no-header noheader-modal";
var b="POST";
var a="GET";
var f={autoSize:"no-header task-modeless success-plus success-timeout",modal:"interrupt task-modal noheader-modal",dragNDrop:"task-modeless task-modeless-secondary success-plus success-timeout",docClick:"success-plus success-timeout",timeout:"success-timeout"};
var g=null;
var e={or:LI.i18n.get("Dialog-or"),closeThisWindow:LI.i18n.get("Dialog-closeWindow"),cancel:LI.i18n.get("Dialog-cancel"),submit:LI.i18n.get("Dialog-submit"),start:LI.i18n.get("Dialog-start"),end:LI.i18n.get("Dialog-end")};
LI.Dialog=function(j,i){var h=g||new d();
g=h;
if(j){e=(i.i18n)?i.i18n:e;
i=i||{};
i.content=i.content||{};
i.webtrack=i.webtrack||{};
i={content:{attentionMsg:i.content.attentionMsg||null,successMsg:i.content.successMsg||null,title:i.content.title||null,node:i.content.node||null,url:i.content.url||null,method:(i.content.method===b)?b:a,postData:i.content.postData||"",useCache:i.content.useCache||false,html:i.content.html||null,submitButton:i.content.submitButton||false,dustData:i.content.dustData||null,dustDataUrl:i.content.dustDataUrl||null,dustTemplate:i.content.dustTemplate||null},dependencies:i.dependencies||null,name:i.name||"config.name=not_set",className:i.className||"",type:(i&&i.type&&c.match(i.type))?i.type:"task-modeless",width:(i&&i.width)?parseInt(i.width,10):500,webtrack:{key:i.webtrack.key||null,val:i.webtrack.val||null},container:(i.container)?i.container:null,extra:(i.extra)?i.extra:null,lazyEvent:(i.lazyEvent)?i.lazyEvent:null,stopEvent:(typeof(i.stopEvent)==="undefined")?true:(!!i.stopEvent),showOnlyWhenReady:i.showOnlyWhenReady||false,childTarget:i.childTarget||null,allowMultipleChildren:i.allowMultipleChildren||false,scrollTopOnOpen:(typeof(i.scrollTopOnOpen)==="undefined")?true:(!!i.scrollTopOnOpen),disableFocusOnClose:(!!i.disableFocusOnClose)?i.disableFocusOnClose:false,noClickListener:i.noClickListener||false,timeout:i.timeout||15000};
if(i.childTarget){j=Y$(i.childTarget,j,!i.allowMultipleChildren)||j
}if(!i.noClickListener){YEvent.on(j,"click",g.open,i)
}if(i.lazyEvent){g.open(i.lazyEvent,i)
}}return g
};
function d(){var O;
var y;
var D=null,q=null,H=null;
var A=parseInt(YDom.getStyle("body","padding-right"),10);
var w=document.createElement("DIV");
var I=document.createElement("DIV");
I.id="dialog-place-holder";
var p=new YAHOO.util.CustomEvent("close");
var r=new YAHOO.util.CustomEvent("open");
var j=new YAHOO.util.CustomEvent("beforeOpen");
var z=new YAHOO.util.CustomEvent("submit");
var n=new YAHOO.util.CustomEvent("swap");
var B=new YAHOO.util.CustomEvent("contentChange");
var E={};
function h(){if(O.container){var Q=YDom.getRegion(O.container);
return Q.width
}else{return(YDom.getViewportWidth()+30)
}}function J(Y){var X=(Y&&Y.type==="click"||(Y==="keyPressed"||Y==="timer"||Y==="selfClose")),S=Y$("#dialog-wrapper iframe"),Q=YDom.get("body"),V=(Q)?Q.getElementsByTagName("a")[0]:document.getElementsByTagName("a")[1];
if(X){if(S.length){LI.hide(S)
}L();
var T=YDom.get("dialog-wrapper");
if(!T){return
}var R=Y$(".dialog-content",T,true);
if(R){R.innerHTML=""
}l();
YEvent.removeListener(window,"resize",m);
document.body.removeChild(T);
YDom.removeClass(document.body,"dialog-mask-active");
YDom.removeClass(document.body,"dialog-hide-select");
t.disable();
YDom.setStyle("body","padding-right",A+"px");
YDom.setStyle([YDom.get("header"),YDom.get("footer")],"margin-right","auto");
YDom.setStyle(document.getElementsByTagName("HTML")[0],"overflow","");
if(q){YEvent.removeListener(document,"click",J);
q=null
}if(D){clearTimeout(D);
D=null
}if(!O.disableFocusOnClose){if(y&&y.focus){try{y.focus()
}catch(U){try{V.focus()
}catch(W){}}}else{if(V){try{V.focus()
}catch(U){}}}}p.fire(Y.target,H.name,H.extra)
}YEvent.removeListener(document,"focusin",G);
return X
}var t=new YAHOO.util.KeyListener(document,{keys:27},{fn:J});
function F(R){O=R;
var T,S,Q="&nbsp";
if(O.content){if(O.content.title){T=O.content.title
}else{if(O.content.node){S=Y$(".dialog-title",O.content.node,true);
if(S){T=S.innerHTML;
YDom.setStyle(S,"display","none")
}}}}if(!T){T=Q
}w.innerHTML=YAHOO.lang.substitute(['<div class="dialog-window" role="document">','<span class="dialog-a11y-hidden">{start}</span>','<div class="dialog-title"><button class="dialog-close"><span class="dialog-a11y-hidden">{closeWindow}</span></button><h3 id="li-dialog-aria-label" class="title">{title}</h3></div>','<div class="dialog-body"></div>','<span class="dialog-a11y-hidden">{end}</span>',"</div>"].join(""),{title:T.replace(/</g,"&lt;").replace(/>/g,"&gt;"),closeWindow:e.closeThisWindow,start:e.start,end:e.end})
}function k(Q){var R=YEvent.getTarget(Q);
if(YDom.hasClass(R,"dialog-close")&&!R.disabled){var S=J(Q);
if(S){YEvent.preventDefault(Q)
}}else{if(YDom.hasClass(R,"dialog-submit")||(R.tagName==="INPUT"&&R.type&&R.type==="submit")){if(YDom.hasClass(R,"dialog-submit-suppress")){YEvent.preventDefault(Q)
}z.fire(R,H.name,H.extra)
}else{if(YDom.hasClass(R,"dialog-mask")&&f.modal.match(H.type)){YEvent.preventDefault(Q);
J(Q)
}}}}YEvent.on(w,"click",k);
function P(Q){var S='<p class="dialog-close">{closeWindow}</p>';
var R='<input class="btn-primary" type="submit" value="{submit}"> {cancel}';
return YAHOO.lang.substitute(['<div class="dialog-message">{message}</div>','<div class="dialog-content">{content}</div>','<div class="dialog-actions">',(Q&&Q.content&&Q.content.submitButton)?R:"",(Q&&Q.content&&Q.content.closeMessage)?S:"","</div>"].join(""),{cancel:e.or+' <span class="dialog-cancel dialog-close">'+e.cancel+"</span>",closeWindow:'<span class="dialog-cancel dialog-close">'+e.closeThisWindow+"</span>",message:(Q&&Q.content&&Q.content.msg)?"<p>"+Q.content.msg+"</p>":"",submit:(Q&&Q.content&&Q.content.submitButton!==true)?Q.content.submitButton:e.submit})
}function C(){YEvent.on(Y$(".dialog-title",w,true),"mousedown",function(Z){if(!YDom.hasClass(YEvent.getTarget(Z),"dialog-close")){T(Z)
}});
var X={};
var W={};
var Q=0,U=0;
var V=YDom.get("dialog-wrapper");
function T(Z){var aa=parseInt(YDom.getStyle(V,"width"),10)||0;
var ab=parseInt(YDom.getStyle(V,"height"),10)||0;
YDom.addClass(document.body,"dragging");
X={x:Z.clientX,y:Z.clientY};
W.left=W.left||parseInt(YDom.getStyle(V,"left"),10)||0;
W.top=W.top||parseInt(YDom.getStyle(V,"top"),10)||0;
Q=YDom.getDocumentWidth()-aa;
U=YDom.getDocumentHeight()-ab;
YEvent.on(document,"mouseup",S);
YEvent.on(document,"mousemove",Y);
R(true);
YEvent.stopEvent(Z)
}function Y(Z){W.left+=Z.clientX-X.x;
W.top+=Z.clientY-X.y;
W.left=Math.min(Math.max(W.left,0),Q);
W.top=Math.min(Math.max(W.top,0),U);
YDom.setStyle(V,"left",W.left+"px");
YDom.setStyle(V,"top",W.top+"px");
X={x:Z.clientX,y:Z.clientY}
}function S(){YDom.removeClass(document.body,"dragging");
YEvent.removeListener(document,"mouseup",S);
YEvent.removeListener(document,"mousemove",Y);
R(false)
}function R(Z){if(Z){document.body.ondrag=document.body.onselectstart=function(){return false
};
document.body.style.MozUserSelect="none"
}else{document.body.ondrag=document.body.onselectstart=null;
document.body.style.MozUserSelect=""
}}}function v(R){var T=O.content.method,S,Q;
YAHOO.util.Connect.initHeader("X-IsDialog","1");
S={success:function(U){if(H.showOnlyWhenReady){YDom.setStyle(w,"visibility","")
}var V=Y$(".dialog-body",w,true);
YDom.removeClass(V,"dialog-body-loading");
if(!U){x();
return false
}if(U&&U.responseText){var Y=U.getResponseHeader["Content-Type"];
if(Y&&Y.indexOf("application/json")>-1){var X=LI.parseJSON(U.responseText);
u({content:{html:X.html}})
}else{var W=YAHOO.lang.trim(U.responseText);
if(W.indexOf("<!DOCTYPE")===0||W.indexOf("<html")===0){x()
}else{u({content:{html:W}})
}}}},failure:function(){x()
},timeout:O.timeout};
if(T===b){Q=O.content.postData;
YAHOO.util.Connect.asyncRequest(b,R,S,Q)
}else{YAHOO.util.Connect.asyncRequest(a,R,S)
}}function x(){LI.Dialog().close();
if(!H.showOnlyWhenReady){LI.injectAlert(LI.i18n.get("Dialog-error-generic"),"error")
}}function o(Q,R){LI.asyncRequest(a,Q,{success:function(S){N(S.responseText,R)
},custom:{exception:function(S){x(S);
return false
}},timeout:O.timeout})
}function N(R,S){dust.render(S||O.content.dustTemplate,R,function Q(U,T){if(U){x()
}else{YDom.removeClass(Y$(".dialog-body",w,true),"dialog-body-loading");
u({content:{html:T,attentionMsg:O.content.attentionMsg,successMsg:O.content.successMsg}})
}})
}function m(Q){if(f.modal.match(O.type)){if(YAHOO.env.ua.ie&&YAHOO.env.ua.ie<7){var U=YDom.getClientRegion();
YDom.setStyle(w,"height",(U.bottom-U.top)+"px")
}}else{var S=Y$(".dialog-window",w,true),T=YDom.get("dialog-wrapper"),R=parseInt(YDom.getStyle(S,"width"),10);
YDom.setStyle(T,"left",(h()-R)/2+"px");
YDom.setStyle(T,"top",YDom.getDocumentScrollTop()+105+"px")
}}function M(ad,T){var V=(ad===null||typeof ad==="boolean")?"publicAPI":YEvent.getTarget(ad),ac;
if(YDom.inDocument("dialog-wrapper")&&(V!==y||V==="publicAPI")){J("selfClose")
}T.className=T.className||"";
var Y=LI.DialogRetrofitV2Enabled||false;
if(Y&&(T.className.split(" ").indexOf("dialog-v2")===-1)){T.className+=" dialog-v2-retrofit"
}H=T;
var aa=null;
if(typeof T.i18n==="object"){aa={};
YAHOO.lang.augmentObject(aa,e);
YAHOO.lang.augmentObject(e,T.i18n,true)
}w.className="dialog-mask dialog-"+T.type;
if(V!==y||V==="publicAPI"){F(T);
y=V
}u(T);
var X=Y$(".dialog-window",w,true);
YDom.setStyle(X,"width",T.width+"px");
YDom.setStyle(w,"visibility","hidden");
var Q=YDom.get("dialog-wrapper")||document.body.appendChild(document.createElement("DIV"));
Q.id="dialog-wrapper";
Q.innerHTML="";
if(T.className!==""){Q.className=T.className
}YDom.setStyle(Q,"top","");
YDom.setStyle(Q,"left","");
Q.appendChild(w);
LI.Controls.parseFragment(w);
var R=YDom.getStyle(w,"filter")||null,S=LI.Bidi,ae="left";
if(S){ae=S.flip("left")
}if(f.modal.match(T.type)){ac=YAHOO.util.Region.getRegion(X);
YDom.setStyle(X,"margin-"+ae,(T.width*-0.5)+"px");
var Z=YAHOO.util.Region.getRegion(Q);
if(T.scrollTopOnOpen){YDom.setStyle(document.getElementsByTagName("HTML")[0],"overflow","hidden")
}var U=YAHOO.util.Region.getRegion(Q).right-Z.right;
var af=U+A;
YDom.addClass(document.body,"dialog-mask-active");
if(YAHOO.env.ua.ie&&YAHOO.env.ua.ie<7){var W=YDom.getClientRegion();
YDom.setStyle(w,"height",(W.bottom-W.top)+"px")
}}else{ac=YAHOO.util.Region.getRegion(w);
var ab=parseInt(YDom.getStyle(X,"width"),10);
YDom.setStyle(Q,ae,(h()-ab)/2+"px");
YDom.setStyle(Q,"top",YDom.getDocumentScrollTop()+105+"px");
if(f.autoSize.match(T.type)){YDom.addClass(Q,"auto-size")
}else{YDom.removeClass(Q,"auto-size")
}if(f.dragNDrop.match(T.type)){C()
}}YEvent.on(window,"resize",m);
j.fire(V,T.name,T.extra);
if(YDom.getLastChild(document.body)!==Q){document.body.appendChild(document.body.removeChild(Q))
}if(!H.showOnlyWhenReady){YDom.setStyle(w,"visibility","")
}t.enable();
if(f.timeout.match(T.type)){D=setTimeout(function(){J("timer")
},2000)
}if(f.docClick.match(T.type)){YEvent.on(document,"click",J);
q=true
}if((YAHOO.env.ua.ie===6)&&(T.type==="task-modal"||T.type==="interrupt")){document.location.href="#header"
}if(ad!==null){if(T.stopEvent){YEvent.stopEvent(ad)
}else{YEvent.preventDefault(ad)
}}r.fire(V,T.name,T.extra);
if(T.webtrack&&T.webtrack.key&&typeof(WebTracking)!=="undefined"){WebTracking.trackUserAction(T.webtrack.key,T.webtrack.val)
}if(aa){e=aa
}s();
if(T.type==="task-modal"){YEvent.addListener(document,"focusin",G)
}}function G(Q){var R=YEvent.getTarget(Q);
if(!YDom.isAncestor(w,R)){YEvent.stopEvent(Q);
w.focus()
}}function s(){if(!w){return
}w.setAttribute("aria-labelledby","li-dialog-aria-label");
w.setAttribute("role","dialog");
w.tabIndex=-1;
w.focus()
}function L(){var Q=YDom.getFirstChild(Y$(".dialog-content",w,true));
if(!Q){return
}if(YDom.inDocument(I)){I.parentNode.replaceChild(Q,I)
}else{if(H.content&&(H.content.url||H.content.dustDataUrl)){E[H.content.url||H.content.dustDataUrl]=Q.parentNode.removeChild(Q)
}}}function K(R,Q,S){S=S||Y$(".dialog-message",w,true);
Q=(Q)?Q:"attention";
S.innerHTML="<p>"+(R)+"</p>";
YDom.addClass(S,"alert");
YDom.removeClass(S,"attention");
YDom.removeClass(S,"success");
YDom.removeClass(S,"error");
YDom.addClass(S,Q);
YDom.setStyle(S,"display","")
}function l(Q){Q=Q||Y$(".dialog-message",w,true);
if(Q){Q.innerHTML="";
LI.hide(Q)
}}function u(R){var X=(R&&R.content)?R.content:{};
var Q=Y$(".dialog-body",w,true);
if(R.dependencies){i(R)
}else{if((X.url&&(!X.useCache||!E[X.url]))||(X.dustDataUrl&&(!X.useCache||!E[X.dustDataUrl]))){var S=Y$(".dialog-content",w,true);
if(S){S.innerHTML=""
}YDom.addClass(Q,"dialog-body-loading");
if(X.url){v(X.url)
}else{if(X.dustDataUrl){o(X.dustDataUrl,X.dustTemplate)
}}}else{if(X.dustData){N(X.dustData,X.dustTemplate)
}else{if(X.attentionMsg||X.successMsg||X.node||X.html||(X.useCache&&X.url&&E[X.url])||(X.useCache&&X.dustDataUrl&&E[X.dustDataUrl])){var V=function(ad){var af=Y$(".dialog-message",ad,true);
var ae=Y$(".dialog-content",ad,true);
var aa=YDom.getNextSibling(ae);
var ac;
YDom.setStyle([af,ae,aa],"display","none");
if(X.attentionMsg||X.successMsg){ae.innerHTML="";
K((X.attentionMsg||X.successMsg),((X.successMsg)?"success":"attention"),af)
}if(X.node){var ab=YDom.get(X.node);
ab.parentNode.replaceChild(I,ab);
ae.innerHTML="";
ae.appendChild(ab);
YDom.setStyle(ae,"display","")
}else{if(X.html){ae.innerHTML=X.html;
YDom.setStyle(ae,"display","")
}else{if(X.useCache&&X.url&&E[X.url]){ae.innerHTML="";
ae.appendChild(E[X.url]);
YDom.setStyle(ae,"display","")
}}}if(R.content&&(R.content.submitButton||R.content.closeMessage)){YDom.setStyle(aa,"display","")
}LI.Controls.parseFragment(Q);
ac=Y$("iframe",ae);
if(ac.length){LI.show(ac)
}B.fire(H.name,H.extra)
};
var Z=P(R);
var U=YDom.inDocument("dialog-wrapper");
var T=Q.cloneNode(true);
var W=Q.parentNode;
var Y=YDom.getStyle(Q,"height");
YDom.setStyle(Q,"height",Y);
L();
YDom.setStyle(Q,"height","");
Q.innerHTML=Z;
V(Q)
}}}}}function i(V){var X=V.dependencies;
if(typeof X==="string"){X=LI.Controls.resolveName(X)
}if(!X){return
}var Q=(X.jsFiles===undefined),W=(X.cssFiles===undefined),S;
var U=Y$(".dialog-body",w,true);
YDom.addClass(U,"dialog-body-loading");
var T=function(){if(S){return
}if(Q&&W){S=true;
YDom.removeClass(U,"dialog-body-loading");
delete V.dependencies;
u(V)
}};
var R=function(){var Y=['<div class="dialog-container interrupt">','<div class="alert attention"><p><strong>'+LI.i18n.get("Dialog-error-generic")+"</strong></p></div>","</div>"].join(" ");
u({name:V.name,content:{html:Y,closeMessage:true}})
};
if(!Q||!W){if(!Q){YAHOO.util.Get.script(X.jsFiles,{onSuccess:function(){Q=true;
T()
},onFailure:function(){R()
},timeout:1000})
}if(!W){YAHOO.util.Get.css(X.cssFiles,{onSuccess:function(){W=true;
T()
},onFailure:function(){R()
},timeout:1000})
}}else{T()
}}return{contentChangeEvent:B,close:function(){J("selfClose")
},closeEvent:p,open:function(){var Q,R;
if(arguments.length===1){Q=null;
R=arguments[0]
}else{Q=arguments[0];
R=arguments[1]
}M(Q,R)
},openEvent:r,beforeOpenEvent:j,submitEvent:z,swapEvent:n,swap:function(R){var Q=(H&&H.name)?H.name:"";
l();
u(R);
if(H){n.fire("",Q,H.extra)
}},injectAlert:K,removeAlert:l,handlesOwnLazyLoading:true}
}}());
YAHOO.register("LI.Dialog",LI.Dialog,{});(function(){var a="action",k="bulkActions",b="bulkUIMgr",f="checkboxMgr",l="element",g="inbox-item",h=".inbox-item",c=".inbox-list",e="display",d="zIndex",j=999;
function i(n,m){i.superclass.constructor.apply(this,arguments);
m=m||{};
this.countEl=m.countEl||null;
this.blockedCountEl=m.blockedCountEl||null;
this.headerCountEl=m.headerCountEl||null;
this.navCountEl=(this.countEl)?YDom.get("nav-primary-inbox-item-total"):null;
this.context=m.context||"inbox";
YDom.batch(Y$(h,this.get(l)),this.initItem,this,true);
if(this.get(k)){var p=new LI.CheckboxManager(n);
var o=new LI.InboxBulkUIManager(n,{checkboxMgr:p});
this.setAttributeConfig(f,{value:p});
this.setAttributeConfig(b,{value:o});
o.subscribe(a,this._onBulkAction,this,true);
o.update()
}}YAHOO.extend(i,YAHOO.util.Element,{_onBulkAction:function(m){var n=[];
YDom.batch(m.checked,function(o){n.push(YDom.getAncestorByClassName(o,g))
});
if(n.length){this.processBulkAction(n,m.type)
}},addItems:function(p,o){o=o||{};
var m=this.get(l),r=Y$(c,m,true),t=Y$(h,p),x=YDom.getElementsByClassName("total-count","span",p)[0],s=t.length,q,v,u,n=[];
if(!o.hidden){YDom.setStyle(r,e,"none")
}for(q=0;
q<s;
++q){v=t[q];
if(o.hidden){YDom.setStyle(v,e,"none")
}u=v.cloneNode(false);
r.appendChild(u);
u.innerHTML=v.innerHTML;
LI.Controls.parseFragment(u);
this.initItem(u);
n[q]=u
}if(!o.hidden){YDom.setStyle(r,e,"")
}var w=this.get(f);
if(w){w.update()
}if(s){YDom.removeClass(m,"inbox-null")
}if(x&&this.getNumItems()>=parseInt(x.innerHTML,10)){this.set("disableBackfill",true)
}return n
},adjustPendingCount:function(n){var m=null,s=this.countEl,r=this.navCountEl,q=this.headerCountEl;
if(s){m=this.getPendingCount()+n;
LI.toggleClass(s,"null-count",(m<1));
s.innerHTML=m
}if(q){var o=parseInt(q.innerHTML,10)||0;
if(o>j){return false
}o+=n;
q.innerHTML=o;
if(o<=0){YDom.setStyle(q,"display","none")
}}if(r){var p=parseInt(r.title,10)||0;
p+=n;
r.title=p;
if(p<=j){if(YDom.hasClass(r,"count")){r.innerHTML=(p>0)?""+p:"";
if(p==0){YDom.setStyle(r,"display","none")
}else{YDom.setStyle(r,"display","")
}}else{r.innerHTML=(p>0)?"("+p+")":""
}}}},backfillRequest:function(m,n){LI.RequestQueue.enqueue({method:"GET",url:this.getBackfillRequestUrl(m),callback:n})
},clearAlert:function(){var m=this.alertEl;
if(m&&m.parentNode){m.parentNode.removeChild(m)
}this.alertEl=null
},getAction:function(m){if(m){return m.getAttribute("data-action")
}else{return false
}},getActionAncestor:function(m){var n=function(o){return o.getAttribute("data-action")
};
return(n(m))?m:YDom.getAncestorBy(m,n)
},getActionDescendant:function(m,n){return YDom.getElementBy(function(o){return o.getAttribute("data-action")==n
},"a",m)
},getActionRequestUrl:function(n){if(n){var m=n.getAttribute("data-action-url");
if(m&&m.indexOf("?")>=0){m+=("&ctx="+this.context)
}return m
}else{return false
}},getAlertEl:function(){if(!this.alertEl){var m=Y$(c,this.get(l),true);
this.alertEl=m.parentNode.insertBefore(LI.domify('<div class="inbox-alert"></div>'),m)
}return this.alertEl
},getBulkActionAfterFn:function(m){return null
},getBulkActionRequestCallback:function(m){return{success:function(A){var r=A.argument||{},u=r.responseFn,t=r.afterFn,q=LI.domify(A.responseText),D=Y$(".alert-msg",q,true),y=Y$(".alert-type",q,true),F=(D)?YAHOO.lang.trim(D.innerHTML):"",z=(y)?y.innerHTML:"";
if(u){var w=Y$(".response-list > li",q),x=w.length,n=Y$(h,this.get(l)),s=n.length,p,v,E,C,B;
for(C=0;
C<x;
++C){p=w[C];
v=this.getItemGID(p);
for(B=0;
B<s;
++B){E=n[B];
if(v==this.getItemGID(E)){u.apply(this,[p,E]);
break
}}}}if(F){LI.injectAlert(F,z,this.getAlertEl())
}else{this.clearAlert()
}if(t){t.apply(this,[q])
}},failure:function(n){this.clearAlert()
},scope:this}
},getBulkActionResponseFn:function(m){return null
},getItemGID:function(m){return m.getAttribute("data-gid")
},getNumItems:function(){return Y$(h,this.get(l)).length
},getPendingCount:function(){if(!this.countEl){return 0
}return parseInt(this.countEl.innerHTML,10)||0
},getBlockedPendingCount:function(){if(!this.blockedCountEl){return 0
}return parseInt(this.blockedCountEl.innerHTML,10)||0
},initItem:function(m){},initAttributes:function(){i.superclass.initAttributes.apply(this,arguments);
this.setAttributeConfig(k,{value:false});
this.setAttributeConfig("sinceDate",{value:0});
this.setAttributeConfig("disableBackfill",{value:false});
this.setAttributeConfig("animate",{value:true})
},processBulkAction:function(n,m){LI.RequestQueue.enqueue({method:"POST",url:"/inbox/bulk_action",form:Y$("form[name=bulkActionForm]",this.get(l),true),postData:m+"=1",callback:this.getBulkActionRequestCallback(m)})
},processItemAction:function(m,n){},showItem:function(o,n){if(!o){return
}YDom.setStyle(o,e,"");
if(n){var m=o.offsetHeight;
YDom.setStyle(o,"marginTop",-m+"px");
var p=YDom.getPreviousSiblingBy(o,function(r){return YDom.hasClass(r,g)
});
YDom.setStyle(p,d,1);
YDom.setStyle(o,d,0);
var q=new YAnim(o,{marginTop:{from:-m,to:0}},0.25);
q.onComplete.subscribe(function(){YDom.setStyle(o,"marginTop","");
YDom.setStyle(p,d,"");
YDom.setStyle(o,d,"")
});
q.animate()
}},removeItem:function(n){function m(o){YEvent.purgeElement(o,true);
o.parentNode.removeChild(o)
}if(YAHOO.lang.isArray(n)){YDom.batch(n,m)
}else{m(n)
}},renderUI:function(){var m=this.get(l);
LI.toggleClass(m,"inbox-null",!Y$(h,m,true));
var n=this.get(f);
if(n){n.update()
}},replaceList:function(n){var m=this.get(l),p=Y$(c,m,true),s=Y$(c,n,true),r=Y$(h,s),u=YDom.getElementsByClassName("total-count","span",n)[0],q=r.length,v=YDom.getXY(m),o,t;
for(o=0;
o<q;
++o){t=r[o];
this.initItem(t)
}YEvent.purgeElement(p,true);
p.parentNode.replaceChild(s,p);
this.set("sinceDate",Y$(".since-date",n,true).innerHTML);
this.set("disableBackfill",u&&this.getNumItems()>=parseInt(u.innerHTML,10));
this.renderUI();
window.scrollTo(v[0],v[1])
},setAction:function(m,n){m.setAttribute("data-action",n)
}});
LI.InboxBaseListView=i
})();(function(){var e="click",l="element",f=0.4,r="GET",q="hide",b="hide-relationship",m="inbox-item",a="invite-dialog",n="item-confirmation",d="show",g="show-relationship",c="toggle-relationship",o=".confirmation",p=".ignore-confirmation",i=".inbox-item",h=".inbox-list",j="height";
function k(t,s){s=s||{};
k.superclass.constructor.apply(this,arguments);
this.grow=s.grow||false;
this.backfillUrl=s.backfillUrl||"";
YEvent.on(t,e,this._onClick,this,true);
if(s.lazyEvent){this._onClick(s.lazyEvent)
}this.snackUrl=s.snackUrl;
this.dismissAcceptedInviteUrl=s.dismissAcceptedInviteUrl;
if(this.snackUrl&&this.dismissAcceptedInviteUrl){this.inviteDialog=new LI.InviteDialog(t,{showGlobalSuccess:false});
this.inviteDialog.onInviteSuccess.subscribe(this.handleInviteDialogSuccess,null,this)
}this.showMoreLink=YDom.getElementsByClassName("show-more-invitations","div",t);
this.toggleShowMoreLink=function(){var u=this.getPendingCount();
if(this.get("showBlocked")){u=this.getBlockedPendingCount()
}if(this.getNumItems()>=u){LI.hide(this.showMoreLink)
}else{LI.show(this.showMoreLink)
}};
if(this.showMoreLink&&this.showMoreLink.length){this.toggleShowMoreLink()
}}YAHOO.extend(k,LI.InboxBaseListView,{_onClick:function(x){var y=YEvent.getTarget(x),B=YDom.hasClass(y,"note-toggle")?y:YDom.getAncestorByClassName(y,"note-toggle"),A=YDom.hasClass(y,m)?y:YDom.getAncestorByClassName(y,m),s=this.getActionAncestor(y),u=this.getAction(s),E,F,z,C;
if(u&&u!=="gotoMBoxItem"&&u!=="replyToSender"){YEvent.preventDefault(x);
this.processItemAction(A,u)
}if(this.context==="nav"&&(!YDom.hasClass(y,"btn-menu"))&&(!YDom.hasClass(y,"toggle-btn"))&&(y.tagName.toUpperCase()!=="A")){z=YDom.getElementsByClassName("profile-link","a",A);
if(z&&z.length){window.location=z[0].href;
return
}}if(B){YEvent.preventDefault(x);
var D=YDom.getElementsByClassName("full-note","span",A)[0];
if(D){LI.toggleClass(A,"show-full-note")
}else{E={success:function(K){var J=LI.domify(K.responseText);
var H=YDom.getElementsByClassName("body","span",J)[0],I=YDom.getElementsByClassName("note","span",A)[0],G=YDom.getElementsByClassName("full-note","span",I)[0];
if(G){G.innerHTML=""
}else{G=I.parentNode.insertBefore(LI.domify('<span class="full-note"></span>'),I)
}G.appendChild(H);
LI.toggleClass(A,"show-full-note")
},failure:function(G){},scope:this};
LI.asyncRequest(r,"/inbox/viewInboxNote?gid="+this.getItemGID(A),E)
}return
}if(YDom.hasClass(y,"close-confirmation")){YEvent.preventDefault(x);
if(YDom.hasClass(y,"dismiss")){this.fireWebTrackingEvent(y);
this.showNextResource(y);
return
}if(YDom.hasClass(y.parentNode,"invite-accepted")){F=y.parentNode;
C=YDom.getAttribute(F,"data-li-id");
LI.asyncRequest(r,this.dismissAcceptedInviteUrl+"?sRem="+C,{failure:function(){},success:function(){},scope:this})
}if(!this.get("disableBackfill")&&!this.grow&&(this.getNumItems()<this.getPendingCount())){E=this.getActionBackfillRequestCallback();
E.argument={removeConfirmation:A};
this.backfillRequest(1,E)
}else{this.removeItem(A)
}this.renderUI();
return
}if(YDom.hasClass(y,"show-blocked")||YDom.hasClass(y,"hide-blocked")){YEvent.preventDefault(x);
this.set("showBlocked",YDom.hasClass(y,"show-blocked"));
LI.toggleClass(this.get(l),"showing-blocked",this.get("showBlocked"));
E={success:function(G){this.replaceList(LI.domify(G.responseText));
if(this.showMoreLink&&this.showMoreLink.length){this.toggleShowMoreLink()
}},failure:function(G){},scope:this};
LI.RequestQueue.enqueue({method:r,url:"/inbox/invitations/pending/more?startRow=1&count=20&showBlocked="+this.get("showBlocked"),callback:E});
return
}if(YDom.hasClass(y,"confirmation")){var w=Y$(".toggle",y,true)[0];
if(YDom.hasClass(w,g)){this.toggleInvitationAcceptSnacks(true,w)
}}if(YDom.hasClass(y,c)){YEvent.preventDefault(x);
this.toggleInvitationAcceptSnacks(YDom.hasClass(y,g),y);
return
}if(YDom.hasClass(y,"connect")){var t=YDom.getAncestorByClassName(y,"snack");
if(YDom.hasClass(t,"groups")){return
}YEvent.preventDefault(x);
this.fireWebTrackingEvent(y);
if(!YDom.hasClass(y,a)){this.connectToResource(y)
}else{this.pymkConnectLink=y
}}if(YDom.hasClass("view-resource")){this.fireWebTrackingEvent(y)
}var v=YDom.getAncestorByClassName(y,"show-more-invitations");
if(v){YEvent.preventDefault(x);
E={success:function(G){this.addItems(LI.domify(G.responseText));
this.toggleShowMoreLink();
LI.Events&&LI.Events.fire("inbox-pending-invite_show-more-completed")
},failure:function(G){},scope:this,cache:false};
this.backfillRequest(20,E)
}},handleInviteDialogSuccess:function(){var s=this.pymkConnectLink.parentNode;
s.innerHTML='<span class="connect-confirmation">'+LI.i18n.get("InboxPendingInvitationListView-invitation-sent")+"</span>";
this.showNextResource(s)
},connectToResource:function(s){if(YDom.hasClass(s,"company")){var t={success:function(w){var v=LI.domify(w.responseText);
if(v.tagName&&v.tagName.toLowerCase()=="p"){v.innerHTML=LI.i18n.get("InboxPendingInvitationListView-now-following")
}var u=s.parentNode;
u.innerHTML=v.innerHTML;
this.showNextResource(u)
},failure:function(){},scope:this};
LI.asyncRequest(r,YDom.getAttribute(s,"data-li-connect-href"),t)
}},fireWebTrackingEvent:function(v){if(WebTracking&&WebTracking.trackUserAction){var u=YDom.getAttribute(v,"data-li-clicktrack-action"),t=YDom.getAttribute(v,"data-li-id"),w=YDom.getAncestorByClassName(v,"invite-accepted"),s=w?YDom.getAttribute(w,"data-li-context-id"):null;
if(u){WebTracking.trackUserAction(u,(t)?"target_id:"+t:"",true,s)
}}},initAttributes:function(){k.superclass.initAttributes.apply(this,arguments);
this.setAttributeConfig("showBlocked",{value:false})
},isValidDataEl:function(s){return s.tagName&&YDom.hasClass(s,"data-el")
},getActionBackfillRequestCallback:function(){return{success:function(t){var x=LI.domify(t.responseText);
var u=this.get(l),A=Y$(h,u,true),v,E;
if(this.single_item){var C=Y$(i,x);
var B=C.length;
var s=Y$("#invitationsOneLineSummary",x,true);
if(s){var G=YDom.get("invitations-and-more");
if(G){var z=YDom.getChildrenBy(G,function(H){return H.nodeName.toUpperCase()==="A"
})[0];
z.innerHTML=s.innerHTML
}}for(var y=1;
y<B;
y++){var F=C[y];
F.parentNode.removeChild(F)
}if(B<2){LI.hide("invitations-and-more-container")
}}var D=Y$(i,x,true);
if(t.argument){v=t.argument.removeConfirmation
}if(D){if(this.grow){E=this.addItems(x,{hidden:true})[0];
this.showItem(E,this.get("animate"))
}else{E=D.cloneNode(false);
if(this.get("animate")){YDom.setStyle(E,"opacity",0)
}if(v){if(this.single_item){A.removeChild(v);
A.appendChild(E)
}else{A.replaceChild(E,v)
}}else{A.appendChild(E)
}E.innerHTML=D.innerHTML;
LI.Controls.parseFragment(E);
if(this.get("animate")){var w=new YAnim(E,{opacity:{to:1}},0.5);
w.animate()
}this.initItem(E)
}}else{this.set("disableBackfill",true);
if(v){A.removeChild(v)
}}this.renderUI()
},failure:function(s){},scope:this,cache:false}
},getActionRequestCallback:function(t,s){return{success:function(v){var w=LI.domify(v.responseText);
if(this.isValidDataEl(w)){var x=Y$("."+n,this.get(l),true);
var A=v.argument.itemEl;
YDom.setStyle(A,j,"");
if(!YDom.hasClass(A,n)){YDom.addClass(A,n);
this.adjustPendingCount(-1)
}A.innerHTML="";
var u=(t=="invitationIgnore")?p:o,y=Y$(u,w,true),B=y.cloneNode(false);
A.appendChild(B);
B.innerHTML=y.innerHTML;
LI.Controls.parseFragment(B);
var z={invitationIgnore:1,invitationAccept:1};
if(!this.get("disableBackfill")&&(this.grow||(x&&x!==A)||(this.single_item&&z[t]))&&(this.getNumItems()<this.getPendingCount())){var C=this.getActionBackfillRequestCallback();
if(!this.grow){C.argument={removeConfirmation:x}
}this.backfillRequest((this.single_item)?3:1,C)
}else{if(this.single_item&&x&&z[t]){x.parentNode.removeChild(x)
}}}},failure:function(u){},scope:this,argument:{itemEl:s}}
},getBackfillRequestUrl:function(u){var s=this.getNumItems()+1,t=this.backfillUrl||"/inbox/invitations/pending/more";
return t+"?sinceDate="+this.get("sinceDate")+"&startRow="+s+"&count="+u+"&showBlocked="+this.get("showBlocked")+"&ctx="+this.context
},getBulkActionRequestCallback:function(s){var t=k.superclass.getBulkActionRequestCallback.apply(this,arguments);
t.argument={afterFn:function(v){var u=parseInt(Y$(".success-count",v,true).innerHTML,10);
this.adjustPendingCount(-u);
if(!this.get("disableBackfill")){var w={success:function(x){this.addItems(LI.domify(x.responseText))
},failure:function(x){},scope:this,cache:false};
this.backfillRequest(u,w)
}},responseFn:function(y,x){YDom.addClass(x,n);
x.innerHTML="";
var w=(s=="bulkInvitationIgnore")?p:o,u=Y$(w,y,true),v=u.cloneNode(false);
x.appendChild(v);
v.innerHTML=u.innerHTML;
LI.Controls.parseFragment(v)
}};
return t
},getNumItems:function(){return Y$(i+":not(."+n+")",this.get(l)).length
},processItemAction:function(s,t){LI.RequestQueue.enqueue({method:r,url:this.getActionRequestUrl(this.getActionDescendant(s,t)),callback:this.getActionRequestCallback(t,s)});
YDom.setStyle(s,j,LI.getBoxModelHeight(s)+"px");
YDom.addClass(s,"submitting");
YDom.addClass(s,"item-deleting");
s.innerHTML='<div class="submitting">'+LI.i18n.get("InboxPendingInvitationListView-submitting")+"</div>"
},toggleInvitationAcceptSnacks:function(s,x){var w=YDom.getAncestorByClassName(x,"content"),t=YDom.getElementBy(function(A){return YDom.hasClass(A,"snacks")
},null,w),u,v,y,z;
if(s){z=function(){YDom.replaceClass(t,q,d);
x.innerHTML=LI.i18n.get("InboxPendingInvitationListView-hide-details");
YDom.replaceClass(x,g,b)
};
if(Y$("li",t).length){z()
}else{v=YDom.getAncestorByClassName(x,"confirmation");
y=YDom.getAttribute(v,"data-li-id");
u=YDom.getAttribute(v,"data-li-auth");
LI.asyncRequest(r,this.snackUrl+"?senderID="+y+"&authToken="+u,{failure:function(){},success:function(A){t.innerHTML=A.responseText;
z()
},scope:this})
}}else{YDom.replaceClass(t,d,q);
x.innerHTML=LI.i18n.get("InboxPendingInvitationListView-show-details");
YDom.replaceClass(x,b,g)
}},showNextResource:function(y){var x=YDom.getAncestorByTagName(y,"ul");
var w=YDom.getChildrenBy(x,function(z){return z.tagName.toLowerCase()=="li"
});
var u=parseInt(YDom.getAttribute(x,"data-li-max-visible"));
if(w.length>u){var t=YDom.getAncestorByTagName(y,"li");
var v=w[w.length-1];
YDom.setStyle(v,"opacity","0");
var s=new YAnim(t,{opacity:{to:0}},f);
s.onComplete.subscribe(function(){x.replaceChild(v,t);
YDom.removeClass(v,"hidden");
var z=new YAnim(v,{opacity:{to:1}},f);
z.onComplete.subscribe(function(){var A=Y$(".hidden",x,true);
if((YAHOO.lang.isNull(A))||(YAHOO.lang.isArray(A)&&A.length==0)){YDom.removeClass(x,"allow-dismiss")
}});
z.animate()
});
s.animate()
}}});
LI.InboxPendingInvitationListView=k
})();
YAHOO.register("LI.InboxPendingInvitationListView",LI.InboxPendingInvitationListView,{});(function(){var e="archive",p="trash",c="deletePerm",g="star",j="recover",x="unstar",m="reportSpam",A="bulkArchive",k="bulkTrash",D="bulkPermanentDelete",B="bulkMarkRead",t="bulkMarkUnread",i="bulkRecover",f="filter",w="keywords",h="rowsPerPage",s="sort",u="element",v="inbox-item",l="inbox-null",b="item-removing",n="unread",q=".inbox-item",o=".inbox-list",z={none:"null-default",unread:"null-unread",userStarred:"null-flagged",inmail:"null-inmail",recommendation:"null-recommendations",introduction:"null-intros",profile:"null-profiles",job:"null-jobs",blocked:"null-blocked"},r="height",y="hidden",d=YAHOO.lang;
function C(H,G){G=G||{};
if(G.rowsPerPage&&G.totalRecords&&YAHOO.lang.isUndefined(G.disableBackfill)&&G.rowsPerPage>=G.totalRecords){G.disableBackfill=true
}C.superclass.constructor.apply(this,arguments);
this.moveFiltersAndSort();
this.folder=G.folder||"received";
this.type=G.type||"messages";
this.totalRecords=G.totalRecords;
this.backfillUrl=G.backfillUrl||"";
if(this.folder==="trash"){this.emptyTrashBtns=Y$(".empty-trash-btn",H);
YEvent.on(this.emptyTrashBtns,"click",function(K){this.emptyTrash()
},this,true)
}var J=Y$("div.filters",H,true);
var F="inbox-subFilter";
if(J){this.filterDropdown=new LI.StyledDropdown(J,{name:F,align:"right",listClass:"drop"})
}var I=Y$("div.sort",H,true);
var E="inbox-sortBy";
if(I){this.sortDropdown=new LI.StyledDropdown(I,{name:E,align:"right",listClass:"drop"})
}if(J||I){LI.StyledDropdown.itemSelectEvent.subscribe(function(M,L){var K=L[0];
var N=L[1];
if(K===F){if(N.value!==this.get(f)){this.trackAction(f,N.value);
this.set(f,N.value)
}}else{if(K===E){if(N.value!==this.get(s)){this.trackAction(s,N.value);
this.set(s,N.value)
}}}},this,true)
}this.on("filterChange",this._onQueryChange,this,true);
this.on("sortChange",this._onQueryChange,this,true);
YEvent.on(H,"click",this._onClick,this,true);
if(G.lazyEvent){this._onClick(G.lazyEvent)
}if(G.skipHistory!==true){YEvent.onDOMReady(function(){a.init(this,this._onHistoryReady,this._onHistoryNavigate)
},this,true)
}this.renderUI()
}YAHOO.extend(C,LI.InboxBaseListView,{_onClick:function(J){var I=YEvent.getTarget(J),E=YDom.hasClass(I,v)?I:YDom.getAncestorByClassName(I,v),F=this.getActionAncestor(I),G=this.getAction(F),H=this.getActionRequestUrl(F),K;
if(G&&H){YEvent.preventDefault(J);
this.processItemAction(E,G)
}else{if(this.context==="nav"&&I.tagName.toUpperCase()!=="A"){K=YDom.getElementsByClassName("detail-link","a",E)[0];
if(K){window.location=K.href
}}}},_onQueryChange:function(E){if(!this.bypassQueryChange){this.set("startRow",1);
a.navigate(this.createHistoryState())
}},_onHistoryReady:function(E){this.bypassQueryChange=false;
if(E){this._onHistoryNavigate(E)
}},_onHistoryNavigate:function(E){this.showProcessingOverlay();
var F={success:function(H){var G=this.getHistoryStateAsObject(E);
this.set("startRow",G.startRow);
this.set("rowsPerPage",G.count);
this.set("keywords",G.keywords);
this.bypassQueryChange=true;
this.set("filter",G.subFilter);
this.set("sort",G.sortBy);
if(this.filterDropdown){this.filterDropdown.setSelectedValue(G.subFilter)
}if(this.sortDropdown){this.sortDropdown.setSelectedValue(G.sortBy)
}this.bypassQueryChange=false;
if(this.paginator){this.paginator.setState(this.paginator.getState({recordOffset:G.startRow-1}))
}this.replaceList(LI.domify(H.responseText));
this.hideProcessingOverlay()
},failure:function(){this.hideProcessingOverlay()
},scope:this};
LI.RequestQueue.enqueue({callback:F,method:"GET",url:"/inbox/"+this.type+"/"+this.folder+"/more?"+E})
},emptyTrash:function(){var F=this.get(u);
var H={success:function(J){var I;
var K={success:function(N){var M=LI.domify(N.responseText);
var L=Y$(".completed",M,true);
if(L&&parseInt(L.innerHTML,10)){LI.injectAlert(Y$(".alert-msg",M,true).innerHTML,Y$(".alert-type",M,true).innerHTML,this.getAlertEl());
window.clearInterval(I)
}this.renderUI()
},failure:function(L){window.clearInterval(I)
},scope:this};
I=window.setInterval(function(){LI.RequestQueue.enqueue({method:"GET",url:"/inbox/trash/check",callback:K})
},500)
},failure:function(I){},scope:this};
var E="csrfToken="+Y$("input[name=csrfToken]",F,true).value+"&sourceAlias="+Y$("input[name=sourceAlias]",F,true).value;
LI.RequestQueue.enqueue({method:"POST",postData:E,url:"/inbox/trash/empty",callback:H});
var G=Y$(o,this.get(u),true);
YEvent.purgeElement(G,true);
G.innerHTML="";
YDom.addClass(F,l)
},getActionRequestCallback:function(F,E){if(F===g){return{success:function(G){this.clearAlert();
YDom.addClass(G.argument.itemEl,"flagged")
},scope:this,argument:{itemEl:E}}
}if(F===x){return{success:function(G){this.clearAlert();
YDom.removeClass(G.argument.itemEl,"flagged")
},scope:this,argument:{itemEl:E}}
}return{success:function(I){var G=this.get("animate");
this.clearAlert();
function H(L){var N=E.parentNode;
if(YDom.hasClass(E,n)){this.adjustPendingCount(-1)
}this.setTotalRecords(this.totalRecords-1);
if(G){if(L){YDom.setStyle(N,r,N.offsetHeight+"px");
YDom.setStyle(N,"overflow",y);
this.showItem(L)
}var K=LI.getBoxModelHeight(E);
YDom.setStyle(E,"overflow",y);
YDom.setStyle(E,"minHeight","");
var M=new YAnim(E,{height:{from:K,to:0}},0.25);
M.onComplete.subscribe(function(){if(L){YDom.setStyle(N,r,"");
YDom.setStyle(N,"overflow","")
}this.removeItem(E);
this.renderUI()
},this,true);
M.animate()
}else{if(L){this.showItem(L)
}this.removeItem(E)
}this.renderUI()
}if(!this.get("disableBackfill")){var J={success:function(P){var O=LI.domify(P.responseText),M=this.get(u),N=Y$(o,M,true),L,K;
L=this.addItems(O,{hidden:true})[0];
this.set("disableBackfill",!L);
H.call(this,L)
},failure:function(K){H.call(this)
},scope:this,cache:false};
this.backfillRequest(1,J)
}else{H.call(this)
}},failure:function(G){this.clearAlert()
},custom:{exception:function(){return false
}},scope:this,argument:{itemEl:E}}
},getBackfillRequestUrl:function(G){var E=this.getNumItems()+1,F=this.backfillUrl||"/inbox/"+this.type+"/"+this.folder+"/more";
return F+"?sinceDate="+this.get("sinceDate")+"&startRow="+E+"&count="+G+"&subFilter="+this.get("filter")+"&sortBy="+this.get("sort")+"&keywords="+this.get("keywords")+"&ctx="+this.context
},getBulkActionRequestCallback:function(F){var H=C.superclass.getBulkActionRequestCallback.apply(this,arguments),E=0;
switch(F){case k:case A:case D:case i:var G=[];
H.argument={afterFn:function(K){function J(){this.removeItem(G);
this.adjustPendingCount(-I);
this.renderUI()
}var I=parseInt(Y$(".success-count",K,true).innerHTML,10);
this.setTotalRecords(this.totalRecords-I);
if(!this.get("disableBackfill")){var L={success:function(O){var N=LI.domify(O.responseText),M=this.addItems(N);
this.set("disableBackfill",!M.length);
J.call(this)
},failure:function(M){J.call(this)
},scope:this,cache:false};
this.backfillRequest(I,L)
}else{J.call(this)
}},responseFn:function(I,J){YDom.addClass(J,b);
G.push(J)
}};
break;
case B:H.argument={afterFn:function(I){this.adjustPendingCount(-E)
},responseFn:function(I,J){if(YDom.hasClass(J,n)){YDom.removeClass(J,n);
++E
}}};
break;
case t:H.argument={afterFn:function(I){this.adjustPendingCount(E)
},responseFn:function(I,J){if(!YDom.hasClass(J,n)){YDom.addClass(J,n);
++E
}}};
break
}return H
},getNumItems:function(){return Y$(q+":not(."+b+")",this.get(u)).length
},getPageRequestUrl:function(E){return"/inbox/"+this.type+"/"+this.folder+"/more?startRow="+E+"&count="+this.get(h)+"&subFilter="+this.get(f)+"&sortBy="+this.get(s)+"&keywords="+this.get(w)
},initAttributes:function(E){C.superclass.initAttributes.apply(this,arguments);
var F=this.get(u);
this.setAttributeConfig("folder",{value:"received"});
this.setAttributeConfig("rowsPerPage");
this.setAttributeConfig("keywords",{value:""});
this.setAttributeConfig("startRow",{value:1});
this.setAttributeConfig("filter",{value:"none",validator:function(H){return !!H
}});
this.setAttributeConfig("sort",{value:"DATE",validator:function(H){return !!H
}});
var G=Y$(".pagination",F,true);
if(G){this.paginator=new LI.Paginator(G,{rowsPerPage:E.rowsPerPage,totalRecords:E.totalRecords,recordOffset:E.recordOffset});
this.paginator.subscribe("changeRequest",function(H){this.set("startRow",H.recordOffset+1);
a.navigate(this.createHistoryState())
},this,true);
this.paginator.render()
}},moveFiltersAndSort:function(){var F=this.get(u);
var I=Y$("form.filters-sort",F,true);
if(!I){return
}var H=Y$(".js-filters-sort",F,true);
var G=Y$(".filters",I,true);
var E=Y$(".sort",I,true);
if(G){H.appendChild(G)
}if(E){H.appendChild(E)
}},processItemAction:function(F,H,E){this.trackAction("item_action",H);
var G=H===p||H===e||H===j||H===c||H===m;
if(G){YDom.addClass(F,b)
}LI.RequestQueue.enqueue({method:"GET",url:this.getActionRequestUrl(this.getActionDescendant(F,H)),callback:this.getActionRequestCallback(H,F)});
if(G){YDom.setStyle(F,r,LI.getBoxModelHeight(F)+"px");
YDom.addClass(F,"submitting");
F.innerHTML='<div class="submitting">Submitting...</div>'
}},processBulkAction:function(F,E){this.trackAction("bulk_action",E);
C.superclass.processBulkAction.apply(this,arguments)
},replaceList:function(G){C.superclass.replaceList.apply(this,arguments);
var F=YDom.getElementsByClassName("total-count","span",G)[0],E;
if(!F){return
}E=parseInt(F.innerHTML,10);
this.setTotalRecords(E);
if(this.paginator){this.set("disableBackfill",(this.paginator.getState().recordOffset+this.getNumItems())>=E)
}},renderUI:function(){C.superclass.renderUI.apply(this,arguments);
var E=this.get(u);
var G=YDom.hasClass(E,l);
if(G){var F=Y$(".inbox-null-msg > p",E);
LI.hide(F);
var J=this.get(f);
var I=z[J];
if(YAHOO.lang.isUndefined(I)){I=z["none"]
}var H=YDom.getElementsByClassName(I,"p",E);
LI.show(H)
}if(this.emptyTrashBtns){YDom.batch(this.emptyTrashBtns,function(K){if(G){K.setAttribute("disabled",true)
}})
}},setTotalRecords:function(E){this.totalRecords=E;
if(this.paginator){this.paginator.setState(this.paginator.getState({totalRecords:E}))
}},showProcessingOverlay:function(){var H=YAHOO.env.ua.ie,E=(H===6),F=this.get(u),G=Y$(".progress-indicator",F,true);
if(G){if(E){YDom.setStyle(G,"height",F.offsetHeight)
}YDom.setStyle(G,"display","block")
}},hideProcessingOverlay:function(){var E=Y$(".progress-indicator",this.get(u),true);
if(E){YDom.setStyle(E,"display","none")
}},createHistoryState:function(){var E=[];
E.push("startRow="+this.get("startRow"));
E.push("&count="+this.get("rowsPerPage"));
E.push("&subFilter="+this.get("filter"));
E.push("&sortBy="+this.get("sort"));
E.push("&keywords="+this.get("keywords"));
return E.join("")
},getHistoryStateAsObject:function(E){var F=YAHOO.lang,H={},J=E.split("&"),K=J.length,I,L,M,G;
if(F.isString(E)&&F.trim(E)!==""){for(I=0;
I<K;
++I){L=J[I].split("=");
M=L[0];
G=L[1];
H[M]=G
}}else{H={startRow:1,count:this.get("rowsPerPage"),subFilter:"none",sortBy:"DATE",keywords:""}
}return H
},trackAction:function(F,G){if(WebTracking){var E=[];
E.push("action:"+G);
E.push("type:"+this.type);
E.push("folder:"+this.folder);
WebTracking.trackUserAction("list_view-"+F,E.join("|"),true)
}}});
LI.InboxMessageListView=C;
var a=(function(){var K=YAHOO.util.Dom,I=YAHOO.util.History,G="l1nbx",F="yui-history-field",E="yui-history-iframe",H=false;
function J(){var N=YAHOO.env.ua,Q=document,L=Q.body,P,O;
if(!K.get(F)){P=Q.createElement("input");
P.id=F;
P.type="hidden";
L.insertBefore(P,L.firstChild)
}if(N.ie&&N.ie<8&&!K.get(E)){O=Q.createElement("iframe");
O.id=E;
var M="java";
O.src=M+"script:false;";
L.insertBefore(O,L.firstChild)
}}return{init:function(O,L,N){J();
var M=I.getBookmarkedState(G)||"";
I.register(G,M,N,O,true);
I.initialize(F,E);
I.onReady(function(){H=true;
if(L){L.call(O,M)
}})
},navigate:function(L){if(!H){return
}I.navigate(G,L)
}}
}())
}());