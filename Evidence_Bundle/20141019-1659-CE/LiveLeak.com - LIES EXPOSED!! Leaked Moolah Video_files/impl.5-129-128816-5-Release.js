/*! 5-129-128816-5-Release 2014-10-12 */
function __trcCopyProps(a,b,c){for(d in a)b[d]=a[d];if(c)for(var d in c)b[d]=c[d];return b}function __trcFromError(a){return TRC.Browser.ie?a.message+"["+a.number+": "+a.name+"]":a.message?a.message+(a.fileName?a.fileName+":"+a.lineNumber:""):a}function __trcClientTimestamp(){var a=new Date,b=a.getHours(),c=a.getMinutes(),d=a.getSeconds()+a.getMilliseconds()/1e3;return(10>b?"0":"")+b+":"+(10>c?"0":"")+c+":"+(10>d?"0":"")+d.toFixed(3)}function __trcLog(a,b){if(TRC.pConsole("page",TRC.modDebug.getType(a),b,b),"0"==a&&TRC.pConsole("errors",TRC.modDebug.getType(a),b,b),!(window.trc_debug_level<a)){var c=Array.prototype.slice.call(arguments,2);c.length>0&&(b+="("+c.join(",")+")"),"object"==typeof window.console&&console.log(b),(document.cookie.search("taboola-debug")>0||a<=window.trc_debug_level)&&TRC.modDebug.logMessageToServer(a,b)}}function __trcError(a,b){__trcLog(0,a+(b?": "+__trcFromError(b):"")),b&&b.stack&&"undefined"!=typeof window.console&&console.trace&&console.trace()}function __trcDebug(){var a=Array.prototype.slice.call(arguments);a.unshift(3),__trcLog.apply(null,a)}function __trcInfo(){var a=Array.prototype.slice.call(arguments);a.unshift(2),__trcLog.apply(null,a)}function __trcWarn(){var a=Array.prototype.slice.call(arguments);a.unshift(1),__trcLog.apply(null,a)}function __trcDOMWalker(a,b){for(b(a),a=a.firstChild;a;)arguments.callee(a,b),a=a.nextSibling}function __trcPurgeEventHandlers(a){try{__trcDOMWalker(a,function(a){for(var b in a)"function"==typeof a[b]&&(a[b]=null)})}catch(b){}}function __trcJSONify(a){function b(a){return'"'+a.replace(/[\s\S]/g,function(a){switch(a){case'"':return'\\"';case"\\":return"\\\\";case"\n":return"\\n";case"\r":return"\\r"}return a})+'"'}function c(a){for(var b=[],c=0;c<a.length;c++)b[c]=__trcJSONify(a[c]);return b}function d(a){var c=[];for(var d in a)a.hasOwnProperty(d)&&c.push(b(d)+":"+__trcJSONify(a[d]));return c}return a instanceof Array?"["+c(a).join(",")+"]":a instanceof Object?"{"+d(a).join(",")+"}":null===a?"null":"string"==typeof a?b(a):"undefined"==typeof a?"undefined":a.toString()}function __trcUnJSONify(text){try{return eval("("+String(text)+")")}catch(e){throw new Error("JSON parse error - invalid input!")}}function __trcGetMargins(a){var b=parseInt(document.trcGetCurrentStyle(a,"margin-bottom")),c=parseInt(document.trcGetCurrentStyle(a,"margin-top"));return(isNaN(c)?0:c)+(isNaN(b)?0:b)}function __trcAttachResize(a,b){TRC.Browser.ie?a.attachEvent("onresize",b):("object"!=typeof a.resizeInt&&(a.resizeInt={}),a.resizeInt[b]=TRC.Interval.set(function(a){return"undefined"==typeof a.sourceWidth||"undefined"==typeof a.sourceHeight?(a.sourceWidth=a.clientWidth,a.sourceHeight=a.clientHeight,void 0):a.sourceWidth!=a.clientWidth||a.sourceHeight!=a.clientHeight?(delete a.sourceWidth,delete a.clientWidth,b.apply(a),void 0):void 0},250,a))}function __trcDetachResize(a,b){if(TRC.Browser.ie)a.detachEvent("onresize",b);else{"object"!=typeof a.resizeInt&&(a.resizeInt={});try{a.resizeInt[b]&&TRC.Interval.clear(a.resizeInt[b]),delete a.resizeInt[b]}catch(c){}}}function __trcTrim(a){return a.replace(/^\s+|\s+$/g,"")}function __trcGetElementsByClass(a,b,c){var d,e,f,g=[],h=new RegExp("(^|\\s)"+a+"(\\s|$)");for(c=c||document,b=b||"*",d=c.getElementsByTagName(b),e=d.length,f=0;e>f;f++)h.test(d[f].className)&&g.push(d[f]);return g}function __trcToArray(a,b){var c;for(c in a)a.hasOwnProperty(c)&&b.push([c,a[c]])}Gettext=function(){return{gettext:function(){return""},strargs:function(){return""}}},Gettext.strargs=function(){return""},function(a,b,c){"use strict";var d,e=b.createElement("div"),f=b.createElement("div"),g=function(a,b){return a.classList?a.classList.add(b):(c.dom.removeClass(a,b),a.className+=" "+b,void 0)},h=function(a){var b=a.which||a.keyCode;27===b&&o()},i=function(a){var b=a.target||a.srcElement;(b===f||"trc_close_modal"===b.id)&&(c.dom.stopEvent(a),o())},j=function(a){/http(s)?:\/\/www\.taboola\.com/.test(a.origin)&&a.data&&1025===+a.data&&o()},k=function(a){var b=[];return b.push("<a id=trc_close_modal class=trc_modal_close>&times;</a>"),b.push('<iframe class=trc_modal_frame scrolling=no frameborder=0 allowTransparency=true src="'),b.push(a),b.push('"></iframe>'),b.join("")},l=function(a,b){for(;a.tagName.toUpperCase()!==b.toUpperCase();)a=a.parentNode;return a},m=function(b){a.showModalDialog(b.href,"","dialogHeight: 550px; dialogWidth: 660px")},n=function(g){var n=l(g.target||g.srcElement,"A");return g&&c.dom.stopEvent(g),c.Browser.ieUpto(7)?m(n):(d||v(),e.innerHTML=k(n.href),c.dom.removeClass(f,"trc_modal_hidden"),c.dom.removeClass(e,"trc_modal_hidden"),c.dom.on(b,"keyup",h),c.dom.on(b,"click",i),c.dom.on(b.getElementById("trc_close_modal"),"click",i),c.dom.on(a,"message",j),void 0)},o=function(){g(f,"trc_modal_hidden"),g(e,"trc_modal_hidden"),c.dom.off(b,"keyup",h),c.dom.off(b,"click",i),c.dom.off(b.getElementById("trc_close_modal"),"click",i),c.dom.off(a,"message",j)},p=function(a){var c=b.createElement("div");return c.id="tbl-aug-"+Math.floor(2147483648*Math.random()).toString(36),r+="#"+c.id+" ",a&&a.appendChild(c),c},q=function(a){var b=[];return b.push(a+'.trc_modal_dialog { width:660px; height:550px; box-shadow: black 0 0 18px 0;font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; padding:12px;border:2px solid #417cc3;border-radius:10px;position:fixed;z-index:99999;background:#f7f9fc;top:50%;left:50%;margin-top:-250px;margin-left:-330px;-moz-box-sizing: content-box; -webkit-box-sizing: content-box;box-sizing: content-box;}'),b.push(a+".trc_modal_mask {z-index:1040;position:fixed;top:0;left:0;right:0;bottom:0;background:#000;opacity:0.5;filter: alpha(opacity=50);}"),b.push(a+".trc_modal_close {font-family:sans-serif!important;width:30px!important;height:30px!important;font-size: 30px!important;font-weight: bold!important;line-height: 28px!important;color: #fff!important;text-shadow: 0 1px 0 #000;opacity: 0.9;filter: alpha(opacity=90);background: #417cc3;padding: 0;cursor: pointer;border: 0;-webkit-appearance: none;text-align: center;border-radius: 15px!important;position:absolute!important;top: -13px;right: -13px;text-decoration: none!important;z-index: 9;}"),b.push(a+".trc_modal_close:hover {text-decoration: none!important;opacity: 1!important;filter: alpha(opacity=100)!important;}"),b.push(a+".trc_modal_hidden {display:none!important;}"),b.push(a+".trc_modal_frame {width: 100%!important;height: 550px!important;}"),b.join("")},r="",s=p(),t=p(s),u=p(t),v=function(){f.className="trc_modal_mask trc_modal_hidden",e.className="trc_modal_dialog trc_modal_hidden",u.appendChild(f),u.appendChild(e),b.body.appendChild(s),c.dom.injectStyle(q(r)),d=!0};c.aboutUs={open:n,close:o}}(window,document,TRC),function(){TRC.aspect={before:function(a,b,c,d){var e=a[b];a[b]=function(){return d&&(a[b]=e),c.apply(this,arguments),e.apply(this,arguments)}},after:function(a,b,c,d){var e=a[b];a[b]=function(){d&&(a[b]=e);var f=e.apply(this,arguments);return c.apply(this,arguments),f}}}}(window,document),function(a,b){var c=TRC.PROTOCOL,d=TRC.AutoPlaylistController=function(a,c,d,e,f,g,h){return this.animationDelay=25,this.videoData=f,this.rbox=a,this.publisher=c,this.lightbox=d,this.videoDoneHandler=null,this.autoPlayContainer=e,this.gt=this.rbox.trc.gt,this.listId=g,this.container=b.createElement("div"),this.countdownBox=null,this.counterBox=null,this.countdownTimer=null,this.playlistRecommendation=null,this.playlistItemBox=b.createElement("div"),this.autoplayTime="undefined"==typeof h?5:h,this.active=-1!=this.autoplayTime,this.isRender=!1,this.createPlayer(),this};d.prototype.videoDone=function(){"none"==this.countdownBox.style.display&&this.checkContainerVisibility()&&("block"==this.container.style.display||this.lightbox||(null==this.playlistItemBox.firstChild&&this.getPlaylistItem("n"),this.showNextUp()),function(a){if(0>=a)return this.log("playlist",{ri:this.reqId,sd:this.sesData,ui:this.userData,pi:this.videoData.id,pt:"video",li:this.listId}),this.activateNextUp("n"),void 0;for(var b=""+a--;b.length<2;)b="0"+b;this.counterBox.innerHTML=Gettext.strargs(this.gt.gettext("in %1 Seconds"),[b]),this.countdownTimer=TRC.Timeout.set(arguments.callee.trcBind(this,a),1e3)}.trcBind(this,this.autoplayTime)(),this.autoplayTime>0&&this.showCountdown())},d.prototype.getScreenPosition=function(){return Math.max(b.documentElement.scrollTop,b.body.scrollTop)},d.prototype.autoPlayerLinkTargetSupport=function(c){function d(){var c;return TRC.Browser.ie?(c=b.createEventObject(),c.button=1):(c=b.createEvent("MouseEvent"),c.initMouseEvent("click",!0,!0,a,0,0,0,0,0,!1,!1,!1,!1,0,null)),c}"undefined"!=typeof c?this.playlistRecommendation.link.onclick(c,"playlist"):this.playlistRecommendation.link.onclick(d(this.playlistRecommendation),"playlist")},d.prototype.activateNextUp=function(a,b){this.countdownTimer&&(TRC.Timeout.clear(this.countdownTimer),this.countdownTimer=null),TRC.pageManager.storePublisherValue(this.publisher,"auto-play-intent",(new Date).getTime()+":"+this.playlistRecommendation.id+":"+a),this.videoData=this.playlistRecommendation,this.lightbox?(this.createPlayer(),this.getPlaylistItem(a)):this.autoPlayerLinkTargetSupport(b),"none"!=this.countdownBox.style.display&&this.hideCountdown(),this.hideNextUp(),this.playlistItemBox.removeChild(this.playlistItemBox.firstChild)},d.prototype.showNextUp=function(){this.container.style.display="block",this.container.style.opacity=1,this.log("visible",{ri:this.reqId,sd:this.sesData,ui:this.userData,pi:this.videoData.id,pt:"video",li:this.listId}),TRC.Browser.ie&&(this.container.style.marginLeft=(this.container.parentNode.offsetWidth-this.container.clientWidth)/2+"px")},d.prototype.hideNextUp=function(){this.container.style.display="none",this.container.style.opacity=0},d.prototype.animValueSet=function(a,b,c,d){switch(d){case"size":a[b]=c+"px";break;case"opacity":a.filter="alpha(opacity="+(c+100)+")",a[b]=c;break;default:a[b]=c}},d.prototype.animCall=function(a,b,c,d,e,f){"undefined"==typeof f&&(f="size");var g=parseInt(b/this.animationDelay),h=parseFloat(c[d]),i=5*((a-h)/g);this.animValueSet(c,d,h+i,f),b-this.animationDelay>0?TRC.Timeout.set(arguments.callee.trcBind(this,a,b-this.animationDelay,c,d),this.animationDelay):(this.animValueSet(c,d,a,f),"function"==typeof e&&e())},d.prototype.showCountdown=function(){var a=this.countdownBox.parentNode,b=Math.max(a.clientWidth,a.offsetWidth);this.countdownBox.style.display="inline";var c=Math.max(a.clientWidth,a.offsetWidth);a.style.width=b+"px",this.animCall(c,750,a.style,"width")},d.prototype.hideCountdown=function(){this.countdownBox.style.display="none",this.countdownBox.parentNode.style.width="auto"},d.prototype.checkContainerVisibility=function(){return this.autoPlayContainer.playerbox.offsetTop>=this.getScreenPosition()?!0:!1},d.prototype.createPlayer=function(){if(this.lightbox){if("undefined"!=typeof this.autoPlayContainer.playerbox)for(;this.autoPlayContainer.playerbox.childNodes.length>0;)this.autoPlayContainer.playerbox.removeChild(this.autoPlayContainer.playerbox.firstChild);this.autoPlayContainer.createEmbedIframe(this.rbox,this.autoPlayContainer.playerbox,this.videoData),"function"==typeof this.autoPlayContainer.setTitle&&this.autoPlayContainer.setTitle(this.videoData.title)}},d.prototype.close=function(){this.videoDoneHandler&&this.videoDoneHandler.remove(),"function"==typeof this.videoData.lightboxClosed&&this.videoData.lightboxClosed()},d.prototype.render=function(a){if(this.active){this.isRender=!0,this.getPlaylistItem("s"),this.videoDoneHandler=TRC.listen("videoDone",this.videoDone.trcBind(this)),a.appendChild(this.container),this.container.className="trc_autoplaylist-box",this.container.style.display="none",this.container.appendChild(this.genHeader()),this.container.appendChild(this.playlistItemBox);var c=b.createElement("div");c.style.clear="both",this.container.appendChild(c),this.container.onmouseover=function(){this.log("explore",{ri:this.reqId,sd:this.sesData,ui:this.userData,pi:this.videoData.id,pt:"video",li:this.listId})}.trcBind(this),null!=this.playlistRecommendation&&this.showNextUp()}},d.prototype.genPlaylistURL=function(a,b){var d={};d.autoplaylist={placement:"autoplaylist",origin:this.listId.replace(/^rbox-/,""),"list-size":1,"item-id":this.videoData.id},a&&(d.autoplaylist.intent=a);var e=this.rbox.trc.formatTRCRequest(d,"video");return e.cb=this.rbox.trc.genCallback(b),c+"//"+this.rbox.domain+"/"+this.publisher+"/trc/3/json?tim="+encodeURIComponent(__trcClientTimestamp())+(this.rbox.trc.trcByPass?"&trc_skip_failover=yes&":"&")+encodeURIComponent(__trcJSONify(e))+TRC.pageManager.additionalDispatchParams()},d.prototype.getPlaylistItem=function(a){if(!this.lightbox)return TRC.Timeout.set(this.getPlaylistItemFromRBox.trcBind(this),0),void 0;var b=this.genPlaylistURL(a,function(a){if(!(a&&a.trc&&a.trc.vl&&a.trc.vl.length&&a.trc.vl[0].v))return this.hideNextUp(),void 0;this.reqId=a.trc.vl[0].req,this.sesData=a.trc.sd,this.userData=a.trc.ui,TRC.pageManager.storePublisherValue(this.publisher,"session-data",this.sesData),TRC.pageManager.storeValue("user-id",this.userData);var b=a.trc.vl[0].v;this.playlistRecommendation=b.length?b[0]:b,this.playlistItemBox.appendChild(this.drawVideoBox(this.playlistRecommendation)),this.countdownBox&&this.showNextUp()}.trcBind(this));this.rbox.trc.loadExternal(b,"js",function(){this.playlistRecommendation||this.hideNextUp()})},d.prototype.getPlaylistItemFromRBox=function(){null!=this.playlistItemBox.firstChild&&this.playlistItemBox.removeChild(this.playlistItemBox.firstChild);for(var a=0,b=0;b<this.rbox.recommendationList.length-1;b++)if("video"==this.rbox.recommendationList[b].type&&this.rbox.recommendationList[b]!=this.playlistRecommendation){a=b;break}this.playlistRecommendation=this.rbox.recommendationList[a],this.playlistItemBox.appendChild(this.drawVideoBox(this.playlistRecommendation))},d.prototype.genBlock=function(a,c,d){var e=b.createElement(c?c:"div");for(p in a)if("string"==typeof a[p])e[p]=a[p];else if("object"==typeof a[p])for(p1 in a[p])e[p][p1]=a[p][p1];return"string"==typeof d&&e.appendChild(b.createTextNode(d)),e},d.prototype.drawVideoBox=function(a){var b=this.genBlock({className:"videobox nextup"}),c=this.genBlock({className:"thumbblock",style:{cssFloat:"left",styleFloat:"left",display:"block"}},"span");b.appendChild(c),c.appendChild(this.genBlock({className:"thumbnail",style:{height:"29px",width:"39px",display:"block",backgroundImage:"url('"+a.thumbnail+"')"}},"span")),c.appendChild(this.genBlock({className:"thumbnail-overlay",style:{height:"29px",width:"39px",display:"block",marginTop:"-29px"}},"span"));var d=this.genBlock({style:{display:"block"},className:"video-label-box"},"span");return b.appendChild(d),d.appendChild(this.genBlock({className:"video-label video-title"},"span",a.title)),b.onclick=function(a){this.log("click",{ri:this.reqId,sd:this.sesData,ui:this.userData,pi:this.videoData.id,pt:"video",li:this.listId}),this.activateNextUp("s",a)}.trcBind(this),b},d.prototype.genHeader=function(){var a=b.createElement("span");return a.className="trc-next-up-header",a.appendChild(b.createTextNode(this.gt.gettext("Next Up:")+" ")),this.countdownBox=b.createElement("span"),a.appendChild(this.countdownBox),this.countdownBox.className="trc-next-up-countdown",this.counterBox=b.createElement("span"),this.countdownBox.appendChild(this.counterBox),this.countdownBox.style.display="none",a},d.prototype.log=function(a,b){var d=a+":"+b.li+b.ii+b.ri;if(this.ev||(this.ev={}),this.ev[d])return this.ev[d]++,void 0;this.ev[d]=1;try{var e=c+"//"+this.rbox.domain+"/"+this.rbox.trc["normalize-log-param"]("publisher",this.publisher)+"/log/3/"+encodeURIComponent(a)+"?"+(Tthis.rbox.trc.trcByPass?"trc_skip_failover=yes&":"");for(name in b){var f="_"==name.charAt(0)?name.substr(1):name;"undefined"!=typeof b[name]&&null!=b[name]&&(this.rbox.trc["normalize-log-param"](f,b[name]),e+=encodeURIComponent(f)+"="+encodeURIComponent(b[name])+"&")}e+="id="+parseInt(1e4*Math.random());var g=new Image;g.src=e}catch(h){__trcError("Error in sending auto playlist event",h)}}}(window,document),function(a,b){var c=function(){this.dom=b.getElementById?1:!1,this.dom&&((b.importNode?0:1)||(this.dom=2),(b.normalizeDocument?0:1)||(this.dom=3));var c=this.opera=a.opera?9:!1;if(this.opera&&((navigator.geolocation?0:1)||(this.opera=10),(a.opera.version?0:1)||(this.opera=parseFloat(a.opera.version()))),this.ie=function(){return"object"!=typeof b.all||c?!1:"CSS1Compat"!=b.compatMode?6:a.XMLHttpRequest?Object.defineProperty?"object"!=typeof DOMImplementation||"function"!=typeof DOMImplementation.prototype.createDocument?8:a.msMatchMedia?10:9:7:6}(),this.webkit=(a.openDatabase?!0:!1)&&!this.opera,this.chrome=this.webkit&&a.chrome?!0:!1,this.safari=this.webkit&&!this.chrome,this.safari&&((b.compareDocumentPosition?0:1)||(this.safari=4),(navigator.registerContentHandler?0:1)||(this.safari=5),(a.matchMedia?0:1)||(this.safari=6)),this.firefox=!!navigator.userAgent.match(/firefox/i),this.firefox){try{"function"==typeof b.createElement("canvas").getContext&&(this.firefox=1.5)}catch(d){}"object"==typeof a.globalStorage&&(this.firefox=2),(b.elementFromPoint?0:1)||(this.firefox=3),(b.querySelector?0:1)||(this.firefox=3.5),(b.getElementsByTagName("head")[0].mozMatchesSelector?0:1)||(this.firefox=3.6),(a.Uint8Array?0:1)||(this.firefox=4),(Function.prototype.isGenerator?0:1)||(this.firefox=5),(a.matchMedia?0:1)||(this.firefox=6),(a.FileReader&&a.FileReader.prototype.readAsArrayBuffer?0:1)||(this.firefox=7),(b.head&&b.head.insertAdjacentHTML?0:1)||(this.firefox=8)}for(var e=["firefox","chrome","safari","webkit","khtml","ie","opera"],f=0;f<e.length;f++)!function(a,b){a[b+"Upto"]=function(a){return this[b]&&("number"!=typeof this[b]||this[b]<=a)},a[b+"Atleast"]=function(a){return this[b]&&("number"!=typeof this[b]||this[b]>=a)}}(this,e[f]);return this};TRC.Browser=new c}(window,document),TRC.css=TRC.css||{},TRC.css.utils=function(a){function b(a,b){var c,d,f=a.indexOf("@media")>=0?a.split("{")[0]+"{":"",g=[],i=[];return a=f?a.substring(a.indexOf("{")+1):a,g=a.split("{"),i=g.length>1?g[0].split("."):a.split("."),d=i.length,2>d?f+a:(c=i[1],__trcTrim(c)===q?f+a:(b[__trcTrim(c)]?(e(1),i[0]="#"+b[__trcTrim(c)].cssDivsArr.join(" #")+" "+i[0]):(e(o),i[0]=h(i.join("."))+i[0]),g.length>1?(g[0]=i.join("."),f+g.join("{")):f+i.join(".")))}function c(a,c){var d=a.split(","),e=d.length,h="";if(g()>k&&(h=l,__trcDebug("Number of augmented css rules before Split : "+g()),f(0)),2>e)return h+b(a,c);for(var i=0;e>i&&(d[i]=b(d[i],c),!(d[i].indexOf("{")>=0&&e-1>i));i++);return h+d.join(",")}function d(a,b){var d=a.split("}"),e=d.length;if(2>e)return c(a,b);for(var f=0;e>f;f++)d[f]=c(d[f],b);return d.join("}")}function e(a){n+=a}function f(a){n=a}function g(){return n}function h(a){return i().replace(new RegExp("{class}","gm"),a)}function i(a,b){var c;if("object"==typeof a){p="";for(var d in a)"string"==typeof d&&""!==d&&(c="#"+a[d].cssDivsArr.join(" #")+" ",p=p+c+" "+m),o++;return p="#"+b.iframe.join(" #")+" "+m+"#"+b.topDiv.join(" #")+" "+m+p.slice(0,p.length-m.length)}return p}var j,k=4040,l=" style_split",m="{class},",n=0,o=0,p="",q="vidiscovery-note";return j={setStyleTextIdPrefix:function(a,b,c){i(b,c);var e=d(a,b);return __trcDebug("Number of augmented css rules left : "+g()),f(0),e},setStyleElements:function(a){for(var b=a.split(l),c=b.length,d=0;c>d;d++)TRC.dom.injectStyle(b[d])},setStyleToElements:function(a,b,c){try{var d=[],e=b.split(","),f=[];"Array"==__trcTypeOf(a)?d=a:d.push(a);for(var g=0,h=d.length;h>g;g++){var i=0;for(e.length;len>i;i++)"inline"===c&&(f=syles[i].split(":"),d[g].style[__trcTrim(f[0])]=__trcTrim(f[1]))}}catch(j){__trcError("Error in TRC.css.utils.setStyleToElements "+j.message)}},setStyleProperty:function(a,b,c,d){var e=a.style.cssText;e+=";"+b+":"+c+(d?"!important":""),a.style.cssText=e}},a._trcIsUTactive&&(j.classSplit=b,j.multiRuleSplit=c,j.ruleSplit=d,j.addRuleCounter=e,j.getCssIdsTemplate=i),j}(window,document),TRC.css.responsive=function(){function a(a,b){var c=TRC.Browser.ieUpto(7)?99:99.99;return(c-a*b)/a}function b(b,c,d,e,f){var g=a(b,d);f?e.push(TRC.css.utils.setStyleTextIdPrefix("."+c+" .videoCube{width: "+g+"%; position: relative; float: left; margin: 0 0 "+d+"% "+d+"%;}",TRC.modesCache,TRC.lightBoxCssReset)):e.push("."+c+" .videoCube{width: "+g+"%; position: relative; float: left; margin: 0 0 "+d+"% "+d+"%;}")}function c(a,b,c,d){var e=" .trc_rbox_div .videoCube {width: "+(1==a.cells?"100":"48")+"%;}",f=" .trc_header_left_column {width: "+(1==a.cells?"100":"48")+"%;}",g=" .trc_header_right_column {display: "+(1==a.cells?"none":"inline")+";}",h=" .trc_rbox_div .videoCube.rightCol {float:"+(1==a.cells?"left":"none")+";}";d?(c.push(TRC.css.utils.setStyleTextIdPrefix("."+b+e,TRC.modesCache,TRC.lightBoxCssReset)),c.push(TRC.css.utils.setStyleTextIdPrefix("."+b+f,TRC.modesCache,TRC.lightBoxCssReset)),c.push(TRC.css.utils.setStyleTextIdPrefix("."+b+g,TRC.modesCache,TRC.lightBoxCssReset)),c.push(TRC.css.utils.setStyleTextIdPrefix("."+b+h,TRC.modesCache,TRC.lightBoxCssReset))):(c.push("."+b+e),c.push("."+b+f),c.push("."+b+g),c.push("."+b+h))}function d(a,c,d,f,g,h){h?(1!=a.cells||g||(d.push(TRC.css.utils.setStyleTextIdPrefix("."+c+" .trc_rbox_outer .videoCube .video-label-box {height:auto;}",TRC.modesCache,TRC.lightBoxCssReset)),d.push(TRC.css.utils.setStyleTextIdPrefix("."+c+" .trc_rbox_outer .videoCube {margin-bottom:10px;}",TRC.modesCache,TRC.lightBoxCssReset))),d.push(TRC.css.utils.setStyleTextIdPrefix("."+c+" .trc_rbox_outer{margin-left:-"+a.margin+"%;}",TRC.modesCache,TRC.lightBoxCssReset))):(1!=a.cells||g||(d.push("."+c+" .trc_rbox_outer .videoCube .video-label-box {height:auto;}"),d.push("."+c+" .trc_rbox_outer .videoCube {margin-bottom:10px;}")),d.push("."+c+" .trc_rbox_outer{margin-left:-"+a.margin+"%;}")),g?e(d,f,a.rows*a.cells,c,h,a):h?(d.push(TRC.css.utils.setStyleTextIdPrefix("."+c+" .videoCube:nth-child(-n+"+a.rows*a.cells+"){display:block;visibility:visible;}",TRC.modesCache,TRC.lightBoxCssReset)),d.push(TRC.css.utils.setStyleTextIdPrefix("."+c+" .videoCube:nth-child(n+"+(a.rows*a.cells+1)+"){display:none;visibility:hidden;}",TRC.modesCache,TRC.lightBoxCssReset))):(d.push("."+c+" .videoCube:nth-child(-n+"+a.rows*a.cells+"){display:block;visibility:visible;}"),d.push("."+c+" .videoCube:nth-child(n+"+(a.rows*a.cells+1)+"){display:none;visibility:hidden;}")),d.push("."+c+" .videoCube_aspect{padding-bottom:"+a.ratio+"%; width: 100%;}"),b(a.cells,c,a.margin,d,h)}function e(a,b,c,d,e,f){for(var g=1;c>=g;g++)e?(1==f.cells&&(a.push(TRC.css.utils.setStyleTextIdPrefix("."+d+" .videoCube_"+g+"_child .video-label-box {height:auto;}",TRC.modesCache,TRC.lightBoxCssReset)),a.push(TRC.css.utils.setStyleTextIdPrefix("."+d+" .videoCube_"+g+"_child{margin-bottom:10px;}",TRC.modesCache,TRC.lightBoxCssReset))),a.push(TRC.css.utils.setStyleTextIdPrefix("."+d+" .videoCube_"+g+"_child{display:block;visibility:visible;}",TRC.modesCache,TRC.lightBoxCssReset))):(1==f.cells&&(a.push("."+d+" .videoCube_"+g+"_child .video-label-box {height:auto;}"),a.push("."+d+" .videoCube_"+g+"_child {margin-bottom:10px;}")),a.push("."+d+" .videoCube_"+g+"_child{display:block;visibility:visible;}"));for(var g=c+1;b>=g;g++)e?a.push(TRC.css.utils.setStyleTextIdPrefix("."+d+" .videoCube_"+g+"_child{display:none;visibility:hidden;}",TRC.modesCache,TRC.lightBoxCssReset)):a.push("."+d+" .videoCube_"+g+"_child{display:none;visibility:hidden;}")}var f;return f={rulesToCssText:function(a,b,e,f,g){var h,i,j,k,l=[],m=TRC.Browser.ieUpto(8);for(h=0;i=b[h];h++)m||(j="undefined"!=typeof i.min||"undefined"!=typeof i.max,j&&l.push("@media screen and "),"undefined"!=typeof i.min&&(l.push("(min-width: "+i.min+"px) "),i.max&&l.push("and ")),"undefined"!=typeof i.max&&l.push("(max-width: "+i.max+"px) "),j&&l.push("{")),k=a+(m?"_rule"+h:""),g?c(i,k,l,f):d(i,k,l,e,m,f),!m&&j&&l.push("} ");return l.join("")},getRulePercentageWidth:a}}(window,document),TRC.modDebug=function(a){function b(a){TRC.net.fireSimpleHttpRequest(a)}function c(a){switch(a){case 0:return"error";case 1:return"warn";case 2:return"info";case 3:return"debug";default:return}}function d(a,b,d){return h.timeStamp+escape(d)+"&"+h.type+escape(c(a))+"&"+h.message+escape(b)+(trc_debug_level>1?"&"+h.debugLevel+trc_debug_level:"")+"&"+h.id+Math.floor(1e4*Math.random())}var e,f=TRC.PROTOCOL,g=2,h={timeStamp:"tim=",type:"type=",message:"msg=",debugLevel:"llvl=",id:"id="},i=function(){var a={};return{setMessageCache:function(b){a[b]?a[b]+=1:a[b]=1},getMessageCount:function(b){return a[b]?a[b]:0}}}();return e={logMessageToServer:function(c,e){if(i.setMessageCache(e),i.getMessageCount(e)<=g){var h=a.TRCImpl&&TRCImpl.domain?TRCImpl.domain:"trc.taboola.com",j=a.TRCImpl?TRCImpl["normalize-log-param"]("publisher",TRC.publisherId):TRC.publisherId,k=f+"//"+h+"/"+j+"/log/2/debug?"+d(c,e,__trcClientTimestamp());b(k)}},getType:c},a._trcIsUTactive&&(e.getType=c,e.messageCache=i,e.getLogParams=d),e}(window,document),function(a,b){function c(a){try{if(TRC.dom.isReady)return;TRC.dom.isReady=!0,a||(TRC.Browser.ie?g&&b.detachEvent("onreadystatechange",g):(b.removeEventListener("DOMContentLoaded",arguments.callee,!1),TRC.Interval.clear(g))),TRC.dom.onReady=function(a){a()};for(var c=0;c<f.length;c++)f[c]()}catch(d){__trcError("Error in DOMReady processing",d)}}function d(){return a.pageYOffset||b.body.scrollTop}function e(){return a.pageXOffset||b.body.scrollLeft}var f=[],g=null;TRC.dom={isReady:!1,onReady:function(a,b){return b?(TRC.Timeout.set(a,10),void 0):(f.push(a),void 0)},init:function(){if(b.readyState&&/loaded|complete/.test(b.readyState))return c(!0),void 0;if(TRC.Browser.ie){var d=b.createElement("div");!function(){try{d.doScroll("left")}catch(a){return d.to=TRC.Timeout.set(arguments.callee,10),void 0}c()}(),b.attachEvent("onreadystatechange",g=function(){/loaded|complete/.test(b.readyState)&&(TRC.Timeout.clear(d.to),c())})}else{if(/interactive/.test(b.readyState))return c(!0),void 0;b.addEventListener("DOMContentLoaded",c,!1),g=TRC.Interval.set(function(){/loaded|complete|interactive/.test(b.readyState)&&c()},10)}var e=a.onload;a.onload=function(){if(c(),e)try{e()}catch(a){}}},on:function(){return a.addEventListener?function(a,b,c){a.addEventListener(b,c,!1)}:a.attachEvent?function(a,b,c){a.attachEvent("on"+b,c)}:(el["on"+sType]=fn,void 0)}(),off:function(){return a.removeEventListener?function(a,b,c){a.removeEventListener(b,c,!1)}:a.detachEvent?function(a,b,c){a.detachEvent("on"+b,c)}:(el["on"+sType]=fn,void 0)}(),isAncestor:function(a,b,c){for(b=c?b:b.parentNode;b&&b!==a&&9!=b.nodeType;)b=b.parentNode;return a===b},injectStyle:function(a,c){var d=document.createElement("style"),c=c||b;d.type="text/css",c.head.appendChild(d),d.styleSheet?d.styleSheet.cssText=a:d.appendChild(document.createTextNode(a)),this.injectStyleOverflowFix(a),TRC.styleInjected=!0},injectStyleOverflowFix:function(a){if(TRC.Browser.ie&&31==document.styleSheets.length){var c=document.getElementById("trc_rbox_css_loaded");if(null==c&&(c=document.createElement("div"),c.id="trc_rbox_css_loaded",b.body.appendChild(c)),"hidden"!=document.trcGetCurrentStyle(c,"overflow")){var d=a.split("}"),e=null;try{for(var f=0;f<document.styleSheets.length;f++){var g=document.styleSheets[f];if(d.length+g.rules.length<=4096){e=g;break}}null!=e&&(e.cssText+=a)}catch(h){__trcError("Error in injectStyleOverflowFix processing",h)}}}},swapElements:function(a,b,c){return c&&TRC.dom.purgeEventHandlers(a),a.parentNode.replaceChild(b,a),b},iterateOnNode:function(a,b){for(b(a),a=a.firstChild;a;)arguments.callee(a,b),a=a.nextSibling},purgeEventHandlers:function(a){try{TRC.dom.iterateOnNode(a,function(a){for(var b in a)"function"==typeof a[b]&&(a[b]=null)})}catch(b){__trcError("TRC.dom.purgeEventHandlers : ",b.message)}},clearInnerElements:function(a){for(var b;b=a.firstChild;)this.purgeEventHandlers(b),a.removeChild(b)},stopEvent:function(a){return a.cancelBubble=!0,a.returnValue=!1,a.preventDefault&&a.preventDefault(),a.stopPropagation&&a.stopPropagation(),!1},addClass:function(a,b){a.className+=" "+b+" "},removeClass:function(a,b){var c;return a.classList?a.classList.remove(b):(c=new RegExp("s*"+b,"g"),a.className=a.className.replace(c,""),void 0)},getWindowWidth:function(){return this.getWindowWidth=window.innerWidth?function(){return window.innerWidth}:0!=document.documentElement.clientWidth?function(){return document.documentElement.clientWidth}:function(){return document.body.clientWidth},this.getWindowWidth()},getWindowHeight:function(){return this.getWindowHeight=window.innerHeight?function(){return window.innerHeight}:0!=document.documentElement.clientHeight?function(){return document.documentElement.clientHeight}:function(){return document.body.clientHeight},this.getWindowHeight()},getViewportVerticalRange:function(){var a=d(),b=a+this.getWindowHeight();return{min:a,max:b}},getViewportHorizontalRange:function(){var a=e(),b=a+this.getWindowWidth();return{min:a,max:b}},getElementRect:function(a){return a.getBoundingClientRect()}}}(window,document),TRC.eventDelegator=function(a){function b(a,b){var d;h[a]&&(d=h[a]._all,c(d,b?b:""),h[a][b.container.id]&&(d=h[a][b.container.id],c(d,b)))}function c(a,b){var c,d=a.length;for(c=0;d>c;c++)try{a[c]instanceof Function&&setTimeout(function(a,b){return function(){a(b)}}(a[c],b),0)}catch(e){__trcError("executeHandlers",e)}}function d(a,b){var c;if(!b)return setTimeout(a,0),void 0;for(c in b)try{a instanceof Function&&setTimeout(function(a,b){return function(){a(b)}}(a,b[c]),0)}catch(d){__trcError("executeHandlers",d)}}function e(a){h[a]=[],h[a]._all=[]}function f(a,b){h[a][b]=[]}var g,h=[],i={};if(modObject={subscribe:function(a,b,c){h[a]||e(a),c?(h[a][c]||f(a,c),h[a][c].push(b),i[a]&&i[a][c]&&d(b,{mode:i[a][c]})):(h[a]._all.push(b),i[a]&&d(b,i[a]))},dispatch:function(a,c){i[a]=i[a]||{},c&&(i[a][c.container.id]=c),b(a,c?c:null)},resetEvents:function(){i={}}},a._trcIsUTactive&&(modObject.processDelegatorsStack=b,modObject.executeHandlers=c,modObject.executePreviousEvents=d,modObject.delegatorsStack=h,modObject.eventsStack=i),TRC.subscriptionRegister)for(;TRC.subscriptionRegister.length;)g=TRC.subscriptionRegister.shift(),modObject.subscribe(g.event,g.handler,g.container);return modObject}(window,document),function(a,b){function c(a){"undefined"==typeof g[a]&&(g[a]=[])}function d(a,b){c(a),g[a].forEach(function(c,d){return b==c.id?(g[a].splice(d,1),void 0):void 0})}var e,f,g={},h=0;return TRC.listen=function(a,b){if("object"==typeof a&&a.length)return a.forEach(function(a){TRC.listen(a,b)}),null;c(a);var e={id:h++,handler:b,eventName:a,remove:function(){d(this.eventName,this.id)}};return g[a].push(e),e},TRC.dispatch=function(a,b){c(a);var d=e(a,b);g[a].forEach(function(a){f(function(){a.handler.call(this,d)}.trcBind(this))}.trcBind(this))},b.addEventListener&&b.dispatchEvent?(b.addEventListener("trcFakeEvents",function(a){a.cx()},!1),e=function(a,c){var d=b.createEvent("Event");return d.initEvent(a,!1,!1),"object"==typeof c?__trcCopyProps(c,d):d.data=c,d},f=function(a){var c=e("trcFakeEvents");c.cx=a,b.dispatchEvent(c)},void 0):(b.documentElement.attachEvent("onpropertychange",function(a){"trcFakeEvents"==a.propertyName&&a.cx()}),e=function(a,c){var d;return c&&c.generator&&"ceo"===c.generator?(c.type=a,c):(d=b.createEventObject(),d.generator="ceo",d.type=a,"object"==typeof c?__trcCopyProps(c,d):d.data=c,d)},f=function(a){var c=e("trcFakeEvents");c.cx=a,c.propertyName="trcFakeEvents",b.documentElement.fireEvent("onpropertychange",c)},void 0)}(window,document),TRC.util=function(a,b){var c={};return c={isType:function(a,b){return b=b.charAt(0).toUpperCase()+b.substr(1),Object.prototype.toString.call(a)=="[object "+b+"]"},hasKeys:function(a){var b;if(this.isType(a,"object"))if(Object.keys&&!Object.propertyIsEnumerable("keys")){if(Object.keys(a).length>0)return!0}else for(b in a)if(a.hasOwnProperty(b))return!0;return!1},copyProperties:function(a,b,c){var d;if(this.isType(c,"Array")){d=c.length;for(var e=0;d>e;e++)b[c[e]]=a[c[e]]?a[c[e]]:void 0;return!0}return!1
},getRandomIds:function(a){for(var b=0;b<a.len;b++)a.arr[b]=a.prefix+Math.floor(Math.random()*Math.pow(10,a.strength)+1)+a.suffix},getHtmlDecodeText:function(){var a=b.createElement("div");return function(b){return b&&"string"==typeof b?(a.innerHTML=encodeURI(b),b=a.textContent||a.innerText,a.innerHTML="",decodeURI(b)):""}}()}}(window,document),"undefined"==typeof Array.prototype.push&&(Array.prototype.push=function(){for(var a=0;a<arguments.length;a++)this[this.length]=arguments[a]}),"undefined"==typeof Array.prototype.indexOf&&(Array.prototype.indexOf=function(a,b){"number"!=typeof b&&(b=0);for(var c=b;c<this.length;c++)if(this[c]==a)return c;return-1}),"undefined"==typeof Array.prototype.forEach&&(Array.prototype.forEach=function(a){var b=this.length;if("function"!=typeof a)throw new TypeError;for(var c=arguments[1],d=0;b>d;d++)d in this&&a.call(c,this[d],d,this)}),"undefined"==typeof document.getElementsByClassName&&(document.getElementsByClassName=function(a){var b=[];elms=document.getElementsByTagName("*");var c=a.split(/ +/);a:for(var d=0;d<elms.length;d++){for(var e=elms[d].className.split(/ +/),f=0;f<c.length;f++)if(e.indexOf(c[f])<0)continue a;b.push(elms[d])}return b}),"undefined"==typeof document.trcGetCurrentStyle&&(document.trcGetCurrentStyle=function(a,b,c){return"string"==typeof a&&(a=document.getElementById(a)),TRC.Browser.ie?(b=b.replace(/-(\w)/,function(a,b){return b.toUpperCase()}),a.currentStyle[b]):window.getComputedStyle?document.defaultView.getComputedStyle(a,c).getPropertyValue(b):null}),"undefined"==typeof document.trcGetParentByClassName&&(document.trcGetParentByClassName=function(a,b){return a?a.className.split(/\s+/).indexOf(b)>=0?a:document.trcGetParentByClassName(a.parentNode,b):null}),"undefined"==typeof document.trcGetChildByClassName&&(document.trcGetChildByClassName=function(a,b){return a?a.className.split(/\s+/).indexOf(b)>=0?a:document.trcGetChildByClassName(a.firstChild,b):null}),"undefined"==typeof Function.prototype.trcBind&&(Function.prototype.trcBind=function(a){var b=this,c=Array.prototype.slice.call(arguments,1);return function(){var d=c.concat(Array.prototype.slice.call(arguments,0));return b.apply(a,d)}}),"undefined"==typeof Function.prototype.trcThrottle&&(Function.prototype.trcThrottle=function(a){var b,c=this;return function(){var d=arguments;b&&clearTimeout(b),b=setTimeout(function(){c.apply(c,d)},a)}}),"undefined"==typeof document.head&&(document.head=document.getElementsByTagName("head")[0]),TRC.GoogleAds=function(){return"object"==typeof window.console&&console.log("TRC.GoogleAds is Deprecated"),{draw:function(){}}},TRC.math=TRC.math||function(){function a(a,b,c){return"undefined"==typeof c||0===+c?Math[a](b):(b=+b,c=+c,isNaN(b)||"number"!=typeof c||0!==c%1?0/0:(b=b.toString().split("e"),b=Math[a](+(b[0]+"e"+(b[1]?+b[1]-c:-c))),b=b.toString().split("e"),+(b[0]+"e"+(b[1]?+b[1]+c:c))))}return{roundByDecimal:function(a,b){var c=a/b,d=c.toFixed(0),e=c-d;return d*b+b*Math.round(e)},round10:function(b,c){return a("round",b,c)}}}(window,document),function(win,doc){var LightBoxManager=TRC.LightBoxManager=function(a,b,c,d,e){if(this.animationLength=300,this.fps="number"==typeof e?e:TRC.Browser.firefoxUpto(3.5)?20:45,this.listId=c,this.direction="undefined"!=typeof d?d:"ltr",this.origCoords=[0,0],this.cover=null,this.cssResetTopElements={},this.lightbox_container=null,this.whitebox=null,this.whitebox_header=null,this.playerbox=null,this.playerContainer=null,this.animationLoop=null,this.animationEvents=[],this.whiteboxSizeHandler=null,this.position_fixed_works=!1,this.closeButton=null,this.player_width=0,this.player_height=0,this.scalingLock=!1,this.additionalElements={},this.displayTitle=a,this.elementsHaveBeenAdded=!1,this.origCoords=b&&"number"==typeof b.clientX?[b.clientX,b.clientY]:[this.getScreenWidth()/2,100],TRC.Browser.ie){var f=this.GetZoomFactor();this.origCoords=[Math.round((this.origCoords[0]-doc.documentElement.clientLeft)/f),Math.round((this.origCoords[1]-doc.documentElement.clientTop)/f)]}return this.createLightbox(),this.lightbox_container.style.cursor="wait",this};LightBoxManager.prototype.GetZoomFactor=function(){if(!doc.body.getBoundingClientRect)return 1;var a=doc.body.getBoundingClientRect(),b=a.right-a.left,c=doc.body.offsetWidth;return Math.round(100*(b/c))/100},LightBoxManager.prototype.addElements=function(a){"object"!=typeof a&&(a={bottom:a});for(p in a)this.additionalElements[p]||(this.additionalElements[p]=[]),this.additionalElements[p].push(a[p])},LightBoxManager.prototype.createEmbedIframe=function(a,b,c){var d=TRC.baseDomain+"publisher."+a.trc.version+".js",e={};__trcCopyProps(c,e),delete e.link;try{var f=doc.createElement("iframe");f.frameBorder=f.border="0",f.scrolling="no",f.id="_trcLightIframeObj";var g=TRC.Browser.ie&&doc.domain!=win.location.hostname;g&&(f.src='javascript:"<script>window.onload=function(){document.write(\\"<script>document.domain=\''+doc.domain+'\';<\\"+\\"/script>\\");document.close();};</script>"'),b.appendChild(f);var h=f.contentDocument?f.contentDocument:f.contentWindow.document;h.write('<html><head><style>BODY,IFRAME{border:0;margin:0;padding:0;}</style><script type="text/javascript" src="'+d+'" charset="UTF-8"></script></head><body><script>'+(doc.domain!=win.location.hostname?'document.domain="'+doc.domain+'";':"")+"var recomendation = "+__trcJSONify(e)+';var embed_loaded = false;</script><div id="embed-code-container"></div><script>var MAX_RETRIES_BEFORE_NOTICE = 100, MAX_NOTIFICATIONS = 2, numRetries = 0, numNotifications = 0;var loadPlayer = function(){if(window.trc_properties && trc_properties.global["syndication-embed-code"]){var parent_iframe = window.parent.document.getElementById("_trcLightIframeObj");var cont = document.getElementById("embed-code-container");if(!window.embed_loaded){var affiliate = (typeof trc_properties.global["syndicator-affiliate-id"] != "undefined")?trc_properties.global["syndicator-affiliate-id"]:null;embed_code = trc_properties.global["syndication-embed-code"];if(typeof embed_code == "function"){embed_code(cont,recomendation,affiliate);window.embed_loaded = true;}}var obj = cont.getElementsByTagName("object")[0] ? cont.getElementsByTagName("object")[0] : (cont.getElementsByTagName("iframe")[0] ? cont.getElementsByTagName("iframe")[0] : cont.getElementsByTagName("video")[0]);if(parent_iframe!=null && obj!=null) {window.clearInterval(window.checkInt);parent_iframe.parentNode.style.width = parent_iframe.style.width =  Math.max(obj.offsetWidth, obj.width)+"px";parent_iframe.parentNode.style.height = parent_iframe.style.height = Math.max(obj.offsetHeight,obj.height)+"px";}else if (numNotifications < MAX_NOTIFICATIONS && numRetries >= MAX_RETRIES_BEFORE_NOTICE && typeof console != "undefined") {console.log("Notice: LightgBoxManager.createEmbedIframe - video object or parent iframe could not be located. Still trying");numNotifications++;numRetries = 0;}numRetries++;}};window.checkInt = window.setInterval(loadPlayer,100);	</script></body></html>'),TRC.Timeout.set(function(){try{h.close()}catch(a){}},TRC.Browser.ie?3e3:0)}catch(i){return}},LightBoxManager.prototype.renderElements=function(){function a(a,b){var c=doc.createElement("div");switch(a){case"left":c.style.cssFloat=c.style.styleFloat="left";break;case"right":c.style.cssFloat=c.style.styleFloat="left"}"bottom"==a?this.playerbox.parentNode.appendChild(c):this.playerbox.parentNode.insertBefore(c,this.playerBox);try{"function"==typeof b?b(c):"function"==typeof b.render&&b.render(c)}catch(b){__trcError("Error in lightbox sub-element rendering",b)}}this.elementsHaveBeenAdded=!0,"top"in this.additionalElements&&this.additionalElements.top.forEach(a.trcBind(this,"top")),"left"in this.additionalElements&&this.additionalElements.left.forEach(a.trcBind(this,"left")),"right"in this.additionalElements&&this.additionalElements.right.forEach(a.trcBind(this,"right")),"bottom"in this.additionalElements&&this.additionalElements.bottom.forEach(a.trcBind(this,"bottom"))},LightBoxManager.prototype.createLightbox=function(){var width=this.getScreenWidth();this.createCoverIframe(),this.lightbox_container=doc.createElement("div"),this.lightbox_container.style.width=width+"px",this.lightbox_container.style.left="0px",this.lightbox_container.style.top="0px",this.lightbox_container.className="trc_lightbox_base trc_lightbox "+this.listId,this.lightbox_container.onclick=this.close.trcBind(this);var inner_div=doc.createElement("div");with(inner_div.style.display="block",inner_div.className="trc_lightbox_overlay",inner_div.style.width=width+"px",inner_div.style.left="0px",inner_div.style.top="0px",this.lightbox_container.appendChild(inner_div),inner_div=doc.createElement("div"),inner_div.style.display="block",inner_div.className="trc_lightbox_transparent",inner_div.style.width=width+"px",inner_div.style.left="0px",inner_div.style.top="0px",this.lightbox_container.appendChild(inner_div),TRCImpl.cssReset?this.setCssResetDivs(this.lightbox_container,"topDiv"):doc.body.appendChild(this.lightbox_container),this.whitebox=doc.createElement("div"),this.whitebox.className="trc_whitebox",this.whitebox.style.visibility="hidden",this.whitebox.onclick=function(a){a||(a=win.event),a.stopPropagation?a.stopPropagation():a.cancelBubble=!0},inner_div.appendChild(this.whitebox),this.playerbox=doc.createElement("div"),this.playerbox.style.width="0px",this.playerContainer=doc.createElement("div"),this.playerContainer.appendChild(this.playerbox),this.playerContainer.style)width="0px",height="0px",overflow="hidden";with(this.whitebox.appendChild(this.playerContainer),inner_div.style)marginTop="30px",position="fixed";this.position_fixed_works=30===inner_div.offsetTop,this.position_fixed_works||(inner_div.style.position="absolute"),this.lightbox_container.style.height=this.lightbox_container.firstChild.style.height=this.getScreenHeight()+"px"},LightBoxManager.prototype.createCoverIframe=function(){with(this.cover=doc.createElement("iframe"),this.cover.style)width=this.getScreenWidth()+"px",height=this.getScreenHeight()+"px",border=0;this.cover.scrolling="no",this.cover.className="trc_cover_iframe",TRCImpl.cssReset?this.setCssResetDivs(this.cover,"iframe"):doc.body.appendChild(this.cover)},LightBoxManager.prototype.setCssResetDivs=function(a,b){for(var c,d=a,e=TRC.lightBoxCssReset[b].length,f=e-1;f>=0;f--)c=doc.createElement("div"),c.id=TRC.lightBoxCssReset[b][f],c.appendChild(d),d=c;doc.body.appendChild(d),this.cssResetTopElements[b]=d},LightBoxManager.prototype.createHeader=function(a,b){var c=doc.createElement("div");if(c.id="trc_lightbox_header",c.style.display="none","undefined"!=typeof b&&""!=b){var d=doc.createElement("div");d.id="branding_div_lightbox";var e=doc.createElement("img");e.id="branding_img_lightbox",e.src=b,d.style.styleFloat=d.style.cssFloat="ltr"==this.direction?"right":"left",e.style.display="none",d.appendChild(e),c.appendChild(d)}var f=doc.createElement("div");this.displayTitle?f.innerHTML=a:(f.innerHTML="",f.style.height="22px"),c.appendChild(f),c.titlebox=f,this.whitebox_header=c,this.whitebox.insertBefore(c,this.whitebox.firstChild)},LightBoxManager.prototype.setTitle=function(a){this.whitebox_header.titlebox.innerHTML=this.displayTitle?a:" "},LightBoxManager.prototype.createLightboxCloseButton=function(){this.closeButton=doc.createElement("div"),this.closeButton.className="trc_whiteboxCloseButton",this.closeButton.innerHTML="x",this.closeButton.onclick=this.close.trcBind(this),this.whitebox.insertBefore(this.closeButton,this.whitebox.firstChild)},LightBoxManager.prototype.startAnimate=function(a,b){var c=function(){for(var c=0;c<a.length;c++)if(!a[c].done)return;b()};a.forEach(function(a){a.elm=a[0],a.prop=a[1],a.cur=a[2],a.end=a[3],a.unit=a[4],a.dur=a[5],a.done=!1,a.steps=Math.ceil(this.fps*a.dur/1e3),a.stepSize=(a.end-a.cur)/a.steps,a.step=0,this.animationEvents.push((a.frameHandler=function(){switch(this.cur+=this.stepSize,this.stepSize*(this.cur-this.end)>0&&(this.cur=this.end),this.prop){case"opacity":this.elm[this.prop]=this.cur,this.elm.filter="alpha(opacity="+100*this.cur+")";break;default:this.elm[this.prop]=this.cur+this.unit}return++this.step>this.steps?(this.done=!0,c(),!0):!1}).trcBind(a))},this)},LightBoxManager.prototype.animationMainLoop=function(){this.animationEvents.forEach(function(a,b,c){null!=a&&a()&&(c[b]=null)})},LightBoxManager.prototype.getScreenWidth=function(){return doc.body.scrollWidth},LightBoxManager.prototype.getScreenHeight=function(){return Math.max(doc.body.scrollHeight,doc.documentElement.scrollHeight)},LightBoxManager.prototype.getLeftMargin=function(){return(this.getScreenWidth()-this.playerContainer.scrollWidth)/2},LightBoxManager.prototype.getScreenPosition=function(){return Math.max(doc.documentElement.scrollTop,doc.body.scrollTop)},LightBoxManager.prototype.fixSyndicatorLogo=function(){if(!this.scalingLock&&"none"!=this.whitebox_header.style.display){var branding_img=this.whitebox_header.getElementsByTagName("img");if(branding_img.length>0)with(branding_img[0].style)height=this.whitebox_header.titlebox.scrollHeight+"px",width="auto",display="block";this.whitebox_header.style.width=this.player_width+"px"}},LightBoxManager.prototype.animateOpening=function(){with(this.scalingLock=!0,this.playerContainer.style.visibility="hidden",this.whitebox.style)width="10px",height="10px",marginLeft=this.origCoords[0]-5+"px",marginTop=this.origCoords[1]-5+"px",visibility="visible";var playerW=this.playerContainer.scrollWidth,playerH=this.playerContainer.scrollHeight;this.startAnimate([[this.whitebox.style,"width",10,playerW,"px",this.animationLength],[this.whitebox.style,"height",10,playerH,"px",this.animationLength],[this.whitebox.style,"marginLeft",this.origCoords[0]-5,this.getLeftMargin(),"px",this.animationLength],[this.whitebox.style,"marginTop",this.origCoords[1]-5,30,"px",this.animationLength]],function(){this.createLightboxCloseButton(),this.whitebox_header.style.display="block",this.scalingLock=!1,this.player_width=playerW-.2,this.player_height=playerH-.2,this.playerContainer.style.visibility="visible";var a=document.body.scrollTop;TRC.Browser.webkit&&(document.body.scrollTop+=20),TRC.Timeout.set(function(){document.body.scrollTop=a},1e3)}.trcBind(this))},LightBoxManager.prototype.resizeWhitebox=function(){return this.scalingLock?void 0:0==this.player_width?(this.animateOpening(),void 0):((this.player_width<this.playerContainer.scrollWidth||this.player_height<this.playerContainer.scrollHeight)&&(this.scalingLock=!0,this.startAnimate([[this.playerContainer.style,"width",this.player_width,this.playerContainer.scrollWidth,"px",300],[this.playerContainer.style,"height",this.player_height,this.playerContainer.scrollHeight,"px",300],[this.whitebox.style,"width",this.player_width,this.playerContainer.scrollWidth,"px",300],[this.whitebox.style,"height",this.player_height+this.whitebox_header.clientHeight,this.playerContainer.scrollHeight+this.whitebox_header.clientHeight,"px",300]],function(){this.scalingLock=!1,this.elementsHaveBeenAdded||this.renderElements()}.trcBind(this)),this.player_width=Math.max(this.player_width,this.playerContainer.scrollWidth),this.player_height=Math.max(this.player_height,this.playerContainer.scrollHeight)),void 0)},LightBoxManager.prototype.open=function(){TRC.pageManager.pushState(),this.lightbox_container.style.cursor="auto",this.animationLoop=TRC.Interval.set(this.animationMainLoop.trcBind(this),Math.floor(1e3/this.fps)),this.whiteboxSizeHandler=function(){return this.playerContainer.scrollHeight>0&&this.playerContainer.scrollWidth>0&&"0px"!=this.playerbox.style.width?(this.lightbox_container.style.height=this.lightbox_container.firstChild.style.height=this.getScreenHeight()+"px",this.position_fixed_works||(this.whitebox.parentNode.style.top=this.getScreenPosition()+30+"px"),this.fixSyndicatorLogo(),this.resizeWhitebox(),!1):!1}.trcBind(this),this.animationEvents.push(this.whiteboxSizeHandler),this.position_fixed_works||doc.documentElement[TRC.Browser.ie?"attachEvent":"addEventListener"](TRC.Browser.ie?"onscroll":"scroll",this.whiteboxSizeHandler,!1)},LightBoxManager.prototype.close=function(){this.lightbox_container.onclick=function(){},this.closeButton.onclick=function(){};for(var a in this.additionalElements)this.additionalElements[a].forEach(function(a){"object"==typeof a&&"function"==typeof a.close&&a.close()});TRC.Timeout.set(this.realClose.trcBind(this),500)},LightBoxManager.prototype.realClose=function(){for(var a=this.getLeftMargin(),b=this.playerContainer.getElementsByTagName("object"),c=0;b&&c<b.length;c++){var d=b[c],e=doc.body.appendChild(doc.createElement("div"));e.style.display="none",d.style.display="none",d.parentNode.removeChild(d),e.appendChild(d),TRC.Timeout.set(function(){d.movie="//dummy",d.parentNode.removeChild(d),e.parentNode.removeChild(e)},250)}this.whitebox.removeChild(this.playerContainer),this.whitebox.removeChild(this.whitebox_header),this.position_fixed_works||null==this.whiteboxSizeHandler||doc.documentElement[TRC.Browser.ie?"attachEvent":"addEventListener"](TRC.Browser.ie?"onscroll":"scroll",this.whiteboxSizeHandler,!1),this.startAnimate([[this.whitebox.style,"width",this.whitebox.clientWidth,0,"px",this.animationLength],[this.whitebox.style,"height",this.whitebox.clientHeight,0,"px",this.animationLength],[this.whitebox.style,"marginLeft",a,this.getScreenWidth()/2,"px",this.animationLength],[this.whitebox.style,"marginTop",30,this.whitebox.clientHeight/2,"px",this.animationLength],[this.whitebox.style,"opacity",1,0,"",this.animationLength]],function(){doc.body.removeChild(TRCImpl.cssReset?this.cssResetTopElements.topDiv:this.lightbox_container),doc.body.removeChild(TRCImpl.cssReset?this.cssResetTopElements.iframe:this.cover),TRC.Interval.clear(this.animationLoop),this.animationLoop=null,TRC.pageManager.popState()}.trcBind(this)),"function"==typeof win.trc_lightboxClose&&win.trc_lightboxClose()}}(window,document),function(){var a={source:"|v|h|c|t|s|p|video|home|category|text|search|photo|",target:"|v|p|t|m|video|photo|text|mix|"},b="v",c=function(b,c){return b=b.toLowerCase(),-1!==a[c].indexOf("|"+b+"|")?b.substr(0,1):(__trcError('illegal parameter "'+b+'" was passed to trc_ListOriginBuilder method: "set'+c.substr(0,1).toUpperCase()+c.substr(1)+'" \nUsing "video" instead'),"v")},d=TRC.ListOriginBuilder=function(a,c){this.setSource(a||b),this.setTarget(c||"v")};d.prototype.setSource=function(a){b=c(a,"source")},d.prototype.getSource=function(){return b},d.prototype.setTarget=function(a){this.target=c(a,"target")},d.prototype.getTarget=function(){return this.target},d.prototype.toString=function(){return(b+"2"+this.target).replace(/v2v/,"blended")}}(window,document),TRC.net=function(a,b){var c={},d=[],e={loadScript:function(a,c,d,e){var f=b.getElementsByTagName("script")[0],g=null;if("js"==c)g=b.createElement("script"),g.type="text/javascript",g.src=a,g.charset="UTF-8",e&&g.setAttribute("defer","defer");else{if("css"!=c)throw new Error("External reference loaded must be of type 'js' or 'css'!");g=b.createElement("link"),g.rel="stylesheet",g.type="text/css",g.href=a}return"function"==typeof d&&(TRC.Browser.ieUpto(8)?g.onreadystatechange=function(){("loaded"==g.readyState||"complete"==g.readyState)&&d.apply(g)}:(g.addEventListener("load",d,!1),g.addEventListener("error",d,!1))),f.parentNode.insertBefore(g,f),g},checkLoadJsCssFile:function(a,b,d){var e=a.replace(new RegExp("^.*/([^/]+)$"),"$1");try{return"undefined"==typeof c[e]?(c[e]=TRC.net.loadScript(a,b,d),"css"==b&&(c.css=1)):"function"==typeof d&&TRC.Timeout.set(function(){d.apply(c[e])},0),c[e]}catch(f){__trcError("Error trying to load "+a,f)}},fireSimpleHttpRequest:function(a){var b=new Image;b.src=a,d.push(b)}};return e}(window,document),function(a){function b(b){if(a.DOMParser){var c=new DOMParser;return c.parseFromString(b,"text/xml")}if(xmlDoc=new ActiveXObject("Microsoft.XMLDOM"),xmlDoc.async=!1,xmlDoc.validateOnParse=!1,!xmlDoc.loadXML(b))throw"XMLParsing failed";return xmlDoc}function c(){function a(){var a=new Array;for(var d in c)c.hasOwnProperty(d)&&null!=c[d]&&(a[a.length]=escape(d)+"="+escape(c[d]));var e=new Date((new Date).getTime()+31536e6);document.cookie=b+"="+escape(a.join("|"))+";path=/;expires="+e.toUTCString()}for(var b="trc_cookie_storage",c=new Object,d=document.cookie.split(/;\s+/),e=0;e<d.length;e++){var f=TRC.text.lsplit(d[e],"=",2),g=unescape(f[0]),h=unescape(f[1]);if(g==b){for(var i=h.split("|"),j=0;j<i.length;j++){var f=i[j].split("=");c[unescape(f[0])]=unescape(f[1])}break}}return this.getValue=function(a){return c.hasOwnProperty(a)?c[a]:null},this.setValue=function(b,d){c[b]=d,a()},this.removeKey=function(a){var b=new Date((new Date).getTime()-31536e6);document.cookie=a+"=0;path=/;expires="+b.toUTCString(),delete c[a]},this}function d(){var a={};return this.getValue=function(b){return a[b]?a[b]:null},this.setValue=function(b,c){a[b]=c},this.removeKey=function(b){delete a[b]},this}function e(){return this.getValue=function(b){return a.localStorage.getItem(b)},this.setValue=function(b,c){try{a.localStorage.setItem(b,c)}catch(d){}},this.removeKey=function(b){try{a.localStorage.removeItem(b)}catch(c){}},this}a.TRC=a.TRC||{};var f;getStorage=function(b){var c=a[b+"Storage"],d=(new Date).getTime()+"",e="_taboolaStorageDetection";try{if(c.setItem(e,d),c.getItem(e)==d)return c.removeItem(e),c}catch(f){}return null};var g=function(){return this.publisher_id=null,this.item_id=null,this.page_id=null,this.state={},this.stateStack=[],this.getLocalStorageImplementation=function(){if(null!=this.state.privateStorageImpl)return this.state.privateStorageImpl;var b=a.TRCImpl?a.TRCImpl.global:{},f=b["local-storage-usage"]?b["local-storage-usage"]:"prefer-w3c-storage";switch(f){case"prefer-w3c-storage":try{if(a.localStorage instanceof Storage&&TRC.useStorageDetection&&getStorage("local"))return this.state.privateStorageImpl=new e}catch(g){}case"prefer-cookies":try{if(document.cookie="trc;0",-1===document.cookie.indexOf("trc;0"))return this.state.privateStorageImpl=new c}catch(g){}default:return this.state.privateStorageImpl=new d}},this.trcParseParams=function(a){if(a&&!owner.item_id)for(var b=a.split("&"),c=0;c<b.length;c++){var d=TRC.text.lsplit(b[c],"=",2);switch(unescape(d[0])){case"item_id":owner.item_id=unescape(d[1]);break;case"publisher_id":owner.publisher_id=unescape(d[1])}}},this.trcGetPublisherParams=function(){for(var a=document.getElementsByTagName("script"),b=0;b<a.length;b++){var c=a[b].src.split("taboola(syndication)?.com/libtrc/")[1];if(c&&a[b].src.search(/taboola(syndication)?.com.*page_management/)>=0){c=c.split("?")[0];var d=c.split("/");owner.page_id=d[0],d.length>2&&(owner.page_id+="/"+d[1]),owner.trcParseParams(a[b].src.split("?")[1])}}},this.getPageData=function(){return a.taboola_view_id||(a.taboola_view_id=(new Date).getTime()),a.taboola_view_id},this.storeValue=function(a,b){this.storePublisherValue("taboola global",a,b)},this.removeKey=function(a){this.removePublisherKey("taboola global",a)},this.getValue=function(a){return this.getPublisherValue("taboola global",a)},this.storePublisherValue=function(a,b,c){null!=c&&void 0!=c&&this.getLocalStorageImplementation().setValue(a+":"+b,c)},this.getPublisherValue=function(a,b){return this.getLocalStorageImplementation().getValue(a+":"+b)},this.removePublisherKey=function(a,b){return this.getLocalStorageImplementation().removeKey(a+":"+b)},this.sortByLength=function(a,b){return a.domain.lenth-b.domain.length},this.setDomainConfiguration=function(a){try{var c=b(a);if("domains"!=c.documentElement.tagName||c.getElementsByTagName("domain").length<1)throw"Invalid configuration document: "+a;var d=c.getElementsByTagName("domain");this.state.m_publisherDomains={host:[],path:[],query:[]};for(var e=0;e<d.length;e++){var f=d[e],g=this.state.m_publisherDomains[f.getAttribute("type")];if(!(g instanceof Array))throw"Invalid domain type in configuration: "+f.getAttribute("type");g.push({domain:f.text?f.text:f.textContent,keep:f.getAttribute("keep")?!0:!1,staging:f.getAttribute("staging")?!0:!1})}}catch(h){this.state.m_publisherDomains={}}},this.matchOn=function(a,b,c){if(!a||a.length<1)return[];if(a.matching)return a.matching.slice(0);a.matching=[];for(var d=0;d<a.length;d++)b(c,a[d].domain)&&a.matching.push(a[d]);return a.matching.slice(0)},this.getMatchingHosts=function(){return this.matchOn(this.state.m_publisherDomains.host,function(a,b){return a.slice(a.length-b.split(".").length).join(".")==b},a.location.host.split("."))},this.getMatchingPaths=function(){return this.matchOn(this.state.m_publisherDomains.path,function(a,b){return a.slice(0,b.split("/").length).join("/")==b},a.location.pathname.split("/"))},this.getMatchingQuery=function(){return this.matchOn(this.state.m_publisherDomains.query,function(a,b){for(var c=b.split("&"),d=0;d<c.length;d++){for(var e=c[d].split("="),f=!1,g=0;g<a.length;g++){var h=a[g].split("=");f=f||unescape(e[0])==unescape(h[0])&&unescape(e[1])==unescape(h[1])}if(!f)return!1}return!0},a.location.search.replace(/^\?/,"").split("&"))},this.isEmbeddedView=function(){return this.state.m_publisherDomains.host&&this.state.m_publisherDomains.host.length&&this.getMatchingHosts().length<=0&&a.location.host.search(/taboola\w*.com$/)<0},this.isStagingView=function(){return this.isEmbeddedView()?!1:function(){for(var a=0;a<arguments.length;a++)if(function(a){for(;a.length>0;)if(a.shift().staging)return!0}(arguments[a]))return!0;return!1}(this.getMatchingHosts(),this.getMatchingPaths(),this.getMatchingQuery())},this.fixRecommendationURL=function(b){function c(a,b){for(var c=a.substring(1).split("/").reverse(),d=b.substring(1).split("/"),e="",f=0;f<d.length&&f<c.length;f++)for(var g=0;g<c.length;g++){if(0>f-g){e="/"+d.slice(0,f+1).join("/");break}if(c[g]!=d[f-g])break}return b.substring(e.length)}function d(a){for(var b={},c=0;c<a.length;c++)kv=TRC.text.lsplit(a[c],"=",2),b[kv[0]]=kv[1];return b}var e;try{e=new TRC.URL(b)}catch(f){return b}var g=this.getMatchingHosts().sort(this.sortByLength);if(g.length<1)return b;for(;g.length>0&&!g[0].keep;)g.shift();g.length>0&&(e.host=a.location.host);for(var h=this.getMatchingPaths().sort(this.sortByLength);h.length>0&&!h[0].keep;)h.shift();h.length>0&&(e.pathname=h[0].domain+c(h[0].domain,e.pathname));var i=this.getMatchingQuery(),j=e.search.replace(/^\?/,"").split("&");""==j[0]&&j.shift();for(var k=0;k<i.length;k++){for(var l=d(i[k].domain.split("&")),k=0;k<j.length;k++){var m=TRC.text.lsplit(j[k],"=",2).shift(),n=l[m];"undefined"!=typeof n&&(j[k]=m+"="+n,delete l[m])}for(var m in l)j.push(m+"="+l[m])}return e.search=j.length>0?"?"+j.join("&"):"",e.toString()},this.additionalDispatchParams=function(){return null==this.state.moreDispatchParams&&(this.state.moreDispatchParams=this.getCurrentURL().filtered),0==this.state.moreDispatchParams.length?"":"&"+this.state.moreDispatchParams.join("&")},this.getCurrentURL=function(){var b=new TRC.URL(a.location.href),c=[],d=[];b.search.replace(/^\?/,"").split(/&/).forEach(function(a){a&&(0==a.search("trc_")||"taboola-debug"==a?d.push(a):c.push(a))}),b.search=c.length>0?"?"+c.join("&"):"";var e=new String(b.toString());return e.filtered=d,e},this.initState=function(){"undefined"==typeof this.state&&(this.state={}),this.state.privateStorageImpl=null,this.state.m_publisherDomains={host:[],path:[],query:[]},this.state.moreDispatchParams=null},this.pushState=function(){this.stateStack.push(this.state),delete this.state,this.initState()},this.popState=function(){this.stateStack.length>0&&(this.state=this.stateStack.pop())},this.initState(),this};g.getPageData=function(){return f.getPageData()},g.storeValue=function(a,b){return f.storeValue(a,b)},g.storePublisherValue=function(a,b,c){return f.storePublisherValue(a,b,c)},g.getValue=function(a){return f.getValue(a)},g.getPublisherValue=function(a,b){return f.getPublisherValue(a,b)},g.setDomainConfiguration=function(a){return f.setDomainConfiguration(a)},g.isEmbeddedView=function(){return f.isEmbeddedView()},g.isStagingView=function(){return f.isStagingView()},g.fixRecommendationURL=function(a){return f.fixRecommendationURL(a)},g.additionalDispatchParams=function(){return f.additionalDispatchParams()},g.getCurrentURL=function(){return f.getCurrentURL()},g.pushState=function(){return f.pushState()},g.popState=function(){return f.popState()},TRC.pageManager=f=TRC.pageManager||new g,a.PageManager=a.PageManager||g}(window,document),function(a){var b;TRC.bcFlashPlayerBootstrap=function(){if("object"==typeof a.brightcove&&a.TRCImpl&&TRCImpl.modes)for(var c in a.brightcove.instances)try{var d=a.brightcove.getExperience(c);if(!d.getModule(APIModules.EXPERIENCE).getReady()){"undefined"==typeof b&&(b="onTemplateLoaded",TRC.regsiterForTemplateLoaded(b));continue}if(brightcove.getExperience(c).getModule(APIModules.VIDEO_PLAYER))return TRC.my_onTemplateLoaded(c),void 0}catch(e){}TRC.Timeout.set(arguments.callee,500)},TRC.bcFlashPlayerExpHandler=function(b){function c(){if(!a.TRCImpl){var b=arguments;return TRC.Timeout.set(function(){c.apply(a,b)},100),void 0}var d=modVP.getCurrentVideo();d&&TRCImpl.playVideo({id:1==TRCImpl["brightcove-uses-reference"]?d.referenceId:d.id})}if(!(b in a.brightcove.instances))return!1;var d=a.brightcove.getExperience(b);return"object"!=typeof d?!1:(modVP=d.getModule(APIModules.VIDEO_PLAYER),TRCImpl.getProperty(null,"read-paused-bcplayer")&&d.getModule(APIModules.EXPERIENCE).addEventListener(BCExperienceEvent.CONTENT_LOAD,c),modVP.addEventListener(BCVideoEvent.VIDEO_START,c),modVP.addEventListener(BCMediaEvent.COMPLETE,function(){TRC.dispatch("videoDone",{videoid:a.trc_video_id})}),(modVP.isPlaying()||TRCImpl.getProperty(null,"read-paused-bcplayer"))&&c(null),!0)}}(window,document),function(a){TRC.modVP=null;var b=!1,c=!1,d=100,e=0,f=100,g=!1,h=!1,i=!1;TRC.brightcove_support=function(){if(!c&&!b){if("undefined"!=typeof brightcove){if(i||(g=TRC.isBCSmartPlayer(),i=!0),g&&brightcove.api&&brightcove.api.modules.APIModules)h=!0;else if(g){if(d>e)return TRC.Timeout.set(TRC.brightcove_support,f),void 0}else if("undefined"==typeof APIModules)return TRC.net.loadScript("//admin.brightcove.com/js/APIModules_all.js","js",function(){TRC.brightcove_support()}),void 0}else if(d>e)return TRC.Timeout.set(TRC.brightcove_support,f),void 0;c||(g?TRC.bcSmartPlayerBootstrap():TRC.bcFlashPlayerBootstrap(),b=!0,e++)}},TRC.my_onTemplateLoaded=function(b){return c?void 0:a.TRCImpl?(c=h?TRC.bcSmartPlayerExpHandler(b):TRC.bcFlashPlayerExpHandler(b),void 0):(TRC.Timeout.set(arguments.callee.trcBind(null,b),100),void 0)},TRC.brightcove_playVideo=function(a){var b=a.search(/video/)>=0?a.split("video")[1]:a;return null==modVP?!1:(modVP.loadVideo(b,TRCImpl["brightcove-uses-reference"]?"referenceId":"id"),scroll(0,0),!0)},TRC.regsiterForTemplateLoaded=function(b){var c=null;"function"==typeof a[b]&&(c=a[b]),a[b]=function(a){TRC.my_onTemplateLoaded(a),null!=c&&c(a)}},TRC.brightcoveMedia={reset:function(){TRC.modVP=null,b=!1,c=!1,e=0,g=!1,h=!1,i=!1}}}(window,document),function(a){var b,c=!1;TRC.bcSmartPlayerBootstrap=function(){if(!c){if("object"==typeof a.brightcove&&a.TRCImpl&&TRCImpl.modes)for(var d in a.brightcove.experienceObjects)try{var e=a.brightcove.api.getExperience(d);if(e)e.getModule(a.brightcove.api.modules.APIModules.EXPERIENCE).getReady(function(f){f&&e.getModule(a.brightcove.api.modules.APIModules.VIDEO_PLAYER)?(c=f,TRC.my_onTemplateLoaded(d)):"undefined"==typeof b&&(b=a.brightcove.experienceObjects[d].params.templateLoadHandler,TRC.regsiterForTemplateLoaded(b))});else if(TRC.bcFlashPlayerExpHandler(d))return}catch(f){}TRC.Timeout.set(TRC.bcSmartPlayerBootstrap,500)}},TRC.bcSmartPlayerExpHandler=function(b){var c=a.brightcove.api,d=c.modules.APIModules,e=c.events,f=function(a){a&&TRCImpl.playVideo({id:1==TRCImpl["brightcove-uses-reference"]?a.referenceId:a.id})},g=function(){if(!a.TRCImpl){var b=arguments;return TRC.Timeout.set(function(){g.apply(a,b)},100),void 0}modVP.getCurrentVideo(f)};if(!(b in a.brightcove.experienceObjects))return!1;var h=c.getExperience(b);return"object"!=typeof h?!1:(modVP=h.getModule(d.VIDEO_PLAYER),TRCImpl.getProperty(null,"read-paused-bcplayer")&&h.getModule(d.EXPERIENCE).addEventListener(e.ExperienceEvent.TEMPLATE_READY,function(){h.getModule(d.EXPERIENCE).removeEventListener(e.ExperienceEvent.TEMPLATE_READY,arguments.callee),modVP.getCurrentVideo(f)
}),modVP.addEventListener(e.MediaEvent.BEGIN,g),modVP.addEventListener(e.MediaEvent.COMPLETE,function(){TRC.dispatch("videoDone",{videoid:a.trc_video_id})}),TRCImpl.getProperty(null,"read-paused-bcplayer")?g(null):modVP.getIsPlaying(function(a){a&&g(null)}),!0)},TRC.isBCSmartPlayer=function(){if(brightcove&&brightcove.api&&brightcove.api.modules.APIModules)return!0;for(var a=document.getElementsByClassName("BrightcoveExperience"),b=0;b<a.length;b++){var c=a[b];if(c.data&&-1!=c.data.toLowerCase().indexOf("includeapi=true"))return!0;for(var d=c.getElementsByTagName("param"),e=0;e<d.length;e++){var f=d[e];if(f.name&&f.value&&"includeapi"==f.name.toLowerCase()&&"true"==f.value.toLowerCase())return!0}}return!1}}(window,document),function(a,b){function c(a,b,c){return"object"!=typeof c&&(c={data:c}),c.player_id=a,TRC.dispatch("kaltura_"+b,c),c}function d(b,d,e){var f,g,h,i="playerPaused playerUpdateNewAsset playerProgress hasOpenedFullScreen hasCloseFullScreen captureThumbnailSuccess captureThumbnailFailed endEntrySession".split(" ");if(a.trc_video_id){trc_video_id=null;try{delete a.trc_video_id}catch(j){}}g=e+b+"playerPlayed",a[g]=function(a){h=!0,a=c(b,"playerPlayed",a);var e=__trcCopyProps(a,{});e.id=d.evaluate("{entry.id}")||d.evaluate("{mediaProxy.entry.id}"),TRCImpl.playVideo(e)},d.addJsListener("playerPlayed",g),f=e+b+"playerPlayEnd",a[f]=function(a){a=c(b,"playerPlayEnd",a),a.videoid=trc_video_id,TRC.dispatch("videoDone",a)},d.addJsListener("playerPlayEnd",f),f=e+b+"playerUpdatePlayhead",a[f]=function(d){h||a[g](d),c(b,"playerUpdatePlayhead",d)},d.addJsListener("playerPlayEnd",f),i.forEach(function(f){var g=e+b+f;a[g]=c.trcBind(this,b,f),d.addJsListener(f,g)})}var e,f="onKalturaPlayerReady",g=500,h=0,i=function(){return Math.floor(2147483648*Math.random()).toString(36)},j=function(a){return a=a.replace(/\s|\r|\n/g,""),a.substr(0,15)+a.length+a.substr(a.length-15)};TRC.kaltura_support=function(){var c,k,l,m,n,o,p,q,r;if(!TRC.kaltura_API&&!e){if(c="undefined"!=typeof TRCImpl.global["player-global-reference"]?TRCImpl.global["player-global-reference"]:TRCImpl.video_player_reference,k="trc_cb_"+i()+"handleKalturaEvent",c){if(r=a[c],r&&"string"==typeof r&&(r=b.getElementById(r)),!r||!r.addJsListener)return h+=1,g>h?setTimeout(TRC.kaltura_support.trcBind(TRC),20):__trcError("TRC.kaltura_support: can not find a player. reference: '"+c+"', retry: "+h+" times."),void 0;TRC.kaltura_API=r,d(r.id,TRC.kaltura_API,k)}else window.KWidget?KWidget.addReadyCallback(function(a){TRC.kaltura_API||(TRC.kaltura_API=b.getElementById(a),d(a,TRC.kaltura_API,k))}):!function(b){playerCallbackRescan=TRCImpl.global["player-callback-rescan"],l=TRCImpl.video_player_callback||f,m=a[l],n=m?j(m.toString()):null,o=j(b.toString()),a[l]=b,!m&&playerCallbackRescan&&(q=setTimeout(function(){var c=a[l];h+=1,c&&j(c.toString())!==o?(m=c,n=j(c.toString()),a[l]=b):100>h&&(q=setTimeout(arguments.callee.trcBind(this,b),20))},20))}(function(a){if(!p){if(q&&(clearTimeout(q),q=null),p=!0,m&&j(m.toString())==n){try{m(a)}catch(c){}m=null}p=!1,TRC.kaltura_API||(TRC.kaltura_API=b.getElementById(a),d(a,TRC.kaltura_API,k))}});e=!0}},TRC.kaltura_playVideo=function(a){return TRC.kaltura_API?(TRC.kaltura_API.insertMedia?TRC.kaltura_API.insertMedia("-1",a,"true"):TRC.kaltura_API.sendNotification&&TRC.kaltura_API.sendNotification("changeMedia",{entryId:a}),scroll(0,0),!0):!1}}(window,document),function(a){var b=TRC.ooyala_API=null;TRC.ooyala_support=function(){if(!TRC.ooyala_API){var c=function(a){for(var b=0;b<a.length;b++)if(a[b].src){var c=a[b].src.match(new RegExp("ooyala\\.com/player\\.js.*callback=([^&]+)"));if(c&&c.length>1)return c[1]}return!1}(document.getElementsByTagName("script"));if(0==c&&a.OOYALA_PLAYER_JS&&(c=a.OOYALA_PLAYER_JS.customerCallbackName),0==c)return __trcWarn("Ooyala link_target set, but no Ooyala player with JS API found!"),void 0;var d=null;if(TRC.ooyala_API=b=function(){if(null!=d)return d;var a=document.getElementsByClassName("OoyalaVideoPlayer");return null!=a&&a.length>0?d=a[0]:void 0},a.trc_video_id){trc_video_id=null;try{delete a.trc_video_id}catch(e){}}var f=!1,g=function(a,b,c){"object"!=typeof c&&(c={data:c}),c.player_id=a,f||(f=!0),TRC.dispatch("ooyala_"+b,c)},h=c.split(".");c=h.pop();for(var i=a;h.length&&i;){var j=h.shift();i="object"!=typeof i[j]?i[j]={}:i[j]}var k="function"==typeof i[c]?i[c]:null;i[c]=function(){try{g.apply(a,arguments)}catch(b){}null!=k&&k.apply(a,arguments)},i[c].trc=!0,TRC.listen(["ooyala_startContentDownload","ooyala_stateChanged"],function(a){if(null!=b()&&("ooyala_stateChanged"!=a.type||"playing"==a.state)){var c=__trcCopyProps(a,{});c.id=b().getCurrentItem().embedCode,TRCImpl.playVideo(c)}}),TRC.listen(["ooyala_currentItemEmbedCodeChanged","ooyala_embedCodeChanged"],function(b){if(a.trc_video_id){var c=__trcCopyProps(b,{});c.id=b.embedCode,TRCImpl.playVideo(c)}}),TRC.listen("ooyala_playComplete",function(a){TRC.dispatch("videoDone",{videoid:trc_video_id,player_id:a.player_id})})}},TRC.ooyala_playVideo=function(a){return b?(b().setQueryStringParameters({embedCode:a,autoplay:1}),scroll(0,0),!0):!1}}(window,document),function(){var a=TRC.PostRenderQueue=function(){return this.backend=[],this};a.prototype.pushBack=function(a,b){__trcDebug("postRenderQueue.pushBack("+a+")"),this.backend.push({name:a,func:b})},a.prototype.pushFront=function(a,b){__trcDebug("postRenderQueue.pushFront("+a+")"),this.backend.unshift({name:a,func:b})},a.prototype.popFront=function(){if(0==this.backend.length)return null;var a=this.backend.shift();return"function"==typeof a?{name:"unknown",func:a}:a}}(window,document),function(){TRC.text={lsplit:function(a,b,c){var d=a.split(b);return d.slice(0,c-1).concat(d.length>=c?d.slice(c-1).join(b):[])},parseCSV:function(a){for(var b=a.split(","),c=[];b.length;){var d=b.shift();if('"'==d[0]){do{if('"'==d.slice(1).replace(/""/g,"").slice(-1))break;d+=","+b.shift()}while(b.length);c.push(d.slice(1,d.length-1).replace(/""/g,'"'))}else c.push(d)}return c},toStringList:function(a){if(!a)return[];if(!(a instanceof Array))return[""+a];var b=[];return a.forEach(function(a){a&&b.push(""+a)}),b}}}(window,document),function(a,b){var c=TRC.Manager=function(c,e){var f=500;return this.numOfResetCssDivs=3,this.eventLogger=new Array,this.eventCounter={},this.reset=function(){this.reset=!0;for(var b in TRC.callbacks)b.search("recommendations")>=0&&(TRC.callbacks[b]=function(){});this.preloadRequestLoader&&(TRC.Timeout.clear(this.preloadRequestLoader.timeout),this.preloadRequestLoader.parentNode.removeChild(this.preloadRequestLoader),this.preloadRequestLoader=null);try{delete a.trc_video_id,delete a.trc_article_id,delete a.trc_item_url,delete a.trc_testmode,delete a.trc_adPlayer}catch(c){a.trc_video_id=null,a.trc_article_id=null,a.trc_item_url=null,a.trc_testmode=null,a.trc_adPlayer=null}for(var d in this.boxes){if(this.boxes[d].container)for(this.boxes[d].container.className=this.boxes[d].container.className.replace(" trc_related_container",""),delete this.boxes[d].container._trc_container,delete this.boxes[d].container._trc_anonbox;this.boxes[d].container.hasChildNodes();)this.boxes[d].container.removeChild(this.boxes[d].container.lastChild);TRC.Timeout.reset(),TRC.Interval.reset(),delete this.boxes[d]}},this.renderRBox=function(a){var b=document.trcGetParentByClassName(a.getContainer(),"trc_rbox_container");b.style.display="block",a.load(function(){b.style.display="none"})},this.getConfig=function(b,c){return"undefined"!=typeof b[c]?b[c]:b[c]="undefined"!=typeof a["trc_"+c]&&null!=a["trc_"+c]?a["trc_"+c]:"undefined"!=typeof this[c]&&null!=this[c]?this[c]:this[c]},this.getAutoItemMeta=function(b,c){"function"!=typeof this["normalize-"+b]&&(this["normalize-"+b]=function(a){return a});var d=function(a){return this.urlPreNormalizer(b,a)}.trcBind(this),c=c?d(c):null;c=c||function(){for(var a=document.head.getElementsByTagName("meta"),c=0;c<a.length;c++)if(a[c].name==b)return a[c].content;return null}(),c=c||function(){for(var a=document.head.getElementsByTagName("link"),b=0;b<a.length;b++)if("canonical"==a[b].rel)return d(a[b].href);return null}(),c=c||function(){for(var a=document.head.getElementsByTagName("meta"),b=0;b<a.length;b++)if("og:url"==a[b].getAttribute("property")&&a[b].content.length>5)return d(a[b].content);return null}();var e=!!c;return c=c||d(TRC.pageManager.getCurrentURL().toString()),this["normalize-"+b](c,a.trc_video_id?"video":"text",e)},this.getItemId=function(){var b=this.itemid;return a.trc_video_id||""==a.trc_video_id?b=a.trc_video_id:(a.trc_article_id||""==a.trc_article_id)&&(b=a.trc_article_id),""==b&&(b=this.getAutoItemMeta("item-id",a.trc_item_url?a.trc_item_url:null)),this.itemid=b},this.getReferrer=function(){var a="";if(this.referrer)return this.referrer;this.referrer=function(){for(var a=document.head.getElementsByTagName("link"),b=0;b<a.length;b++)if("referrer"==a[b].rel)return a[b].href;return null}();try{a=top.window.document.referrer}catch(b){a="",__trcWarn("TRC.Manager.getReferrer : rendering in cross domain iframe")}return this.referrer=this.referrer?this.referrer:a&&!/https?:\/\/(\w+)\.taboola(syndication)?\.com/.test(a)?a.substr(0,400):a.split("?")[0]},this.getListSize=function(a){return a.visible?this.calculateAutoListSize(a):0},this.getExtraResponsiveRecom=function(a){var b=this.getProperty(a.mode_name,"responsive-extra-columns"),c=this.getProperty(a.mode_name,"rows");return b?b*(c?c:1):0},this.getResponsiveRecommendations=function(b){var c,d,e,f,g=0,h="function"==typeof a.matchMedia;c=this.getMatchMediaRuleMaxWidth(b,h);for(var i=0,j=b.length;j>i;i++)f=b[i],d=f.cells*f.rows,e=h&&(a.matchMedia("(min-width: "+f.minWidth+"px)"+(isNaN(f.maxWidth)?"":" and (max-width: "+f.maxWidth+"px)")).matches||a.matchMedia("screen and (min-height: "+f.minWidth+"px)"+(isNaN(f.maxWidth)?"":" and (max-height: "+f.maxWidth+"px)")+" and (orientation: portrait)").matches),(isNaN(c)||f.minWidth<=c||0>c||e)&&d>g&&(g=d);return{listSize:g,rule:g?f:null}},this.getMatchMediaRuleMaxWidth=function(b,c){var d,e;if(!c)return screen.width;for(var f=0,g=b.length;g>f;f++)if(e=b[f],d=a.matchMedia("screen and (min-device-width: "+e.minWidth+"px)"+(isNaN(e.maxWidth)?"":" and (max-device-width: "+e.maxWidth+"px)")),d.matches)return e.maxWidth},this.calculateAutoListSize=function(a){var b=this.getProperty(a.mode_name,"list-size"),c=0,d=this.getProperty(a.mode_name,"responsive-rules"),e=null;if(this.getProperty(a.mode_name,"mode-is-responsive")){if(d&&d.length)return e=this.getResponsiveRecommendations(d),a.matched_rule=e.rule,e.listSize;c=this.getExtraResponsiveRecom(a)}a.autoSize=this.getProperty(a.mode_name,"auto-size");var f=Math.floor(a.container.clientWidth>0?a.container.clientWidth:a.container.offsetWidth);if(!a.autoSize||0==f)return a.autoSize=!1,b+c;for(var g=this.getProperty(a.mode_name,"auto-size-rules"),h=0;h<g.length;h++)parseInt(g[h].minWc)<=f&&f<=parseInt(g[h].maxWc)&&(a.AutoSizeRule=g[h]);return a.AutoSizeRule?(a.rows=this.getProperty(a.mode_name,"rows"),this.modes[a.mode_name]["list-size"]=a.rows<=1?a.AutoSizeRule.n+c:a.AutoSizeRule.n*a.rows+c):0},this.calculateAutoSizeParameters=function(a){if(this.calculateAutoListSize(a),a.AutoSizeRule)for(var b=Math.floor(a.container.clientWidth>0?a.container.clientWidth:a.container.offsetWidth),c=a.AutoSizeRule.minWsRange;c<=a.AutoSizeRule.maxWsRange;c++){Wi=(b-(a.AutoSizeRule.n-1)*c)/a.AutoSizeRule.n;var d=parseInt(Wi);if(d==Wi){a.AutoSizeRule.Wi=Wi,a.AutoSizeRule.Ws=c;break}}},this.getItemUrl=function(){var b=this.itemurl;return a.trc_item_url?b=this.urlPreNormalizer("item-url",a.trc_item_url):null==this.itemurl&&(b=this.getAutoItemMeta("item-url")),this.itemurl=b},this.urlPreNormalizer=function(b,c){var d=this["prenormalize-"+b];if(!d)return c;(d["truncate-at"]||[]).forEach(function(a){var b=c.search(a);b>=0&&(c=c.substr(0,b))});var e=new a.TRC.URL(c);for(var f in d)if(d[f])switch(f){case"host":delete e.host;break;case"trailing-dirsep":for(;"/"==e.pathname.substr(e.pathname.length-1);)e.pathname=e.pathname.substr(0,e.pathname.length-1);break;case"query":var g=[],h=e.search.replace(/^\?/,"").split("&"),i=d[f];"string"==typeof i&&(i=new RegExp(i));var j=function(){return i instanceof Array?function(a){for(var b=0;b<i.length;b++)if(a==i[b])return!0;return!1}:i instanceof RegExp?i.test.trcBind(i):function(){return!1}}();h.forEach(function(a){j(decodeURIComponent(a.split("=")[0]))&&g.push(a)}),e.search=(g.length?"?":"")+g.join("&");break;case"fragment":var i=d[f],k=e.hash.replace(/^#/,"");"string"==typeof i&&(i=new RegExp(i)),e.hash="",i instanceof RegExp&&i.test(k)?e.hash="#"+k:i instanceof Array&&i.forEach(function(a){k.search(a)>=0&&(e.hash="#"+k)})}return e.pathname||(e.pathname="/"),"item-id"==b?e.toString().toLowerCase():e.toString()},this.genCallback=function(a){var b="recommendations_"+(TRC.callbacks.auto_gen_callback_seq=TRC.callbacks.auto_gen_callback_seq+1||1);return TRC.callbacks[b]=a,"TRC.callbacks."+b},this.formatTRCRequest=function(b,c){function d(a){switch(a){case"user":return"u";case"uploader":return"U";case"content-rating":return"c";case"publish-date":return"t";case"duration":return"d";case"category":return"x";case"v":case"r":default:return a}}var e=[],f={ii:this.getItemId(),it:this.getItemType(),sd:TRC.pageManager.getPublisherValue(TRC.publisherId,"session-data"),ui:TRC.pageManager.getValue("user-id"),vi:TRC.pageManager.getPageData(),cv:this.version,uiv:this.getPublisherVersion(),id:parseInt(1e3*Math.random())};TRC.pageManager.getValue("past-exclusions")&&(f.px=TRC.pageManager.getValue("past-exclusions")),c&&(f.it=c),this.excludedItems&&(f.ex=TRC.text.toStringList(this.excludedItems));var g=this.getItemUrl();for(p in b){var h=b[p];if(h.placement){h.item_id&&(f.ii=h.item_id),0==h.origin.toString().indexOf("h2")&&(f.ii="_homepage_"),h.item_type&&(f.it=h.item_type),"undefined"!=typeof h.item_url&&(g=h.item_url);var i={li:h.list_id||"rbox-"+(h.visible?h.origin.toString():"tracking"),s:this.getListSize(h),uim:this.global["use-calibration-uim"]&&this.getProperty(h.mode_name,"mode-is-responsive")?this.computeCalbUIM(b[p]):h.mode_name,uip:h.placement,orig_uip:h.placement};h.category&&(i.ac=h.category),h.article?(i.sii=h.article,i.sit="text"):h.video&&(i.sii=h.video,i.sit="video"),h.exclude&&(i.ex=TRC.text.toStringList(h.exclude));var j=this.getProperty(h.mode_name,"required-attributes");"string"==typeof j&&"none"!=j&&(i.ra=j),"string"==typeof h.container&&(h.container=document.getElementById(h.container)),i=this["normalize-request-param"](i,h.mode_name),e.push(i)}}if(a.trc_testmode&&(f.y=!0),this.trc_url_auto_detection==f.ii){var k=this.getProperty(e[0].uim,"remove-url-playvideo-behavior");k&&(g=null)}null!=g&&(f.u=g),this.getReferrer()&&(f.e=this.referrer);var l={};this.tags&&this.tags.length&&(l.k=this.tags.join(","));for(p in this.metadata)this.metadata[p]&&(l[d(p)]=this.metadata[p]);if(function(){for(p in l)return!0;return!1}()&&(f.m=l),f.r=e,f=this["normalize-request-param"](f,null),this.preloadRequest)for(var m=0,n=f.r.length;n>m;m++)this.preloadRequest[f.r[m].uip]||(this.preloadRequest[f.r[m].uip]=this.preloadRequest[f.r[m].orig_uip]);return TRC.pConsole("recommendations","info","formatted request",f,"object"),f},this.computeCalbUIM=function(a){if(!a.matched_rule)return a.mode_name;var b=TRC.implClasses.TRCRBox,c=this.modes[a.mode_name],d=a.matched_rule,e="none"!=c["thumbnail-position"]&&c["thumbnail-position"]||void 0,f=e?TRC.math.round10(b.prototype.getRuleAspectRatio(d,"ratio")||b.prototype.getThumbAspectRatio(c,"ratio")||TRCRBox.prototype.DEFAULT_THUMB_RATIO,-1):void 0,g=e?this.caclculateThumbnailWidth(a.container,d):void 0;return a.mode_name+":type=responsive,rows="+d.rows+",cells="+d.cells+",thumb-pos="+e+(e&&"none"!=e?",thumb-ratio="+f+",thumb-width="+g:"")},this.caclculateThumbnailWidth=function(a,b){var c,d=TRC.css.responsive.getRulePercentageWidth(b.cells,b.margin.h)/100,e=50;return a&&d?(c=parseInt(a.clientWidth>0?a.clientWidth:a.offsetWidth,10),TRC.math.roundByDecimal(c*d,e)):null},this.dispatchLoadRequest=function(b){if(!(TRC.isKilled&&TRC.isKilled()||(this.preloadRequest=b,function(a){for(p in a)return!1;return!0}(b)))){if(null==this.getItemId())return this.delayedDispatchLoadRequest=this.dispatchLoadRequest.trcBind(this,b),void 0;this.delayedDispatchLoadRequest=null;var c=this.getProperty(null,"timeout")||8e3;try{var e=this.formatTRCRequest(this.preloadRequest);e.cb=this.genCallback(this.handleLoadResponse.trcBind(this));var f=d+"//"+this.domain+"/"+escape(TRC.publisherId)+"/trc/3/json?tim="+escape(__trcClientTimestamp())+(this.trcByPass?"&trc_skip_failover=yes&":"&")+"data="+encodeURIComponent(__trcJSONify(e))+TRC.pageManager.additionalDispatchParams();a.trc_debug_level>1&&(f+="&llvl="+a.trc_debug_level),TRC.utm.push((new Date).getTime()-TRC.utm.start),this.preloadRequestLoader=this.loadExternal(f,"js",this.handleLoadResponseFailure.trcBind(this),!0),this.preloadRequestLoader.timeout=TRC.Timeout.set(this.abortLoadRequest.trcBind(this,!0),c),TRC.pConsole("","time","dispatch recommendation request","")}catch(g){__trcError("TRC.dispatchLoadRequest: Error in request processing",g)}}},this.abortLoadRequest=function(a){this.preloadRequestLoader&&(this.preloadRequestLoader.parentNode.removeChild(this.preloadRequestLoader),this.preloadRequestLoader=null);for(pl in this.preloadRequest)if(!(pl.search("rbox-tracking")>=0)){a&&(a=!1,__trcWarn("TRC.abortLoadRequest: pv3 timeout"));var b=this.preloadRequest[pl];delete this.preloadRequest[pl],b.loadRBoxRequestFailed=!0,this.internalDrawRBox(b)}},this.handleLoadResponseFailure=function(b){b=a.event||b,null!=this.preloadRequestLoader&&(TRC.Timeout.clear(this.preloadRequestLoader.timeout),__trcError("Server did not respond to loadRBox"),this.abortLoadRequest())},this.handleLoadResponse=function(a){try{TRC.pConsole("recommendations","info","recommendations response",a,a.trc.verbose?"verbose":"object"),TRC.pConsole("","time","recommendations loaded","");var b,c;if(TRC.utm.push((new Date).getTime()-TRC.utm.start),this.preloadRequestLoader&&TRC.Timeout.clear(this.preloadRequestLoader.timeout),!(a&&a.trc&&a.trc.vl&&a.trc.vl.length))return __trcError("Invalid response from server: "+a),this.abortLoadRequest(),void 0;TRC.pageManager.storePublisherValue(TRC.publisherId,"session-data",a.trc.sd),a.trc.DNT&&"TRUE"===a.trc.DNT.toUpperCase()?TRC.pageManager.removeKey("user-id"):TRC.pageManager.storeValue("user-id",a.trc.ui);for(var d=0;d<a.trc.vl.length;d++){var e=a.trc.vl[d].uip;e.search("rbox-tracking")>=0||("undefined"!=typeof this.preloadRequest[e]?(this.preloadRequest[e].response={trc:{req:a.trc.vl[d].ri,"session-id":a.trc.si,"session-data":a.trc.sd,"user-id":a.trc.ui,"watched-item":a.trc.wi,"country-code":a.trc.cc,"test-variant":a.trc.t,DNT:a.trc.DNT,"video-list":{video:a.trc.vl[d].v}}},b="1"==a.trc.sl,a.trc.tc&&TRC.Manager.prototype.loadExternal("http://c2.taboola.com/console/console_loader.js","js"),b&&(c=a.trc.pi,this.preloadRequest[e].spotlight=!0,this.preloadRequest[e]["spotlight-publisher-id"]=c,__trcDebug("Detected Spotlight Administrator("+c+")")),"undefined"!=typeof this.preloadRequest[e].container&&this.internalDrawRBox(this.preloadRequest[e])):__trcWarn("Invalid placement in server response",e))}for(var f in this.preloadRequest)if(this.preloadRequest[f]&&null==this.preloadRequest[f].response&&f.search("rbox-tracking")<0){__trcWarn("Server did not provide response for '"+f+'"!');var g=this.preloadRequest[f];delete this.preloadRequest[f],__trcDebug("Recovering internalDrawRBox("+f+")"),this.internalDrawRBox(g)}this.preloadRequestLoader&&(this.preloadRequestLoader.parentNode.removeChild(this.preloadRequestLoader),this.preloadRequestLoader=null),b&&this.loadSpotlight()}catch(h){__trcError("Error in TRC.handleLoadResponse : ",h)}},this.loadSpotlight=function(){document.querySelectorAll&&(this.spotlightLoaded?TRC.dispatch("trc_afterRboxDraw"):(this.spotlightLoaded=TRC.URL.prototype.switchProtocol.call(TRC.getBackstageUrl()+"resources/js/1.1.0/spotlight.js",d),this.loadExternal(this.spotlightLoaded,"js")))},this.setCssDivsIds=function(a,b){var c=4;for(var d in a)a[d].cssDivsArr=[],d&&TRC.util.getRandomIds({arr:a[d].cssDivsArr,len:b,strength:c,prefix:"t",suffix:"_r"})},this.setLBCssDivsIds=function(a,b){var c=4;TRC.util.getRandomIds({arr:a.iframe,len:b,strength:c,prefix:"t",suffix:"_r"}),TRC.util.getRandomIds({arr:a.topDiv,len:b,strength:c,prefix:"t",suffix:"_r"})},this.getModesCache=function(){if(TRC.modesCache)return TRC.modesCache;TRC.modesCache={};for(var a in this.modes)TRC.modesCache[a]={};return TRC.modesCache},this.init=function(b){var c=TRC.URL.prototype.getParameter.call(location.href,"trc_css-isolation")||TRC.pageManager.getValue("trc_css-isolation");__trcCopyProps(b,this),this.boxes={},this.unique_placement_count={},this.tags=[],this.metadata={},this.cssReset="yes"===c||"no"!==c&&this.global["css-isolation"]!==!1?!0:!1,this.trcRequestDelay=this.global["trc-request-delay"]||f,this.trcByPass=this["trc-skip-failover"]===!0?!0:!1,c&&TRC.pageManager.storeValue("trc_css-isolation",c),TRC.getBackstageUrl=function(){return this["backstage-domain-url"]||"https://backstage.taboola.com/backstage/"}.trcBind(this),TRC.styleInjected||(this.cssReset?(this.setLBCssDivsIds(TRC.lightBoxCssReset={iframe:[],topDiv:[]},this.numOfResetCssDivs),this.setCssDivsIds(this.getModesCache(),this.numOfResetCssDivs),TRC.css.utils.setStyleElements(TRC.css.utils.setStyleTextIdPrefix(this.defaults.style+this.global.style,TRC.modesCache,TRC.lightBoxCssReset)),__trcInfo("CSS Isolation is active")):TRC.dom.injectStyle(this.defaults.style+this.global.style)),TRC.pageManager.setDomainConfiguration(this.global["publisher-domains"]),this.domain=this.global["requests-domain"]?this.global["requests-domain"]:"trc.taboola.com",this.origin instanceof Array||(this.origin=[this.origin]),this.metadata.user=null!=this.userMetadata?__trcJSONify(this.userMetadata):"undefined"==typeof trc_user_id?this["get-user"]():trc_user_id,TRC.util.hasKeys(this["trc-network-mapping"])&&this.shiftPublisherId(this["trc-network-mapping"]);try{TRC.pConsole("page","debug","Hook : publisher_start",this["publisher-start"].toString()),this["publisher-start"]()}catch(d){__trcError("Error running publisher-start",d)}this.metadata.uploader=this["get-creator"](),this.tags=this["get-tags"]();try{this.metadata.v=this["get-views"](),this.metadata.r=this["get-rating"](),this.metafields.split(",").forEach(function(a){a&&(this.metadata[a]=this["get-"+a]?this["get-"+a]():this.readMetaTag(a))}.trcBind(this))}catch(d){}this.gt=new Gettext({domain:"rbox",locale_data:this.global.locale}),a.trc_testmode=!!a.trc_testmode||TRC.pageManager.isStagingView(),setTimeout(this.setupOVP.trcBind(this),0),this.init=function(){},TRC.isInteractive=!1,TRC.isPageLoaded=!1,this.setInteractiveHandlers(),this.setPageOnloadHandlers()},this.setInteractiveHandlers=function(){var c=TRC.EVENT_PAGE_INTERACTIVE,d=["resize","scroll"];eventListDoc=["scroll","mousedown","keydown","touchstart"],interactiveHandler=function(e){if(e=e||window.event,!TRC.Browser.ie||"resize"!==e.type||null!=e.srcElement){for(var f=0;f<d.length;f++)TRC.dom.off(a,d[f],interactiveHandler);for(var f=0;f<eventListDoc.length;f++)TRC.dom.off(b,eventListDoc[f],interactiveHandler);TRC.isInteractive=!0,TRC.dispatch(c)}};for(var e=0;e<d.length;e++)TRC.dom.on(a,d[e],interactiveHandler);for(var e=0;e<eventListDoc.length;e++)TRC.dom.on(b,eventListDoc[e],interactiveHandler)},this.setPageOnloadHandlers=function(){var b=TRC.EVENT_PAGE_LOAD,c=function(){TRC.dom.off(a,"load",c),TRC.isPageLoaded=!0,TRC.dispatch(b)};TRC.dom.on(a,"load",c)},this.pollTillContainerAvailable=function(a,b){var c=1e3,d=40,e=this,f=a.container,g=function(){e.internalDrawRBox(a)};if(b="undefined"==typeof b?c:b,TRC.pConsole("page","debug","in pollTillContainerAvailable : retry coutn = "+b),a.player||TRC.dom.isReady)return TRC.pConsole("page","debug","in pollTillContainerAvailable : player - calling 'TRC.dom.onReady'"),TRC.dom.onReady(g);try{a.container=this.ensureValidContainer(a.container,!0)}catch(h){}return a.container?(this.internalDrawRBox(a),void 0):(a.container=f,b--?(b=TRC.dom.isReady?Math.min(b,1):b,TRC.Timeout.set(function(){e.pollTillContainerAvailable.call(e,a,b)},d),void 0):(TRC.pConsole("page","debug","in pollTillContainerAvailable : container - "+a.container+" not found, no more retries"),TRC.dom.onReady(g)))},this.countTrcContainerMissingError=0,this.ensureValidContainer=function(a,b){var c="trc_related_container";if("string"==typeof a&&(a=document.getElementById(a),b&&!a))return null;if("object"!=typeof a&&(a=null),null!=a){if(a.className.match(c))return a;for(;a.hasChildNodes();)a.removeChild(a.firstChild);return a.className+=" "+c+" trc_spotlight_widget",a}if(null!=(a=document.getElementById(c)))return a.className.search(c)<=0&&(a.className+=" "+c+" trc_spotlight_widget"),a;if(!document.body)return null;for(var d=null,e=document.body.getElementsByTagName("script"),f=0;f<e.length;f++)if(!e[f].src&&/TRC\.drawRBox\(/.test(e[f].innerHTML)){d=e[f];break}if(!d||!d.parentNode)return this.countTrcContainerMissingError<2&&(this.countTrcContainerMissingError+=1,__trcError("Didn't manage to find TRC container for R-Box ("+this.countTrcContainerMissingError+") "+(TRC.dom.isReady?"(Document is Ready)":"")+"!")),null;var g=document.createElement("div");return g.id=g.className=c+" trc_spotlight_widget",d.parentNode.insertBefore(g,d),g},this.getPublisherVersion=function(){try{if(TRC.baseDomain.search(TRC.publisherId)>=0){var a=TRC.baseDomain.split("/");if(""==a[a.length-1]&&a.pop(),a[a.length-1]!=TRC.publisherId)return a[a.length-1]}}catch(b){}return"default"},this.getItemType=function(){switch(TRC.listOrigin.getSource()){case"h":return"home";case"c":return"category";case"t":return"text";case"s":return"search";case"p":return"photo";case"v":default:return"video"}},this.playVideo=function(b){var c=!1;try{TRC.dispatch("videoPlaying",b)}catch(d){__trcError("Problem in playVideo:videoPlaying",d)}if("undefined"!=typeof b.id&&a.trc_video_id!=b.id){var e=TRC.listOrigin.getSource();if("undefined"==typeof b.url&&(a.trc_video_id||"v"!=e?b.url=null:(b.url=this.getAutoItemMeta("item-url"),this.trc_url_auto_detection=b.id)),a.trc_video_id=b.id,a.trc_item_url=b.url,null!=this.delayedDispatchLoadRequest&&(this.delayedDispatchLoadRequest(),c=!0),0!=a.TRC.trc_drawRBox){var f=0;for(var g in this.boxes)/(rbox-blended|rplayer|rbox-v2)/.test(this.boxes[g].getListId())&&this.boxes[g].updateRecommendations("video")&&f++;if(1>f&&!c){var h={};options=this.computeRBoxOptions({mode:"rbox-tracking",item_id:b.id,item_url:b.url,item_type:"video",visible:!1}),delete options.container,h[options.placement]=options,this.dispatchLoadRequest(h)}}}},this.setUser=function(a){this.userMetadata=a,TRC.pConsole("page","info","user meta data ",a,"object")},this.getUIInstance=function(b){var c=this.getProperty(b,"impl-class");return c&&c in a.TRC.implClasses?a.TRC.implClasses[c]:TRC.implClasses.TRCRBox},this.calculatePlacement=function(a){if(a.mode_name.search("rbox-tracking")>=0)return a.mode_name;var b=a.mode_name+(a.category?"!"+a.category:"");return"undefined"!=typeof this.unique_placement_count[b]&&(b+="#"+ ++this.unique_placement_count[b]),b},this.computeRBoxOptions=function(b){return"string"==typeof b&&(b={mode_name:b}),b.pubOpts?b:(b.pubOpts=__trcCopyProps(b,{}),a.trc_testmode=!!a.trc_testmode||!!b.testmode,b.tracking=(this.tracking?this.tracking:"")+(b.tracking?b.tracking:""),b.target_type=b.target_type||this.target_type||this.getProperty(b.mode_name,"target_type")||"video",b.origin=new TRC.ListOriginBuilder(TRC.listOrigin.getSource(),b.target_type),b.mode_name=!!b.mode&&b.mode||!!b.mode_name&&b.mode_name||!!a.trc_mode_name&&a.trc_mode_name||"rbox-"+b.origin.toString(),b.mode_name=b.mode_name.replace(/\s+/g,""),b.category=!!b.category&&b.category,b.link_target=b.link_target||this.link_target||this.getProperty(b.mode_name,"link-target")||"normal","undefined"==typeof b.placement&&(b.placement=this.calculatePlacement(b)),this.unique_placement_count[b.placement]=0,b.visible="boolean"==typeof b.visible?b.visible:!this.invisible,"string"==typeof b.autoplaybox&&(b.autoplaybox=document.getElementById(b.autoplaybox)),!b.player&&b.visible&&(b.original_container=b.container,b.container=this.ensureValidContainer(b.container)),this.setupOVP(b),b.response=null,b.computed=!0,b)},this.listenToPlayer=function(a,b){var c,d="trc_related_container";c=TRC.listen("videoPlaying",function(e){var f,g=document.getElementById(e.player_id);return g?(TRC.dom.isAncestor(b,g,!0)?(c.remove(),TRC.listen("videoPlaying",function(a){a.player_id===b.player_id?f.style.left="-999999em":__trcError("TRC.listenToPlayer: wrong player_id was used for videoPlaying")}),b.player_id=e.player_id,a.container&&("string"==typeof a.container&&(a.container=document.getElementById(a.container)),f=a.container),f||(a.container=f=document.createElement("div")),f.className=d+" trc-inplayer-rbox",f.style.left="-999999em",f.style.width=g.offsetWidth+"px",f.style.marginTop="-"+g.offsetHeight+"px",TRC.Browser.ieUpto(6)&&(b.style.position="absolute"),b.appendChild(f),TRC.kaltura_API&&TRC.Browser.firefox&&(delete TRC.kaltura_API,TRC.kaltura_support()),a.getListId=function(){return"rplayer-after"},a.list_id=a.getListId(),a.loaded=!0,this.internalDrawRBox(a)):__trcError("TRC.listenToPlayer: object with player_id wasn't found in playerContainer that was passed"),void 0):(__trcError("TRC.listenToPlayer: wrong player_id was passed"),void 0)}.trcBind(this)),TRC.listen("videoDone",function(c){var d=a.container;return d?(c.player_id===b.player_id?d.style.left="0":__trcError("TRC.listenToPlayer: wrong player_id was used for videoDone"),void 0):(__trcError("TRC.listenToPlayer:videoDone mainContainer wasn't found"),void 0)}),TRC.ooyala_API&&(TRC.listen("ooyala_stateChanged",function(c){var d=a.container;d&&(c.player_id===b.player_id?d.style.left="-999999em":__trcError("TRC.listenToPlayer: wrong player_id was used for ooyala_stateChanged"))}),TRC.listen("ooyala_activePanelChanged",function(c){var d=a.container;d&&(c.player_id===b.player_id?d.style.left="more"===c.activePanel||"info"===c.activePanel?"0":"-999999em":__trcError("TRC.listenToPlayer: wrong player_id was used for ooyala_activePanelChanged"))}))},this.internalDrawRBox=function(c){var d,e;if(c=this.computeRBoxOptions(c),c.player){var f=c.player;return delete c.player,this.listenToPlayer(c,document.getElementById(f)),void 0}if(d=c.container){if(c.visible||(d.style.display="none"),c.spotlight&&d.setAttribute("data-spotlight-publisher-id",c["spotlight-publisher-id"]),null==c.response&&this.loadCalled&&"undefined"!=typeof this.preloadRequest[c.placement]&&(c.response=this.preloadRequest[c.placement].response,__trcCopyProps(c,this.preloadRequest[c.placement]),null==c.response))return this.preloadRequest[c.placement].container=c.container,void 0;var g=new(this.getUIInstance(c.mode_name))(c.origin.toString(),c,this);this.boxes[g.id]=g,d._trc_container||(d._trc_container=document.createElement("div"),d._trc_container.className="trc_rbox_container",d._trc_anonbox=document.createElement("div"),d._trc_container.appendChild(d._trc_anonbox),d.appendChild(d._trc_container),this.cssReset&&"rbox-tracking"!==g.mode_name?(e=b.createElement("div"),TRC.dom.swapElements(d,e,!1),g.outermostContainer=this.createCssResetContainers(d,g.mode_name),TRC.dom.swapElements(e,g.outermostContainer,!1),TRC.pConsole("page","info","CSS reset is enabled on all widgets")):g.outermostContainer=d),g.render(d._trc_anonbox),this.renderRBox(g),a.TRC.trc_drawRBox=!0}},this.createCssResetContainers=function(a,b){for(var c=TRC.modesCache[b]?TRC.modesCache[b].cssDivsArr:[],d=c.length,e=a,f=d-1;f>=0;f--)tmpElement=document.createElement("div"),tmpElement.id=c[f],tmpElement.className="trc_isolation",tmpElement.appendChild(e),e=tmpElement;return e},this.loadRBox=function(){var a,b=Array.prototype.slice.call(arguments),c={},d=40;if(!(b.length<1))try{if(this.loadCalled)throw new Error("loadRBox() may only be called once!");b[0]instanceof Array&&(b=b[0]),this.till_request_count=0;
for(var e=0;e<b.length;e++)b[e].player||this.till_request_count++;for(;b.length;)if(a=this.computeRBoxOptions(__trcCopyProps(b.shift(),{})),a.player)this.internalDrawRBox(a);else{if(c[a.placement])throw new Error("Placement '"+a.placement+"' is not unique in loadRBox()!");c[a.placement]=a,function(a,b,c){if(a.container&&1===a.container.nodeType)this.till_request_count--;else{if(!TRC.dom.isReady)return!a.player&&a.visible&&(a.container=this.ensureValidContainer(a.original_container)),TRC.Timeout.set(arguments.callee.trcBind(this,a,b,c),b),void 0;this.error("Invalid container provided for request "+a.placement+" ("+a.container+")!"),delete c[a.placement],this.till_request_count--}this.till_request_count<=0&&(this.loadCalled=!0,this.dispatchLoadRequest(c))}.trcBind(this,a,d,c)()}}catch(f){throw __trcError("Error in loadRBox()",f),f}},this.parseLoaderParams(e),TRC.dom.init(),this.init(c),this},d=TRC.PROTOCOL;c.prototype["list-size"]=0,c.prototype.MAX_RETRY=2,c.prototype.drawInterface=!1,c.prototype.delayedDispatchLoadRequest=null,c.prototype.invisible=!1,c.prototype.excludedItems=null,c.prototype.boxes={},c.prototype.itemid=null,c.prototype.itemurl=null,c.prototype.tags=[],c.prototype.metadata={},c.prototype.gt={},c.prototype.userMetadata=null,c.prototype.loadCalled=!1,c.prototype.unique_placement_count={},c.prototype.trc_url_auto_detection=null,c.prototype.shiftPublisherId=function(a){var b,c,d,e,f,g,h=TRC.URL.prototype.getParameter.call(location.href,"taboola_sim_domain")||TRC.URL.prototype.getParameter.call(location.href,"fakeurl"),i=(h||location.host).toLowerCase(),j=(h||location.href).toLowerCase(),k=a[i],l="/",m=["m","mobile","www2","www3"];if(!k){for(__trcToArray(a,b=[]),b.sort(function(a,b){return a[0].length>b[0].length?-1:a[0].length<b[0].length?1:0}),c=0,d=b.length;d>c;c++)if(e=b[c][0].toLowerCase(),e.indexOf(l)>0){if(j.match(e)){k=b[c][1];break}if(e.indexOf("www.")>-1&&j.match(e.replace("www.",""))){k=b[c][1];break}}else if(i.match(e)){k=b[c][1];break}if(!k&&i.indexOf("www.")<0){for(c=0,d=m.length;d>c&&(f=new RegExp("(https://|http://|^)"+m[c]+"."),g=i.replace(f,"www."),!(k=a[g]));c++);k||(g="www."+i,k=a[g])}}TRC.publisherId=k?k:"unknown-site-on-"+TRC.publisherId,TRC.pConsole("page","info","in 'Network-Solution' : publisher-id was set to - "+TRC.publisherId,"")},c.prototype.getProperty=function(a,b){return"undefined"==typeof this.modes||"undefined"==typeof this.modes[a]||"undefined"==typeof this.modes[a][b]?this[b]:this.modes[a][b]},c.prototype.getFunction=function(a,b){var c=Array.prototype.slice.call(arguments,2),d=this.getProperty(a,b);return"function"==typeof d?(TRC.pConsole(a,"debug","Hook : "+b,d.toString(),"function"),d.apply(this,c)):void 0},c.prototype.readMetaTag=function(a){for(var b=document.head.getElementsByTagName("meta"),c=null,d=0;d<b.length;d++)if(b[d].name){if(b[d].name.toLowerCase()=="item-"+a.toLowerCase())return b[d].content;b[d].name.toLowerCase()==a.toLowerCase()&&(c=b[d].content)}return c},c.prototype.get_intent=function(){var b=a.location.href,c=TRC.pageManager.getPublisherValue(TRC.publisherId,"auto-play-intent");if(null!=c){var d=c.split(":");if(parseInt(d[0])>(new Date).getTime()-3e4&&d[1]==this.getItemId())return"undefined"!=typeof d[2]?d[2]:"n"}return b.search(this.getItemId())>=0?"s":"u"},c.prototype["get-creator"]=function(){return this.readMetaTag("uploader")||this.readMetaTag("creator")},c.prototype["get-tags"]=function(){for(var a=null,b=a?a.split(","):[];b.length>0&&!b[0];)b.shift();return b},TRC.implClasses=TRC.implClasses||{},c.prototype.logTrcEvent=function(b,c,e){if(!TRC.isKilled||!TRC.isKilled()){for(var f in c)c[f]=this["normalize-log-param"](f,c[f]);var g=this["normalize-log-param"]("publisher",TRC.publisherId);b=this["normalize-log-param"]("type",b);try{var h=d+"//"+this.domain+"/"+g+"/log/3/"+escape(b)+"?";h+="tim="+escape(__trcClientTimestamp())+(this.trcByPass?"&trc_skip_failover=yes&":"&");for(name in c){var i="_"==name.charAt(0)?name.substr(1):name;"undefined"!=typeof c[name]&&null!=c[name]&&(h+=escape(i)+"="+escape(c[name])+"&")}a.trc_debug_level&&(h+="llvl="+a.trc_debug_level+"&"),h+="id="+parseInt(1e4*Math.random());var j=function(){if("function"==typeof e)try{e()}catch(a){__trcError("Error in event callback",a)}return!0},k=new Image;this.eventLogger.push(k),k.onload=k.onerror=j,k.src=h}catch(l){__trcError("Error in sending event",l)}}},c.prototype.log1=function(a,b,c,d){var e=a+":"+(d?d:b.li+b.ii)+b.ri;return b.ii&&b.it&&(e=a+":"+b.li+b.ii+b.ri),this.eventCounter[e]?(this.eventCounter[e]++,void 0):(this.logTrcEvent(a,b,c),this.eventCounter[e]=1,void 0)},c.prototype.loadExternal=function(){return TRC.net.loadScript.apply(null,arguments)},c.prototype.parseLoaderParams=function(b){for(var c in b){var d=b[c];if("unknown"!=d)switch("auto"==d&&(d=""),c){case"visible":this.invisible=!("boolean"==typeof d?d:"false"!=d);break;case"video":a.trc_video_id=d,TRC.listOrigin.setSource("v");break;case"url":a.trc_item_url=d;break;case"article":a.trc_article_id=d,TRC.listOrigin.setSource("t");break;case"category":a.trc_article_id=d,TRC.listOrigin.setSource("c");break;case"home":a.trc_article_id=d,TRC.listOrigin.setSource("h");break;case"search":a.trc_article_id=d,TRC.listOrigin.setSource("s");break;case"photo":a.trc_article_id=d,TRC.listOrigin.setSource("p");break;case"link_target":this.link_target=d;break;case"video_source":this.video_source=d;break;case"callback":this.video_player_callback=d;break;case"player_reference":this.video_player_reference=d;break;case"target_type":TRC.listOrigin.setTarget(this.target_type=d);break;case"exclude":this.excludedItems=d instanceof Array?d:[d];break;case"tracking":this.tracking=d;break;case"referrer":this.referrer=d}}},c.prototype.setupOVP=function(a){switch(a=a||{},this.getConfig(a,"video_source")||this.getConfig(a,"link_target")){case"brightcove":TRC.brightcove_support();break;case"ooyala":TRC.ooyala_support();break;case"kaltura":TRC.kaltura_support()}},c.prototype.log=__trcLog,c.prototype.error=__trcError,c.prototype.warn=__trcWarn,c.prototype.info=__trcInfo,c.prototype.debug=__trcDebug,TRC.EVENT_PAGE_INTERACTIVE="trcPageInteractive",TRC.EVENT_PAGE_LOAD="trcPageLoad"}(window,document),function(win,doc){TRC.implClasses=TRC.implClasses||{};var TRCRBox=TRC.implClasses.TRCRBox=function(a,b,c){return this.fixHeight=b.height,this.domain=c.domain,this.origin=a,this.header=!1,this.id="trc_"+Math.floor(1e5*Math.random()),this.response=this.request=null,__trcCopyProps(b,this),this.loaded=this.loaded?this.loaded:!1,this.element=null,this.listContainer=null,this.retryCount=0,this.drawList=!1,this.forceItemType=!1,this.trc=c,this.timeoutId=null,this.errorHandler="",this.boxes=[],this.visible_boxes={},this.synd_visible_boxes={},this.network_visible_boxes={},this.recommendationList=null,this.autoPlayer=null,this.use_cdn=this.trc.getProperty(this.mode_name,"use-cdn-recommendations")===!0,this.postRenderQueue=new TRC.PostRenderQueue,this.pager=null,this.src=null,this.isCssImportant=this.trc.getProperty(this.mode_name,"use-css-important"),this.publisher=TRC.publisherId,this.auto_scroll_interval=null,this.auto_scroll=null,this.lazyImageLoadMethdos={PAGE_LOAD:"regLazyImageLoadOnPageLoad",PAGE_INTERACTIVE:"regLazyImageLoadOnPageInteractive",RBOX_VISIBLE:"regLazyImageLoadOnRboxVisibile"},this.reqParams={"item-type":this.trc.getItemType(),"item-id":this.trc.getItemId()},this},IMAGE_LAZY_SRC_DATA_NAME="data-img-src",protocol=TRC.PROTOCOL;TRCRBox.prototype.DEFAULT_THUMB_RATIO=.8,TRCRBox.prototype.genRBoxURL=function(){if(win.trc_testmode)return this.getRetryUrl("static-preview");var a={};a[this.placement]=this;var b=this.trc.formatTRCRequest(a,this.forceItemType);return b.cb=this.trc.genCallback(this.loadScriptCallback.trcBind(this)),protocol+"//"+this.domain+"/"+escape(TRC.publisherId)+"/trc/3/json?tim="+escape(__trcClientTimestamp())+(this.trc.trcByPass?"&trc_skip_failover=yes&":"&")+"data="+encodeURIComponent(__trcJSONify(b))+TRC.pageManager.additionalDispatchParams()+(win.trc_debug_level>1?"&llvl="+win.trc_debug_level:"")},TRCRBox.prototype.getListId=function(){return this.visible?"rbox-"+this.origin:"rbox-tracking"},TRCRBox.prototype.getItemType=function(){return this.forceItemType?this.forceItemType:this.trc.getItemType()},TRCRBox.prototype.generateRDiv=function(){var a=document.createElement("div");return a.id=this.getListId(),a.className="trc_rbox_div trc_rbox_border_elm","none"!=this.element.style.display&&(a.style.display="none"),a.style.overflowX="hidden",a.style.overflowY="hidden",a},TRCRBox.prototype.generateHeader=function(a){var b=document.createElement("div"),c=document.createElement("span"),d=this.trc.getProperty(this.mode_name,"header"),e=this.trc.getProperty(this.mode_name,"header-right"),f="No Header"!=e;return b.id=this.id.replace("trc_","trc_header_"),b.className="trc_rbox_header trc_rbox_border_elm",c.className="trc_rbox_header_span",b.ext=document.createElement("div"),b.ext.className="trc_header_ext",b.appendChild(b.ext),f?(this.generateHeaderPart(c,d,"trc_header_left_column trc_header_left_part"),this.generateHeaderPart(c,e,"trc_header_right_column trc_header_right_part")):c.innerHTML="No Header"!=d?d:"",b.titleBox=c,b.appendChild(c),a&&a.appendChild(b),b},TRCRBox.prototype.generateHeaderPart=function(a,b,c){var d=document.createElement("span");d.className="trc_inner_header "+(c||""),d.innerHTML=b,a.appendChild(d)},TRCRBox.prototype.render=function(a){var b=this.trc.getProperty(this.mode_name,"auto-scroll");this.element=document.createElement("div"),this.element.id=this.id.replace("trc_","trc_wrapper_"),this.element.className="trc_rbox "+this.mode_name,this.element.style.overflow="hidden","undefined"!=typeof b&&"none"!=b&&(this.element.onmouseover=function(){null!=this.auto_scroll_interval&&TRC.Interval.clear(this.auto_scroll_interval)},this.element.onmouseout=function(){"function"==typeof this.auto_scroll&&(null!=this.auto_scroll_interval&&TRC.Interval.clear(this.auto_scroll_interval),this.auto_scroll_interval=TRC.Interval.set(this.auto_scroll,parseInt(b)))}),a.appendChild(this.element),this.element.style.display="none"},TRCRBox.prototype.generateVisibleParts=function(){if(null==this.listContainer){this.header=this.generateHeader(),"object"==typeof this.header&&this.element.appendChild(this.header);var a=document.createElement("div");a.id=this.id.replace("trc_","outer_"),a.className="trc_rbox_outer",a.style.overflow="hidden",this.listContainer=this.generateRDiv(),a.appendChild(this.listContainer),this.element.appendChild(a),this.element.style.display="block",this.trc.global["disclosure-enabled"]===!0?this.addTaboolaLogo():this.addTaboolaLogoNoDisclosure()}},TRCRBox.prototype.getRetryUrl=function(a){return base_domain=protocol+"//cdn.taboola.com/libtrc/"+TRC.publisherId+"/","preview"==a?base_domain+"trc-"+a+".js":base_domain+"trc-"+this.getListId()+"-"+a+".js"},TRCRBox.prototype.check_preview_size_error=function(a,b){var c=b.trc["video-list"].video;return c instanceof Array||(c=[c]),a!=this.getRetryUrl("preview")&&c.length<10?(this.src=this.getRetryUrl("preview"),!0):!1},TRCRBox.prototype.loadScriptCallback=function(a){var b,c,d,e,f,g,h="TRCRBox.loadScriptCallback(retry="+this.retryCount+")",i=a.trc,j=this.response&&this.response.trc.DNT&&"TRUE"===this.response.trc.DNT.toUpperCase(),k=this.trc.global["has-userx"],l="ontouchstart"in window;__trcDebug("Enter "+h),this.abortRequest(),this.utm=this.requestTime&&[this.requestTime,(new Date).getTime()-TRC.utm.start];var m=win.trc_testmode?!0:!1;if(i.vl&&i.vl.length){var n=i.vl.shift();a.trc=i=__trcCopyProps({req:n.ri,"session-id":a.trc.si,"session-data":a.trc.sd,"user-id":a.trc.ui,"watched-item":a.trc.wi,"country-code":a.trc.cc,"test-variant":a.trc.t,"video-list":{video:n.v}},a.trc)}if(!i||!i["video-list"]||!i["video-list"].video)return __trcError("Exit "+h+": pv2 format error"),this.use_cdn||m?(this.src=this.getRetryUrl(m?"preview":"error"),this.getData()):this.abortRendering(),this.sendEvent("available",this.createUtmParam(),!0),void 0;if(m&&this.check_preview_size_error(this.src,a))return __trcDebug("Exit "+h+": preview with not enough items"),this.getData(),this.sendEvent("available",this.createUtmParam(),!0),void 0;if(TRC.pageManager.storePublisherValue(TRC.publisherId,"session-data",i["session-data"]),a.trc.DNT&&"TRUE"===a.trc.DNT.toUpperCase()?TRC.pageManager.removeKey("user-id"):TRC.pageManager.storeValue("user-id",i["user-id"]),"rbox-tracking"!=this.getListId()&&"undefined"==typeof this.trc.modes[this.mode_name])return __trcError("TRCRBox.loadScriptCallback: Mode name '"+this.mode_name+"' doesn't exist in configuration file "),this.sendEvent("available",this.createUtmParam(),!0),void 0;if(this.drawList)return __trcWarn("Exit "+h+": got another response after already drawing"),this.sendEvent("available",this.createUtmParam(),!0),void 0;if(this.response=a,this.sendEvent("available",this.createUtmParam(),!0),i["video-list"].video.length<1)return __trcDebug("Exit "+h+": no items in response"),this.abortRendering(),void 0;if(this.recommendationList=i["video-list"].video,this.hasSyndicatedContent=this.hasSyndicated(this.recommendationList),"object"==typeof i&&"undefined"!=typeof i["test-variant"]&&(b="ab_"+this.mode_name+"_"+i["test-variant"],TRC.pConsole(this.mode_name,"info","test variant = "+i["test-variant"],b),"undefined"!=typeof this.trc.modes[b]&&(this.trc.cssReset&&this.switchCSSResetDivIds(this.mode_name,b),this.mode_name=b,this.element.className="trc_rbox "+this.mode_name)),c=this.trc.getProperty(this.mode_name,"mode-is-responsive"),d=this.trc.getProperty(this.mode_name,"auto-size"),f="autowidget-template-text-links"==this.trc.getProperty(this.mode_name,"widget-creator-layout"),e="none"!=this.trc.getProperty(this.mode_name,"thumbnail-position"),g=this.trc.getProperty(this.mode_name,"mode-has-userx"),TRC.pConsole(this.mode_name,"info","has user X = "+g,""),__trcDebug("Exit "+h+": success"),this.drawList=!0,c&&!f?(this.generateResponsiveOuters(this.element),this.drawResponsiveList(i)):(d&&this.container&&0==this.container.clientWidth&&(this.container.style.width="100%"),this.generateVisibleParts(),this.drawListBody(i)),"1"==this.response.trc.sl){var o=document.trcGetParentByClassName(this.getContainer(),"trc_related_container");__trcDebug("Detected Spotlight Administrator("+this.response.trc.pi+")"),o.setAttribute("data-spotlight-publisher-id",this.response.trc.pi),this.trc.loadSpotlight()}else if(!(!(g&&k&&e)||j||TRC.Browser.ieUpto(8)||l||this.trc.preloadRequest&&this.placement&&this.trc.preloadRequest[this.placement]&&this.trc.preloadRequest[this.placement].spotlight)){if(!TRC.userX.isInitialized)try{TRC.userX.init(this.trc.language)}catch(p){__trcDebug("failed to init Taboola Choice")}try{TRC.userX.initForMode(this)}catch(p){__trcDebug("failed to init Taboola Choice for mode "+this.mode_name)}}},TRCRBox.prototype.switchCSSResetDivIds=function(a,b){var c=TRC.modesCache[a]?TRC.modesCache[a].cssDivsArr:[],d=TRC.modesCache[b]?TRC.modesCache[b].cssDivsArr:[],e=c.length;try{for(var f=0;e>f;f++)doc.getElementById(c[f]).id=d[f]}catch(g){__trcError("TRCRBox.prototype.switchCSSResetDivs : ",g.message)}},TRCRBox.prototype.loadFailureHandler=function(){TRC.pConsole(this.mode_name,"debug","handleing TRC request failure","");var a="TRCRBox.loadFailureHandler(retry="+this.retryCount+")";if(__trcDebug("Enter "+a),!this.request)return __trcDebug("Exit "+a+": request was aborted"),void 0;if("object"==typeof trc_json_response)return __trcWarn("Exit "+a+": old style response"),this.loadScriptCallback(trc_json_response),delete trc_json_response,void 0;if(this.abortRequest(),this.response)return __trcDebug("Exit "+a+": response already received"),void 0;if(win.trc_testmode)this.src=this.getRetryUrl("preview"),__trcDebug("Exit "+a+": preview");else{if(!this.use_cdn)return __trcError("Aborting on error due to use-cdn=false"),this.abortRendering(),void 0;this.src=this.getRetryUrl("error"),__trcWarn("Exit "+a+": retrying with "+this.src.split("/")[2].split(".")[0].toUpperCase())}this.getData()},TRCRBox.prototype.abortRequest=function(){this.timeoutId&&(TRC.Timeout.clear(this.timeoutId),this.timeoutId=null),this.request&&(this.request.parentNode.removeChild(this.request),this.request=null)},TRCRBox.prototype.sendRequest=function(){var a="TRCRBox.sendRequest(retry="+this.retryCount+")";if(__trcDebug("Enter "+a),this.response)return __trcDebug("Exit "+a+": already have response"),this.loadScriptCallback(this.response),void 0;if(this.loadRBoxRequestFailed){if(!this.use_cdn)return __trcError("loadRBox failed and not using CDN, aborting."),this.abortRendering(),void 0;this.retryCount++,this.src=this.getRetryUrl("error")}var b=this.trc.getProperty(this.mode_name,"timeout")||8e3;this.timeoutId=TRC.Timeout.set(function(){return this.timeoutHappened=this.timeoutHappened+1||1,this.use_cdn?(this.abortRequest(),this.src=this.getRetryUrl("timeout"),__trcWarn("Called TRCRBox.sendRequest.timeout("+this.timeoutHappened+"): retrying with "+this.src.split("/")[2].split(".")[0].toUpperCase()),this.getData(),void 0):(__trcError("Timedout waiting for server but not aborting"),void 0)}.trcBind(this),b),this.response=null;try{this.requestTime=(new Date).getTime()-TRC.utm.start,this.request=this.trc.loadExternal(this.src,"js",this.loadFailureHandler.trcBind(this),!0)}catch(c){return __trcError("Exit "+a+": error in loadExternal",c),void 0}__trcDebug("Exit "+a+": success")},TRCRBox.prototype.abortRendering=function(){var a="TRCRBox.abortRendering(retry="+this.retryCount+")";switch(__trcDebug("Called "+a),this.drawList=!0,typeof this.errorHandler){case"string":return null!=this.listContainer&&this.listContainer.appendChild(document.createTextNode("Error getting recommendations: "+this.errorHandler)),void 0;case"function":return this.errorHandler(),void 0}},TRCRBox.prototype.getData=function(){this.loaded=!0,this.retryCount++;var a="TRCRBox.getData(retry="+this.retryCount+")";return __trcDebug("Enter "+a),this.cdnEventHandler||(this.cdnEventHandler=TRC.listen("staticRecommendationsReceived",function(a){this.response||this.loadScriptCallback(a.response)}.trcBind(this))),this.retryCount>this.trc.MAX_RETRY?(__trcError("Exit "+a+": max retry - last call was to "+this.src.split("/")[2].split(".")[0].toUpperCase()),this.abortRendering(),void 0):(TRC.dom.onReady(this.sendRequest.trcBind(this),TRC.Browser.ie?!1:!0),__trcDebug("Exit "+a+": success"),void 0)},TRCRBox.prototype.getContainer=function(){return this.element.parentNode},TRCRBox.prototype.getMainBox=function(){return this.element},TRCRBox.prototype.sendEvent=function(a,b,c,d,e){var f=!1,g={ri:this.response?this.response.trc.req:null,sd:TRC.pageManager.getPublisherValue(TRC.publisherId,"session-data"),ui:TRC.pageManager.getValue("user-id"),pi:this.trc.getItemId(),wi:this.response?this.response.trc["watched-item"]:null,pt:this.getItemType(),vi:TRC.pageManager.getPageData(),li:this.getListId()},h=function(){f||(f=!0,d&&d())};"click"==a&&"nt"==b.prt&&(g={}),__trcCopyProps(b,g),c?(this.trc.log1(a,g,h,this.placement),TRC.pConsole(this.mode_name,"info","event type : "+a+" - this event will be sent only once for the widget",g,"object")):(this.trc.logTrcEvent(a,g,h),TRC.pConsole(this.mode_name,"info","sending event type : "+a,g,"object")),"number"==typeof e&&TRC.Timeout.set(h,e)},TRCRBox.prototype.load=function(a){if(!this.loaded){var b=this.trc.getItemId(),c="undefined"!=typeof b&&null!=b&&0!=b.length;c?(this.src=this.genRBoxURL(),this.errorHandler=a,this.getData()):this.loaded=!0}},TRCRBox.prototype.updateRecommendations=function(a){return this.retryCount=0,this.drawList=!1,this.loadRBoxRequestFailed=!1,this.response=null,this.forceItemType=a,this.reqParams={"item-type":this.trc.getItemType(),"item-id":this.trc.getItemId()},this.timeoutId&&(TRC.Timeout.clear(this.timeoutId),this.timeoutId=null),this.loaded=!1,this.trc.renderRBox(this),!0},TRCRBox.prototype.isVisible=function(a){function b(a,c){return!a.parentNode||a.parentNode==document.documentElement&&a!=c?!1:a==c||b(a.parentNode,c)}a=a?a:this.container;var c=a.getBoundingClientRect(),d=c.left+Math.round((c.right-c.left)/2),e=c.top+Math.round((c.bottom-c.top)/2),f="CSS1Compat"===document.compatMode&&document.documentElement.clientWidth||document.body.clientWidth,g="CSS1Compat"===document.compatMode&&document.documentElement.clientHeight||document.body.clientHeight,h=TRC.Browser.operaUpto(10.1)||TRC.Browser.safariUpto(4)?document.elementFromPoint(d+document.body.scrollLeft,e+document.body.scrollTop):document.elementFromPoint(d,e);return d>0&&f>d&&e>0&&g>e&&h&&b(h,a)},TRCRBox.prototype.visible_items_collection=function(){var a,b=0;for(a=0;a<this.boxes.length;a++)this.isVisible(this.boxes[a])&&(this.boxes[a].video_data["is-syndicated"]?this.synd_visible_boxes[this.boxes[a].video_data["item-id"]]={id:this.boxes[a].video_data["item-id"],type:this.boxes[a].video_data.type,publisher:this.boxes[a].video_data.publisher}:this.boxes[a].video_data["is-in-network"]?this.network_visible_boxes[this.boxes[a].video_data["item-id"]]={id:this.boxes[a].video_data["item-id"],type:this.boxes[a].video_data.type,publisher:this.boxes[a].video_data.publisher}:this.visible_boxes[this.boxes[a].video_data["item-id"]]={id:this.boxes[a].video_data["item-id"],type:this.boxes[a].video_data.type},b++);return b},TRCRBox.prototype.clearChilds=function(a){for(;a.hasChildNodes();)a.removeChild(a.lastChild)},TRCRBox.prototype.hasSyndicated=function(a){for(var b,c=0;b=a[c];c++)if(b["is-syndicated"]||b["is-in-network"])return!0},TRCRBox.prototype.rePositionDurationElement=function(a,b,c){TRC.Browser.ieUpto(6)?(a.style.marginLeft=b/2-3+"px",a.style.top=c/2-15+"px"):7===TRC.Browser.ie?(a.style.left=b-3+"px",a.style.top=c-15+"px"):(a.style.marginLeft=b-3+"px",a.style.top=c-15+"px")},TRCRBox.prototype.getFirstVideoItem=function(a){var b=0,c=a.boxes,d=null;for(b=0;b<c.length;b++)if(!c[b].isSyndicated){d=c[b].video_data;break}return d},TRCRBox.prototype.hasDuration=function(){for(var a,b=this.trc.getProperty(this.mode_name,"detail-order").split(","),c=0;a=b[c];c++)if("duration"==a)return!0},TRCRBox.prototype.cleanStyleDimensions=function(a){var b=null;try{__trcDOMWalker(a,function(a){a.style.cssText&&(a.style.width="",a.style.height=""),-1!==(a.className+"").indexOf("video-duration")&&(b=a)})}catch(c){}return b},TRCRBox.prototype.createBillboard=function(){var a=__trcGetElementsByClass("trc_rbox_outer","div",this.element)[0];if(!a)return null;var b=document.createElement("div");return this.billboard=b,b.className="trc_billboard",b.style.width="auto",a.parentNode.insertBefore(b,a),a.style.clear="both",b},TRCRBox.prototype.checkForBlocking=function(){var a,b,c,d,e,f,g,h,i=this.trc.getProperty(this.mode_name,"list-size"),j="",k=[],l=[],m=[];for(i=Math.min(i,this.recommendationList.length),a=0;b=this.boxes[a];a++){try{e=b.video_data["is-in-network"],e||(d=b.video_data["is-syndicated"])}catch(n){}f=e?l:d?m:k,b&&1===b.nodeType&&b.childNodes.length?(g=document.trcGetCurrentStyle(b,"-moz-binding"),c=document.trcGetCurrentStyle(b,"orphans"),h=document.trcGetCurrentStyle(b,"visibility"),"hidden"!=h&&("none"==document.trcGetCurrentStyle(b,"display")?("4321"==document.trcGetCurrentStyle(b,"orphans")&&(j=j||"adblockplus"),f.push(1)):g&&"none"!=g&&(j=j||"adblockplus",f.push(1)))):f.push(1)}(k.length||m.length||l.length)&&__trcWarn("blocked:"+k.length+"-"+l.length+"-"+m.length+"-"+(j||"unknown"))},TRCRBox.prototype.createEmbedThumb=function(a){var b,c,d,e=this["player-container-id"]&&document.getElementById(this["player-container-id"]),f=this.trc.getProperty(this.mode_name,"player-detail-order"),g=document.createElement("DIV"),h=this.trc.getProperty(this.mode_name,"render-player-info"),i=this,j=this.trc.getProperty(this.mode_name,"player-thumbnail-height")||300,k=this.trc.getProperty(this.mode_name,"player-thumbnail-width")||400;return(a=a||this.getFirstVideoItem(this))?(e=e||this.createBillboard())?(e.innerHTML="",e.className+=" "+this.mode_name,e.hasDuration=this.hasDuration(),g.style.height="100%",g.style.cssFloat="left",g.className="playerCube",e.appendChild(g),b=this.drawVideoBox(a,e.hasDuration,f,"top"),g.appendChild(b),d=b.getElementsByTagName("A"),h?b.fixTextOverflow():d[1]&&d[1].parentNode.removeChild(d[1]),b.thumb&&b.img&&b.img_src&&(b.thumb.appendChild(b.img),b.img.onload=function(){var a=h?k:b.clientWidth,c=h||this.billboard?j:b.clientHeight;b.img.offsetWidth+b.img.offsetHeight?this.FixVideoImage(a,c,b.img):TRC.Timeout.set(function(){a=h?k:b.clientWidth,c=h||this.billboard?j:b.clientHeight,i.FixVideoImage(a,c,b.img)},10)}.trcBind(this),c=this.cleanStyleDimensions(b),b.style.marginLeft="0",b.style.width="auto",b.style.height="100%",b.style.cssFloat="none",b.style.styleFloat="none",b.thumb.style.width=h||this.billboard?k+"px":"100%",b.thumb.style.height=h||this.billboard?j+"px":"100%",b.thumb.style.marginRight="0",b.thumb.style.position="relative",this.setImageLoad(b.img,b,this.getThumbnailURL(a,b.thumb.offsetWidth,b.thumb.offsetHeight),100,b.thumb,this.trc.global["thumb-lazy-load-switch"]),TRC.Browser.ieUpto(6)&&(b.onmouseover=function(){this.className+=" playerCube_hover"},b.onmouseout=function(){this.className=this.className.replace(/\b\s+playerCube_hover\b/g,"")}),e.videoBlock=d[0],d[0].onclick=function(b){var c=this.trc.getProperty(this.mode_name,"player-embed-code");return b=b||event,"function"==typeof c&&e&&!win.trc_testmode?this.playInsideHostingContainer(a,c,e):win.open(a.logger_url),b.preventDefault&&b.preventDefault(),b.returnValue=!1}.trcBind(this),b.visCheckDone=!0,c&&this.rePositionDurationElement(c,b.thumb.clientWidth,b.thumb.clientHeight)),void 0):(__trcError("Can't find container element for createEmbedThumb!"),void 0):(__trcError("outerbox.js: video item was not found"),void 0)},TRCRBox.prototype.setImageLoad=function(a,b,c,d,e,f){var g=null,h=!1;if(this.imageOptimizePrefix||(this.imageOptimizePrefix=this.trc.getProperty(this.mode_name,"image-url-prefix")))if(h=this.isHiddenItem(b),g=this.getContainerDim(e,b,h))c=this.getImageOptimizePrefix(c,this.imageOptimizePrefix,g)+escape(c);else if(d)return TRC.Timeout.set(this.setImageLoad.trcBind(this,a,b,c,d--,e,f),50),void 0;b.img_src=c=TRC.URL.prototype.switchProtocol.call(c,protocol),f?this.setLazyImageLoad(a,c):a.src=c},TRCRBox.prototype.isHiddenItem=function(a){return"none"===doc.trcGetCurrentStyle(a,"display",null)?!0:!1},TRCRBox.prototype.getContainerDim=function(a,b,c){var d,e,f=100;if(c){if(this.cachedImageDim)return this.cachedImageDim}else if(d=TRC.dom.getElementRect(a),e=Math.ceil(d.right-d.left))return f=Math.ceil(d.bottom-d.top||this.getAspectHeight(b)||e*this.getThumbAspectRatio(this.trc.modes[this.mode_name],"ratio")||f),this.cachedImageDim={width:e,height:f};return null},TRCRBox.prototype.getAspectHeight=function(a){var b;return a.thumbnail_aspect?(b=TRC.dom.getElementRect(a.thumbnail_aspect),b.bottom-b.top):0},TRCRBox.prototype.getImageOptimizePrefix=function(a,b,c){var d=this.trc.getProperty(this.mode_name,"image-size-factor")||1,e=this.trc.getProperty(this.mode_name,"image-min-width")||110,f=this.trc.getProperty(this.mode_name,"image-size-round")||10,g=Math.ceil(Math.max(c.width*d,e)/f)*f,h=c.height/c.width,i=Math.ceil(g*c.height/c.width),j=this.isInNormalDimension(g)?g:Math.min(this.trc.getProperty(this.mode_name,"image-max-dimension"),Math.ceil(this.trc.getProperty(this.mode_name,"image-max-dimension")*h)),k=this.isInNormalDimension(i)?i:Math.ceil(j*h);return b=b.replace("{w}",Math.ceil(j)).replace("{h}",Math.ceil(k))},TRCRBox.prototype.isInNormalDimension=function(a){var b=this.trc.getProperty(this.mode_name,"image-min-dimension")||100,c=this.trc.getProperty(this.mode_name,"image-max-dimension")||600;return a>b-1&&c+1>a?!0:!1},TRCRBox.prototype.setLazyImageLoad=function(a,b){a.setAttribute(IMAGE_LAZY_SRC_DATA_NAME,b)},TRCRBox.prototype.setLazyImageLoadMethod=function(){var a,b=this.trc.global["thumb-lazy-load-method"]?this.trc.global["thumb-lazy-load-method"].split(","):[],c=0,d=b.length;for(a=0;d>a;a++)this.lazyImageLoadMethdos[b[a]]&&(c=1,this[this.lazyImageLoadMethdos[b[a]]]());if(!c)for(a in this.lazyImageLoadMethdos)this[this.lazyImageLoadMethdos[a]]()},TRCRBox.prototype.regLazyImageLoadOnPageInteractive=function(){var a=TRC.EVENT_PAGE_INTERACTIVE;TRC.listen(a,this.lazyImageLoader.trcBind(this)),TRC.isInteractive&&TRC.dispatch(a)},TRCRBox.prototype.regLazyImageLoadOnPageLoad=function(){var a=TRC.EVENT_PAGE_LOAD;TRC.listen(a,this.lazyImageLoader.trcBind(this)),TRC.isPageLoaded&&TRC.dispatch(a)},TRCRBox.prototype.regLazyImageLoadOnRboxVisibile=function(){var a=this.trc.global["thumb-lazy-load-space"]||100;this.isInViewPort(this.container,a)&&this.lazyImageLoader.trcBind(this)},TRCRBox.prototype.isInViewPort=function(a,b){var c=this.getMinViewPortOffsets(this.container);return 0>c&&Math.abs(c)>b?!1:!0},TRCRBox.prototype.lazyImageLoader=function(){var a,b,c=this.thumbnailImageStack||this.container.getElementsByTagName("img"),d=c.length;if(this.imagesLazyLoaded)this.imagesLazyLoaded=!0;else for(a=0;d>a;a++)b=c[a].getAttribute(IMAGE_LAZY_SRC_DATA_NAME),b&&(c[a].src=b)},TRCRBox.prototype.createUtmParam=function(){return{utm:TRC.utm.join(",")+(this.utm?","+this.utm.join(","):"")}},TRCRBox.prototype.getMinViewPortOffsets=function(a){var b=TRC.visibility.getViewPortOffsets(a);return b.verticalOffset<0&&b.horizontalOffset<0?Math.max(b.verticalOffset,b.horizontalOffset):Math.min(b.verticalOffset,b.horizontalOffset)},TRCRBox.prototype.drawListBody=function(trc,delayCount){function autoHeight(elm){var oldVal=parseInt(document.trcGetCurrentStyle(elm,"height"));if(isNaN(oldVal))return!0;var p=document.createElement("span");with(p.style)display="block",height="10px",width="10px";elm.appendChild(p);var newVal=parseInt(document.trcGetCurrentStyle(elm,"height"));return elm.removeChild(p),newVal!=oldVal}function setHeight(a,b){a.style.height=b+"px";for(var c=0;a.clientHeight>b;)a.style.height=b-++c+"px"}if("object"==typeof trc){if(this.element.offsetTop<=0&&this.element.offsetWidth<=0)return TRC.Timeout.set(this.drawListBody.trcBind(this,trc,delayCount),1e3),void 0;win._tblConsole=win._tblConsole||[],TRC.pConsole(this.mode_name,"debug","start drawing widget",""),delayCount=delayCount||0;var listContainer=this.listContainer;this.boxes=[];var internalc_width=0,TRCobj=this.trc,isWCTextLinks="autowidget-template-text-links"==this.trc.getProperty(this.mode_name,"widget-creator-layout");if(this.trc.calculateAutoSizeParameters(this),this.element.className+=this.autoSize?" trc-auto-size":"",TRC.listen("videoCubeChange",this.fixWCTextLinksVideoBoxes.trcBind(this)),isWCTextLinks&&(this.isClassFilter=TRC.Browser.ieUpto(8),this.isClassFilter?TRC.listen("IE_ClassShift",this.fixWCTextLinksVideoBoxes.trcBind(this)):TRC.dom.on(win,"resize",this.fixWCTextLinksVideoBoxes.trcBind(this).trcThrottle(500)),this.trc.getProperty(this.mode_name,"mode-is-responsive")===!0)){var TEXT_LINKS_RESP_CSS_NAME="trc_tl_responsive",trc_container=doc.trcGetParentByClassName(this.getContainer(),"trc_related_container");TRC.dom.addClass(trc_container,TEXT_LINKS_RESP_CSS_NAME+" "+TEXT_LINKS_RESP_CSS_NAME+"_"+this.id),this.setResponsiveRules(TEXT_LINKS_RESP_CSS_NAME+"_"+this.id,this.recommendationList.length)}var has_duration_label=!1,detail_order=this.trc.getProperty(this.mode_name,"detail-order"),orientation=this.orientation=this.trc.getProperty(this.mode_name,"orientation");detail_order=detail_order.split(",");for(var i=0;i<detail_order.length;i++)"duration"==detail_order[i]&&(has_duration_label=!0);var explore_delay=0;this.exploreTimeoutId=null,"undefined"!=typeof this.trc.global&&(explore_delay=this.trc.global["explore-delay"]?this.trc.global["explore-delay"]:explore_delay);var self=this;this.container.onmouseover=function(a){var b=null;win.event?b=win.event.srcElement:a&&(b=a.target),b!=this.container&&null!=this.exploreTimeoutId||b==this.container&&null!=this.exploreTimeoutId||(this.exploreTimeoutId=TRC.Timeout.set(function(){this.exploreTimeoutId&&(TRC.Timeout.clear(this.exploreTimeoutId),this.exploreTimeoutId=null),this.sendEvent("explore",{},!0)
}.trcBind(this),explore_delay))}.trcBind(this),0!=explore_delay&&(this.container.onmouseout=function(a){a=a||win.event;var b=this.container.getBoundingClientRect();a.clientX>=b.left&&a.clientX<b.right&&a.clientY>=b.top&&a.clientY<b.bottom||this.exploreTimeoutId&&(TRC.Timeout.clear(this.exploreTimeoutId),this.exploreTimeoutId=null)}.trcBind(this));var internalc=document.createElement("div");for(internalc.id="internal_"+this.id;listContainer.firstChild;)listContainer.removeChild(listContainer.firstChild);listContainer.appendChild(internalc),("none"==listContainer.style.display||"none"==listContainer.parentNode.style.display)&&(this.listContainer.style.display="block",this.listContainer.parentNode.style.display="block");var trcmeta={};__trcCopyProps(trc,trcmeta),delete trcmeta["video-list"],internalc.meta=trcmeta,this.firstVideo=null;var listSize=TRCobj.getProperty(this.mode_name,"list-size");listSize=Math.min(listSize,this.recommendationList.length),"horizontal"==orientation?(listContainer.style.overflowY="hidden",listContainer.style.overflowX="auto",internalc.style.width="5000px"):(listContainer.style.overflowX="hidden",listContainer.style.overflowY="auto");for(var i=0;listSize>i;i++){var cur=this.recommendationList[i];cur.itemIndex=i,null==this.firstVideo&&"video"==cur.type&&(this.firstVideo=cur);try{this.trc.getFunction(this.mode_name,"item-data-filter",cur);var box=this.drawVideoBox(cur,has_duration_label);if(i>=this.recommendationList.length/2&&isWCTextLinks&&(box.className+=" trc_tl_right_col"),"vertical"==orientation){var clear_div=document.createElement("div");clear_div.style.clear="both",box.appendChild(clear_div)}if(internalc.appendChild(box),"scrolling"!=TRCobj.getProperty(this.mode_name,"navigation-type")){var thumbnail_position=this.trc.getProperty(this.mode_name,"thumbnail-position");if(this.rows>1&&this.autoSize&&("top"==thumbnail_position||"bottom"==thumbnail_position)&&(this.itemMaxHeight=this.itemMaxHeight?this.itemMaxHeight<box.clientHeight?box.clientHeight:this.itemMaxHeight:box.clientHeight),box.offsetHeight>listContainer.offsetHeight){var diff=box.offsetHeight-listContainer.offsetHeight;box.style.height=parseInt(document.trcGetCurrentStyle(box,"height"))-diff+"px"}internalc.removeChild(box)}else{box.fixTextOverflow(),"undefined"==typeof box.image_div?box.thumb.appendChild(box.img):(box.thumb.appendChild(box.image_div),box.image_div.appendChild(box.img)),this.trc.global["use-delay-image-load"]?TRC.Timeout.set(this.setImageLoad.trcBind(this,box.img,box,box.img_src,100,box.thumb,this.trc.global["thumb-lazy-load-switch"]),10):this.setImageLoad(box.img,box,box.img_src,100,box.thumb,this.trc.global["thumb-lazy-load-switch"]);var mrg_right=parseInt(document.trcGetCurrentStyle(box,"margin-right"));internalc_width=box.clientWidth+box.offsetLeft+(isNaN(mrg_right)?0:mrg_right),"horizontal"==orientation&&autoHeight(box)&&setHeight(box,listContainer.offsetHeight)}this.boxes.push(box)}catch(e){__trcError("Error in drawVideoBox",e)}}if("scrolling"!=TRCobj.getProperty(this.mode_name,"navigation-type")){internalc.style.width="auto";var pagerDiv=self.drawPager(),auto=TRCobj.getProperty(self.mode_name,"auto-scroll");"undefined"!=typeof auto&&"undefined"!=typeof pagerDiv&&"none"!=auto&&(self.auto_scroll=function(){var a=0;for(i=0;i<pagerDiv.pages.length;i++)if(pagerDiv.pages[i]==pagerDiv.current&&i!=pagerDiv.pages.length-1){a=++i;break}pagerDiv.pages[a].page_switch()},null!=self.auto_scroll_interval&&TRC.Interval.clear(self.auto_scroll_interval),self.auto_scroll_interval=TRC.Interval.set(self.auto_scroll,parseInt(auto)))}else internalc.style.width=internalc_width+"px",TRC.Browser.ieUpto(6)&&1.1*listContainer.parentNode.parentNode.clientWidth<listContainer.clientWidth&&(listContainer.style.width="99%"),function(a){if(!(listContainer["client"+a]+1>=listContainer["scroll"+a])){if(TRC.Browser.ie&&TRC.Browser.ie<8)return listContainer.style[a.toLowerCase()]=internalc["client"+a]+18+"px","Width"==a&&(this.element.style.width=listContainer.style[a.toLowerCase()]),void 0;var b=Math.floor(Math.max(1,listContainer["scroll"+a]-listContainer["client"+a]));b-=Math.max(0,listContainer["scroll"+a]-listContainer.parentNode["scroll"+a]);var c=parseInt(listContainer.style[a.toLowerCase()]),d=Math.max(listContainer["scroll"+a],isNaN(c)?0:c)+b+"px";listContainer.style[a.toLowerCase()]=d,"Width"==a&&(this.element.style.width=d),this.postRenderQueue.pushFront("adapt to scrollbar",arguments.callee.trcBind(this,a))}}.call(this,"horizontal"==TRCobj.getProperty(this.mode_name,"orientation")?"Height":"Width"),TRCobj.getProperty(this.mode_name,"shade-scroll")&&this.postRenderQueue.pushBack("drawShade",function(a){this.drawShade(a)}.trcBind(this,orientation)),listContainer.onscroll=function(){this.sendEvent("explore",{},!0),this.check_visibility()}.trcBind(this),this.check_visibility();this.boxes[0].className+=" trc-first-recommendation trc-spotlight-first-recommendation",this.hasSyndicatedContent&&this.postRenderQueue.pushBack("syndication hint icon",this.addSyndicationHintIcon.trcBind(this,internalc)),"embed"===this.link_target&&this.postRenderQueue.pushBack("createEmbedThumb",this.createEmbedThumb.trcBind(this)),this.postRenderQueue.pushBack("list-suffix,publisher-end",function(a){this.trc.getFunction(this.mode_name,"list-suffix",a,this),this.trc["publisher-end"](this.id)}.trcBind(this,internalc)),this.postRenderQueue.pushBack("checkForBlocking",this.checkForBlocking.trcBind(this)),this.postRender(),this.trc.global["thumb-lazy-load-switch"]&&this.setLazyImageLoadMethod(),TRC.eventDelegator.dispatch("onrender",{name:this.mode_name,container:this.container});var visible_delay=0;this.visibleTimeoutId=null,"undefined"!=typeof this.trc.global&&(visible_delay=this.trc.global["visible-delay"]?this.trc.global["visible-delay"]:visible_delay),function(){var a,b,c,d,e,f,g,h;if(this.visible_boxes={},this.synd_visible_boxes={},this.network_visible_boxes={},this.visible_items_collection()>=2||this.isVisible()){var i=arguments.callee;this.visibleTimeoutId=TRC.Timeout.set(function(){if(this.visibleTimeoutId&&(TRC.Timeout.clear(this.visibleTimeoutId),this.visibleTimeoutId=null),this.visible_items_collection()>=2||this.isVisible()){a=[],b=[],c=[],d=[],e=[],f=[],g=[],h=[];for(var j in this.visible_boxes)a.push(this.visible_boxes[j].id),c.push(this.visible_boxes[j].type);for(var j in this.synd_visible_boxes)b.push(this.synd_visible_boxes[j].id),d.push(this.synd_visible_boxes[j].type),g.push(this.synd_visible_boxes[j].publisher);for(var j in this.network_visible_boxes)e.push(this.network_visible_boxes[j].id),f.push(this.network_visible_boxes[j].type),h.push(this.network_visible_boxes[j].publisher);if(a.length>0||b.length>0||e.length>0)return TRC.pConsole(this.mode_name,"info","sending visible event",""),this.sendEvent("visible",{il:a.join(","),sil:b.join(","),ilt:c.join(","),silt:d.join(","),ntil:e.join(","),ntilt:f.join(","),niltp:h.join(","),siltp:g.join(",")},!0),this.trc.getFunction(this.mode_name,"after-visible",internalc,this),void 0}else TRC.Timeout.set(i.trcBind(this),1e3)}.trcBind(this),visible_delay)}else TRC.Timeout.set(arguments.callee.trcBind(this),1e3)}.trcBind(this)();var active=this.trc.getProperty(this.mode_name,"auto-advance");-1!=active&&"undefined"!=typeof active&&(null==this.autoPlayer?this.autoPlayer=this.startAutoPlayManager(this.firstVideo,active):this.autoPlayer.getPlaylistItem("n"))}},TRCRBox.prototype.postRender=function(a){if(a){var b=this.postRenderQueue.popFront();if(null==b)return __trcDebug("TRCRBox.postRender: finished"),void 0;try{b.func.call(this),TRC.pConsole(this.mode_name,"debug","executing postRender functions - see info",b.func.toString())}catch(c){__trcError("Error in TRCRBox.postRender while executing "+b.name,c)}}TRC.Timeout.set(this.postRender.trcBind(this,!0),0)},TRCRBox.prototype.addSyndicationHintIcon=function(a){var b,c=this.trc.getProperty(this.mode_name,"syndicated-attribution"),d=this.trc.getProperty(this.mode_name,"syndicated-attribution-tooltip"),e=this.trc.getProperty(this.mode_name,"syndicated-attribution-position"),f=document.createElement("a"),g=/\btrc_rbox\b/,h=["template=colorbox","taboola_utm_source="+this.publisher,"taboola_utm_medium=bytaboola","taboola_utm_content="+this.mode_name+":"+this.placement+":"+(this.trc["test-variant"]||"")],i="//www.taboola.com/popup?"+h.join("&");for(f.href=i,f.rel="nofollow",f.appendChild(document.createTextNode(c)),f.title=d,f.style.display="block",f.className="whatsThisSyndicated a-"+e,f.target="_blank",this.syndicatedAttributionElement=f;!g.test(a.className);)a=a.parentNode;b=f.cloneNode(!0),b.className+=" trc_mobile_attribution_link",f.className+=" trc_desktop_attribution_link",a.appendChild(f),a.appendChild(b),"absolute"!==a.style.position&&(a.style.position="relative"),TRC.dom.on(f,"click",function(a){return TRC.aboutUs.open(a||event)||!1})},TRCRBox.prototype.handleSyndicationIconClick=function(a,b){return a=a||event,a.returnValue=!1,a.cancelBubble=!0,a.stopPropagation&&a.stopPropagation(),a.preventDefault&&a.preventDefault(),win.open(b,"aboutSyndication","location=0, width=330, height=410, resizable=0, status=0, menubar=0, toolbar=0, titlebar=0, scrollbars=0"),!1},TRCRBox.prototype.drawShade=function(a){if(!(TRC.Browser.ie&&TRC.Browser.ie<=6)){var b=this.listContainer["client"+("vertical"==a?"Width":"Height")]+"px",c=this.listContainer["client"+("vertical"==a?"Height":"Width")]+this.listContainer["client"+("vertical"==a?"Top":"Left")]-10+"px",d=document.createElement("div");d.className=a+"-start-shade",d.style["vertical"==a?"width":"height"]=b,d.style["margin"+("vertical"==a?"Top":"Left")]=this.listContainer["client"+("vertical"==a?"Top":"Left")]+"px";var e=document.createElement("div");e.className=a+"-end-shade",e.style["vertical"==a?"width":"height"]=b,this.listContainer.parentNode.insertBefore(d,this.listContainer),this.listContainer.parentNode.insertBefore(e,this.listContainer),e.style["margin"+("vertical"==a?"Top":"Left")]=c,e.style.backgroundRepeat=d.style.backgroundRepeat="repeat-"+("vertical"==a?"x":"y")}},TRCRBox.prototype.drawPager=function(){function a(){var a=new Array,b=0,c=0;for(g=0;g<this.boxes.length;g++){var d=this.boxes[g];pageContainer.appendChild(d),d.fixTextOverflow(!0),"vertical"==orientation?pageContainer.offsetHeight-5>=listContainer.clientHeight&&(pageContainer.removeChild(d),a[b++]={start_index:c,end_index:c>g-1?c:g-1},c=g-1>=c?g--:g,this.clearChilds(pageContainer)):1.1*listContainer.clientHeight<listContainer.scrollHeight&&(pageContainer.removeChild(d),a[b++]={start_index:c,end_index:c>=g-1?c:g-1},c=g-1>=c?g--:g,this.clearChilds(pageContainer))}return a[b]={start_index:c,end_index:g-1},this.clearChilds(pageContainer),a}var b=this.trc;pager_style=b.getProperty(this.mode_name,"pager-type-style"),cyclical=b.getProperty(this.mode_name,"cyclical-paging"),pager_position=b.getProperty(this.mode_name,"pager-position"),pager_btn_location=b.getProperty(this.mode_name,"pager-button-location"),pager_btn_style=b.getProperty(this.mode_name,"pager-button-style"),mode_name=this.mode_name,listContainer=this.listContainer,orientation=b.getProperty(mode_name,"orientation"),pageContainer=listContainer.firstChild,this.rows=b.getProperty(mode_name,"rows"),this.clearChilds(pageContainer),listContainer.style.overflowX="hidden",listContainer.style.overflowY="hidden";var c=a.call(this),d=document.createElement("div");if(d.style.clear="both",!this.autoSize){for(;this.rows>1&&!(c.length>=this.rows);)this.rows--;if(this.rows>1)for(var e=[],f=0;f<c.length;f++)this.boxes[c[f].start_index].className+=" trc-first-in-row",0==(f+1)%this.rows&&e.push({start_index:c[f+1-this.rows].start_index,end_index:c[f].end_index});e&&(listContainer.style.height="auto",c=e)}for(var g=c[0].start_index;g<=c[0].end_index;g++)if(!(g>=this.boxes.length)){var h=this.boxes[g];pageContainer.appendChild(h);try{null!=h.img_src&&("undefined"==typeof h.image_div?h.thumb.appendChild(h.img):(h.thumb.appendChild(h.image_div),h.image_div.appendChild(h.img)),this.setImageLoad(h.img,h,h.img_src,100,h.thumb,this.trc.global["thumb-lazy-load-switch"]),h.img_src=null)}catch(i){__trcError("Pager thumbnail images fixing errors",i)}h.fixTextOverflow()}pageContainer.appendChild(d);var j=this.pager;if(null!=j)try{j.parentNode.removeChild(j)}catch(i){}var k=c.length;if(1>=k||"none"==b.getProperty(this.mode_name,"navigation-type"))return this.check_visibility(),void 0;var l=document.createElement("div");l.style.position="absolute",l.style.width=listContainer.clientWidth/2+"px";var m=document.createElement("div");l.appendChild(m),listContainer.parentNode.appendChild(l),m.id="trc_pager_"+this.id,m.className="trc_pager",m.current=null,m.pages=new Array,m.curPage=0;var n=listContainer.clientWidth,o=document.createElement("div");o.id="pager_prev_"+this.id,o.className="trc_pager_prev","sides"==pager_btn_location?(o.style.width="auto",o.style.paddingTop=(listContainer.clientHeight-o.clientHeight)/2+"px",o.style.position="absolute",o.style["ltr"==b.direction?"left":"right"]="0px",listContainer.parentNode.insertBefore(o,listContainer)):m.appendChild(o),o.onclick=function(){m.curPage>0?m.pages[m.curPage-1].onclick():cyclical&&m.pages[m.pages.length-1].onclick()};var p=document.createElement("div");p.id="pager_next_"+this.id,p.className="trc_pager_next",p.onclick=function(){m.curPage+1<m.pages.length?m.pages[m.curPage+1].onclick():cyclical&&m.pages[0].onclick()};var q=TRC.URL.prototype.switchProtocol.call(b.getProperty(this.mode_name,"pager-button-inactive-image"),protocol),r=TRC.URL.prototype.switchProtocol.call(b.getProperty(this.mode_name,"pager-button-active-image"),protocol),s=TRC.URL.prototype.switchProtocol.call(b.getProperty(this.mode_name,"pager-button-hover-image"),protocol);if("none"!=pager_btn_location)if("image"==pager_btn_style)""!=q?(o.image=document.createElement("img"),"sides"==pager_btn_location&&(o.image.onload=function(){listContainer.style.paddingLeft=listContainer.style.paddingRight=this.clientWidth+"px"}),o.image.src=q,o.appendChild(o.image),p.image=document.createElement("img"),"sides"==pager_btn_location&&(p.image.onload=function(){listContainer.style.paddingLeft=listContainer.style.paddingRight=this.clientWidth+"px",this.style["ltr"==b.direction?"left":"right"]=n-this.clientWidth+"px"}),p.image.src=q,p.appendChild(p.image),o.onmouseover=function(){this.before_image=this.image.src,s!=this.image.src&&(this.image.src=s)},o.onmouseout=function(){"undefined"!=typeof this.before_image&&this.before_image!=this.image.src&&(this.image.src=this.before_image)},p.onmouseover=function(){this.before_image=this.image.src,s!=this.image.src&&(this.image.src=s)},p.onmouseout=function(){"undefined"!=typeof this.before_image&&this.before_image!=this.image.src&&(this.image.src=this.before_image)}):(o.innerHTML="&lt;",p.innerHTML="&gt;");else{var t=pager_btn_style.split("|");btn_prev=t[0],btn_next=t[1],o.innerHTML=btn_prev,p.innerHTML=btn_next}else o.style.display="none",p.style.display="none";var u=document.createElement("div");u.className="trc_pager_pages",m.appendChild(u);for(var v=b.getProperty(this.mode_name,"pager-style-active-image"),w=b.getProperty(this.mode_name,"pager-style-inactive-image"),x=b.getProperty(this.mode_name,"pager-style-hover-image"),g=0;k>g;g++){var y=document.createElement("div");switch(pager_style){case"none":y.innerHTML="",u.style.cssText="display:none !important;";break;case"numbers":y.innerHTML=""+(g+1);break;case"counter":var z=document.createElement("span");z.className="trc_pager_counter",z.innerHTML=Gettext.strargs(b.gt.gettext("%1 of %2"),[g+1,m.pages.length]),y.appendChild(z),u.className.search("trc_pager_counter")<0&&(u.className+=" trc_pager_counter");break;case"bullets":y.innerHTML='<span style="font-weight: bold;">&bull;</span>';break;case"image":""!=v?(y.inner_img=document.createElement("img"),y.inner_img.src=w,y.appendChild(y.inner_img)):y.innerHTML=""+(g+1)}y.className="trc_pager_unselected",u.appendChild(y),y.index=g;var A=this;y.page_switch=function(){try{pageContainer.removeChild(d)}catch(a){}if(null!=m.current){for("image"==pager_style&&""!=w&&(y.inner_img.src=w),m.current.className="trc_pager_unselected",g=c[m.curPage].start_index;g<=c[m.curPage].end_index;g++)g<A.boxes.length&&pageContainer.removeChild(A.boxes[g]);for(g=c[this.index].start_index;g<=c[this.index].end_index;g++)if(!(g>=A.boxes.length)){var e=A.boxes[g];if(g===c[this.index].start_index&&(e.className+=" trc-spotlight-first-recommendation"),pageContainer.appendChild(e),"undefined"!=typeof e.img&&null!=e.img_src&&(e.video_data.ad_load_count=(new Date).getTime(),"undefined"==typeof e.image_div?e.thumb.appendChild(e.img):(e.thumb.appendChild(e.image_div),e.image_div.appendChild(e.img)),e.img.src=e.img_src,e.img_src=null),null!=e.spnoverlay){var f=e.spnoverlay,h=f.firstChild,i=f.lastChild,j=i[(i.clientHeight>0?"client":"scroll")+"Height"];h.style.width=i[(i.clientWidth>0?"client":"scroll")+"Width"]+"px",f.style.height=h.style.height=Math.max(j,parseInt(h.style.height))+"px",e.spnoverlay=null}e.fixTextOverflow(),A.postRender()}}if(pageContainer.appendChild(d),m.current=this,"image"==pager_style&&""!=v&&(y.inner_img.src=v),this.className="trc_pager_selected",m.curPage=this.index,"undefined"!=typeof p&&(this.index+1>=m.pages.length&&!cyclical?(""!=q&&"none"!=pager_btn_location&&(p.image.src=q),p.className="trc_pager_next pager_disabled"):(""!=r&&"none"!=pager_btn_location&&(p.image.src=r),p.className="trc_pager_next pager_enabled")),"undefined"!=typeof o&&(this.index<=0&&!cyclical?(""!=q&&"none"!=pager_btn_location&&(o.image.src=q),o.className="trc_pager_prev pager_disabled"):(""!=r&&"none"!=pager_btn_location&&(o.image.src=r),o.className="trc_pager_prev pager_enabled")),"counter"==pager_style){var k=document.createElement("div");for(k.appendChild(document.createTextNode(Gettext.strargs(b.gt.gettext("%1 of %2"),[this.index+1,m.pages.length])));u.firstChild;)u.removeChild(u.firstChild);u.appendChild(k)}A.check_visibility(),TRC.dispatch("trc_afterRboxDraw")},y.onclick=function(){this.page_switch(),0!=this.index&&A.sendEvent("explore",{},!0)},y.onmouseover=function(){"image"==pager_style&&""!=x&&(this.prev_img=this.inner_img.src,this.inner_img.src=x)},y.onmouseout=function(){"image"==pager_style&&"undefined"!=typeof this.prev_img&&(this.inner_img.src=this.prev_img)},m.pages.push(y)}if("sides"==pager_btn_location?(p.style.width="auto",p.style.paddingTop=(listContainer.clientHeight-p.clientHeight)/2+"px",p.style.position="absolute",listContainer.parentNode.insertBefore(p,listContainer),listContainer.style.paddingLeft=listContainer.style.paddingRight=p.clientWidth+"px",p.style["ltr"==this.trc.direction?"left":"right"]=n+p.clientWidth+"px"):m.appendChild(p),m.pages[0].onclick(),this.pager=m,"center"==pager_position){m.style.position="absolute",m.style.cssFloat="none",m.style.styleFloat="none",m.style.display="block";var B=m.clientWidth;m.style.width=B+2+"px",m.style.position="relative";var C=(listContainer.clientWidth-B)/2;m.parentNode.style.width=B+2+C+"px",m.style.marginLeft=C+"px"}else if("header"==pager_position&&this.header.ext){m.parentNode.removeChild(m),m.className+=" in_trc_header";var D=document.createElement("div");D.appendChild(m),D.id=m.id,m.id="";var E=document.createElement("div");E.style.clear="left",D.appendChild(E),this.header.titleBox.innerHTML||(this.header.titleBox.innerHTML="&nbsp;"),this.header.ext.appendChild(D)}return m},TRCRBox.prototype.check_visibility=function(){for(var a=0;a<this.boxes.length;a++){var b=this.boxes[a];this.itemMaxHeight&&(b.style.height=this.itemMaxHeight+"px")}},TRCRBox.prototype.startAutoPlayManager=function(a,b){if("object"!=typeof this.autoplaybox)return null;var c=this.autoplaybox,d=document.createElement("div");c.playerbox=d,c.appendChild(d);var e=new TRC.AutoPlaylistController(this,this.publisher,null,c,a,this.listContainer.id,b);return e.render(d),e},TRCRBox.prototype.playInsideHostingContainer=function(a,b,c){var d,f,g,h,i=this.trc.getProperty(this.mode_name,"render-player-info"),j=this.trc.getProperty(this.mode_name,"player-detail-order");c.videoBlock?("A"===c.videoBlock.tagName.toUpperCase()&&(d=this.trc.getProperty(this.mode_name,"player-thumbnail-height")||300,c.videoBlock.parentNode.replaceChild(h=document.createElement("DIV"),c.videoBlock),c.videoBlock=h,c.videoBlock.style.height=i?d+"px":"",c.videoBlock.style.overflow="hidden",i&&(c.videoBlock.style.width=(this.trc.getProperty(this.mode_name,"player-thumbnail-width")||400)+"px",c.videoBlock.style.height=(this.trc.getProperty(this.mode_name,"player-thumbnail-height")||300)+"px")),__trcPurgeEventHandlers(c.videoBlock),c.videoBlock.innerHTML="",g=c.getElementsByTagName("A")[0],b.apply(null,[c.videoBlock,a]),i&&(f=this.drawVideoBox(a,c.hasDuration,j,"top"),__trcPurgeEventHandlers(g),g.parentNode.replaceChild(f.getElementsByTagName("A")[1],g)),this.sendEvent("click",{ii:a["item-id"],it:a.type})):__trcError("Error opening autoPlayContainer",e)},TRCRBox.prototype.openPlayer=function(a,b,c){var d=this.publisher,e="",f=this.trc.global[e+"auto-advance"];"undefined"==typeof f&&(f=-1);var g=this.trc.global["syndicator-affiliate-id"];"undefined"==typeof g&&(g=null),"function"==typeof window.trc_lightboxOpen&&window.trc_lightboxOpen();try{var h=new TRC.LightBoxManager(this.trc.getProperty(this.mode_name,"lightbox-display-title"),c,this.listContainer.id,this.trc.direction);h.createHeader(a.title),h.addElements({bottom:new TRC.AutoPlaylistController(this,d,!0,h,a,"rbox-lightbox",f)}),h.open(),this.sendEvent("click",{ii:a["item-id"],it:a.type})}catch(i){__trcError("Error opening autoPlayContainer",i)}},TRCRBox.prototype.findElement=function(a,b,c,d){"undefined"==typeof b&&(b=document),"undefined"==typeof c&&(c="*");for(var e=b.getElementsByTagName(c),f=0;f<e.length;f++)if(a(e[f]))return e[f];return d},TRCRBox.prototype.findElements=function(a,b,c,d){for(var e=new Array,f=0;a&&f<a.length;f++){var g=a[f],h=this.findElement(function(a){return a.className.search(g)>=0},b,"span");h&&(c&&(h=h.cloneNode(!0)),h.id=d?g+d:h.id,e.push(h))}return e},TRCRBox.prototype.findFlash=function(a){var b=this.findElement(a,document,"embed");return b?b:this.findElement(a,document,"object")},TRCRBox.prototype.pauseVideo=function(a){var b=this.findFlash(function(a){return"function"==typeof a.pauseVideo});try{b&&b.pauseVideo(a)}catch(c){__trcError("Error in pauseVideo",c)}"function"==typeof window.trc_pauseVideo&&window.trc_pauseVideo(a)},TRCRBox.prototype.playVideoAd=function(a,b,c,d){var e=this.findFlash(function(a){return"function"==typeof a.playVideoAd});try{e&&e.playVideoAd(a.title,a["display-url"],a["landing-url"],a.url,b,c,a["item-id"],d)}catch(f){__trcError("Error in playVideoAd",f)}},TRCRBox.prototype.createVideoLink=function(a,b){var c=document.createElement("a"),d=this.trc.global["publisher-onclick-nt-enabled"]&&a["is-in-network"];return d&&(a.hasNtClckHnadler=!0),c.title=TRC.util.getHtmlDecodeText(b),a.link_target=this.link_target,a.isSyndicated&&!d?(c.href=a.url,c.rel="nofollow",c.logger_url=a.logger_url.replace("&url=","&redir=")+(a["is-in-network"]?"&prt=nt":""),c.target="_blank",this.trc.global["touchstart-enabled"]===!0&&TRC.dom.on(c,"touchstart",function(a){c.href=c.logger_url,c.isTouchPropagation=1,a.stopPropagation()}),c.onmousedown=function(a){return c.isTouchPropagation?!0:(a=a||event,c.href=c.logger_url,(a.target||a.srcElement).target="_blank",void 0)},c.onclick=function(){return c.isTouchPropagation?!0:(this.pauseVideo("link"),TRC.Browser.ieUpto(7)?(this.clickLink(c.href,c.target),!1):!0)}.trcBind(this)):(c.href=a.url,"blank"!=this.link_target?c.target="_parent":(c.target="_blank",c.onmousedown=function(a){a=a||event,(a.target||a.srcElement).target="_blank"}),d&&(a.scParams.prt="nt"),c.onmousedown=function(){c.href=a.logger_url},c.onclick=this.videoLinkClickHandler.trcBind(this,a,c)),c},TRCRBox.prototype.videoLinkClickHandler=function(){var a=2e3,b=function(a,b,c){var d=a.trc.global["syndication-embed-code"];return"function"!=typeof d||win.trc_testmode?win.open(b.logger_url):a.openPlayer(b,d,c),!1},c=function(a,b){var c=a.trc.getProperty(a.mode_name,"player-embed-code"),d=a["player-container-id"],e=a.billboard||document.getElementById(d);return"function"==typeof c&&e&&!win.trc_testmode?a.playInsideHostingContainer(b,c,e,a.mode_name):win.open(b.logger_url),!1},d=function(a,b,c){return"video"==b.type&&a.pauseVideo("link"),c.target="_blank",TRC.Browser.ieUpto(7)?(a.clickLink(c.href,c.target),!1):(c.href=b.url,a.sendEvent("click",{ii:b["item-id"],it:b.type},!1),!0)},e=function(a,b){switch(a){case"brightcove":return TRC.brightcove_playVideo(b);case"ooyala":return TRC.ooyala_playVideo(b);case"kaltura":return TRC.kaltura_playVideo(b)}},f=function(a){var b=a.link_target;if("local"===b){if("function"==typeof window.trc_videoSelected)return window.trc_videoSelected.call(window,a.id,a.url),void 0;b=this.trc.video_source}e(b,a.id)||this.clickLink(a.url)};return function(e,g,h){h=h||event;var i=e.link_target,j=!1;if("lightbox"===i&&this.trc.global)return b(this,e,h);switch(i){case"embed":j=c(this,e,g);break;case"blank":(h.target||h.srcElement).target="_blank",j=d(this,e,g);break;default:this.sendEvent("click",e.hasNtClckHnadler?e.scParams:{ii:e["item-id"],it:e.type},!1,this.publisherClickHandler.trcBind(this,e,f.trcBind(this,e)),a)}return e.url!=e.original_url&&__trcDebug("url:"+e.original_url+", changed to:"+e.url+", on page:"+win.location.href),j||(h.cancelBubble=!0,h.stopPropagation&&h.stopPropagation()),j}}(),TRCRBox.prototype.clickLink=function(a,b){TRC.Browser.firefoxUpto(8)&&(win.location.href=a);var c=document.createElement("a");if(c.href=a,c.target=b?b:"_parent",c.style.visibility="hidden",document.body.appendChild(c),c.click)return c.click(),void 0;var d=document.createEvent("MouseEvent");d.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),c.dispatchEvent(d)},TRCRBox.prototype.publisherClickHandler=function(a,b){var c=__trcCopyProps(a,{});delete c["item-id"],delete c.link;try{if("function"==typeof this.onclick&&!this.onclick.call(this.pubOpts,c))return!1;if("function"==typeof this.trc.onclick&&!this.trc.onclick.call(this.pubOpts,c))return!1}catch(d){__trcError("Publisher 'onclick' handler had an error",d)}return b(this)},TRCRBox.prototype.add_span=function(a,b,c){var d=document.createElement("span");return null!=a&&(d.className=a),null!=b&&("object"==typeof b?d.appendChild(b):d.innerHTML=b),"undefined"!=typeof c&&c.appendChild(d),d},TRCRBox.prototype.genSponsoredLabel=function(a,b,c){var d=this.listContainer,e=this.trc.getProperty(this.mode_name,"sponsored-location");if(!e.match(/^thumbnail/))return c.spnoverlay=null,void 0;var f=this.trc.getProperty(this.mode_name,"thumbnail-height"),g=this.trc.getProperty(this.mode_name,"thumbnail-width");this.trc.getProperty(this.mode_name,"sponsored-link-text"),this.trc.getProperty(this.mode_name,"sponsored-video-text");try{var h=document.createElement("span");h.className="thumbnail"==e?"trc_sponsored_overlay_base":"trc_sponsored_overlay_base round";var i=this.add_span("",null,d);i.className="trc_sponsored_overlay","undefined"!=typeof g&&"thumbnail"==e?(h.style.width=g+"px",i.style.width=g+"px"):(h.style.width="auto",i.style.width="auto"),b.appendChild(h),c.spnoverlay=h;var j=null;if(null!=j){var k=this.getFontSize(j),l=Math.ceil(1.29*k);d.removeChild(j),h.appendChild(i),h.appendChild(j),i.style.height=h.style.height=l+"px",j.style.lineHeight=Math.ceil(1.1*k)+"px",h.style.marginTop="thumbnail"==e?f-l+"px":"thumbnail-top"==e?"4px":f-l-4+"px"}}catch(m){__trcError("Error while generating sponsored label",m)}},TRCRBox.prototype.genBidiLabel=function(a,b,c){function d(a){var b="A-Za-zÀ-ÖØ-öø-ʸ̀-֐ࠀ-῿Ⰰ-﬜︀-﹯﻽-￿",c="֑-߿יִ-﷿ﹰ-ﻼ",d=a.match(new RegExp("^[^"+b+c+"]*(?:(["+b+"]+)|(["+c+"]+))"));if(!d)return null;if(d[2]){var e=document.createElement("bde");return e.dir="rtl",e.innerHTML=a,e}return null}var e=d(b);return null==e&&(e=b),this.add_span("video-label "+c,e,a)},TRCRBox.prototype.buildLabelBox=function(a,b,c){var d,e;for(d=0;d<c.length;d++)switch(e=c[d]){case"title":this.genBidiLabel(a,b.title,"video-title");break;case"uploader":"undefined"!=typeof b.uploader&&this.add_span("video-label video-uploader",this.formatData("uploader",b.uploader),a);break;case"category":"undefined"!=typeof b.category&&this.add_span("video-label video-category",this.formatData("category",decodeURIComponent(b.category.split(";")[0].split("//")[0])),a);break;case"views":this.add_span("video-label video-views",this.formatData("views",b.views),a);break;case"rating":this.add_span("video-label video-rating",this.formatData("rating",b.rating),a);break;case"description":var f=this.genBidiLabel(a,b.description,"video-description");f.title='"Description: '+this.removeHtmlTags(b.description)+'"';break;case"duration":"undefined"!=typeof b.duration&&""!=b.duration&&this.add_span("video-label video-duration-detail",this.formatData("duration",b.duration),a);break;case"branding":b["branding-text"]?this.add_span("branding",this.formatData("syndicator",b["branding-text"]),a):b["branding-url"]&&this.add_span("branding","<img src='"+b["branding-url"]+"'>",a);break;case"url":break;default:"undefined"!=typeof b[e]&&b[e]&&this.add_span("video-label video-"+e,this.formatData(e,b[e]),a)}},TRCRBox.prototype.FixVideoImage=function(a,b,c){var d=TRC.css.utils;if(0==c.height||0==c.width||!c.complete||TRC.Browser.ieUpto(6))return d.setStyleProperty(c,"width",a+"px",this.isCssImportant),d.setStyleProperty(c,"height",b+"px",this.isCssImportant),c.style.visibility="visible",void 0;var e=a/b,f=c.width/c.height;if(e>f){var g=Math.floor(a/f),h=Math.floor((b-g)/2);d.setStyleProperty(c,"width",a+"px",this.isCssImportant),0!=h&&(TRC.Browser.ieAtleast(8)?(c.style.position="relative",d.setStyleProperty(c,"top",h+"px",this.isCssImportant)):d.setStyleProperty(c,"margin-top",h+"px",this.isCssImportant))}else{var i=Math.floor(b*f),j=Math.floor((a-i)/2);d.setStyleProperty(c,"height",b+"px",this.isCssImportant),0!=j&&(TRC.Browser.ieAtleast(8)?(c.style.position="relative","ltr"==this.trc.direction?d.setStyleProperty(c,"left",j+"px",this.isCssImportant):d.setStyleProperty(c,"left",-1*j+"px",this.isCssImportant)):"ltr"==this.trc.direction?d.setStyleProperty(c,"margin-left",j+"px",this.isCssImportant):d.setStyleProperty(c,"margin-right",j+"px",this.isCssImportant))}c.style.visibility="visible"},TRCRBox.prototype.trackAdLoaded=function(a){if(a["tracking-image"]){var b={pi:this.trc.getItemId(),ri:this.response.trc.req,sd:TRC.pageManager.getPublisherValue(TRC.publisherId,"session-data"),ui:TRC.pageManager.getValue("user-id"),it:a.type,ii:a["item-id"],pt:this.getItemType(),li:this.listContainer.id,vi:TRC.pageManager.getPageData(),url:a["tracking-image"],id:Math.floor(100*Math.random())},c=[];for(var d in b)this.trc["normalize-log-param"](d,b[d]),c.push(encodeURIComponent(d)+"="+encodeURIComponent(b[d]));var e=protocol+"//"+this.domain+"/"+encodeURIComponent(this.trc["normalize-log-param"]("publisher",TRC.publisherId))+"/log/3/tracking?"+(this.trc.trcByPass?"trc_skip_failover=yes&":"")+c.join("&"),f=document.createElement("img");f.style.height="1px",f.style.width="1px",f.style.visibility="hidden",f.style.position="absolute",f.src=e,this.element.appendChild(f)}this.sendEvent("display",{ii:a["item-id"],it:a.type},!0)},TRCRBox.prototype.drawThumbnailLink=function(a,b,c,d,e){var f="";b||"video"==c.type&&"undefined"!=typeof c.duration&&""!=c.duration&&"0"!=c.duration&&(f=this.genDuration(c.duration));var g=this.createVideoLink(c,d);TRC.dom.addClass(g,"item-thumbnail-href"),"undefined"!=typeof c["thumbnail-clickable"]&&"false"==c["thumbnail-clickable"]&&(g.title="",g.style.cursor="default",g.onclick=function(){return!1});var h=this.trc.getProperty(this.mode_name,"thumbnail-height"),i=this.trc.getProperty(this.mode_name,"thumbnail-width"),j=document.createElement("span");j.className="thumbBlock","undefined"!=typeof h&&(j.style.height=h+"px"),"undefined"!=typeof i&&(j.style.width=i+"px");var k=document.createElement("img");k.style.visibility="hidden";
var l=this.add_span("thumbnail-overlay",null,j);TRC.Browser.ieUpto(6)&&(l.style.display="none");var m=this.trc.getProperty(this.mode_name,"emblem"),n=null;if(null==m||"null"==m||TRC.Browser.ie&&!TRC.Browser.ieAtleast(7)||(n=this.add_span("thumbnail-emblem",null,j),n.style.backgroundImage="url("+m+")"),"undefined"!=typeof h&&(l.style.height=h+"px",null!=n&&(n.style.height=h+"px")),"undefined"!=typeof i&&(l.style.width=i+"px",null!=n&&(n.style.width=i+"px")),k.onerror=this.imageOnErrorHandler.trcBind(this,k,c),k.onload=function(a){a.complete?this.FixVideoImage(i,h,a):TRC.Timeout.set(arguments.callee.trcBind(this,a),1e3)}.trcBind(this,k),7===TRC.Browser.ie&&(a.image_div=document.createElement("div")),c.isSyndicated){var o=document.createElement("span");if(o.className="branding",c["branding-text"])o.appendChild(document.createTextNode(this.formatData("syndicator",c["branding-text"])));else if(c["branding-url"]){var p=document.createElement("img");p.src=c["branding-url"],o.appendChild(p)}j.style.position="relative",j.appendChild(o);var q=document.createElement("span"),r=this.trc.getProperty(this.mode_name,"syndicated-static-text"),s=this.trc.getProperty(this.mode_name,"syndicated-static-text-position");q.className="static-text "+s,r&&q.appendChild(document.createTextNode(r)),j.appendChild(q)}if(a.thumb=j,a.img=k,a.img_src=this.getThumbnailURL(c,i,h),""!=f){var t=document.createElement("div");t.className="video-duration video-duration-detail",t.style.left=0,"undefined"!=typeof i&&(TRC.Browser.ieUpto(6)?(t.style.marginLeft=i/2-3+"px",t.style.top=h/2-15+"px"):7===TRC.Browser.ie?(t.style.left=i-3+"px",t.style.top=h-15+"px"):(t.style.marginLeft=i-3+"px",t.style.top=h-15+"px")),t.appendChild(f);var u=this.genDuration(c.duration);u.style.opacity=1,u.style.filter="alpha(opacity=100)",u.style.backgroundColor="transparent",t.appendChild(u),j.appendChild(t)}switch(g.appendChild(j),e){case"bottom":j.style.cssFloat="none",j.style.styleFloat="none",j.style.display="block",j.style.width=i+"px";break;case"top":case"under":j.style.cssFloat="none",j.style.styleFloat="none",j.style.display="block",j.style.width=i+"px";break;case"end":j.style.cssFloat="right",j.style.styleFloat="right"}return g},TRCRBox.prototype.imageOnErrorHandler=function(a,b){var c,d=a.src,e="images.taboola.com",f=d.search(/\Shttp\S/),g=d.match(/\Staboola(\S+)?.com\/thumbnails\S/)?!0:!1;f>5&&g?(d=TRC.URL.prototype.switchProtocol.call(d.indexOf(e)>-1?unescape(unescape(d.slice(f+1))):unescape(d.slice(f+1)),protocol),__trcWarn("Failed to load taboola CDN thumbnail "+a.src+" for item="+b["item-id"]+", loading direct thumbnail instead : "+d)):f>5&&d.indexOf(e)>-1?(d=TRC.URL.prototype.switchProtocol.call(unescape(d.slice(f+1)),protocol),__trcWarn("Failed to load thumbnail "+a.src+" for item="+b["item-id"]+", loading "+d+" thumbnail instead")):(c=TRC.URL.prototype.switchProtocol.call(this.trc.getProperty(this.mode_name,"default-thumbnail"),protocol),d="undefined"!=c?c:"",a.onerror=null,__trcWarn("Failed to load thumbnail "+a.src+" for item="+b["item-id"]+", loading default thumbnail instead")),a.src=d},TRCRBox.prototype.drawVideoBox=function(a,b,c,d){var e="";this.trc.getProperty(this.mode_name,"sponsored-link-text"),this.trc.getProperty(this.mode_name,"sponsored-video-text"),a=__trcCopyProps(a,{}),a.isSyndicated=a["is-syndicated"]||a["is-in-network"],a.isPhoto="photo"===a.type,a.isText="text"===a.type,a.tags="string"==typeof a.tags?TRC.text.parseCSV(a.tags):[];var f=document.createElement("div");f.rbox=this;var g=d||this.trc.getProperty(this.mode_name,"thumbnail-position");f.video_data=a,f.setAttribute("data-item-id",a["item-id"]),f.setAttribute("data-item-title",a.title),f.setAttribute("data-item-thumb",this.getThumbnailURL(a,100,80)),f.setAttribute("data-item-syndicated",!!a.isSyndicated),f.className="videoCube trc_spotlight_item "+this.trc.getProperty(this.mode_name,"orientation")+" origin-"+a.origin+" thumbnail_"+g+(a.isSyndicated?" syndicatedItem":"")+(a["is-in-network"]?" inNetworkItem":"")+(a.isPhoto?" photoItem":"")+(a.isText?" textItem":""),this.autoSize&&this.setAutoDimantions(f);var h=a.url;if(0==h.search(/\w{3,4}:\/\/(\w+)\.taboola(syndication)?.com/))for(var i=h.split(/[\?&]/),j=0;j<i.length;j++)if("url"==i[j].split("=")[0]){h=decodeURIComponent(i[j].split("=")[1]);break}if(!a.isSyndicated){if(a.original_url=h,h=this.trc.getFunction(this.mode_name,"change-url",h,f,this.tracking),h==a.original_url&&this.tracking){var k=h.split("#");h=k[0]+(k[0].search("\\?")>=0?"&":"?")+this.tracking+(k[1]?"#"+k[1]:"")}"function"==typeof TRC.pageManager&&(h=TRC.pageManager.fixRecommendationURL(h))}a.url=h;var l={pi:this.trc.getItemId(),ri:this.response.trc.req,sd:TRC.pageManager.getPublisherValue(TRC.publisherId,"session-data"),ui:TRC.pageManager.getValue("user-id"),it:a.type,ii:a["item-id"],pt:this.getItemType(),li:this.listContainer.id,url:h,p:a.isSyndicated?a.publisher:"",vi:TRC.pageManager.getPageData(),r:Math.floor(100*Math.random())};a.scParams=l;var m=[];for(var n in l)l[n]&&(this.trc["normalize-log-param"](n,l[n]),m.push(encodeURIComponent(n)+"="+encodeURIComponent(l[n])));a.logger_url=protocol+"//"+this.domain+"/"+encodeURIComponent(this.trc["normalize-log-param"]("publisher",TRC.publisherId))+"/log/3/click?"+m.join("&"),e+=a.title;var o=this.createVideoLink(a,e);TRC.dom.addClass(o,"item-label-href"),a.link=o;var p=document.createElement("span");if(p.style.display="block",p.className="video-label-box",o.appendChild(p),f.labelsBox=p,f.appendChild(o),"none"!=g){var q=this.drawThumbnailLink(f,b,a,e,g);if("under"==g){var r=this.trc.getProperty(this.mode_name,"thumbnail-height");q.title=o.title="",f.insertBefore(q,o),f.style.position="relative",f.style.height=r+"px";var s=document.createElement("span");s.className="label-box-overlay",o.className+="video-labels-anchor";var e=this.findElement(function(a){return a.className.search("title")>=0},f.labelsBox,"span",null);TRC.Browser.ieUpto(8)&&!TRC.Browser.ieUpto(7)&&(o.className+=" ie8fix"),f.labelsBox.appendChild(s),a.thumbUnder=!0}else"bottom"==g?f.appendChild(q):f.insertBefore(q,o)}var t=c||this.trc.getProperty(this.mode_name,"detail-order"+(a.isSyndicated?"-syndicated":""));t=t.split(","),this.buildLabelBox(p,a,t),f.fixTextOverflow=this.fixBoxTitleAndDesc.trcBind(this,a,p),TRC.Browser.ieUpto(6)&&(f.onmouseover=function(){this.className+=" videoCube_hover"},f.onmouseout=function(){this.className=this.className.replace(/\b\s+videoCube_hover\b/g,"")});try{this.trc.getFunction(this.mode_name,"item-renderer",f,f.video_data)}catch(u){__trcError("Error in itemRenderer",u)}return f},TRCRBox.prototype.setAutoDimantions=function(a){if(this.AutoSizeRule){var b=this.AutoSizeRule.Ws+"px";this.rows>1&&(a.style.marginBottom=b),0==this.boxes.length%this.AutoSizeRule.n&&(b=0),"rtl"==this.trc.direction?a.style.marginRight=b:a.style.marginLeft=b,a.style.width=this.AutoSizeRule.Wi+"px";var c=this.trc.getProperty(this.mode_name,"thumbnail-height"),d=this.trc.getProperty(this.mode_name,"thumbnail-width"),e=c/d;this.trc.modes[this.mode_name]["thumbnail-width"]=this.AutoSizeRule.Wi,this.trc.modes[this.mode_name]["thumbnail-height"]=Math.round(this.AutoSizeRule.Wi*e)}},TRCRBox.prototype.getRuleAspectRatio=function(a,b){if(a.virtualThumbWidth&&a.virtualThumbHeight&&!isNaN(a.virtualThumbWidth)&&!isNaN(a.virtualThumbHeight)){if("ratio"!=b)return 100*(a.virtualThumbHeight/a.virtualThumbWidth);a.virtualThumbHeight/a.virtualThumbWidth}return!1},TRCRBox.prototype.getThumbAspectRatio=function(a,b){try{var c=a["thumbnail-height"]/a["thumbnail-width"];return"ratio"==b?c:Math.round(100*c)}catch(d){return __trcWarn("getThumbAspectRatio",d.message),null}},TRCRBox.prototype.getThumbnailURL=function(a,b,c){if("undefined"==typeof a["thumb-size"])return a.thumbnail;for(var d=[{w:a["thumb-size"].split("x")[0],h:a["thumb-size"].split("x")[1],u:a.thumbnail}],e=1;"undefined"!=typeof a["thumb-size-"+e];e++)d.push({w:a["thumb-size-"+e].split("x")[0],h:a["thumb-size-"+e].split("x")[1],u:a["thumbnail-"+e]});d=d.sort(function(a,b){return a.w*a.h-b.w*b.h});for(var e=0;e<d.length;e++)if(b*c<=d[e].w*d[e].h)return d[e].u;return d.pop().u},TRCRBox.prototype.addTaboolaLogoNoDisclosure=function(){var a,b=this.trc.attribution,c=this.trc.getProperty(this.mode_name,"attribution-text"),d=TRC.URL.prototype.switchProtocol.call(this.trc.getProperty(this.mode_name,"logo-image"),protocol),e=this.trc.getProperty(this.mode_name,"attribution-position"),f=["template=colorbox","taboola_utm_source="+this.publisher,"taboola_utm_medium=bytaboola","taboola_utm_content="+this.mode_name+":"+this.placement+":"+(this.trc["test-variant"]||"")],g="//www.taboola.com/popup?"+f.join("&");if(this.trc.getProperty(this.mode_name,"auto-syndicated-attribution"),0!=b&&"none"!==this.trc.getProperty(this.mode_name,"attribution-position")){var h=document.createElement("div");h.className="logoDiv",h.innerHTML="&nbsp;","rtl"==this.trc.direction?(h.style.cssFloat="left",h.style.styleFloat="left"):(h.style.cssFloat="right",h.style.styleFloat="right");var i=document.createElement("a");i.href=g,i.rel="nofollow",i.target="_blank",h.appendChild(i),"top"==e?"object"==typeof this.header&&this.header.ext.appendChild(h):this.element.appendChild(h);var j=document.createElement("div"),k="clear:both; _height:1px; _overflow:hidden;";if("string"==typeof j.style.cssText?j.style.cssText=k:j.setAttribute("style",k),this.element.appendChild(j),"string"!=typeof d||null!=c&&""!=c&&"null"!=c)i.innerHTML+=c,a=i.cloneNode(!0),i.className+=" trc_desktop_attribution_link",a.className+=" trc_mobile_attribution_link",h.appendChild(a),i.onclick=function(a){return TRC.aboutUs.open(a||event)||!1};else if(TRC.Browser.ieUpto(6)){var l=document.createElement("span");l.style.width="45px",l.style.height="11px",l.backgroundImage="none",l.style.display="block",l.style.filter='progid:DXImageTransform.Microsoft.AlphaImageLoader(src="'+d+'")',i.appendChild(l)}else{var m=document.createElement("img");m.src=d,m.style.border="0",i.appendChild(m)}}},TRCRBox.prototype.addTaboolaLogo=function(){this.renderAttributionLink(),this.renderDisclosureLink(),this.addClearingDiv(),this.addWidgetContentType()},TRCRBox.prototype.renderAttributionLink=function(){var a,b="<span>"+this.trc.getProperty(this.mode_name,"attribution-text")+"</span>",c=this.trc.getProperty(this.mode_name,"attribution-position"),d=this.trc.attribution&&"none"!=c,e=this.trc.getProperty(this.mode_name,"min-width-for-attribution"),f=this.trc.getProperty(this.mode_name,"hide-attribution-when-no-place");d&&(a=this.container.clientWidth||this.container.offsetWidth,"top"===c?a>=e?this.generateLinksBox(this.header.ext,b,this.trc.direction,"attribution",null,"top"):f||this.generateLinksBox(this.getWidgetFooter(),b,this.trc.direction,"attribution",null,"bottom"):this.generateLinksBox(this.getWidgetFooter(),b,this.trc.direction,"attribution",null,"bottom"))},TRCRBox.prototype.generateLinksBox=function(a,b,c,d,e,f){var g,h=document.createElement("div"),i=["trc_desktop_"+d+"_link","trc_mobile_"+d+"_link"],j="//www.taboola.com/"+(this.trc.language||"en")+"/popup?"+["template=colorbox","taboola_utm_source="+this.publisher,"taboola_utm_medium=bytaboola","taboola_utm_content="+this.mode_name+":"+this.placement+":"+(this.trc["test-variant"]||"")].join("&"),k=function(a){return TRC.aboutUs.open(a)||!1};if(a){for(g=0;g<i.length;g++)attributionLink=document.createElement("a"),attributionLink.className=i[g]+" trc_attribution_position_"+(f||"bottom"),attributionLink.rel="nofollow",attributionLink.innerHTML=b,attributionLink.href=j,attributionLink.target="_blank",g||(attributionLink.onclick=k),h.appendChild(attributionLink);"rtl"===c&&(h.style.cssFloat=h.style.styleFloat="left"),h.className="logoDiv link-"+d+" "+(e?" attribution-disclosure-link-"+e:""),a.appendChild(h)}},TRCRBox.prototype.addWidgetContentType=function(){this.element.className+=" trc-content-"+this.getWidgetContentType()+" "},TRCRBox.prototype.getWidgetContentType=function(){for(var a,b,c,d=0;a=this.recommendationList[d];d++)a["is-syndicated"]?c=!0:b=!0;return c&&b?"hybrid":c?"sponsored":"organic"},TRCRBox.prototype.getWidgetFooter=function(){return this.footer||(this.footer=document.createElement("div"),this.footer.className="trc-widget-footer",this.element.appendChild(this.footer)),this.footer},TRCRBox.prototype.renderDisclosureLink=function(){var a,b=this.trc.getProperty(this.mode_name,"min-width-for-disclosure"),c=this.trc.getProperty(this.mode_name,"hide-disclosure-when-no-place"),d="<span>"+this.trc.getProperty(this.mode_name,"disclosure-link-text-sponsored")+"</span>",e="<span>"+this.trc.getProperty(this.mode_name,"disclosure-link-text-hybrid")+"</span>",f=this.trc.getProperty(this.mode_name,"disclosure-position");"none"!=f&&(a=this.container.clientWidth||this.container.offsetWidth,"bottom"!=f&&this.header.ext&&a>=b&&"No Header"!=this.trc.getProperty(this.mode_name,"header")?(this.generateLinksBox(this.header.ext,d,this.trc.direction,"disclosure","sponsored","top"),this.generateLinksBox(this.header.ext,e,this.trc.direction,"disclosure","hybrid","top")):c||(this.generateLinksBox(this.getWidgetFooter(),d,this.trc.direction,"disclosure","sponsored","bottom"),this.generateLinksBox(this.getWidgetFooter(),e,this.trc.direction,"disclosure","hybrid","bottom")))},TRCRBox.prototype.addClearingDiv=function(){this.element.appendChild(document.createElement("div")).className="trc_clearer"},TRCRBox.prototype.genDuration=function(a){var b=this.formatDuration(a),c=document.createElement("dt");c.style.position="absolute",c.style.overflow="hidden",c.style.height="auto",c.style.width="auto",c.style.zIndex=48,c.style.right=0;var d=document.createElement("div");return d.style.zIndex=50,d.style.paddingLeft="4px",d.style.paddingRight="4px",d.innerHTML=b,c.appendChild(d),c},TRCRBox.prototype.fixBoxTitleAndDesc=function(a,b,c){if(!c)return this.postRenderQueue.pushBack("fixBoxTitleAndDesc",this.fixBoxTitleAndDesc.trcBind(this,a,b,!0)),void 0;try{var d=this.trc.getProperty(this.mode_name,"details-inline-with-title"),e=d?d.split(","):[],f=this.findElement(function(a){return a.className.search("title")>=0},b,"span",null);e&&e.length&&f&&"inline"==document.trcGetCurrentStyle(f,"display")&&(f.style.display="inline-block"),this.setupInlineDetails(e,b),this.fixBoxOverflow(f,a.title,!1,"false"!=a["truncate-title"],e,b),a.thumbUnder&&(a.link.style.fontSize=b.font+"px"),e&&e.length&&(f.style.display="inline"),this.fixBoxOverflow(this.findElement(function(a){return a.className.search("description")>=0},b,"span",null),a.description,!0,!0)}catch(g){__trcError("Problem in fixBoxTitleAndDesc",g)}},TRCRBox.prototype.fixBoxOverflow=function(a,b,c,d,e,f){if(null!=a&&!(a.clientHeight<=0||a.clientWidth<=0)){"undefined"==typeof d&&(d=!0);var g=!1,h="-for-measure",i=this.findElements(e,f,!0,h);a.parentNode.font=this.getFontSize(a);var j=a.innerHTML;a.innerHTML="";var k=this.add_span(null,"H",a),l=Math.max(k.offsetHeight,k.clientHeight),m=Math.max(0,a.scrollHeight-a.clientHeight);for(a.removeChild(k),a.innerHTML=j,this.addInlineElementsForMeasure(i,a,TRC.Browser.ie),b=b.replace(/^\s+|\s+$/g,"");a.clientHeight+m+l/2<a.scrollHeight&&b.length;)if(g=!0,d)b=this.truncateOverflowingText(a,b,c),this.addInlineElementsForMeasure(i,a,!0);else{var n=this.decreaseOverflowingTextFontSize(a);if(!n)break}this.hideClonedElementsAfterMeasure(e,f),TRC.Browser.ie&&!g&&(a.style.height="auto")}},TRCRBox.prototype.setupInlineDetails=function(a,b){for(var c=this.findElements(a,b),d=!1,e=0;a&&e<a.length;e++)"branding"==a[e]&&(d=!0);if(a.length&&!d){var f=this.findElement(function(a){return a.className.search("branding")>=0},b,"span",null);f&&(f.style.display="block")}for(var e=0;c&&e<c.length;e++){var g=c[e];g.style.display="inline-block",g.style.verticalAlign=TRC.Browser.ieUpto(7)?"baseline":"middle"}},TRCRBox.prototype.truncateOverflowingText=function(a,b,c){b=c&&b.search(/\s/)>=0?b.replace(/\s+\S+$/,""):b.substr(0,b.length-1);var d=a.getElementsByTagName("bde");return a.getElementsByTagName("span").length>0&&a.removeChild(a.getElementsByTagName("span")[0]),(d.length>0?d[0]:a).innerHTML=b,this.add_span(null,"&hellip;",a),b},TRCRBox.prototype.decreaseOverflowingTextFontSize=function(a){var b=this.getFontSize(a);if(parseInt(b)<=9)return!1;b=parseInt(b)-1;var c="font-size: "+b+"px!important; line-height: "+1.25*b+"px!important;";return"string"==typeof a.style.cssText?a.style.cssText=c:a.setAttribute("style",c),!0},TRCRBox.prototype.addInlineElementsForMeasure=function(a,b,c){for(var d=0;a&&d<a.length;d++){var e=a[d],f=this.findElement(function(a){return a.id==e.id},b);if(!f&&e){var g=document.createElement("span");g.className="trc_inline_detail_spacer",g.innerHTML=TRC.Browser.ieUpto(8)?"&nbsp;":" ",b.appendChild(g),b.appendChild(c?e.cloneNode(!0):e)}}},TRCRBox.prototype.hideClonedElementsAfterMeasure=function(a,b){for(var c=0;a&&c<a.length;c++){var d=a[c],e=this.findElement(function(a){return a.className.search(d)>=0&&a.parentNode===b},b,"span");e&&(e.style.display="none")}},TRCRBox.prototype.removeTagsEntities=function(a){var b=new RegExp("<[^>]*>$");return b.test(a)||(b=new RegExp("&w+;$"),b.test(a))?a.replace(b,""):a},TRCRBox.prototype.removeHtmlTags=function(a){return a.replace(new RegExp("<[^>]+>","g"),"")},TRCRBox.prototype.formatData=function(a,b){var c=this.trc.getProperty(this.mode_name,"format-"+a);return c=c||"%s","function"==typeof c?c.call(this,b):((a.search("duration")>=0||a.search("Duration")>=0)&&(b=this.formatDuration(b)),"undefined"==typeof b&&(b=""),c.replace(new RegExp("%\\w"),'<dt style="display:inline">'+b+"</dt>"))},TRCRBox.prototype.formatDuration=function(a){var b=parseInt(a/3600);b>=1?a%=3600:b=0;var c=parseInt(a/60),d=parseInt(a%60);return"number"!=typeof b||"number"!=typeof c||"number"!=typeof d||isNaN(b)||isNaN(c)||isNaN(d)||1>a?"":(b>=1?b+":":"")+(10>c?"0":"")+c+":"+(10>d?"0":"")+d},TRCRBox.prototype.formatNumber=function(a){return"undefined"==typeof a?"":this.trc.getFunction(this.mode_name,"format-number",a)},TRCRBox.prototype.dateFormatISO=function(a){var b=new Date(1e3*parseInt(a)),c=b.getFullYear(),d=b.getMonth()+1,e=b.getDate();return 10>e&&(e="0"+e),10>d&&(d="0"+d),c+"-"+d+"-"+e},TRCRBox.prototype.dateFormatAmerican=function(a){var b=new Date(1e3*parseInt(a)),c=b.getFullYear(),d=b.getMonth()+1,e=b.getDate();return d+"/"+e+"/"+c},TRCRBox.prototype.dateFormatEuropean=function(a){var b=new Date(1e3*parseInt(a)),c=b.getFullYear(),d=b.getMonth()+1,e=b.getDate();return e+"/"+d+"/"+c},TRCRBox.prototype.dateFormatDays=function(a){var b=new Date,c=" months ago",d=b.getFullYear(),e=b.getMonth(),f=new Date;("undefined"!=typeof a||0!=parseInt(a))&&(f=new Date(1e3*parseInt(a)));var g=f.getFullYear(),h=f.getMonth(),i=12*d+e-(12*g+h);if(0==i){var j=b.getDate(),k=f.getDate();i=j-k,c=1>=i?" day ago":" days ago"}else 1==i&&(c=" month ago");return i+c},TRCRBox.prototype.ratingStars=function(a,b){if(b>5&&(b=Math.floor(b/2)),"undefined"==typeof a)return"";for(var c=document.createElement("span"),d=0;b>d;d++){var e=document.createElement("img");e.style.width="16px",e.style.height="16px",e.style.display="inline";var f=protocol+"//cdn.taboola.com/taboola/star-on.png",g=protocol+"//cdn.taboola.com/taboola/star-off.png";e.src=d<parseInt(a)?f:g,c.appendChild(e)}return c},TRCRBox.prototype.getFontSize=function(a){for(var b=0,c=!1,d=document.trcGetCurrentStyle(a,"font-size"),e=["px","pt","em","ch"];!c&&b<e.length;){if(d.indexOf(e[b])){switch(d=parseInt(d),e[b]){case"px":d=d;break;case"pt":d/=.75;break;case"em":case"ch":d=10*d}c=!0}b++}return d},TRCRBox.prototype.sendExploreEvent=function(){this.exploreTimeoutId&&(TRC.Timeout.clear(this.exploreTimeoutId),this.exploreTimeoutId=null),this.sendEvent("explore",{},!0)},TRCRBox.prototype.onMouseOverExploreTrackerHandler=function(a,b){b=b||win.event;var c=b.target||b.srcElement;c!=this.container&&null!=this.exploreTimeoutId||c==this.container&&null!=this.exploreTimeoutId||(this.exploreTimeoutId=TRC.Timeout.set(this.sendExploreEvent.trcBind(this),a))},TRCRBox.prototype.setExploreTracker=function(){var a=0;this.exploreTimeoutId=null,"undefined"!=typeof this.trc.global&&(a=this.trc.global["explore-delay"]?this.trc.global["explore-delay"]:a),this.container.onmouseover=this.onMouseOverExploreTrackerHandler.trcBind(this,a),0!=a&&(this.container.onmouseout=this.onMouseOutExploreTrackerHandler.trcBind(this))},TRCRBox.prototype.onMouseOutExploreTrackerHandler=function(a){a=a||win.event;var b=this.container.getBoundingClientRect();a.clientX>=b.left&&a.clientX<b.right&&a.clientY>=b.top&&a.clientY<b.bottom||this.exploreTimeoutId&&(TRC.Timeout.clear(this.exploreTimeoutId),this.exploreTimeoutId=null)},TRCRBox.prototype.resetBoxes=function(){this.boxes=[]},TRCRBox.prototype.setResponsiveRules=function(a,b){var c=this.trc.getProperty(this.mode_name,"responsive-rules");c?this.setOnStandardResponsiveRules(a,b,c):this.setOnAutoSizeResponsiveRules(a,b,this.trc.getProperty(this.mode_name,"auto-size-rules"))},TRCRBox.prototype.setOnStandardResponsiveRules=function(a,b,c){var d,e=this.trc.getProperty(this.mode_name,"rows"),f=1;try{d=this.responsiveRules=[];for(var g=0,h=c.length;h>g;g++)d[g]={rows:c[g].rows||e||f,cells:c[g].cells,min:c[g].minWidth,max:c[g].maxWidth,margin:c[g].margin.h,ratio:this.getRuleAspectRatio(c[g])||this.getThumbAspectRatio(this.trc.modes[this.mode_name])||100*this.DEFAULT_THUMB_RATIO},this.isClassFilter&&this.pushResponsiveIERules(a+"_rule"+g,d[g].min);TRC.css.utils.setStyleElements(TRC.css.responsive.rulesToCssText(a,this.responsiveRules,b,this.trc.cssReset,"autowidget-template-text-links"==this.trc.getProperty(this.mode_name,"widget-creator-layout"))),this.isClassFilter&&this.setResponsiveIEClassShift(a)}catch(i){__trcError("Error in setOnStandardResponsiveRules : ",i.message)}},TRCRBox.prototype.setOnAutoSizeResponsiveRules=function(a,b,c){var d,e=TRC.dom.getWindowWidth(),f=this.container.clientWidth>0?this.container.clientWidth:this.container.offsetWidth,g=e/f,h=this.trc.getProperty(this.mode_name,"rows"),i=1;try{d=this.responsiveRules=[];for(var j=0,k=c.length;k>j;j++)d[j]={rows:c[j].rows||h||i,cells:c[j].n,min:g*c[j].minWc,margin:100*(Math.round((c[j].maxWsRange+c[j].minWsRange)/2)/f),ratio:this.getThumbAspectRatio(this.trc.modes[this.mode_name])||c[j].ratio||100*this.DEFAULT_THUMB_RATIO},this.isClassFilter&&this.pushResponsiveIERules(a+"_rule"+j,d[j].min);TRC.css.utils.setStyleElements(TRC.css.responsive.rulesToCssText(a,this.responsiveRules,b,this.trc.cssReset)),this.isClassFilter&&this.setResponsiveIEClassShift(a)}catch(l){__trcError("Error in setOnAutoSizeResponsiveRules : ",l.message)}},TRCRBox.prototype.setResponsiveIEClassShift=function(a){var b=this.getResponsiveIEClassShift(a).trcBind(this);b(),TRC.dom.on(win,"resize",b.trcThrottle(50))},TRCRBox.prototype.getResponsiveIEClassShift=function(a){var b=a,c="IE_ClassShift",d=TRC.dom.getWindowWidth,e=d();return function(){var a,f,g="",h=-1,i=d();for(a in this.responsiveIERules)f=parseInt(a),f>h&&i>=f&&(g=this.responsiveIERules[a],h=f);b!==g&&(this.container.className=this.container.className.replace(b,g),b=g),Math.abs(e-i)>1&&(TRC.dispatch(c),e=i)}},TRCRBox.prototype.pushResponsiveIERules=function(a,b){TRC.util.isType(this.responsiveIERules,"Array")||(this.responsiveIERules={},this.pushResponsiveIERules=function(a,b){this.responsiveIERules[b]=a},this.pushResponsiveIERules(a,b))},TRCRBox.prototype.setMetaAttribute=function(a){a.meta={},__trcCopyProps(this.trc,a.meta),delete a.meta["video-list"]},TRCRBox.prototype.drawResponsiveList=function(){var a=this.listContainer,b=document.createElement("div"),c=this.recommendationList.length,d=0,e=doc.trcGetParentByClassName(this.getContainer(),"trc_related_container"),f="trc_elastic";TRC.pConsole(this.mode_name,"debug","start drawing responsive mode - see info",this.trc.getProperty(this.mode_name,"responsive-rules"),"object"),this.isClassFilter=TRC.Browser.ieUpto(8),this.orientation=this.trc.getProperty(this.mode_name,"orientation"),TRC.dom.addClass(e,f+" "+f+"_"+this.id),this.resetBoxes(),b.id="internal_"+this.id,TRC.dom.clearInnerElements(a),a.appendChild(b),this.setExploreTracker(),this.setMetaAttribute(b),this.firstVideo=null,this.setResponsiveRules(f+"_"+this.id,c),this.pasreRecommendationList(c,this.hasDuration(),b),this.isClassFilter?TRC.listen("IE_ClassShift",this.fixResponsiveVideoBoxes.trcBind(this)):(TRC.dom.on(win,"resize",this.fixResponsiveVideoBoxes.trcBind(this).trcThrottle(500)),TRC.listen("videoCubeChange",this.fixResponsiveVideoBoxes.trcBind(this))),TRC.dom.addClass(this.boxes[0],"trc-first-recommendation trc-spotlight-first-recommendation"),"embed"===this.link_target&&this.postRenderQueue.pushBack("createEmbedThumb",this.createEmbedThumb.trcBind(this)),this.postRenderQueue.pushBack("list-suffix,publisher-end",function(a){this.trc.getFunction(this.mode_name,"list-suffix",a,this),this.trc["publisher-end"](this.id)}.trcBind(this,b)),this.postRenderQueue.pushBack("checkForBlocking",this.checkForBlocking.trcBind(this)),this.postRender(),this.trc.global["thumb-lazy-load-switch"]&&this.setLazyImageLoadMethod(),TRC.eventDelegator.dispatch("onrender",{name:this.mode_name,container:this.container}),this.visibleTimeoutId=null,"undefined"!=typeof this.trc.global&&(d=this.trc.global["visible-delay"]?this.trc.global["visible-delay"]:d),this.sendVisibility(d,b)},TRCRBox.prototype.getRecomDirectURL=function(a){if(0==a.search(/\w{3,4}:\/\/(\w+)\.taboola(syndication)?.com/))for(var b=a.split(/[\?&]/),c=0,d=b.length;d>c;c++)if("url"==b[c].split("=")[0])return decodeURIComponent(b[c].split("=")[1]);return a},TRCRBox.prototype.getURLHashParts=function(a){return a[0]+(a[0].search("\\?")>=0?"&":"?")+this.tracking+(a[1]?"#"+a[1]:"")},TRCRBox.prototype.createVideoBoxDirectURL=function(a){var b,c=a.video_data,d=c.url;try{d=this.getRecomDirectURL(d),c.isSyndicated||(c.original_url=d,d=this.trc.getFunction(this.mode_name,"change-url",d,a,this.tracking),d==c.original_url&&this.tracking&&(b=d.split("#"),d=this.getURLHashParts(b)),"function"==typeof TRC.pageManager&&(d=TRC.pageManager.fixRecommendationURL(d))),c.url=d,a.directURL=d}catch(e){__trcError("Error in createVideoBoxDirectURL",e)}},TRCRBox.prototype.createVideoBoxClickUrl=function(a,b){var c={pi:this.trc.getItemId(),ri:this.response.trc.req,sd:TRC.pageManager.getPublisherValue(TRC.publisherId,"session-data"),ui:TRC.pageManager.getValue("user-id"),it:a.type,ii:a["item-id"],pt:this.getItemType(),li:this.listContainer.id,url:b,vi:TRC.pageManager.getPageData(),p:a.isSyndicated?a.publisher:"",r:Math.floor(100*Math.random())},d=[];for(var e in c)c[e]&&(this.trc["normalize-log-param"](e,c[e]),d.push(encodeURIComponent(e)+"="+encodeURIComponent(c[e])));return protocol+"//"+this.domain+"/"+encodeURIComponent(this.trc["normalize-log-param"]("publisher",TRC.publisherId))+"/log/3/click?"+d.join("&")},TRCRBox.prototype.fixResponsiveBoxTitleAndDesc=function(a){var b=a.labelsBox,c=a.video_data,d=a.link,e=this.findElement(function(a){return a.className.search("title")>=0},b,"span",null),f=this.findElement(function(a){return a.className.search("description")>=0},b,"span",null),g=this.findElement(function(a){return a.className.search("label-box-overlay")>=0},b,"span",null),h=function(){c.thumbUnder&&b.font&&(d.style.fontSize=b.font+"px")};try{e.innerHTML=a.getAttribute("data-item-title"),TRC.Browser.ieUpto(8)?setTimeout(function(){this.fixBoxOverflow(e,a.getAttribute("data-item-title"),!1,"false"!=c["truncate-title"]),g&&(g.style.height="99%",g.style.height="100%"),h()}.trcBind(this),0):(this.fixBoxOverflow(e,a.getAttribute("data-item-title"),!1,"false"!=c["truncate-title"]),h()),f&&(TRC.Browser.ieUpto(8)?setTimeout(function(){this.fixBoxOverflow(f,c.description,!0,!0)}.trcBind(this),0):this.fixBoxOverflow(f,c.description,!0,!0))}catch(i){__trcError("Problem in fixResponsiveBoxTitleAndDesc",i)}},TRCRBox.prototype.createVideoBoxLabels=function(a){var b=document.createElement("span");return this.setVideoBoxLabelsClass(b),a.appendChild(b),b},TRCRBox.prototype.setVideoBoxLabelsClass=function(a){a.className="video-label-box"},TRCRBox.prototype.createThumbBlockHolder=function(a,b,c){var d=doc.createElement("div");d.className="thumbBlock_holder",b.appendChild(d),this.createVideoBoxThumbBlock(a,d,c),this.createVideoBoxAspect(d,a)},TRCRBox.prototype.createVideoBoxAspect=function(a,b){var c=document.createElement("div");c.className="videoCube_aspect",a.appendChild(c),b.thumbnail_aspect=c},TRCRBox.prototype.drawVideoBoxThumbnailLink=function(a,b,c,d){var e,f=this.getThumbnailURL(c,this.trc.getProperty(this.mode_name,"thumbnail-width"),this.trc.getProperty(this.mode_name,"thumbnail-height"));return a.img_src=f,e=this.createVideoLink(c,d),TRC.dom.addClass(e,"item-thumbnail-href"),this.createThumbBlockHolder(a,e,b),e},TRCRBox.prototype.createVideoBoxThumbBlock=function(a,b,c){var d=document.createElement("span"),e="",f=a.video_data;a.img_src,c||"video"!=f.type||"undefined"==typeof f.duration||""==f.duration||"0"==f.duration||(e=this.genDuration(f.duration)),d.className="thumbBlock",a.thumbBlock=d,""!=e&&this.createDurationBlock(d,e,f.duration),b.appendChild(d)},TRCRBox.prototype.setVideoBoxImageHandlers=function(a,b,c){b.thumbBlock,a.onerror=this.responsiveImageOnErrorHandler.trcBind(this,a,b,c),a.onload=this.responsiveImageOnLoadHandler.trcBind(this,a,b,c)},TRCRBox.prototype.responsiveImageOnErrorHandler=function(a,b,c){var d,e=a.src,f="images.taboola.com",g=e.search(/\Shttp\S/),h=e.match(/\Staboola(\S+)?.com\/thumbnails\S/)?!0:!1;return g>5&&h&&!TRC.Browser.ie?(e=TRC.URL.prototype.switchProtocol.call(e.indexOf(f)>-1?unescape(unescape(e.slice(g+1))):unescape(e.slice(g+1)),protocol),__trcWarn("Failed to load taboola CDN thumbnail "+a.src+" for item="+c["item-id"]+", loading direct thumbnail instead : "+e),b.img_src=a.src=e,void 0):(g>5&&e.indexOf(f)>-1?(e=TRC.URL.prototype.switchProtocol.call(unescape(e.slice(g+1)),protocol),__trcWarn("Failed to load thumbnail "+a.src+" for item="+c["item-id"]+", loading "+e+" thumbnail instead")):(d=this.trc.getProperty(this.mode_name,"default-thumbnail"),e=TRC.URL.prototype.switchProtocol.call("undefined"!=d?d:"",protocol),a.onerror=null,__trcWarn("Failed to load thumbnail "+a.src+" for item="+c["item-id"]+", loading default thumbnail instead")),TRC.Browser.ieUpto(8)?(a.src=e,null==a.onerror&&TRC.Timeout.set(this.fixResponsiveVideoImage.trcBind(this,b,a,!0),500)):b.thumbBlock.style.backgroundImage="URL("+e+")",void 0)},TRCRBox.prototype.responsiveImageOnLoadHandler=function(a,b){a&&a.complete?this.appendVideoBoxImage(b):TRC.Browser.ieUpto(8)?(this.appendVideoBoxImage(b),this.fixResponsiveVideoImage(b,a),TRC.listen("IE_ClassShift",this.fixResponsiveVideoImage.trcBind(this,b,a).trcBind(this))):TRC.Timeout.set(arguments.callee.trcBind(this,b.thumbBlock,a),50)},TRCRBox.prototype.fixResponsiveVideoImage=function(a,b,c){if(this.imageOptimizePrefix)return b.style.visibility="visible",b.style.width="100%",b.style.height="100%",void 0;var d,e,f,g,h,i=7==TRC.Browser.ie?a.thumbBlock.getBoundingClientRect():null,j=a.thumbBlock,k=i?i.right-i.left:j.clientWidth,l=i?i.bottom-i.top:j.clientHeight,m=this.isCssImportant?"!important":"",n=TRC.css.utils;if(0==l||0==k||0==b.height)return c||TRC.Timeout.set(this.fixResponsiveVideoImage.trcBind(this,a,b,!0),500),void 0;try{d=k/l,e=this.getImageAspectRatio(b),d>e?(f=Math.floor(k/e),g=Math.floor((l-f)/2),n.setStyleProperty(b,"width",k+"px",m),0!=g&&(TRC.Browser.ieAtleast(8)?(b.style.position="relative",n.setStyleProperty(b,"top",g+"px",m)):n.setStyleProperty(b,"margin-top",g+"px",m))):(culculated_image_width=Math.floor(l*e),h=Math.floor((k-culculated_image_width)/2),n.setStyleProperty(b,"height",l+"px",m),0!=h&&(TRC.Browser.ieAtleast(8)?(b.style.position="relative","ltr"==this.trc.direction?n.setStyleProperty(b,"left",h+"px",m):n.setStyleProperty(b,"left",-1*h+"px",m)):"ltr"==this.trc.direction?n.setStyleProperty(b,"margin-left",h+"px",m):n.setStyleProperty(b,"margin-right",h+"px",m))),b.style.visibility="visible"}catch(o){alert(o.message),__trcError("Error in fixResponsiveVideoImage : ",o.message)
}},TRCRBox.prototype.getImageAspectRatio=function(a){return a.trcRatio||(a.trcRatio=a.width/a.height),a.trcRatio},TRCRBox.prototype.createVideoBoxImageLoader=function(a){var b,c,d,e=TRC.Browser.ieUpto(8)?doc.createElement("img"):new Image,f=a.video_data,g=a.thumbBlock;this.trc.global["thumb-lazy-load-switch"]&&this.updateThumbnailStack(e),e.style.visibility="hidden",7===TRC.Browser.ie&&(a.image_div=document.createElement("div")),TRC.Browser.ieUpto(8)&&(a.img=e),this.setVideoBoxImageHandlers(e,a,f),this.trc.global["use-delay-image-load"]?TRC.Timeout.set(this.setImageLoad.trcBind(this,e,a,a.img_src,100,g,this.trc.global["thumb-lazy-load-switch"]),10):this.setImageLoad(e,a,a.img_src,100,g,this.trc.global["thumb-lazy-load-switch"]),TRC.Browser.ieUpto(6)||(b=this.add_span("thumbnail-overlay",null,g)),c=this.trc.getProperty(this.mode_name,"emblem"),null==c||"null"==c||TRC.Browser.ie&&!TRC.Browser.ieUpto(7)||(d=this.add_span("thumbnail-emblem",null,g),d.style.backgroundImage="url("+c+")"),f.isSyndicated&&this.addVideoBoxBranding(g,f)},TRCRBox.prototype.updateThumbnailStack=function(a){this.thumbnailImageStack=this.thumbnailImageStack||[],this.thumbnailImageStack.push(a)},TRCRBox.prototype.addVideoBoxBranding=function(a,b){var c=document.createElement("span"),d=document.createElement("span"),e=this.trc.getProperty(this.mode_name,"syndicated-static-text"),f=this.trc.getProperty(this.mode_name,"syndicated-static-text-position");c.className="branding",b["branding-text"]?c.appendChild(document.createTextNode(this.formatData("syndicator",b["branding-text"]))):b["branding-url"]&&this.createBrandingImage(c,b["branding-url"]),a.appendChild(c),d.className="static-text "+f,e&&d.appendChild(document.createTextNode(e)),a.appendChild(d)},TRCRBox.prototype.createBrandingImage=function(a,b){var c=doc.createElement("img");c.src=b,a.appendChild(c)},TRCRBox.prototype.createDurationBlock=function(a,b,c){var d=document.createElement("div"),e=this.genDuration(c);d.className="video-duration video-duration-detail",d.appendChild(b),e.style.opacity=1,e.style.filter="alpha(opacity=100)",e.style.backgroundColor="transparent",d.appendChild(e),a.appendChild(d)},TRCRBox.prototype.createVideoBoxLabelOverlay=function(a){var b=document.createElement("span");b.className="label-box-overlay",a.appendChild(b)},TRCRBox.prototype.createVideoBoxThumbLink=function(a,b){try{var c=a.video_data,d=a.thumbnail_position,e=this.drawVideoBoxThumbnailLink(a,b,c,a.getAttribute("data-item-title"),d);"under"===d?(e.title=a.link.title="",a.insertBefore(e,a.link),TRC.dom.addClass(a.link,"video-labels-anchor"),this.findElement(function(a){return a.className.search("title")>=0},a.labelsBox,"span",null),8==TRC.Browser.ie&&TRC.dom.addClass(a.link,"ie8fix"),this.createVideoBoxLabelOverlay(a.labelsBox),c.thumbUnder=!0):"bottom"===d?a.appendChild(e):a.insertBefore(e,a.link)}catch(f){__trcError("Error in createVideoBoxThumbLink",f)}},TRCRBox.prototype.setVideoBoxDataAttr=function(a,b){a.setAttribute("data-item-id",b["item-id"]),a.setAttribute("data-item-title",b.title),a.setAttribute("data-item-thumb",this.getThumbnailURL(b,100,80)),a.setAttribute("data-item-syndicated",!!b.isSyndicated)},TRCRBox.prototype.getThumbnailPosition=function(a,b){var c=b||this.trc.getProperty(this.mode_name,"thumbnail-position");return c},TRCRBox.prototype.drawResponsiveVideoBox=function(a,b,c,d,e,f){var g=document.createElement("div");try{return b=__trcCopyProps(b,{},{isSyndicated:b["is-syndicated"]||b["is-in-network"],isPhoto:"photo"===b.type,isText:"text"===b.type,tags:"string"==typeof b.tags?TRC.text.parseCSV(b.tags):[]}),this.createResponsiveVideoBox(g,b,e,f),"none"!==g.thumbnail_position&&this.createVideoBoxThumbLink(g,c),this.createResponsiveLabelBox(g),TRC.Browser.ieUpto(6)&&this.setOmouseEffects_IE6(g),this.trc.getFunction(this.mode_name,"item-renderer",g,g.video_data),a.appendChild(g),this.fixResponsiveBoxTitleAndDesc(g),this.boxes.push(g),this.createVideoBoxImageLoader(g),g}catch(h){__trcError("Error in drawResponsiveVideoBox",h)}},TRCRBox.prototype.createResponsiveLabelBox=function(a){this.buildLabelBox(a.labelsBox,a.video_data,a.detail_order)},TRCRBox.prototype.createResponsiveVideoBox=function(a,b,c,d){a.rbox=this,a.video_data=b,a.thumbnail_position=this.getThumbnailPosition(b,d?d:null),this.setVideoBoxDataAttr(a,b),this.setVideoBoxClassName(a),this.createVideoBoxDirectURL(a),b.logger_url=this.createVideoBoxClickUrl(a.video_data,a.directURL),a.setAttribute("data-item-title",b.title),this.createVideoBoxVideoLink(a),this.setVideoBoxDetailOrder(a,c?c:null)},TRCRBox.prototype.setVideoBoxClassName=function(a){var b=0;this.setVideoBoxClassName=function(a){var c=a.video_data;a.className="videoCube trc_spotlight_item origin-"+c.origin+" thumbnail_"+a.thumbnail_position+(c.isSyndicated?" syndicatedItem":"")+(c["is-in-network"]?" inNetworkItem":"")+(c.isPhoto?" photoItem":"")+(c.isText?" textItem":"")+" videoCube_"+(b+=1)+"_child"},this.setVideoBoxClassName(a)},TRCRBox.prototype.setVideoBoxDetailOrder=function(a,b){var c=b||this.trc.getProperty(this.mode_name,"detail-order"+(a.video_data.isSyndicated?"-syndicated":""));a.detail_order=c.split(",")},TRCRBox.prototype.setOmouseEffects_IE6=function(a){a.onmouseover=function(){TRC.dom.addClass(this," videoCube_hover")},a.onmouseout=function(){this.className=this.className.replace(/\b\s+videoCube_hover\b/g,"")}},TRCRBox.prototype.createVideoBoxVideoLink=function(a){var b=a.video_data,c=a.getAttribute("data-item-title"),d=this.createVideoLink(b,c);a.labelsBox=this.createVideoBoxLabels(d),a.appendChild(d),a.link=d,TRC.dom.addClass(d,"item-label-href")},TRCRBox.prototype.appendVideoBoxImage=function(a){try{(null!=a.img_src||this.trc.global["thumb-lazy-load-switch"])&&("undefined"==typeof a.image_div?TRC.Browser.ieUpto(8)?(a.thumbBlock.appendChild(a.img),a.img.style.visibility="visible"):a.thumbBlock.style.backgroundImage="URL("+a.img_src+")":(a.thumbBlock.appendChild(a.image_div),a.image_div.appendChild(a.img),a.img.style.visibility="visible"))}catch(b){__trcError("Pager thumbnail images fixing errors",b)}},TRCRBox.prototype.pasreRecommendationList=function(a,b,c){var d,e;this.stopBoxRendering=!1;for(var f=0;a>f;f++){d=this.recommendationList[f],d.itemIndex=f,null==this.firstVideo&&"video"==d.type&&(this.firstVideo=d);try{this.trc.getFunction(this.mode_name,"item-data-filter",d),this.fixHeight&&!this.stopBoxRendering?(e=this.drawResponsiveVideoBox(c,d,b,this.orientation),this.stopBoxRendering=this.hasMaxHeightExploitation(parseInt(document.trcGetCurrentStyle(this.container,"height"),10),this.fixHeight),this.stopBoxRendering&&this.safeRemoveItem(e)):this.fixHeight||this.drawResponsiveVideoBox(c,d,b,this.orientation)}catch(g){__trcError("Error in pasreRecommendationList",g)}}},TRCRBox.prototype.safeRemoveItem=function(a){var b=a.parentNode;TRC.dom.clearInnerElements(a),b.removeChild(a)},TRCRBox.prototype.hasMaxHeightExploitation=function(a,b){return a>=b?!0:!1},TRCRBox.prototype.fixResponsiveVideoBoxes=function(){for(var a=this.boxes,b=0,c=a.length;c>b;b++)this.fixResponsiveBoxTitleAndDesc(a[b])},TRCRBox.prototype.fixWCTextLinksVideoBoxes=function(){for(var a=this.boxes,b=0,c=a.length;c>b;b++)a[b].labelsBox.firstChild.innerHTML=a[b].video_data.title,a[b].fixTextOverflow(!0)},TRCRBox.prototype.createSponsoredOverlay=function(a){span=doc.createElement("span"),span.className="trc_sponsored_overlay",a.appendChild(span)},TRCRBox.prototype.setSponsoredOverlayClass=function(a,b){b.className="thumbnail"==a?"trc_sponsored_overlay_base":"trc_sponsored_overlay_base round"},TRCRBox.prototype.genrateResponsiveSponsoredLabel=function(a,b){var c=this.trc.getProperty(this.mode_name,"sponsored-location");if(c.match(/^thumbnail/)){var d=(a.video_data,this.listContainer,document.createElement("span"));try{this.setSponsoredOverlayClass(c,d),this.createSponsoredOverlay(d),b.appendChild(d),a.spnoverlay=d}catch(e){__trcError("Error while generating sponsored label",e)}}},TRCRBox.prototype.generateResponsiveOuters=function(a){if(null==this.listContainer){this.header=this.generateHeader(a);var b=doc.createElement("div");b.id=this.id.replace("trc_","outer_"),b.className="trc_rbox_outer",this.generateResponsiveRBoxDiv(b),a.appendChild(b),this.trc.global["disclosure-enabled"]===!0?this.addTaboolaLogo():this.addTaboolaLogoNoDisclosure(),a.style.display="block"}},TRCRBox.prototype.generateResponsiveRBoxDiv=function(a){var b=doc.createElement("div");b.id=this.getListId(),b.className="trc_rbox_div trc_rbox_border_elm",a.appendChild(b),this.listContainer=b},TRCRBox.prototype.sendVisibility=function(a,b){var c,d,e,f,g,h,i,j;if(this.visible_boxes={},this.synd_visible_boxes={},this.network_visible_boxes={},this.visible_items_collection()>=2||this.isVisible()){var k=arguments.callee;this.visibleTimeoutId=TRC.Timeout.set(function(){if(this.visibleTimeoutId&&(TRC.Timeout.clear(this.visibleTimeoutId),this.visibleTimeoutId=null),this.visible_items_collection()>=2||this.isVisible()){c=[],d=[],e=[],f=[],g=[],h=[],i=[],j=[];for(var a in this.visible_boxes)c.push(this.visible_boxes[a].id),e.push(this.visible_boxes[a].type);for(var a in this.synd_visible_boxes)d.push(this.synd_visible_boxes[a].id),f.push(this.synd_visible_boxes[a].type),i.push(this.synd_visible_boxes[a].publisher);for(var a in this.network_visible_boxes)g.push(this.network_visible_boxes[a].id),h.push(this.network_visible_boxes[a].type),j.push(this.network_visible_boxes[a].publisher);if(c.length>0||d.length>0||g.length>0)return TRC.pConsole(this.mode_name,"info","sending visible event",""),this.sendEvent("visible",{il:c.join(","),sil:d.join(","),ilt:e.join(","),silt:f.join(","),ntil:g.join(","),ntilt:h.join(","),niltp:j.join(","),siltp:i.join(",")},!0),this.trc.getFunction(this.mode_name,"after-visible",b,this),void 0}else TRC.Timeout.set(k.trcBind(this),1e3)}.trcBind(this),a)}else TRC.Timeout.set(arguments.callee.trcBind(this),1e3)}}(window,document),function(){var a=TRC.URL=function(a){var b=TRC.text.lsplit;if(!a)throw new Error("Invalid URL!");this.href=a;var c=b(a,"#",2);return this.hash=c.length>1?"#"+c.pop():"",a=c[0],c=b(a,"?",2),this.search=c.length>1?"?"+c.pop():"",a=c[0],c=b(a,"://",2),this.protocol=c.length>1?c.shift()+":":"",a=c[0],c=b(a,"/",2),this.pathname=c.length>1?"/"+c.pop():"/",a=c[0],c=b(a,"@",2),this.auth=c.length>1?c.shift():"",a=c[0],c=b(a,":",2),this.port=c.length>1?parseInt(c.pop()):0,this.host=c[0],this},b={"http:":1,"https:":1};a.prototype.toString=function(a){return(this.host?this.protocol+"//"+(this.auth?this.auth+"@":"")+this.host+(this.port?":"+this.port:""):"")+this.pathname+this.search+(a?"":this.hash||"")},a.prototype.switchProtocol=function(a){var c,d=this instanceof TRC.URL?this:new TRC.URL(this);return b[a]&&(d.protocol=a),c=d.toString(!1),c.length>1?c:""},a.prototype.getParameter=function(a){var b=this instanceof TRC.URL?this:new TRC.URL(this);params=b.search.substr(1).split(/&/);for(var c=0;c<params.length;c++){var d=params[c].split(new RegExp("="),2);if(unescape(d[0])==a)return unescape(d[1])}return null}}(window,document),function(a,b,c){"use strict";var d,e,f={en:{popover:{title:{removed:"Removed!",scRemoved:"Sponsored link removed",thankYou:"Thank You!"},content:{questionnaire:{tellUsWhy:"Tell us why?",options:{uninteresting:"Uninteresting",misleading:"Misleading",offensive:"Offensive",repetitive:"Repetitive",other:"Other"}},approval:"We will try not to show you this content anymore."}},removeBtn:{title:"Remove this item"},undoBtn:{label:"Undo"}},fr:{popover:{title:{removed:"Supprimé!",scRemoved:"Lien sponsorisé supprimé",thankYou:"Merci!"},content:{questionnaire:{tellUsWhy:"Quelle est la raison?",options:{uninteresting:"Inintéressant",misleading:"Trompeur",offensive:"Offusquant",repetitive:"Répétitif",other:"Autre"}},approval:"Nous essaierons de ne plus vous montrer ce type de contenu à l'avenir."}},removeBtn:{title:"Supprimer ce contenu"},undoBtn:{label:"Annuler"}},it:{popover:{title:{removed:"Rimosso!",scRemoved:"Link sponsorizzato rimosso",thankYou:"Grazie!"},content:{questionnaire:{tellUsWhy:"Ci puoi dire il motivo?",options:{uninteresting:"Non mi interessa",misleading:"Non è coerente",offensive:"E’ offensivo",repetitive:"E’ ripetuto",other:"Altro"}},approval:"Cercheremo di non mostrarti più questo contenuto"}},removeBtn:{title:"Rimuovi questo elemento"},undoBtn:{label:"Annulla"}}},g=8e3,h=4e3,i=-1,j=function(a){var b=a.which||a.keyCode;27===b&&x()},k=function(a){var b=a.target||a.srcElement;c.dom.isAncestor(c.userX.popover,b,!0)||x()},l=function(a){var c=b.createElement("div");return c.id="tbl-aug-"+Math.floor(2147483648*Math.random()).toString(36),c.className="trc_popover_aug_container",o+="#"+c.id+" ",a&&a.appendChild(c),c},m=function(a){var b=[];return b.push(".trc_popover_aug_container { position: static;}"),b.push(a+".trc_popover {position: absolute; font-family: Arial, Helvetica, sans-serif; font-size: 12px; line-height: 16px; color: #000000; cursor: default; position: absolute; top: 0; right: 0; z-index: 12000; width: 180px; padding: 1px; text-align: left; white-space: normal; background-color: #ffffff; border: 1px solid #ccc; border: 1px solid rgba(0, 0, 0, 0.2); -webkit-border-radius: 6px; -moz-border-radius: 6px; border-radius: 6px; -webkit-box-shadow: 0 5px 10px rgba(0, 0, 0, 0.2); -moz-box-shadow: 0 5px 10px rgba(0, 0, 0, 0.2); box-shadow: 0 5px 10px rgba(0, 0, 0, 0.2); -webkit-background-clip: padding-box; -moz-background-clip: padding; background-clip: padding-box;-moz-box-sizing: content-box; -webkit-box-sizing: content-box; box-sizing: content-box;}"),b.push(a+".trc_popover iframe{width: 100%;}"),b.push(a+".trc_popover .trc_popover_arrow, .trc_popover .trc_popover_arrow:after { position: absolute; display: block; width: 0; height: 0; border-color: transparent; border-style: solid; }"),b.push(a+".trc_popover .trc_popover_arrow { border-width: 11px; }"),b.push(a+'.trc_popover .trc_popover_arrow:after { border-width: 10px; content: "";}'),b.push(a+".trc_popover.trc_bottom { margin-top: 10px; }"),b.push(a+".trc_popover.trc_bottom .trc_popover_arrow { top: -11px; right: 11px; margin-left: -11px; border-bottom-color: #999; border-bottom-color: rgba(0, 0, 0, 0.25); border-top-width: 0; }"),b.push(a+".trc_popover.trc_bottom .trc_popover_arrow:after { top: 1px; margin-left: -10px; border-bottom-color: #ffffff; border-top-width: 0; }"),c.Browser.ieUpto(8)?(b.push(a+".trc_popover_fade.trc_in { visibility: visible;}"),b.push(a+".trc_popover_fade { visibility: hidden;}"),b.push(a+'.trc_popover_fade.trc_in .trc_popover_arrow:after { content: " ";}')):(b.push(a+".trc_popover_fade.trc_in { visibility: visible; opacity: 1; filter: alpha(opacity=100); transition-delay: 0s, 0s; -moz-transition-delay: 0s, 0s; -webkit-transition-delay: 0s, 0s; -o-transition-delay: 0s, 0s; -ms-transition-delay: 0s, 0s;}"),b.push(a+".trc_popover_fade { visibility: hidden; opacity: 0; filter: alpha(opacity=0); transition: opacity 500ms 0s, visibility 0s 500ms; -webkit-transition: opacity 500ms 0s, visibility 0s 500ms;  -moz-transition: opacity 500ms 0s, visibility 0s 500ms; -o-transition: opacity 500ms 0s, visibility 0s 500ms; -ms-transition: opacity 500ms 0s, visibility 0s 500ms;}")),b.join("")},n=function(){var a=[];return a.push("html {overflow: hidden;}"),a.push("body {display: inline-block; width: 100%; margin: 0; padding: 0; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-size: 12px; color: #000000;}"),a.push(".trc_popover_title_wrapper {padding: 8px 14px; margin: 0; font-weight: bold; background-color: #f7f7f7; border-bottom: 1px solid #ebebeb; -webkit-border-radius: 5px 5px 0 0; -moz-border-radius: 5px 5px 0 0; border-radius: 5px 5px 0 0; }"),a.push(".trc_popover_title { width: 100%; display: inline-block; vertical-align: middle;}"),a.push(".trc_popover_title_text { float: left;}"),a.push(".trc_popover_content_wrapper { display: inline-block; float: left; padding: 9px 14px; }"),a.push(".trc_popover_content { width: 100%; }"),a.push(".trc_question_container .trc_question_title { margin: 0 0 3px;}"),a.push(".trc_question_container input[type=radio] { float: left; cursor: pointer; margin: 3px 4px 0 5px;}"),a.push(".trc_popover_content_wrapper .trc_question_container label{ float: left; clear: left; width: 100%; cursor: pointer; line-height: 20px; text-align: left;}"),c.Browser.ie&&(a.push("div.trc_question_container input[type=radio] { margin: 0 2px 0 0;}"),8==c.Browser.ie&&a.push("div.trc_question_container input[type=radio] { margin-top: 1px;}")),a.join("")},o="",p=function(e){var g=l(),h=l(g),i=l(h);b.body.appendChild(g),c.dom.injectStyle(m(o)),c.userX.popover=u(i),TRC.dom.on(a,"resize",C),d=f[e||"en"]||f.en,c.userX.isInitialized=!0},q=function(a){for(var b=0;b<a.boxes.length;b++)r(a.boxes[b])},r=function(a){var e=b.trcGetCurrentStyle(a,"position"),f=b.createElement("div"),g=b.createElement("div"),h=b.createElement("div");e&&"static"!==e||(a.style.position="relative"),c.dom.addClass(f,"trc_user_exclude_btn"),f.setAttribute("title",d.removeBtn.title),f.onclick=function(b){I(b,a)}.trcBind(a.rbox),a.appendChild(f),c.dom.addClass(h,"trc_exclude_overlay trc_fade"),a.appendChild(h),c.dom.addClass(g,"trc_undo_btn"),g.innerHTML=d.undoBtn.label,g.onclick=function(b){K(b,a)}.trcBind(this),a.appendChild(g),c.dom.addClass(a,"trc_excludable")},s=function(a){var b=document.createElement("iframe");return b.frameBorder=b.border="0",b.scrolling="no",b.src="javascript:void(0)",b.style.width="100%",a.appendChild(b)},t=function(a,b,c){var d=a.contentDocument?a.contentDocument:a.contentWindow.document;d.write(b),setTimeout(function(){try{d.close(),c&&c()}catch(a){}},0)},u=function(a){var d,e=b.createElement("div"),f=b.createElement("div");return c.dom.addClass(e,"trc_popover trc_popover_fade trc_bottom"),c.dom.addClass(f,"trc_popover_arrow"),e.appendChild(f),a.appendChild(e),e.trcContentIFrame=d=s(e),c.dom.on(b,"keyup",j),c.dom.on(b,"click",k),c.dom.on(e,"mouseover",E),c.dom.on(e,"mouseout",F),t(d,v(),function(){var a=d.contentDocument||d.contentWindow.document;a.TRC=c,c.dom.injectStyle(n(),a)}),e},v=function(){var a={open:"<script>",close:"</script>"},b=[];return b.push("<!doctype html>"),b.push("<body>"),document.domain!==location.hostname&&(b.push(a.open),b.push("document.domain='"+document.domain+"';"),b.push(a.close)),b.push(a.open),b.push("document.head = document.head || document.getElementsByTagName('head')[0];"),b.push(a.close),b.push('<div class=" trc_popover_title_wrapper ">'),b.push('<div class=" trc_popover_title " id="title">'),b.push('<span class=" trc_popover_title_text "></span>'),b.push("</div>"),b.push("</div>"),b.push('<div class=" trc_popover_content_wrapper ">'),b.push('<div id="content" class=" trc_popover_content "></div>'),b.push("</div>"),b.push("</body>"),b.join("\n")},w=function(a,b,d){var f=c.userX.popover,g=f.trcContentIFrame,h=g.contentDocument||g.contentWindow.document,i=h.getElementById("content"),j=c.Browser.ieUpto(8);a=a||f.videoCube,f.anchor&&c.dom.removeClass(f.anchor,"trc_anchor"),f.videoCube=a,g.style.height=(j?h.body.scrollHeight:h.body.offsetHeight)+"px",c.dom.addClass(f,"trc_in"),b=b||a,f.anchor=b,9==c.Browser.ie&&(f.style.display="block"),B(),E(),d&&(e=new D(x,d)),j&&(i.className=i.className),f.isVisible=!0},x=function(){var a=c.userX.popover,b=a.trcContentIFrame,d=(b.contentDocument||b.contentWindow.document).getElementById("content");c.dom.removeClass(a,"trc_in"),a.anchor&&c.dom.removeClass(a.anchor,"trc_anchor"),c.Browser.ieUpto(8)&&(d.className=d.className),9==c.Browser.ie&&(a.style.display="none"),a.isVisible=!1,E()},y=function(a){var b=c.userX.popover,d=b.trcContentIFrame,e=(d.contentDocument||d.contentWindow.document).getElementById("content");if(e.innerHTML="","string"==typeof a)return e.innerHTML=a,void 0;try{e.appendChild(a)}catch(f){e.innerHTML=a.outerHTML}},z=function(a){var b=c.userX.popover,d=b.trcContentIFrame,e=(d.contentDocument||d.contentWindow.document).getElementById("title");e.innerHTML=a},A=function(a){var b={},d=function(a){var b=0;if("string"==typeof a&&null!=a&&""!=a){var c=a.indexOf("px");b=c>=0?parseInt(a.substring(0,c),10):1}return b},e=function(a){var b={};if(b.left=0,b.top=0,b.right=0,b.bottom=0,window.getComputedStyle){var c=window.getComputedStyle(a,null);b.left=parseInt(c.borderLeftWidth.slice(0,-2),10),b.top=parseInt(c.borderTopWidth.slice(0,-2),10),b.right=parseInt(c.borderRightWidth.slice(0,-2),10),b.bottom=parseInt(c.borderBottomWidth.slice(0,-2),10)}else b.left=d(a.style.borderLeftWidth),b.top=d(a.style.borderTopWidth),b.right=d(a.style.borderRightWidth),b.bottom=d(a.style.borderBottomWidth);return b};if(b.x=0,b.y=0,null!==a)if(a.getBoundingClientRect){var f=document.documentElement,g=a.getBoundingClientRect(),h=c.Browser.ie,i=h||window.scrollX==f.scrollLeft||"undefined"==typeof window.scrollX?f.scrollLeft:window.scrollX,j=h||window.scrollY==f.scrollTop||"undefined"==typeof window.scrollY?f.scrollTop:window.scrollY;b.x=g.left+i,b.y=g.top+j}else{b.x=a.offsetLeft,b.y=a.offsetTop;for(var k=a.parentNode,l=a.offsetParent,m=null;null!=l;){b.x+=l.offsetLeft,b.y+=l.offsetTop;var n=l.tagName.toLowerCase();if((c.Browser.ieUpto(8)&&"table"!=n||(c.Browser.firefoxAtleast(3)||c.Browser.chrome)&&"td"==n)&&(m=e(l),b.x+=m.left,b.y+=m.top),l!=document.body&&l!=document.documentElement&&(b.x-=l.scrollLeft,b.y-=l.scrollTop),!c.Browser.ie&&!c.Browser.opera||c.Browser.ieAtleast(8))for(;l!=k&&null!==k;)b.x-=k.scrollLeft,b.y-=k.scrollTop,(c.Browser.firefoxUpto(3)||c.Browser.webkit)&&(m=e(k),b.x+=m.left,b.y+=m.top),k=k.parentNode;k=l.parentNode,l=l.offsetParent}}return b},B=function(){var a,b,d,e=c.userX.popover,f=e&&e.videoCube&&e.videoCube.rbox.findElement(function(a){return a.className.search("trc_popover_arrow")>=0},e,"div"),g=e&&e.anchor;g&&f&&(c.dom.addClass(g,"trc_anchor"),a=A(g),b=a.x-e.offsetWidth+g.offsetWidth/2+f.clientLeft+f.offsetWidth/2+1,d=a.y+g.offsetHeight,0>b?(f.style.right=e.offsetWidth-a.x-f.offsetWidth/2-g.offsetWidth/2+"px",b=0):f.style.right=null,e.style.left=b+"px",e.style.top=d+"px")},C=function(){var a=c.userX&&c.userX.popover;a&&a.isVisible&&(TRC.Browser.ieUpto(8)?c.dom.getWindowWidth()!=i&&setTimeout(function(){B(),i=c.dom.getWindowWidth()},0):B())},D=function(a,b){var c,d,e=b;this.pause=function(){clearTimeout(c),e-=new Date-d},this.resume=function(){d=new Date,c=setTimeout(a,e)},this.resume()},E=function(){e&&e.pause&&e.pause()},F=function(){e&&e.resume&&e.resume()},G=function(){var a,e,f=b.createElement("div"),g=b.createElement("div"),h=d.popover.content.questionnaire.options,i=c.Browser.ieUpto(8)?"onclick":"onchange";c.dom.addClass(f,"trc_question_container"),g.innerHTML=d.popover.content.questionnaire.tellUsWhy,c.dom.addClass(g,"trc_question_title"),f.appendChild(g);for(var j in h)h.hasOwnProperty(j)&&(a=b.createElement("label"),e=b.createElement("input"),e.setAttribute("type","radio"),e.setAttribute("name","excludeReason"),e.setAttribute("value",j),e.setAttribute(i,"this.checked = true; TRC.userX.explainExclude(event, TRC.userX.popover.videoCube, 400); "),a.appendChild(e),a.innerHTML+=h[j],f.appendChild(a));return f},H=function(a){var b=a&&a.video_data,c={};return b?(c.ii=b&&b["item-id"],c.prt="rc",b["is-syndicated"]&&(c.prt="sc"),b["is-in-network"]&&(c.prt="nt"),c.p=b.publisher||"",TRC.pageManager.getValue("past-exclusions")&&(c.px=TRC.pageManager.getValue("past-exclusions")),c):(__trcWarn("No video data have been found for user exclude event request params. aborting."),!1)},I=function(a,b){a=a||event;var d=H(b);return b&&"true"==b.getAttribute("data-excluded")||!d?(__trcDebug("No recommendation to exclude. Not sending exclude event."),c.dom.stopEvent(a)):(b.rbox.sendEvent("exclude",d,!1),J(b),c.dom.stopEvent(a))},J=function(a){var b=a.rbox.findElement(function(a){return a.className.search("trc_undo_btn")>=0},a,"div"),e=a&&a.video_data["is-syndicated"]?d.popover.title.scRemoved:d.popover.title.removed;c.userX.popover.videoCube=a,c.pageManager.storeValue("past-exclusions",1),z(e),y(G()),w(a,b,g),a.setAttribute("data-excluded","true"),c.dom.addClass(a,"trc_user_excluded")},K=function(a,b){a=a||event;var d=H(b);return b&&b.getAttribute("data-excluded")&&d?(b.rbox.sendEvent("excludeundo",d,!1),L(b),c.dom.stopEvent(a)):(__trcDebug("No recommendation to unexclude. Not sending exclude-undo event."),c.dom.stopEvent(a))},L=function(a){a.removeAttribute("data-excluded"),c.dom.removeClass(a,"trc_user_excluded"),x()},M=function(a,b,c){a=a||event;var d=a.target||a.srcElement,e=H(b);E(),b&&b.getAttribute("data-excluded")&&e?(e.xr=d.getAttribute("value"),b.rbox.sendEvent("excludeexplain",e,!1)):__trcDebug("No recommendation exclude to explain. Not sending exclude-explain event."),c?setTimeout(function(){N()},c):N()},N=function(){var a=c.userX.popover,b=c.Browser.ieUpto(9)?0:250;x(),c.dom.addClass(a.anchor,"trc_anchor"),setTimeout(function(){z(d.popover.title.thankYou),y(d.popover.content.approval),w(a.videoCube,a.anchor,h)},b)};c.userX={init:p,initForMode:q,explainExclude:M,locale:"en",isInitialized:!1}}(window,document,TRC),TRC.visibility=TRC.visibility||{},TRC.visibility=function(a){function b(a){var b=TRC.dom.getViewportVerticalRange(),c=TRC.dom.getElementRect(a);return c.top<0?Math.max(c.top,c.bottom):b.max-c.top-b.min}function c(a){var b=TRC.dom.getViewportHorizontalRange(),c=TRC.dom.getElementRect(a);return c.left<0?Math.max(c.left,c.right):b.max-c.left-b.min}return modObject={getViewPortOffsets:function(a){var d=b(a),e=c(a);return{verticalOffset:d,horizontalOffset:e}}},a._trcIsUTactive&&(modObject.getVerticalVPShift=b,modObject.getHorizontalVPShift=c),modObject}(window,document),function(win,doc){var protocol=TRC.PROTOCOL,taboolaConsole=TRC.URL.prototype.getParameter.call(location.href,"trc_console");win.trc_debug_level=TRC.URL.prototype.getParameter.call(location.href,"taboola-debug"),taboolaConsole&&"yes"===taboolaConsole.toLowerCase()&&TRC.Manager.prototype.loadExternal("http://c2.taboola.com/console/console_loader.js","js"),isNaN(parseInt(win.trc_debug_level))&&(trc_debug_level=1),TRC.callbacks={cdnRecommendations:function(a){TRC.dispatch("staticRecommendationsReceived",{response:a})},mute:function(){var a,b=TRCImpl.boxes;if(TRCImpl.preloadRequestLoader=null,TRC.Timeout.reset(),b)for(a in b)b[a].request=null}},TRC.trc_drawRBox=!1,TRC.listOrigin=new TRC.ListOriginBuilder,TRC.baseDomain=TRC.baseDomain||protocol+"//cdn.taboola.com/libtrc/"+TRC.publisherId+"/",TRC.prototype=TRC.prototype||{},TRC.Interval=function(){var intervals={};return{set:function(callback,interval){var aArgs=Array.prototype.slice.call(arguments,2),intervalId=win.setInterval(function(){callback instanceof Function?callback.apply(null,aArgs):eval(callback)},interval);return intervals[intervalId.toString()]=1,intervalId},clear:function(a){a&&(win.clearInterval(a),delete intervals[a.toString()])},reset:function(){for(intervalId in intervals)win.clearInterval(intervalId),delete intervals[intervalId.toString()]}}}(),TRC.Timeout=function(){var a={};return{set:function(b,c){var d=win.setTimeout(function(){delete a[d.toString()],b()},c);return a[d.toString()]=1,d},clear:function(b){b&&(win.clearTimeout(b),delete a[b.toString()])},reset:function(){var b;for(b in a)win.clearTimeout(b),delete a[b.toString()]}}}(),TRC.trcReady=function(){var a;return function(){try{TRC.pConsole("page","debug","libtrc : calling TRC.ready",""),TRC.implLoaded=!0;var b=TRC.ready({style:".trc_rbox_container{direction:ltr;text-align:left}.trc_rbox_header{border-style:solid;border-width:0}.in_trc_header{position:relative!important;float:right;margin:0}#trc_rbox_css_loaded{overflow:hidden;width:0;height:0}.trc_rbox{margin-top:0}.trc_rbox_div{margin:0 0 3px;direction:ltr;padding:0;box-sizing:border-box;-moz-box-sizing:border-box;-ms-box-sizing:border-box;-webkit-box-sizing:border-box;overflow:auto;position:relative;width:auto;*width:auto;border:solid #CCC 1px}.loading-animation span{display:block}.videoCube{zoom:1;cursor:pointer;float:none;overflow:hidden;box-sizing:border-box;-moz-box-sizing:border-box;-ms-box-sizing:border-box;-webkit-box-sizing:border-box}div.videoCube:hover,.videoCube_hover{cursor:pointer}.videoCube span.video-title:hover,.videoCube_hover span.video-title{text-decoration:underline}.videoCube a{text-decoration:none;border:0;color:#000;cursor:pointer}.videoCube a:hover,.videoCube_hover a,.videoCube a:link,.videoCube a{text-decoration:none!important;outline:0}.videoCube a .thumbBlock{float:left;display:block;overflow:hidden!important}.videoCube a img,.videoCube img{border:0;_border:0;display:block;margin:0;height:auto;width:auto}.videoCube .video-label{display:block;overflow:hidden}.videoCube .video-title{width:auto!important;white-space:pre-wrap;white-space:-moz-pre-wrap;white-space:-o-pre-wrap;word-wrap:break-word}.videoCube .video-duration a{}.videoCube .video-duration{height:0;float:left;position:relative;color:#fff;font-size:11px}.videoCube .video-duration dt{border-radius:4px;-moz-border-radius:4px;-webkit-border-radius:4px;background-color:#000;opacity:.6;filter:alpha(opacity=60)}.sponsored-default .video-description{font-weight:400;color:#000;font-size:9px;max-height:22px;*height:22px;overflow:hidden;line-height:9px}.video-duration.video-duration-detail div{color:#fff}.sponsored-default{background-color:#f7f6c6;padding-bottom:0!important}.trc_rbox .sponsored{position:relative;display:block;overflow:visible;height:auto;width:auto;padding-right:0;text-align:right;font-size:9px}.sponsored-url{white-space:nowrap;float:left;overflow:hidden;width:98%;height:auto;margin-top:0;margin-left:1px;padding-bottom:2px;color:green;font-size:9px;text-decoration:underline}.sponsored-default .video-title{height:26px;font-size:11px;line-height:13px;max-height:26px;*height:26px}.sponsored-default .thumbBlock img{}.sponsored-default .thumbBlock{text-align:center;background-color:transparent}.trc_rbox_div{height:410px}.videoCube{direction:ltr;font-size:11px;margin:0;color:#000;border-width:0}.videoCube.vertical:first-child{border-top:0;margin-top:0}.videoCube.horizontal:first-child{border-left:0;margin-left:0}.trc_rbox .trc_rbox_div .videoCube.vertical{_margin-top:expression(this.previousSibling==null?'0':'default')}.trc_rbox .trc_rbox_div .videoCube.horizontal{_margin-left:expression(this.previousSibling==null?'0':'default')}div.videoCube:hover,.videoCube_hover{background-color:#EBF0FF;color:#000}.videoCube .thumbBlock{margin-right:5px;margin-left:1px;border-style:solid}.videoCube a img,.videoCube img{border-color:#ececec}.videoCube .overlayImg{}.videoCube .video-label-box{margin-left:81px}.videoCube .video-label dt{font-weight:700}.videoCube .video-title{height:auto;margin-bottom:3px;white-space:normal}.videoCube .trc_inline_detail_spacer{display:inline-block;white-space:pre}.sponsored-default{padding-bottom:0}.loading-animation{font-family:sans;font-size:1.5em;text-align:center;color:gray;height:100%}.trc_rbox_header{font-family:Arial,Helvetica,sans-serif;font-size:12px;font-weight:700;text-decoration:none;color:#000}.trc_header_right_part{position:absolute;left:50%;top:0}.branding_div{overflow:visible;float:right}.branding_div img{height:20px}.trc_pager div{float:left;font-family:sans;cursor:pointer;margin-left:2px;margin-right:2px}.trc_pager_prev,.trc_pager_next{}.trc_pager{font-weight:400}.trc_pager_pages{display:block!important}.trc_related_container div.horizontal{float:left;box-sizing:border-box;-moz-box-sizing:border-box;-ms-box-sizing:border-box;-webkit-box-sizing:border-box}.trc_related_container div.vertical{}.trc_related_container DIV.videoCube.thumbnail_top .thumbBlock,.trc_related_container DIV.videoCube.thumbnail_bottom .thumbBlock{float:none}@media screen and (-webkit-min-device-pixel-ratio:0){.sponsored-url{margin-top:2px}}.vidiscovery-note{display:none}.pager_disabled{cursor:auto}.videoCube .thumbBlock .trc_sponsored_overlay_base{display:block;width:auto;margin-left:0;position:absolute;color:#fff!important}.videoCube .thumbBlock .trc_sponsored_overlay{filter:alpha(opacity=60);opacity:.6;display:block;position:absolute;*left:0}.videoCube .thumbBlock .trc_sponsored_overlay_base .sponsored{position:relative;display:block;overflow:visible;width:auto;text-align:center;padding:0 5px;margin-top:0}.videoCube .thumbBlock .trc_sponsored_overlay_base.round .trc_sponsored_overlay{border-radius:4px;-moz-border-radius:4px;-webkit-border-radius:4px}.videoCube .thumbBlock .trc_sponsored_overlay_base.round{margin-left:4px}.thumbnail-emblem{background-color:transparent;background-repeat:no-repeat;position:absolute;z-index:50}.playerCube .thumbnail-overlay,.videoCube .thumbnail-overlay{position:absolute;background-color:transparent;background-repeat:no-repeat;z-index:50}.videoCube:hover .thumbnail-overlay,.videoCube_hover .thumbnail-overlay{position:absolute;background-color:transparent;background-repeat:no-repeat;z-index:50}.thumbnail_bottom{padding-bottom:8px}.trc_pager_next img,trc_pager_next pager_disabled img,trc_pager_next:hover img{-moz-transform:scaleX(-1);-o-transform:scaleX(-1);-webkit-transform:scaleX(-1);transform:scaleX(-1);filter:FlipH;-ms-filter:\"FlipH\"}.trc_cover_iframe{position:absolute;z-index:100000;top:0;left:0;background:#000;opacity:.4;filter:alpha(opacity=40);border:0}.trc_lightbox_base{z-index:100001;position:fixed}.trc_lightbox_overlay{background-color:transparent;position:absolute;z-index:100002}.trc_lightbox_transparent{position:absolute;z-index:100003}#trc_lightbox_header{font-family:\"Trebuchet MS\",Helvetica,sans-serif}.trc_whitebox{background-color:#fff;position:relative;z-index:100004;padding:0 20px 20px;margin:0 auto;border:2px solid #000;-moz-box-shadow:3px 3px 20px #000;-webkit-box-shadow:3px 3px 20px #000;box-shadow:3px 3px 20px #000;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box;-moz-border-radius:5px;-webkit-border-radius:5px;border-radius:5px}.trc_whiteboxCloseButton{width:32px;height:32px;border:0;position:absolute;right:-16px;top:-14px;cursor:pointer;background:url(//cdn.taboola.com/taboola-generic/close.png) no-repeat top left transparent;color:#fff;color:transparent;font-size:0}.trc_related_container .logoDiv{font-family:Arial,Helvetica,sans-serif;white-space:nowrap;font-size:9px}.trc_related_container .logoDiv a{font-size:9px;text-decoration:none!important;color:#000;margin-right:1px;vertical-align:text-bottom}.logoDiv a span:hover{text-decoration:underline}.trc_rbox_header .logoDiv{font-size:1em}.trc_related_container .vertical-start-shade{background-image:url(//cdn.taboola.com/taboola-generic/shade-down.png);height:10px;width:auto;position:absolute;z-index:5}.trc_related_container .vertical-end-shade{background-image:url(//cdn.taboola.com/taboola-generic/shade-up.png);height:10px;width:auto;position:absolute;z-index:5}.trc_related_container .horizontal-start-shade{background-image:url(//cdn.taboola.com/taboola-generic/shade-right.png);height:auto;width:10px;position:absolute;z-index:5}.trc_related_container .horizontal-end-shade{background-image:url(//cdn.taboola.com/taboola-generic/shade-left.png);height:auto;width:10px;position:absolute;z-index:5}DIV.trc_autoplaylist-box{margin:6px auto 0;border:0;-moz-border-radius:5px;-webkit-border-radius:5px;border-radius:5px;padding:4px;font-family:\"Trebuchet MS\",Helvetica,sans-serif;width:320px;background:#191919;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#191919', endColorstr='#393939');-ms-filter:\"progid:DXImageTransform.Microsoft.gradient(startColorstr=#191919, endColorstr=#393939)\";background:-webkit-gradient(linear,left top,left bottom,from(#191919),to(#393939));background:-moz-linear-gradient(top,#191919,#393939);background:linear-gradient(top,#191919,#393939)}DIV.trc_autoplaylist-box .trc-next-up-header{font-size:14px;color:#CCC;float:left;line-height:31px;margin:0 4px 0 6px;overflow:hidden;white-space:nowrap}DIV.trc_autoplaylist-box .trc-next-up-countdown{color:#fff;font-weight:700;font-size:15px;padding-left:4px}DIV.trc_autoplaylist-box .nextup{cursor:pointer}DIV.trc_autoplaylist-box .nextup .thumbblock{border:solid #FEFEFE 1px;margin-right:10px}DIV.trc_autoplaylist-box:hover .nextup .thumbblock SPAN.thumbnail-overlay{background-image:url(//cdn.taboola.com/taboola-generic/lightbox-overlay.png)}DIV.trc_autoplaylist-box .nextup .video-label-box{color:#fff;font-weight:700;font-size:12px;line-height:14px}.trc-syndication-link{text-decoration:none;color:inherit}.playerCube{width:100%;height:100%;position:relative;cursor:pointer}.playerCube .thumbnail-overlay{width:100%;height:100%;top:0;left:0;position:absolute}.trc_related_container .whatsThisSyndicated{position:absolute;cursor:pointer}.trc_related_container .whatsThisSyndicated.a-bottom-right,.trc_related_container .static-text.bottom-right{bottom:0;right:0}.trc_related_container .whatsThisSyndicated.a-top-right,.trc_related_container .static-text.top-right{top:0;right:0}.trc_related_container .whatsThisSyndicated.a-bottom-left,.trc_related_container .static-text.bottom-left{bottom:0;left:0}.trc_related_container .whatsThisSyndicated.a-top-left,.trc_related_container .static-text.top-left{top:0;left:0}.trc_related_container .videoCube .thumbBlock .branding{position:absolute;bottom:0;z-index:1;width:100%;margin:0;padding:5px 0;text-align:center}.trc_related_container .videoCube .thumbBlock .static-text{position:absolute;z-index:1;margin:0;padding:5px;background-color:#000;color:#fff;display:block;font-family:Arial,Helvetica,sans-serif;font-size:10px;font-weight:400;text-align:left;text-decoration:none;opacity:.7}.trc_related_container .static-text.top{width:100%;top:0;padding:5px 0}.trc_related_container .static-text.bottom{width:100%;bottom:0;padding:2px 0}.trc-inplayer-rbox{background:#333;background:rgba(30,30,30,.9);*background:#333;bottom:0;position:absolute;height:300px;text-align:center}.trc-inplayer-rbox .trc_rbox_container{margin:50px auto 0;width:640px}.trc_rbox.trc-auto-size{width:100%;height:100%}.videoCube.thumbnail_under .thumbBlock{margin-left:0;margin-right:0}.videoCube.thumbnail_under .label-box-overlay{width:100%;height:100%;position:absolute;background:#000;opacity:.75;filter:alpha(opacity=75);top:0;_display:none}.videoCube.thumbnail_under .video-labels-anchor{width:100%;height:auto;position:absolute;z-index:1;left:0;bottom:0;min-height:2.58em;max-height:2.58em;padding-top:2px;padding-bottom:2px;_background-color:#CECECE;-webkit-transition:all .2s linear;-moz-transition:all .2s linear;-ms-transition:all .2s linear;-o-transition:all .2s linear;transition:all .2s linear;line-height:1.25em}.videoCube.thumbnail_under .video-labels-anchor span.video-title,.videoCube.thumbnail_under .video-labels-anchor span.branding{position:relative;z-index:1;padding:0 3px;margin:0}.videoCube.thumbnail_under .video-title{min-height:2.58em}.videoCube.thumbnail_under:hover .video-labels-anchor{opacity:1;max-height:6.45em}.trc-auto-size .trc_rbox_outer .trc_rbox_div{height:auto;width:auto}.trc-auto-size .trc_rbox_div .videoCube{height:auto}.trc-auto-size .trc_rbox_div .videoCube.trc-first-recommendation{margin-top:0}.trc_rbox .trc_rbox_outer .trc_rbox_div .videoCube.trc-first-in-row{margin-left:0}.trc_related_container .trc_elastic{font-size:13px;line-height:18px;color:#333;background-color:#fff;box-shadow:#666 0 0 0 4px;margin:20px}.trc_elastic .trc_rbox{width:auto}.trc_elastic .videoCube{overflow:hidden}.trc_elastic .videoCube .thumbBlock{display:block;background-color:transparent;background-position:center center;background-repeat:no-repeat;background-size:cover;position:absolute;display:inline-block;top:0;right:0;bottom:0;left:0;margin-left:0;margin-right:0}.trc_elastic .thumbBlock_holder{position:relative;width:100%}.trc_elastic .videoCube_aspect{width:1px}.trc_elastic .trc_rbox .trc_rbox_div{height:auto}.trc_elastic .video-label-box{display:block}.trc_user_exclude_btn{background:url(//cdn.taboola.com/libtrc/static/thumbnails/f539211219b796ffbb49949997c764f0.png) no-repeat scroll 0 0 transparent;width:12px;height:12px;position:absolute;right:2px;top:2px;z-index:9000;cursor:pointer;visibility:hidden}.trc_undo_btn{font-family:Arial,Helvetica,sans-serif;font-size:11px;line-height:14px;font-weight:400;color:#36C;text-decoration:underline;cursor:pointer;position:absolute;right:2px;top:2px;padding:0 1px;z-index:11000;visibility:hidden}.videoCube:hover .trc_user_exclude_btn,.videoCube_hover .trc_user_exclude_btn,.trc_user_excluded.videoCube:hover .trc_undo_btn,.trc_user_excluded.videoCube_hover .trc_undo_btn,.trc_undo_btn.trc_anchor{visibility:visible}.videoCube.trc_user_excluded .trc_user_exclude_btn{visibility:hidden}.trc_fade{opacity:0;filter:alpha(opacity=0);visibility:hidden;transition:opacity 500ms 0s,visibility 0s 500ms;-webkit-transition:opacity 500ms 0s,visibility 0s 500ms;-moz-transition:opacity 500ms 0s,visibility 0s 500ms;-o-transition:opacity 500ms 0s,visibility 0s 500ms;-ms-transition:opacity 500ms 0s,visibility 0s 500ms}.trc_fade.trc_in,.trc_user_excluded .trc_exclude_overlay{visibility:visible;opacity:1;filter:alpha(opacity=100);transition-delay:0s,0s;-moz-transition-delay:0s,0s;-webkit-transition-delay:0s,0s;-o-transition-delay:0s,0s;-ms-transition-delay:0s,0s}.trc_excludable .trc_exclude_overlay{position:absolute;z-index:10000;top:0;left:0;width:100%;height:100%;cursor:default;background-color:#fff}.videoCube.trc_excludable .trc_exclude_overlay.trc_fade{filter:alpha(opacity=80)\\9}.videoCube.trc_user_excluded .trc_exclude_overlay{visibility:visible;opacity:.8;filter:alpha(opacity=80)}.videoCube.trc_user_excluded .thumbBlock{filter:url(\"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg'><filter id='grayscale'><feColorMatrix type='matrix' values='0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0' /></filter></svg>#grayscale\");filter:gray;-webkit-filter:grayscale(100%)}.videoCube.trc_user_excluded:hover a .video-label-box .video-title,.videoCube_hover.trc_user_excluded a .video-label-box .video-title{text-decoration:none}.videoCube.trc_user_excluded a .video-label-box *,.videoCube.trc_user_excluded:hover a .video-label-box *,.videoCube_hover.trc_user_excluded a .video-label-box *{color:#000;overflow:hidden;-webkit-transition:color 500ms 0s;-moz-transition:color 500ms 0s;-ms-transition:color 500ms 0s;-o-transition:color 500ms 0s;transition:color 500ms 0s}.videoCube.trc_user_excluded a .video-label-box .label-box-overlay{background-color:#BBB;-webkit-transition:background-color 500ms 0s;-moz-transition:background-color 500ms 0s;-ms-transition:background-color 500ms 0s;-o-transition:background-color 500ms 0s;transition:background-color 500ms 0s}.videoCube.thumbnail_under.trc_user_excluded .video-labels-anchor,.videoCube.thumbnail_under.trc_user_excluded:hover .video-labels-anchor{max-height:none;-webkit-transition:none;-moz-transition:none;-ms-transition:none;-o-transition:none;transition:none}.trc_related_container .trc_clearer{clear:both;height:0;overflow:hidden;font-size:0;line-height:0;visibility:hidden}.trc_mobile_disclosure_link,.trc_mobile_attribution_link{display:none}.trc_desktop_disclosure_link,.trc_desktop_attribution_link{display:inline}@media screen and (max-width:767px){.trc_mobile_disclosure_link{display:inline}.trc_mobile_attribution_link{display:inline}.trc_desktop_disclosure_link{display:none}.trc_desktop_attribution_link{display:none}}.trc_related_container .logoDiv,.trc_related_container .trc_header_ext .logoDiv{float:right}.trc_related_container .logoDiv+.logoDiv{margin-right:2px}.trc_related_container .attribution-disclosure-link-sponsored,.trc_related_container .attribution-disclosure-link-hybrid{display:none}.trc_related_container .trc-content-sponsored .attribution-disclosure-link-sponsored{display:block}.trc_related_container .trc-content-hybrid .attribution-disclosure-link-hybrid{display:block}.trc_related_container .trc-widget-footer:hover a span,.trc_related_container .trc_header_ext:hover a span{text-decoration:underline!important}.trc_related_container{clear:both}"});
if(!b.invisible)return;TRC.dom.onReady(function(){a?(a.innerHTML="",a.style.display="none"):(a=doc.createElement("div"),doc.body.appendChild(a).style.display="none"),b.internalDrawRBox({mode:"rbox-tracking",container:a})})}catch(c){__trcError("Error in libtrc initialization",c)}}}(),TRC.pConsole("","time","impl file loaded",""),TRC.utm.push((new Date).getTime()-TRC.utm.start),TRC.trcReady()}(window,document);