/* common.js */
(function(e,t){function u(e){var t=o[e]={},n,r;e=e.split(/\s+/);for(n=0,r=e.length;n<r;n++)t[e[n]]=!0;return t}function c(e,n,r){if(r===t&&e.nodeType===1){var i="data-"+n.replace(l,"-$1").toLowerCase();r=e.getAttribute(i);if(typeof r=="string"){try{r=r==="true"?!0:r==="false"?!1:r==="null"?null:s.isNumeric(r)?parseFloat(r):f.test(r)?s.parseJSON(r):r}catch(o){}s.data(e,n,r)}else r=t}return r}function h(e){for(var t in e){if(t==="data"&&s.isEmptyObject(e[t]))continue;if(t!=="toJSON")return!1}return!0}function p(e,t,n){var r=t+"defer",i=t+"queue",o=t+"mark",u=s._data(e,r);u&&(n==="queue"||!s._data(e,i))&&(n==="mark"||!s._data(e,o))&&setTimeout(function(){!s._data(e,i)&&!s._data(e,o)&&(s.removeData(e,r,!0),u.fire())},0)}function H(){return!1}function B(){return!0}function W(e){return!e||!e.parentNode||e.parentNode.nodeType===11}function X(e,t,n){t=t||0;if(s.isFunction(t))return s.grep(e,function(e,r){var i=!!t.call(e,r,e);return i===n});if(t.nodeType)return s.grep(e,function(e,r){return e===t===n});if(typeof t=="string"){var r=s.grep(e,function(e){return e.nodeType===1});if(q.test(t))return s.filter(t,r,!n);t=s.filter(t,r)}return s.grep(e,function(e,r){return s.inArray(e,t)>=0===n})}function V(e){var t=$.split("|"),n=e.createDocumentFragment();if(n.createElement)while(t.length)n.createElement(t.pop());return n}function at(e,t){return s.nodeName(e,"table")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function ft(e,t){if(t.nodeType!==1||!s.hasData(e))return;var n,r,i,o=s._data(e),u=s._data(t,o),a=o.events;if(a){delete u.handle,u.events={};for(n in a)for(r=0,i=a[n].length;r<i;r++)s.event.add(t,n+(a[n][r].namespace?".":"")+a[n][r].namespace,a[n][r],a[n][r].data)}u.data&&(u.data=s.extend({},u.data))}function lt(e,t){var n;if(t.nodeType!==1)return;t.clearAttributes&&t.clearAttributes(),t.mergeAttributes&&t.mergeAttributes(e),n=t.nodeName.toLowerCase();if(n==="object")t.outerHTML=e.outerHTML;else if(n!=="input"||e.type!=="checkbox"&&e.type!=="radio"){if(n==="option")t.selected=e.defaultSelected;else if(n==="input"||n==="textarea")t.defaultValue=e.defaultValue}else e.checked&&(t.defaultChecked=t.checked=e.checked),t.value!==e.value&&(t.value=e.value);t.removeAttribute(s.expando)}function ct(e){return typeof e.getElementsByTagName!="undefined"?e.getElementsByTagName("*"):typeof e.querySelectorAll!="undefined"?e.querySelectorAll("*"):[]}function ht(e){if(e.type==="checkbox"||e.type==="radio")e.defaultChecked=e.checked}function pt(e){var t=(e.nodeName||"").toLowerCase();t==="input"?ht(e):t!=="script"&&typeof e.getElementsByTagName!="undefined"&&s.grep(e.getElementsByTagName("input"),ht)}function dt(e){var t=n.createElement("div");return ut.appendChild(t),t.innerHTML=e.outerHTML,t.firstChild}function vt(e,t){t.src?s.ajax({url:t.src,async:!1,dataType:"script"}):s.globalEval((t.text||t.textContent||t.innerHTML||"").replace(st,"/*$0*/")),t.parentNode&&t.parentNode.removeChild(t)}function Lt(e,t,n){var r=t==="width"?e.offsetWidth:e.offsetHeight,i=t==="width"?xt:Tt,o=0,u=i.length;if(r>0){if(n!=="border")for(;o<u;o++)n||(r-=parseFloat(s.css(e,"padding"+i[o]))||0),n==="margin"?r+=parseFloat(s.css(e,n+i[o]))||0:r-=parseFloat(s.css(e,"border"+i[o]+"Width"))||0;return r+"px"}r=Nt(e,t,t);if(r<0||r==null)r=e.style[t]||0;r=parseFloat(r)||0;if(n)for(;o<u;o++)r+=parseFloat(s.css(e,"padding"+i[o]))||0,n!=="padding"&&(r+=parseFloat(s.css(e,"border"+i[o]+"Width"))||0),n==="margin"&&(r+=parseFloat(s.css(e,n+i[o]))||0);return r+"px"}function Gt(e){return function(t,n){typeof t!="string"&&(n=t,t="*");if(s.isFunction(n)){var r=t.toLowerCase().split(Rt),i=0,o=r.length,u,a,f;for(;i<o;i++)u=r[i],f=/^\+/.test(u),f&&(u=u.substr(1)||"*"),a=e[u]=e[u]||[],a[f?"unshift":"push"](n)}}}function Yt(e,n,r,i,s,o){s=s||n.dataTypes[0],o=o||{},o[s]=!0;var u=e[s],a=0,f=u?u.length:0,l=e===Xt,c;for(;a<f&&(l||!c);a++)c=u[a](n,r,i),typeof c=="string"&&(!l||o[c]?c=t:(n.dataTypes.unshift(c),c=Yt(e,n,r,i,c,o)));return(l||!c)&&!o["*"]&&(c=Yt(e,n,r,i,"*",o)),c}function Zt(e,n){var r,i,o=s.ajaxSettings.flatOptions||{};for(r in n)n[r]!==t&&((o[r]?e:i||(i={}))[r]=n[r]);i&&s.extend(!0,e,i)}function en(e,t,n,r){if(s.isArray(t))s.each(t,function(t,i){n||Ot.test(e)?r(e,i):en(e+"["+(typeof i=="object"||s.isArray(i)?t:"")+"]",i,n,r)});else if(!n&&t!=null&&typeof t=="object")for(var i in t)en(e+"["+i+"]",t[i],n,r);else r(e,t)}function tn(e,n,r){var i=e.contents,s=e.dataTypes,o=e.responseFields,u,a,f,l;for(a in o)a in r&&(n[o[a]]=r[a]);while(s[0]==="*")s.shift(),u===t&&(u=e.mimeType||n.getResponseHeader("content-type"));if(u)for(a in i)if(i[a]&&i[a].test(u)){s.unshift(a);break}if(s[0]in r)f=s[0];else{for(a in r){if(!s[0]||e.converters[a+" "+s[0]]){f=a;break}l||(l=a)}f=f||l}if(f)return f!==s[0]&&s.unshift(f),r[f]}function nn(e,n){e.dataFilter&&(n=e.dataFilter(n,e.dataType));var r=e.dataTypes,i={},o,u,a=r.length,f,l=r[0],c,h,p,d,v;for(o=1;o<a;o++){if(o===1)for(u in e.converters)typeof u=="string"&&(i[u.toLowerCase()]=e.converters[u]);c=l,l=r[o];if(l==="*")l=c;else if(c!=="*"&&c!==l){h=c+" "+l,p=i[h]||i["* "+l];if(!p){v=t;for(d in i){f=d.split(" ");if(f[0]===c||f[0]==="*"){v=i[f[1]+" "+l];if(v){d=i[d],d===!0?p=v:v===!0&&(p=d);break}}}}!p&&!v&&s.error("No conversion from "+h.replace(" "," to ")),p!==!0&&(n=p?p(n):v(d(n)))}}return n}function fn(){try{return new e.XMLHttpRequest}catch(t){}}function ln(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function bn(){return setTimeout(wn,0),yn=s.now()}function wn(){yn=t}function En(e,t){var n={};return s.each(gn.concat.apply([],gn.slice(0,t)),function(){n[this]=e}),n}function Sn(e){if(!cn[e]){var t=n.body,r=s("<"+e+">").appendTo(t),i=r.css("display");r.remove();if(i==="none"||i===""){hn||(hn=n.createElement("iframe"),hn.frameBorder=hn.width=hn.height=0),t.appendChild(hn);if(!pn||!hn.createElement)pn=(hn.contentWindow||hn.contentDocument).document,pn.write((n.compatMode==="CSS1Compat"?"<!doctype html>":"")+"<html><body>"),pn.close();r=pn.createElement(e),pn.body.appendChild(r),i=s.css(r,"display"),t.removeChild(hn)}cn[e]=i}return cn[e]}function Nn(e){return s.isWindow(e)?e:e.nodeType===9?e.defaultView||e.parentWindow:!1}var n=e.document,r=e.navigator,i=e.location,s=function(){function H(){if(i.isReady)return;try{n.documentElement.doScroll("left")}catch(e){setTimeout(H,1);return}i.ready()}var i=function(e,t){return new i.fn.init(e,t,u)},s=e.jQuery,o=e.$,u,a=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,f=/\S/,l=/^\s+/,c=/\s+$/,h=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,p=/^[\],:{}\s]*$/,d=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,v=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,m=/(?:^|:|,)(?:\s*\[)+/g,g=/(webkit)[ \/]([\w.]+)/,y=/(opera)(?:.*version)?[ \/]([\w.]+)/,b=/(msie) ([\w.]+)/,w=/(mozilla)(?:.*? rv:([\w.]+))?/,E=/-([a-z]|[0-9])/ig,S=/^-ms-/,x=function(e,t){return(t+"").toUpperCase()},T=r.userAgent,N,C,k,L=Object.prototype.toString,A=Object.prototype.hasOwnProperty,O=Array.prototype.push,M=Array.prototype.slice,_=String.prototype.trim,D=Array.prototype.indexOf,P={};return i.fn=i.prototype={constructor:i,init:function(e,r,s){var o,u,f,l;if(!e)return this;if(e.nodeType)return this.context=this[0]=e,this.length=1,this;if(e==="body"&&!r&&n.body)return this.context=n,this[0]=n.body,this.selector=e,this.length=1,this;if(typeof e=="string"){e.charAt(0)==="<"&&e.charAt(e.length-1)===">"&&e.length>=3?o=[null,e,null]:o=a.exec(e);if(o&&(o[1]||!r)){if(o[1])return r=r instanceof i?r[0]:r,l=r?r.ownerDocument||r:n,f=h.exec(e),f?i.isPlainObject(r)?(e=[n.createElement(f[1])],i.fn.attr.call(e,r,!0)):e=[l.createElement(f[1])]:(f=i.buildFragment([o[1]],[l]),e=(f.cacheable?i.clone(f.fragment):f.fragment).childNodes),i.merge(this,e);u=n.getElementById(o[2]);if(u&&u.parentNode){if(u.id!==o[2])return s.find(e);this.length=1,this[0]=u}return this.context=n,this.selector=e,this}return!r||r.jquery?(r||s).find(e):this.constructor(r).find(e)}return i.isFunction(e)?s.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),i.makeArray(e,this))},selector:"",jquery:"1.7.1",length:0,size:function(){return this.length},toArray:function(){return M.call(this,0)},get:function(e){return e==null?this.toArray():e<0?this[this.length+e]:this[e]},pushStack:function(e,t,n){var r=this.constructor();return i.isArray(e)?O.apply(r,e):i.merge(r,e),r.prevObject=this,r.context=this.context,t==="find"?r.selector=this.selector+(this.selector?" ":"")+n:t&&(r.selector=this.selector+"."+t+"("+n+")"),r},each:function(e,t){return i.each(this,e,t)},ready:function(e){return i.bindReady(),C.add(e),this},eq:function(e){return e=+e,e===-1?this.slice(e):this.slice(e,e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(M.apply(this,arguments),"slice",M.call(arguments).join(","))},map:function(e){return this.pushStack(i.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:O,sort:[].sort,splice:[].splice},i.fn.init.prototype=i.fn,i.extend=i.fn.extend=function(){var e,n,r,s,o,u,a=arguments[0]||{},f=1,l=arguments.length,c=!1;typeof a=="boolean"&&(c=a,a=arguments[1]||{},f=2),typeof a!="object"&&!i.isFunction(a)&&(a={}),l===f&&(a=this,--f);for(;f<l;f++)if((e=arguments[f])!=null)for(n in e){r=a[n],s=e[n];if(a===s)continue;c&&s&&(i.isPlainObject(s)||(o=i.isArray(s)))?(o?(o=!1,u=r&&i.isArray(r)?r:[]):u=r&&i.isPlainObject(r)?r:{},a[n]=i.extend(c,u,s)):s!==t&&(a[n]=s)}return a},i.extend({noConflict:function(t){return e.$===i&&(e.$=o),t&&e.jQuery===i&&(e.jQuery=s),i},isReady:!1,readyWait:1,holdReady:function(e){e?i.readyWait++:i.ready(!0)},ready:function(e){if(e===!0&&!--i.readyWait||e!==!0&&!i.isReady){if(!n.body)return setTimeout(i.ready,1);i.isReady=!0;if(e!==!0&&--i.readyWait>0)return;C.fireWith(n,[i]),i.fn.trigger&&i(n).trigger("ready").off("ready")}},bindReady:function(){if(C)return;C=i.Callbacks("once memory");if(n.readyState==="complete")return setTimeout(i.ready,1);if(n.addEventListener)n.addEventListener("DOMContentLoaded",k,!1),e.addEventListener("load",i.ready,!1);else if(n.attachEvent){n.attachEvent("onreadystatechange",k),e.attachEvent("onload",i.ready);var t=!1;try{t=e.frameElement==null}catch(r){}n.documentElement.doScroll&&t&&H()}},isFunction:function(e){return i.type(e)==="function"},isArray:Array.isArray||function(e){return i.type(e)==="array"},isWindow:function(e){return e&&typeof e=="object"&&"setInterval"in e},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return e==null?String(e):P[L.call(e)]||"object"},isPlainObject:function(e){if(!e||i.type(e)!=="object"||e.nodeType||i.isWindow(e))return!1;try{if(e.constructor&&!A.call(e,"constructor")&&!A.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}var r;for(r in e);return r===t||A.call(e,r)},isEmptyObject:function(e){for(var t in e)return!1;return!0},error:function(e){throw new Error(e)},parseJSON:function(t){if(typeof t!="string"||!t)return null;t=i.trim(t);if(e.JSON&&e.JSON.parse)return e.JSON.parse(t);if(p.test(t.replace(d,"@").replace(v,"]").replace(m,"")))return(new Function("return "+t))();i.error("Invalid JSON: "+t)},parseXML:function(n){var r,s;try{e.DOMParser?(s=new DOMParser,r=s.parseFromString(n,"text/xml")):(r=new ActiveXObject("Microsoft.XMLDOM"),r.async="false",r.loadXML(n))}catch(o){r=t}return(!r||!r.documentElement||r.getElementsByTagName("parsererror").length)&&i.error("Invalid XML: "+n),r},noop:function(){},globalEval:function(t){t&&f.test(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(S,"ms-").replace(E,x)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toUpperCase()===t.toUpperCase()},each:function(e,n,r){var s,o=0,u=e.length,a=u===t||i.isFunction(e);if(r){if(a){for(s in e)if(n.apply(e[s],r)===!1)break}else for(;o<u;)if(n.apply(e[o++],r)===!1)break}else if(a){for(s in e)if(n.call(e[s],s,e[s])===!1)break}else for(;o<u;)if(n.call(e[o],o,e[o++])===!1)break;return e},trim:_?function(e){return e==null?"":_.call(e)}:function(e){return e==null?"":e.toString().replace(l,"").replace(c,"")},makeArray:function(e,t){var n=t||[];if(e!=null){var r=i.type(e);e.length==null||r==="string"||r==="function"||r==="regexp"||i.isWindow(e)?O.call(n,e):i.merge(n,e)}return n},inArray:function(e,t,n){var r;if(t){if(D)return D.call(t,e,n);r=t.length,n=n?n<0?Math.max(0,r+n):n:0;for(;n<r;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,n){var r=e.length,i=0;if(typeof n.length=="number")for(var s=n.length;i<s;i++)e[r++]=n[i];else while(n[i]!==t)e[r++]=n[i++];return e.length=r,e},grep:function(e,t,n){var r=[],i;n=!!n;for(var s=0,o=e.length;s<o;s++)i=!!t(e[s],s),n!==i&&r.push(e[s]);return r},map:function(e,n,r){var s,o,u=[],a=0,f=e.length,l=e instanceof i||f!==t&&typeof f=="number"&&(f>0&&e[0]&&e[f-1]||f===0||i.isArray(e));if(l)for(;a<f;a++)s=n(e[a],a,r),s!=null&&(u[u.length]=s);else for(o in e)s=n(e[o],o,r),s!=null&&(u[u.length]=s);return u.concat.apply([],u)},guid:1,proxy:function(e,n){if(typeof n=="string"){var r=e[n];n=e,e=r}if(!i.isFunction(e))return t;var s=M.call(arguments,2),o=function(){return e.apply(n,s.concat(M.call(arguments)))};return o.guid=e.guid=e.guid||o.guid||i.guid++,o},access:function(e,n,r,s,o,u){var a=e.length;if(typeof n=="object"){for(var f in n)i.access(e,f,n[f],s,o,r);return e}if(r!==t){s=!u&&s&&i.isFunction(r);for(var l=0;l<a;l++)o(e[l],n,s?r.call(e[l],l,o(e[l],n)):r,u);return e}return a?o(e[0],n):t},now:function(){return(new Date).getTime()},uaMatch:function(e){e=e.toLowerCase();var t=g.exec(e)||y.exec(e)||b.exec(e)||e.indexOf("compatible")<0&&w.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}},sub:function(){function e(t,n){return new e.fn.init(t,n)}i.extend(!0,e,this),e.superclass=this,e.fn=e.prototype=this(),e.fn.constructor=e,e.sub=this.sub,e.fn.init=function(r,s){return s&&s instanceof i&&!(s instanceof e)&&(s=e(s)),i.fn.init.call(this,r,s,t)},e.fn.init.prototype=e.fn;var t=e(n);return e},browser:{}}),i.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(e,t){P["[object "+t+"]"]=t.toLowerCase()}),N=i.uaMatch(T),N.browser&&(i.browser[N.browser]=!0,i.browser.version=N.version),i.browser.webkit&&(i.browser.safari=!0),f.test("Â ")&&(l=/^[\s\xA0]+/,c=/[\s\xA0]+$/),u=i(n),n.addEventListener?k=function(){n.removeEventListener("DOMContentLoaded",k,!1),i.ready()}:n.attachEvent&&(k=function(){n.readyState==="complete"&&(n.detachEvent("onreadystatechange",k),i.ready())}),i}(),o={};s.Callbacks=function(e){e=e?o[e]||u(e):{};var n=[],r=[],i,a,f,l,c,h=function(t){var r,i,o,u,a;for(r=0,i=t.length;r<i;r++)o=t[r],u=s.type(o),u==="array"?h(o):u==="function"&&(!e.unique||!d.has(o))&&n.push(o)},p=function(t,s){s=s||[],i=!e.memory||[t,s],a=!0,c=f||0,f=0,l=n.length;for(;n&&c<l;c++)if(n[c].apply(t,s)===!1&&e.stopOnFalse){i=!0;break}a=!1,n&&(e.once?i===!0?d.disable():n=[]:r&&r.length&&(i=r.shift(),d.fireWith(i[0],i[1])))},d={add:function(){if(n){var e=n.length;h(arguments),a?l=n.length:i&&i!==!0&&(f=e,p(i[0],i[1]))}return this},remove:function(){if(n){var t=arguments,r=0,i=t.length;for(;r<i;r++)for(var s=0;s<n.length;s++)if(t[r]===n[s]){a&&s<=l&&(l--,s<=c&&c--),n.splice(s--,1);if(e.unique)break}}return this},has:function(e){if(n){var t=0,r=n.length;for(;t<r;t++)if(e===n[t])return!0}return!1},empty:function(){return n=[],this},disable:function(){return n=r=i=t,this},disabled:function(){return!n},lock:function(){return r=t,(!i||i===!0)&&d.disable(),this},locked:function(){return!r},fireWith:function(t,n){return r&&(a?e.once||r.push([t,n]):(!e.once||!i)&&p(t,n)),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!i}};return d};var a=[].slice;s.extend({Deferred:function(e){var t=s.Callbacks("once memory"),n=s.Callbacks("once memory"),r=s.Callbacks("memory"),i="pending",o={resolve:t,reject:n,notify:r},u={done:t.add,fail:n.add,progress:r.add,state:function(){return i},isResolved:t.fired,isRejected:n.fired,then:function(e,t,n){return a.done(e).fail(t).progress(n),this},always:function(){return a.done.apply(a,arguments).fail.apply(a,arguments),this},pipe:function(e,t,n){return s.Deferred(function(r){s.each({done:[e,"resolve"],fail:[t,"reject"],progress:[n,"notify"]},function(e,t){var n=t[0],i=t[1],o;s.isFunction(n)?a[e](function(){o=n.apply(this,arguments),o&&s.isFunction(o.promise)?o.promise().then(r.resolve,r.reject,r.notify):r[i+"With"](this===a?r:this,[o])}):a[e](r[i])})}).promise()},promise:function(e){if(e==null)e=u;else for(var t in u)e[t]=u[t];return e}},a=u.promise({}),f;for(f in o)a[f]=o[f].fire,a[f+"With"]=o[f].fireWith;return a.done(function(){i="resolved"},n.disable,r.lock).fail(function(){i="rejected"},t.disable,r.lock),e&&e.call(a,a),a},when:function(e){function c(e){return function(n){t[e]=arguments.length>1?a.call(arguments,0):n,--o||f.resolveWith(f,t)}}function h(e){return function(t){i[e]=arguments.length>1?a.call(arguments,0):t,f.notifyWith(l,i)}}var t=a.call(arguments,0),n=0,r=t.length,i=new Array(r),o=r,u=r,f=r<=1&&e&&s.isFunction(e.promise)?e:s.Deferred(),l=f.promise();if(r>1){for(;n<r;n++)t[n]&&t[n].promise&&s.isFunction(t[n].promise)?t[n].promise().then(c(n),f.reject,h(n)):--o;o||f.resolveWith(f,t)}else f!==e&&f.resolveWith(f,r?[e]:[]);return l}}),s.support=function(){var t,r,i,o,u,a,f,l,c,h,p,d,v,m=n.createElement("div"),g=n.documentElement;m.setAttribute("className","t"),m.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>",r=m.getElementsByTagName("*"),i=m.getElementsByTagName("a")[0];if(!r||!r.length||!i)return{};o=n.createElement("select"),u=o.appendChild(n.createElement("option")),a=m.getElementsByTagName("input")[0],t={leadingWhitespace:m.firstChild.nodeType===3,tbody:!m.getElementsByTagName("tbody").length,htmlSerialize:!!m.getElementsByTagName("link").length,style:/top/.test(i.getAttribute("style")),hrefNormalized:i.getAttribute("href")==="/a",opacity:/^0.55/.test(i.style.opacity),cssFloat:!!i.style.cssFloat,checkOn:a.value==="on",optSelected:u.selected,getSetAttribute:m.className!=="t",enctype:!!n.createElement("form").enctype,html5Clone:n.createElement("nav").cloneNode(!0).outerHTML!=="<:nav></:nav>",submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0},a.checked=!0,t.noCloneChecked=a.cloneNode(!0).checked,o.disabled=!0,t.optDisabled=!u.disabled;try{delete m.test}catch(y){t.deleteExpando=!1}!m.addEventListener&&m.attachEvent&&m.fireEvent&&(m.attachEvent("onclick",function(){t.noCloneEvent=!1}),m.cloneNode(!0).fireEvent("onclick")),a=n.createElement("input"),a.value="t",a.setAttribute("type","radio"),t.radioValue=a.value==="t",a.setAttribute("checked","checked"),m.appendChild(a),l=n.createDocumentFragment(),l.appendChild(m.lastChild),t.checkClone=l.cloneNode(!0).cloneNode(!0).lastChild.checked,t.appendChecked=a.checked,l.removeChild(a),l.appendChild(m),m.innerHTML="",e.getComputedStyle&&(f=n.createElement("div"),f.style.width="0",f.style.marginRight="0",m.style.width="2px",m.appendChild(f),t.reliableMarginRight=(parseInt((e.getComputedStyle(f,null)||{marginRight:0}).marginRight,10)||0)===0);if(m.attachEvent)for(d in{submit:1,change:1,focusin:1})p="on"+d,v=p in m,v||(m.setAttribute(p,"return;"),v=typeof m[p]=="function"),t[d+"Bubbles"]=v;return l.removeChild(m),l=o=u=f=m=a=null,s(function(){var e,r,i,o,u,a,f,l,h,p,d,g=n.getElementsByTagName("body")[0];if(!g)return;f=1,l="position:absolute;top:0;left:0;width:1px;height:1px;margin:0;",h="visibility:hidden;border:0;",p="style='"+l+"border:5px solid #000;padding:0;'",d="<div "+p+"><div></div></div>"+"<table "+p+" cellpadding='0' cellspacing='0'>"+"<tr><td></td></tr></table>",e=n.createElement("div"),e.style.cssText=h+"width:0;height:0;position:static;top:0;margin-top:"+f+"px",g.insertBefore(e,g.firstChild),m=n.createElement("div"),e.appendChild(m),m.innerHTML="<table><tr><td style='padding:0;border:0;display:none'></td><td>t</td></tr></table>",c=m.getElementsByTagName("td"),v=c[0].offsetHeight===0,c[0].style.display="",c[1].style.display="none",t.reliableHiddenOffsets=v&&c[0].offsetHeight===0,m.innerHTML="",m.style.width=m.style.paddingLeft="1px",s.boxModel=t.boxModel=m.offsetWidth===2,typeof m.style.zoom!="undefined"&&(m.style.display="inline",m.style.zoom=1,t.inlineBlockNeedsLayout=m.offsetWidth===2,m.style.display="",m.innerHTML="<div style='width:4px;'></div>",t.shrinkWrapBlocks=m.offsetWidth!==2),m.style.cssText=l+h,m.innerHTML=d,r=m.firstChild,i=r.firstChild,u=r.nextSibling.firstChild.firstChild,a={doesNotAddBorder:i.offsetTop!==5,doesAddBorderForTableAndCells:u.offsetTop===5},i.style.position="fixed",i.style.top="20px",a.fixedPosition=i.offsetTop===20||i.offsetTop===15,i.style.position=i.style.top="",r.style.overflow="hidden",r.style.position="relative",a.subtractsBorderForOverflowNotVisible=i.offsetTop===-5,a.doesNotIncludeMarginInBodyOffset=g.offsetTop!==f,g.removeChild(e),m=e=null,s.extend(t,a)}),t}();var f=/^(?:\{.*\}|\[.*\])$/,l=/([A-Z])/g;s.extend({cache:{},uuid:0,expando:"jQuery"+(s.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(e){return e=e.nodeType?s.cache[e[s.expando]]:e[s.expando],!!e&&!h(e)},data:function(e,n,r,i){if(!s.acceptData(e))return;var o,u,a,f=s.expando,l=typeof n=="string",c=e.nodeType,h=c?s.cache:e,p=c?e[f]:e[f]&&f,d=n==="events";if((!p||!h[p]||!d&&!i&&!h[p].data)&&l&&r===t)return;p||(c?e[f]=p=++s.uuid:p=f),h[p]||(h[p]={},c||(h[p].toJSON=s.noop));if(typeof n=="object"||typeof n=="function")i?h[p]=s.extend(h[p],n):h[p].data=s.extend(h[p].data,n);return o=u=h[p],i||(u.data||(u.data={}),u=u.data),r!==t&&(u[s.camelCase(n)]=r),d&&!u[n]?o.events:(l?(a=u[n],a==null&&(a=u[s.camelCase(n)])):a=u,a)},removeData:function(e,t,n){if(!s.acceptData(e))return;var r,i,o,u=s.expando,a=e.nodeType,f=a?s.cache:e,l=a?e[u]:u;if(!f[l])return;if(t){r=n?f[l]:f[l].data;if(r){s.isArray(t)||(t in r?t=[t]:(t=s.camelCase(t),t in r?t=[t]:t=t.split(" ")));for(i=0,o=t.length;i<o;i++)delete r[t[i]];if(!(n?h:s.isEmptyObject)(r))return}}if(!n){delete f[l].data;if(!h(f[l]))return}s.support.deleteExpando||!f.setInterval?delete f[l]:f[l]=null,a&&(s.support.deleteExpando?delete e[u]:e.removeAttribute?e.removeAttribute(u):e[u]=null)},_data:function(e,t,n){return s.data(e,t,n,!0)},acceptData:function(e){if(e.nodeName){var t=s.noData[e.nodeName.toLowerCase()];if(t)return t!==!0&&e.getAttribute("classid")===t}return!0}}),s.fn.extend({data:function(e,n){var r,i,o,u=null;if(typeof e=="undefined"){if(this.length){u=s.data(this[0]);if(this[0].nodeType===1&&!s._data(this[0],"parsedAttrs")){i=this[0].attributes;for(var a=0,f=i.length;a<f;a++)o=i[a].name,o.indexOf("data-")===0&&(o=s.camelCase(o.substring(5)),c(this[0],o,u[o]));s._data(this[0],"parsedAttrs",!0)}}return u}return typeof e=="object"?this.each(function(){s.data(this,e)}):(r=e.split("."),r[1]=r[1]?"."+r[1]:"",n===t?(u=this.triggerHandler("getData"+r[1]+"!",[r[0]]),u===t&&this.length&&(u=s.data(this[0],e),u=c(this[0],e,u)),u===t&&r[1]?this.data(r[0]):u):this.each(function(){var t=s(this),i=[r[0],n];t.triggerHandler("setData"+r[1]+"!",i),s.data(this,e,n),t.triggerHandler("changeData"+r[1]+"!",i)}))},removeData:function(e){return this.each(function(){s.removeData(this,e)})}}),s.extend({_mark:function(e,t){e&&(t=(t||"fx")+"mark",s._data(e,t,(s._data(e,t)||0)+1))},_unmark:function(e,t,n){e!==!0&&(n=t,t=e,e=!1);if(t){n=n||"fx";var r=n+"mark",i=e?0:(s._data(t,r)||1)-1;i?s._data(t,r,i):(s.removeData(t,r,!0),p(t,n,"mark"))}},queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=s._data(e,t),n&&(!r||s.isArray(n)?r=s._data(e,t,s.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=s.queue(e,t),r=n.shift(),i={};r==="inprogress"&&(r=n.shift()),r&&(t==="fx"&&n.unshift("inprogress"),s._data(e,t+".run",i),r.call(e,function(){s.dequeue(e,t)},i)),n.length||(s.removeData(e,t+"queue "+t+".run",!0),p(e,t,"queue"))}}),s.fn.extend({queue:function(e,n){return typeof e!="string"&&(n=e,e="fx"),n===t?s.queue(this[0],e):this.each(function(){var t=s.queue(this,e,n);e==="fx"&&t[0]!=="inprogress"&&s.dequeue(this,e)})},dequeue:function(e){return this.each(function(){s.dequeue(this,e)})},delay:function(e,t){return e=s.fx?s.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){function h(){--u||r.resolveWith(i,[i])}typeof e!="string"&&(n=e,e=t),e=e||"fx";var r=s.Deferred(),i=this,o=i.length,u=1,a=e+"defer",f=e+"queue",l=e+"mark",c;while(o--)if(c=s.data(i[o],a,t,!0)||(s.data(i[o],f,t,!0)||s.data(i[o],l,t,!0))&&s.data(i[o],a,s.Callbacks("once memory"),!0))u++,c.add(h);return h(),r.promise()}});var d=/[\n\t\r]/g,v=/\s+/,m=/\r/g,g=/^(?:button|input)$/i,y=/^(?:button|input|object|select|textarea)$/i,b=/^a(?:rea)?$/i,w=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,E=s.support.getSetAttribute,S,x,T;s.fn.extend({attr:function(e,t){return s.access(this,e,t,!0,s.attr)},removeAttr:function(e){return this.each(function(){s.removeAttr(this,e)})},prop:function(e,t){return s.access(this,e,t,!0,s.prop)},removeProp:function(e){return e=s.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(n){}})},addClass:function(e){var t,n,r,i,o,u,a;if(s.isFunction(e))return this.each(function(t){s(this).addClass(e.call(this,t,this.className))});if(e&&typeof e=="string"){t=e.split(v);for(n=0,r=this.length;n<r;n++){i=this[n];if(i.nodeType===1)if(!i.className&&t.length===1)i.className=e;else{o=" "+i.className+" ";for(u=0,a=t.length;u<a;u++)~o.indexOf(" "+t[u]+" ")||(o+=t[u]+" ");i.className=s.trim(o)}}}return this},removeClass:function(e){var n,r,i,o,u,a,f;if(s.isFunction(e))return this.each(function(t){s(this).removeClass(e.call(this,t,this.className))});if(e&&typeof e=="string"||e===t){n=(e||"").split(v);for(r=0,i=this.length;r<i;r++){o=this[r];if(o.nodeType===1&&o.className)if(e){u=(" "+o.className+" ").replace(d," ");for(a=0,f=n.length;a<f;a++)u=u.replace(" "+n[a]+" "," ");o.className=s.trim(u)}else o.className=""}}return this},toggleClass:function(e,t){var n=typeof e,r=typeof t=="boolean";return s.isFunction(e)?this.each(function(n){s(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if(n==="string"){var i,o=0,u=s(this),a=t,f=e.split(v);while(i=f[o++])a=r?a:!u.hasClass(i),u[a?"addClass":"removeClass"](i)}else if(n==="undefined"||n==="boolean")this.className&&s._data(this,"__className__",this.className),this.className=this.className||e===!1?"":s._data(this,"__className__")||""})},hasClass:function(e){var t=" "+e+" ",n=0,r=this.length;for(;n<r;n++)if(this[n].nodeType===1&&(" "+this[n].className+" ").replace(d," ").indexOf(t)>-1)return!0;return!1},val:function(e){var n,r,i,o=this[0];if(!arguments.length){if(o)return n=s.valHooks[o.nodeName.toLowerCase()]||s.valHooks[o.type],n&&"get"in n&&(r=n.get(o,"value"))!==t?r:(r=o.value,typeof r=="string"?r.replace(m,""):r==null?"":r);return}return i=s.isFunction(e),this.each(function(r){var o=s(this),u;if(this.nodeType!==1)return;i?u=e.call(this,r,o.val()):u=e,u==null?u="":typeof u=="number"?u+="":s.isArray(u)&&(u=s.map(u,function(e){return e==null?"":e+""})),n=s.valHooks[this.nodeName.toLowerCase()]||s.valHooks[this.type];if(!n||!("set"in n)||n.set(this,u,"value")===t)this.value=u})}}),s.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){var t,n,r,i,o=e.selectedIndex,u=[],a=e.options,f=e.type==="select-one";if(o<0)return null;n=f?o:0,r=f?o+1:a.length;for(;n<r;n++){i=a[n];if(i.selected&&(s.support.optDisabled?!i.disabled:i.getAttribute("disabled")===null)&&(!i.parentNode.disabled||!s.nodeName(i.parentNode,"optgroup"))){t=s(i).val();if(f)return t;u.push(t)}}return f&&!u.length&&a.length?s(a[o]).val():u},set:function(e,t){var n=s.makeArray(t);return s(e).find("option").each(function(){this.selected=s.inArray(s(this).val(),n)>=0}),n.length||(e.selectedIndex=-1),n}}},attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attr:function(e,n,r,i){var o,u,a,f=e.nodeType;if(!e||f===3||f===8||f===2)return;if(i&&n in s.attrFn)return s(e)[n](r);if(typeof e.getAttribute=="undefined")return s.prop(e,n,r);a=f!==1||!s.isXMLDoc(e),a&&(n=n.toLowerCase(),u=s.attrHooks[n]||(w.test(n)?x:S));if(r!==t){if(r===null){s.removeAttr(e,n);return}return u&&"set"in u&&a&&(o=u.set(e,r,n))!==t?o:(e.setAttribute(n,""+r),r)}return u&&"get"in u&&a&&(o=u.get(e,n))!==null?o:(o=e.getAttribute(n),o===null?t:o)},removeAttr:function(e,t){var n,r,i,o,u=0;if(t&&e.nodeType===1){r=t.toLowerCase().split(v),o=r.length;for(;u<o;u++)i=r[u],i&&(n=s.propFix[i]||i,s.attr(e,i,""),e.removeAttribute(E?i:n),w.test(i)&&n in e&&(e[n]=!1))}},attrHooks:{type:{set:function(e,t){if(g.test(e.nodeName)&&e.parentNode)s.error("type property can't be changed");else if(!s.support.radioValue&&t==="radio"&&s.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}},value:{get:function(e,t){return S&&s.nodeName(e,"button")?S.get(e,t):t in e?e.value:null},set:function(e,t,n){if(S&&s.nodeName(e,"button"))return S.set(e,t,n);e.value=t}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(e,n,r){var i,o,u,a=e.nodeType;if(!e||a===3||a===8||a===2)return;return u=a!==1||!s.isXMLDoc(e),u&&(n=s.propFix[n]||n,o=s.propHooks[n]),r!==t?o&&"set"in o&&(i=o.set(e,r,n))!==t?i:e[n]=r:o&&"get"in o&&(i=o.get(e,n))!==null?i:e[n]},propHooks:{tabIndex:{get:function(e){var n=e.getAttributeNode("tabindex");return n&&n.specified?parseInt(n.value,10):y.test(e.nodeName)||b.test(e.nodeName)&&e.href?0:t}}}}),s.attrHooks.tabindex=s.propHooks.tabIndex,x={get:function(e,n){var r,i=s.prop(e,n);return i===!0||typeof i!="boolean"&&(r=e.getAttributeNode(n))&&r.nodeValue!==!1?n.toLowerCase():t},set:function(e,t,n){var r;return t===!1?s.removeAttr(e,n):(r=s.propFix[n]||n,r in e&&(e[r]=!0),e.setAttribute(n,n.toLowerCase())),n}},E||(T={name:!0,id:!0},S=s.valHooks.button={get:function(e,n){var r;return r=e.getAttributeNode(n),r&&(T[n]?r.nodeValue!=="":r.specified)?r.nodeValue:t},set:function(e,t,r){var i=e.getAttributeNode(r);return i||(i=n.createAttribute(r),e.setAttributeNode(i)),i.nodeValue=t+""}},s.attrHooks.tabindex.set=S.set,s.each(["width","height"],function(e,t){s.attrHooks[t]=s.extend(s.attrHooks[t],{set:function(e,n){if(n==="")return e.setAttribute(t,"auto"),n}})}),s.attrHooks.contenteditable={get:S.get,set:function(e,t,n){t===""&&(t="false"),S.set(e,t,n)}}),s.support.hrefNormalized||s.each(["href","src","width","height"],function(e,n){s.attrHooks[n]=s.extend(s.attrHooks[n],{get:function(e){var r=e.getAttribute(n,2);return r===null?t:r}})}),s.support.style||(s.attrHooks.style={get:function(e){return e.style.cssText.toLowerCase()||t},set:function(e,t){return e.style.cssText=""+t}}),s.support.optSelected||(s.propHooks.selected=s.extend(s.propHooks.selected,{get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}})),s.support.enctype||(s.propFix.enctype="encoding"),s.support.checkOn||s.each(["radio","checkbox"],function(){s.valHooks[this]={get:function(e){return e.getAttribute("value")===null?"on":e.value}}}),s.each(["radio","checkbox"],function(){s.valHooks[this]=s.extend(s.valHooks[this],{set:function(e,t){if(s.isArray(t))return e.checked=s.inArray(s(e).val(),t)>=0}})});var N=/^(?:textarea|input|select)$/i,C=/^([^\.]*)?(?:\.(.+))?$/,k=/\bhover(\.\S+)?\b/,L=/^key/,A=/^(?:mouse|contextmenu)|click/,O=/^(?:focusinfocus|focusoutblur)$/,M=/^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/,_=function(e){var t=M.exec(e);return t&&(t[1]=(t[1]||"").toLowerCase(),t[3]=t[3]&&new RegExp("(?:^|\\s)"+t[3]+"(?:\\s|$)")),t},D=function(e,t){var n=e.attributes||{};return(!t[1]||e.nodeName.toLowerCase()===t[1])&&(!t[2]||(n.id||{}).value===t[2])&&(!t[3]||t[3].test((n["class"]||{}).value))},P=function(e){return s.event.special.hover?e:e.replace(k,"mouseenter$1 mouseleave$1")};s.event={add:function(e,n,r,i,o){var u,a,f,l,c,h,p,d,v,m,g,y;if(e.nodeType===3||e.nodeType===8||!n||!r||!(u=s._data(e)))return;r.handler&&(v=r,r=v.handler),r.guid||(r.guid=s.guid++),f=u.events,f||(u.events=f={}),a=u.handle,a||(u.handle=a=function(e){return typeof s=="undefined"||!!e&&s.event.triggered===e.type?t:s.event.dispatch.apply(a.elem,arguments)},a.elem=e),n=s.trim(P(n)).split(" ");for(l=0;l<n.length;l++){c=C.exec(n[l])||[],h=c[1],p=(c[2]||"").split(".").sort(),y=s.event.special[h]||{},h=(o?y.delegateType:y.bindType)||h,y=s.event.special[h]||{},d=s.extend({type:h,origType:c[1],data:i,handler:r,guid:r.guid,selector:o,quick:_(o),namespace:p.join(".")},v),g=f[h];if(!g){g=f[h]=[],g.delegateCount=0;if(!y.setup||y.setup.call(e,i,p,a)===!1)e.addEventListener?e.addEventListener(h,a,!1):e.attachEvent&&e.attachEvent("on"+h,a)}y.add&&(y.add.call(e,d),d.handler.guid||(d.handler.guid=r.guid)),o?g.splice(g.delegateCount++,0,d):g.push(d),s.event.global[h]=!0}e=null},global:{},remove:function(e,t,n,r,i){var o=s.hasData(e)&&s._data(e),u,a,f,l,c,h,p,d,v,m,g,y;if(!o||!(d=o.events))return;t=s.trim(P(t||"")).split(" ");for(u=0;u<t.length;u++){a=C.exec(t[u])||[],f=l=a[1],c=a[2];if(!f){for(f in d)s.event.remove(e,f+t[u],n,r,!0);continue}v=s.event.special[f]||{},f=(r?v.delegateType:v.bindType)||f,g=d[f]||[],h=g.length,c=c?new RegExp("(^|\\.)"+c.split(".").sort().join("\\.(?:.*\\.)?")+"(\\.|$)"):null;for(p=0;p<g.length;p++)y=g[p],(i||l===y.origType)&&(!n||n.guid===y.guid)&&(!c||c.test(y.namespace))&&(!r||r===y.selector||r==="**"&&y.selector)&&(g.splice(p--,1),y.selector&&g.delegateCount--,v.remove&&v.remove.call(e,y));g.length===0&&h!==g.length&&((!v.teardown||v.teardown.call(e,c)===!1)&&s.removeEvent(e,f,o.handle),delete d[f])}s.isEmptyObject(d)&&(m=o.handle,m&&(m.elem=null),s.removeData(e,["events","handle"],!0))},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(n,r,i,o){if(!i||i.nodeType!==3&&i.nodeType!==8){var u=n.type||n,a=[],f,l,c,h,p,d,v,m,g,y;if(O.test(u+s.event.triggered))return;u.indexOf("!")>=0&&(u=u.slice(0,-1),l=!0),u.indexOf(".")>=0&&(a=u.split("."),u=a.shift(),a.sort());if((!i||s.event.customEvent[u])&&!s.event.global[u])return;n=typeof n=="object"?n[s.expando]?n:new s.Event(u,n):new s.Event(u),n.type=u,n.isTrigger=!0,n.exclusive=l,n.namespace=a.join("."),n.namespace_re=n.namespace?new RegExp("(^|\\.)"+a.join("\\.(?:.*\\.)?")+"(\\.|$)"):null,d=u.indexOf(":")<0?"on"+u:"";if(!i){f=s.cache;for(c in f)f[c].events&&f[c].events[u]&&s.event.trigger(n,r,f[c].handle.elem,!0);return}n.result=t,n.target||(n.target=i),r=r!=null?s.makeArray(r):[],r.unshift(n),v=s.event.special[u]||{};if(v.trigger&&v.trigger.apply(i,r)===!1)return;g=[[i,v.bindType||u]];if(!o&&!v.noBubble&&!s.isWindow(i)){y=v.delegateType||u,h=O.test(y+u)?i:i.parentNode,p=null;for(;h;h=h.parentNode)g.push([h,y]),p=h;p&&p===i.ownerDocument&&g.push([p.defaultView||p.parentWindow||e,y])}for(c=0;c<g.length&&!n.isPropagationStopped();c++)h=g[c][0],n.type=g[c][1],m=(s._data(h,"events")||{})[n.type]&&s._data(h,"handle"),m&&m.apply(h,r),m=d&&h[d],m&&s.acceptData(h)&&m.apply(h,r)===!1&&n.preventDefault();return n.type=u,!o&&!n.isDefaultPrevented()&&(!v._default||v._default.apply(i.ownerDocument,r)===!1)&&(u!=="click"||!s.nodeName(i,"a"))&&s.acceptData(i)&&d&&i[u]&&(u!=="focus"&&u!=="blur"||n.target.offsetWidth!==0)&&!s.isWindow(i)&&(p=i[d],p&&(i[d]=null),s.event.triggered=u,i[u](),s.event.triggered=t,p&&(i[d]=p)),n.result}return},dispatch:function(n){n=s.event.fix(n||e.event);var r=(s._data(this,"events")||{})[n.type]||[],i=r.delegateCount,o=[].slice.call(arguments,0),u=!n.exclusive&&!n.namespace,a=[],f,l,c,h,p,d,v,m,g,y,b;o[0]=n,n.delegateTarget=this;if(i&&!n.target.disabled&&(!n.button||n.type!=="click")){h=s(this),h.context=this.ownerDocument||this;for(c=n.target;c!=this;c=c.parentNode||this){d={},m=[],h[0]=c;for(f=0;f<i;f++)g=r[f],y=g.selector,d[y]===t&&(d[y]=g.quick?D(c,g.quick):h.is(y)),d[y]&&m.push(g);m.length&&a.push({elem:c,matches:m})}}r.length>i&&a.push({elem:this,matches:r.slice(i)});for(f=0;f<a.length&&!n.isPropagationStopped();f++){v=a[f],n.currentTarget=v.elem;for(l=0;l<v.matches.length&&!n.isImmediatePropagationStopped();l++){g=v.matches[l];if(u||!n.namespace&&!g.namespace||n.namespace_re&&n.namespace_re.test(g.namespace))n.data=g.data,n.handleObj=g,p=((s.event.special[g.origType]||{}).handle||g.handler).apply(v.elem,o),p!==t&&(n.result=p,p===!1&&(n.preventDefault(),n.stopPropagation()))}}return n.result},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return e.which==null&&(e.which=t.charCode!=null?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,r){var i,s,o,u=r.button,a=r.fromElement;return e.pageX==null&&r.clientX!=null&&(i=e.target.ownerDocument||n,s=i.documentElement,o=i.body,e.pageX=r.clientX+(s&&s.scrollLeft||o&&o.scrollLeft||0)-(s&&s.clientLeft||o&&o.clientLeft||0),e.pageY=r.clientY+(s&&s.scrollTop||o&&o.scrollTop||0)-(s&&s.clientTop||o&&o.clientTop||0)),!e.relatedTarget&&a&&(e.relatedTarget=a===e.target?r.toElement:a),!e.which&&u!==t&&(e.which=u&1?1:u&2?3:u&4?2:0),e}},fix:function(e){if(e[s.expando])return e;var r,i,o=e,u=s.event.fixHooks[e.type]||{},a=u.props?this.props.concat(u.props):this.props;e=s.Event(o);for(r=a.length;r;)i=a[--r],e[i]=o[i];return e.target||(e.target=o.srcElement||n),e.target.nodeType===3&&(e.target=e.target.parentNode),e.metaKey===t&&(e.metaKey=e.ctrlKey),u.filter?u.filter(e,o):e},special:{ready:{setup:s.bindReady},load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(e,t,n){s.isWindow(this)&&(this.onbeforeunload=n)},teardown:function(e,t){this.onbeforeunload===t&&(this.onbeforeunload=null)}}},simulate:function(e,t,n,r){var i=s.extend(new s.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?s.event.trigger(i,null,t):s.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},s.event.handle=s.event.dispatch,s.removeEvent=n.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){e.detachEvent&&e.detachEvent("on"+t,n)},s.Event=function(e,t){if(!(this instanceof s.Event))return new s.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?B:H):this.type=e,t&&s.extend(this,t),this.timeStamp=e&&e.timeStamp||s.now(),this[s.expando]=!0},s.Event.prototype={preventDefault:function(){this.isDefaultPrevented=B;var e=this.originalEvent;if(!e)return;e.preventDefault?e.preventDefault():e.returnValue=!1},stopPropagation:function(){this.isPropagationStopped=B;var e=this.originalEvent;if(!e)return;e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=B,this.stopPropagation()},isDefaultPrevented:H,isPropagationStopped:H,isImmediatePropagationStopped:H},s.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){s.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n=this,r=e.relatedTarget,i=e.handleObj,o=i.selector,u;if(!r||r!==n&&!s.contains(n,r))e.type=i.origType,u=i.handler.apply(this,arguments),e.type=t;return u}}}),s.support.submitBubbles||(s.event.special.submit={setup:function(){if(s.nodeName(this,"form"))return!1;s.event.add(this,"click._submit keypress._submit",function(e){var n=e.target,r=s.nodeName(n,"input")||s.nodeName(n,"button")?n.form:t;r&&!r._submit_attached&&(s.event.add(r,"submit._submit",function(e){this.parentNode&&!e.isTrigger&&s.event.simulate("submit",this.parentNode,e,!0)}),r._submit_attached=!0)})},teardown:function(){if(s.nodeName(this,"form"))return!1;s.event.remove(this,"._submit")}}),s.support.changeBubbles||(s.event.special.change={setup:function(){if(N.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio")s.event.add(this,"propertychange._change",function(e){e.originalEvent.propertyName==="checked"&&(this._just_changed=!0)}),s.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1,s.event.simulate("change",this,e,!0))});return!1}s.event.add(this,"beforeactivate._change",function(e){var t=e.target;N.test(t.nodeName)&&!t._change_attached&&(s.event.add(t,"change._change",function(e){this.parentNode&&!e.isSimulated&&!e.isTrigger&&s.event.simulate("change",this.parentNode,e,!0)}),t._change_attached=!0)})},handle:function(e){var t=e.target;if(this!==t||e.isSimulated||e.isTrigger||t.type!=="radio"&&t.type!=="checkbox")return e.handleObj.handler.apply(this,arguments)},teardown:function(){return s.event.remove(this,"._change"),N.test(this.nodeName)}}),s.support.focusinBubbles||s.each({focus:"focusin",blur:"focusout"},function(e,t){var r=0,i=function(e){s.event.simulate(t,e.target,s.event.fix(e),!0)};s.event.special[t]={setup:function(){r++===0&&n.addEventListener(e,i,!0)},teardown:function(){--r===0&&n.removeEventListener(e,i,!0)}}}),s.fn.extend({on:function(e,n,r,i,o){var u,a;if(typeof e=="object"){typeof n!="string"&&(r=n,n=t);for(a in e)this.on(a,n,r,e[a],o);return this}r==null&&i==null?(i=n,r=n=t):i==null&&(typeof n=="string"?(i=r,r=t):(i=r,r=n,n=t));if(i===!1)i=H;else if(!i)return this;return o===1&&(u=i,i=function(e){return s().off(e),u.apply(this,arguments)},i.guid=u.guid||(u.guid=s.guid++)),this.each(function(){s.event.add(this,e,i,r,n)})},one:function(e,t,n,r){return this.on.call(this,e,t,n,r,1)},off:function(e,n,r){if(e&&e.preventDefault&&e.handleObj){var i=e.handleObj;return s(e.delegateTarget).off(i.namespace?i.type+"."+i.namespace:i.type,i.selector,i.handler),this}if(typeof e=="object"){for(var o in e)this.off(o,n,e[o]);return this}if(n===!1||typeof n=="function")r=n,n=t;return r===!1&&(r=H),this.each(function(){s.event.remove(this,e,r,n)})},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},live:function(e,t,n){return s(this.context).on(e,this.selector,t,n),this},die:function(e,t){return s(this.context).off(e,this.selector||"**",t),this},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return arguments.length==1?this.off(e,"**"):this.off(t,e,n)},trigger:function(e,t){return this.each(function(){s.event.trigger(e,t,this)})},triggerHandler:function(e,t){if(this[0])return s.event.trigger(e,t,this[0],!0)},toggle:function(e){var t=arguments,n=e.guid||s.guid++,r=0,i=function(n){var i=(s._data(this,"lastToggle"+e.guid)||0)%r;return s._data(this,"lastToggle"+e.guid,i+1),n.preventDefault(),t[i].apply(this,arguments)||!1};i.guid=n;while(r<t.length)t[r++].guid=n;return this.click(i)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),s.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){s.fn[t]=function(e,n){return n==null&&(n=e,e=null),arguments.length>0?this.on(t,null,e,n):this.trigger(t)},s.attrFn&&(s.attrFn[t]=!0),L.test(t)&&(s.event.fixHooks[t]=s.event.keyHooks),A.test(t)&&(s.event.fixHooks[t]=s.event.mouseHooks)}),function(){function S(e,t,n,i,s,o){for(var u=0,a=i.length;u<a;u++){var f=i[u];if(f){var l=!1;f=f[e];while(f){if(f[r]===n){l=i[f.sizset];break}f.nodeType===1&&!o&&(f[r]=n,f.sizset=u);if(f.nodeName.toLowerCase()===t){l=f;break}f=f[e]}i[u]=l}}}function x(e,t,n,i,s,o){for(var u=0,a=i.length;u<a;u++){var f=i[u];if(f){var l=!1;f=f[e];while(f){if(f[r]===n){l=i[f.sizset];break}if(f.nodeType===1){o||(f[r]=n,f.sizset=u);if(typeof t!="string"){if(f===t){l=!0;break}}else if(h.filter(t,[f]).length>0){l=f;break}}f=f[e]}i[u]=l}}}var e=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,r="sizcache"+(Math.random()+"").replace(".",""),i=0,o=Object.prototype.toString,u=!1,a=!0,f=/\\/g,l=/\r\n/g,c=/\W/;[0,0].sort(function(){return a=!1,0});var h=function(t,r,i,s){i=i||[],r=r||n;var u=r;if(r.nodeType!==1&&r.nodeType!==9)return[];if(!t||typeof t!="string")return i;var a,f,l,c,p,m,g,b,w=!0,E=h.isXML(r),S=[],x=t;do{e.exec(""),a=e.exec(x);if(a){x=a[3],S.push(a[1]);if(a[2]){c=a[3];break}}}while(a);if(S.length>1&&v.exec(t))if(S.length===2&&d.relative[S[0]])f=T(S[0]+S[1],r,s);else{f=d.relative[S[0]]?[r]:h(S.shift(),r);while(S.length)t=S.shift(),d.relative[t]&&(t+=S.shift()),f=T(t,f,s)}else{!s&&S.length>1&&r.nodeType===9&&!E&&d.match.ID.test(S[0])&&!d.match.ID.test(S[S.length-1])&&(p=h.find(S.shift(),r,E),r=p.expr?h.filter(p.expr,p.set)[0]:p.set[0]);if(r){p=s?{expr:S.pop(),set:y(s)}:h.find(S.pop(),S.length!==1||S[0]!=="~"&&S[0]!=="+"||!r.parentNode?r:r.parentNode,E),f=p.expr?h.filter(p.expr,p.set):p.set,S.length>0?l=y(f):w=!1;while(S.length)m=S.pop(),g=m,d.relative[m]?g=S.pop():m="",g==null&&(g=r),d.relative[m](l,g,E)}else l=S=[]}l||(l=f),l||h.error(m||t);if(o.call(l)==="[object Array]")if(!w)i.push.apply(i,l);else if(r&&r.nodeType===1)for(b=0;l[b]!=null;b++)l[b]&&(l[b]===!0||l[b].nodeType===1&&h.contains(r,l[b]))&&i.push(f[b]);else for(b=0;l[b]!=null;b++)l[b]&&l[b].nodeType===1&&i.push(f[b]);else y(l,i);return c&&(h(c,u,i,s),h.uniqueSort(i)),i};h.uniqueSort=function(e){if(w){u=a,e.sort(w);if(u)for(var t=1;t<e.length;t++)e[t]===e[t-1]&&e.splice(t--,1)}return e},h.matches=function(e,t){return h(e,null,null,t)},h.matchesSelector=function(e,t){return h(t,null,null,[e]).length>0},h.find=function(e,t,n){var r,i,s,o,u,a;if(!e)return[];for(i=0,s=d.order.length;i<s;i++){u=d.order[i];if(o=d.leftMatch[u].exec(e)){a=o[1],o.splice(1,1);if(a.substr(a.length-1)!=="\\"){o[1]=(o[1]||"").replace(f,""),r=d.find[u](o,t,n);if(r!=null){e=e.replace(d.match[u],"");break}}}}return r||(r=typeof t.getElementsByTagName!="undefined"?t.getElementsByTagName("*"):[]),{set:r,expr:e}},h.filter=function(e,n,r,i){var s,o,u,a,f,l,c,p,v,m=e,g=[],y=n,b=n&&n[0]&&h.isXML(n[0]);while(e&&n.length){for(u in d.filter)if((s=d.leftMatch[u].exec(e))!=null&&s[2]){l=d.filter[u],c=s[1],o=!1,s.splice(1,1);if(c.substr(c.length-1)==="\\")continue;y===g&&(g=[]);if(d.preFilter[u]){s=d.preFilter[u](s,y,r,g,i,b);if(!s)o=a=!0;else if(s===!0)continue}if(s)for(p=0;(f=y[p])!=null;p++)f&&(a=l(f,s,p,y),v=i^a,r&&a!=null?v?o=!0:y[p]=!1:v&&(g.push(f),o=!0));if(a!==t){r||(y=g),e=e.replace(d.match[u],"");if(!o)return[];break}}if(e===m){if(o!=null)break;h.error(e)}m=e}return y},h.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)};var p=h.getText=function(e){var t,n,r=e.nodeType,i="";if(r){if(r===1||r===9){if(typeof e.textContent=="string")return e.textContent;if(typeof e.innerText=="string")return e.innerText.replace(l,"");for(e=e.firstChild;e;e=e.nextSibling)i+=p(e)}else if(r===3||r===4)return e.nodeValue}else for(t=0;n=e[t];t++)n.nodeType!==8&&(i+=p(n));return i},d=h.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(e){return e.getAttribute("href")},type:function(e){return e.getAttribute("type")}},relative:{"+":function(e,t){var n=typeof t=="string",r=n&&!c.test(t),i=n&&!r;r&&(t=t.toLowerCase());for(var s=0,o=e.length,u;s<o;s++)if(u=e[s]){while((u=u.previousSibling)&&u.nodeType!==1);e[s]=i||u&&u.nodeName.toLowerCase()===t?u||!1:u===t}i&&h.filter(t,e,!0)},">":function(e,t){var n,r=typeof t=="string",i=0,s=e.length;if(r&&!c.test(t)){t=t.toLowerCase();for(;i<s;i++){n=e[i];if(n){var o=n.parentNode;e[i]=o.nodeName.toLowerCase()===t?o:!1}}}else{for(;i<s;i++)n=e[i],n&&(e[i]=r?n.parentNode:n.parentNode===t);r&&h.filter(t,e,!0)}},"":function(e,t,n){var r,s=i++,o=x;typeof t=="string"&&!c.test(t)&&(t=t.toLowerCase(),r=t,o=S),o("parentNode",t,s,e,r,n)},"~":function(e,t,n){var r,s=i++,o=x;typeof t=="string"&&!c.test(t)&&(t=t.toLowerCase(),r=t,o=S),o("previousSibling",t,s,e,r,n)}},find:{ID:function(e,t,n){if(typeof t.getElementById!="undefined"&&!n){var r=t.getElementById(e[1]);return r&&r.parentNode?[r]:[]}},NAME:function(e,t){if(typeof t.getElementsByName!="undefined"){var n=[],r=t.getElementsByName(e[1]);for(var i=0,s=r.length;i<s;i++)r[i].getAttribute("name")===e[1]&&n.push(r[i]);return n.length===0?null:n}},TAG:function(e,t){if(typeof t.getElementsByTagName!="undefined")return t.getElementsByTagName(e[1])}},preFilter:{CLASS:function(e,t,n,r,i,s){e=" "+e[1].replace(f,"")+" ";if(s)return e;for(var o=0,u;(u=t[o])!=null;o++)u&&(i^(u.className&&(" "+u.className+" ").replace(/[\t\n\r]/g," ").indexOf(e)>=0)?n||r.push(u):n&&(t[o]=!1));return!1},ID:function(e){return e[1].replace(f,"")},TAG:function(e,t){return e[1].replace(f,"").toLowerCase()},CHILD:function(e){if(e[1]==="nth"){e[2]||h.error(e[0]),e[2]=e[2].replace(/^\+|\s*/g,"");var t=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(e[2]==="even"&&"2n"||e[2]==="odd"&&"2n+1"||!/\D/.test(e[2])&&"0n+"+e[2]||e[2]);e[2]=t[1]+(t[2]||1)-0,e[3]=t[3]-0}else e[2]&&h.error(e[0]);return e[0]=i++,e},ATTR:function(e,t,n,r,i,s){var o=e[1]=e[1].replace(f,"");return!s&&d.attrMap[o]&&(e[1]=d.attrMap[o]),e[4]=(e[4]||e[5]||"").replace(f,""),e[2]==="~="&&(e[4]=" "+e[4]+" "),e},PSEUDO:function(t,n,r,i,s){if(t[1]==="not"){if(!((e.exec(t[3])||"").length>1||/^\w/.test(t[3]))){var o=h.filter(t[3],n,r,!0^s);return r||i.push.apply(i,o),!1}t[3]=h(t[3],null,null,n)}else if(d.match.POS.test(t[0])||d.match.CHILD.test(t[0]))return!0;return t},POS:function(e){return e.unshift(!0),e}},filters:{enabled:function(e){return e.disabled===!1&&e.type!=="hidden"},disabled:function(e){return e.disabled===!0},checked:function(e){return e.checked===!0},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},parent:function(e){return!!e.firstChild},empty:function(e){return!e.firstChild},has:function(e,t,n){return!!h(n[3],e).length},header:function(e){return/h\d/i.test(e.nodeName)},text:function(e){var t=e.getAttribute("type"),n=e.type;return e.nodeName.toLowerCase()==="input"&&"text"===n&&(t===n||t===null)},radio:function(e){return e.nodeName.toLowerCase()==="input"&&"radio"===e.type},checkbox:function(e){return e.nodeName.toLowerCase()==="input"&&"checkbox"===e.type},file:function(e){return e.nodeName.toLowerCase()==="input"&&"file"===e.type},password:function(e){return e.nodeName.toLowerCase()==="input"&&"password"===e.type},submit:function(e){var t=e.nodeName.toLowerCase();return(t==="input"||t==="button")&&"submit"===e.type},image:function(e){return e.nodeName.toLowerCase()==="input"&&"image"===e.type},reset:function(e){var t=e.nodeName.toLowerCase();return(t==="input"||t==="button")&&"reset"===e.type},button:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&"button"===e.type||t==="button"},input:function(e){return/input|select|textarea|button/i.test(e.nodeName)},focus:function(e){return e===e.ownerDocument.activeElement}},setFilters:{first:function(e,t){return t===0},last:function(e,t,n,r){return t===r.length-1},even:function(e,t){return t%2===0},odd:function(e,t){return t%2===1},lt:function(e,t,n){return t<n[3]-0},gt:function(e,t,n){return t>n[3]-0},nth:function(e,t,n){return n[3]-0===t},eq:function(e,t,n){return n[3]-0===t}},filter:{PSEUDO:function(e,t,n,r){var i=t[1],s=d.filters[i];if(s)return s(e,n,t,r);if(i==="contains")return(e.textContent||e.innerText||p([e])||"").indexOf(t[3])>=0;if(i==="not"){var o=t[3];for(var u=0,a=o.length;u<a;u++)if(o[u]===e)return!1;return!0}h.error(i)},CHILD:function(e,t){var n,i,s,o,u,a,f,l=t[1],c=e;switch(l){case"only":case"first":while(c=c.previousSibling)if(c.nodeType===1)return!1;if(l==="first")return!0;c=e;case"last":while(c=c.nextSibling)if(c.nodeType===1)return!1;return!0;case"nth":n=t[2],i=t[3];if(n===1&&i===0)return!0;s=t[0],o=e.parentNode;if(o&&(o[r]!==s||!e.nodeIndex)){a=0;for(c=o.firstChild;c;c=c.nextSibling)c.nodeType===1&&(c.nodeIndex=++a);o[r]=s}return f=e.nodeIndex-i,n===0?f===0:f%n===0&&f/n>=0}},ID:function(e,t){return e.nodeType===1&&e.getAttribute("id")===t},TAG:function(e,t){return t==="*"&&e.nodeType===1||!!e.nodeName&&e.nodeName.toLowerCase()===t},CLASS:function(e,t){return(" "+(e.className||e.getAttribute("class"))+" ").indexOf(t)>-1},ATTR:function(e,t){var n=t[1],r=h.attr?h.attr(e,n):d.attrHandle[n]?d.attrHandle[n](e):e[n]!=null?e[n]:e.getAttribute(n),i=r+"",s=t[2],o=t[4];return r==null?s==="!=":!s&&h.attr?r!=null:s==="="?i===o:s==="*="?i.indexOf(o)>=0:s==="~="?(" "+i+" ").indexOf(o)>=0:o?s==="!="?i!==o:s==="^="?i.indexOf(o)===0:s==="$="?i.substr(i.length-o.length)===o:s==="|="?i===o||i.substr(0,o.length+1)===o+"-":!1:i&&r!==!1},POS:function(e,t,n,r){var i=t[2],s=d.setFilters[i];if(s)return s(e,n,t,r)}}},v=d.match.POS,m=function(e,t){return"\\"+(t-0+1)};for(var g in d.match)d.match[g]=new RegExp(d.match[g].source+/(?![^\[]*\])(?![^\(]*\))/.source),d.leftMatch[g]=new RegExp(/(^(?:.|\r|\n)*?)/.source+d.match[g].source.replace(/\\(\d+)/g,m));var y=function(e,t){return e=Array.prototype.slice.call(e,0),t?(t.push.apply(t,e),t):e};try{Array.prototype.slice.call(n.documentElement.childNodes,0)[0].nodeType}catch(b){y=function(e,t){var n=0,r=t||[];if(o.call(e)==="[object Array]")Array.prototype.push.apply(r,e);else if(typeof e.length=="number")for(var i=e.length;n<i;n++)r.push(e[n]);else for(;e[n];n++)r.push(e[n]);return r}}var w,E;n.documentElement.compareDocumentPosition?w=function(e,t){return e===t?(u=!0,0):!e.compareDocumentPosition||!t.compareDocumentPosition?e.compareDocumentPosition?-1:1:e.compareDocumentPosition(t)&4?-1:1}:(w=function(e,t){if(e===t)return u=!0,0;if(e.sourceIndex&&t.sourceIndex)return e.sourceIndex-t.sourceIndex;var n,r,i=[],s=[],o=e.parentNode,a=t.parentNode,f=o;if(o===a)return E(e,t);if(!o)return-1;if(!a)return 1;while(f)i.unshift(f),f=f.parentNode;f=a;while(f)s.unshift(f),f=f.parentNode;n=i.length,r=s.length;for(var l=0;l<n&&l<r;l++)if(i[l]!==s[l])return E(i[l],s[l]);return l===n?E(e,s[l],-1):E(i[l],t,1)},E=function(e,t,n){if(e===t)return n;var r=e.nextSibling;while(r){if(r===t)return-1;r=r.nextSibling}return 1}),function(){var e=n.createElement("div"),r="script"+(new Date).getTime(),i=n.documentElement;e.innerHTML="<a name='"+r+"'/>",i.insertBefore(e,i.firstChild),n.getElementById(r)&&(d.find.ID=function(e,n,r){if(typeof n.getElementById!="undefined"&&!r){var i=n.getElementById(e[1]);return i?i.id===e[1]||typeof i.getAttributeNode!="undefined"&&i.getAttributeNode("id").nodeValue===e[1]?[i]:t:[]}},d.filter.ID=function(e,t){var n=typeof e.getAttributeNode!="undefined"&&e.getAttributeNode("id");return e.nodeType===1&&n&&n.nodeValue===t}),i.removeChild(e),i=e=null}(),function(){var e=n.createElement("div");e.appendChild(n.createComment("")),e.getElementsByTagName("*").length>0&&(d.find.TAG=function(e,t){var n=t.getElementsByTagName(e[1]);if(e[1]==="*"){var r=[];for(var i=0;n[i];i++)n[i].nodeType===1&&r.push(n[i]);n=r}return n}),e.innerHTML="<a href='#'></a>",e.firstChild&&typeof e.firstChild.getAttribute!="undefined"&&e.firstChild.getAttribute("href")!=="#"&&(d.attrHandle.href=function(e){return e.getAttribute("href",2)}),e=null}(),n.querySelectorAll&&function(){var e=h,t=n.createElement("div"),r="__sizzle__";t.innerHTML="<p class='TEST'></p>";if(t.querySelectorAll&&t.querySelectorAll(".TEST").length===0)return;h=function(t,i,s,o){i=i||n;if(!o&&!h.isXML(i)){var u=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(t);if(u&&(i.nodeType===1||i.nodeType===9)){if(u[1])return y(i.getElementsByTagName(t),s);if(u[2]&&d.find.CLASS&&i.getElementsByClassName)return y(i.getElementsByClassName(u[2]),s)}if(i.nodeType===9){if(t==="body"&&i.body)return y([i.body],s);if(u&&u[3]){var a=i.getElementById(u[3]);if(!a||!a.parentNode)return y([],s);if(a.id===u[3])return y([a],s)}try{return y(i.querySelectorAll(t),s)}catch(f){}}else if(i.nodeType===1&&i.nodeName.toLowerCase()!=="object"){var l=i,c=i.getAttribute("id"),p=c||r,v=i.parentNode,m=/^\s*[+~]/.test(t);c?p=p.replace(/'/g,"\\$&"):i.setAttribute("id",p),m&&v&&(i=i.parentNode);try{if(!m||v)return y(i.querySelectorAll("[id='"+p+"'] "+t),s)}catch(g){}finally{c||l.removeAttribute("id")}}}return e(t,i,s,o)};for(var i in e)h[i]=e[i];t=null}(),function(){var e=n.documentElement,t=e.matchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.msMatchesSelector;if(t){var r=!t.call(n.createElement("div"),"div"),i=!1;try{t.call(n.documentElement,"[test!='']:sizzle")}catch(s){i=!0}h.matchesSelector=function(e,n){n=n.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!h.isXML(e))try{if(i||!d.match.PSEUDO.test(n)&&!/!=/.test(n)){var s=t.call(e,n);if(s||!r||e.document&&e.document.nodeType!==11)return s}}catch(o){}return h(n,null,null,[e]).length>0}}}(),function(){var e=n.createElement("div");e.innerHTML="<div class='test e'></div><div class='test'></div>";if(!e.getElementsByClassName||e.getElementsByClassName("e").length===0)return;e.lastChild.className="e";if(e.getElementsByClassName("e").length===1)return;d.order.splice(1,0,"CLASS"),d.find.CLASS=function(e,t,n){if(typeof t.getElementsByClassName!="undefined"&&!n)return t.getElementsByClassName(e[1])},e=null}(),n.documentElement.contains?h.contains=function(e,t){return e!==t&&(e.contains?e.contains(t):!0)}:n.documentElement.compareDocumentPosition?h.contains=function(e,t){return!!(e.compareDocumentPosition(t)&16)}:h.contains=function(){return!1},h.isXML=function(e){var t=(e?e.ownerDocument||e:0).documentElement;return t?t.nodeName!=="HTML":!1};var T=function(e,t,n){var r,i=[],s="",o=t.nodeType?[t]:t;while(r=d.match.PSEUDO.exec(e))s+=r[0],e=e.replace(d.match.PSEUDO,"");e=d.relative[e]?e+"*":e;for(var u=0,a=o.length;u<a;u++)h(e,o[u],i,n);return h.filter(s,i)};h.attr=s.attr,h.selectors.attrMap={},s.find=h,s.expr=h.selectors,s.expr[":"]=s.expr.filters,s.unique=h.uniqueSort,s.text=h.getText,s.isXMLDoc=h.isXML,s.contains=h.contains}();var j=/Until$/,F=/^(?:parents|prevUntil|prevAll)/,I=/,/,q=/^.[^:#\[\.,]*$/,R=Array.prototype.slice,U=s.expr.match.POS,z={children:!0,contents:!0,next:!0,prev:!0};s.fn.extend({find:function(e){var t=this,n,r;if(typeof e!="string")return s(e).filter(function(){for(n=0,r=t.length;n<r;n++)if(s.contains(t[n],this))return!0});var i=this.pushStack("","find",e),o,u,a;for(n=0,r=this.length;n<r;n++){o=i.length,s.find(e,this[n],i);if(n>0)for(u=o;u<i.length;u++)for(a=0;a<o;a++)if(i[a]===i[u]){i.splice(u--,1);break}}return i},has:function(e){var t=s(e);return this.filter(function(){for(var e=0,n=t.length;e<n;e++)if(s.contains(this,t[e]))return!0})},not:function(e){return this.pushStack(X(this,e,!1),"not",e)},filter:function(e){return this.pushStack(X(this,e,!0),"filter",e)},is:function(e){return!!e&&(typeof e=="string"?U.test(e)?s(e,this.context).index(this[0])>=0:s.filter(e,this).length>0:this.filter(e).length>0)},closest:function(e,t){var n=[],r,i,o=this[0];if(s.isArray(e)){var u=1;while(o&&o.ownerDocument&&o!==t){for(r=0;r<e.length;r++)s(o).is(e[r])&&n.push({selector:e[r],elem:o,level:u});o=o.parentNode,u++}return n}var a=U.test(e)||typeof e!="string"?s(e,t||this.context):0;for(r=0,i=this.length;r<i;r++){o=this[r];while(o){if(a?a.index(o)>-1:s.find.matchesSelector(o,e)){n.push(o);break}o=o.parentNode;if(!o||!o.ownerDocument||o===t||o.nodeType===11)break}}return n=n.length>1?s.unique(n):n,this.pushStack(n,"closest",e)},index:function(e){return e?typeof e=="string"?s.inArray(this[0],s(e)):s.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(e,t){var n=typeof e=="string"?s(e,t):s.makeArray(e&&e.nodeType?[e]:e),r=s.merge(this.get(),n);return this.pushStack(W(n[0])||W(r[0])?r:s.unique(r))},andSelf:function(){return this.add(this.prevObject)}}),s.each({parent:function(e){var t=e.parentNode;return t&&t.nodeType!==11?t:null},parents:function(e){return s.dir(e,"parentNode")},parentsUntil:function(e,t,n){return s.dir(e,"parentNode",n)},next:function(e){return s.nth(e,2,"nextSibling")},prev:function(e){return s.nth(e,2,"previousSibling")},nextAll:function(e){return s.dir(e,"nextSibling")},prevAll:function(e){return s.dir(e,"previousSibling")},nextUntil:function(e,t,n){return s.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return s.dir(e,"previousSibling",n)},siblings:function(e){return s.sibling(e.parentNode.firstChild,e)},children:function(e){return s.sibling(e.firstChild)},contents:function(e){return s.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:s.makeArray(e.childNodes)}},function(e,t){s.fn[e]=function(n,r){var i=s.map(this,t,n);return j.test(e)||(r=n),r&&typeof r=="string"&&(i=s.filter(r,i)),i=this.length>1&&!z[e]?s.unique(i):i,(this.length>1||I.test(r))&&F.test(e)&&(i=i.reverse()),this.pushStack(i,e,R.call(arguments).join(","))}}),s.extend({filter:function(e,t,n){return n&&(e=":not("+e+")"),t.length===1?s.find.matchesSelector(t[0],e)?[t[0]]:[]:s.find.matches(e,t)},dir:function(e,n,r){var i=[],o=e[n];while(o&&o.nodeType!==9&&(r===t||o.nodeType!==1||!s(o).is(r)))o.nodeType===1&&i.push(o),o=o[n];return i},nth:function(e,t,n,r){t=t||1;var i=0;for(;e;e=e[n])if(e.nodeType===1&&++i===t)break;return e},sibling:function(e,t){var n=[];for(;e;e=e.nextSibling)e.nodeType===1&&e!==t&&n.push(e);return n}});var $="abbr|article|aside|audio|canvas|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",J=/ jQuery\d+="(?:\d+|null)"/g,K=/^\s+/,Q=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,G=/<([\w:]+)/,Y=/<tbody/i,Z=/<|&#?\w+;/,et=/<(?:script|style)/i,tt=/<(?:script|object|embed|option|style)/i,nt=new RegExp("<(?:"+$+")","i"),rt=/checked\s*(?:[^=]|=\s*.checked.)/i,it=/\/(java|ecma)script/i,st=/^\s*<!(?:\[CDATA\[|\-\-)/,ot={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},ut=V(n);ot.optgroup=ot.option,ot.tbody=ot.tfoot=ot.colgroup=ot.caption=ot.thead,ot.th=ot.td,s.support.htmlSerialize||(ot._default=[1,"div<div>","</div>"]),s.fn.extend({text:function(e){return s.isFunction(e)?this.each(function(t){var n=s(this);n.text(e.call(this,t,n.text()))}):typeof e!="object"&&e!==t?this.empty().append((this[0]&&this[0].ownerDocument||n).createTextNode(e)):s.text(this)},wrapAll:function(e){if(s.isFunction(e))return this.each(function(t){s(this).wrapAll(e.call(this,t))});if(this[0]){var t=s(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstChild&&e.firstChild.nodeType===1)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return s.isFunction(e)?this.each(function(t){s(this).wrapInner(e.call(this,t))}):this.each(function(){var t=s(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=s.isFunction(e);return this.each(function(n){s(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){s.nodeName(this,"body")||s(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(e){this.nodeType===1&&this.appendChild(e)})},prepend:function(){return this.domManip(arguments,!0,function(e){this.nodeType===1&&this.insertBefore(e,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this)});if(arguments.length){var e=s.clean(arguments);return e.push.apply(e,this.toArray()),this.pushStack(e,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this.nextSibling)});if(arguments.length){var e=this.pushStack(this,"after",arguments);return e.push.apply(e,s.clean(arguments)),e}},remove:function(e,t){for(var n=0,r;(r=this[n])!=null;n++)if(!e||s.filter(e,[r]).length)!t&&r.nodeType===1&&(s.cleanData(r.getElementsByTagName("*")),s.cleanData([r])),r.parentNode&&r.parentNode.removeChild(r);return this},empty:function(){for(var e=0,t;(t=this[e])!=null;e++){t.nodeType===1&&s.cleanData(t.getElementsByTagName("*"));while(t.firstChild)t.removeChild(t.firstChild)}return this},clone:function(e,t){return e=e==null?!1:e,t=t==null?e:t,this.map(function(){return s.clone(this,e,t)})},html:function(e){if(e===t)return this[0]&&this[0].nodeType===1?this[0].innerHTML.replace(J,""):null;if(typeof e=="string"&&!et.test(e)&&(s.support.leadingWhitespace||!K.test(e))&&!ot[(G.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(Q,"<$1></$2>");try{for(var n=0,r=this.length;n<r;n++)this[n].nodeType===1&&(s.cleanData(this[n].getElementsByTagName("*")),this[n].innerHTML=e)}catch(i){this.empty().append(e)}}else s.isFunction(e)?this.each(function(t){var n=s(this);n.html(e.call(this,t,n.html()))}):this.empty().append(e);return this},replaceWith:function(e){return this[0]&&this[0].parentNode?s.isFunction(e)?this.each(function(t){var n=s(this),r=n.html();n.replaceWith(e.call(this,t,r))}):(typeof e!="string"&&(e=s(e).detach()),this.each(function(){var t=this.nextSibling,n=this.parentNode;s(this).remove(),t?s(t).before(e):s(n).append(e)})):this.length?this.pushStack(s(s.isFunction(e)?e():e),"replaceWith",e):this},detach:function(e){return this.remove(e,!0)},domManip:function(e,n,r){var i,o,u,a,f=e[0],l=[];if(!s.support.checkClone&&arguments.length===3&&typeof f=="string"&&rt.test(f))return this.each(function(){s(this).domManip(e,n,r,!0)});if(s.isFunction(f))return this.each(function(i){var o=s(this);e[0]=f.call(this,i,n?o.html():t),o.domManip(e,n,r)});if(this[0]){a=f&&f.parentNode,s.support.parentNode&&a&&a.nodeType===11&&a.childNodes.length===this.length?i={fragment:a}:i=s.buildFragment(e,this,l),u=i.fragment,u.childNodes.length===1?o=u=u.firstChild:o=u.firstChild;if(o){n=n&&s.nodeName(o,"tr");for(var c=0,h=this.length,p=h-1;c<h;c++)r.call(n?at(this[c],o):this[c],i.cacheable||h>1&&c<p?s.clone(u,!0,!0):u)}l.length&&s.each(l,vt)}return this}}),s.buildFragment=function(e,t,r){var i,o,u,a,f=e[0];return t&&t[0]&&(a=t[0].ownerDocument||t[0]),a.createDocumentFragment||(a=n),e.length===1&&typeof f=="string"&&f.length<512&&a===n&&f.charAt(0)==="<"&&!tt.test(f)&&(s.support.checkClone||!rt.test(f))&&(s.support.html5Clone||!nt.test(f))&&(o=!0,u=s.fragments[f],u&&u!==1&&(i=u)),i||(i=a.createDocumentFragment(),s.clean(e,a,i,r)),o&&(s.fragments[f]=u?i:1),{fragment:i,cacheable:o}},s.fragments={},s.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){s.fn[e]=function(n){var r=[],i=s(n),o=this.length===1&&this[0].parentNode;if(o&&o.nodeType===11&&o.childNodes.length===1&&i.length===1)return i[t](this[0]),this;for(var u=0,a=i.length;u<a;u++){var f=(u>0?this.clone(!0):this).get();s(i[u])[t](f),r=r.concat(f)}return this.pushStack(r,e,i.selector)}}),s.extend({clone:function(e,t,n){var r,i,o,u=s.support.html5Clone||!nt.test("<"+e.nodeName)?e.cloneNode(!0):dt(e);if((!s.support.noCloneEvent||!s.support.noCloneChecked)&&(e.nodeType===1||e.nodeType===11)&&!s.isXMLDoc(e)){lt(e,u),r=ct(e),i=ct(u);for(o=0;r[o];++o)i[o]&&lt(r[o],i[o])}if(t){ft(e,u);if(n){r=ct(e),i=ct(u);for(o=0;r[o];++o)ft(r[o],i[o])}}return r=i=null,u},clean:function(e,t,r,i){var o;t=t||n,typeof t.createElement=="undefined"&&(t=t.ownerDocument||t[0]&&t[0].ownerDocument||n);var u=[],a;for(var f=0,l;(l=e[f])!=null;f++){typeof l=="number"&&(l+="");if(!l)continue;if(typeof l=="string")if(!Z.test(l))l=t.createTextNode(l);else{l=l.replace(Q,"<$1></$2>");var c=(G.exec(l)||["",""])[1].toLowerCase(),h=ot[c]||ot._default,p=h[0],d=t.createElement("div");t===n?ut.appendChild(d):V(t).appendChild(d),d.innerHTML=h[1]+l+h[2];while(p--)d=d.lastChild;if(!s.support.tbody){var v=Y.test(l),m=c==="table"&&!v?d.firstChild&&d.firstChild.childNodes:h[1]==="<table>"&&!v?d.childNodes:[];for(a=m.length-1;a>=0;--a)s.nodeName(m[a],"tbody")&&!m[a].childNodes.length&&m[a].parentNode.removeChild(m[a])}!s.support.leadingWhitespace&&K.test(l)&&d.insertBefore(t.createTextNode(K.exec(l)[0]),d.firstChild),l=d.childNodes}var g;if(!s.support.appendChecked)if(l[0]&&typeof (g=l.length)=="number")for(a=0;a<g;a++)pt(l[a]);else pt(l);l.nodeType?u.push(l):u=s.merge(u,l)}if(r){o=function(e){return!e.type||it.test(e.type)};for(f=0;u[f];f++)if(i&&s.nodeName(u[f],"script")&&(!u[f].type||u[f].type.toLowerCase()==="text/javascript"))i.push(u[f].parentNode?u[f].parentNode.removeChild(u[f]):u[f]);else{if(u[f].nodeType===1){var y=s.grep(u[f].getElementsByTagName("script"),o);u.splice.apply(u,[f+1,0].concat(y))}r.appendChild(u[f])}}return u},cleanData:function(e){var t,n,r=s.cache,i=s.event.special,o=s.support.deleteExpando;for(var u=0,a;(a=e[u])!=null;u++){if(a.nodeName&&s.noData[a.nodeName.toLowerCase()])continue;n=a[s.expando];if(n){t=r[n];if(t&&t.events){for(var f in t.events)i[f]?s.event.remove(a,f):s.removeEvent(a,f,t.handle);t.handle&&(t.handle.elem=null)}o?delete a[s.expando]:a.removeAttribute&&a.removeAttribute(s.expando),delete r[n]}}}});var mt=/alpha\([^)]*\)/i,gt=/opacity=([^)]*)/,yt=/([A-Z]|^ms)/g,bt=/^-?\d+(?:px)?$/i,wt=/^-?\d/,Et=/^([\-+])=([\-+.\de]+)/,St={position:"absolute",visibility:"hidden",display:"block"},xt=["Left","Right"],Tt=["Top","Bottom"],Nt,Ct,kt;s.fn.css=function(e,n){return arguments.length===2&&n===t?this:s.access(this,e,n,!0,function(e,n,r){return r!==t?s.style(e,n,r):s.css(e,n)})},s.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Nt(e,"opacity","opacity");return n===""?"1":n}return e.style.opacity}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":s.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,n,r,i){if(!e||e.nodeType===3||e.nodeType===8||!e.style)return;var o,u,a=s.camelCase(n),f=e.style,l=s.cssHooks[a];n=s.cssProps[a]||a;if(r===t)return l&&"get"in l&&(o=l.get(e,!1,i))!==t?o:f[n];u=typeof r,u==="string"&&(o=Et.exec(r))&&(r=+(o[1]+1)*+o[2]+parseFloat(s.css(e,n)),u="number");if(r==null||u==="number"&&isNaN(r))return;u==="number"&&!s.cssNumber[a]&&(r+="px");if(!l||!("set"in l)||(r=l.set(e,r))!==t)try{f[n]=r}catch(c){}},css:function(e,n,r){var i,o;n=s.camelCase(n),o=s.cssHooks[n],n=s.cssProps[n]||n,n==="cssFloat"&&(n="float");if(o&&"get"in o&&(i=o.get(e,!0,r))!==t)return i;if(Nt)return Nt(e,n)},swap:function(e,t,n){var r={};for(var i in t)r[i]=e.style[i],e.style[i]=t[i];n.call(e);for(i in t)e.style[i]=r[i]}}),s.curCSS=s.css,s.each(["height","width"],function(e,t){s.cssHooks[t]={get:function(e,n,r){var i;if(n)return e.offsetWidth!==0?Lt(e,t,r):(s.swap(e,St,function(){i=Lt(e,t,r)}),i)},set:function(e,t){if(!bt.test(t))return t;t=parseFloat(t);if(t>=0)return t+"px"}}}),s.support.opacity||(s.cssHooks.opacity={get:function(e,t){return gt.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?parseFloat(RegExp.$1)/100+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,i=s.isNumeric(t)?"alpha(opacity="+t*100+")":"",o=r&&r.filter||n.filter||"";n.zoom=1;if(t>=1&&s.trim(o.replace(mt,""))===""){n.removeAttribute("filter");if(r&&!r.filter)return}n.filter=mt.test(o)?o.replace(mt,i):o+" "+i}}),s(function(){s.support.reliableMarginRight||(s.cssHooks.marginRight={get:function(e,t){var n;return s.swap(e,{display:"inline-block"},function(){t?n=Nt(e,"margin-right","marginRight"):n=e.style.marginRight}),n}})}),n.defaultView&&n.defaultView.getComputedStyle&&(Ct=function(e,t){var n,r,i;return t=t.replace(yt,"-$1").toLowerCase(),(r=e.ownerDocument.defaultView)&&(i=r.getComputedStyle(e,null))&&(n=i.getPropertyValue(t),n===""&&!s.contains(e.ownerDocument.documentElement,e)&&(n=s.style(e,t))),n}),n.documentElement.currentStyle&&(kt=function(e,t){var n,r,i,s=e.currentStyle&&e.currentStyle[t],o=e.style;return s===null&&o&&(i=o[t])&&(s=i),!bt.test(s)&&wt.test(s)&&(n=o.left,r=e.runtimeStyle&&e.runtimeStyle.left,r&&(e.runtimeStyle.left=e.currentStyle.left),o.left=t==="fontSize"?"1em":s||0,s=o.pixelLeft+"px",o.left=n,r&&(e.runtimeStyle.left=r)),s===""?"auto":s}),Nt=Ct||kt,s.expr&&s.expr.filters&&(s.expr.filters.hidden=function(e){var t=e.offsetWidth,n=e.offsetHeight;return t===0&&n===0||!s.support.reliableHiddenOffsets&&(e.style&&e.style.display||s.css(e,"display"))==="none"},s.expr.filters.visible=function(e){return!s.expr.filters.hidden(e)});var At=/%20/g,Ot=/\[\]$/,Mt=/\r?\n/g,_t=/#.*$/,Dt=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,Pt=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,Ht=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,Bt=/^(?:GET|HEAD)$/,jt=/^\/\//,Ft=/\?/,It=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,qt=/^(?:select|textarea)/i,Rt=/\s+/,Ut=/([?&])_=[^&]*/,zt=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,Wt=s.fn.load,Xt={},Vt={},$t,Jt,Kt=["*/"]+["*"];try{$t=i.href}catch(Qt){$t=n.createElement("a"),$t.href="",$t=$t.href}Jt=zt.exec($t.toLowerCase())||[],s.fn.extend({load:function(e,n,r){if(typeof e!="string"&&Wt)return Wt.apply(this,arguments);if(!this.length)return this;var i=e.indexOf(" ");if(i>=0){var o=e.slice(i,e.length);e=e.slice(0,i)}var u="GET";n&&(s.isFunction(n)?(r=n,n=t):typeof n=="object"&&(n=s.param(n,s.ajaxSettings.traditional),u="POST"));var a=this;return s.ajax({url:e,type:u,dataType:"html",data:n,complete:function(e,t,n){n=e.responseText,e.isResolved()&&(e.done(function(e){n=e}),a.html(o?s("<div>").append(n.replace(It,"")).find(o):n)),r&&a.each(r,[n,t,e])}}),this},serialize:function(){return s.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?s.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||qt.test(this.nodeName)||Pt.test(this.type))}).map(function(e,t){var n=s(this).val();return n==null?null:s.isArray(n)?s.map(n,function(e,n){return{name:t.name,value:e.replace(Mt,"\r\n")}}):{name:t.name,value:n.replace(Mt,"\r\n")}}).get()}}),s.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(e,t){s.fn[t]=function(e){return this.on(t,e)}}),s.each(["get","post"],function(e,n){s[n]=function(e,r,i,o){return s.isFunction(r)&&(o=o||i,i=r,r=t),s.ajax({type:n,url:e,data:r,success:i,dataType:o})}}),s.extend({getScript:function(e,n){return s.get(e,t,n,"script")},getJSON:function(e,t,n){return s.get(e,t,n,"json")},ajaxSetup:function(e,t){return t?Zt(e,s.ajaxSettings):(t=e,e=s.ajaxSettings),Zt(e,t),e},ajaxSettings:{url:$t,isLocal:Ht.test(Jt[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":Kt},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":e.String,"text html":!0,"text json":s.parseJSON,"text xml":s.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:Gt(Xt),ajaxTransport:Gt(Vt),ajax:function(e,n){function S(e,n,c,h){if(y===2)return;y=2,m&&clearTimeout(m),v=t,p=h||"",E.readyState=e>0?4:0;var d,g,w,S=n,x=c?tn(r,E,c):t,T,N;if(e>=200&&e<300||e===304){if(r.ifModified){if(T=E.getResponseHeader("Last-Modified"))s.lastModified[l]=T;if(N=E.getResponseHeader("Etag"))s.etag[l]=N}if(e===304)S="notmodified",d=!0;else try{g=nn(r,x),S="success",d=!0}catch(C){S="parsererror",w=C}}else{w=S;if(!S||e)S="error",e<0&&(e=0)}E.status=e,E.statusText=""+(n||S),d?u.resolveWith(i,[g,S,E]):u.rejectWith(i,[E,S,w]),E.statusCode(f),f=t,b&&o.trigger("ajax"+(d?"Success":"Error"),[E,r,d?g:w]),a.fireWith(i,[E,S]),b&&(o.trigger("ajaxComplete",[E,r]),--s.active||s.event.trigger("ajaxStop"))}typeof e=="object"&&(n=e,e=t),n=n||{};var r=s.ajaxSetup({},n),i=r.context||r,o=i!==r&&(i.nodeType||i instanceof s)?s(i):s.event,u=s.Deferred(),a=s.Callbacks("once memory"),f=r.statusCode||{},l,c={},h={},p,d,v,m,g,y=0,b,w,E={readyState:0,setRequestHeader:function(e,t){if(!y){var n=e.toLowerCase();e=h[n]=h[n]||e,c[e]=t}return this},getAllResponseHeaders:function(){return y===2?p:null},getResponseHeader:function(e){var n;if(y===2){if(!d){d={};while(n=Dt.exec(p))d[n[1].toLowerCase()]=n[2]}n=d[e.toLowerCase()]}return n===t?null:n},overrideMimeType:function(e){return y||(r.mimeType=e),this},abort:function(e){return e=e||"abort",v&&v.abort(e),S(0,e),this}};u.promise(E),E.success=E.done,E.error=E.fail,E.complete=a.add,E.statusCode=function(e){if(e){var t;if(y<2)for(t in e)f[t]=[f[t],e[t]];else t=e[E.status],E.then(t,t)}return this},r.url=((e||r.url)+"").replace(_t,"").replace(jt,Jt[1]+"//"),r.dataTypes=s.trim(r.dataType||"*").toLowerCase().split(Rt),r.crossDomain==null&&(g=zt.exec(r.url.toLowerCase()),r.crossDomain=!(!g||g[1]==Jt[1]&&g[2]==Jt[2]&&(g[3]||(g[1]==="http:"?80:443))==(Jt[3]||(Jt[1]==="http:"?80:443)))),r.data&&r.processData&&typeof r.data!="string"&&(r.data=s.param(r.data,r.traditional)),Yt(Xt,r,n,E);if(y===2)return!1;b=r.global,r.type=r.type.toUpperCase(),r.hasContent=!Bt.test(r.type),b&&s.active++===0&&s.event.trigger("ajaxStart");if(!r.hasContent){r.data&&(r.url+=(Ft.test(r.url)?"&":"?")+r.data,delete r.data),l=r.url;if(r.cache===!1){var x=s.now(),T=r.url.replace(Ut,"$1_="+x);r.url=T+(T===r.url?(Ft.test(r.url)?"&":"?")+"_="+x:"")}}(r.data&&r.hasContent&&r.contentType!==!1||n.contentType)&&E.setRequestHeader("Content-Type",r.contentType),r.ifModified&&(l=l||r.url,s.lastModified[l]&&E.setRequestHeader("If-Modified-Since",s.lastModified[l]),s.etag[l]&&E.setRequestHeader("If-None-Match",s.etag[l])),E.setRequestHeader("Accept",r.dataTypes[0]&&r.accepts[r.dataTypes[0]]?r.accepts[r.dataTypes[0]]+(r.dataTypes[0]!=="*"?", "+Kt+"; q=0.01":""):r.accepts["*"]);for(w in r.headers)E.setRequestHeader(w,r.headers[w]);if(!r.beforeSend||r.beforeSend.call(i,E,r)!==!1&&y!==2){for(w in{success:1,error:1,complete:1})E[w](r[w]);v=Yt(Vt,r,n,E);if(!v)S(-1,"No Transport");else{E.readyState=1,b&&o.trigger("ajaxSend",[E,r]),r.async&&r.timeout>0&&(m=setTimeout(function(){E.abort("timeout")},r.timeout));try{y=1,v.send(c,S)}catch(N){if(!(y<2))throw N;S(-1,N)}}return E}return E.abort(),!1},param:function(e,n){var r=[],i=function(e,t){t=s.isFunction(t)?t():t,r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};n===t&&(n=s.ajaxSettings.traditional);if(s.isArray(e)||e.jquery&&!s.isPlainObject(e))s.each(e,function(){i(this.name,this.value)});else for(var o in e)en(o,e[o],n,i);return r.join("&").replace(At,"+")}}),s.extend({active:0,lastModified:{},etag:{}});var rn=s.now(),sn=/(\=)\?(&|$)|\?\?/i;s.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return s.expando+"_"+rn++}}),s.ajaxPrefilter("json jsonp",function(t,n,r){var i=t.contentType==="application/x-www-form-urlencoded"&&typeof t.data=="string";if(t.dataTypes[0]==="jsonp"||t.jsonp!==!1&&(sn.test(t.url)||i&&sn.test(t.data))){var o,u=t.jsonpCallback=s.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a=e[u],f=t.url,l=t.data,c="$1"+u+"$2";return t.jsonp!==!1&&(f=f.replace(sn,c),t.url===f&&(i&&(l=l.replace(sn,c)),t.data===l&&(f+=(/\?/.test(f)?"&":"?")+t.jsonp+"="+u))),t.url=f,t.data=l,e[u]=function(e){o=[e]},r.always(function(){e[u]=a,o&&s.isFunction(a)&&e[u](o[0])}),t.converters["script json"]=function(){return o||s.error(u+" was not called"),o[0]},t.dataTypes[0]="json","script"}}),s.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(e){return s.globalEval(e),e}}}),s.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),s.ajaxTransport("script",function(e){if(e.crossDomain){var r,i=n.head||n.getElementsByTagName("head")[0]||n.documentElement;return{send:function(s,o){r=n.createElement("script"),r.async="async",e.scriptCharset&&(r.charset=e.scriptCharset),r.src=e.url,r.onload=r.onreadystatechange=function(e,n){if(n||!r.readyState||/loaded|complete/.test(r.readyState))r.onload=r.onreadystatechange=null,i&&r.parentNode&&i.removeChild(r),r=t,n||o(200,"success")},i.insertBefore(r,i.firstChild)},abort:function(){r&&r.onload(0,1)}}}});var on=e.ActiveXObject?function(){for(var e in an)an[e](0,1)}:!1,un=0,an;s.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&fn()||ln()}:fn,function(e){s.extend(s.support,{ajax:!!e,cors:!!e&&"withCredentials"in e})}(s.ajaxSettings.xhr()),s.support.ajax&&s.ajaxTransport(function(n){if(!n.crossDomain||s.support.cors){var r;return{send:function(i,o){var u=n.xhr(),a,f;n.username?u.open(n.type,n.url,n.async,n.username,n.password):u.open(n.type,n.url,n.async);if(n.xhrFields)for(f in n.xhrFields)u[f]=n.xhrFields[f];n.mimeType&&u.overrideMimeType&&u.overrideMimeType(n.mimeType),!n.crossDomain&&!i["X-Requested-With"]&&(i["X-Requested-With"]="XMLHttpRequest");try{for(f in i)u.setRequestHeader(f,i[f])}catch(l){}u.send(n.hasContent&&n.data||null),r=function(e,i){var f,l,c,h,p;try{if(r&&(i||u.readyState===4)){r=t,a&&(u.onreadystatechange=s.noop,on&&delete an[a]);if(i)u.readyState!==4&&u.abort();else{f=u.status,c=u.getAllResponseHeaders(),h={},p=u.responseXML,p&&p.documentElement&&(h.xml=p),h.text=u.responseText;try{l=u.statusText}catch(d){l=""}!f&&n.isLocal&&!n.crossDomain?f=h.text?200:404:f===1223&&(f=204)}}}catch(v){i||o(-1,v)}h&&o(f,l,h,c)},!n.async||u.readyState===4?r():(a=++un,on&&(an||(an={},s(e).unload(on)),an[a]=r),u.onreadystatechange=r)},abort:function(){r&&r(0,1)}}}});var cn={},hn,pn,dn=/^(?:toggle|show|hide)$/,vn=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,mn,gn=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],yn;s.fn.extend({show:function(e,t,n){var r,i;if(e||e===0)return this.animate(En("show",3),e,t,n);for(var o=0,u=this.length;o<u;o++)r=this[o],r.style&&(i=r.style.display,!s._data(r,"olddisplay")&&i==="none"&&(i=r.style.display=""),i===""&&s.css(r,"display")==="none"&&s._data(r,"olddisplay",Sn(r.nodeName)));for(o=0;o<u;o++){r=this[o];if(r.style){i=r.style.display;if(i===""||i==="none")r.style.display=s._data(r,"olddisplay")||""}}return this},hide:function(e,t,n){if(e||e===0)return this.animate(En("hide",3),e,t,n);var r,i,o=0,u=this.length;for(;o<u;o++)r=this[o],r.style&&(i=s.css(r,"display"),i!=="none"&&!s._data(r,"olddisplay")&&s._data(r,"olddisplay",i));for(o=0;o<u;o++)this[o].style&&(this[o].style.display="none");return this},_toggle:s.fn.toggle,toggle:function(e,t,n){var r=typeof e=="boolean";return s.isFunction(e)&&s.isFunction(t)?this._toggle.apply(this,arguments):e==null||r?this.each(function(){var t=r?e:s(this).is(":hidden");s(this)[t?"show":"hide"]()}):this.animate(En("toggle",3),e,t,n),this},fadeTo:function(e,t,n,r){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){function o(){i.queue===!1&&s._mark(this);var t=s.extend({},i),n=this.nodeType===1,r=n&&s(this).is(":hidden"),o,u,a,f,l,c,h,p,d;t.animatedProperties={};for(a in e){o=s.camelCase(a),a!==o&&(e[o]=e[a],delete e[a]),u=e[o],s.isArray(u)?(t.animatedProperties[o]=u[1],u=e[o]=u[0]):t.animatedProperties[o]=t.specialEasing&&t.specialEasing[o]||t.easing||"swing";if(u==="hide"&&r||u==="show"&&!r)return t.complete.call(this);n&&(o==="height"||o==="width")&&(t.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY],s.css(this,"display")==="inline"&&s.css(this,"float")==="none"&&(!s.support.inlineBlockNeedsLayout||Sn(this.nodeName)==="inline"?this.style.display="inline-block":this.style.zoom=1))}t.overflow!=null&&(this.style.overflow="hidden");for(a in e)f=new s.fx(this,t,a),u=e[a],dn.test(u)?(d=s._data(this,"toggle"+a)||(u==="toggle"?r?"show":"hide":0),d?(s._data(this,"toggle"+a,d==="show"?"hide":"show"),f[d]()):f[u]()):(l=vn.exec(u),c=f.cur(),l?(h=parseFloat(l[2]),p=l[3]||(s.cssNumber[a]?"":"px"),p!=="px"&&(s.style(this,a,(h||1)+p),c=(h||1)/f.cur()*c,s.style(this,a,c+p)),l[1]&&(h=(l[1]==="-="?-1:1)*h+c),f.custom(c,h,p)):f.custom(c,u,""));return!0}var i=s.speed(t,n,r);return s.isEmptyObject(e)?this.each(i.complete,[!1]):(e=s.extend({},e),i.queue===!1?this.each(o):this.queue(i.queue,o))},stop:function(e,n,r){return typeof e!="string"&&(r=n,n=e,e=t),n&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){function u(e,t,n){var i=t[n];s.removeData(e,n,!0),i.stop(r)}var t,n=!1,i=s.timers,o=s._data(this);r||s._unmark(!0,this);if(e==null)for(t in o)o[t]&&o[t].stop&&t.indexOf(".run")===t.length-4&&u(this,o,t);else o[t=e+".run"]&&o[t].stop&&u(this,o,t);for(t=i.length;t--;)i[t].elem===this&&(e==null||i[t].queue===e)&&(r?i[t](!0):i[t].saveState(),n=!0,i.splice(t,1));(!r||!n)&&s.dequeue(this,e)})}}),s.each({slideDown:En("show",1),slideUp:En("hide",1),slideToggle:En("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){s.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),s.extend({speed:function(e,t,n){var r=e&&typeof e=="object"?s.extend({},e):{complete:n||!n&&t||s.isFunction(e)&&e,duration:e,easing:n&&t||t&&!s.isFunction(t)&&t};r.duration=s.fx.off?0:typeof r.duration=="number"?r.duration:r.duration in s.fx.speeds?s.fx.speeds[r.duration]:s.fx.speeds._default;if(r.queue==null||r.queue===!0)r.queue="fx";return r.old=r.complete,r.complete=function(e){s.isFunction(r.old)&&r.old.call(this),r.queue?s.dequeue(this,r.queue):e!==!1&&s._unmark(this)},r},easing:{linear:function(e,t,n,r){return n+r*e},swing:function(e,t,n,r){return(-Math.cos(e*Math.PI)/2+.5)*r+n}},timers:[],fx:function(e,t,n){this.options=t,this.elem=e,this.prop=n,t.orig=t.orig||{}}}),s.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this),(s.fx.step[this.prop]||s.fx.step._default)(this)},cur:function(){if(this.elem[this.prop]==null||!!this.elem.style&&this.elem.style[this.prop]!=null){var e,t=s.css(this.elem,this.prop);return isNaN(e=parseFloat(t))?!t||t==="auto"?0:t:e}return this.elem[this.prop]},custom:function(e,n,r){function u(e){return i.step(e)}var i=this,o=s.fx;this.startTime=yn||bn(),this.end=n,this.now=this.start=e,this.pos=this.state=0,this.unit=r||this.unit||(s.cssNumber[this.prop]?"":"px"),u.queue=this.options.queue,u.elem=this.elem,u.saveState=function(){i.options.hide&&s._data(i.elem,"fxshow"+i.prop)===t&&s._data(i.elem,"fxshow"+i.prop,i.start)},u()&&s.timers.push(u)&&!mn&&(mn=setInterval(o.tick,o.interval))},show:function(){var e=s._data(this.elem,"fxshow"+this.prop);this.options.orig[this.prop]=e||s.style(this.elem,this.prop),this.options.show=!0,e!==t?this.custom(this.cur(),e):this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur()),s(this.elem).show()},hide:function(){this.options.orig[this.prop]=s._data(this.elem,"fxshow"+this.prop)||s.style(this.elem,this.prop),this.options.hide=!0,this.custom(this.cur(),0)},step:function(e){var t,n,r,i=yn||bn(),o=!0,u=this.elem,a=this.options;if(e||i>=a.duration+this.startTime){this.now=this.end,this.pos=this.state=1,this.update(),a.animatedProperties[this.prop]=!0;for(t in a.animatedProperties)a.animatedProperties[t]!==!0&&(o=!1);if(o){a.overflow!=null&&!s.support.shrinkWrapBlocks&&s.each(["","X","Y"],function(e,t){u.style["overflow"+t]=a.overflow[e]}),a.hide&&s(u).hide();if(a.hide||a.show)for(t in a.animatedProperties)s.style(u,t,a.orig[t]),s.removeData(u,"fxshow"+t,!0),s.removeData(u,"toggle"+t,!0);r=a.complete,r&&(a.complete=!1,r.call(u))}return!1}return a.duration==Infinity?this.now=i:(n=i-this.startTime,this.state=n/a.duration,this.pos=s.easing[a.animatedProperties[this.prop]](this.state,n,0,1,a.duration),this.now=this.start+(this.end-this.start)*this.pos),this.update(),!0}},s.extend(s.fx,{tick:function(){var e,t=s.timers,n=0;for(;n<t.length;n++)e=t[n],!e()&&t[n]===e&&t.splice(n--,1);t.length||s.fx.stop()},interval:13,stop:function(){clearInterval(mn),mn=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(e){s.style(e.elem,"opacity",e.now)},_default:function(e){e.elem.style&&e.elem.style[e.prop]!=null?e.elem.style[e.prop]=e.now+e.unit:e.elem[e.prop]=e.now}}}),s.each(["width","height"],function(e,t){s.fx.step[t]=function(e){s.style(e.elem,t,Math.max(0,e.now)+e.unit)}}),s.expr&&s.expr.filters&&(s.expr.filters.animated=function(e){return s.grep(s.timers,function(t){return e===t.elem}).length});var xn=/^t(?:able|d|h)$/i,Tn=/^(?:body|html)$/i;"getBoundingClientRect"in n.documentElement?s.fn.offset=function(e){var t=this[0],n;if(e)return this.each(function(t){s.offset.setOffset(this,e,t)});if(!t||!t.ownerDocument)return null;if(t===t.ownerDocument.body)return s.offset.bodyOffset(t);try{n=t.getBoundingClientRect()}catch(r){}var i=t.ownerDocument,o=i.documentElement;if(!n||!s.contains(o,t))return n?{top:n.top,left:n.left}:{top:0,left:0};var u=i.body,a=Nn(i),f=o.clientTop||u.clientTop||0,l=o.clientLeft||u.clientLeft||0,c=a.pageYOffset||s.support.boxModel&&o.scrollTop||u.scrollTop,h=a.pageXOffset||s.support.boxModel&&o.scrollLeft||u.scrollLeft,p=n.top+c-f,d=n.left+h-l;return{top:p,left:d}}:s.fn.offset=function(e){var t=this[0];if(e)return this.each(function(t){s.offset.setOffset(this,e,t)});if(!t||!t.ownerDocument)return null;if(t===t.ownerDocument.body)return s.offset.bodyOffset(t);var n,r=t.offsetParent,i=t,o=t.ownerDocument,u=o.documentElement,a=o.body,f=o.defaultView,l=f?f.getComputedStyle(t,null):t.currentStyle,c=t.offsetTop,h=t.offsetLeft;while((t=t.parentNode)&&t!==a&&t!==u){if(s.support.fixedPosition&&l.position==="fixed")break;n=f?f.getComputedStyle(t,null):t.currentStyle,c-=t.scrollTop,h-=t.scrollLeft,t===r&&(c+=t.offsetTop,h+=t.offsetLeft,s.support.doesNotAddBorder&&(!s.support.doesAddBorderForTableAndCells||!xn.test(t.nodeName))&&(c+=parseFloat(n.borderTopWidth)||0,h+=parseFloat(n.borderLeftWidth)||0),i=r,r=t.offsetParent),s.support.subtractsBorderForOverflowNotVisible&&n.overflow!=="visible"&&(c+=parseFloat(n.borderTopWidth)||0,h+=parseFloat(n.borderLeftWidth)||0),l=n}if(l.position==="relative"||l.position==="static")c+=a.offsetTop,h+=a.offsetLeft;return s.support.fixedPosition&&l.position==="fixed"&&(c+=Math.max(u.scrollTop,a.scrollTop),h+=Math.max(u.scrollLeft,a.scrollLeft)),{top:c,left:h}},s.offset={bodyOffset:function(e){var t=e.offsetTop,n=e.offsetLeft;return s.support.doesNotIncludeMarginInBodyOffset&&(t+=parseFloat(s.css(e,"marginTop"))||0,n+=parseFloat(s.css(e,"marginLeft"))||0),{top:t,left:n}},setOffset:function(e,t,n){var r=s.css(e,"position");r==="static"&&(e.style.position="relative");var i=s(e),o=i.offset(),u=s.css(e,"top"),a=s.css(e,"left"),f=(r==="absolute"||r==="fixed")&&s.inArray("auto",[u,a])>-1,l={},c={},h,p;f?(c=i.position(),h=c.top,p=c.left):(h=parseFloat(u)||0,p=parseFloat(a)||0),s.isFunction(t)&&(t=t.call(e,n,o)),t.top!=null&&(l.top=t.top-o.top+h),t.left!=null&&(l.left=t.left-o.left+p),"using"in t?t.using.call(e,l):i.css(l)}},s.fn.extend({position:function(){if(!this[0])return null;var e=this[0],t=this.offsetParent(),n=this.offset(),r=Tn.test(t[0].nodeName)?{top:0,left:0}:t.offset();return n.top-=parseFloat(s.css(e,"marginTop"))||0,n.left-=parseFloat(s.css(e,"marginLeft"))||0,r.top+=parseFloat(s.css(t[0],"borderTopWidth"))||0,r.left+=parseFloat(s.css(t[0],"borderLeftWidth"))||0,{top:n.top-r.top,left:n.left-r.left}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||n.body;while(e&&!Tn.test(e.nodeName)&&s.css(e,"position")==="static")e=e.offsetParent;return e})}}),s.each(["Left","Top"],function(e,n){var r="scroll"+n;s.fn[r]=function(n){var i,o;return n===t?(i=this[0],i?(o=Nn(i),o?"pageXOffset"in o?o[e?"pageYOffset":"pageXOffset"]:s.support.boxModel&&o.document.documentElement[r]||o.document.body[r]:i[r]):null):this.each(function(){o=Nn(this),o?o.scrollTo(e?s(o).scrollLeft():n,e?n:s(o).scrollTop()):this[r]=n})}}),s.each(["Height","Width"],function(e,n){var r=n.toLowerCase();s.fn["inner"+n]=function(){var e=this[0];return e?e.style?parseFloat(s.css(e,r,"padding")):this[r]():null},s.fn["outer"+n]=function(e){var t=this[0];return t?t.style?parseFloat(s.css(t,r,e?"margin":"border")):this[r]():null},s.fn[r]=function(e){var i=this[0];if(!i)return e==null?null:this;if(s.isFunction(e))return this.each(function(t){var n=s(this);n[r](e.call(this,t,n[r]()))});if(s.isWindow(i)){var o=i.document.documentElement["client"+n],u=i.document.body;return i.document.compatMode==="CSS1Compat"&&o||u&&u["client"+n]||o}if(i.nodeType===9)return Math.max(i.documentElement["client"+n],i.body["scroll"+n],i.documentElement["scroll"+n],i.body["offset"+n],i.documentElement["offset"+n]);if(e===t){var a=s.css(i,r),f=parseFloat(a);return s.isNumeric(f)?f:a}return this.css(r,typeof e=="string"?e:e+"px")}}),e.jQuery=e.$=s,typeof define=="function"&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return s})})(window),function(e){define("Modernizr",[],function(){return function(){return window.Modernizr=function(e,t,n){function L(e){f.cssText=e}function A(e,t){return L(p.join(e+";")+(t||""))}function O(e,t){return typeof e===t}function M(e,t){return!!~(""+e).indexOf(t)}function _(e,t){for(var r in e){var i=e[r];if(!M(i,"-")&&f[i]!==n)return t=="pfx"?i:!0}return!1}function D(e,t,r){for(var i in e){var s=t[e[i]];if(s!==n)return r===!1?e[i]:O(s,"function")?s.bind(r||t):s}return!1}function P(e,t,n){var r=e.charAt(0).toUpperCase()+e.slice(1),i=(e+" "+v.join(r+" ")+r).split(" ");return O(t,"string")||O(t,"undefined")?_(i,t):(i=(e+" "+m.join(r+" ")+r).split(" "),D(i,t,n))}function H(){i.input=function(n){for(var r=0,i=n.length;r<i;r++)w[n[r]]=n[r]in l;return w.list&&(w.list=!!t.createElement("datalist")&&!!e.HTMLDataListElement),w}("autocomplete autofocus list placeholder max min multiple pattern required step".split(" ")),i.inputtypes=function(e){for(var r=0,i,s,u,a=e.length;r<a;r++)l.setAttribute("type",s=e[r]),i=l.type!=="text",i&&(l.value=c,l.style.cssText="position:absolute;visibility:hidden;",/^range$/.test(s)&&l.style.WebkitAppearance!==n?(o.appendChild(l),u=t.defaultView,i=u.getComputedStyle&&u.getComputedStyle(l,null).WebkitAppearance!=="textfield"&&l.offsetHeight!==0,o.removeChild(l)):/^(search|tel)$/.test(s)||(/^(url|email)$/.test(s)?i=l.checkValidity&&l.checkValidity()===!1:i=l.value!=c)),b[e[r]]=!!i;return b}("search tel url email datetime date month week time datetime-local number range color".split(" "))}var r="2.7.2",i={},s=!0,o=t.documentElement,u="modernizr",a=t.createElement(u),f=a.style,l=t.createElement("input"),c=":)",h={}.toString,p=" -webkit- -moz- -o- -ms- ".split(" "),d="Webkit Moz O ms",v=d.split(" "),m=d.toLowerCase().split(" "),g={svg:"http://www.w3.org/2000/svg"},y={},b={},w={},E=[],S=E.slice,x,T=function(e,n,r,i){var s,a,f,l,c=t.createElement("div"),h=t.body,p=h||t.createElement("body");if(parseInt(r,10))while(r--)f=t.createElement("div"),f.id=i?i[r]:u+(r+1),c.appendChild(f);return s=["&#173;",'<style id="s',u,'">',e,"</style>"].join(""),c.id=u,(h?c:p).innerHTML+=s,p.appendChild(c),h||(p.style.background="",p.style.overflow="hidden",l=o.style.overflow,o.style.overflow="hidden",o.appendChild(p)),a=n(c,e),h?c.parentNode.removeChild(c):(p.parentNode.removeChild(p),o.style.overflow=l),!!a},N=function(){function r(r,i){i=i||t.createElement(e[r]||"div"),r="on"+r;var s=r in i;return s||(i.setAttribute||(i=t.createElement("div")),i.setAttribute&&i.removeAttribute&&(i.setAttribute(r,""),s=O(i[r],"function"),O(i[r],"undefined")||(i[r]=n),i.removeAttribute(r))),i=null,s}var e={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return r}(),C={}.hasOwnProperty,k;!O(C,"undefined")&&!O(C.call,"undefined")?k=function(e,t){return C.call(e,t)}:k=function(e,t){return t in e&&O(e.constructor.prototype[t],"undefined")},Function.prototype.bind||(Function.prototype.bind=function(t){var n=this;if(typeof n!="function")throw new TypeError;var r=S.call(arguments,1),i=function(){if(this instanceof i){var e=function(){};e.prototype=n.prototype;var s=new e,o=n.apply(s,r.concat(S.call(arguments)));return Object(o)===o?o:s}return n.apply(t,r.concat(S.call(arguments)))};return i}),y.flexbox=function(){return P("flexWrap")},y.flexboxlegacy=function(){return P("boxDirection")},y.canvas=function(){var e=t.createElement("canvas");return!!e.getContext&&!!e.getContext("2d")},y.canvastext=function(){return!!i.canvas&&!!O(t.createElement("canvas").getContext("2d").fillText,"function")},y.webgl=function(){return!!e.WebGLRenderingContext},y.touch=function(){var n;return"ontouchstart"in e||e.DocumentTouch&&t instanceof DocumentTouch?n=!0:T(["@media (",p.join("touch-enabled),("),u,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(e){n=e.offsetTop===9}),n},y.geolocation=function(){return"geolocation"in navigator},y.postmessage=function(){return!!e.postMessage},y.websqldatabase=function(){return!!e.openDatabase},y.indexedDB=function(){return!!P("indexedDB",e)},y.hashchange=function(){return N("hashchange",e)&&(t.documentMode===n||t.documentMode>7)},y.history=function(){return!!e.history&&!!history.pushState},y.draganddrop=function(){var e=t.createElement("div");return"draggable"in e||"ondragstart"in e&&"ondrop"in e},y.websockets=function(){return"WebSocket"in e||"MozWebSocket"in e},y.rgba=function(){return L("background-color:rgba(150,255,150,.5)"),M(f.backgroundColor,"rgba")},y.hsla=function(){return L("background-color:hsla(120,40%,100%,.5)"),M(f.backgroundColor,"rgba")||M(f.backgroundColor,"hsla")},y.multiplebgs=function(){return L("background:url(https://),url(https://),red url(https://)"),/(url\s*\(.*?){3}/.test(f.background)},y.backgroundsize=function(){return P("backgroundSize")},y.borderimage=function(){return P("borderImage")},y.borderradius=function(){return P("borderRadius")},y.boxshadow=function(){return P("boxShadow")},y.textshadow=function(){return t.createElement("div").style.textShadow===""},y.opacity=function(){return A("opacity:.55"),/^0.55$/.test(f.opacity)},y.cssanimations=function(){return P("animationName")},y.csscolumns=function(){return P("columnCount")},y.cssgradients=function(){var e="background-image:",t="gradient(linear,left top,right bottom,from(#9f9),to(white));",n="linear-gradient(left top,#9f9, white);";return L((e+"-webkit- ".split(" ").join(t+e)+p.join(n+e)).slice(0,-e.length)),M(f.backgroundImage,"gradient")},y.cssreflections=function(){return P("boxReflect")},y.csstransforms=function(){return!!P("transform")},y.csstransforms3d=function(){var e=!!P("perspective");return e&&"webkitPerspective"in o.style&&T("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}",function(t,n){e=t.offsetLeft===9&&t.offsetHeight===3}),e},y.csstransitions=function(){return P("transition")},y.fontface=function(){var e;return T('@font-face {font-family:"font";src:url("https://")}',function(n,r){var i=t.getElementById("smodernizr"),s=i.sheet||i.styleSheet,o=s?s.cssRules&&s.cssRules[0]?s.cssRules[0].cssText:s.cssText||"":"";e=/src/i.test(o)&&o.indexOf(r.split(" ")[0])===0}),e},y.generatedcontent=function(){var e;return T(["#",u,"{font:0/0 a}#",u,':after{content:"',c,'";visibility:hidden;font:3px/1 a}'].join(""),function(t){e=t.offsetHeight>=3}),e},y.video=function(){var e=t.createElement("video"),n=!1;try{if(n=!!e.canPlayType)n=new Boolean(n),n.ogg=e.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,""),n.h264=e.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,""),n.webm=e.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,"")}catch(r){}return n},y.audio=function(){var e=t.createElement("audio"),n=!1;try{if(n=!!e.canPlayType)n=new Boolean(n),n.ogg=e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),n.mp3=e.canPlayType("audio/mpeg;").replace(/^no$/,""),n.wav=e.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),n.m4a=(e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/aac;")).replace(/^no$/,"")}catch(r){}return n},y.localstorage=function(){try{return localStorage.setItem(u,u),localStorage.removeItem(u),!0}catch(e){return!1}},y.sessionstorage=function(){try{return sessionStorage.setItem(u,u),sessionStorage.removeItem(u),!0}catch(e){return!1}},y.webworkers=function(){return!!e.Worker},y.applicationcache=function(){return!!e.applicationCache},y.svg=function(){return!!t.createElementNS&&!!t.createElementNS(g.svg,"svg").createSVGRect},y.inlinesvg=function(){var e=t.createElement("div");return e.innerHTML="<svg/>",(e.firstChild&&e.firstChild.namespaceURI)==g.svg},y.smil=function(){return!!t.createElementNS&&/SVGAnimate/.test(h.call(t.createElementNS(g.svg,"animate")))},y.svgclippaths=function(){return!!t.createElementNS&&/SVGClipPath/.test(h.call(t.createElementNS(g.svg,"clipPath")))};for(var B in y)k(y,B)&&(x=B.toLowerCase(),i[x]=y[B](),E.push((i[x]?"":"no-")+x));return i.input||H(),i.addTest=function(e,t){if(typeof e=="object")for(var r in e)k(e,r)&&i.addTest(r,e[r]);else{e=e.toLowerCase();if(i[e]!==n)return i;t=typeof t=="function"?t():t,typeof s!="undefined"&&s&&(o.className+=" "+(t?"":"no-")+e),i[e]=t}return i},L(""),a=l=null,i._version=r,i._prefixes=p,i._domPrefixes=m,i._cssomPrefixes=v,i.hasEvent=N,i.testProp=function(e){return _([e])},i.testAllProps=P,i.testStyles=T,i.prefixed=function(e,t,n){return t?P(e,t,n):P(e,"pfx")},o.className=o.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(s?" js "+E.join(" "):""),i}(this,this.document),function(e,t,n){function r(e){return"[object Function]"==d.call(e)}function i(e){return"string"==typeof e}function s(){}function o(e){return!e||"loaded"==e||"complete"==e||"uninitialized"==e}function u(){var e=v.shift();m=1,e?e.t?h(function(){("c"==e.t?k.injectCss:k.injectJs)(e.s,0,e.a,e.x,e.e,1)},0):(e(),u()):m=0}function a(e,n,r,i,s,a,f){function l(t){if(!d&&o(c.readyState)&&(w.r=d=1,!m&&u(),c.onload=c.onreadystatechange=null,t)){"img"!=e&&h(function(){b.removeChild(c)},50);for(var r in T[n])T[n].hasOwnProperty(r)&&T[n][r].onload()}}var f=f||k.errorTimeout,c=t.createElement(e),d=0,g=0,w={t:r,s:n,e:s,a:a,x:f};1===T[n]&&(g=1,T[n]=[]),"object"==e?c.data=n:(c.src=n,c.type=e),c.width=c.height="0",c.onerror=c.onload=c.onreadystatechange=function(){l.call(this,g)},v.splice(i,0,w),"img"!=e&&(g||2===T[n]?(b.insertBefore(c,y?null:p),h(l,f)):T[n].push(c))}function f(e,t,n,r,s){return m=0,t=t||"j",i(e)?a("c"==t?E:w,e,t,this.i++,n,r,s):(v.splice(this.i++,0,e),1==v.length&&u()),this}function l(){var e=k;return e.loader={load:f,i:0},e}var c=t.documentElement,h=e.setTimeout,p=t.getElementsByTagName("script")[0],d={}.toString,v=[],m=0,g="MozAppearance"in c.style,y=g&&!!t.createRange().compareNode,b=y?c:p.parentNode,c=e.opera&&"[object Opera]"==d.call(e.opera),c=!!t.attachEvent&&!c,w=g?"object":c?"script":"img",E=c?"script":w,S=Array.isArray||function(e){return"[object Array]"==d.call(e)},x=[],T={},N={timeout:function(e,t){return t.length&&(e.timeout=t[0]),e}},C,k;k=function(e){function t(e){var e=e.split("!"),t=x.length,n=e.pop(),r=e.length,n={url:n,origUrl:n,prefixes:e},i,s,o;for(s=0;s<r;s++)o=e[s].split("="),(i=N[o.shift()])&&(n=i(n,o));for(s=0;s<t;s++)n=x[s](n);return n}function o(e,i,s,o,u){var a=t(e),f=a.autoCallback;a.url.split(".").pop().split("?").shift(),a.bypass||(i&&(i=r(i)?i:i[e]||i[o]||i[e.split("/").pop().split("?")[0]]),a.instead?a.instead(e,i,s,o,u):(T[a.url]?a.noexec=!0:T[a.url]=1,s.load(a.url,a.forceCSS||!a.forceJS&&"css"==a.url.split(".").pop().split("?").shift()?"c":n,a.noexec,a.attrs,a.timeout),(r(i)||r(f))&&s.load(function(){l(),i&&i(a.origUrl,u,o),f&&f(a.origUrl,u,o),T[a.url]=2})))}function u(e,t){function n(e,n){if(e){if(i(e))n||(f=function(){var e=[].slice.call(arguments);l.apply(this,e),c()}),o(e,f,t,0,u);else if(Object(e)===e)for(p in h=function(){var t=0,n;for(n in e)e.hasOwnProperty(n)&&t++;return t}(),e)e.hasOwnProperty(p)&&(!n&&!--h&&(r(f)?f=function(){var e=[].slice.call(arguments);l.apply(this,e),c()}:f[p]=function(e){return function(){var t=[].slice.call(arguments);e&&e.apply(this,t),c()}}(l[p])),o(e[p],f,t,p,u))}else!n&&c()}var u=!!e.test,a=e.load||e.both,f=e.callback||s,l=f,c=e.complete||s,h,p;n(u?e.yep:e.nope,!!a),a&&n(a)}var a,f,c=this.yepnope.loader;if(i(e))o(e,0,c,0);else if(S(e))for(a=0;a<e.length;a++)f=e[a],i(f)?o(f,0,c,0):S(f)?k(f):Object(f)===f&&u(f,c);else Object(e)===e&&u(e,c)},k.addPrefix=function(e,t){N[e]=t},k.addFilter=function(e){x.push(e)},k.errorTimeout=1e4,null==t.readyState&&t.addEventListener&&(t.readyState="loading",t.addEventListener("DOMContentLoaded",C=function(){t.removeEventListener("DOMContentLoaded",C,0),t.readyState="complete"},0)),e.yepnope=l(),e.yepnope.executeStack=u,e.yepnope.injectJs=function(e,n,r,i,a,f){var l=t.createElement("script"),c,d,i=i||k.errorTimeout;l.src=e;for(d in r)l.setAttribute(d,r[d]);n=f?u:n||s,l.onreadystatechange=l.onload=function(){!c&&o(l.readyState)&&(c=1,n(),l.onload=l.onreadystatechange=null)},h(function(){c||(c=1,n(1))},i),a?l.onload():p.parentNode.insertBefore(l,p)},e.yepnope.injectCss=function(e,n,r,i,o,a){var i=t.createElement("link"),f,n=a?u:n||s;i.href=e,i.rel="stylesheet",i.type="text/css";for(f in r)i.setAttribute(f,r[f]);o||(p.parentNode.insertBefore(i,p),h(n,0))}}(this,document),Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))},e.Modernizr=Modernizr}.apply(e,arguments)})}(this),define("third-party/domReady",[],function(){function u(e){var t;for(t=0;t<e.length;t+=1)e[t](s)}function a(){var e=o;i&&e.length&&(o=[],u(e))}function f(){i||(i=!0,n&&clearInterval(n),a())}function c(e){return i?e(s):o.push(e),c}var e,t,n,r=typeof window!="undefined"&&window.document,i=!r,s=r?document:null,o=[];if(r){if(document.addEventListener)document.addEventListener("DOMContentLoaded",f,!1),window.addEventListener("load",f,!1);else if(window.attachEvent){window.attachEvent("onload",f),t=document.createElement("div");try{e=window.frameElement===null}catch(l){}t.doScroll&&e&&window.external&&(n=setInterval(function(){try{t.doScroll(),f()}catch(e){}},30))}document.readyState==="complete"&&f()}return c.version="2.0.1",c.load=function(e,t,n,r){r.isBuild?n(null):c(n)},c}),define("common/Duedil.log",["third-party/domReady!"],function(){var e;return window.console&&console.log&&debug_log?console.log.bind?e=console.log.bind(console):e=function(){console.log(Array.prototype.slice.call(arguments))}:e=function(){return},e}),define("common/highcharts-tooltips",{chart:{style:{fontFamily:'"Helvetica Neue", Helvetica, Arial, sans-serif'}},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.85)",borderColor:"rgba(0, 0, 0, 0.85)",borderRadius:0,style:{padding:"12px",fontSize:"13px",fontWeight:"bold",color:"#ffffff",fontFamily:'"Helvetica Neue", Helvetica, Arial, sans-serif'}}}),function(e){define("jquery-cookie",["jquery"],function(){return function(){var e=window.jaaulde||{};e.utils=e.utils||{},e.utils.cookies=function(){var e,t,n,r,i={expiresAt:null,path:"/",domain:null,secure:!1};return e=function(e){var t,n;return typeof e!="object"||e===null?t=i:(t={expiresAt:i.expiresAt,path:i.path,domain:i.domain,secure:i.secure},typeof e.expiresAt=="object"&&e.expiresAt instanceof Date?t.expiresAt=e.expiresAt:typeof e.hoursToLive=="number"&&e.hoursToLive!==0&&(n=new Date,n.setTime(n.getTime()+e.hoursToLive*60*60*1e3),t.expiresAt=n),typeof e.path=="string"&&e.path!==""&&(t.path=e.path),typeof e.domain=="string"&&e.domain!==""&&(t.domain=e.domain),e.secure===!0&&(t.secure=e.secure)),t},t=function(t){return t=e(t),(typeof t.expiresAt=="object"&&t.expiresAt instanceof Date?"; expires="+t.expiresAt.toGMTString():"")+"; path="+t.path+(typeof t.domain=="string"?"; domain="+t.domain:"")+(t.secure===!0?"; secure":"")},n=function(){var e={},t,n,r,i,s=document.cookie.split(";"),o;for(t=0;t<s.length;t+=1){n=s[t].split("="),r=n[0].replace(/^\s*/,"").replace(/\s*$/,"");try{i=decodeURIComponent(n[1])}catch(u){i=n[1]}if(typeof JSON=="object"&&JSON!==null&&typeof JSON.parse=="function")try{o=i,i=JSON.parse(i)}catch(a){i=o}e[r]=i}return e},r=function(){},r.prototype.get=function(e){var t,r,i=n();if(typeof e=="string")t=typeof i[e]!="undefined"?i[e]:null;else if(typeof e=="object"&&e!==null){t={};for(r in e)typeof i[e[r]]!="undefined"?t[e[r]]=i[e[r]]:t[e[r]]=null}else t=i;return t},r.prototype.filter=function(e){var t,r={},i=n();typeof e=="string"&&(e=new RegExp(e));for(t in i)t.match(e)&&(r[t]=i[t]);return r},r.prototype.set=function(e,n,r){if(typeof r!="object"||r===null)r={};if(typeof n=="undefined"||n===null)n="",r.hoursToLive=-8760;else if(typeof n!="string"){if(typeof JSON!="object"||JSON===null||typeof JSON.stringify!="function")throw new Error("cookies.set() received non-string value and could not serialize.");n=JSON.stringify(n)}var i=t(r);document.cookie=e+"="+encodeURIComponent(n)+i},r.prototype.del=function(e,t){var n={},r;if(typeof t!="object"||t===null)t={};typeof e=="boolean"&&e===!0?n=this.get():typeof e=="string"&&(n[e]=!0);for(r in n)typeof r=="string"&&r!==""&&this.set(r,null,t)},r.prototype.test=function(){var e=!1,t="cT",n="data";return this.set(t,n),this.get(t)===n&&(this.del(t),e=!0),e},r.prototype.setOptions=function(t){typeof t!="object"&&(t=null),i=e(t)},new r}(),function(){window.jQuery&&function(t){t.cookies=e.utils.cookies;var n={cookify:function(e){return this.each(function(){var n,r=["name","id"],i,s=t(this),o;for(n in r)if(!isNaN(n)){i=s.attr(r[n]);if(typeof i=="string"&&i!==""){s.is(":checkbox, :radio")?s.attr("checked")&&(o=s.val()):s.is(":input")?o=s.val():o=s.html();if(typeof o!="string"||o==="")o=null;t.cookies.set(i,o,e);break}}})},cookieFill:function(){return this.each(function(){var e,n,r=["name","id"],i,s=t(this),o;n=function(){return e=r.pop(),!!e};while(n()){i=s.attr(e);if(typeof i=="string"&&i!==""){o=t.cookies.get(i),o!==null&&(s.is(":checkbox, :radio")?s.val()===o?s.attr("checked","checked"):s.removeAttr("checked"):s.is(":input")?s.val(o):s.html(o));break}}})},cookieBind:function(e){return this.each(function(){var n=t(this);n.cookieFill().change(function(){n.cookify(e)})})}};t.each(n,function(e){t.fn[e]=this})}(window.jQuery)}()}.apply(e,arguments)})}(this),function(e){define("bootstrap-tooltip",["jquery"],function(){return function(){!function(e){var t=function(e,t){this.init("tooltip",e,t)};t.prototype={constructor:t,init:function(t,n,r){var i,s,o,u,a;this.type=t,this.$element=e(n),this.options=this.getOptions(r),this.enabled=!0,o=this.options.trigger.split(" ");for(a=o.length;a--;)u=o[a],u=="click"?this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this)):u!="manual"&&(i=u=="hover"?"mouseenter":"focus",s=u=="hover"?"mouseleave":"blur",this.$element.on(i+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(s+"."+this.type,this.options.selector,e.proxy(this.leave,this)));this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(t){return t=e.extend({},e.fn[this.type].defaults,this.$element.data(),t),t.delay&&typeof t.delay=="number"&&(t.delay={show:t.delay,hide:t.delay}),t},enter:function(t){var n=e.fn[this.type].defaults,r={},i;this._options&&e.each(this._options,function(e,t){n[e]!=t&&(r[e]=t)},this),i=e(t.currentTarget)[this.type](r).data(this.type);if(!i.options.delay||!i.options.delay.show)return i.show();clearTimeout(this.timeout),i.hoverState="in",this.timeout=setTimeout(function(){i.hoverState=="in"&&i.show()},i.options.delay.show)},leave:function(t){var n=e(t.currentTarget)[this.type](this._options).data(this.type);this.timeout&&clearTimeout(this.timeout);if(!n.options.delay||!n.options.delay.hide)return n.hide();n.hoverState="out",this.timeout=setTimeout(function(){n.hoverState=="out"&&n.hide()},n.options.delay.hide)},show:function(){var t,n,r,i,s,o,u=e.Event("show");if(this.hasContent()&&this.enabled){this.$element.trigger(u);if(u.isDefaultPrevented())return;t=this.tip(),this.setContent(),this.options.animation&&t.addClass("fade"),s=typeof this.options.placement=="function"?this.options.placement.call(this,t[0],this.$element[0]):this.options.placement,t.detach().css({top:0,left:0,display:"block"}),this.options.container?t.appendTo(this.options.container):t.insertAfter(this.$element),n=this.getPosition(),r=t[0].offsetWidth,i=t[0].offsetHeight;switch(s){case"bottom":o={top:n.top+n.height,left:n.left+n.width/2-r/2};break;case"top":o={top:n.top-i,left:n.left+n.width/2-r/2};break;case"left":o={top:n.top+n.height/2-i/2,left:n.left-r};break;case"right":o={top:n.top+n.height/2-i/2,left:n.left+n.width}}this.applyPlacement(o,s),this.$element.trigger("shown")}},applyPlacement:function(e,t){var n=this.tip(),r=n[0].offsetWidth,i=n[0].offsetHeight,s,o,u,a;n.offset(e).addClass(t).addClass("in"),s=n[0].offsetWidth,o=n[0].offsetHeight,t=="top"&&o!=i&&(e.top=e.top+i-o,a=!0),t=="bottom"||t=="top"?(u=0,e.left<0&&(u=e.left*-2,e.left=0,n.offset(e),s=n[0].offsetWidth,o=n[0].offsetHeight),this.replaceArrow(u-r+s,s,"left")):this.replaceArrow(o-i,o,"top"),a&&n.offset(e)},replaceArrow:function(e,t,n){this.arrow().css(n,e?50*(1-e/t)+"%":"")},setContent:function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},hide:function(){function i(){var t=setTimeout(function(){n.off(e.support.transition.end).detach()},500);n.one(e.support.transition.end,function(){clearTimeout(t),n.detach()})}var t=this,n=this.tip(),r=e.Event("hide");this.$element.trigger(r);if(r.isDefaultPrevented())return;return n.removeClass("in"),e.support.transition&&this.$tip.hasClass("fade")?i():n.detach(),this.$element.trigger("hidden"),this},fixTitle:function(){var e=this.$element;(e.attr("title")||typeof e.attr("data-original-title")!="string")&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},hasContent:function(){return this.getTitle()},getPosition:function(){var t=this.$element[0];return e.extend({},typeof t.getBoundingClientRect=="function"?t.getBoundingClientRect():{width:t.offsetWidth,height:t.offsetHeight},this.$element.offset())},getTitle:function(){var e,t=this.$element,n=this.options;return e=t.attr("data-original-title")||(typeof n.title=="function"?n.title.call(t[0]):n.title),e},tip:function(){return this.$tip=this.$tip||e(this.options.template)},arrow:function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(t){var n=t?e(t.currentTarget)[this.type](this._options).data(this.type):this;n.tip().hasClass("in")?n.hide():n.show()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}};var n=e.fn.tooltip;e.fn.tooltip=function(n){return this.each(function(){var r=e(this),i=r.data("tooltip"),s=typeof n=="object"&&n;i||r.data("tooltip",i=new t(this,s)),typeof n=="string"&&i[n]()})},e.fn.tooltip.Constructor=t,e.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},e.fn.tooltip.noConflict=function(){return e.fn.tooltip=n,this}}(window.jQuery)}.apply(e,arguments)})}(this),function(e){define("bootstrap-popover",["bootstrap-tooltip"],function(){return function(){!function(e){var t=function(e,t){this.init("popover",e,t)};t.prototype=e.extend({},e.fn.tooltip.Constructor.prototype,{constructor:t,setContent:function(){var e=this.tip(),t=this.getTitle(),n=this.getContent();e.find(".popover-title")[this.options.html?"html":"text"](t),e.find(".popover-content")[this.options.html?"html":"text"](n),e.removeClass("fade top bottom left right in")},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var e,t=this.$element,n=this.options;return e=(typeof n.content=="function"?n.content.call(t[0]):n.content)||t.attr("data-content"),e},tip:function(){return this.$tip||(this.$tip=e(this.options.template)),this.$tip},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}});var n=e.fn.popover;e.fn.popover=function(n){return this.each(function(){var r=e(this),i=r.data("popover"),s=typeof n=="object"&&n;i||r.data("popover",i=new t(this,s)),typeof n=="string"&&i[n]()})},e.fn.popover.Constructor=t,e.fn.popover.defaults=e.extend({},e.fn.tooltip.defaults,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),e.fn.popover.noConflict=function(){return e.fn.popover=n,this}}(window.jQuery)}.apply(e,arguments)})}(this),define("common/Duedil.helpers",["jquery","common/Duedil.log","common/highcharts-tooltips","jquery-cookie","bootstrap-tooltip","bootstrap-popover"],function(e,t,n){var r={theme_path:theme_path,logged_in:logged_in,scripts_path:theme_path+scripts_path,cachebuster:cachebuster,host:window.location.protocol+"//"+window.location.host,separateThousands:function(e,t){return t===undefined&&(t=","),e==null?e:e.toString().replace(/(\d{1,3})(?=(\d\d\d)+$)/g,"$1"+t)},removeTooltips:function(){var t=e("body > .tooltip"),n=e("body > .tooltip");t.length>0&&t.is(":visible")&&t.remove(),n.length>0&&n.is(":visible")&&n.remove()},bindTooltips:function(){e(".js-popover").popover({container:"body",trigger:"hover",html:!0}),e(".js-tooltip").tooltip({container:"body"}),e(".js-tooltip, .js-popover").on("show",function(e){"ontouchstart"in document.documentElement&&e.preventDefault()})},bindNoSelect:function(){e(document).on("selectstart",".no-select",function(e){e.preventDefault()})},tabNotifications:{tabs:null,init:function(){this.tabs=e("#widget-panel-tabs")},create:function(t,n){var r=this.tabs.find("."+n),i=r.find(".notifications"),s=e("<div></div>");i.length===0&&(r.append('<div class="notifications"></div>'),i=r.find(".notifications")),i.find("."+t).length===0&&(s.addClass("dismissed shield "+t),i.append(s)),r.parent().hasClass("selected")||s.removeClass("dismissed")}},banditSuccess:function(n){var r=e.cookies.get("duedil-bandit")[n].variant;e.ajax("/update_bandit/"+n+"/"+r).success(function(){t("Bandit updated successfully")}).error(function(e){t(e)})},number_format:function(e,t,n,r){e=(e+"").replace(/[^0-9+\-Ee.]/g,"");var i=isFinite(+e)?+e:0,s=isFinite(+t)?Math.abs(t):0,o=typeof thousands_sep=="undefined"?",":r,u=typeof dec_point=="undefined"?".":n,a="",f=function(e,t){var n=Math.pow(10,t);return""+Math.round(e*n)/n};return a=(s?f(i,s):""+Math.round(i)).split("."),a[0].length>3&&(a[0]=a[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,o)),(a[1]||"").length<s&&(a[1]=a[1]||"",a[1]+=(new Array(s-a[1].length+1)).join("0")),a.join(u)},money_format:function(e,t){var n=r.number_format(e),i="";return n[0]=="-"&&(i="-",n=n.substr(1)),[i,t,n].join("")},abbreviateNumber:function(e,t){t=Math.pow(10,t||0);var n=["k","M","B","T"],r,e,i;for(i=n.length-1;i>=0;i--){r=Math.pow(10,(i+1)*3);if(r<=Math.abs(e))return e=Math.round(e*t/r)/t,e+n[i]}return e},formatDateJMY:function(e){var t=new Date(e*1e3),n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];return[t.getDate(),n[t.getMonth()],t.getFullYear()].join(" ")},formatDateISO:function(e){function t(e){return e<10?"0"+e:e}return Date.prototype.toISOString?e.toISOString():e.getUTCFullYear()+"-"+t(e.getUTCMonth()+1)+"-"+t(e.getUTCDate())+"T"+t(e.getUTCHours())+":"+t(e.getUTCMinutes())+":"+t(e.getUTCSeconds())+"."+(e.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"},toTitleCase:function(e){return e.replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})},Queue:function(t,n,i,s){if(!(this instanceof r.Queue))return new r.Queue(t,n,i,s);!s&&typeof i=="function"&&(s=i,i=null),i||(i=[]),n||(n=1),s&&typeof s=="function"&&e(this).on("drain",s);var o=this,u=[],a=[],f=function(e,t,n){a.push({item:t,cb:n}),e&&l()},l=function(){if(u.length>=n)return;if(a.length>0){var r=a.shift();r.returned=t(r.item,function(e){r.cb&&r.cb(e);var t=u.indexOf(r);u.splice(t,1),setTimeout(l,1)}),u.push(r),u.length<n&&l()}else e(o).trigger("drain"),o.onDrain&&o.onDrain()};e.each(i,function(e){f(!1,e)}),this.push=function(e,t){f(!0,e,t)},this.empty=function(){a=[]},this.purge=function(){this.empty(),u.forEach(function(e){e&&e.returned&&e.returned.kill&&e.returned.kill()}),u=[]},setTimeout(l,1)},tooltipStyle:n};return r}),define("common/Duedil",["common/Duedil.log","common/Duedil.helpers"],function(e,t){var n={helpers:t,log:e,Modals:{loaded:function(e){}}};return n}),function(e){define("underscore",[],function(){return function(){return function(){var e=this,t=e._,n={},r=Array.prototype,i=Object.prototype,s=Function.prototype,o=r.push,u=r.slice,a=r.concat,f=i.toString,l=i.hasOwnProperty,c=r.forEach,h=r.map,p=r.reduce,d=r.reduceRight,v=r.filter,m=r.every,g=r.some,y=r.indexOf,b=r.lastIndexOf,w=Array.isArray,E=Object.keys,S=s.bind,x=function(e){if(e instanceof x)return e;if(!(this instanceof x))return new x(e);this._wrapped=e};typeof exports!="undefined"?(typeof module!="undefined"&&module.exports&&(exports=module.exports=x),exports._=x):e._=x,x.VERSION="1.4.4";var T=x.each=x.forEach=function(e,t,r){if(e==null)return;if(c&&e.forEach===c)e.forEach(t,r);else if(e.length===+e.length){for(var i=0,s=e.length;i<s;i++)if(t.call(r,e[i],i,e)===n)return}else for(var o in e)if(x.has(e,o)&&t.call(r,e[o],o,e)===n)return};x.map=x.collect=function(e,t,n){var r=[];return e==null?r:h&&e.map===h?e.map(t,n):(T(e,function(e,i,s){r[r.length]=t.call(n,e,i,s)}),r)};var N="Reduce of empty array with no initial value";x.reduce=x.foldl=x.inject=function(e,t,n,r){var i=arguments.length>2;e==null&&(e=[]);if(p&&e.reduce===p)return r&&(t=x.bind(t,r)),i?e.reduce(t,n):e.reduce(t);T(e,function(e,s,o){i?n=t.call(r,n,e,s,o):(n=e,i=!0)});if(!i)throw new TypeError(N);return n},x.reduceRight=x.foldr=function(e,t,n,r){var i=arguments.length>2;e==null&&(e=[]);if(d&&e.reduceRight===d)return r&&(t=x.bind(t,r)),i?e.reduceRight(t,n):e.reduceRight(t);var s=e.length;if(s!==+s){var o=x.keys(e);s=o.length}T(e,function(u,a,f){a=o?o[--s]:--s,i?n=t.call(r,n,e[a],a,f):(n=e[a],i=!0)});if(!i)throw new TypeError(N);return n},x.find=x.detect=function(e,t,n){var r;return C(e,function(e,i,s){if(t.call(n,e,i,s))return r=e,!0}),r},x.filter=x.select=function(e,t,n){var r=[];return e==null?r:v&&e.filter===v?e.filter(t,n):(T(e,function(e,i,s){t.call(n,e,i,s)&&(r[r.length]=e)}),r)},x.reject=function(e,t,n){return x.filter(e,function(e,r,i){return!t.call(n,e,r,i)},n)},x.every=x.all=function(e,t,r){t||(t=x.identity);var i=!0;return e==null?i:m&&e.every===m?e.every(t,r):(T(e,function(e,s,o){if(!(i=i&&t.call(r,e,s,o)))return n}),!!i)};var C=x.some=x.any=function(e,t,r){t||(t=x.identity);var i=!1;return e==null?i:g&&e.some===g?e.some(t,r):(T(e,function(e,s,o){if(i||(i=t.call(r,e,s,o)))return n}),!!i)};x.contains=x.include=function(e,t){return e==null?!1:y&&e.indexOf===y?e.indexOf(t)!=-1:C(e,function(e){return e===t})},x.invoke=function(e,t){var n=u.call(arguments,2),r=x.isFunction(t);return x.map(e,function(e){return(r?t:e[t]).apply(e,n)})},x.pluck=function(e,t){return x.map(e,function(e){return e[t]})},x.where=function(e,t,n){return x.isEmpty(t)?n?null:[]:x[n?"find":"filter"](e,function(e){for(var n in t)if(t[n]!==e[n])return!1;return!0})},x.findWhere=function(e,t){return x.where(e,t,!0)},x.max=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);if(!t&&x.isEmpty(e))return-Infinity;var r={computed:-Infinity,value:-Infinity};return T(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;o>=r.computed&&(r={value:e,computed:o})}),r.value},x.min=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.min.apply(Math,e);if(!t&&x.isEmpty(e))return Infinity;var r={computed:Infinity,value:Infinity};return T(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;o<r.computed&&(r={value:e,computed:o})}),r.value},x.shuffle=function(e){var t,n=0,r=[];return T(e,function(e){t=x.random(n++),r[n-1]=r[t],r[t]=e}),r};var k=function(e){return x.isFunction(e)?e:function(t){return t[e]}};x.sortBy=function(e,t,n){var r=k(t);return x.pluck(x.map(e,function(e,t,i){return{value:e,index:t,criteria:r.call(n,e,t,i)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||n===void 0)return 1;if(n<r||r===void 0)return-1}return e.index<t.index?-1:1}),"value")};var L=function(e,t,n,r){var i={},s=k(t||x.identity);return T(e,function(t,o){var u=s.call(n,t,o,e);r(i,u,t)}),i};x.groupBy=function(e,t,n){return L(e,t,n,function(e,t,n){(x.has(e,t)?e[t]:e[t]=[]).push(n)})},x.countBy=function(e,t,n){return L(e,t,n,function(e,t){x.has(e,t)||(e[t]=0),e[t]++})},x.sortedIndex=function(e,t,n,r){n=n==null?x.identity:k(n);var i=n.call(r,t),s=0,o=e.length;while(s<o){var u=s+o>>>1;n.call(r,e[u])<i?s=u+1:o=u}return s},x.toArray=function(e){return e?x.isArray(e)?u.call(e):e.length===+e.length?x.map(e,x.identity):x.values(e):[]},x.size=function(e){return e==null?0:e.length===+e.length?e.length:x.keys(e).length},x.first=x.head=x.take=function(e,t,n){return e==null?void 0:t!=null&&!n?u.call(e,0,t):e[0]},x.initial=function(e,t,n){return u.call(e,0,e.length-(t==null||n?1:t))},x.last=function(e,t,n){return e==null?void 0:t!=null&&!n?u.call(e,Math.max(e.length-t,0)):e[e.length-1]},x.rest=x.tail=x.drop=function(e,t,n){return u.call(e,t==null||n?1:t)},x.compact=function(e){return x.filter(e,x.identity)};var A=function(e,t,n){return T(e,function(e){x.isArray(e)?t?o.apply(n,e):A(e,t,n):n.push(e)}),n};x.flatten=function(e,t){return A(e,t,[])},x.without=function(e){return x.difference(e,u.call(arguments,1))},x.uniq=x.unique=function(e,t,n,r){x.isFunction(t)&&(r=n,n=t,t=!1);var i=n?x.map(e,n,r):e,s=[],o=[];return T(i,function(n,r){if(t?!r||o[o.length-1]!==n:!x.contains(o,n))o.push(n),s.push(e[r])}),s},x.union=function(){return x.uniq(a.apply(r,arguments))},x.intersection=function(e){var t=u.call(arguments,1);return x.filter(x.uniq(e),function(e){return x.every(t,function(t){return x.indexOf(t,e)>=0})})},x.difference=function(e){var t=a.apply(r,u.call(arguments,1));return x.filter(e,function(e){return!x.contains(t,e)})},x.zip=function(){var e=u.call(arguments),t=x.max(x.pluck(e,"length")),n=new Array(t);for(var r=0;r<t;r++)n[r]=x.pluck(e,""+r);return n},x.object=function(e,t){if(e==null)return{};var n={};for(var r=0,i=e.length;r<i;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},x.indexOf=function(e,t,n){if(e==null)return-1;var r=0,i=e.length;if(n){if(typeof n!="number")return r=x.sortedIndex(e,t),e[r]===t?r:-1;r=n<0?Math.max(0,i+n):n}if(y&&e.indexOf===y)return e.indexOf(t,n);for(;r<i;r++)if(e[r]===t)return r;return-1},x.lastIndexOf=function(e,t,n){if(e==null)return-1;var r=n!=null;if(b&&e.lastIndexOf===b)return r?e.lastIndexOf(t,n):e.lastIndexOf(t);var i=r?n:e.length;while(i--)if(e[i]===t)return i;return-1},x.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=arguments[2]||1;var r=Math.max(Math.ceil((t-e)/n),0),i=0,s=new Array(r);while(i<r)s[i++]=e,e+=n;return s},x.bind=function(e,t){if(e.bind===S&&S)return S.apply(e,u.call(arguments,1));var n=u.call(arguments,2);return function(){return e.apply(t,n.concat(u.call(arguments)))}},x.partial=function(e){var t=u.call(arguments,1);return function(){return e.apply(this,t.concat(u.call(arguments)))}},x.bindAll=function(e){var t=u.call(arguments,1);return t.length===0&&(t=x.functions(e)),T(t,function(t){e[t]=x.bind(e[t],e)}),e},x.memoize=function(e,t){var n={};return t||(t=x.identity),function(){var r=t.apply(this,arguments);return x.has(n,r)?n[r]:n[r]=e.apply(this,arguments)}},x.delay=function(e,t){var n=u.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},x.defer=function(e){return x.delay.apply(x,[e,1].concat(u.call(arguments,1)))},x.throttle=function(e,t){var n,r,i,s,o=0,u=function(){o=new Date,i=null,s=e.apply(n,r)};return function(){var a=new Date,f=t-(a-o);return n=this,r=arguments,f<=0?(clearTimeout(i),i=null,o=a,s=e.apply(n,r)):i||(i=setTimeout(u,f)),s}},x.debounce=function(e,t,n){var r,i;return function(){var s=this,o=arguments,u=function(){r=null,n||(i=e.apply(s,o))},a=n&&!r;return clearTimeout(r),r=setTimeout(u,t),a&&(i=e.apply(s,o)),i}},x.once=function(e){var t=!1,n;return function(){return t?n:(t=!0,n=e.apply(this,arguments),e=null,n)}},x.wrap=function(e,t){return function(){var n=[e];return o.apply(n,arguments),t.apply(this,n)}},x.compose=function(){var e=arguments;return function(){var t=arguments;for(var n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},x.after=function(e,t){return e<=0?t():function(){if(--e<1)return t.apply(this,arguments)}},x.keys=E||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var n in e)x.has(e,n)&&(t[t.length]=n);return t},x.values=function(e){var t=[];for(var n in e)x.has(e,n)&&t.push(e[n]);return t},x.pairs=function(e){var t=[];for(var n in e)x.has(e,n)&&t.push([n,e[n]]);return t},x.invert=function(e){var t={};for(var n in e)x.has(e,n)&&(t[e[n]]=n);return t},x.functions=x.methods=function(e){var t=[];for(var n in e)x.isFunction(e[n])&&t.push(n);return t.sort()},x.extend=function(e){return T(u.call(arguments,1),function(t){if(t)for(var n in t)e[n]=t[n]}),e},x.pick=function(e){var t={},n=a.apply(r,u.call(arguments,1));return T(n,function(n){n in e&&(t[n]=e[n])}),t},x.omit=function(e){var t={},n=a.apply(r,u.call(arguments,1));for(var i in e)x.contains(n,i)||(t[i]=e[i]);return t},x.defaults=function(e){return T(u.call(arguments,1),function(t){if(t)for(var n in t)e[n]==null&&(e[n]=t[n])}),e},x.clone=function(e){return x.isObject(e)?x.isArray(e)?e.slice():x.extend({},e):e},x.tap=function(e,t){return t(e),e};var O=function(e,t,n,r){if(e===t)return e!==0||1/e==1/t;if(e==null||t==null)return e===t;e instanceof x&&(e=e._wrapped),t instanceof x&&(t=t._wrapped);var i=f.call(e);if(i!=f.call(t))return!1;switch(i){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:e==0?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if(typeof e!="object"||typeof t!="object")return!1;var s=n.length;while(s--)if(n[s]==e)return r[s]==t;n.push(e),r.push(t);var o=0,u=!0;if(i=="[object Array]"){o=e.length,u=o==t.length;if(u)while(o--)if(!(u=O(e[o],t[o],n,r)))break}else{var a=e.constructor,l=t.constructor;if(a!==l&&!(x.isFunction(a)&&a instanceof a&&x.isFunction(l)&&l instanceof l))return!1;for(var c in e)if(x.has(e,c)){o++;if(!(u=x.has(t,c)&&O(e[c],t[c],n,r)))break}if(u){for(c in t)if(x.has(t,c)&&!(o--))break;u=!o}}return n.pop(),r.pop(),u};x.isEqual=function(e,t){return O(e,t,[],[])},x.isEmpty=function(e){if(e==null)return!0;if(x.isArray(e)||x.isString(e))return e.length===0;for(var t in e)if(x.has(e,t))return!1;return!0},x.isElement=function(e){return!!e&&e.nodeType===1},x.isArray=w||function(e){return f.call(e)=="[object Array]"},x.isObject=function(e){return e===Object(e)},T(["Arguments","Function","String","Number","Date","RegExp"],function(e){x["is"+e]=function(t){return f.call(t)=="[object "+e+"]"}}),x.isArguments(arguments)||(x.isArguments=function(e){return!!e&&!!x.has(e,"callee")}),typeof /./!="function"&&(x.isFunction=function(e){return typeof e=="function"}),x.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},x.isNaN=function(e){return x.isNumber(e)&&e!=+e},x.isBoolean=function(e){return e===!0||e===!1||f.call(e)=="[object Boolean]"},x.isNull=function(e){return e===null},x.isUndefined=function(e){return e===void 0},x.has=function(e,t){return l.call(e,t)},x.noConflict=function(){return e._=t,this},x.identity=function(e){return e},x.times=function(e,t,n){var r=Array(e);for(var i=0;i<e;i++)r[i]=t.call(n,i);return r},x.random=function(e,t){return t==null&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))};var M={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};M.unescape=x.invert(M.escape);var _={escape:new RegExp("["+x.keys(M.escape).join("")+"]","g"),unescape:new RegExp("("+x.keys(M.unescape).join("|")+")","g")};x.each(["escape","unescape"],function(e){x[e]=function(t){return t==null?"":(""+t).replace(_[e],function(t){return M[e][t]})}}),x.result=function(e,t){if(e==null)return null;var n=e[t];return x.isFunction(n)?n.call(e):n},x.mixin=function(e){T(x.functions(e),function(t){var n=x[t]=e[t];x.prototype[t]=function(){var e=[this._wrapped];return o.apply(e,arguments),j.call(this,n.apply(x,e))}})};var D=0;x.uniqueId=function(e){var t=++D+"";return e?e+t:t},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var P=/(.)^/,H={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},B=/\\|'|\r|\n|\t|\u2028|\u2029/g;x.template=function(e,t,n){var r;n=x.defaults({},n,x.templateSettings);var i=new RegExp([(n.escape||P).source,(n.interpolate||P).source,(n.evaluate||P).source].join("|")+"|$","g"),s=0,o="__p+='";e.replace(i,function(t,n,r,i,u){return o+=e.slice(s,u).replace(B,function(e){return"\\"+H[e]}),n&&(o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),r&&(o+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),i&&(o+="';\n"+i+"\n__p+='"),s=u+t.length,t}),o+="';\n",n.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{r=new Function(n.variable||"obj","_",o)}catch(u){throw u.source=o,u}if(t)return r(t,x);var a=function(e){return r.call(this,e,x)};return a.source="function("+(n.variable||"obj")+"){\n"+o+"}",a},x.chain=function(e){return x(e).chain()};var j=function(e){return this._chain?x(e).chain():e};x.mixin(x),T(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=r[e];x.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),(e=="shift"||e=="splice")&&n.length===0&&delete n[0],j.call(this,n)}}),T(["concat","join","slice"],function(e){var t=r[e];x.prototype[e]=function(){return j.call(this,t.apply(this._wrapped,arguments))}}),x.extend(x.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}.call(this),e._=_}.apply(e,arguments)})}(this),function(){function e(){}e.prototype={on:function(e){var t=typeof arguments[1]=="function"?arguments[1]:arguments[2];this.events=this.events||{},this.events[e]=this.events[e]||[],this.events[e].push(t)},off:function(e){var t=typeof arguments[1]=="function"?arguments[1]:arguments[2];this.events=this.events||{};if(t&&this.events[e]instanceof Array){var n=this.events[e].length;while(n--)if(this.events[e][n]===t){this.events[e].splice(n,1);break}}else t||delete this.events[e]},trigger:function(e){this.events=this.events||{};if(this.events[e]instanceof Array){var t=0;for(;t<this.events[e].length;t++)this.events[e][t].apply(this,Array.prototype.slice.call(arguments,1))}}},typeof define=="function"&&define.amd?define("common/Emitter",[],function(){return e}):this.Emitter=e}.call(this),function(e){define("jquery-select2",["jquery"],function(){return function(){(function(e){e.fn.each2===void 0&&e.fn.extend({each2:function(t){for(var n=e([0]),r=-1,i=this.length;i>++r&&(n.context=n[0]=this[r])&&t.call(n[0],r,n)!==!1;);return this}})})(jQuery),function(e,t){function n(e,t){for(var n=0,r=t.length;r>n;n+=1)if(i(e,t[n]))return n;return-1}function r(){var t=e(j);t.appendTo("body");var n={width:t.width()-t[0].clientWidth,height:t.height()-t[0].clientHeight};return t.remove(),n}function i(e,n){return e===n?!0:e===t||n===t?!1:null===e||null===n?!1:e.constructor===String?e+""==n+"":n.constructor===String?n+""==e+"":!1}function s(t,n){var r,i,s;if(null===t||1>t.length)return[];for(r=t.split(n),i=0,s=r.length;s>i;i+=1)r[i]=e.trim(r[i]);return r}function o(e){return e.outerWidth(!1)-e.width()}function u(n){var r="keyup-change-value";n.on("keydown",function(){e.data(n,r)===t&&e.data(n,r,n.val())}),n.on("keyup",function(){var i=e.data(n,r);i!==t&&n.val()!==i&&(e.removeData(n,r),n.trigger("keyup-change"))})}function a(n){n.on("mousemove",function(n){var r=B;(r===t||r.x!==n.pageX||r.y!==n.pageY)&&e(n.target).trigger("mousemove-filtered",n)})}function f(e,n,r){r=r||t;var i;return function(){var t=arguments;window.clearTimeout(i),i=window.setTimeout(function(){n.apply(r,t)},e)}}function l(e){var t,n=!1;return function(){return n===!1&&(t=e(),n=!0),t}}function c(e,t){var r=f(e,function(e){t.trigger("scroll-debounced",e)});t.on("scroll",function(e){n(e.target,t.get())>=0&&r(e)})}function h(e){e[0]!==document.activeElement&&window.setTimeout(function(){var t,n=e[0],r=e.val().length;e.focus(),e.is(":visible")&&n===document.activeElement&&(n.setSelectionRange?n.setSelectionRange(r,r):n.createTextRange&&(t=n.createTextRange(),t.collapse(!1),t.select()))},0)}function p(t){t=e(t)[0];var n=0,r=0;if("selectionStart"in t)n=t.selectionStart,r=t.selectionEnd-n;else if("selection"in document){t.focus();var i=document.selection.createRange();r=document.selection.createRange().text.length,i.moveStart("character",-t.value.length),n=i.text.length-r}return{offset:n,length:r}}function d(e){e.preventDefault(),e.stopPropagation()}function v(e){e.preventDefault(),e.stopImmediatePropagation()}function m(t){if(!D){var n=t[0].currentStyle||window.getComputedStyle(t[0],null);D=e(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:n.fontSize,fontFamily:n.fontFamily,fontStyle:n.fontStyle,fontWeight:n.fontWeight,letterSpacing:n.letterSpacing,textTransform:n.textTransform,whiteSpace:"nowrap"}),D.attr("class","select2-sizer"),e("body").append(D)}return D.text(t.val()),D.width()}function g(t,n,r){var i,s,o=[];i=t.attr("class"),i&&(i=""+i,e(i.split(" ")).each2(function(){0===this.indexOf("select2-")&&o.push(this)})),i=n.attr("class"),i&&(i=""+i,e(i.split(" ")).each2(function(){0!==this.indexOf("select2-")&&(s=r(this),s&&o.push(this))})),t.attr("class",o.join(" "))}function y(e,n,r,i){var s=e.toUpperCase().indexOf(n.toUpperCase()),o=n.length;return 0>s?(r.push(i(e)),t):(r.push(i(e.substring(0,s))),r.push("<span class='select2-match'>"),r.push(i(e.substring(s,s+o))),r.push("</span>"),r.push(i(e.substring(s+o,e.length))),t)}function b(e){var t={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return(e+"").replace(/[&<>"'\/\\]/g,function(e){return t[e]})}function w(n){var r,i=0,s=null,o=n.quietMillis||100,u=n.url,a=this;return function(f){window.clearTimeout(r),r=window.setTimeout(function(){i+=1;var r=i,o=n.data,l=u,c=n.transport||e.fn.select2.ajaxDefaults.transport,h={type:n.type||"GET",cache:n.cache||!1,jsonpCallback:n.jsonpCallback||t,dataType:n.dataType||"json"},p=e.extend({},e.fn.select2.ajaxDefaults.params,h);o=o?o.call(a,f.term,f.page,f.context):null,l="function"==typeof l?l.call(a,f.term,f.page,f.context):l,s&&s.abort(),n.params&&(e.isFunction(n.params)?e.extend(p,n.params.call(a)):e.extend(p,n.params)),e.extend(p,{url:l,dataType:n.dataType,data:o,success:function(e){if(!(i>r)){var t=n.results(e,f.page);f.callback(t)}}}),s=c.call(a,p)},o)}}function E(n){var r,i,s=n,o=function(e){return""+e.text};e.isArray(s)&&(i=s,s={results:i}),e.isFunction(s)===!1&&(i=s,s=function(){return i});var u=s();return u.text&&(o=u.text,e.isFunction(o)||(r=u.text,o=function(e){return e[r]})),function(n){var r,i=n.term,u={results:[]};return""===i?(n.callback(s()),t):(r=function(t,s){var u,a;if(t=t[0],t.children){u={};for(a in t)t.hasOwnProperty(a)&&(u[a]=t[a]);u.children=[],e(t.children).each2(function(e,t){r(t,u.children)}),(u.children.length||n.matcher(i,o(u),t))&&s.push(u)}else n.matcher(i,o(t),t)&&s.push(t)},e(s().results).each2(function(e,t){r(t,u.results)}),n.callback(u),t)}}function S(n){var r=e.isFunction(n);return function(i){var s=i.term,o={results:[]};e(r?n():n).each(function(){var e=this.text!==t,n=e?this.text:this;(""===s||i.matcher(s,n))&&o.results.push(e?this:{id:this,text:this})}),i.callback(o)}}function x(t,n){if(e.isFunction(t))return!0;if(!t)return!1;throw Error(n+" must be a function or a falsy value")}function T(t){return e.isFunction(t)?t():t}function N(t){var n=0;return e.each(t,function(e,t){t.children?n+=N(t.children):n++}),n}function C(e,n,r,s){var o,u,a,f,l,c=e,h=!1;if(!s.createSearchChoice||!s.tokenSeparators||1>s.tokenSeparators.length)return t;for(;;){for(u=-1,a=0,f=s.tokenSeparators.length;f>a&&(l=s.tokenSeparators[a],u=e.indexOf(l),!(u>=0));a++);if(0>u)break;if(o=e.substring(0,u),e=e.substring(u+l.length),o.length>0&&(o=s.createSearchChoice.call(this,o,n),o!==t&&null!==o&&s.id(o)!==t&&null!==s.id(o))){for(h=!1,a=0,f=n.length;f>a;a++)if(i(s.id(o),s.id(n[a]))){h=!0;break}h||r(o)}}return c!==e?e:t}function k(t,n){var r=function(){};return r.prototype=new t,r.prototype.constructor=r,r.prototype.parent=t.prototype,r.prototype=e.extend(r.prototype,n),r}if(window.Select2===t){var L,A,O,M,_,D,P,H,B={x:0,y:0},L={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(e){switch(e=e.which?e.which:e){case L.LEFT:case L.RIGHT:case L.UP:case L.DOWN:return!0}return!1},isControl:function(e){var t=e.which;switch(t){case L.SHIFT:case L.CTRL:case L.ALT:return!0}return e.metaKey?!0:!1},isFunctionKey:function(e){return e=e.which?e.which:e,e>=112&&123>=e}},j="<div class='select2-measure-scrollbar'></div>";P=e(document),_=function(){var e=1;return function(){return e++}}(),P.on("mousemove",function(e){B.x=e.pageX,B.y=e.pageY}),A=k(Object,{bind:function(e){var t=this;return function(){e.apply(t,arguments)}},init:function(n){var i,s,o,f,h=".select2-results";this.opts=n=this.prepareOpts(n),this.id=n.id,n.element.data("select2")!==t&&null!==n.element.data("select2")&&n.element.data("select2").destroy(),this.container=this.createContainer(),this.containerId="s2id_"+(n.element.attr("id")||"autogen"+_()),this.containerSelector="#"+this.containerId.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"),this.container.attr("id",this.containerId),this.body=l(function(){return n.element.closest("body")}),g(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.css(T(n.containerCss)),this.container.addClass(T(n.containerCssClass)),this.elementTabIndex=this.opts.element.attr("tabindex"),this.opts.element.data("select2",this).attr("tabindex","-1").before(this.container),this.container.data("select2",this),this.dropdown=this.container.find(".select2-drop"),this.dropdown.addClass(T(n.dropdownCssClass)),this.dropdown.data("select2",this),this.results=i=this.container.find(h),this.search=s=this.container.find("input.select2-input"),this.resultsPage=0,this.context=null,this.initContainer(),a(this.results),this.dropdown.on("mousemove-filtered touchstart touchmove touchend",h,this.bind(this.highlightUnderEvent)),c(80,this.results),this.dropdown.on("scroll-debounced",h,this.bind(this.loadMoreIfNeeded)),e(this.container).on("change",".select2-input",function(e){e.stopPropagation()}),e(this.dropdown).on("change",".select2-input",function(e){e.stopPropagation()}),e.fn.mousewheel&&i.mousewheel(function(e,t,n,r){var s=i.scrollTop();r>0&&0>=s-r?(i.scrollTop(0),d(e)):0>r&&i.get(0).scrollHeight-i.scrollTop()+r<=i.height()&&(i.scrollTop(i.get(0).scrollHeight-i.height()),d(e))}),u(s),s.on("keyup-change input paste",this.bind(this.updateResults)),s.on("focus",function(){s.addClass("select2-focused")}),s.on("blur",function(){s.removeClass("select2-focused")}),this.dropdown.on("mouseup",h,this.bind(function(t){e(t.target).closest(".select2-result-selectable").length>0&&(this.highlightUnderEvent(t),this.selectHighlighted(t))})),this.dropdown.on("click mouseup mousedown",function(e){e.stopPropagation()}),e.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource()),null!==n.maximumInputLength&&this.search.attr("maxlength",n.maximumInputLength);var o=n.element.prop("disabled");o===t&&(o=!1),this.enable(!o);var f=n.element.prop("readonly");f===t&&(f=!1),this.readonly(f),H=H||r(),this.autofocus=n.element.prop("autofocus"),n.element.prop("autofocus",!1),this.autofocus&&this.focus()},destroy:function(){var e=this.opts.element,n=e.data("select2");this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),n!==t&&(n.container.remove(),n.dropdown.remove(),e.removeClass("select2-offscreen").removeData("select2").off(".select2").prop("autofocus",this.autofocus||!1),this.elementTabIndex?e.attr({tabindex:this.elementTabIndex}):e.removeAttr("tabindex"),e.show())},optionToData:function(e){return e.is("option")?{id:e.prop("value"),text:e.text(),element:e.get(),css:e.attr("class"),disabled:e.prop("disabled"),locked:i(e.attr("locked"),"locked")||i(e.data("locked"),!0)}:e.is("optgroup")?{text:e.attr("label"),children:[],element:e.get(),css:e.attr("class")}:t},prepareOpts:function(n){var r,o,u,a,f=this;if(r=n.element,"select"===r.get(0).tagName.toLowerCase()&&(this.select=o=n.element),o&&e.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],function(){if(this in n)throw Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")}),n=e.extend({},{populateResults:function(r,i,s){var o,u=this.opts.id;o=function(r,i,a){var l,c,h,p,d,v,m,g,y,b;for(r=n.sortResults(r,i,s),l=0,c=r.length;c>l;l+=1)h=r[l],d=h.disabled===!0,p=!d&&u(h)!==t,v=h.children&&h.children.length>0,m=e("<li></li>"),m.addClass("select2-results-dept-"+a),m.addClass("select2-result"),m.addClass(p?"select2-result-selectable":"select2-result-unselectable"),d&&m.addClass("select2-disabled"),v&&m.addClass("select2-result-with-children"),m.addClass(f.opts.formatResultCssClass(h)),g=e(document.createElement("div")),g.addClass("select2-result-label"),b=n.formatResult(h,g,s,f.opts.escapeMarkup),b!==t&&g.html(b),m.append(g),v&&(y=e("<ul></ul>"),y.addClass("select2-result-sub"),o(h.children,y,a+1),m.append(y)),m.data("select2-data",h),i.append(m)},o(i,r,0)}},e.fn.select2.defaults,n),"function"!=typeof n.id&&(u=n.id,n.id=function(e){return e[u]}),e.isArray(n.element.data("select2Tags"))){if("tags"in n)throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+n.element.attr("id");n.tags=n.element.data("select2Tags")}if(o?(n.query=this.bind(function(e){var n,i,s,o={results:[],more:!1},u=e.term;s=function(t,n){var r;t.is("option")?e.matcher(u,t.text(),t)&&n.push(f.optionToData(t)):t.is("optgroup")&&(r=f.optionToData(t),t.children().each2(function(e,t){s(t,r.children)}),r.children.length>0&&n.push(r))},n=r.children(),this.getPlaceholder()!==t&&n.length>0&&(i=this.getPlaceholderOption(),i&&(n=n.not(i))),n.each2(function(e,t){s(t,o.results)}),e.callback(o)}),n.id=function(e){return e.id},n.formatResultCssClass=function(e){return e.css}):"query"in n||("ajax"in n?(a=n.element.data("ajax-url"),a&&a.length>0&&(n.ajax.url=a),n.query=w.call(n.element,n.ajax)):"data"in n?n.query=E(n.data):"tags"in n&&(n.query=S(n.tags),n.createSearchChoice===t&&(n.createSearchChoice=function(e){return{id:e,text:e}}),n.initSelection===t&&(n.initSelection=function(r,o){var u=[];e(s(r.val(),n.separator)).each(function(){var r=this,s=this,o=n.tags;e.isFunction(o)&&(o=o()),e(o).each(function(){return i(this.id,r)?(s=this.text,!1):t}),u.push({id:r,text:s})}),o(u)}))),"function"!=typeof n.query)throw"query function not defined for Select2 "+n.element.attr("id");return n},monitorSource:function(){var e,n=this.opts.element;n.on("change.select2",this.bind(function(){this.opts.element.data("select2-change-triggered")!==!0&&this.initSelection()})),e=this.bind(function(){var e,r=n.prop("disabled");r===t&&(r=!1),this.enable(!r);var e=n.prop("readonly");e===t&&(e=!1),this.readonly(e),g(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.addClass(T(this.opts.containerCssClass)),g(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(T(this.opts.dropdownCssClass))}),n.on("propertychange.select2 DOMAttrModified.select2",e),this.mutationCallback===t&&(this.mutationCallback=function(t){t.forEach(e)}),"undefined"!=typeof WebKitMutationObserver&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new WebKitMutationObserver(this.mutationCallback),this.propertyObserver.observe(n.get(0),{attributes:!0,subtree:!1}))},triggerSelect:function(t){var n=e.Event("select2-selecting",{val:this.id(t),object:t});return this.opts.element.trigger(n),!n.isDefaultPrevented()},triggerChange:function(t){t=t||{},t=e.extend({},t,{type:"change",val:this.val()}),this.opts.element.data("select2-change-triggered",!0),this.opts.element.trigger(t),this.opts.element.data("select2-change-triggered",!1),this.opts.element.click(),this.opts.blurOnChange&&this.opts.element.blur()},isInterfaceEnabled:function(){return this.enabledInterface===!0},enableInterface:function(){var e=this._enabled&&!this._readonly,t=!e;return e===this.enabledInterface?!1:(this.container.toggleClass("select2-container-disabled",t),this.close(),this.enabledInterface=e,!0)},enable:function(e){return e===t&&(e=!0),this._enabled===e?!1:(this._enabled=e,this.opts.element.prop("disabled",!e),this.enableInterface(),!0)},readonly:function(e){return e===t&&(e=!1),this._readonly===e?!1:(this._readonly=e,this.opts.element.prop("readonly",e),this.enableInterface(),!0)},opened:function(){return this.container.hasClass("select2-dropdown-open")},positionDropdown:function(){var t,n,r,i,s=this.dropdown,o=this.container.offset(),u=this.container.outerHeight(!1),a=this.container.outerWidth(!1),f=s.outerHeight(!1),l=e(window).scrollLeft()+e(window).width(),c=e(window).scrollTop()+e(window).height(),h=o.top+u,p=o.left,d=c>=h+f,v=o.top-f>=this.body().scrollTop(),m=s.outerWidth(!1),g=l>=p+m,y=s.hasClass("select2-drop-above");this.opts.dropdownAutoWidth?(i=e(".select2-results",s)[0],s.addClass("select2-drop-auto-width"),s.css("width",""),m=s.outerWidth(!1)+(i.scrollHeight===i.clientHeight?0:H.width),m>a?a=m:m=a,g=l>=p+m):this.container.removeClass("select2-drop-auto-width"),"static"!==this.body().css("position")&&(t=this.body().offset(),h-=t.top,p-=t.left),y?(n=!0,!v&&d&&(n=!1)):(n=!1,!d&&v&&(n=!0)),g||(p=o.left+a-m),n?(h=o.top-f,this.container.addClass("select2-drop-above"),s.addClass("select2-drop-above")):(this.container.removeClass("select2-drop-above"),s.removeClass("select2-drop-above")),r=e.extend({top:h,left:p,width:a},T(this.opts.dropdownCss)),s.css(r)},shouldOpen:function(){var t;return this.opened()?!1:this._enabled===!1||this._readonly===!0?!1:(t=e.Event("select2-opening"),this.opts.element.trigger(t),!t.isDefaultPrevented())},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")},open:function(){return this.shouldOpen()?(this.opening(),!0):!1},opening:function(){function t(){return{width:Math.max(document.documentElement.scrollWidth,e(window).width()),height:Math.max(document.documentElement.scrollHeight,e(window).height())}}var n,r,i=this.containerId,s="scroll."+i,o="resize."+i,u="orientationchange."+i;this.container.addClass("select2-dropdown-open").addClass("select2-container-active"),this.clearDropdownAlignmentPreference(),this.dropdown[0]!==this.body().children().last()[0]&&this.dropdown.detach().appendTo(this.body()),n=e("#select2-drop-mask"),0==n.length&&(n=e(document.createElement("div")),n.attr("id","select2-drop-mask").attr("class","select2-drop-mask"),n.hide(),n.appendTo(this.body()),n.on("mousedown touchstart click",function(t){var n,r=e("#select2-drop");r.length>0&&(n=r.data("select2"),n.opts.selectOnBlur&&n.selectHighlighted({noFocus:!0}),n.close(),t.preventDefault(),t.stopPropagation())})),this.dropdown.prev()[0]!==n[0]&&this.dropdown.before(n),e("#select2-drop").removeAttr("id"),this.dropdown.attr("id","select2-drop"),r=t(),n.css(r).show(),this.dropdown.show(),this.positionDropdown(),this.dropdown.addClass("select2-drop-active");var a=this;this.container.parents().add(window).each(function(){e(this).on(o+" "+s+" "+u,function(){var n=t();e("#select2-drop-mask").css(n),a.positionDropdown()})})},close:function(){if(this.opened()){var t=this.containerId,n="scroll."+t,r="resize."+t,i="orientationchange."+t;this.container.parents().add(window).each(function(){e(this).off(n).off(r).off(i)}),this.clearDropdownAlignmentPreference(),e("#select2-drop-mask").hide(),this.dropdown.removeAttr("id"),this.dropdown.hide(),this.container.removeClass("select2-dropdown-open"),this.results.empty(),this.clearSearch(),this.search.removeClass("select2-active"),this.opts.element.trigger(e.Event("select2-close"))}},externalSearch:function(e){this.open(),this.search.val(e),this.updateResults(!1)},clearSearch:function(){},getMaximumSelectionSize:function(){return T(this.opts.maximumSelectionSize)},ensureHighlightVisible:function(){var n,r,i,s,o,u,a,f=this.results;if(r=this.highlight(),!(0>r)){if(0==r)return f.scrollTop(0),t;n=this.findHighlightableChoices().find(".select2-result-label"),i=e(n[r]),s=i.offset().top+i.outerHeight(!0),r===n.length-1&&(a=f.find("li.select2-more-results"),a.length>0&&(s=a.offset().top+a.outerHeight(!0))),o=f.offset().top+f.outerHeight(!0),s>o&&f.scrollTop(f.scrollTop()+(s-o)),u=i.offset().top-f.offset().top,0>u&&"none"!=i.css("display")&&f.scrollTop(f.scrollTop()+u)}},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-selected):not(.select2-disabled)")},moveHighlight:function(t){for(var n=this.findHighlightableChoices(),r=this.highlight();r>-1&&n.length>r;){r+=t;var i=e(n[r]);if(i.hasClass("select2-result-selectable")&&!i.hasClass("select2-disabled")&&!i.hasClass("select2-selected")){this.highlight(r);break}}},highlight:function(r){var i,s,o=this.findHighlightableChoices();return 0===arguments.length?n(o.filter(".select2-highlighted")[0],o.get()):(r>=o.length&&(r=o.length-1),0>r&&(r=0),this.results.find(".select2-highlighted").removeClass("select2-highlighted"),i=e(o[r]),i.addClass("select2-highlighted"),this.ensureHighlightVisible(),s=i.data("select2-data"),s&&this.opts.element.trigger({type:"select2-highlight",val:this.id(s),choice:s}),t)},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(t){var n=e(t.target).closest(".select2-result-selectable");if(n.length>0&&!n.is(".select2-highlighted")){var r=this.findHighlightableChoices();this.highlight(r.index(n))}else 0==n.length&&this.results.find(".select2-highlighted").removeClass("select2-highlighted")},loadMoreIfNeeded:function(){var e,t=this.results,n=t.find("li.select2-more-results"),r=this.resultsPage+1,i=this,s=this.search.val(),o=this.context;0!==n.length&&(e=n.offset().top-t.offset().top-t.height(),this.opts.loadMorePadding>=e&&(n.addClass("select2-active"),this.opts.query({element:this.opts.element,term:s,page:r,context:o,matcher:this.opts.matcher,callback:this.bind(function(e){i.opened()&&(i.opts.populateResults.call(this,t,e.results,{term:s,page:r,context:o}),i.postprocessResults(e,!1,!1),e.more===!0?(n.detach().appendTo(t).text(i.opts.formatLoadMore(r+1)),window.setTimeout(function(){i.loadMoreIfNeeded()},10)):n.remove(),i.positionDropdown(),i.resultsPage=r,i.context=e.context)})})))},tokenize:function(){},updateResults:function(n){function r(){a.removeClass("select2-active"),c.positionDropdown()}function s(e){f.html(e),r()}var o,u,a=this.search,f=this.results,l=this.opts,c=this,h=a.val(),p=e.data(this.container,"select2-last-term");if((n===!0||!p||!i(h,p))&&(e.data(this.container,"select2-last-term",h),n===!0||this.showSearchInput!==!1&&this.opened())){var d=this.getMaximumSelectionSize();if(d>=1&&(o=this.data(),e.isArray(o)&&o.length>=d&&x(l.formatSelectionTooBig,"formatSelectionTooBig")))return s("<li class='select2-selection-limit'>"+l.formatSelectionTooBig(d)+"</li>"),t;if(a.val().length<l.minimumInputLength)return x(l.formatInputTooShort,"formatInputTooShort")?s("<li class='select2-no-results'>"+l.formatInputTooShort(a.val(),l.minimumInputLength)+"</li>"):s(""),n&&this.showSearch&&this.showSearch(!0),t;if(l.maximumInputLength&&a.val().length>l.maximumInputLength)return x(l.formatInputTooLong,"formatInputTooLong")?s("<li class='select2-no-results'>"+l.formatInputTooLong(a.val(),l.maximumInputLength)+"</li>"):s(""),t;l.formatSearching&&0===this.findHighlightableChoices().length&&s("<li class='select2-searching'>"+l.formatSearching()+"</li>"),a.addClass("select2-active"),u=this.tokenize(),u!=t&&null!=u&&a.val(u),this.resultsPage=1,l.query({element:l.element,term:a.val(),page:this.resultsPage,context:null,matcher:l.matcher,callback:this.bind(function(o){var u;return this.opened()?(this.context=o.context===t?null:o.context,this.opts.createSearchChoice&&""!==a.val()&&(u=this.opts.createSearchChoice.call(c,a.val(),o.results),u!==t&&null!==u&&c.id(u)!==t&&null!==c.id(u)&&0===e(o.results).filter(function(){return i(c.id(this),c.id(u))}).length&&o.results.unshift(u)),0===o.results.length&&x(l.formatNoMatches,"formatNoMatches")?(s("<li class='select2-no-results'>"+l.formatNoMatches(a.val())+"</li>"),t):(f.empty(),c.opts.populateResults.call(this,f,o.results,{term:a.val(),page:this.resultsPage,context:null}),o.more===!0&&x(l.formatLoadMore,"formatLoadMore")&&(f.append("<li class='select2-more-results'>"+c.opts.escapeMarkup(l.formatLoadMore(this.resultsPage))+"</li>"),window.setTimeout(function(){c.loadMoreIfNeeded()},10)),this.postprocessResults(o,n),r(),this.opts.element.trigger({type:"select2-loaded",items:o}),t)):(this.search.removeClass("select2-active"),t)})})}},cancel:function(){this.close()},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0}),this.close(),this.container.removeClass("select2-container-active"),this.search[0]===document.activeElement&&this.search.blur(),this.clearSearch(),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){h(this.search)},selectHighlighted:function(e){var t=this.highlight(),n=this.results.find(".select2-highlighted"),r=n.closest(".select2-result").data("select2-data");r?(this.highlight(t),this.onSelect(r,e)):e&&e.noFocus&&this.close()},getPlaceholder:function(){var e;return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder||((e=this.getPlaceholderOption())!==t?e.text():t)},getPlaceholderOption:function(){if(this.select){var e=this.select.children().first();if(this.opts.placeholderOption!==t)return"first"===this.opts.placeholderOption&&e||"function"==typeof this.opts.placeholderOption&&this.opts.placeholderOption(this.select);if(""===e.text()&&""===e.val())return e}},initContainerWidth:function(){function n(){var n,r,i,s,o;if("off"===this.opts.width)return null;if("element"===this.opts.width)return 0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px";if("copy"===this.opts.width||"resolve"===this.opts.width){if(n=this.opts.element.attr("style"),n!==t)for(r=n.split(";"),s=0,o=r.length;o>s;s+=1)if(i=r[s].replace(/\s/g,"").match(/width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i),null!==i&&i.length>=1)return i[1];return"resolve"===this.opts.width?(n=this.opts.element.css("width"),n.indexOf("%")>0?n:0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px"):null}return e.isFunction(this.opts.width)?this.opts.width():this.opts.width}var r=n.call(this);null!==r&&this.container.css("width",r)}}),O=k(A,{createContainer:function(){var t=e(document.createElement("div")).attr({"class":"select2-container"}).html(["<a href='javascript:void(0)' onclick='return false;' class='select2-choice' tabindex='-1'>","   <span class='select2-chosen'>&nbsp;</span><abbr class='select2-search-choice-close'></abbr>","   <span class='select2-arrow'><b></b></span>","</a>","<input class='select2-focusser select2-offscreen' type='text'/>","<div class='select2-drop select2-display-none'>","   <div class='select2-search'>","       <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'/>","   </div>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return t},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.focusser.prop("disabled",!this.isInterfaceEnabled())},opening:function(){var t,n,r;this.opts.minimumResultsForSearch>=0&&this.showSearch(!0),this.parent.opening.apply(this,arguments),this.showSearchInput!==!1&&this.search.val(this.focusser.val()),this.search.focus(),t=this.search.get(0),t.createTextRange?(n=t.createTextRange(),n.collapse(!1),n.select()):t.setSelectionRange&&(r=this.search.val().length,t.setSelectionRange(r,r)),this.focusser.prop("disabled",!0).val(""),this.updateResults(!0),this.opts.element.trigger(e.Event("select2-open"))},close:function(){this.opened()&&(this.parent.close.apply(this,arguments),this.focusser.removeAttr("disabled"),this.focusser.focus())},focus:function(){this.opened()?this.close():(this.focusser.removeAttr("disabled"),this.focusser.focus())},isFocused:function(){return this.container.hasClass("select2-container-active")},cancel:function(){this.parent.cancel.apply(this,arguments),this.focusser.removeAttr("disabled"),this.focusser.focus()},initContainer:function(){var n,r=this.container,i=this.dropdown;0>this.opts.minimumResultsForSearch?this.showSearch(!1):this.showSearch(!0),this.selection=n=r.find(".select2-choice"),this.focusser=r.find(".select2-focusser"),this.focusser.attr("id","s2id_autogen"+_()),e("label[for='"+this.opts.element.attr("id")+"']").attr("for",this.focusser.attr("id")),this.focusser.attr("tabindex",this.elementTabIndex),this.search.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()){if(e.which===L.PAGE_UP||e.which===L.PAGE_DOWN)return d(e),t;switch(e.which){case L.UP:case L.DOWN:return this.moveHighlight(e.which===L.UP?-1:1),d(e),t;case L.ENTER:return this.selectHighlighted(),d(e),t;case L.TAB:return this.selectHighlighted({noFocus:!0}),t;case L.ESC:return this.cancel(e),d(e),t}}})),this.search.on("blur",this.bind(function(){document.activeElement===this.body().get(0)&&window.setTimeout(this.bind(function(){this.search.focus()}),0)})),this.focusser.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()&&e.which!==L.TAB&&!L.isControl(e)&&!L.isFunctionKey(e)&&e.which!==L.ESC){if(this.opts.openOnEnter===!1&&e.which===L.ENTER)return d(e),t;if(e.which==L.DOWN||e.which==L.UP||e.which==L.ENTER&&this.opts.openOnEnter){if(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey)return;return this.open(),d(e),t}return e.which==L.DELETE||e.which==L.BACKSPACE?(this.opts.allowClear&&this.clear(),d(e),t):t}})),u(this.focusser),this.focusser.on("keyup-change input",this.bind(function(e){if(this.opts.minimumResultsForSearch>=0){if(e.stopPropagation(),this.opened())return;this.open()}})),n.on("mousedown","abbr",this.bind(function(e){this.isInterfaceEnabled()&&(this.clear(),v(e),this.close(),this.selection.focus())})),n.on("mousedown",this.bind(function(t){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.opened()?this.close():this.isInterfaceEnabled()&&this.open(),d(t)})),i.on("mousedown",this.bind(function(){this.search.focus()})),n.on("focus",this.bind(function(e){d(e)})),this.focusser.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active")})).on("blur",this.bind(function(){this.opened()||(this.container.removeClass("select2-container-active"),this.opts.element.trigger(e.Event("select2-blur")))})),this.search.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active")})),this.initContainerWidth(),this.opts.element.addClass("select2-offscreen"),this.setPlaceholder()},clear:function(e){var t=this.selection.data("select2-data");if(t){var n=this.getPlaceholderOption();this.opts.element.val(n?n.val():""),this.selection.find(".select2-chosen").empty(),this.selection.removeData("select2-data"),this.setPlaceholder(),e!==!1&&(this.opts.element.trigger({type:"select2-removed",val:this.id(t),choice:t}),this.triggerChange({removed:t}))}},initSelection:function(){if(this.isPlaceholderOptionSelected())this.updateSelection([]),this.close(),this.setPlaceholder();else{var e=this;this.opts.initSelection.call(null,this.opts.element,function(n){n!==t&&null!==n&&(e.updateSelection(n),e.close(),e.setPlaceholder())})}},isPlaceholderOptionSelected:function(){var e;return(e=this.getPlaceholderOption())!==t&&e.is(":selected")||""===this.opts.element.val()||this.opts.element.val()===t||null===this.opts.element.val()},prepareOpts:function(){var t=this.parent.prepareOpts.apply(this,arguments),n=this;return"select"===t.element.get(0).tagName.toLowerCase()?t.initSelection=function(e,t){var r=e.find(":selected");t(n.optionToData(r))}:"data"in t&&(t.initSelection=t.initSelection||function(n,r){var s=n.val(),o=null;t.query({matcher:function(e,n,r){var u=i(s,t.id(r));return u&&(o=r),u},callback:e.isFunction(r)?function(){r(o)}:e.noop})}),t},getPlaceholder:function(){return this.select&&this.getPlaceholderOption()===t?t:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var e=this.getPlaceholder();if(this.isPlaceholderOptionSelected()&&e!==t){if(this.select&&this.getPlaceholderOption()===t)return;this.selection.find(".select2-chosen").html(this.opts.escapeMarkup(e)),this.selection.addClass("select2-default"),this.container.removeClass("select2-allowclear")}},postprocessResults:function(e,n,r){var s=0,o=this;if(this.findHighlightableChoices().each2(function(e,n){return i(o.id(n.data("select2-data")),o.opts.element.val())?(s=e,!1):t}),r!==!1&&(n===!0&&s>=0?this.highlight(s):this.highlight(0)),n===!0){var u=this.opts.minimumResultsForSearch;u>=0&&this.showSearch(N(e.results)>=u)}},showSearch:function(t){this.showSearchInput!==t&&(this.showSearchInput=t,this.dropdown.find(".select2-search").toggleClass("select2-search-hidden",!t),this.dropdown.find(".select2-search").toggleClass("select2-offscreen",!t),e(this.dropdown,this.container).toggleClass("select2-with-searchbox",t))},onSelect:function(e,t){if(this.triggerSelect(e)){var n=this.opts.element.val(),r=this.data();this.opts.element.val(this.id(e)),this.updateSelection(e),this.opts.element.trigger({type:"select2-selected",val:this.id(e),choice:e}),this.close(),t&&t.noFocus||this.selection.focus(),i(n,this.id(e))||this.triggerChange({added:e,removed:r})}},updateSelection:function(e){var n,r,i=this.selection.find(".select2-chosen");this.selection.data("select2-data",e),i.empty(),n=this.opts.formatSelection(e,i,this.opts.escapeMarkup),n!==t&&i.append(n),r=this.opts.formatSelectionCssClass(e,i),r!==t&&i.addClass(r),this.selection.removeClass("select2-default"),this.opts.allowClear&&this.getPlaceholder()!==t&&this.container.addClass("select2-allowclear")},val:function(){var e,n=!1,r=null,i=this,s=this.data();if(0===arguments.length)return this.opts.element.val();if(e=arguments[0],arguments.length>1&&(n=arguments[1]),this.select)this.select.val(e).find(":selected").each2(function(e,t){return r=i.optionToData(t),!1}),this.updateSelection(r),this.setPlaceholder(),n&&this.triggerChange({added:r,removed:s});else{if(!e&&0!==e)return this.clear(n),t;if(this.opts.initSelection===t)throw Error("cannot call val() if initSelection() is not defined");this.opts.element.val(e),this.opts.initSelection(this.opts.element,function(e){i.opts.element.val(e?i.id(e):""),i.updateSelection(e),i.setPlaceholder(),n&&i.triggerChange({added:e,removed:s})})}},clearSearch:function(){this.search.val(""),this.focusser.val("")},data:function(e,n){var r;return 0===arguments.length?(r=this.selection.data("select2-data"),r==t&&(r=null),r):(e&&""!==e?(r=this.data(),this.opts.element.val(e?this.id(e):""),this.updateSelection(e),n&&this.triggerChange({added:e,removed:r})):this.clear(n),t)}}),M=k(A,{createContainer:function(){var t=e(document.createElement("div")).attr({"class":"select2-container select2-container-multi"}).html(["<ul class='select2-choices'>","  <li class='select2-search-field'>","    <input type='text' autocomplete='off' autocorrect='off' autocapitilize='off' spellcheck='false' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi select2-display-none'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return t},prepareOpts:function(){var t=this.parent.prepareOpts.apply(this,arguments),n=this;return"select"===t.element.get(0).tagName.toLowerCase()?t.initSelection=function(e,t){var r=[];e.find(":selected").each2(function(e,t){r.push(n.optionToData(t))}),t(r)}:"data"in t&&(t.initSelection=t.initSelection||function(n,r){var o=s(n.val(),t.separator),u=[];t.query({matcher:function(n,r,s){var a=e.grep(o,function(e){return i(e,t.id(s))}).length;return a&&u.push(s),a},callback:e.isFunction(r)?function(){for(var e=[],n=0;o.length>n;n++)for(var s=o[n],a=0;u.length>a;a++){var f=u[a];if(i(s,t.id(f))){e.push(f),u.splice(a,1);break}}r(e)}:e.noop})}),t},selectChoice:function(e){var t=this.container.find(".select2-search-choice-focus");t.length&&e&&e[0]==t[0]||(t.length&&this.opts.element.trigger("choice-deselected",t),t.removeClass("select2-search-choice-focus"),e&&e.length&&(this.close(),e.addClass("select2-search-choice-focus"),this.opts.element.trigger("choice-selected",e)))},initContainer:function(){var n,r=".select2-choices";this.searchContainer=this.container.find(".select2-search-field"),this.selection=n=this.container.find(r);var i=this;this.selection.on("mousedown",".select2-search-choice",function(){i.search[0].focus(),i.selectChoice(e(this))}),this.search.attr("id","s2id_autogen"+_()),e("label[for='"+this.opts.element.attr("id")+"']").attr("for",this.search.attr("id")),this.search.on("input paste",this.bind(function(){this.isInterfaceEnabled()&&(this.opened()||this.open())})),this.search.attr("tabindex",this.elementTabIndex),this.keydowns=0,this.search.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()){++this.keydowns;var r=n.find(".select2-search-choice-focus"),i=r.prev(".select2-search-choice:not(.select2-locked)"),s=r.next(".select2-search-choice:not(.select2-locked)"),o=p(this.search);if(!(!r.length||e.which!=L.LEFT&&e.which!=L.RIGHT&&e.which!=L.BACKSPACE&&e.which!=L.DELETE&&e.which!=L.ENTER)){var u=r;return e.which==L.LEFT&&i.length?u=i:e.which==L.RIGHT?u=s.length?s:null:e.which===L.BACKSPACE?(this.unselect(r.first()),this.search.width(10),u=i.length?i:s):e.which==L.DELETE?(this.unselect(r.first()),this.search.width(10),u=s.length?s:null):e.which==L.ENTER&&(u=null),this.selectChoice(u),d(e),u&&u.length||this.open(),t}if((e.which===L.BACKSPACE&&1==this.keydowns||e.which==L.LEFT)&&0==o.offset&&!o.length)return this.selectChoice(n.find(".select2-search-choice:not(.select2-locked)").last()),d(e),t;if(this.selectChoice(null),this.opened())switch(e.which){case L.UP:case L.DOWN:return this.moveHighlight(e.which===L.UP?-1:1),d(e),t;case L.ENTER:return this.selectHighlighted(),d(e),t;case L.TAB:return this.selectHighlighted({noFocus:!0}),this.close(),t;case L.ESC:return this.cancel(e),d(e),t}if(e.which!==L.TAB&&!L.isControl(e)&&!L.isFunctionKey(e)&&e.which!==L.BACKSPACE&&e.which!==L.ESC){if(e.which===L.ENTER){if(this.opts.openOnEnter===!1)return;if(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey)return}this.open(),(e.which===L.PAGE_UP||e.which===L.PAGE_DOWN)&&d(e),e.which===L.ENTER&&d(e)}}})),this.search.on("keyup",this.bind(function(){this.keydowns=0,this.resizeSearch()})),this.search.on("blur",this.bind(function(t){this.container.removeClass("select2-container-active"),this.search.removeClass("select2-focused"),this.selectChoice(null),this.opened()||this.clearSearch(),t.stopImmediatePropagation(),this.opts.element.trigger(e.Event("select2-blur"))})),this.container.on("click",r,this.bind(function(t){this.isInterfaceEnabled()&&(e(t.target).closest(".select2-search-choice").length>0||(this.selectChoice(null),this.clearPlaceholder(),this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.open(),this.focusSearch(),t.preventDefault()))})),this.container.on("focus",r,this.bind(function(){this.isInterfaceEnabled()&&(this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())})),this.initContainerWidth(),this.opts.element.addClass("select2-offscreen"),this.clearSearch()},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.search.prop("disabled",!this.isInterfaceEnabled())},initSelection:function(){if(""===this.opts.element.val()&&""===this.opts.element.text()&&(this.updateSelection([]),this.close(),this.clearSearch()),this.select||""!==this.opts.element.val()){var e=this;this.opts.initSelection.call(null,this.opts.element,function(n){n!==t&&null!==n&&(e.updateSelection(n),e.close(),e.clearSearch())})}},clearSearch:function(){var e=this.getPlaceholder(),n=this.getMaxSearchWidth();e!==t&&0===this.getVal().length&&this.search.hasClass("select2-focused")===!1?(this.search.val(e).addClass("select2-default"),this.search.width(n>0?n:this.container.css("width"))):this.search.val("").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},opening:function(){this.clearPlaceholder(),this.resizeSearch(),this.parent.opening.apply(this,arguments),this.focusSearch(),this.updateResults(!0),this.search.focus(),this.opts.element.trigger(e.Event("select2-open"))},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close(),this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(t){var r=[],i=[],s=this;e(t).each(function(){0>n(s.id(this),r)&&(r.push(s.id(this)),i.push(this))}),t=i,this.selection.find(".select2-search-choice").remove(),e(t).each(function(){s.addSelectedChoice(this)}),s.postprocessResults()},tokenize:function(){var e=this.search.val();e=this.opts.tokenizer.call(this,e,this.data(),this.bind(this.onSelect),this.opts),null!=e&&e!=t&&(this.search.val(e),e.length>0&&this.open())},onSelect:function(e,t){this.triggerSelect(e)&&(this.addSelectedChoice(e),this.opts.element.trigger({type:"selected",val:this.id(e),choice:e}),(this.select||!this.opts.closeOnSelect)&&this.postprocessResults(),this.opts.closeOnSelect?(this.close(),this.search.width(10)):this.countSelectableResults()>0?(this.search.width(10),this.resizeSearch(),this.getMaximumSelectionSize()>0&&this.val().length>=this.getMaximumSelectionSize()&&this.updateResults(!0),this.positionDropdown()):(this.close(),this.search.width(10)),this.triggerChange({added:e}),t&&t.noFocus||this.focusSearch())},cancel:function(){this.close(),this.focusSearch()},addSelectedChoice:function(n){var r,i,s=!n.locked,o=e("<li class='select2-search-choice'>    <div></div>    <a href='#' onclick='return false;' class='select2-search-choice-close' tabindex='-1'></a></li>"),u=e("<li class='select2-search-choice select2-locked'><div></div></li>"),a=s?o:u,f=this.id(n),l=this.getVal();r=this.opts.formatSelection(n,a.find("div"),this.opts.escapeMarkup),r!=t&&a.find("div").replaceWith("<div>"+r+"</div>"),i=this.opts.formatSelectionCssClass(n,a.find("div")),i!=t&&a.addClass(i),s&&a.find(".select2-search-choice-close").on("mousedown",d).on("click dblclick",this.bind(function(t){this.isInterfaceEnabled()&&(e(t.target).closest(".select2-search-choice").fadeOut("fast",this.bind(function(){this.unselect(e(t.target)),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),this.close(),this.focusSearch()})).dequeue(),d(t))})).on("focus",this.bind(function(){this.isInterfaceEnabled()&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))})),a.data("select2-data",n),a.insertBefore(this.searchContainer),l.push(f),this.setVal(l)},unselect:function(e){var t,r,i=this.getVal();if(e=e.closest(".select2-search-choice"),0===e.length)throw"Invalid argument: "+e+". Must be .select2-search-choice";t=e.data("select2-data"),t&&(r=n(this.id(t),i),r>=0&&(i.splice(r,1),this.setVal(i),this.select&&this.postprocessResults()),e.remove(),this.opts.element.trigger({type:"removed",val:this.id(t),choice:t}),this.triggerChange({removed:t}))},postprocessResults:function(e,t,r){var i=this.getVal(),s=this.results.find(".select2-result"),o=this.results.find(".select2-result-with-children"),u=this;s.each2(function(e,t){var r=u.id(t.data("select2-data"));n(r,i)>=0&&(t.addClass("select2-selected"),t.find(".select2-result-selectable").addClass("select2-selected"))}),o.each2(function(e,t){t.is(".select2-result-selectable")||0!==t.find(".select2-result-selectable:not(.select2-selected)").length||t.addClass("select2-selected")}),-1==this.highlight()&&r!==!1&&u.highlight(0),!this.opts.createSearchChoice&&!s.filter(".select2-result:not(.select2-selected)").length>0&&(!e||e&&!e.more&&0===this.results.find(".select2-no-results").length)&&x(u.opts.formatNoMatches,"formatNoMatches")&&this.results.append("<li class='select2-no-results'>"+u.opts.formatNoMatches(u.search.val())+"</li>")},getMaxSearchWidth:function(){return this.selection.width()-o(this.search)},resizeSearch:function(){var e,t,n,r,i,s=o(this.search);e=m(this.search)+10,t=this.search.offset().left,n=this.selection.width(),r=this.selection.offset().left,i=n-(t-r)-s,e>i&&(i=n-s),40>i&&(i=n-s),0>=i&&(i=e),this.search.width(i)},getVal:function(){var e;return this.select?(e=this.select.val(),null===e?[]:e):(e=this.opts.element.val(),s(e,this.opts.separator))},setVal:function(t){var r;this.select?this.select.val(t):(r=[],e(t).each(function(){0>n(this,r)&&r.push(this)}),this.opts.element.val(0===r.length?"":r.join(this.opts.separator)))},buildChangeDetails:function(e,t){for(var t=t.slice(0),e=e.slice(0),n=0;t.length>n;n++)for(var r=0;e.length>r;r++)i(this.opts.id(t[n]),this.opts.id(e[r]))&&(t.splice(n,1),n--,e.splice(r,1),r--);return{added:t,removed:e}},val:function(n,r){var i,s=this;if(0===arguments.length)return this.getVal();if(i=this.data(),i.length||(i=[]),!n&&0!==n)return this.opts.element.val(""),this.updateSelection([]),this.clearSearch(),r&&this.triggerChange({added:this.data(),removed:i}),t;if(this.setVal(n),this.select)this.opts.initSelection(this.select,this.bind(this.updateSelection)),r&&this.triggerChange(this.buildChangeDetails(i,this.data()));else{if(this.opts.initSelection===t)throw Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,function(t){var n=e.map(t,s.id);s.setVal(n),s.updateSelection(t),s.clearSearch(),r&&s.triggerChange(this.buildChangeDetails(i,this.data()))})}this.clearSearch()},onSortStart:function(){if(this.select)throw Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0),this.searchContainer.hide()},onSortEnd:function(){var t=[],n=this;this.searchContainer.show(),this.searchContainer.appendTo(this.searchContainer.parent()),this.resizeSearch(),this.selection.find(".select2-search-choice").each(function(){t.push(n.opts.id(e(this).data("select2-data")))}),this.setVal(t),this.triggerChange()},data:function(n,r){var i,s,o=this;return 0===arguments.length?this.selection.find(".select2-search-choice").map(function(){return e(this).data("select2-data")}).get():(s=this.data(),n||(n=[]),i=e.map(n,function(e){return o.opts.id(e)}),this.setVal(i),this.updateSelection(n),this.clearSearch(),r&&this.triggerChange(this.buildChangeDetails(s,this.data())),t)}}),e.fn.select2=function(){var r,i,s,o,u,a=Array.prototype.slice.call(arguments,0),f=["val","destroy","opened","open","close","focus","isFocused","container","dropdown","onSortStart","onSortEnd","enable","readonly","positionDropdown","data","search"],l=["val","opened","isFocused","container","data"],c={search:"externalSearch"};return this.each(function(){if(0===a.length||"object"==typeof a[0])r=0===a.length?{}:e.extend({},a[0]),r.element=e(this),"select"===r.element.get(0).tagName.toLowerCase()?u=r.element.prop("multiple"):(u=r.multiple||!1,"tags"in r&&(r.multiple=u=!0)),i=u?new M:new O,i.init(r);else{if("string"!=typeof a[0])throw"Invalid arguments to select2 plugin: "+a;if(0>n(a[0],f))throw"Unknown method: "+a[0];if(o=t,i=e(this).data("select2"),i===t)return;if(s=a[0],"container"===s?o=i.container:"dropdown"===s?o=i.dropdown:(c[s]&&(s=c[s]),o=i[s].apply(i,a.slice(1))),n(a[0],l)>=0)return!1}}),o===t?this:o},e.fn.select2.defaults={width:"copy",loadMorePadding:0,closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(e,t,n,r){var i=[];return y(e.text,n.term,i,r),i.join("")},formatSelection:function(e,n,r){return e?r(e.text):t},sortResults:function(e){return e},formatResultCssClass:function(){return t},formatSelectionCssClass:function(){return t},formatNoMatches:function(){return"No matches found"},formatInputTooShort:function(e,t){var n=t-e.length;return"Please enter "+n+" more character"+(1==n?"":"s")},formatInputTooLong:function(e,t){var n=e.length-t;return"Please delete "+n+" character"+(1==n?"":"s")},formatSelectionTooBig:function(e){return"You can only select "+e+" item"+(1==e?"":"s")},formatLoadMore:function(){return"Loading more results..."},formatSearching:function(){return"Searching..."},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(e){return e.id},matcher:function(e,t){return(""+t).toUpperCase().indexOf((""+e).toUpperCase())>=0},separator:",",tokenSeparators:[],tokenizer:C,escapeMarkup:b,blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(e){return e},adaptDropdownCssClass:function(){return null}},e.fn.select2.ajaxDefaults={transport:e.ajax,params:{type:"GET",cache:!1,dataType:"json"}},window.Select2={query:{ajax:w,local:E,tags:S},util:{debounce:f,markMatch:y,escapeMarkup:b},"class":{"abstract":A,single:O,multi:M}}}}(jQuery)}.apply(e,arguments)})}(this),define("common/AttachReferenceView",["jquery","underscore","common/Emitter","jquery-select2"],function(e,t,n){function i(e){return{text:e,id:e}}var r=function(e){var n={autofocus:!0,destroyOnBlur:!0,toggleClass:"pressed",select2WrapperClass:"select2-wrapper",elementClass:"",placeholder:!1};t.extend(this,n,e),this.initialize.call(this)};return t.extend(r.prototype,n.prototype,{initialize:function(){this.trigger("initialize"),t.bindAll(this,"blur","sync","forceFocus","change"),this.$select2Wrapper=e("<div/>",{"class":this.select2WrapperClass}),this.$input=e("<input/>",{type:"hidden"}).data("original-value",this.tags),this.$element=e("<div/>",{"class":"attach-reference-container"}).addClass(this.elementClass).append(this.$input),this.$input.wrap(this.$select2Wrapper),this.$header instanceof e&&this.$element.prepend(this.$header),this.$container.prepend(this.$element),this.$input.val(this.tags).select2({tags:!0,minimumInputLength:1,placeholder:this.placeholder,initSelection:function(e,n){var r=e.data("original-value");n(t.map(r,i))},createSearchChoice:function(e){return i(e)},formatInputTooShort:function(e,t){var n=t-e.length;return"Enter a reference"},formatSearching:function(){return"Finding references..."},tokenSeparators:[","," "],containerCssClass:"attach-reference-view",ajax:{url:"/client-reference",dataType:"json",data:function(e,t){return{filter:e,limit:20,offset:(t-1)*20}},results:function(e,n){return{results:t.map(e.clientReferences,i),more:e.more}}}}),this.$input.data("select2").container.on("click",".select2-search-choice",this.forceFocus),this.$input.on("select2-blur",this.blur),this.$input.on("select2-close",this.blur),this.$input.on("change",this.change),this.autofocus&&(this.forceFocus(),this.$toggleElement instanceof e&&this.$toggleElement.addClass(this.toggleClass))},blur:function(){t.delay(function(t){var n=t.$input.data("select2");n&&!n.container.hasClass("select2-container-active")&&!n.container.hasClass("select2-dropdown-open")&&(t.trigger("blur"),t.$toggleElement instanceof e&&t.$toggleElement.removeClass(t.toggleClass),t.destroyOnBlur&&t.destroy())},200,this)},forceFocus:function(e){e&&e.preventDefault(),this.$input.select2("focus")},change:function(e){this.trigger("change",e)},clear:function(){this.$input.select2("data",null),this.trigger("clear")},getValue:function(){return this.$input.select2("val")},sync:function(e){this.trigger("sync",e),t.intersection(this.getValue(),e).length!==e.length&&this.$input.select2("data",t.map(e,i)),this.tags=e},destroy:function(){var n=this.$input.data("select2");this.trigger("destroy",this.getValue()),n&&n.container instanceof e&&n.container.off("click",".select2-search-choice",this.forceFocus),this.$input.select2("destroy"),this.$element.remove(),t.defer(function(){e("#select2-drop-mask").remove()})}}),r}),define("common/EventBinding",["underscore"],function(e){var t=function(t){e.extend(this,t),this.initialize.apply(this,arguments)};return e.extend(t.prototype,{initialize:function(){this.el.on(this.eventType,this.selector,this.handler)},destroy:function(){this.el.off(this.eventType,this.selector,this.handler),delete this.handler,delete this.eventType,delete this.el}}),t}),define("common/AttachReferenceViewBinding",["common/AttachReferenceView","common/EventBinding","jquery","underscore","third-party/domReady!"],function(e,t,n,r){var i=".js-attach-reference";return{bind:function(s){s=s instanceof n?s:n(document),this.$attachReferenceLinks=s.find(i);var o=this.eventBindings;this.$attachReferenceLinks.not("[data-built]").each(function(){var i=n(this);o.push(new t({el:i,eventType:"click",handler:function(i){function f(e){var t={productId:this.productId};e.added&&(t.add=[e.added.text]),e.removed&&(t.remove=[e.removed.text]),n.ajax({url:"/client-reference",type:"PUT",contentType:"application/json; charset=utf-8",dataType:"json",data:t})}function l(e){s.data("client-references",e),s.removeData("AttachReferenceView"),r.each(u,function(e){e.destroy()})}function c(e){var t={references:e.val};s.html(r.template('<% if (references.length > 0) { %> <span class="badge reference-count"><%- references.length %></span> <% } %>',t));var n=s.parents(".order-history-item"),i=n.find(".js-own-client-references"),o=n.find(".js-own-client-references-title");if(i.length>0){var u='<% _.each(references, function(ref) { %><li class="client-ref label"><%- ref %></li><% }); %>';i.html(r.template(u,t)),t.references.length>0?o.removeClass("hidden"):o.addClass("hidden")}}i.preventDefault(),i.stopPropagation();var s=n(this),o=s.data("client-references"),u=[];if(s.data("AttachReferenceView")instanceof e)s.data("AttachReferenceView").blur();else{var a=new e({$header:n("<div/>",{"class":"dropdown-header"}).text("Add a reference"),tags:o,$container:s.parent(),elementClass:"dropdown-menu",$toggleElement:s,tags:o,productId:s.attr("data-product-id")});u.push(new t({el:a,eventType:"change",handler:f})),u.push(new t({el:a,eventType:"change",handler:c})),u.push(new t({el:a,eventType:"destroy",handler:l})),s.data("AttachReferenceView",a)}}})),i.attr("data-built",!0)})},eventBindings:[],destroy:function(){r.each(this.$attachReferenceLinks,function(t){var r=n(t),i=r.data("AttachReferenceView");i instanceof e&&(i.destroy(),r.removeData("AttachReferenceView"))},this),r.each(this.eventBindings,function(e){e.destroy()}),this.eventBindings=[]},selector:i}}),define("common/Contacts",["jquery","common/EventBinding","underscore","third-party/domReady!"],function(e,t,n){return{events:[],attach:function(){this.events.push(new t({el:e("body"),selector:".facebox .face",eventType:"mouseenter",handler:function(){e(".facebox .slider").stop(!0,!0),e(this).css({zIndex:10}),e(this).find(".slider").animate({width:"show"})}})),this.events.push(new t({el:e("body"),selector:".facebox .face",eventType:"mouseleave",handler:function(){e(".facebox .slider").stop(!0,!0),e(this).find(".slider").animate({width:"hide"},function(){e(this).parents(".face").css({zIndex:0})})}}))},destroy:function(){n.each(this.events,function(e){e.destroy()})}}}),function(e,t){typeof define=="function"&&define.amd?define("NProgress",t):typeof exports=="object"?module.exports=t():e.NProgress=t()}(this,function(){function n(e,t,n){return e<t?t:e>n?n:e}function r(e){return(-1+e)*100}function i(e,n,i){var s;return t.positionUsing==="translate3d"?s={transform:"translate3d("+r(e)+"%,0,0)"}:t.positionUsing==="translate"?s={transform:"translate("+r(e)+"%,0)"}:s={"margin-left":r(e)+"%"},s.transition="all "+n+"ms "+i,s}function u(e,t){var n=typeof e=="string"?e:l(e);return n.indexOf(" "+t+" ")>=0}function a(e,t){var n=l(e),r=n+t;if(u(n,t))return;e.className=r.substring(1)}function f(e,t){var n=l(e),r;if(!u(e,t))return;r=n.replace(" "+t+" "," "),e.className=r.substring(1,r.length-1)}function l(e){return(" "+(e.className||"")+" ").replace(/\s+/gi," ")}function c(e){e&&e.parentNode&&e.parentNode.removeChild(e)}var e={};e.version="0.1.6";var t=e.settings={minimum:.08,easing:"ease",positionUsing:"",speed:200,trickle:!0,trickleRate:.02,trickleSpeed:800,showSpinner:!0,barSelector:'[role="bar"]',spinnerSelector:'[role="spinner"]',parent:"body",template:'<div class="bar" role="bar"><div class="peg"></div></div><div class="spinner" role="spinner"><div class="spinner-icon"></div></div>'};e.configure=function(e){var n,r;for(n in e)r=e[n],r!==undefined&&e.hasOwnProperty(n)&&(t[n]=r);return this},e.status=null,e.set=function(r){var u=e.isStarted();r=n(r,t.minimum,1),e.status=r===1?null:r;var a=e.render(!u),f=a.querySelector(t.barSelector),l=t.speed,c=t.easing;return a.offsetWidth,s(function(n){t.positionUsing===""&&(t.positionUsing=e.getPositioningCSS()),o(f,i(r,l,c)),r===1?(o(a,{transition:"none",opacity:1}),a.offsetWidth,setTimeout(function(){o(a,{transition:"all "+l+"ms linear",opacity:0}),setTimeout(function(){e.remove(),n()},l)},l)):setTimeout(n,l)}),this},e.isStarted=function(){return typeof e.status=="number"},e.start=function(){e.status||e.set(0);var n=function(){setTimeout(function(){if(!e.status)return;e.trickle(),n()},t.trickleSpeed)};return t.trickle&&n(),this},e.done=function(t){return!t&&!e.status?this:e.inc(.3+.5*Math.random()).set(1)},e.inc=function(t){var r=e.status;return r?(typeof t!="number"&&(t=(1-r)*n(Math.random()*r,.1,.95)),r=n(r+t,0,.994),e.set(r)):e.start()},e.trickle=function(){return e.inc(Math.random()*t.trickleRate)},function(){var t=0,n=0;e.promise=function(r){return!r||r.state()=="resolved"?this:(n==0&&e.start(),t++,n++,r.always(function(){n--,n==0?(t=0,e.done()):e.set((t-n)/t)}),this)}}(),e.render=function(n){if(e.isRendered())return document.getElementById("nprogress");a(document.documentElement,"nprogress-busy");var i=document.createElement("div");i.id="nprogress",i.innerHTML=t.template;var s=i.querySelector(t.barSelector),u=n?"-100":r(e.status||0),f=document.querySelector(t.parent),l;return o(s,{transition:"all 0 linear",transform:"translate3d("+u+"%,0,0)"}),t.showSpinner||(l=i.querySelector(t.spinnerSelector),l&&c(l)),f!=document.body&&a(f,"nprogress-custom-parent"),f.appendChild(i),i},e.remove=function(){f(document.documentElement,"nprogress-busy"),f(document.querySelector(t.parent),"nprogress-custom-parent");var e=document.getElementById("nprogress");e&&c(e)},e.isRendered=function(){return!!document.getElementById("nprogress")},e.getPositioningCSS=function(){var e=document.body.style,t="WebkitTransform"in e?"Webkit":"MozTransform"in e?"Moz":"msTransform"in e?"ms":"OTransform"in e?"O":"";return t+"Perspective"in e?"translate3d":t+"Transform"in e?"translate":"margin"};var s=function(){function t(){var n=e.shift();n&&n(t)}var e=[];return function(n){e.push(n),e.length==1&&t()}}(),o=function(){function n(e){return e.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,function(e,t){return t.toUpperCase()})}function r(t){var n=document.body.style;if(t in n)return t;var r=e.length,i=t.charAt(0).toUpperCase()+t.slice(1),s;while(r--){s=e[r]+i;if(s in n)return s}return t}function i(e){return e=n(e),t[e]||(t[e]=r(e))}function s(e,t,n){t=i(t),e.style[t]=n}var e=["Webkit","O","Moz","ms"],t={};return function(e,t){var n=arguments,r,i;if(n.length==2)for(r in t)i=t[r],i!==undefined&&t.hasOwnProperty(r)&&s(e,r,i);else s(e,n[1],n[2])}}();return e}),define("common/Accordion",["jquery","underscore"],function(e){function i(e){this.$el=e,this.attach()}var t="js-accordion-open",n="js-accordion-title",r="js-accordion-body";return _.extend(i.prototype,{attach:function(){this.$el.each(function(){var i=e(this),s=i.find("."+n),o=i.find("."+r);s.on("click",function(){i.toggleClass(t),o.stop().slideToggle()})})},closeAll:function(){this.$el.each(function(){var i=e(this),s=i.find("."+n),o=i.find("."+r);i.removeClass(t),o.hide()})},open:function(e){e.addClass(t),e.find("."+r).show()},focus:function(e,t){var n=e.is("input")?e:e.find("input:first");this.open(e.parents(t)),n.focus()}}),i}),define("common/Duedil.AjaxUtils",["jquery","common/Duedil"],function(e,t){t.AjaxUtils={partials:{update:function(n){var r=n||".pjax-extras";e(r).each(function(){var n=e(this),r=n.data("for");t.AjaxUtils.partials.inject(n.children(),r,n.data("transition")),n.remove()})},inject:function(n,r,i){var s=i||"replace";t.AjaxUtils.partials.transitions[s](e(r),n)},transitions:{replace:function(e,t){e.empty().append(t)},fade:function(e,t){var n=e.children();t.hide().appendTo(e),n.remove(),t.fadeIn("fast")}}},ajaxSyncQueue:function(){var t=function(t){var n=[];this.name=t,this.in_progress=!1;var r=this;this.push=function(t){if(e.isArray(t)){for(var i=0;i<t.length;i++)r.push(t[i]);return}t.complete?t.complete=[t.complete]:t.complete=[],t.complete.unshift(function(){r.in_progress=!1,r.dequeue()}),n.push(t),r.dequeue()},this.dequeue=function(){if(r.in_progress)return;if(n.length>0){var t=n.shift();r.in_progress=e.ajax(t)}else r.onDrain&&r.onDrain()},this.purge=function(){r.onDrain=!1,n=[],r.in_progress&&r.in_progress.abort()}},n={};return function(e){return n[e]||(n[e]=new t(e)),n[e]}}()}}),function(root){define("third-party/json2",[],function(){return function(){return typeof JSON!="object"&&(JSON={}),function(){function f(e){return e<10?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return typeof t=="string"?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,r,i,s,o=gap,u,a=t[e];a&&typeof a=="object"&&typeof a.toJSON=="function"&&(a=a.toJSON(e)),typeof rep=="function"&&(a=rep.call(t,e,a));switch(typeof a){case"string":return quote(a);case"number":return isFinite(a)?String(a):"null";case"boolean":case"null":return String(a);case"object":if(!a)return"null";gap+=indent,u=[];if(Object.prototype.toString.apply(a)==="[object Array]"){s=a.length;for(n=0;n<s;n+=1)u[n]=str(n,a)||"null";return i=u.length===0?"[]":gap?"[\n"+gap+u.join(",\n"+gap)+"\n"+o+"]":"["+u.join(",")+"]",gap=o,i}if(rep&&typeof rep=="object"){s=rep.length;for(n=0;n<s;n+=1)typeof rep[n]=="string"&&(r=rep[n],i=str(r,a),i&&u.push(quote(r)+(gap?": ":":")+i))}else for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&(i=str(r,a),i&&u.push(quote(r)+(gap?": ":":")+i));return i=u.length===0?"{}":gap?"{\n"+gap+u.join(",\n"+gap)+"\n"+o+"}":"{"+u.join(",")+"}",gap=o,i}}typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx,escapable,gap,indent,meta,rep;typeof JSON.stringify!="function"&&(escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},JSON.stringify=function(e,t,n){var r;gap="",indent="";if(typeof n=="number")for(r=0;r<n;r+=1)indent+=" ";else typeof n=="string"&&(indent=n);rep=t;if(!t||typeof t=="function"||typeof t=="object"&&typeof t.length=="number")return str("",{"":e});throw new Error("JSON.stringify")}),typeof JSON.parse!="function"&&(cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,JSON.parse=function(text,reviver){function walk(e,t){var n,r,i=e[t];if(i&&typeof i=="object")for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(r=walk(i,n),r!==undefined?i[n]=r:delete i[n]);return reviver.call(e,t,i)}var j;text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),typeof reviver=="function"?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),root.JSON=JSON}.apply(root,arguments)})}(this),define("common/Duedil.analytics",["jquery","common/Duedil","third-party/analytics","third-party/json2","third-party/domReady!"],function(e,t,n){t.analytics={key:"apiKey",GELHost:null,loadTime:0,init:function(){this.GELHost=window.gel_host,this.loadTime=(new Date).getTime(),n.initialize({Vero:{apiKey:"346b3db8b8eeffda613b8bf90f3c29c0fc304eb2",authToken:"MzQ2YjNkYjhiOGVlZmZkYTYxM2I4YmY5MGYzYzI5YzBmYzMwNGViMjoyNGE1YzhlNWE5OTA0MTUxYjVhMDdkY2I5MjhhNGY2MjYwMzQ4YTE3"},Olark:{siteId:"8893-885-10-9921"},Qualaroo:{customerId:"50710",siteToken:"aHM"},"Google Analytics":{trackingId:"UA-28986447-3"}})},getTrackingId:function(){return e.cookies.get("trackingId")},track:function(t,r){var i=new Date(parseInt(server_time,10)*1e3+((new Date).getTime()-this.loadTime));r=typeof r=="undefined"?{}:r,r.trackingId=this.getTrackingId(),e.post(this.GELHost,JSON.stringify({secret:"",user_id:n.user().id(),event:t,properties:r,timestamp:i,context:{library:"analytics.js"},action:"track"})),n.track(t,r)},identify:function(e,t){n.identify(e,t)},getProps:function(t){t instanceof e||(t=e(t));var n={text:t.text(),currentURL:window.location.pathname,label:""};return t.attr("id")&&(n.id=t.attr("id")),t.attr("class")&&(n["class"]=t.attr("class")),t.attr("href")&&(n.target=t.attr("href")),t.parents(".widget").length>0&&(n.widget=t.parents(".widget").attr("id")),n.widget&&(n.label+=n.widget+"/"),n.text&&(n.label+=n.text),n},pageview:function(e){e=e||document.referrer;var r={providers:{All:!1,Vero:!0}};n.pageview(e),t.analytics.track("Page loaded",{prevURL:e,currentURL:document.location.href},r)}},t.analytics.init(),t.analytics.identify(user.email,{name:user.name,email:user.email}),t.analytics.pageview(),e("body").on("click","a[data-pjax]",function(){t.analytics.track("Clicked Pjax Link",t.analytics.getProps(e(this)))}),e(document).on("pjax:beforeSend",function(n){var r=window.location.href;e(document).one("pjax:end",function(e){t.analytics.pageview(r)})}),e("body").on("click",".button, button",function(){t.analytics.track("Clicked Button",t.analytics.getProps(e(this)))}),e("body").on("shown hidden",function(n){e(n.target).hasClass("modal")&&(t.log("Modal: "+n.type),t.analytics.track("Modal: "+n.type,{"class":e(n.target).attr("class")}),e(n.target).hasClass("plans-offer-modal")&&t.analytics.identify(user.email,{seenPlansModal:!0}))})}),define("common/Duedil.collapseMessages",["jquery","common/Duedil"],function(e,t){t.collapseMessages=function(){e("#messages .close").on("click",function(){var t=e(this).parent();t.slideUp(100,function(){t.siblings().length||e("#messages").remove()})})}}),define("common/Duedil.Commerce",["jquery","common/Duedil","common/Duedil.AjaxUtils"],function(e,t){t.Commerce={UNLIMITED_BALANCE:"unlimited",init:function(){var n=this;n.balanceUpdateTooltipCounter=0,e(window.document).on("quota-change.commerce_init",function(r,i){if(!!i&&!!i.quotas&&i.quotas.length>0){t.log("COMMERCE :: Quota changed event");var s="",o=null,u=0,a=i.quotas.length;e.each(i.quotas,function(e,r){u++,u==1&&(s+="Your balance has been updated to "),s+=r.balance===n.UNLIMITED_BALANCE?n.UNLIMITED_BALANCE+" "+r.name.toLowerCase()+"s":t.helpers.number_format(r.balance)+" "+(r.name.toLowerCase()+(r.balance==1?"":"s")),a>1&&(u==a-1?s+=" and ":u!=a&&(s+=", "))}),o=e("#session .avatar").tooltip("destroy").tooltip({title:s,html:!0,container:"#user-top-bar",trigger:"manual",placement:"bottom"}).tooltip("show").data("tooltip"),n.balanceUpdateTooltipCounter++,setTimeout(function(){n.balanceUpdateTooltipCounter--,n.balanceUpdateTooltipCounter||o.destroy()},5e3)}else t.log("COMMERCE :: Quota changed event does not contain any quota information")}),e(window.document).on("balance-change.commerce_init",function(r,i){t.log("COMMERCE :: Balance change nofication"),!i||!i.balances?t.log("COMMERCE :: Notification does not contain any balance information (â¯Â°â¡Â°ï¼â¯ï¸µ â»ââ»"):e.each(i.balances,function(r,i){t.log("  COMMERCE :: Processing balance for type "+r),e(".actions[data-product-type='"+r+"']").each(function(){t.log("    COMMERCE :: Processing actions element",this);var r=e(".buy-wrapper:visible",this).length,s=this;e.each(i,function(i,o){var u=e(".buy-wrapper[data-method='"+o[0]+"']",s),a=e(u).data("cost");if(o[1]!=n.UNLIMITED_BALANCE&&o[1]<=0)t.log("      COMMERCE :: Balance is zero therefore this method should be ignored");else{t.log("        COMMERCE :: Testing method with cost '"+a+"' and balance '"+o[1]+"'");if(o[1]==n.UNLIMITED_BALANCE||a<=o[1])return t.log("        COMMERCE :: Balance is either unlimited or the cost < the balance, great success"),r?(t.log("      COMMERCE :: Buy buttons are visible, make sure we're showing the right one"),e(u).show().addClass("covering-method").siblings().hide().removeClass("covering-method")):(t.log("      COMMERCE :: No buy buttons visible, don't do anything"),e(u).addClass("covering-method").siblings().removeClass("covering-method")),!1;t.log("        COMMERCE :: This method can't cover the cost, continue")}})})})})},_basketQ:null,basketQueue:function(){return this._basketQ||(this._basketQ=t.AjaxUtils.ajaxSyncQueue("commerce_basket_add")),this._basketQ},handleResponse:function(n){n._events&&t.Commerce.fireEvents(n._events);if(n._page_regions){for(var r=0;r<n._page_regions.length;r++)injection=n._page_regions[r],t.AjaxUtils.partials.inject(e(injection.html),injection.target,injection.transition);t.helpers.bindTooltips()}},uiResponseHandler:function(n){var r={errors:{handler:function(r){var i=[];e.each(r,function(e,t){i.push(t.content.text)});var s=n.errors.tooltip;if(!s||!s.target){t.log("Commerce default error handler wasn't given an elem to show tooltips for; following messages are getting discarded!"),e.each(i,function(e,n){t.log(n)});return}$elem=e(s.target),$elem.tooltip("destroy").tooltip({title:i.join(" "),placement:s.placement,container:s.container,trigger:"manual"}),$elem.removeClass("disabled").removeAttr("disabled").tooltip("show"),setTimeout(function(){$elem.tooltip("hide")},s.timeout)},tooltip:{placement:"right",container:"body",timeout:5e3}}};return n=e.extend(!0,{},n,r),function(e){t.Commerce.handleResponse.apply(this,arguments),e&&e._messages&&e._messages.error&&e._messages.error.length>0&&typeof n.errors.handler=="function"&&n.errors.handler(e._messages.error)}},fireEvents:function(t){if(!t||t.length===0)return;e.each(t,function(t,n){e(window.document).trigger(n.name,n.data)})},availabilityPoller:function(n,r,i){return function(){r=r||document;var s=t.AjaxUtils.ajaxSyncQueue(i||"pending-products");s.purge();var o=!1,u={start:function(){s.onDrain=function(){o=window.setTimeout(u.start,750)};var t=n();e.each(t,function(t,n){s.push({url:"/product/"+n+"/deliverability",success:function(t){t.known&&t.available&&e(r).trigger("product-available",n)},error:function(t,i,s){var o=null;!t.responseText||(o=e.parseJSON(t.responseText)),o&&o.known&&!o.available&&e(r).trigger("product-unavailable",n)}})})},stop:function(){s.purge(),o&&window.clearTimeout(o)}};return u}()}}}),function(e){define("Hogan",[],function(){return function(){var t={};(function(e,t){function a(e){return String(e===null||e===undefined?"":e)}function f(e){return e=a(e),u.test(e)?e.replace(n,"&amp;").replace(r,"&lt;").replace(i,"&gt;").replace(s,"&#39;").replace(o,"&quot;"):e}e.Template=function(e,n,r,i){this.r=e||this.r,this.c=r,this.options=i,this.text=n||"",this.buf=t?[]:""},e.Template.prototype={r:function(e,t,n){return""},v:f,t:a,render:function(t,n,r){return this.ri([t],n||{},r)},ri:function(e,t,n){return this.r(e,t,n)},rp:function(e,t,n,r){var i=n[e];return i?(this.c&&typeof i=="string"&&(i=this.c.compile(i,this.options)),i.ri(t,n,r)):""},rs:function(e,t,n){var r=e[e.length-1];if(!l(r)){n(e,t,this);return}for(var i=0;i<r.length;i++)e.push(r[i]),n(e,t,this),e.pop()},s:function(e,t,n,r,i,s,o){var u;return l(e)&&e.length===0?!1:(typeof e=="function"&&(e=this.ls(e,t,n,r,i,s,o)),u=e===""||!!e,!r&&u&&t&&t.push(typeof e=="object"?e:t[t.length-1]),u)},d:function(e,t,n,r){var i=e.split("."),s=this.f(i[0],t,n,r),o=null;if(e==="."&&l(t[t.length-2]))return t[t.length-1];for(var u=1;u<i.length;u++)s&&typeof s=="object"&&i[u]in s?(o=s,s=s[i[u]]):s="";return r&&!s?!1:(!r&&typeof s=="function"&&(t.push(o),s=this.lv(s,t,n),t.pop()),s)},f:function(e,t,n,r){var i=!1,s=null,o=!1;for(var u=t.length-1;u>=0;u--){s=t[u];if(s&&typeof s=="object"&&e in s){i=s[e],o=!0;break}}return o?(!r&&typeof i=="function"&&(i=this.lv(i,t,n)),i):r?!1:""},ho:function(e,t,n,r,i){var s=this.c,o=this.options;o.delimiters=i;var r=e.call(t,r);return r=r==null?String(r):r.toString(),this.b(s.compile(r,o).render(t,n)),!1},b:t?function(e){this.buf.push(e)}:function(e){this.buf+=e},fl:t?function(){var e=this.buf.join("");return this.buf=[],e}:function(){var e=this.buf;return this.buf="",e},ls:function(e,t,n,r,i,s,o){var u=t[t.length-1],a=null;if(!r&&this.c&&e.length>0)return this.ho(e,u,n,this.text.substring(i,s),o);a=e.call(u);if(typeof a=="function"){if(r)return!0;if(this.c)return this.ho(a,u,n,this.text.substring(i,s),o)}return a},lv:function(e,t,n){var r=t[t.length-1],i=e.call(r);if(typeof i=="function"){i=a(i.call(r));if(this.c&&~i.indexOf("{{"))return this.c.compile(i,this.options).render(r,n)}return a(i)}};var n=/&/g,r=/</g,i=/>/g,s=/\'/g,o=/\"/g,u=/[&<>\"\']/,l=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"}})(typeof exports!="undefined"?exports:t),function(e){function u(e){e.n.substr(e.n.length-1)==="}"&&(e.n=e.n.substring(0,e.n.length-1))}function a(e){return e.trim?e.trim():e.replace(/^\s*|\s*$/g,"")}function f(e,t,n){if(t.charAt(n)!=e.charAt(0))return!1;for(var r=1,i=e.length;r<i;r++)if(t.charAt(n+r)!=e.charAt(r))return!1;return!0}function l(e,t,n,r){var i=[],s=null,o=null;while(e.length>0){o=e.shift();if(o.tag=="#"||o.tag=="^"||c(o,r))n.push(o),o.nodes=l(e,o.tag,n,r),i.push(o);else{if(o.tag=="/"){if(n.length===0)throw new Error("Closing tag without opener: /"+o.n);s=n.pop();if(o.n!=s.n&&!h(o.n,s.n,r))throw new Error("Nesting error: "+s.n+" vs. "+o.n);return s.end=o.i,i}i.push(o)}}if(n.length>0)throw new Error("missing closing tag: "+n.pop().n);return i}function c(e,t){for(var n=0,r=t.length;n<r;n++)if(t[n].o==e.n)return e.tag="#",!0}function h(e,t,n){for(var r=0,i=n.length;r<i;r++)if(n[r].c==e&&n[r].o==t)return!0}function p(e){return e.replace(s,"\\\\").replace(n,'\\"').replace(r,"\\n").replace(i,"\\r")}function d(e){return~e.indexOf(".")?"d":"f"}function v(e){var t="";for(var n=0,r=e.length;n<r;n++){var i=e[n].tag;i=="#"?t+=m(e[n].nodes,e[n].n,d(e[n].n),e[n].i,e[n].end,e[n].otag+" "+e[n].ctag):i=="^"?t+=g(e[n].nodes,e[n].n,d(e[n].n)):i=="<"||i==">"?t+=y(e[n]):i=="{"||i=="&"?t+=b(e[n].n,d(e[n].n)):i=="\n"?t+=E('"\\n"'+(e.length-1==n?"":" + i")):i=="_v"?t+=w(e[n].n,d(e[n].n)):i===undefined&&(t+=E('"'+p(e[n])+'"'))}return t}function m(e,t,n,r,i,s){return"if(_.s(_."+n+'("'+p(t)+'",c,p,1),'+"c,p,0,"+r+","+i+',"'+s+'")){'+"_.rs(c,p,"+"function(c,p,_){"+v(e)+"});c.pop();}"}function g(e,t,n){return"if(!_.s(_."+n+'("'+p(t)+'",c,p,1),c,p,1,0,0,"")){'+v(e)+"};"}function y(e){return'_.b(_.rp("'+p(e.n)+'",c,p,"'+(e.indent||"")+'"));'}function b(e,t){return"_.b(_.t(_."+t+'("'+p(e)+'",c,p,0)));'}function w(e,t){return"_.b(_.v(_."+t+'("'+p(e)+'",c,p,0)));'}function E(e){return"_.b("+e+");"}var t=/\S/,n=/\"/g,r=/\n/g,i=/\r/g,s=/\\/g,o={"#":1,"^":2,"/":3,"!":4,">":5,"<":6,"=":7,_v:8,"{":9,"&":10};e.scan=function(n,r){function S(){v.length>0&&(m.push(new String(v)),v="")}function x(){var e=!0;for(var n=b;n<m.length;n++){e=m[n].tag&&o[m[n].tag]<o._v||!m[n].tag&&m[n].match(t)===null;if(!e)return!1}return e}function T(e,t){S();if(e&&x())for(var n=b,r;n<m.length;n++)m[n].tag||((r=m[n+1])&&r.tag==">"&&(r.indent=m[n].toString()),m.splice(n,1));else t||m.push({tag:"\n"});g=!1,b=m.length}function N(e,t){var n="="+E,r=e.indexOf(n,t),i=a(e.substring(e.indexOf("=",t)+1,r)).split(" ");return w=i[0],E=i[1],r+n.length-1}var i=n.length,s=0,l=1,c=2,h=s,p=null,d=null,v="",m=[],g=!1,y=0,b=0,w="{{",E="}}";r&&(r=r.split(" "),w=r[0],E=r[1]);for(y=0;y<i;y++)h==s?f(w,n,y)?(--y,S(),h=l):n.charAt(y)=="\n"?T(g):v+=n.charAt(y):h==l?(y+=w.length-1,d=o[n.charAt(y+1)],p=d?n.charAt(y+1):"_v",p=="="?(y=N(n,y),h=s):(d&&y++,h=c),g=y):f(E,n,y)?(m.push({tag:p,n:a(v),otag:w,ctag:E,i:p=="/"?g-E.length:y+w.length}),v="",y+=E.length-1,h=s,p=="{"&&(E=="}}"?y++:u(m[m.length-1]))):v+=n.charAt(y);return T(g,!0),m},e.generate=function(t,n,r){var i='var _=this;_.b(i=i||"");'+v(t)+"return _.fl();";return r.asString?"function(c,p,i){"+i+";}":new e.Template(new Function("c","p","i",i),n,e,r)},e.parse=function(e,t,n){return n=n||{},l(e,"",[],n.sectionTags||[])},e.cache={},e.compile=function(e,t){t=t||{};var n=e+"||"+!!t.asString,r=this.cache[n];return r?r:(r=this.generate(this.parse(this.scan(e,t.delimiters),e,t),e,t),this.cache[n]=r)}}(typeof exports!="undefined"?exports:t);var n=function(e){function t(t,n,r,i){var s=this.f(t,n,r,0),o=n;return s&&(o=o.concat(s)),e.Template.prototype.rp.call(this,t,o,r,i)}var n=function(n,r,i){this.rp=t,e.Template.call(this,n,r,i)};n.prototype=e.Template.prototype;var r,i=function(){this.cache={},this.generate=function(e,t,i){return new n(new Function("c","p","i",e),t,r)}};return i.prototype=e,r=new i,{to_html:function(e,t,n,i){var s=r.compile(e),o=s.render(t,n);if(!i)return o;i(o)}}}(t);return e.Hogan=t}.apply(e,arguments)})}(this),function(e){define("twitter-typeahead",["jquery"],function(){return function(){(function(e){var t="0.9.3",n={isMsie:function(){var e=/(msie) ([\w.]+)/i.exec(navigator.userAgent);return e?parseInt(e[2],10):!1},isBlankString:function(e){return!e||/^\s*$/.test(e)},escapeRegExChars:function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(e){return typeof e=="string"},isNumber:function(e){return typeof e=="number"},isArray:e.isArray,isFunction:e.isFunction,isObject:e.isPlainObject,isUndefined:function(e){return typeof e=="undefined"},bind:e.proxy,bindAll:function(t){var n;for(var r in t)e.isFunction(n=t[r])&&(t[r]=e.proxy(n,t))},indexOf:function(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1},each:e.each,map:e.map,filter:e.grep,every:function(t,n){var r=!0;return t?(e.each(t,function(e,i){if(!(r=n.call(null,i,e,t)))return!1}),!!r):r},some:function(t,n){var r=!1;return t?(e.each(t,function(e,i){if(r=n.call(null,i,e,t))return!1}),!!r):r},mixin:e.extend,getUniqueId:function(){var e=0;return function(){return e++}}(),defer:function(e){setTimeout(e,0)},debounce:function(e,t,n){var r,i;return function(){var s=this,o=arguments,u,a;return u=function(){r=null,n||(i=e.apply(s,o))},a=n&&!r,clearTimeout(r),r=setTimeout(u,t),a&&(i=e.apply(s,o)),i}},throttle:function(e,t){var n,r,i,s,o,u;return o=0,u=function(){o=new Date,i=null,s=e.apply(n,r)},function(){var a=new Date,f=t-(a-o);return n=this,r=arguments,f<=0?(clearTimeout(i),i=null,o=a,s=e.apply(n,r)):i||(i=setTimeout(u,f)),s}},tokenizeQuery:function(t){return e.trim(t).toLowerCase().split(/[\s]+/)},tokenizeText:function(t){return e.trim(t).toLowerCase().split(/[\s\-_]+/)},getProtocol:function(){return location.protocol},noop:function(){}},r=function(){var e=/\s+/;return{on:function(t,n){var r;if(!n)return this;this._callbacks=this._callbacks||{},t=t.split(e);while(r=t.shift())this._callbacks[r]=this._callbacks[r]||[],this._callbacks[r].push(n);return this},trigger:function(t,n){var r,i;if(!this._callbacks)return this;t=t.split(e);while(r=t.shift())if(i=this._callbacks[r])for(var s=0;s<i.length;s+=1)i[s].call(this,{type:r,data:n});return this}}}(),i=function(){function r(t){(!t||!t.el)&&e.error("EventBus initialized without el"),this.$el=e(t.el)}var t="typeahead:";return n.mixin(r.prototype,{trigger:function(e){var n=[].slice.call(arguments,1);this.$el.trigger(t+e,n)}}),r}(),s=function(){function i(e){this.prefix=["__",e,"__"].join(""),this.ttlKey="__ttl__",this.keyMatcher=new RegExp("^"+this.prefix)}function s(){return(new Date).getTime()}function o(e){return JSON.stringify(n.isUndefined(e)?null:e)}function u(e){return JSON.parse(e)}var e,t;try{e=window.localStorage,e.setItem("~~~","!"),e.removeItem("~~~")}catch(r){e=null}return e&&window.JSON?t={_prefix:function(e){return this.prefix+e},_ttlKey:function(e){return this._prefix(e)+this.ttlKey},get:function(t){return this.isExpired(t)&&this.remove(t),u(e.getItem(this._prefix(t)))},set:function(t,r,i){return n.isNumber(i)?e.setItem(this._ttlKey(t),o(s()+i)):e.removeItem(this._ttlKey(t)),e.setItem(this._prefix(t),o(r))},remove:function(t){return e.removeItem(this._ttlKey(t)),e.removeItem(this._prefix(t)),this},clear:function(){var t,n,r=[],i=e.length;for(t=0;t<i;t++)(n=e.key(t)).match(this.keyMatcher)&&r.push(n.replace(this.keyMatcher,""));for(t=r.length;t--;)this.remove(r[t]);return this},isExpired:function(t){var r=u(e.getItem(this._ttlKey(t)));return n.isNumber(r)&&s()>r?!0:!1}}:t={get:n.noop,set:n.noop,remove:n.noop,clear:n.noop,isExpired:n.noop},n.mixin(i.prototype,t),i}(),o=function(){function e(e){n.bindAll(this),e=e||{},this.sizeLimit=e.sizeLimit||10,this.cache={},this.cachedKeysByAge=[]}return n.mixin(e.prototype,{get:function(e){return this.cache[e]},set:function(e,t){var n;this.cachedKeysByAge.length===this.sizeLimit&&(n=this.cachedKeysByAge.shift(),delete this.cache[n]),this.cache[e]=t,this.cachedKeysByAge.push(e)}}),e}(),u=function(){function u(e){n.bindAll(this),e=n.isString(e)?{url:e}:e,s=s||new o,i=n.isNumber(e.maxParallelRequests)?e.maxParallelRequests:i||6,this.url=e.url,this.wildcard=e.wildcard||"%QUERY",this.filter=e.filter,this.replace=e.replace,this.ajaxSettings={type:"get",cache:e.cache,timeout:e.timeout,dataType:e.dataType||"json",beforeSend:e.beforeSend},this._get=(/^throttle$/i.test(e.rateLimitFn)?n.throttle:n.debounce)(this._get,e.rateLimitWait||300)}function a(){t++}function f(){t--}function l(){return t<i}var t=0,r={},i,s;return n.mixin(u.prototype,{_get:function(e,t){function r(r){var i=n.filter?n.filter(r):r;t&&t(i),s.set(e,r)}var n=this;l()?this._sendRequest(e).done(r):this.onDeckRequestArgs=[].slice.call(arguments,0)},_sendRequest:function(t){function s(){f(),r[t]=null,n.onDeckRequestArgs&&(n._get.apply(n,n.onDeckRequestArgs),n.onDeckRequestArgs=null)}var n=this,i=r[t];return i||(a(),i=r[t]=e.ajax(t,this.ajaxSettings).always(s)),i},get:function(e,t){var r=this,i=encodeURIComponent(e||""),o,u;return t=t||n.noop,o=this.replace?this.replace(this.url,i):this.url.replace(this.wildcard,i),(u=s.get(o))?n.defer(function(){t(r.filter?r.filter(u):u)}):this._get(o,t),!!u}}),u}(),a=function(){function i(t){n.bindAll(this),n.isString(t.template)&&!t.engine&&e.error("no template engine specified"),!t.local&&!t.prefetch&&!t.remote&&e.error("one of local, prefetch, or remote is required"),this.name=t.name||n.getUniqueId(),this.limit=t.limit||5,this.minLength=t.minLength||1,this.header=t.header,this.footer=t.footer,this.valueKey=t.valueKey||"value",this.template=o(t.template,t.engine,this.valueKey),this.local=t.local,this.prefetch=t.prefetch,this.remote=t.remote,this.itemHash={},this.adjacencyList={},this.storage=t.name?new s(t.name):null}function o(e,t,r){var i,s;return n.isFunction(e)?i=e:n.isString(e)?(s=t.compile(e),i=n.bind(s.render,s)):i=function(e){return"<p>"+e[r]+"</p>"},i}var r={thumbprint:"thumbprint",protocol:"protocol",itemHash:"itemHash",adjacencyList:"adjacencyList"};return n.mixin(i.prototype,{_processLocalData:function(e){this._mergeProcessedData(this._processData(e))},_loadPrefetchData:function(i){function p(e){var t=i.filter?i.filter(e):e,u=s._processData(t),a=u.itemHash,f=u.adjacencyList;s.storage&&(s.storage.set(r.itemHash,a,i.ttl),s.storage.set(r.adjacencyList,f,i.ttl),s.storage.set(r.thumbprint,o,i.ttl),s.storage.set(r.protocol,n.getProtocol(),i.ttl)),s._mergeProcessedData(u)}var s=this,o=t+(i.thumbprint||""),u,a,f,l,c,h;return this.storage&&(u=this.storage.get(r.thumbprint),a=this.storage.get(r.protocol),f=this.storage.get(r.itemHash),l=this.storage.get(r.adjacencyList)),c=u!==o||a!==n.getProtocol(),i=n.isString(i)?{url:i}:i,i.ttl=n.isNumber(i.ttl)?i.ttl:864e5,f&&l&&!c?(this._mergeProcessedData({itemHash:f,adjacencyList:l}),h=e.Deferred().resolve()):h=e.getJSON(i.url).done(p),h},_transformDatum:function(e){var t=n.isString(e)?e:e[this.valueKey],r=e.tokens||n.tokenizeText(t),i={value:t,tokens:r};return n.isString(e)?(i.datum={},i.datum[this.valueKey]=e):i.datum=e,i.tokens=n.filter(i.tokens,function(e){return!n.isBlankString(e)}),i.tokens=n.map(i.tokens,function(e){return e.toLowerCase()}),i},_processData:function(e){var t=this,r={},i={};return n.each(e,function(e,s){var o=t._transformDatum(s),u=n.getUniqueId(o.value);r[u]=o,n.each(o.tokens,function(e,t){var r=t.charAt(0),s=i[r]||(i[r]=[u]);!~n.indexOf(s,u)&&s.push(u)})}),{itemHash:r,adjacencyList:i}},_mergeProcessedData:function(e){var t=this;n.mixin(this.itemHash,e.itemHash),n.each(e.adjacencyList,function(e,n){var r=t.adjacencyList[e];t.adjacencyList[e]=r?r.concat(n):n})},_getLocalSuggestions:function(e){var t=this,r=[],i=[],s,o=[];return n.each(e,function(e,t){var i=t.charAt(0);!~n.indexOf(r,i)&&r.push(i)}),n.each(r,function(e,n){var r=t.adjacencyList[n];if(!r)return!1;i.push(r);if(!s||r.length<s.length)s=r}),i.length<r.length?[]:(n.each(s,function(r,s){var u=t.itemHash[s],a,f;a=n.every(i,function(e){return~n.indexOf(e,s)}),f=a&&n.every(e,function(e){return n.some(u.tokens,function(t){return t.indexOf(e)===0})}),f&&o.push(u)}),o)},initialize:function(){var t;return this.local&&this._processLocalData(this.local),this.transport=this.remote?new u(this.remote):null,t=this.prefetch?this._loadPrefetchData(this.prefetch):e.Deferred().resolve(),this.local=this.prefetch=this.remote=null,this.initialize=function(){return t},t},getSuggestions:function(e,t){function u(e){s=s.slice(0),n.each(e,function(e,t){var i=r._transformDatum(t),o;return o=n.some(s,function(e){return i.value===e.value}),!o&&s.push(i),s.length<r.limit}),t&&t(s)}var r=this,i,s,o=!1;if(e.length<this.minLength)return;i=n.tokenizeQuery(e),s=this._getLocalSuggestions(i).slice(0,this.limit),s.length<this.limit&&this.transport&&(o=this.transport.get(e,u)),!o&&t&&t(s)}}),i}(),f=function(){function t(t){var r=this;n.bindAll(this),this.specialKeyCodeMap={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"},this.$hint=e(t.hint),this.$input=e(t.input).on("blur.tt",this._handleBlur).on("focus.tt",this._handleFocus).on("keydown.tt",this._handleSpecialKeyEvent),n.isMsie()?this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",function(e){if(r.specialKeyCodeMap[e.which||e.keyCode])return;n.defer(r._compareQueryToInputValue)}):this.$input.on("input.tt",this._compareQueryToInputValue),this.query=this.$input.val(),this.$overflowHelper=i(this.$input)}function i(t){return e("<span></span>").css({position:"absolute",left:"-9999px",visibility:"hidden",whiteSpace:"nowrap",fontFamily:t.css("font-family"),fontSize:t.css("font-size"),fontStyle:t.css("font-style"),fontVariant:t.css("font-variant"),fontWeight:t.css("font-weight"),wordSpacing:t.css("word-spacing"),letterSpacing:t.css("letter-spacing"),textIndent:t.css("text-indent"),textRendering:t.css("text-rendering"),textTransform:t.css("text-transform")}).insertAfter(t)}function s(e,t){return e=(e||"").replace(/^\s*/g,"").replace(/\s{2,}/g," "),t=(t||"").replace(/^\s*/g,"").replace(/\s{2,}/g," "),e===t}return n.mixin(t.prototype,r,{_handleFocus:function(){this.trigger("focused")},_handleBlur:function(){this.trigger("blured")},_handleSpecialKeyEvent:function(e){var t=this.specialKeyCodeMap[e.which||e.keyCode];t&&this.trigger(t+"Keyed",e)},_compareQueryToInputValue:function(){var e=this.getInputValue(),t=s(this.query,e),n=t?this.query.length!==e.length:!1;n?this.trigger("whitespaceChanged",{value:this.query}):t||this.trigger("queryChanged",{value:this.query=e})},destroy:function(){this.$hint.off(".tt"),this.$input.off(".tt"),this.$hint=this.$input=this.$overflowHelper=null},focus:function(){this.$input.focus()},blur:function(){this.$input.blur()},getQuery:function(){return this.query},setQuery:function(e){this.query=e},getInputValue:function(){return this.$input.val()},setInputValue:function(e,t){this.$input.val(e),!t&&this._compareQueryToInputValue()},getHintValue:function(){return this.$hint.val()},setHintValue:function(e){this.$hint.val(e)},getLanguageDirection:function(){return(this.$input.css("direction")||"ltr").toLowerCase()},isOverflow:function(){return this.$overflowHelper.text(this.getInputValue()),this.$overflowHelper.width()>this.$input.width()},isCursorAtEnd:function(){var e=this.$input.val().length,t=this.$input[0].selectionStart,r;return n.isNumber(t)?t===e:document.selection?(r=document.selection.createRange(),r.moveStart("character",-e),e===r.text.length):!0}}),t}(),l=function(){function s(t){n.bindAll(this),this.isOpen=!1,this.isEmpty=!0,this.isMouseOverDropdown=!1,this.$menu=e(t.menu).on("mouseenter.tt",this._handleMouseenter).on("mouseleave.tt",this._handleMouseleave).on("click.tt",".tt-suggestion",this._handleSelection).on("mouseover.tt",".tt-suggestion",this._handleMouseover)}function o(e){return e.data("suggestion")}var t={suggestionsList:'<span class="tt-suggestions"></span>'},i={suggestionsList:{display:"block"},suggestion:{whiteSpace:"nowrap",cursor:"pointer"},suggestionChild:{whiteSpace:"normal"}};return n.mixin(s.prototype,r,{_handleMouseenter:function(){this.isMouseOverDropdown=!0},_handleMouseleave:function(){this.isMouseOverDropdown=!1},_handleMouseover:function(t){var n=e(t.currentTarget);this._getSuggestions().removeClass("tt-is-under-cursor"),n.addClass("tt-is-under-cursor")},_handleSelection:function(t){var n=e(t.currentTarget);this.trigger("suggestionSelected",o(n))},_show:function(){this.$menu.css("display","block")},_hide:function(){this.$menu.hide()},_moveCursor:function(e){var t,n,r,i;if(!this.isVisible())return;t=this._getSuggestions(),n=t.filter(".tt-is-under-cursor"),n.removeClass("tt-is-under-cursor"),r=t.index(n)+e,r=(r+1)%(t.length+1)-1;if(r===-1){this.trigger("cursorRemoved");return}r<-1&&(r=t.length-1),i=t.eq(r).addClass("tt-is-under-cursor"),this._ensureVisibility(i),this.trigger("cursorMoved",o(i))},_getSuggestions:function(){return this.$menu.find(".tt-suggestions > .tt-suggestion")},_ensureVisibility:function(e){var t=this.$menu.height()+parseInt(this.$menu.css("paddingTop"),10)+parseInt(this.$menu.css("paddingBottom"),10),n=this.$menu.scrollTop(),r=e.position().top,i=r+e.outerHeight(!0);r<0?this.$menu.scrollTop(n+r):t<i&&this.$menu.scrollTop(n+(i-t))},destroy:function(){this.$menu.off(".tt"),this.$menu=null},isVisible:function(){return this.isOpen&&!this.isEmpty},closeUnlessMouseIsOverDropdown:function(){this.isMouseOverDropdown||this.close()},close:function(){this.isOpen&&(this.isOpen=!1,this.isMouseOverDropdown=!1,this._hide(),this.$menu.find(".tt-suggestions > .tt-suggestion").removeClass("tt-is-under-cursor"),this.trigger("closed"))},open:function(){this.isOpen||(this.isOpen=!0,!this.isEmpty&&this._show(),this.trigger("opened"))},setLanguageDirection:function(e){var t={left:"0",right:"auto"},n={left:"auto",right:" 0"};e==="ltr"?this.$menu.css(t):this.$menu.css(n)},moveCursorUp:function(){this._moveCursor(-1)},moveCursorDown:function(){this._moveCursor(1)},getSuggestionUnderCursor:function(){var e=this._getSuggestions().filter(".tt-is-under-cursor").first();return e.length>0?o(e):null},getFirstSuggestion:function(){var e=this._getSuggestions().first();return e.length>0?o(e):null},renderSuggestions:function(r,s){var o="tt-dataset-"+r.name,u='<div class="tt-suggestion">%body</div>',a,f,l=this.$menu.find("."+o),c,h,p;l.length===0&&(f=e(t.suggestionsList).css(i.suggestionsList),l=e("<div></div>").addClass(o).append(r.header).append(f).append(r.footer).appendTo(this.$menu)),s.length>0?(this.isEmpty=!1,this.isOpen&&this._show(),c=document.createElement("div"),h=document.createDocumentFragment(),n.each(s,function(t,n){n.dataset=r.name,a=r.template(n.datum),c.innerHTML=u.replace("%body",a),p=e(c.firstChild).css(i.suggestion).data("suggestion",n),p.children().each(function(){e(this).css(i.suggestionChild)}),h.appendChild(p[0])}),l.show().find(".tt-suggestions").html(h)):this.clearSuggestions(r.name),this.trigger("suggestionsRendered")},clearSuggestions:function(e){var t=e?this.$menu.find(".tt-dataset-"+e):this.$menu.find('[class^="tt-dataset-"]'),n=t.find(".tt-suggestions");t.hide(),n.empty(),this._getSuggestions().length===0&&(this.isEmpty=!0,this._hide())}}),s}(),c=function(){function s(e){var t,r,i;n.bindAll(this),this.$node=o(e.input),this.datasets=e.datasets,this.dir=null,this.eventBus=e.eventBus,t=this.$node.find(".tt-dropdown-menu"),r=this.$node.find(".tt-query"),i=this.$node.find(".tt-hint"),this.dropdownView=(new l({menu:t})).on("suggestionSelected",this._handleSelection).on("cursorMoved",this._clearHint).on("cursorMoved",this._setInputValueToSuggestionUnderCursor).on("cursorRemoved",this._setInputValueToQuery).on("cursorRemoved",this._updateHint).on("suggestionsRendered",this._updateHint).on("opened",this._updateHint).on("closed",this._clearHint).on("opened closed",this._propagateEvent),this.inputView=(new f({input:r,hint:i})).on("focused",this._openDropdown).on("blured",this._closeDropdown).on("blured",this._setInputValueToQuery).on("enterKeyed tabKeyed",this._handleSelection).on("queryChanged",this._clearHint).on("queryChanged",this._clearSuggestions).on("queryChanged",this._getSuggestions).on("whitespaceChanged",this._updateHint).on("queryChanged whitespaceChanged",this._openDropdown).on("queryChanged whitespaceChanged",this._setLanguageDirection).on("escKeyed",this._closeDropdown).on("escKeyed",this._setInputValueToQuery).on("tabKeyed upKeyed downKeyed",this._managePreventDefault).on("upKeyed downKeyed",this._moveDropdownCursor).on("upKeyed downKeyed",this._openDropdown).on("tabKeyed leftKeyed rightKeyed",this._autocomplete)}function o(n){var r=e(t.wrapper),s=e(t.dropdown),o=e(n),u=e(t.hint);r=r.css(i.wrapper),s=s.css(i.dropdown),u.css(i.hint).css({backgroundAttachment:o.css("background-attachment"),backgroundClip:o.css("background-clip"),backgroundColor:o.css("background-color"),backgroundImage:o.css("background-image"),backgroundOrigin:o.css("background-origin"),backgroundPosition:o.css("background-position"),backgroundRepeat:o.css("background-repeat"),backgroundSize:o.css("background-size")}),o.data("ttAttrs",{dir:o.attr("dir"),autocomplete:o.attr("autocomplete"),spellcheck:o.attr("spellcheck"),style:o.attr("style")}),o.addClass("tt-query").attr({autocomplete:"off",spellcheck:!1}).css(i.query);try{!o.attr("dir")&&o.attr("dir","auto")}catch(a){}return o.wrap(r).parent().prepend(u).append(s)}function u(e){var t=e.find(".tt-query");n.each(t.data("ttAttrs"),function(e,r){n.isUndefined(r)?t.removeAttr(e):t.attr(e,r)}),t.detach().removeData("ttAttrs").removeClass("tt-query").insertAfter(e),e.remove()}var t={wrapper:'<span class="twitter-typeahead"></span>',hint:'<input class="tt-hint" type="text" autocomplete="off" spellcheck="off" disabled>',dropdown:'<span class="tt-dropdown-menu"></span>'},i={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none"},query:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},dropdown:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"}};return n.isMsie()&&n.mixin(i.query,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"}),n.isMsie()&&n.isMsie()<=7&&(n.mixin(i.wrapper,{display:"inline",zoom:"1"}),n.mixin(i.query,{marginTop:"-1px"})),n.mixin(s.prototype,r,{_managePreventDefault:function(e){var t=e.data,n,r,i=!1;switch(e.type){case"tabKeyed":n=this.inputView.getHintValue(),r=this.inputView.getInputValue(),i=n&&n!==r;break;case"upKeyed":case"downKeyed":i=!t.shiftKey&&!t.ctrlKey&&!t.metaKey}i&&t.preventDefault()},_setLanguageDirection:function(){var e=this.inputView.getLanguageDirection();e!==this.dir&&(this.dir=e,this.$node.css("direction",e),this.dropdownView.setLanguageDirection(e))},_updateHint:function(){var e=this.dropdownView.getFirstSuggestion(),t=e?e.value:null,r=this.dropdownView.isVisible(),i=this.inputView.isOverflow(),s,o,u,a,f;t&&r&&!i&&(s=this.inputView.getInputValue(),o=s.replace(/\s{2,}/g," ").replace(/^\s+/g,""),u=n.escapeRegExChars(o),a=new RegExp("^(?:"+u+")(.*$)","i"),f=a.exec(t),this.inputView.setHintValue(s+(f?f[1]:"")))},_clearHint:function(){this.inputView.setHintValue("")},_clearSuggestions:function(){this.dropdownView.clearSuggestions()},_setInputValueToQuery:function(){this.inputView.setInputValue(this.inputView.getQuery())},_setInputValueToSuggestionUnderCursor:function(e){var t=e.data;this.inputView.setInputValue(t.value,!0)},_openDropdown:function(){this.dropdownView.open()},_closeDropdown:function(e){this.dropdownView[e.type==="blured"?"closeUnlessMouseIsOverDropdown":"close"]()},_moveDropdownCursor:function(e){var t=e.data;!t.shiftKey&&!t.ctrlKey&&!t.metaKey&&this.dropdownView[e.type==="upKeyed"?"moveCursorUp":"moveCursorDown"]()},_handleSelection:function(e){var t=e.type==="suggestionSelected",r=t?e.data:this.dropdownView.getSuggestionUnderCursor();r&&(this.inputView.setInputValue(r.value),t?this.inputView.focus():e.data.preventDefault(),t&&n.isMsie()?n.defer(this.dropdownView.close):this.dropdownView.close(),this.eventBus.trigger("selected",r.datum,r.dataset))},_getSuggestions:function(){var e=this,t=this.inputView.getQuery();if(n.isBlankString(t))return;n.each(this.datasets,function(n,r){r.getSuggestions(t,function(n){t===e.inputView.getQuery()&&e.dropdownView.renderSuggestions(r,n)})})},_autocomplete:function(e){var t,n,r,i,s;if(e.type==="rightKeyed"||e.type==="leftKeyed"){t=this.inputView.isCursorAtEnd(),n=this.inputView.getLanguageDirection()==="ltr"?e.type==="leftKeyed":e.type==="rightKeyed";if(!t||n)return}r=this.inputView.getQuery(),i=this.inputView.getHintValue(),i!==""&&r!==i&&(s=this.dropdownView.getFirstSuggestion(),this.inputView.setInputValue(s.value),this.eventBus.trigger("autocompleted",s.datum,s.dataset))},_propagateEvent:function(e){this.eventBus.trigger(e.type)},destroy:function(){this.inputView.destroy(),this.dropdownView.destroy(),u(this.$node),this.$node=null},setQuery:function(e){this.inputView.setQuery(e),this.inputView.setInputValue(e),this._clearHint(),this._clearSuggestions(),this._getSuggestions()}}),s}();(function(){var t={},r="ttView",s;s={initialize:function(s){function u(){var t=e(this),s,u=new i({el:t});s=n.map(o,function(e){return e.initialize()}),t.data(r,new c({input:t,eventBus:u=new i({el:t}),datasets:o})),e.when.apply(e,s).always(function(){n.defer(function(){u.trigger("initialized")})})}var o;return s=n.isArray(s)?s:[s],s.length===0&&e.error("no datasets provided"),o=n.map(s,function(e){var n=t[e.name]?t[e.name]:new a(e);return e.name&&(t[e.name]=n),n}),this.each(u)},destroy:function(){function t(){var t=e(this),n=t.data(r);n&&(n.destroy(),t.removeData(r))}return this.each(t)},setQuery:function(t){function n(){var n=e(this).data(r);n&&n.setQuery(t)}return this.each(n)}},jQuery.fn.typeahead=function(e){return s[e]?s[e].apply(this,[].slice.call(arguments,1)):s.initialize.apply(this,arguments)}})()})(window.jQuery)}.apply(e,arguments)})}(this),define("common/Duedil.typeahead",["jquery","Hogan","common/Duedil","twitter-typeahead"],function(e,t,n){return n.typeahead={sources:{onboarding:{}}},n.typeahead.settings={limit:5,valueKey:"name",engine:t},n.typeahead.sources.onboarding.companies={footer:"",name:"onboarding_companies_search_results",template:['<div class="search-item">','<span class="company-name">{{name}}</span>','<span class="company-industry">{{industry}}</span>','<span class="company-address">{{address}}</span>','<span class="status"></span>',"</div>"].join(""),remote:{url:"/autocomplete/companies?count=5&term=%TERMS&callback=?",wildcard:"%TERMS",filter:function(t){var n=[],r=t.items||[];return e.each(r,function(e,t){var r={id:e,name:t.ray_name,industry:t.primary_sic_description,address:t.ray_add4};n.push(r)}),n}}},n.typeahead.sources.companies={name:"companies_search_results",template:['<div class="search-item"><a href="{{url}}">','<span class="company-name">{{name}}</span>','<span class="company-industry">{{industry}}</span>','<span class="company-address">{{address}}</span>','<span class="status"></span>',"</a></div>"].join(""),remote:{url:"/autocomplete/companies?count=5&term=%TERMS&callback=?",wildcard:"%TERMS",filter:function(t){var n=[],r=t.items||[];return e.each(r,function(e,t){var r={id:e,name:t.ray_name+" ("+t.ray_status_label+")",industry:t.primary_sic_description,address:t.ray_add4,url:t.url};n.push(r)}),n}},footer:'<footer class="search-more"><a href="/companies/search?query=">Search more</a></footer>'},n.typeahead.sources.useraccount_companies={name:"useraccount_companies_search_results",template:['<div class="search-item"><span class="wrap">','<span class="company-name">{{name}}</span>','<span class="company-industry">{{industry}}</span>',"</span></div>"].join(""),remote:{url:"/autocomplete/companies?count=5&term=%TERMS&callback=?",wildcard:"%TERMS",filter:function(t){var n=[],r=t.items||[];return e.each(r,function(e,t){var r={id:e,name:t.ray_name,industry:t.primary_sic_description};n.push(r)}),n}}},n.typeahead.sources.directors={name:"directors_search_results",template:['<div class="search-item"><a href="{{url}}">','<span class="director-name">{{name}}</span>',"</a></div>"].join(""),remote:{url:"/autocomplete/directors?count=5&term=%TERMS&callback=?",wildcard:"%TERMS",filter:function(t){var n=t.items||[];return e.map(n,function(e){return{name:e.name,url:e.url}})}},footer:'<footer class="search-more"><a href="/directors/search?query=">Search more</a></footer>'},n.typeahead}),define("common/Duedil.companyAutocomplete",["jquery","common/Duedil","common/Duedil.typeahead"],function(e,t){t.companyAutocomplete=function(){e("#edit-org").length&&(e("#edit-company").typeahead(e.extend(t.typeahead.settings,t.typeahead.sources.useraccount_companies)),e("#edit-company").bind("typeahead:selected",function(t,n){e("#edit-org").val(n.id)}))}}),function(root){define("jquery-dataTables",["jquery"],function(){return function(){(function($,window,document,undefined){var DataTable=function(oInit){function _fnAddColumn(e,t){var n=DataTable.defaults.columns,r=e.aoColumns.length,i=$.extend({},DataTable.models.oColumn,n,{sSortingClass:e.oClasses.sSortable,sSortingClassJUI:e.oClasses.sSortJUI,nTh:t?t:document.createElement("th"),sTitle:n.sTitle?n.sTitle:t?t.innerHTML:"",aDataSort:n.aDataSort?n.aDataSort:[r],mDataProp:n.mDataProp?n.oDefaults:r});e.aoColumns.push(i);if(e.aoPreSearchCols[r]===undefined||e.aoPreSearchCols[r]===null)e.aoPreSearchCols[r]=$.extend({},DataTable.models.oSearch);else{var s=e.aoPreSearchCols[r];s.bRegex===undefined&&(s.bRegex=!0),s.bSmart===undefined&&(s.bSmart=!0),s.bCaseInsensitive===undefined&&(s.bCaseInsensitive=!0)}_fnColumnOptions(e,r,null)}function _fnColumnOptions(e,t,n){var r=e.aoColumns[t];n!==undefined&&n!==null&&(n.sType!==undefined&&(r.sType=n.sType,r._bAutoType=!1),$.extend(r,n),_fnMap(r,n,"sWidth","sWidthOrig"),n.iDataSort!==undefined&&(r.aDataSort=[n.iDataSort]),_fnMap(r,n,"aDataSort")),r.fnGetData=_fnGetObjectDataFn(r.mDataProp),r.fnSetData=_fnSetObjectDataFn(r.mDataProp),e.oFeatures.bSort||(r.bSortable=!1),!r.bSortable||$.inArray("asc",r.asSorting)==-1&&$.inArray("desc",r.asSorting)==-1?(r.sSortingClass=e.oClasses.sSortableNone,r.sSortingClassJUI=""):r.bSortable||$.inArray("asc",r.asSorting)==-1&&$.inArray("desc",r.asSorting)==-1?(r.sSortingClass=e.oClasses.sSortable,r.sSortingClassJUI=e.oClasses.sSortJUI):$.inArray("asc",r.asSorting)!=-1&&$.inArray("desc",r.asSorting)==-1?(r.sSortingClass=e.oClasses.sSortableAsc,r.sSortingClassJUI=e.oClasses.sSortJUIAscAllowed):$.inArray("asc",r.asSorting)==-1&&$.inArray("desc",r.asSorting)!=-1&&(r.sSortingClass=e.oClasses.sSortableDesc,r.sSortingClassJUI=e.oClasses.sSortJUIDescAllowed)}function _fnAdjustColumnSizing(e){if(e.oFeatures.bAutoWidth===!1)return!1;_fnCalculateColumnWidths(e);for(var t=0,n=e.aoColumns.length;t<n;t++)e.aoColumns[t].nTh.style.width=e.aoColumns[t].sWidth}function _fnVisibleToColumnIndex(e,t){var n=-1;for(var r=0;r<e.aoColumns.length;r++){e.aoColumns[r].bVisible===!0&&n++;if(n==t)return r}return null}function _fnColumnIndexToVisible(e,t){var n=-1;for(var r=0;r<e.aoColumns.length;r++){e.aoColumns[r].bVisible===!0&&n++;if(r==t)return e.aoColumns[r].bVisible===!0?n:null}return null}function _fnVisbleColumns(e){var t=0;for(var n=0;n<e.aoColumns.length;n++)e.aoColumns[n].bVisible===!0&&t++;return t}function _fnDetectType(e){var t=DataTable.ext.aTypes,n=t.length;for(var r=0;r<n;r++){var i=t[r](e);if(i!==null)return i}return"string"}function _fnReOrderIndex(e,t){var n=t.split(","),r=[];for(var i=0,s=e.aoColumns.length;i<s;i++)for(var o=0;o<s;o++)if(e.aoColumns[i].sName==n[o]){r.push(o);break}return r}function _fnColumnOrdering(e){var t="";for(var n=0,r=e.aoColumns.length;n<r;n++)t+=e.aoColumns[n].sName+",";return t.length==r?"":t.slice(0,-1)}function _fnApplyColumnDefs(e,t,n,r){var i,s,o,u,a,f;if(t)for(i=t.length-1;i>=0;i--){var l=t[i].aTargets;$.isArray(l)||_fnLog(e,1,"aTargets must be an array of targets, not a "+typeof l);for(o=0,u=l.length;o<u;o++)if(typeof l[o]=="number"&&l[o]>=0){while(e.aoColumns.length<=l[o])_fnAddColumn(e);r(l[o],t[i])}else if(typeof l[o]=="number"&&l[o]<0)r(e.aoColumns.length+l[o],t[i]);else if(typeof l[o]=="string")for(a=0,f=e.aoColumns.length;a<f;a++)(l[o]=="_all"||$(e.aoColumns[a].nTh).hasClass(l[o]))&&r(a,t[i])}if(n)for(i=0,s=n.length;i<s;i++)r(i,n[i])}function _fnAddData(e,t){var n,r=$.isArray(t)?t.slice():$.extend(!0,{},t),i=e.aoData.length,s=$.extend(!0,{},DataTable.models.oRow,{_aData:r});e.aoData.push(s);var o,u;for(var a=0,f=e.aoColumns.length;a<f;a++){n=e.aoColumns[a],typeof n.fnRender=="function"&&n.bUseRendered&&n.mDataProp!==null&&_fnSetCellData(e,i,a,_fnRender(e,i,a));if(n._bAutoType&&n.sType!="string"){var l=_fnGetCellData(e,i,a,"type");l!==null&&l!==""&&(u=_fnDetectType(l),n.sType===null?n.sType=u:n.sType!=u&&n.sType!="html"&&(n.sType="string"))}}return e.aiDisplayMaster.push(i),e.oFeatures.bDeferRender||_fnCreateTr(e,i),i}function _fnGatherData(e){var t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y;if(e.bDeferLoading||e.sAjaxSource===null){a=e.nTBody.childNodes;for(n=0,r=a.length;n<r;n++)if(a[n].nodeName.toUpperCase()=="TR"){c=e.aoData.length,a[n]._DT_RowIndex=c,e.aoData.push($.extend(!0,{},DataTable.models.oRow,{nTr:a[n]})),e.aiDisplayMaster.push(c),u=a[n].childNodes,o=0;for(i=0,s=u.length;i<s;i++){m=u[i].nodeName.toUpperCase();if(m=="TD"||m=="TH")_fnSetCellData(e,c,o,$.trim(u[i].innerHTML)),o++}}}a=_fnGetTrNodes(e),u=[];for(n=0,r=a.length;n<r;n++)for(i=0,s=a[n].childNodes.length;i<s;i++)f=a[n].childNodes[i],m=f.nodeName.toUpperCase(),(m=="TD"||m=="TH")&&u.push(f);for(d=0,v=e.aoColumns.length;d<v;d++){g=e.aoColumns[d],g.sTitle===null&&(g.sTitle=g.nTh.innerHTML);var b=g._bAutoType,w=typeof g.fnRender=="function",E=g.sClass!==null,S=g.bVisible,x,T,N,C;if(b||w||E||!S)for(h=0,p=e.aoData.length;h<p;h++)y=e.aoData[h],x=u[h*v+d],b&&g.sType!="string"&&(C=_fnGetCellData(e,h,d,"type"),C!==""&&(T=_fnDetectType(C),g.sType===null?g.sType=T:g.sType!=T&&g.sType!="html"&&(g.sType="string"))),typeof g.mDataProp=="function"&&(x.innerHTML=_fnGetCellData(e,h,d,"display")),w&&(N=_fnRender(e,h,d),x.innerHTML=N,g.bUseRendered&&_fnSetCellData(e,h,d,N)),E&&(x.className+=" "+g.sClass),S?y._anHidden[d]=null:(y._anHidden[d]=x,x.parentNode.removeChild(x)),g.fnCreatedCell&&g.fnCreatedCell.call(e.oInstance,x,_fnGetCellData(e,h,d,"display"),y._aData,h,d)}if(e.aoRowCreatedCallback.length!==0)for(n=0,r=e.aoData.length;n<r;n++)y=e.aoData[n],_fnCallbackFire(e,"aoRowCreatedCallback",null,[y.nTr,y._aData,n])}function _fnNodeToDataIndex(e,t){return t._DT_RowIndex!==undefined?t._DT_RowIndex:null}function _fnNodeToColumnIndex(e,t,n){var r=_fnGetTdNodes(e,t);for(var i=0,s=e.aoColumns.length;i<s;i++)if(r[i]===n)return i;return-1}function _fnGetRowData(e,t,n){var r=[];for(var i=0,s=e.aoColumns.length;i<s;i++)r.push(_fnGetCellData(e,t,i,n));return r}function _fnGetCellData(e,t,n,r){var i,s=e.aoColumns[n],o=e.aoData[t]._aData;if((i=s.fnGetData(o,r))===undefined)return e.iDrawError!=e.iDraw&&s.sDefaultContent===null&&(_fnLog(e,0,"Requested unknown parameter '"+s.mDataProp+"' from the data source for row "+t),e.iDrawError=e.iDraw),s.sDefaultContent;if(i===null&&s.sDefaultContent!==null)i=s.sDefaultContent;else if(typeof i=="function")return i();return r=="display"&&i===null?"":i}function _fnSetCellData(e,t,n,r){var i=e.aoColumns[n],s=e.aoData[t]._aData;i.fnSetData(s,r)}function _fnGetObjectDataFn(e){if(e===null)return function(e,t){return null};if(typeof e=="function")return function(t,n){return e(t,n)};if(typeof e=="string"&&e.indexOf(".")!=-1){var t=e.split(".");return function(e,n){for(var r=0,i=t.length;r<i;r++){e=e[t[r]];if(e===undefined)return undefined}return e}}return function(t,n){return t[e]}}function _fnSetObjectDataFn(e){if(e===null)return function(e,t){};if(typeof e=="function")return function(t,n){e(t,"set",n)};if(typeof e=="string"&&e.indexOf(".")!=-1){var t=e.split(".");return function(e,n){for(var r=0,i=t.length-1;r<i;r++)e=e[t[r]];e[t[t.length-1]]=n}}return function(t,n){t[e]=n}}function _fnGetDataMaster(e){var t=[],n=e.aoData.length;for(var r=0;r<n;r++)t.push(e.aoData[r]._aData);return t}function _fnClearTable(e){e.aoData.splice(0,e.aoData.length),e.aiDisplayMaster.splice(0,e.aiDisplayMaster.length),e.aiDisplay.splice(0,e.aiDisplay.length),_fnCalculateEnd(e)}function _fnDeleteIndex(e,t){var n=-1;for(var r=0,i=e.length;r<i;r++)e[r]==t?n=r:e[r]>t&&e[r]--;n!=-1&&e.splice(n,1)}function _fnRender(e,t,n){var r=e.aoColumns[n];return r.fnRender({iDataRow:t,iDataColumn:n,oSettings:e,aData:e.aoData[t]._aData,mDataProp:r.mDataProp},_fnGetCellData(e,t,n,"display"))}function _fnCreateTr(e,t){var n=e.aoData[t],r;if(n.nTr===null){n.nTr=document.createElement("tr"),n.nTr._DT_RowIndex=t,n._aData.DT_RowId&&(n.nTr.id=n._aData.DT_RowId),n._aData.DT_RowClass&&$(n.nTr).addClass(n._aData.DT_RowClass),n._aData.DT_RowAttr&&$.isPlainObject(n._aData.DT_RowAttr)&&$.each(n._aData.DT_RowAttr,function(e,t){$(n.nTr).attr(e,t)});for(var i=0,s=e.aoColumns.length;i<s;i++){var o=e.aoColumns[i];r=document.createElement("td"),r.innerHTML=typeof o.fnRender!="function"||!!o.bUseRendered&&o.mDataProp!==null?_fnGetCellData(e,t,i,"display"):_fnRender(e,t,i),o.sClass!==null&&(r.className=o.sClass),o.bVisible?(n.nTr.appendChild(r),n._anHidden[i]=null):n._anHidden[i]=r,o.fnCreatedCell&&o.fnCreatedCell.call(e.oInstance,r,_fnGetCellData(e,t,i,"display"),n._aData,t,i)}_fnCallbackFire(e,"aoRowCreatedCallback",null,[n.nTr,n._aData,t])}}function _fnBuildHead(e){var t,n,r,i,s,o=e.nTHead.getElementsByTagName("th").length,u=0,a;if(o!==0)for(t=0,r=e.aoColumns.length;t<r;t++)n=e.aoColumns[t].nTh,n.setAttribute("role","columnheader"),e.aoColumns[t].bSortable&&(n.setAttribute("tabindex",e.iTabIndex),n.setAttribute("aria-controls",e.sTableId)),e.aoColumns[t].sClass!==null&&$(n).addClass(e.aoColumns[t].sClass),e.aoColumns[t].sTitle!=n.innerHTML&&(n.innerHTML=e.aoColumns[t].sTitle);else{var f=document.createElement("tr");for(t=0,r=e.aoColumns.length;t<r;t++)n=e.aoColumns[t].nTh,n.innerHTML=e.aoColumns[t].sTitle,n.setAttribute("tabindex","0"),e.aoColumns[t].sClass!==null&&$(n).addClass(e.aoColumns[t].sClass),f.appendChild(n);$(e.nTHead).html("")[0].appendChild(f),_fnDetectHeader(e.aoHeader,e.nTHead)}$(e.nTHead).children("tr").attr("role","row");if(e.bJUI)for(t=0,r=e.aoColumns.length;t<r;t++){n=e.aoColumns[t].nTh;var l=document.createElement("div");l.className=e.oClasses.sSortJUIWrapper,$(n).contents().appendTo(l);var c=document.createElement("span");c.className=e.oClasses.sSortIcon,l.appendChild(c),n.appendChild(l)}if(e.oFeatures.bSort)for(t=0;t<e.aoColumns.length;t++)e.aoColumns[t].bSortable!==!1?_fnSortAttachListener(e,e.aoColumns[t].nTh,t):$(e.aoColumns[t].nTh).addClass(e.oClasses.sSortableNone);e.oClasses.sFooterTH!==""&&$(e.nTFoot).children("tr").children("th").addClass(e.oClasses.sFooterTH);if(e.nTFoot!==null){var h=_fnGetUniqueThs(e,null,e.aoFooter);for(t=0,r=e.aoColumns.length;t<r;t++)h[t]&&(e.aoColumns[t].nTf=h[t],e.aoColumns[t].sClass&&$(h[t]).addClass(e.aoColumns[t].sClass))}}function _fnDrawHead(e,t,n){var r,i,s,o,u,a,f,l,c=[],h=[],p=e.aoColumns.length,d,v;n===undefined&&(n=!1);for(r=0,i=t.length;r<i;r++){c[r]=t[r].slice(),c[r].nTr=t[r].nTr;for(s=p-1;s>=0;s--)!e.aoColumns[s].bVisible&&!n&&c[r].splice(s,1);h.push([])}for(r=0,i=c.length;r<i;r++){l=c[r].nTr;if(l)while(f=l.firstChild)l.removeChild(f);for(s=0,o=c[r].length;s<o;s++){d=1,v=1;if(h[r][s]===undefined){l.appendChild(c[r][s].cell),h[r][s]=1;while(c[r+d]!==undefined&&c[r][s].cell==c[r+d][s].cell)h[r+d][s]=1,d++;while(c[r][s+v]!==undefined&&c[r][s].cell==c[r][s+v].cell){for(u=0;u<d;u++)h[r+u][s+v]=1;v++}c[r][s].cell.rowSpan=d,c[r][s].cell.colSpan=v}}}}function _fnDraw(e){var t,n,r,i=[],s=0,o=e.asStripeClasses.length,u=e.aoOpenRows.length,a=_fnCallbackFire(e,"aoPreDrawCallback","preDraw",[e]);if($.inArray(!1,a)!==-1)return;e.bDrawing=!0,e.iInitDisplayStart!==undefined&&e.iInitDisplayStart!=-1&&(e.oFeatures.bServerSide?e._iDisplayStart=e.iInitDisplayStart:e._iDisplayStart=e.iInitDisplayStart>=e.fnRecordsDisplay()?0:e.iInitDisplayStart,e.iInitDisplayStart=-1,_fnCalculateEnd(e));if(e.bDeferLoading)e.bDeferLoading=!1,e.iDraw++;else if(!e.oFeatures.bServerSide)e.iDraw++;else if(!e.bDestroying&&!_fnAjaxUpdate(e))return;if(e.aiDisplay.length!==0){var f=e._iDisplayStart,l=e._iDisplayEnd;e.oFeatures.bServerSide&&(f=0,l=e.aoData.length);for(var c=f;c<l;c++){var h=e.aoData[e.aiDisplay[c]];h.nTr===null&&_fnCreateTr(e,e.aiDisplay[c]);var p=h.nTr;if(o!==0){var d=e.asStripeClasses[s%o];h._sRowStripe!=d&&($(p).removeClass(h._sRowStripe).addClass(d),h._sRowStripe=d)}_fnCallbackFire(e,"aoRowCallback",null,[p,e.aoData[e.aiDisplay[c]]._aData,s,c]),i.push(p),s++;if(u!==0)for(var v=0;v<u;v++)if(p==e.aoOpenRows[v].nParent){i.push(e.aoOpenRows[v].nTr);break}}}else{i[0]=document.createElement("tr"),e.asStripeClasses[0]&&(i[0].className=e.asStripeClasses[0]);var m=e.oLanguage.sZeroRecords.replace("_MAX_",e.fnFormatNumber(e.fnRecordsTotal()));e.iDraw==1&&e.sAjaxSource!==null&&!e.oFeatures.bServerSide?m=e.oLanguage.sLoadingRecords:e.oLanguage.sEmptyTable&&e.fnRecordsTotal()===0&&(m=e.oLanguage.sEmptyTable);var g=document.createElement("td");g.setAttribute("valign","top"),g.colSpan=_fnVisbleColumns(e),g.className=e.oClasses.sRowEmpty,g.innerHTML=m,i[s].appendChild(g)}_fnCallbackFire(e,"aoHeaderCallback","header",[$(e.nTHead).children("tr")[0],_fnGetDataMaster(e),e._iDisplayStart,e.fnDisplayEnd(),e.aiDisplay]),_fnCallbackFire(e,"aoFooterCallback","footer",[$(e.nTFoot).children("tr")[0],_fnGetDataMaster(e),e._iDisplayStart,e.fnDisplayEnd(),e.aiDisplay]);var y=document.createDocumentFragment(),b=document.createDocumentFragment(),w,E;if(e.nTBody){w=e.nTBody.parentNode,b.appendChild(e.nTBody);if(!e.oScroll.bInfinite||!e._bInitComplete||e.bSorted||e.bFiltered)while(r=e.nTBody.firstChild)e.nTBody.removeChild(r);for(t=0,n=i.length;t<n;t++)y.appendChild(i[t]);e.nTBody.appendChild(y),w!==null&&w.appendChild(e.nTBody)}_fnCallbackFire(e,"aoDrawCallback","draw",[e]),e.bSorted=!1,e.bFiltered=!1,e.bDrawing=!1,e.oFeatures.bServerSide&&(_fnProcessingDisplay(e,!1),e._bInitComplete||_fnInitComplete(e))}function _fnReDraw(e){e.oFeatures.bSort?_fnSort(e,e.oPreviousSearch):e.oFeatures.bFilter?_fnFilterComplete(e,e.oPreviousSearch):(_fnCalculateEnd(e),_fnDraw(e))}function _fnAddOptionsHtml(e){var t=$("<div></div>")[0];e.nTable.parentNode.insertBefore(t,e.nTable),e.nTableWrapper=$('<div id="'+e.sTableId+'_wrapper" class="'+e.oClasses.sWrapper+'" role="grid"></div>')[0],e.nTableReinsertBefore=e.nTable.nextSibling;var n=e.nTableWrapper,r=e.sDom.split(""),i,s,o,u,a,f,l;for(var c=0;c<r.length;c++){s=0,o=r[c];if(o=="<"){u=$("<div></div>")[0],a=r[c+1];if(a=="'"||a=='"'){f="",l=2;while(r[c+l]!=a)f+=r[c+l],l++;f=="H"?f="fg-toolbar ui-toolbar ui-widget-header ui-corner-tl ui-corner-tr ui-helper-clearfix":f=="F"&&(f="fg-toolbar ui-toolbar ui-widget-header ui-corner-bl ui-corner-br ui-helper-clearfix");if(f.indexOf(".")!=-1){var h=f.split(".");u.id=h[0].substr(1,h[0].length-1),u.className=h[1]}else f.charAt(0)=="#"?u.id=f.substr(1,f.length-1):u.className=f;c+=l}n.appendChild(u),n=u}else if(o==">")n=n.parentNode;else if(o=="l"&&e.oFeatures.bPaginate&&e.oFeatures.bLengthChange)i=_fnFeatureHtmlLength(e),s=1;else if(o=="f"&&e.oFeatures.bFilter)i=_fnFeatureHtmlFilter(e),s=1;else if(o=="r"&&e.oFeatures.bProcessing)i=_fnFeatureHtmlProcessing(e),s=1;else if(o=="t")i=_fnFeatureHtmlTable(e),s=1;else if(o=="i"&&e.oFeatures.bInfo)i=_fnFeatureHtmlInfo(e),s=1;else if(o=="p"&&e.oFeatures.bPaginate)i=_fnFeatureHtmlPaginate(e),s=1;else if(DataTable.ext.aoFeatures.length!==0){var p=DataTable.ext.aoFeatures;for(var d=0,v=p.length;d<v;d++)if(o==p[d].cFeature){i=p[d].fnInit(e),i&&(s=1);break}}s==1&&i!==null&&(typeof e.aanFeatures[o]!="object"&&(e.aanFeatures[o]=[]),e.aanFeatures[o].push(i),n.appendChild(i))}t.parentNode.replaceChild(e.nTableWrapper,t)}function _fnDetectHeader(e,t){var n=$(t).children("tr"),r,i,s,o,u,a,f,l,c=function(e,t,n){while(e[t][n])n++;return n};e.splice(0,e.length);for(i=0,a=n.length;i<a;i++)e.push([]);for(i=0,a=n.length;i<a;i++){var h=0;for(s=0,f=n[i].childNodes.length;s<f;s++){r=n[i].childNodes[s];if(r.nodeName.toUpperCase()=="TD"||r.nodeName.toUpperCase()=="TH"){var p=r.getAttribute("colspan")*1,d=r.getAttribute("rowspan")*1;p=!p||p===0||p===1?1:p,d=!d||d===0||d===1?1:d,l=c(e,i,h);for(u=0;u<p;u++)for(o=0;o<d;o++)e[i+o][l+u]={cell:r,unique:p==1?!0:!1},e[i+o].nTr=n[i]}}}}function _fnGetUniqueThs(e,t,n){var r=[];n||(n=e.aoHeader,t&&(n=[],_fnDetectHeader(n,t)));for(var i=0,s=n.length;i<s;i++)for(var o=0,u=n[i].length;o<u;o++)n[i][o].unique&&(!r[o]||!e.bSortCellsTop)&&(r[o]=n[i][o].cell);return r}function _fnAjaxUpdate(e){if(e.bAjaxDataGet){e.iDraw++,_fnProcessingDisplay(e,!0);var t=e.aoColumns.length,n=_fnAjaxParameters(e);return _fnServerParams(e,n),e.fnServerData.call(e.oInstance,e.sAjaxSource,n,function(t){_fnAjaxUpdateDraw(e,t)},e),!1}return!0}function _fnAjaxParameters(e){var t=e.aoColumns.length,n=[],r,i;n.push({name:"sEcho",value:e.iDraw}),n.push({name:"iColumns",value:t}),n.push({name:"sColumns",value:_fnColumnOrdering(e)}),n.push({name:"iDisplayStart",value:e._iDisplayStart}),n.push({name:"iDisplayLength",value:e.oFeatures.bPaginate!==!1?e._iDisplayLength:-1});for(i=0;i<t;i++)r=e.aoColumns[i].mDataProp,n.push({name:"mDataProp_"+i,value:typeof r=="function"?"function":r});if(e.oFeatures.bFilter!==!1){n.push({name:"sSearch",value:e.oPreviousSearch.sSearch}),n.push({name:"bRegex",value:e.oPreviousSearch.bRegex});for(i=0;i<t;i++)n.push({name:"sSearch_"+i,value:e.aoPreSearchCols[i].sSearch}),n.push({name:"bRegex_"+i,value:e.aoPreSearchCols[i].bRegex}),n.push({name:"bSearchable_"+i,value:e.aoColumns[i].bSearchable})}if(e.oFeatures.bSort!==!1){var s=e.aaSortingFixed!==null?e.aaSortingFixed.length:0,o=e.aaSorting.length;n.push({name:"iSortingCols",value:s+o});for(i=0;i<s;i++)n.push({name:"iSortCol_"+i,value:e.aaSortingFixed[i][0]}),n.push({name:"sSortDir_"+i,value:e.aaSortingFixed[i][1]});for(i=0;i<o;i++)n.push({name:"iSortCol_"+(i+s),value:e.aaSorting[i][0]}),n.push({name:"sSortDir_"+(i+s),value:e.aaSorting[i][1]});for(i=0;i<t;i++)n.push({name:"bSortable_"+i,value:e.aoColumns[i].bSortable})}return n}function _fnServerParams(e,t){_fnCallbackFire(e,"aoServerParams","serverParams",[t])}function _fnAjaxUpdateDraw(e,t){if(t.sEcho!==undefined){if(t.sEcho*1<e.iDraw)return;e.iDraw=t.sEcho*1}(!e.oScroll.bInfinite||e.oScroll.bInfinite&&(e.bSorted||e.bFiltered))&&_fnClearTable(e),e._iRecordsTotal=parseInt(t.iTotalRecords,10),e._iRecordsDisplay=parseInt(t.iTotalDisplayRecords,10);var n=_fnColumnOrdering(e),r=t.sColumns!==undefined&&n!==""&&t.sColumns!=n,i;r&&(i=_fnReOrderIndex(e,t.sColumns));var s=_fnGetObjectDataFn(e.sAjaxDataProp)(t);for(var o=0,u=s.length;o<u;o++)if(r){var a=[];for(var f=0,l=e.aoColumns.length;f<l;f++)a.push(s[o][i[f]]);_fnAddData(e,a)}else _fnAddData(e,s[o]);e.aiDisplay=e.aiDisplayMaster.slice(),e.bAjaxDataGet=!1,_fnDraw(e),e.bAjaxDataGet=!0,_fnProcessingDisplay(e,!1)}function _fnFeatureHtmlFilter(e){var t=e.oPreviousSearch,n=e.oLanguage.sSearch;n=n.indexOf("_INPUT_")!==-1?n.replace("_INPUT_",'<input type="text" />'):n===""?'<input type="text" />':n+' <input type="text" />';var r=document.createElement("div");r.className=e.oClasses.sFilter,r.innerHTML="<label>"+n+"</label>",e.aanFeatures.f||(r.id=e.sTableId+"_filter");var i=$("input",r);return i.val(t.sSearch.replace('"',"&quot;")),i.bind("keyup.DT",function(n){var r=e.aanFeatures.f;for(var i=0,s=r.length;i<s;i++)r[i]!=$(this).parents("div.dataTables_filter")[0]&&$("input",r[i]).val(this.value);this.value!=t.sSearch&&_fnFilterComplete(e,{sSearch:this.value,bRegex:t.bRegex,bSmart:t.bSmart,bCaseInsensitive:t.bCaseInsensitive})}),i.attr("aria-controls",e.sTableId).bind("keypress.DT",function(e){if(e.keyCode==13)return!1}),r}function _fnFilterComplete(e,t,n){var r=e.oPreviousSearch,i=e.aoPreSearchCols,s=function(e){r.sSearch=e.sSearch,r.bRegex=e.bRegex,r.bSmart=e.bSmart,r.bCaseInsensitive=e.bCaseInsensitive};if(!e.oFeatures.bServerSide){_fnFilter(e,t.sSearch,n,t.bRegex,t.bSmart,t.bCaseInsensitive),s(t);for(var o=0;o<e.aoPreSearchCols.length;o++)_fnFilterColumn(e,i[o].sSearch,o,i[o].bRegex,i[o].bSmart,i[o].bCaseInsensitive);_fnFilterCustom(e)}else s(t);e.bFiltered=!0,$(e.oInstance).trigger("filter",e),e._iDisplayStart=0,_fnCalculateEnd(e),_fnDraw(e),_fnBuildSearchArray(e,0)}function _fnFilterCustom(e){var t=DataTable.ext.afnFiltering;for(var n=0,r=t.length;n<r;n++){var i=0;for(var s=0,o=e.aiDisplay.length;s<o;s++){var u=e.aiDisplay[s-i];t[n](e,_fnGetRowData(e,u,"filter"),u)||(e.aiDisplay.splice(s-i,1),i++)}}}function _fnFilterColumn(e,t,n,r,i,s){if(t==="")return;var o=0,u=_fnFilterCreateSearch(t,r,i,s);for(var a=e.aiDisplay.length-1;a>=0;a--){var f=_fnDataToSearch(_fnGetCellData(e,e.aiDisplay[a],n,"filter"),e.aoColumns[n].sType);u.test(f)||(e.aiDisplay.splice(a,1),o++)}}function _fnFilter(e,t,n,r,i,s){var o,u=_fnFilterCreateSearch(t,r,i,s),a=e.oPreviousSearch;n||(n=0),DataTable.ext.afnFiltering.length!==0&&(n=1);if(t.length<=0)e.aiDisplay.splice(0,e.aiDisplay.length),e.aiDisplay=e.aiDisplayMaster.slice();else if(e.aiDisplay.length==e.aiDisplayMaster.length||a.sSearch.length>t.length||n==1||t.indexOf(a.sSearch)!==0){e.aiDisplay.splice(0,e.aiDisplay.length),_fnBuildSearchArray(e,1);for(o=0;o<e.aiDisplayMaster.length;o++)u.test(e.asDataSearch[o])&&e.aiDisplay.push(e.aiDisplayMaster[o])}else{var f=0;for(o=0;o<e.asDataSearch.length;o++)u.test(e.asDataSearch[o])||(e.aiDisplay.splice(o-f,1),f++)}}function _fnBuildSearchArray(e,t){if(!e.oFeatures.bServerSide){e.asDataSearch.splice(0,e.asDataSearch.length);var n=t&&t===1?e.aiDisplayMaster:e.aiDisplay;for(var r=0,i=n.length;r<i;r++)e.asDataSearch[r]=_fnBuildSearchRow(e,_fnGetRowData(e,n[r],"filter"))}}function _fnBuildSearchRow(e,t){var n="";e.__nTmpFilter===undefined&&(e.__nTmpFilter=document.createElement("div"));var r=e.__nTmpFilter;for(var i=0,s=e.aoColumns.length;i<s;i++)if(e.aoColumns[i].bSearchable){var o=t[i];n+=_fnDataToSearch(o,e.aoColumns[i].sType)+"  "}return n.indexOf("&")!==-1&&(r.innerHTML=n,n=r.textContent?r.textContent:r.innerText,n=n.replace(/\n/g," ").replace(/\r/g,"")),n}function _fnFilterCreateSearch(e,t,n,r){var i,s;return n?(i=t?e.split(" "):_fnEscapeRegex(e).split(" "),s="^(?=.*?"+i.join(")(?=.*?")+").*$",new RegExp(s,r?"i":"")):(e=t?e:_fnEscapeRegex(e),new RegExp(e,r?"i":""))}function _fnDataToSearch(e,t){return typeof DataTable.ext.ofnSearch[t]=="function"?DataTable.ext.ofnSearch[t](e):t=="html"?e.replace(/[\r\n]/g," ").replace(/<.*?>/g,""):typeof e=="string"?e.replace(/[\r\n]/g," "):e===null?"":e}function _fnEscapeRegex(e){var t=["/",".","*","+","?","|","(",")","[","]","{","}","\\","$","^"],n=new RegExp("(\\"+t.join("|\\")+")","g");return e.replace(n,"\\$1")}function _fnFeatureHtmlInfo(e){var t=document.createElement("div");return t.className=e.oClasses.sInfo,e.aanFeatures.i||(e.aoDrawCallback.push({fn:_fnUpdateInfo,sName:"information"}),t.id=e.sTableId+"_info"),e.nTable.setAttribute("aria-describedby",e.sTableId+"_info"),t}function _fnUpdateInfo(e){if(!e.oFeatures.bInfo||e.aanFeatures.i.length===0)return;var t=e._iDisplayStart+1,n=e.fnDisplayEnd(),r=e.fnRecordsTotal(),i=e.fnRecordsDisplay(),s=e.fnFormatNumber(t),o=e.fnFormatNumber(n),u=e.fnFormatNumber(r),a=e.fnFormatNumber(i),f;e.oScroll.bInfinite&&(s=e.fnFormatNumber(1)),e.fnRecordsDisplay()===0&&e.fnRecordsDisplay()==e.fnRecordsTotal()?f=e.oLanguage.sInfoEmpty+e.oLanguage.sInfoPostFix:e.fnRecordsDisplay()===0?f=e.oLanguage.sInfoEmpty+" "+e.oLanguage.sInfoFiltered.replace("_MAX_",u)+e.oLanguage.sInfoPostFix:e.fnRecordsDisplay()==e.fnRecordsTotal()?f=e.oLanguage.sInfo.replace("_START_",s).replace("_END_",o).replace("_TOTAL_",a)+e.oLanguage.sInfoPostFix:f=e.oLanguage.sInfo.replace("_START_",s).replace("_END_",o).replace("_TOTAL_",a)+" "+e.oLanguage.sInfoFiltered.replace("_MAX_",e.fnFormatNumber(e.fnRecordsTotal()))+e.oLanguage.sInfoPostFix,e.oLanguage.fnInfoCallback!==null&&(f=e.oLanguage.fnInfoCallback.call(e.oInstance,e,t,n,r,i,f));var l=e.aanFeatures.i;for(var c=0,h=l.length;c<h;c++)$(l[c]).html(f)}function _fnInitialise(e){var t,n,r=e.iInitDisplayStart;if(e.bInitialised===!1){setTimeout(function(){_fnInitialise(e)},200);return}_fnAddOptionsHtml(e),_fnBuildHead(e),_fnDrawHead(e,e.aoHeader),e.nTFoot&&_fnDrawHead(e,e.aoFooter),_fnProcessingDisplay(e,!0),e.oFeatures.bAutoWidth&&_fnCalculateColumnWidths(e);for(t=0,n=e.aoColumns.length;t<n;t++)e.aoColumns[t].sWidth!==null&&(e.aoColumns[t].nTh.style.width=_fnStringToCss(e.aoColumns[t].sWidth));e.oFeatures.bSort?_fnSort(e):e.oFeatures.bFilter?_fnFilterComplete(e,e.oPreviousSearch):(e.aiDisplay=e.aiDisplayMaster.slice(),_fnCalculateEnd(e),_fnDraw(e));if(e.sAjaxSource!==null&&!e.oFeatures.bServerSide){var i=[];_fnServerParams(e,i),e.fnServerData.call(e.oInstance,e.sAjaxSource,i,function(n){var i=e.sAjaxDataProp!==""?_fnGetObjectDataFn(e.sAjaxDataProp)(n):n;for(t=0;t<i.length;t++)_fnAddData(e,i[t]);e.iInitDisplayStart=r,e.oFeatures.bSort?_fnSort(e):(e.aiDisplay=e.aiDisplayMaster.slice(),_fnCalculateEnd(e),_fnDraw(e)),_fnProcessingDisplay(e,!1),_fnInitComplete(e,n)},e);return}e.oFeatures.bServerSide||(_fnProcessingDisplay(e,!1),_fnInitComplete(e))}function _fnInitComplete(e,t){e._bInitComplete=!0,_fnCallbackFire(e,"aoInitComplete","init",[e,t])}function _fnLanguageCompat(e){!e.sEmptyTable&&e.sZeroRecords&&_fnMap(e,e,"sZeroRecords","sEmptyTable"),!e.sLoadingRecords&&e.sZeroRecords&&_fnMap(e,e,"sZeroRecords","sLoadingRecords")}function _fnFeatureHtmlLength(e){if(e.oScroll.bInfinite)return null;var t='name="'+e.sTableId+'_length"',n='<select size="1" '+t+">",r,i,s=e.aLengthMenu;if(s.length==2&&typeof s[0]=="object"&&typeof s[1]=="object")for(r=0,i=s[0].length;r<i;r++)n+='<option value="'+s[0][r]+'">'+s[1][r]+"</option>";else for(r=0,i=s.length;r<i;r++)n+='<option value="'+s[r]+'">'+s[r]+"</option>";n+="</select>";var o=document.createElement("div");return e.aanFeatures.l||(o.id=e.sTableId+"_length"),o.className=e.oClasses.sLength,o.innerHTML="<label>"+e.oLanguage.sLengthMenu.replace("_MENU_",n)+"</label>",$('select option[value="'+e._iDisplayLength+'"]',o).attr("selected",!0),$("select",o).bind("change.DT",function(t){var n=$(this).val(),s=e.aanFeatures.l;for(r=0,i=s.length;r<i;r++)s[r]!=this.parentNode&&$("select",s[r]).val(n);e._iDisplayLength=parseInt(n,10),_fnCalculateEnd(e),e.fnDisplayEnd()==e.fnRecordsDisplay()&&(e._iDisplayStart=e.fnDisplayEnd()-e._iDisplayLength,e._iDisplayStart<0&&(e._iDisplayStart=0)),e._iDisplayLength==-1&&(e._iDisplayStart=0),_fnDraw(e)}),$("select",o).attr("aria-controls",e.sTableId),o}function _fnCalculateEnd(e){e.oFeatures.bPaginate===!1?e._iDisplayEnd=e.aiDisplay.length:e._iDisplayStart+e._iDisplayLength>e.aiDisplay.length||e._iDisplayLength==-1?e._iDisplayEnd=e.aiDisplay.length:e._iDisplayEnd=e._iDisplayStart+e._iDisplayLength}function _fnFeatureHtmlPaginate(e){if(e.oScroll.bInfinite)return null;var t=document.createElement("div");return t.className=e.oClasses.sPaging+e.sPaginationType,DataTable.ext.oPagination[e.sPaginationType].fnInit(e,t,function(e){_fnCalculateEnd(e),_fnDraw(e)}),e.aanFeatures.p||e.aoDrawCallback.push({fn:function(e){DataTable.ext.oPagination[e.sPaginationType].fnUpdate(e,function(e){_fnCalculateEnd(e),_fnDraw(e)})},sName:"pagination"}),t}function _fnPageChange(e,t){var n=e._iDisplayStart;if(typeof t=="number")e._iDisplayStart=t*e._iDisplayLength,e._iDisplayStart>e.fnRecordsDisplay()&&(e._iDisplayStart=0);else if(t=="first")e._iDisplayStart=0;else if(t=="previous")e._iDisplayStart=e._iDisplayLength>=0?e._iDisplayStart-e._iDisplayLength:0,e._iDisplayStart<0&&(e._iDisplayStart=0);else if(t=="next")e._iDisplayLength>=0?e._iDisplayStart+e._iDisplayLength<e.fnRecordsDisplay()&&(e._iDisplayStart+=e._iDisplayLength):e._iDisplayStart=0;else if(t=="last")if(e._iDisplayLength>=0){var r=parseInt((e.fnRecordsDisplay()-1)/e._iDisplayLength,10)+1;e._iDisplayStart=(r-1)*e._iDisplayLength}else e._iDisplayStart=0;else _fnLog(e,0,"Unknown paging action: "+t);return $(e.oInstance).trigger("page",e),n!=e._iDisplayStart}function _fnFeatureHtmlProcessing(e){var t=document.createElement("div");return e.aanFeatures.r||(t.id=e.sTableId+"_processing"),t.innerHTML="<div class='dataTables_processing_inner'>"+e.oLanguage.sProcessing+"</div>",t.className=e.oClasses.sProcessing+" no-select",e.nTable.parentNode.insertBefore(t,e.nTable),t}function _fnProcessingDisplay(e,t){if(e.oFeatures.bProcessing){var n=e.aanFeatures.r;for(var r=0,i=n.length;r<i;r++)n[r].style.visibility=t?"visible":"hidden"}$(e.oInstance).trigger("processing",[e,t])}function _fnFeatureHtmlTable(e){if(e.oScroll.sX===""&&e.oScroll.sY==="")return e.nTable;var t=document.createElement("div"),n=document.createElement("div"),r=document.createElement("div"),i=document.createElement("div"),s=document.createElement("div"),o=document.createElement("div"),u=e.nTable.cloneNode(!1),a=e.nTable.cloneNode(!1),f=e.nTable.getElementsByTagName("thead")[0],l=e.nTable.getElementsByTagName("tfoot").length===0?null:e.nTable.getElementsByTagName("tfoot")[0],c=e.oClasses;n.appendChild(r),s.appendChild(o),i.appendChild(e.nTable),t.appendChild(n),t.appendChild(i),r.appendChild(u),u.appendChild(f),l!==null&&(t.appendChild(s),o.appendChild(a),a.appendChild(l)),t.className=c.sScrollWrapper,n.className=c.sScrollHead,r.className=c.sScrollHeadInner,i.className=c.sScrollBody,s.className=c.sScrollFoot,o.className=c.sScrollFootInner,e.oScroll.bAutoCss&&(n.style.overflow="hidden",n.style.position="relative",s.style.overflow="hidden",i.style.overflow="auto"),n.style.border="0",n.style.width="100%",s.style.border="0",r.style.width="150%",u.removeAttribute("id"),u.style.marginLeft="0",e.nTable.style.marginLeft="0",l!==null&&(a.removeAttribute("id"),a.style.marginLeft="0");var h=$(e.nTable).children("caption");for(var p=0,d=h.length;p<d;p++)u.appendChild(h[p]);return e.oScroll.sX!==""&&(n.style.width=_fnStringToCss(e.oScroll.sX),i.style.width=_fnStringToCss(e.oScroll.sX),l!==null&&(s.style.width=_fnStringToCss(e.oScroll.sX)),$(i).scroll(function(e){n.scrollLeft=this.scrollLeft,l!==null&&(s.scrollLeft=this.scrollLeft)})),e.oScroll.sY!==""&&(i.style.height=_fnStringToCss(e.oScroll.sY)),e.aoDrawCallback.push({fn:_fnScrollDraw,sName:"scrolling"}),e.oScroll.bInfinite&&$(i).scroll(function(){!e.bDrawing&&$(this).scrollTop()!==0&&$(this).scrollTop()+$(this).height()>$(e.nTable).height()-e.oScroll.iLoadGap&&e.fnDisplayEnd()<e.fnRecordsDisplay()&&(_fnPageChange(e,"next"),_fnCalculateEnd(e),_fnDraw(e))}),e.nScrollHead=n,e.nScrollFoot=s,t}function _fnScrollDraw(e){var t=e.nScrollHead.getElementsByTagName("div")[0],n=t.getElementsByTagName("table")[0],r=e.nTable.parentNode,i,s,o,u,a,f,l,c,h,p,d,v=[],m,g=e.nTFoot!==null?e.nScrollFoot.getElementsByTagName("div")[0]:null,y=e.nTFoot!==null?g.getElementsByTagName("table")[0]:null,b=$.browser.msie&&$.browser.version<=7,w=e.nTable.getElementsByTagName("thead");w.length>0&&e.nTable.removeChild(w[0]);var E;e.nTFoot!==null&&(E=e.nTable.getElementsByTagName("tfoot"),E.length>0&&e.nTable.removeChild(E[0])),w=e.nTHead.cloneNode(!0),e.nTable.insertBefore(w,e.nTable.childNodes[0]),e.nTFoot!==null&&(E=e.nTFoot.cloneNode(!0),e.nTable.insertBefore(E,e.nTable.childNodes[1])),e.oScroll.sX===""&&(r.style.width="100%",t.parentNode.style.width="100%");var S=_fnGetUniqueThs(e,w);for(i=0,s=S.length;i<s;i++)p=_fnVisibleToColumnIndex(e,i),S[i].style.width=e.aoColumns[p].sWidth;e.nTFoot!==null&&_fnApplyToChildren(function(e){e.style.width=""},E.getElementsByTagName("tr")),m=$(e.nTable).outerWidth(),e.oScroll.sX===""?(e.nTable.style.width="100%",b&&($("tbody",r).height()>r.offsetHeight||$(r).css("overflow-y")=="scroll")&&(e.nTable.style.width=_fnStringToCss($(e.nTable).outerWidth()-e.oScroll.iBarWidth))):e.oScroll.sXInner!==""?e.nTable.style.width=_fnStringToCss(e.oScroll.sXInner):m==$(r).width()&&$(r).height()<$(e.nTable).height()?(e.nTable.style.width=_fnStringToCss(m-e.oScroll.iBarWidth),$(e.nTable).outerWidth()>m-e.oScroll.iBarWidth&&(e.nTable.style.width=_fnStringToCss(m))):e.nTable.style.width=_fnStringToCss(m),m=$(e.nTable).outerWidth(),a=e.nTHead.getElementsByTagName("tr"),f=w.getElementsByTagName("tr"),_fnApplyToChildren(function(e,t){h=e.style,h.paddingTop="0",h.paddingBottom="0",h.borderTopWidth="0",h.borderBottomWidth="0",h.height=0,d=$(e).width(),t.style.width=_fnStringToCss(d),v.push(d)},f,a),$(f).height(0),e.nTFoot!==null&&(l=E.getElementsByTagName("tr"),c=e.nTFoot.getElementsByTagName("tr"),_fnApplyToChildren(function(e,t){h=e.style,h.paddingTop="0",h.paddingBottom="0",h.borderTopWidth="0",h.borderBottomWidth="0",h.height=0,d=$(e).width(),t.style.width=_fnStringToCss(d),v.push(d)},l,c),$(l).height(0)),_fnApplyToChildren(function(e){e.innerHTML="",e.style.width=_fnStringToCss(v.shift())},f),e.nTFoot!==null&&_fnApplyToChildren(function(e){e.innerHTML="",e.style.width=_fnStringToCss(v.shift())},l);if($(e.nTable).outerWidth()<m){var x=r.scrollHeight>r.offsetHeight||$(r).css("overflow-y")=="scroll"?m+e.oScroll.iBarWidth:m;b&&(r.scrollHeight>r.offsetHeight||$(r).css("overflow-y")=="scroll")&&(e.nTable.style.width=_fnStringToCss(x-e.oScroll.iBarWidth)),r.style.width=_fnStringToCss(x),t.parentNode.style.width=_fnStringToCss(x),e.nTFoot!==null&&(g.parentNode.style.width=_fnStringToCss(x)),e.oScroll.sX===""?_fnLog(e,1,"The table cannot fit into the current element which will cause column misalignment. The table has been drawn at its minimum possible width."):e.oScroll.sXInner!==""&&_fnLog(e,1,"The table cannot fit into the current element which will cause column misalignment. Increase the sScrollXInner value or remove it to allow automatic calculation")}else r.style.width=_fnStringToCss("100%"),t.parentNode.style.width=_fnStringToCss("100%"),e.nTFoot!==null&&(g.parentNode.style.width=_fnStringToCss("100%"));e.oScroll.sY===""&&b&&(r.style.height=_fnStringToCss(e.nTable.offsetHeight+e.oScroll.iBarWidth));if(e.oScroll.sY!==""&&e.oScroll.bCollapse){r.style.height=_fnStringToCss(e.oScroll.sY);var T=e.oScroll.sX!==""&&e.nTable.offsetWidth>r.offsetWidth?e.oScroll.iBarWidth:0;e.nTable.offsetHeight<r.offsetHeight&&(r.style.height=_fnStringToCss($(e.nTable).height()+T))}var N=$(e.nTable).outerWidth();n.style.width=_fnStringToCss(N),t.style.width=_fnStringToCss(N),e.nTFoot!==null&&(g.style.width=_fnStringToCss(e.nTable.offsetWidth),y.style.width=_fnStringToCss(e.nTable.offsetWidth));if(e.bSorted||e.bFiltered)r.scrollTop=0}function _fnApplyToChildren(e,t,n){for(var r=0,i=t.length;r<i;r++)for(var s=0,o=t[r].childNodes.length;s<o;s++)t[r].childNodes[s].nodeType==1&&(n?e(t[r].childNodes[s],n[r].childNodes[s]):e(t[r].childNodes[s]))}function _fnConvertToWidth(e,t){if(!e||e===null||e==="")return 0;t||(t=document.getElementsByTagName("body")[0]);var n,r=document.createElement("div");return r.style.width=_fnStringToCss(e),t.appendChild(r),n=r.offsetWidth,t.removeChild(r),n}function _fnCalculateColumnWidths(e){var t=e.nTable.offsetWidth,n=0,r,i=0,s=e.aoColumns.length,o,u,a,f,l=$("th",e.nTHead),c=e.nTable.getAttribute("width");for(o=0;o<s;o++)e.aoColumns[o].bVisible&&(i++,e.aoColumns[o].sWidth!==null&&(r=_fnConvertToWidth(e.aoColumns[o].sWidthOrig,e.nTable.parentNode),r!==null&&(e.aoColumns[o].sWidth=_fnStringToCss(r)),n++));if(s==l.length&&n===0&&i==s&&e.oScroll.sX===""&&e.oScroll.sY==="")for(o=0;o<e.aoColumns.length;o++)r=$(l[o]).width(),r!==null&&(e.aoColumns[o].sWidth=_fnStringToCss(r));else{var h=e.nTable.cloneNode(!1),p=e.nTHead.cloneNode(!0),d=document.createElement("tbody"),v=document.createElement("tr"),m;h.removeAttribute("id"),h.appendChild(p),e.nTFoot!==null&&(h.appendChild(e.nTFoot.cloneNode(!0)),_fnApplyToChildren(function(e){e.style.width=""},h.getElementsByTagName("tr"))),h.appendChild(d),d.appendChild(v);var g=$("thead th",h);g.length===0&&(g=$("tbody tr:eq(0)>td",h));var y=_fnGetUniqueThs(e,p);a=0;for(o=0;o<s;o++){var b=e.aoColumns[o];b.bVisible&&b.sWidthOrig!==null&&b.sWidthOrig!==""?y[o-a].style.width=_fnStringToCss(b.sWidthOrig):b.bVisible?y[o-a].style.width="":a++}for(o=0;o<s;o++)if(e.aoColumns[o].bVisible){var w=_fnGetWidestNode(e,o);w!==null&&(w=w.cloneNode(!0),e.aoColumns[o].sContentPadding!==""&&(w.innerHTML+=e.aoColumns[o].sContentPadding),v.appendChild(w))}var E=e.nTable.parentNode;E.appendChild(h),e.oScroll.sX!==""&&e.oScroll.sXInner!==""?h.style.width=_fnStringToCss(e.oScroll.sXInner):e.oScroll.sX!==""?(h.style.width="",$(h).width()<E.offsetWidth&&(h.style.width=_fnStringToCss(E.offsetWidth))):e.oScroll.sY!==""?h.style.width=_fnStringToCss(E.offsetWidth):c&&(h.style.width=_fnStringToCss(c)),h.style.visibility="hidden",_fnScrollingWidthAdjust(e,h);var S=$("tbody tr:eq(0)",h).children();S.length===0&&(S=_fnGetUniqueThs(e,$("thead",h)[0]));if(e.oScroll.sX!==""){var x=0;a=0;for(o=0;o<e.aoColumns.length;o++)e.aoColumns[o].bVisible&&(e.aoColumns[o].sWidthOrig===null?x+=$(S[a]).outerWidth():x+=parseInt(e.aoColumns[o].sWidth.replace("px",""),10)+($(S[a]).outerWidth()-$(S[a]).width()),a++);h.style.width=_fnStringToCss(x),e.nTable.style.width=_fnStringToCss(x)}a=0;for(o=0;o<e.aoColumns.length;o++)e.aoColumns[o].bVisible&&(f=$(S[a]).width(),f!==null&&f>0&&(e.aoColumns[o].sWidth=_fnStringToCss(f)),a++);var T=$(h).css("width");e.nTable.style.width=T.indexOf("%")!==-1?T:_fnStringToCss($(h).outerWidth()),h.parentNode.removeChild(h)}c&&(e.nTable.style.width=_fnStringToCss(c))}function _fnScrollingWidthAdjust(e,t){if(e.oScroll.sX===""&&e.oScroll.sY!==""){var n=$(t).width();t.style.width=_fnStringToCss($(t).outerWidth()-e.oScroll.iBarWidth)}else e.oScroll.sX!==""&&(t.style.width=_fnStringToCss($(t).outerWidth()))}function _fnGetWidestNode(e,t){var n=_fnGetMaxLenString(e,t);if(n<0)return null;if(e.aoData[n].nTr===null){var r=document.createElement("td");return r.innerHTML=_fnGetCellData(e,n,t,""),r}return _fnGetTdNodes(e,n)[t]}function _fnGetMaxLenString(e,t){var n=-1,r=-1;for(var i=0;i<e.aoData.length;i++){var s=_fnGetCellData(e,i,t,"display")+"";s=s.replace(/<.*?>/g,""),s.length>n&&(n=s.length,r=i)}return r}function _fnStringToCss(e){if(e===null)return"0px";if(typeof e=="number")return e<0?"0px":e+"px";var t=e.charCodeAt(e.length-1);return t<48||t>57?e:e+"px"}function _fnScrollBarWidth(){var e=document.createElement("p"),t=e.style;t.width="100%",t.height="200px",t.padding="0px";var n=document.createElement("div");t=n.style,t.position="absolute",t.top="0px",t.left="0px",t.visibility="hidden",t.width="200px",t.height="150px",t.padding="0px",t.overflow="hidden",n.appendChild(e),document.body.appendChild(n);var r=e.offsetWidth;n.style.overflow="scroll";var i=e.offsetWidth;return r==i&&(i=n.clientWidth),document.body.removeChild(n),r-i}function _fnSort(e,t){var n,r,i,s,o,u,a,f,l=[],c=[],h=DataTable.ext.oSort,p=e.aoData,d=e.aoColumns,v=e.oLanguage.oAria;if(!e.oFeatures.bServerSide&&(e.aaSorting.length!==0||e.aaSortingFixed!==null)){e.aaSortingFixed!==null?l=e.aaSortingFixed.concat(e.aaSorting):l=e.aaSorting.slice();for(n=0;n<l.length;n++){var m=l[n][0],g=_fnColumnIndexToVisible(e,m);a=e.aoColumns[m].sSortDataType;if(DataTable.ext.afnSortData[a]){var y=DataTable.ext.afnSortData[a](e,m,g);for(i=0,s=p.length;i<s;i++)_fnSetCellData(e,i,m,y[i])}}for(n=0,r=e.aiDisplayMaster.length;n<r;n++)c[e.aiDisplayMaster[n]]=n;var b=l.length,w,E;for(n=0,r=p.length;n<r;n++)for(i=0;i<b;i++){E=d[l[i][0]].aDataSort;for(o=0,u=E.length;o<u;o++)a=d[E[o]].sType,w=h[(a?a:"string")+"-pre"],p[n]._aSortData[E[o]]=w?w(_fnGetCellData(e,n,E[o],"sort")):_fnGetCellData(e,n,E[o],"sort")}e.aiDisplayMaster.sort(function(e,t){var n,r,i,s,o,u;for(n=0;n<b;n++){o=d[l[n][0]].aDataSort;for(r=0,i=o.length;r<i;r++){u=d[o[r]].sType,s=h[(u?u:"string")+"-"+l[n][1]](p[e]._aSortData[o[r]],p[t]._aSortData[o[r]]);if(s!==0)return s}}return h["numeric-asc"](c[e],c[t])})}(t===undefined||t)&&!e.oFeatures.bDeferRender&&_fnSortingClasses(e);for(n=0,r=e.aoColumns.length;n<r;n++){f=d[n].nTh,f.removeAttribute("aria-sort"),f.removeAttribute("aria-label");if(d[n].bSortable)if(l.length>0&&l[0][0]==n){f.setAttribute("aria-sort",l[0][1]=="asc"?"ascending":"descending");var S=d[n].asSorting[l[0][2]+1]?d[n].asSorting[l[0][2]+1]:d[n].asSorting[0];f.setAttribute("aria-label",d[n].sTitle+(S=="asc"?v.sSortAscending:v.sSortDescending))}else f.setAttribute("aria-label",d[n].sTitle+(d[n].asSorting[0]=="asc"?v.sSortAscending:v.sSortDescending));else f.setAttribute("aria-label",d[n].sTitle)}e.bSorted=!0,$(e.oInstance).trigger("sort",e),e.oFeatures.bFilter?_fnFilterComplete(e,e.oPreviousSearch,1):(e.aiDisplay=e.aiDisplayMaster.slice(),e._iDisplayStart=0,_fnCalculateEnd(e),_fnDraw(e))}function _fnSortAttachListener(e,t,n,r){_fnBindAction(t,{},function(t){if(e.aoColumns[n].bSortable===!1)return;var i=function(){var r,i;if(t.shiftKey){var s=!1;for(var o=0;o<e.aaSorting.length;o++)if(e.aaSorting[o][0]==n){s=!0,r=e.aaSorting[o][0],i=e.aaSorting[o][2]+1,e.aoColumns[r].asSorting[i]?(e.aaSorting[o][1]=e.aoColumns[r].asSorting[i],e.aaSorting[o][2]=i):e.aaSorting.splice(o,1);break}s===!1&&e.aaSorting.push([n,e.aoColumns[n].asSorting[0],0])}else e.aaSorting.length==1&&e.aaSorting[0][0]==n?(r=e.aaSorting[0][0],i=e.aaSorting[0][2]+1,e.aoColumns[r].asSorting[i]||(i=0),e.aaSorting[0][1]=e.aoColumns[r].asSorting[i],e.aaSorting[0][2]=i):(e.aaSorting.splice(0,e.aaSorting.length),e.aaSorting.push([n,e.aoColumns[n].asSorting[0],0]));_fnSort(e)};e.oFeatures.bProcessing?(_fnProcessingDisplay(e,!0),setTimeout(function(){i(),e.oFeatures.bServerSide||_fnProcessingDisplay(e,!1)},0)):i(),typeof r=="function"&&r(e)})}function _fnSortingClasses(e){var t,n,r,i,s,o,u,a=e.aoColumns.length,f=e.oClasses;for(t=0;t<a;t++)e.aoColumns[t].bSortable&&$(e.aoColumns[t].nTh).removeClass(f.sSortAsc+" "+f.sSortDesc+" "+e.aoColumns[t].sSortingClass);e.aaSortingFixed!==null?o=e.aaSortingFixed.concat(e.aaSorting):o=e.aaSorting.slice();for(t=0;t<e.aoColumns.length;t++)if(e.aoColumns[t].bSortable){u=e.aoColumns[t].sSortingClass,s=-1;for(r=0;r<o.length;r++)if(o[r][0]==t){u=o[r][1]=="asc"?f.sSortAsc:f.sSortDesc,s=r;break}$(e.aoColumns[t].nTh).addClass(u);if(e.bJUI){var l=$("span."+f.sSortIcon,e.aoColumns[t].nTh);l.removeClass(f.sSortJUIAsc+" "+f.sSortJUIDesc+" "+f.sSortJUI+" "+f.sSortJUIAscAllowed+" "+f.sSortJUIDescAllowed);var c;s==-1?c=e.aoColumns[t].sSortingClassJUI:o[s][1]=="asc"?c=f.sSortJUIAsc:c=f.sSortJUIDesc,l.addClass(c)}}else $(e.aoColumns[t].nTh).addClass(e.aoColumns[t].sSortingClass);u=f.sSortColumn;if(e.oFeatures.bSort&&e.oFeatures.bSortClasses){var h=_fnGetTdNodes(e);if(e.oFeatures.bDeferRender)$(h).removeClass(u+"1 "+u+"2 "+u+"3");else if(h.length>=a)for(t=0;t<a;t++)if(h[t].className.indexOf(u+"1")!=-1)for(r=0,i=h.length/a;r<i;r++)h[a*r+t].className=$.trim(h[a*r+t].className.replace(u+"1",""));else if(h[t].className.indexOf(u+"2")!=-1)for(r=0,i=h.length/a;r<i;r++)h[a*r+t].className=$.trim(h[a*r+t].className.replace(u+"2",""));else if(h[t].className.indexOf(u+"3")!=-1)for(r=0,i=h.length/a;r<i;r++)h[a*r+t].className=$.trim(h[a*r+t].className.replace(" "+u+"3",""));var p=1,d;for(t=0;t<o.length;t++){d=parseInt(o[t][0],10);for(r=0,i=h.length/a;r<i;r++)h[a*r+d].className+=" "+u+p;p<3&&p++}}}function _fnSaveState(e){if(!e.oFeatures.bStateSave||e.bDestroying)return;var t,n,r=e.oScroll.bInfinite,i={iCreate:(new Date).getTime(),iStart:r?0:e._iDisplayStart,iEnd:r?e._iDisplayLength:e._iDisplayEnd,iLength:e._iDisplayLength,aaSorting:$.extend(!0,[],e.aaSorting),oSearch:$.extend(!0,{},e.oPreviousSearch),aoSearchCols:$.extend(!0,[],e.aoPreSearchCols),abVisCols:[]};for(t=0,n=e.aoColumns.length;t<n;t++)i.abVisCols.push(e.aoColumns[t].bVisible);_fnCallbackFire(e,"aoStateSaveParams","stateSaveParams",[e,i]),e.fnStateSave.call(e.oInstance,e,i)}function _fnLoadState(e,t){if(!e.oFeatures.bStateSave)return;var n=e.fnStateLoad.call(e.oInstance,e);if(!n)return;var r=_fnCallbackFire(e,"aoStateLoadParams","stateLoadParams",[e,n]);if($.inArray(!1,r)!==-1)return;e.oLoadedState=$.extend(!0,{},n),e._iDisplayStart=n.iStart,e.iInitDisplayStart=n.iStart,e._iDisplayEnd=n.iEnd,e._iDisplayLength=n.iLength,e.aaSorting=n.aaSorting.slice(),e.saved_aaSorting=n.aaSorting.slice(),$.extend(e.oPreviousSearch,n.oSearch),$.extend(!0,e.aoPreSearchCols,n.aoSearchCols),t.saved_aoColumns=[];for(var i=0;i<n.abVisCols.length;i++)t.saved_aoColumns[i]={},t.saved_aoColumns[i].bVisible=n.abVisCols[i];_fnCallbackFire(e,"aoStateLoaded","stateLoaded",[e,n])}function _fnCreateCookie(sName,sValue,iSecs,sBaseName,fnCallback){var date=new Date;date.setTime(date.getTime()+iSecs*1e3);var aParts=window.location.pathname.split("/"),sNameFile=sName+"_"+aParts.pop().replace(/[\/:]/g,"").toLowerCase(),sFullCookie,oData;fnCallback!==null?(oData=typeof $.parseJSON=="function"?$.parseJSON(sValue):eval("("+sValue+")"),sFullCookie=fnCallback(sNameFile,oData,date.toGMTString(),aParts.join("/")+"/")):sFullCookie=sNameFile+"="+encodeURIComponent(sValue)+"; expires="+date.toGMTString()+"; path="+aParts.join("/")+"/";var sOldName="",iOldTime=9999999999999,iLength=_fnReadCookie(sNameFile)!==null?document.cookie.length:sFullCookie.length+document.cookie.length;if(iLength+10>4096){var aCookies=document.cookie.split(";");for(var i=0,iLen=aCookies.length;i<iLen;i++)if(aCookies[i].indexOf(sBaseName)!=-1){var aSplitCookie=aCookies[i].split("=");try{oData=eval("("+decodeURIComponent(aSplitCookie[1])+")")}catch(e){continue}oData.iCreate&&oData.iCreate<iOldTime&&(sOldName=aSplitCookie[0],iOldTime=oData.iCreate)}sOldName!==""&&(document.cookie=sOldName+"=; expires=Thu, 01-Jan-1970 00:00:01 GMT; path="+aParts.join("/")+"/")}document.cookie=sFullCookie}function _fnReadCookie(e){var t=window.location.pathname.split("/"),n=e+"_"+t[t.length-1].replace(/[\/:]/g,"").toLowerCase()+"=",r=document.cookie.split(";");for(var i=0;i<r.length;i++){var s=r[i];while(s.charAt(0)==" ")s=s.substring(1,s.length);if(s.indexOf(n)===0)return decodeURIComponent(s.substring(n.length,s.length))}return null}function _fnSettingsFromNode(e){for(var t=0;t<DataTable.settings.length;t++)if(DataTable.settings[t].nTable===e)return DataTable.settings[t];return null}function _fnGetTrNodes(e){var t=[],n=e.aoData;for(var r=0,i=n.length;r<i;r++)n[r].nTr!==null&&t.push(n[r].nTr);return t}function _fnGetTdNodes(e,t){var n=[],r,i,s,o=e.aoData.length,u,a,f,l,c=0,h=o;t!==undefined&&(c=t,h=t+1);for(s=c;s<h;s++){f=e.aoData[s];if(f.nTr!==null){i=[];for(u=0,a=f.nTr.childNodes.length;u<a;u++)l=f.nTr.childNodes[u].nodeName.toLowerCase(),(l=="td"||l=="th")&&i.push(f.nTr.childNodes[u]);r=0;for(u=0,a=e.aoColumns.length;u<a;u++)e.aoColumns[u].bVisible?n.push(i[u-r]):(n.push(f._anHidden[u]),r++)}}return n}function _fnLog(e,t,n){var r=e===null?"DataTables warning: "+n:"DataTables warning (table id = '"+e.sTableId+"'): "+n;if(t===0){if(DataTable.ext.sErrMode!="alert")throw r;alert(r);return}console!==undefined&&console.log&&console.log(r)}function _fnMap(e,t,n,r){r===undefined&&(r=n),t[n]!==undefined&&(e[r]=t[n])}function _fnExtend(e,t){for(var n in e)e.hasOwnProperty(n)&&t[n]!==undefined&&(typeof oInit[n]=="object"&&$.isArray(t[n])===!1?$.extend(!0,e[n],t[n]):e[n]=t[n]);return e}function _fnBindAction(e,t,n){$(e).bind("click.DT",t,function(t){n(t),e.blur()}).bind("keypress.DT",t,function(e){e.which===13&&n(e)}).bind("selectstart.DT",function(){return!1})}function _fnCallbackReg(e,t,n,r){n&&e[t].push({fn:n,sName:r})}function _fnCallbackFire(e,t,n,r){var i=e[t],s=[];for(var o=i.length-1;o>=0;o--)s.push(i[o].fn.apply(e.oInstance,r));return n!==null&&$(e.oInstance).trigger(n,r),s}function _fnExternApiFunc(e){return function(){var t=[_fnSettingsFromNode(this[DataTable.ext.iApiIndex])].concat(Array.prototype.slice.call(arguments));return DataTable.ext.oApi[e].apply(this,t)}}var _fnJsonString=window.JSON?JSON.stringify:function(e){var t=typeof e;if(t!=="object"||e===null)return t==="string"&&(e='"'+e+'"'),e+"";var n,r,i=[],s=$.isArray(e);for(n in e)r=e[n],t=typeof r,t==="string"?r='"'+r+'"':t==="object"&&r!==null&&(r=_fnJsonString(r)),i.push((s?"":'"'+n+'":')+r);return(s?"[":"{")+i+(s?"]":"}")};this.$=function(e,t){var n,r,i=[],s=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]);t||(t={}),t=$.extend({},{filter:"none",order:"current",page:"all"},t);if(t.page=="current")for(n=s._iDisplayStart,r=s.fnDisplayEnd();n<r;n++)i.push(s.aoData[s.aiDisplay[n]].nTr);else if(t.order=="current"&&t.filter=="none")for(n=0,r=s.aiDisplayMaster.length;n<r;n++)i.push(s.aoData[s.aiDisplayMaster[n]].nTr);else if(t.order=="current"&&t.filter=="applied")for(n=0,r=s.aiDisplay.length;n<r;n++)i.push(s.aoData[s.aiDisplay[n]].nTr);else if(t.order=="original"&&t.filter=="none")for(n=0,r=s.aoData.length;n<r;n++)i.push(s.aoData[n].nTr);else if(t.order=="original"&&t.filter=="applied")for(n=0,r=s.aoData.length;n<r;n++)$.inArray(n,s.aiDisplay)!==-1&&i.push(s.aoData[n].nTr);else _fnLog(s,1,"Unknown selection options");var o=$(i),u=o.filter(e),a=o.find(e);return $([].concat($.makeArray(u),$.makeArray(a)))},this._=function(e,t){var n=[],r,i,s,o=this.$(e,t);for(r=0,i=o.length;r<i;r++)n.push(this.fnGetData(o[r]));return n},this.fnAddData=function(e,t){if(e.length===0)return[];var n=[],r,i=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]);if(typeof e[0]=="object"&&e[0]!==null)for(var s=0;s<e.length;s++){r=_fnAddData(i,e[s]);if(r==-1)return n;n.push(r)}else{r=_fnAddData(i,e);if(r==-1)return n;n.push(r)}return i.aiDisplay=i.aiDisplayMaster.slice(),(t===undefined||t)&&_fnReDraw(i),n},this.fnAdjustColumnSizing=function(e){var t=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]);_fnAdjustColumnSizing(t),e===undefined||e?this.fnDraw(!1):(t.oScroll.sX!==""||t.oScroll.sY!=="")&&this.oApi._fnScrollDraw(t)},this.fnClearTable=function(e){var t=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]);_fnClearTable(t),(e===undefined||e)&&_fnDraw(t)},this.fnClose=function(e){var t=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]);for(var n=0;n<t.aoOpenRows.length;n++)if(t.aoOpenRows[n].nParent==e){var r=t.aoOpenRows[n].nTr.parentNode;return r&&r.removeChild(t.aoOpenRows[n].nTr),t.aoOpenRows.splice(n,1),0}return 1},this.fnDeleteRow=function(e,t,n){var r=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]),i,s,o;o=typeof e=="object"?_fnNodeToDataIndex(r,e):e;var u=r.aoData.splice(o,1);for(i=0,s=r.aoData.length;i<s;i++)r.aoData[i].nTr!==null&&(r.aoData[i].nTr._DT_RowIndex=i);var a=$.inArray(o,r.aiDisplay);r.asDataSearch.splice(a,1),_fnDeleteIndex(r.aiDisplayMaster,o),_fnDeleteIndex(r.aiDisplay,o),typeof t=="function"&&t.call(this,r,u),r._iDisplayStart>=r.aiDisplay.length&&(r._iDisplayStart-=r._iDisplayLength,r._iDisplayStart<0&&(r._iDisplayStart=0));if(n===undefined||n)_fnCalculateEnd(r),_fnDraw(r);return u},this.fnDestroy=function(e){var t=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]),n=t.nTableWrapper.parentNode,r=t.nTBody,i,s;e=e===undefined?!1:!0,t.bDestroying=!0;for(i=0,s=t.aoDestroyCallback.length;i<s;i++)t.aoDestroyCallback[i].fn();for(i=0,s=t.aoColumns.length;i<s;i++)t.aoColumns[i].bVisible===!1&&this.fnSetColumnVis(i,!0);$(t.nTableWrapper).find("*").andSelf().unbind(".DT"),$("tbody>tr>td."+t.oClasses.sRowEmpty,t.nTable).parent().remove(),t.nTable!=t.nTHead.parentNode&&($(t.nTable).children("thead").remove(),t.nTable.appendChild(t.nTHead)),t.nTFoot&&t.nTable!=t.nTFoot.parentNode&&($(t.nTable).children("tfoot").remove(),t.nTable.appendChild(t.nTFoot)),t.nTable.parentNode.removeChild(t.nTable),$(t.nTableWrapper).remove(),t.aaSorting=[],t.aaSortingFixed=[],_fnSortingClasses(t),$(_fnGetTrNodes(t)).removeClass(t.asStripeClasses.join(" ")),$("th, td",t.nTHead).removeClass([t.oClasses.sSortable,t.oClasses.sSortableAsc,t.oClasses.sSortableDesc,t.oClasses.sSortableNone].join(" ")),t.bJUI&&($("th span."+t.oClasses.sSortIcon+", td span."+t.oClasses.sSortIcon,t.nTHead).remove(),$("th, td",t.nTHead).each(function(){var e=$("div."+t.oClasses.sSortJUIWrapper,this),n=e.contents();$(this).append(n),e.remove()})),!e&&t.nTableReinsertBefore?n.insertBefore(t.nTable,t.nTableReinsertBefore):e||n.appendChild(t.nTable);for(i=0,s=t.aoData.length;i<s;i++)t.aoData[i].nTr!==null&&r.appendChild(t.aoData[i].nTr);t.oFeatures.bAutoWidth===!0&&(t.nTable.style.width=_fnStringToCss(t.sDestroyWidth)),$(r).children("tr:even").addClass(t.asDestroyStripes[0]),$(r).children("tr:odd").addClass(t.asDestroyStripes[1]);for(i=0,s=DataTable.settings.length;i<s;i++)DataTable.settings[i]==t&&DataTable.settings.splice(i,1);t=null},this.fnDraw=function(e){var t=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]);e?(_fnCalculateEnd(t),_fnDraw(t)):_fnReDraw(t)},this.fnFilter=function(e,t,n,r,i,s){var o=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]);if(!o.oFeatures.bFilter)return;if(n===undefined||n===null)n=!1;if(r===undefined||r===null)r=!0;if(i===undefined||i===null)i=!0;if(s===undefined||s===null)s=!0;if(t===undefined||t===null){_fnFilterComplete(o,{sSearch:e+"",bRegex:n,bSmart:r,bCaseInsensitive:s},1);if(i&&o.aanFeatures.f){var u=o.aanFeatures.f;for(var a=0,f=u.length;a<f;a++)$("input",u[a]).val(e)}}else $.extend(o.aoPreSearchCols[t],{sSearch:e+"",bRegex:n,bSmart:r,bCaseInsensitive:s}),_fnFilterComplete(o,o.oPreviousSearch,1)},this.fnGetData=function(e,t){var n=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]);if(e!==undefined){var r=e;if(typeof e=="object"){var i=e.nodeName.toLowerCase();i==="tr"?r=_fnNodeToDataIndex(n,e):i==="td"&&(r=_fnNodeToDataIndex(n,e.parentNode),t=_fnNodeToColumnIndex(n,r,e))}return t!==undefined?_fnGetCellData(n,r,t,""):n.aoData[r]!==undefined?n.aoData[r]._aData:null}return _fnGetDataMaster(n)},this.fnGetNodes=function(e){var t=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]);return e!==undefined?t.aoData[e]!==undefined?t.aoData[e].nTr:null:_fnGetTrNodes(t)},this.fnGetPosition=function(e){var t=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]),n=e.nodeName.toUpperCase();if(n=="TR")return _fnNodeToDataIndex(t,e);if(n=="TD"||n=="TH"){var r=_fnNodeToDataIndex(t,e.parentNode),i=_fnNodeToColumnIndex(t,r,e);return[r,_fnColumnIndexToVisible(t,i),i]}return null},this.fnIsOpen=function(e){var t=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]),n=t.aoOpenRows;for(var r=0;r<t.aoOpenRows.length;r++)if(t.aoOpenRows[r].nParent==e)return!0;return!1},this.fnOpen=function(e,t,n){var r=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]),i=_fnGetTrNodes(r);if($.inArray(e,i)===-1)return;this.fnClose(e);var s=document.createElement("tr"),o=document.createElement("td");s.appendChild(o),o.className=n,o.colSpan=_fnVisbleColumns(r),typeof t=="string"?o.innerHTML=t:$(o).html(t);var u=$("tr",r.nTBody);return $.inArray(e,u)!=-1&&$(s).insertAfter(e),r.aoOpenRows.push({nTr:s,nParent:e}),s},this.fnPageChange=function(e,t){var n=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]);_fnPageChange(n,e),_fnCalculateEnd(n),(t===undefined||t)&&_fnDraw(n)},this.fnSetColumnVis=function(e,t,n){var r=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]),i,s,o=r.aoColumns,u=r.aoData,a,f,l,c,h,p;if(o[e].bVisible==t)return;if(t){var d=0;for(i=0;i<e;i++)o[i].bVisible&&d++;h=d>=_fnVisbleColumns(r);if(!h)for(i=e;i<o.length;i++)if(o[i].bVisible){p=i;break}for(i=0,s=u.length;i<s;i++)u[i].nTr!==null&&(h?u[i].nTr.appendChild(u[i]._anHidden[e]):u[i].nTr.insertBefore(u[i]._anHidden[e],_fnGetTdNodes(r,i)[p]))}else for(i=0,s=u.length;i<s;i++)u[i].nTr!==null&&(a=_fnGetTdNodes(r,i)[e],u[i]._anHidden[e]=a,a.parentNode.removeChild(a));o[e].bVisible=t,_fnDrawHead(r,r.aoHeader),r.nTFoot&&_fnDrawHead(r,r.aoFooter);for(i=0,s=r.aoOpenRows.length;i<s;i++)r.aoOpenRows[i].nTr.colSpan=_fnVisbleColumns(r);if(n===undefined||n)_fnAdjustColumnSizing(r),_fnDraw(r);_fnSaveState(r)},this.fnSettings=function(){return _fnSettingsFromNode(this[DataTable.ext.iApiIndex])},this.fnSort=function(e){var t=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]);t.aaSorting=e,_fnSort(t)},this.fnSortListener=function(e,t,n){_fnSortAttachListener(_fnSettingsFromNode(this[DataTable.ext.iApiIndex]),e,t,n)},this.fnUpdate=function(e,t,n,r,i){var s=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]),o,u,a,f,l=typeof t=="object"?_fnNodeToDataIndex(s,t):t;if(s.__fnUpdateDeep===undefined&&$.isArray(e)&&typeof e=="object"){s.aoData[l]._aData=e.slice(),s.__fnUpdateDeep=!0;for(u=0;u<s.aoColumns.length;u++)this.fnUpdate(_fnGetCellData(s,l,u),l,u,!1,!1);s.__fnUpdateDeep=undefined}else if(s.__fnUpdateDeep===undefined&&e!==null&&typeof e=="object"){s.aoData[l]._aData=$.extend(!0,{},e),s.__fnUpdateDeep=!0;for(u=0;u<s.aoColumns.length;u++)this.fnUpdate(_fnGetCellData(s,l,u),l,u,!1,!1);s.__fnUpdateDeep=undefined}else{_fnSetCellData(s,l,n,e),f=_fnGetCellData(s,l,n,"display");var c=s.aoColumns[n];c.fnRender!==null&&(f=_fnRender(s,l,n),c.bUseRendered&&_fnSetCellData(s,l,n,f)),s.aoData[l].nTr!==null&&(_fnGetTdNodes(s,l)[n].innerHTML=f)}var h=$.inArray(l,s.aiDisplay);return s.asDataSearch[h]=_fnBuildSearchRow(s,_fnGetRowData(s,l,"filter")),(i===undefined||i)&&_fnAdjustColumnSizing(s),(r===undefined||r)&&_fnReDraw(s),0},this.fnVersionCheck=DataTable.ext.fnVersionCheck,this.oApi={_fnExternApiFunc:_fnExternApiFunc,_fnInitialise:_fnInitialise,_fnInitComplete:_fnInitComplete,_fnLanguageCompat:_fnLanguageCompat,_fnAddColumn:_fnAddColumn,_fnColumnOptions:_fnColumnOptions,_fnAddData:_fnAddData,_fnCreateTr:_fnCreateTr,_fnGatherData:_fnGatherData,_fnBuildHead:_fnBuildHead,_fnDrawHead:_fnDrawHead,_fnDraw:_fnDraw,_fnReDraw:_fnReDraw,_fnAjaxUpdate:_fnAjaxUpdate,_fnAjaxParameters:_fnAjaxParameters,_fnAjaxUpdateDraw:_fnAjaxUpdateDraw,_fnServerParams:_fnServerParams,_fnAddOptionsHtml:_fnAddOptionsHtml,_fnFeatureHtmlTable:_fnFeatureHtmlTable,_fnScrollDraw:_fnScrollDraw,_fnAdjustColumnSizing:_fnAdjustColumnSizing,_fnFeatureHtmlFilter:_fnFeatureHtmlFilter,_fnFilterComplete:_fnFilterComplete,_fnFilterCustom:_fnFilterCustom,_fnFilterColumn:_fnFilterColumn,_fnFilter:_fnFilter,_fnBuildSearchArray:_fnBuildSearchArray,_fnBuildSearchRow:_fnBuildSearchRow,_fnFilterCreateSearch:_fnFilterCreateSearch,_fnDataToSearch:_fnDataToSearch,_fnSort:_fnSort,_fnSortAttachListener:_fnSortAttachListener,_fnSortingClasses:_fnSortingClasses,_fnFeatureHtmlPaginate:_fnFeatureHtmlPaginate,_fnPageChange:_fnPageChange,_fnFeatureHtmlInfo:_fnFeatureHtmlInfo,_fnUpdateInfo:_fnUpdateInfo,_fnFeatureHtmlLength:_fnFeatureHtmlLength,_fnFeatureHtmlProcessing:_fnFeatureHtmlProcessing,_fnProcessingDisplay:_fnProcessingDisplay,_fnVisibleToColumnIndex:_fnVisibleToColumnIndex,_fnColumnIndexToVisible:_fnColumnIndexToVisible,_fnNodeToDataIndex:_fnNodeToDataIndex,_fnVisbleColumns:_fnVisbleColumns,_fnCalculateEnd:_fnCalculateEnd,_fnConvertToWidth:_fnConvertToWidth,_fnCalculateColumnWidths:_fnCalculateColumnWidths,_fnScrollingWidthAdjust:_fnScrollingWidthAdjust,_fnGetWidestNode:_fnGetWidestNode,_fnGetMaxLenString:_fnGetMaxLenString,_fnStringToCss:_fnStringToCss,_fnDetectType:_fnDetectType,_fnSettingsFromNode:_fnSettingsFromNode,_fnGetDataMaster:_fnGetDataMaster,_fnGetTrNodes:_fnGetTrNodes,_fnGetTdNodes:_fnGetTdNodes,_fnEscapeRegex:_fnEscapeRegex,_fnDeleteIndex:_fnDeleteIndex,_fnReOrderIndex:_fnReOrderIndex,_fnColumnOrdering:_fnColumnOrdering,_fnLog:_fnLog,_fnClearTable:_fnClearTable,_fnSaveState:_fnSaveState,_fnLoadState:_fnLoadState,_fnCreateCookie:_fnCreateCookie,_fnReadCookie:_fnReadCookie,_fnDetectHeader:_fnDetectHeader,_fnGetUniqueThs:_fnGetUniqueThs,_fnScrollBarWidth:_fnScrollBarWidth,_fnApplyToChildren:_fnApplyToChildren,_fnMap:_fnMap,_fnGetRowData:_fnGetRowData,_fnGetCellData:_fnGetCellData,_fnSetCellData:_fnSetCellData,_fnGetObjectDataFn:_fnGetObjectDataFn,_fnSetObjectDataFn:_fnSetObjectDataFn,_fnApplyColumnDefs:_fnApplyColumnDefs,_fnBindAction:_fnBindAction,_fnExtend:_fnExtend,_fnCallbackReg:_fnCallbackReg,_fnCallbackFire:_fnCallbackFire,_fnJsonString:_fnJsonString,_fnRender:_fnRender,_fnNodeToColumnIndex:_fnNodeToColumnIndex},$.extend(DataTable.ext.oApi,this.oApi);for(var sFunc in DataTable.ext.oApi)sFunc&&(this[sFunc]=_fnExternApiFunc(sFunc));var _that=this;return this.each(function(){var e=0,t,n,r,i,s,o=this.getAttribute("id"),u=!1,a=!1;if(this.nodeName.toLowerCase()!="table"){_fnLog(null,0,"Attempted to initialise DataTables on a node which is not a table: "+this.nodeName);return}for(e=0,t=DataTable.settings.length;e<t;e++){if(DataTable.settings[e].nTable==this){if(oInit===undefined||oInit.bRetrieve)return DataTable.settings[e].oInstance;if(oInit.bDestroy){DataTable.settings[e].oInstance.fnDestroy();break}_fnLog(DataTable.settings[e],0,"Cannot reinitialise DataTable.\n\nTo retrieve the DataTables object for this table, pass no arguments or see the docs for bRetrieve and bDestroy");return}if(DataTable.settings[e].sTableId==this.id){DataTable.settings.splice(e,1);break}}o===null&&(o="DataTables_Table_"+DataTable.ext._oExternConfig.iNextUnique++,this.id=o);var f=$.extend(!0,{},DataTable.models.oSettings,{nTable:this,oApi:_that.oApi,oInit:oInit,sDestroyWidth:$(this).width(),sInstance:o,sTableId:o});DataTable.settings.push(f),f.oInstance=_that.length===1?_that:$(this).dataTable(),oInit||(oInit={}),oInit.oLanguage&&_fnLanguageCompat(oInit.oLanguage),oInit=_fnExtend($.extend(!0,{},DataTable.defaults),oInit),_fnMap(f.oFeatures,oInit,"bPaginate"),_fnMap(f.oFeatures,oInit,"bLengthChange"),_fnMap(f.oFeatures,oInit,"bFilter"),_fnMap(f.oFeatures,oInit,"bSort"),_fnMap(f.oFeatures,oInit,"bInfo"),_fnMap(f.oFeatures,oInit,"bProcessing"),_fnMap(f.oFeatures,oInit,"bAutoWidth"),_fnMap(f.oFeatures,oInit,"bSortClasses"),_fnMap(f.oFeatures,oInit,"bServerSide"),_fnMap(f.oFeatures,oInit,"bDeferRender"),_fnMap(f.oScroll,oInit,"sScrollX","sX"),_fnMap(f.oScroll,oInit,"sScrollXInner","sXInner"),_fnMap(f.oScroll,oInit,"sScrollY","sY"),_fnMap(f.oScroll,oInit,"bScrollCollapse","bCollapse"),_fnMap(f.oScroll,oInit,"bScrollInfinite","bInfinite"),_fnMap(f.oScroll,oInit,"iScrollLoadGap","iLoadGap"),_fnMap(f.oScroll,oInit,"bScrollAutoCss","bAutoCss"),_fnMap(f,oInit,"asStripClasses","asStripeClasses"),_fnMap(f,oInit,"asStripeClasses"),_fnMap(f,oInit,"fnServerData"),_fnMap(f,oInit,"fnFormatNumber"),_fnMap(f,oInit,"sServerMethod"),_fnMap(f,oInit,"aaSorting"),_fnMap(f,oInit,"aaSortingFixed"),_fnMap(f,oInit,"aLengthMenu"),_fnMap(f,oInit,"sPaginationType"),_fnMap(f,oInit,"sAjaxSource"),_fnMap(f,oInit,"sAjaxDataProp"),_fnMap(f,oInit,"iCookieDuration"),_fnMap(f,oInit,"sCookiePrefix"),_fnMap(f,oInit,"sDom"),_fnMap(f,oInit,"bSortCellsTop"),_fnMap(f,oInit,"iTabIndex"),_fnMap(f,oInit,"oSearch","oPreviousSearch"),_fnMap(f,oInit,"aoSearchCols","aoPreSearchCols"),_fnMap(f,oInit,"iDisplayLength","_iDisplayLength"),_fnMap(f,oInit,"bJQueryUI","bJUI"),_fnMap(f,oInit,"fnCookieCallback"),_fnMap(f,oInit,"fnStateLoad"),_fnMap(f,oInit,"fnStateSave"),_fnMap(f.oLanguage,oInit,"fnInfoCallback"),_fnCallbackReg(f,"aoDrawCallback",oInit.fnDrawCallback,"user"),_fnCallbackReg(f,"aoServerParams",oInit.fnServerParams,"user"),_fnCallbackReg(f,"aoStateSaveParams",oInit.fnStateSaveParams,"user"),_fnCallbackReg(f,"aoStateLoadParams",oInit.fnStateLoadParams,"user"),_fnCallbackReg(f,"aoStateLoaded",oInit.fnStateLoaded,"user"),_fnCallbackReg(f,"aoRowCallback",oInit.fnRowCallback,"user"),_fnCallbackReg(f,"aoRowCreatedCallback",oInit.fnCreatedRow,"user"),_fnCallbackReg(f,"aoHeaderCallback",oInit.fnHeaderCallback,"user"),_fnCallbackReg(f,"aoFooterCallback",oInit.fnFooterCallback,"user"),_fnCallbackReg(f,"aoInitComplete",oInit.fnInitComplete,"user"),_fnCallbackReg(f,"aoPreDrawCallback",oInit.fnPreDrawCallback,"user"),f.oFeatures.bServerSide&&f.oFeatures.bSort&&f.oFeatures.bSortClasses?_fnCallbackReg(f,"aoDrawCallback",_fnSortingClasses,"server_side_sort_classes"):f.oFeatures.bDeferRender&&_fnCallbackReg(f,"aoDrawCallback",_fnSortingClasses,"defer_sort_classes"),oInit.bJQueryUI?($.extend(f.oClasses,DataTable.ext.oJUIClasses),oInit.sDom===DataTable.defaults.sDom&&DataTable.defaults.sDom==="lfrtip"&&(f.sDom='<"H"lfr>t<"F"ip>')):$.extend(f.oClasses,DataTable.ext.oStdClasses),$(this).addClass(f.oClasses.sTable);if(f.oScroll.sX!==""||f.oScroll.sY!=="")f.oScroll.iBarWidth=_fnScrollBarWidth();f.iInitDisplayStart===undefined&&(f.iInitDisplayStart=oInit.iDisplayStart,f._iDisplayStart=oInit.iDisplayStart),oInit.bStateSave&&(f.oFeatures.bStateSave=!0,_fnLoadState(f,oInit),_fnCallbackReg(f,"aoDrawCallback",_fnSaveState,"state_save")),oInit.iDeferLoading!==null&&(f.bDeferLoading=!0,f._iRecordsTotal=oInit.iDeferLoading,f._iRecordsDisplay=oInit.iDeferLoading),oInit.aaData!==null&&(a=!0),oInit.oLanguage.sUrl!==""?(f.oLanguage.sUrl=oInit.oLanguage.sUrl,$.getJSON(f.oLanguage.sUrl,null,function(e){_fnLanguageCompat(e),$.extend(!0,f.oLanguage,oInit.oLanguage,e),_fnInitialise(f)}),u=!0):$.extend(!0,f.oLanguage,oInit.oLanguage);var l=!1,c=$(this).children("tbody").children("tr");for(e=0,t=f.asStripeClasses.length;e<t;e++)if(c.filter(":lt(2)").hasClass(f.asStripeClasses[e])){l=!0;break}l&&(f.asDestroyStripes=["",""],$(c[0]).hasClass(f.oClasses.sStripeOdd)&&(f.asDestroyStripes[0]+=f.oClasses.sStripeOdd+" "),$(c[0]).hasClass(f.oClasses.sStripeEven)&&(f.asDestroyStripes[0]+=f.oClasses.sStripeEven),$(c[1]).hasClass(f.oClasses.sStripeOdd)&&(f.asDestroyStripes[1]+=f.oClasses.sStripeOdd+" "),$(c[1]).hasClass(f.oClasses.sStripeEven)&&(f.asDestroyStripes[1]+=f.oClasses.sStripeEven),c.removeClass(f.asStripeClasses.join(" ")));var h=[],p,d=this.getElementsByTagName("thead");d.length!==0&&(_fnDetectHeader(f.aoHeader,d[0]),h=_fnGetUniqueThs(f));if(oInit.aoColumns===null){p=[];for(e=0,t=h.length;e<t;e++)p.push(null)}else p=oInit.aoColumns;for(e=0,t=p.length;e<t;e++)oInit.saved_aoColumns!==undefined&&oInit.saved_aoColumns.length==t&&(p[e]===null&&(p[e]={}),p[e].bVisible=oInit.saved_aoColumns[e].bVisible),_fnAddColumn(f,h?h[e]:null);_fnApplyColumnDefs(f,oInit.aoColumnDefs,p,function(e,t){_fnColumnOptions(f,e,t)});for(e=0,t=f.aaSorting.length;e<t;e++){f.aaSorting[e][0]>=f.aoColumns.length&&(f.aaSorting[e][0]=0);var v=f.aoColumns[f.aaSorting[e][0]];f.aaSorting[e][2]===undefined&&(f.aaSorting[e][2]=0),oInit.aaSorting===undefined&&f.saved_aaSorting===undefined&&(f.aaSorting[e][1]=v.asSorting[0]);for(n=0,r=v.asSorting.length;n<r;n++)if(f.aaSorting[e][1]==v.asSorting[n]){f.aaSorting[e][2]=n;break}}_fnSortingClasses(f);var m=$(this).children("thead");m.length===0&&(m=[document.createElement("thead")],this.appendChild(m[0])),f.nTHead=m[0];var g=$(this).children("tbody");g.length===0&&(g=[document.createElement("tbody")],this.appendChild(g[0])),f.nTBody=g[0],f.nTBody.setAttribute("role","alert"),f.nTBody.setAttribute("aria-live","polite"),f.nTBody.setAttribute("aria-relevant","all");var y=$(this).children("tfoot");y.length>0&&(f.nTFoot=y[0],_fnDetectHeader(f.aoFooter,f.nTFoot));if(a)for(e=0;e<oInit.aaData.length;e++)_fnAddData(f,oInit.aaData[e]);else _fnGatherData(f);f.aiDisplay=f.aiDisplayMaster.slice(),f.bInitialised=!0,u===!1&&_fnInitialise(f)})};DataTable.version="1.9.0",DataTable.settings=[],DataTable.models={},DataTable.models.ext={afnFiltering:[],afnSortData:[],aoFeatures:[],aTypes:[],fnVersionCheck:function(e){var t=function(e,t){while(e.length<t)e+="0";return e},n=DataTable.ext.sVersion.split("."),r=e.split("."),i="",s="";for(var o=0,u=r.length;o<u;o++)i+=t(n[o],3),s+=t(r[o],3);return parseInt(i,10)>=parseInt(s,10)},iApiIndex:0,ofnSearch:{},oApi:{},oStdClasses:{},oJUIClasses:{},oPagination:{},oSort:{},sVersion:DataTable.version,sErrMode:"alert",_oExternConfig:{iNextUnique:0}},DataTable.models.oSearch={bCaseInsensitive:!0,sSearch:"",bRegex:!1,bSmart:!0},DataTable.models.oRow={nTr:null,_aData:[],_aSortData:[],_anHidden:[],_sRowStripe:""},DataTable.models.oColumn={aDataSort:null,asSorting:null,bSearchable:null,bSortable:null,bUseRendered:null,bVisible:null,_bAutoType:!0,fnCreatedCell:null,fnGetData:null,fnRender:null,fnSetData:null,mDataProp:null,nTh:null,nTf:null,sClass:null,sContentPadding:null,sDefaultContent:null,sName:null,sSortDataType:"std",sSortingClass:null,sSortingClassJUI:null,sTitle:null,sType:null,sWidth:null,sWidthOrig:null},DataTable.defaults={aaData:null,aaSorting:[[0,"asc"]],aaSortingFixed:null,aLengthMenu:[10,25,50,100],aoColumns:null,aoColumnDefs:null,aoSearchCols:[],asStripeClasses:["odd","even"],bAutoWidth:!0,bDeferRender:!1,bDestroy:!1,bFilter:!0,bInfo:!0,bJQueryUI:!1,bLengthChange:!0,bPaginate:!0,bProcessing:!1,bRetrieve:!1,bScrollAutoCss:!0,bScrollCollapse:!1,bScrollInfinite:!1,bServerSide:!1,bSort:!0,bSortCellsTop:!1,bSortClasses:!0,bStateSave:!1,fnCookieCallback:null,fnCreatedRow:null,fnDrawCallback:null,fnFooterCallback:null,fnFormatNumber:function(e){if(e<1e3)return e;var t=e+"",n=t.split(""),r="",i=t.length;for(var s=0;s<i;s++)s%3===0&&s!==0&&(r=this.oLanguage.sInfoThousands+r),r=n[i-s-1]+r;return r},fnHeaderCallback:null,fnInfoCallback:null,fnInitComplete:null,fnPreDrawCallback:null,fnRowCallback:null,fnServerData:function(e,t,n,r){r.jqXHR=$.ajax({url:e,data:t,success:function(e){$(r.oInstance).trigger("xhr",r),n(e)},dataType:"json",cache:!1,type:r.sServerMethod,error:function(e,t,n){t=="parsererror"&&alert("DataTables warning: JSON data from server could not be parsed. This is caused by a JSON formatting error.")}})},fnServerParams:null,fnStateLoad:function(oSettings){var sData=this.oApi._fnReadCookie(oSettings.sCookiePrefix+oSettings.sInstance),oData;try{oData=typeof $.parseJSON=="function"?$.parseJSON(sData):eval("("+sData+")")}catch(e){oData=null}return oData},fnStateLoadParams:null,fnStateLoaded:null,fnStateSave:function(e,t){this.oApi._fnCreateCookie(e.sCookiePrefix+e.sInstance,this.oApi._fnJsonString(t),e.iCookieDuration,e.sCookiePrefix,e.fnCookieCallback)},fnStateSaveParams:null,iCookieDuration:7200,iDeferLoading:null,iDisplayLength:10,iDisplayStart:0,iScrollLoadGap:100,iTabIndex:0,oLanguage:{oAria:{sSortAscending:": activate to sort column ascending",sSortDescending:": activate to sort column descending"},oPaginate:{sFirst:"First",sLast:"Last",sNext:"Next",sPrevious:"Previous"},sEmptyTable:"No data available in table",sInfo:"Showing _START_ to _END_ of _TOTAL_ entries",sInfoEmpty:"Showing 0 to 0 of 0 entries",sInfoFiltered:"(filtered from _MAX_ total entries)",sInfoPostFix:"",sInfoThousands:",",sLengthMenu:"Show _MENU_ entries",sLoadingRecords:"Loading...",sProcessing:"Loading...",sSearch:"Search:",sUrl:"",sZeroRecords:"No matching records found"},oSearch:$.extend({},DataTable.models.oSearch),sAjaxDataProp:"aaData",sAjaxSource:null,sCookiePrefix:"SpryMedia_DataTables_",sDom:"lfrtip",sPaginationType:"two_button",sScrollX:"",sScrollXInner:"",sScrollY:"",sServerMethod:"GET"},DataTable.defaults.columns={aDataSort:null,asSorting:["asc","desc"],bSearchable:!0,bSortable:!0,bUseRendered:!0,bVisible:!0,fnCreatedCell:null,fnRender:null,iDataSort:-1,mDataProp:null,sClass:"",sContentPadding:"",sDefaultContent:null,sName:"",sSortDataType:"std",sTitle:null,sType:null,sWidth:null},DataTable.models.oSettings={oFeatures:{bAutoWidth:null,bDeferRender:null,bFilter:null,bInfo:null,bLengthChange:null,bPaginate:null,bProcessing:null,bServerSide:null,bSort:null,bSortClasses:null,bStateSave:null},oScroll:{bAutoCss:null,bCollapse:null,bInfinite:null,iBarWidth:0,iLoadGap:null,sX:null,sXInner:null,sY:null},oLanguage:{fnInfoCallback:null},aanFeatures:[],aoData:[],aiDisplay:[],aiDisplayMaster:[],aoColumns:[],aoHeader:[],aoFooter:[],asDataSearch:[],oPreviousSearch:{},aoPreSearchCols:[],aaSorting:null,aaSortingFixed:null,asStripeClasses:null,asDestroyStripes:[],sDestroyWidth:0,aoRowCallback:[],aoHeaderCallback:[],aoFooterCallback:[],aoDrawCallback:[],aoRowCreatedCallback:[],aoPreDrawCallback:[],aoInitComplete:[],aoStateSaveParams:[],aoStateLoadParams:[],aoStateLoaded:[],sTableId:"",nTable:null,nTHead:null,nTFoot:null,nTBody:null,nTableWrapper:null,bDeferLoading:!1,bInitialised:!1,aoOpenRows:[],sDom:null,sPaginationType:"two_button",iCookieDuration:0,sCookiePrefix:"",fnCookieCallback:null,aoStateSave:[],aoStateLoad:[],oLoadedState:null,sAjaxSource:null,sAjaxDataProp:null,bAjaxDataGet:!0,jqXHR:null,fnServerData:null,aoServerParams:[],sServerMethod:null,fnFormatNumber:null,aLengthMenu:null,iDraw:0,bDrawing:!1,iDrawError:-1,_iDisplayLength:10,_iDisplayStart:0,_iDisplayEnd:10,_iRecordsTotal:0,_iRecordsDisplay:0,bJUI:null,oClasses:{},bFiltered:!1,bSorted:!1,bSortCellsTop:null,oInit:null,aoDestroyCallback:[],fnRecordsTotal:function(){return this.oFeatures.bServerSide?parseInt(this._iRecordsTotal,10):this.aiDisplayMaster.length},fnRecordsDisplay:function(){return this.oFeatures.bServerSide?parseInt(this._iRecordsDisplay,10):this.aiDisplay.length},fnDisplayEnd:function(){return this.oFeatures.bServerSide?this.oFeatures.bPaginate===!1||this._iDisplayLength==-1?this._iDisplayStart+this.aiDisplay.length:Math.min(this._iDisplayStart+this._iDisplayLength,this._iRecordsDisplay):this._iDisplayEnd},oInstance:null,sInstance:null,iTabIndex:0},DataTable.ext=$.extend(!0,{},DataTable.models.ext),$.extend(DataTable.ext.oStdClasses,{sTable:"dataTable",sPagePrevEnabled:"paginate_enabled_previous",sPagePrevDisabled:"paginate_disabled_previous",sPageNextEnabled:"paginate_enabled_next",sPageNextDisabled:"paginate_disabled_next",sPageJUINext:"",sPageJUIPrev:"",sPageButton:"paginate_button",sPageButtonActive:"paginate_active",sPageButtonStaticDisabled:"paginate_button paginate_button_disabled",sPageFirst:"first",sPagePrevious:"previous",sPageNext:"next",sPageLast:"last",sStripeOdd:"odd",sStripeEven:"even",sRowEmpty:"dataTables_empty",sWrapper:"dataTables_wrapper",sFilter:"dataTables_filter",sInfo:"dataTables_info",sPaging:"dataTables_paginate paging_",sLength:"dataTables_length",sProcessing:"dataTables_processing",sSortAsc:"sorting_asc",sSortDesc:"sorting_desc",sSortable:"sorting",sSortableAsc:"sorting_asc_disabled",sSortableDesc:"sorting_desc_disabled",sSortableNone:"sorting_disabled",sSortColumn:"sorting_",sSortJUIAsc:"",sSortJUIDesc:"",sSortJUI:"",sSortJUIAscAllowed:"",sSortJUIDescAllowed:"",sSortJUIWrapper:"",sSortIcon:"",sScrollWrapper:"dataTables_scroll",sScrollHead:"dataTables_scrollHead",sScrollHeadInner:"dataTables_scrollHeadInner",sScrollBody:"dataTables_scrollBody",sScrollFoot:"dataTables_scrollFoot",sScrollFootInner:"dataTables_scrollFootInner",sFooterTH:""}),$.extend(DataTable.ext.oJUIClasses,DataTable.ext.oStdClasses,{sPagePrevEnabled:"fg-button ui-button ui-state-default ui-corner-left",sPagePrevDisabled:"fg-button ui-button ui-state-default ui-corner-left ui-state-disabled",sPageNextEnabled:"fg-button ui-button ui-state-default ui-corner-right",sPageNextDisabled:"fg-button ui-button ui-state-default ui-corner-right ui-state-disabled",sPageJUINext:"ui-icon ui-icon-circle-arrow-e",sPageJUIPrev:"ui-icon ui-icon-circle-arrow-w",sPageButton:"fg-button ui-button ui-state-default",sPageButtonActive:"fg-button ui-button ui-state-default ui-state-disabled",sPageButtonStaticDisabled:"fg-button ui-button ui-state-default ui-state-disabled",sPageFirst:"first ui-corner-tl ui-corner-bl",sPageLast:"last ui-corner-tr ui-corner-br",sPaging:"dataTables_paginate fg-buttonset ui-buttonset fg-buttonset-multi ui-buttonset-multi paging_",sSortAsc:"ui-state-default",sSortDesc:"ui-state-default",sSortable:"ui-state-default",sSortableAsc:"ui-state-default",sSortableDesc:"ui-state-default",sSortableNone:"ui-state-default",sSortJUIAsc:"css_right ui-icon ui-icon-triangle-1-n",sSortJUIDesc:"css_right ui-icon ui-icon-triangle-1-s",sSortJUI:"css_right ui-icon ui-icon-carat-2-n-s",sSortJUIAscAllowed:"css_right ui-icon ui-icon-carat-1-n",sSortJUIDescAllowed:"css_right ui-icon ui-icon-carat-1-s",sSortJUIWrapper:"DataTables_sort_wrapper",sSortIcon:"DataTables_sort_icon",sScrollHead:"dataTables_scrollHead ui-state-default",sScrollFoot:"dataTables_scrollFoot ui-state-default",sFooterTH:"ui-state-default"}),$.extend(DataTable.ext.oPagination,{two_button:{fnInit:function(e,t,n){var r=e.oLanguage.oPaginate,i=e.oClasses,s=function(t){e.oApi._fnPageChange(e,t.data.action)&&n(e)},o=e.bJUI?'<a class="'+e.oClasses.sPagePrevDisabled+'" tabindex="'+e.iTabIndex+'" role="button"><span class="'+e.oClasses.sPageJUIPrev+'"></span></a>'+'<a class="'+e.oClasses.sPageNextDisabled+'" tabindex="'+e.iTabIndex+'" role="button"><span class="'+e.oClasses.sPageJUINext+'"></span></a>':'<a class="'+e.oClasses.sPagePrevDisabled+'" tabindex="'+e.iTabIndex+'" role="button">'+r.sPrevious+"</a>"+'<a class="'+e.oClasses.sPageNextDisabled+'" tabindex="'+e.iTabIndex+'" role="button">'+r.sNext+"</a>";$(t).append(o);var u=$("a",t),a=u[0],f=u[1];e.oApi._fnBindAction(a,{action:"previous"},s),e.oApi._fnBindAction(f,{action:"next"},s),e.aanFeatures.p||(t.id=e.sTableId+"_paginate",a.id=e.sTableId+"_previous",f.id=e.sTableId+"_next",a.setAttribute("aria-controls",e.sTableId),f.setAttribute("aria-controls",e.sTableId))},fnUpdate:function(e,t){if(!e.aanFeatures.p)return;var n=e.oClasses,r=e.aanFeatures.p;for(var i=0,s=r.length;i<s;i++)r[i].childNodes.length!==0&&(r[i].childNodes[0].className=e._iDisplayStart===0?n.sPagePrevDisabled:n.sPagePrevEnabled,r[i].childNodes[1].className=e.fnDisplayEnd()==e.fnRecordsDisplay()?n.sPageNextDisabled:n.sPageNextEnabled)}},iFullNumbersShowPages:5,full_numbers:{fnInit:function(e,t,n){var r=e.oLanguage.oPaginate,i=e.oClasses,s=function(t){e.oApi._fnPageChange(e,t.data.action)&&n(e)};$(t).append('<a  tabindex="'+e.iTabIndex+'" class="'+i.sPageButton+" "+i.sPageFirst+'">'+r.sFirst+"</a>"+'<a  tabindex="'+e.iTabIndex+'" class="'+i.sPageButton+" "+i.sPagePrevious+'">'+r.sPrevious+"</a>"+"<span></span>"+'<a tabindex="'+e.iTabIndex+'" class="'+i.sPageButton+" "+i.sPageNext+'">'+r.sNext+"</a>"+'<a tabindex="'+e.iTabIndex+'" class="'+i.sPageButton+" "+i.sPageLast+'">'+r.sLast+"</a>");var o=$("a",t),u=o[0],a=o[1],f=o[2],l=o[3];e.oApi._fnBindAction(u,{action:"first"},s),e.oApi._fnBindAction(a,{action:"previous"},s),e.oApi._fnBindAction(f,{action:"next"},s),e.oApi._fnBindAction(l,{action:"last"},s),e.aanFeatures.p||(t.id=e.sTableId+"_paginate",u.id=e.sTableId+"_first",a.id=e.sTableId+"_previous",f.id=e.sTableId+"_next",l.id=e.sTableId+"_last")},fnUpdate:function(e,t){if(!e.aanFeatures.p)return;var n=DataTable.ext.oPagination.iFullNumbersShowPages,r=Math.floor(n/2),i=Math.ceil(e.fnRecordsDisplay()/e._iDisplayLength),s=Math.ceil(e._iDisplayStart/e._iDisplayLength)+1,o="",u,a,f,l,c=e.oClasses,h,p,d,v=e.aanFeatures.p,m=function(n){e.oApi._fnBindAction(this,{page:n+u-1},function(n){e.oApi._fnPageChange(e,n.data.page),t(e),n.preventDefault()})};i<n?(u=1,a=i):s<=r?(u=1,a=n):s>=i-r?(u=i-n+1,a=i):(u=s-Math.ceil(n/2)+1,a=u+n-1);for(f=u;f<=a;f++)o+=s!==f?'<a tabindex="'+e.iTabIndex+'" class="'+c.sPageButton+'">'+e.fnFormatNumber(f)+"</a>":'<a tabindex="'+e.iTabIndex+'" class="'+c.sPageButtonActive+'">'+e.fnFormatNumber(f)+"</a>";for(f=0,l=v.length;f<l;f++){if(v[f].childNodes.length===0)continue;$("span:eq(0)",v[f]).html(o).children("a").each(m),h=v[f].getElementsByTagName("a"),p=[h[0],h[1],h[h.length-2],h[h.length-1]],$(p).removeClass(c.sPageButton+" "+c.sPageButtonActive+" "+c.sPageButtonStaticDisabled),$([p[0],p[1]]).addClass(s==1?c.sPageButtonStaticDisabled:c.sPageButton),$([p[2],p[3]]).addClass(i===0||s===i||e._iDisplayLength===-1?c.sPageButtonStaticDisabled:c.sPageButton)}}}}),$.extend(DataTable.ext.oSort,{"string-pre":function(e){return typeof e!="string"&&(e=""),e.toLowerCase()},"string-asc":function(e,t){return e<t?-1:e>t?1:0},"string-desc":function(e,t){return e<t?1:e>t?-1:0},"html-pre":function(e){return e.replace(/<.*?>/g,"").toLowerCase()},"html-asc":function(e,t){return e<t?-1:e>t?1:0},"html-desc":function(e,t){return e<t?1:e>t?-1:0},"date-pre":function(e){var t=Date.parse(e);if(isNaN(t)||t==="")t=Date.parse("01/01/1970 00:00:00");return t},"date-asc":function(e,t){return e-t},"date-desc":function(e,t){return t-e},"numeric-pre":function(e){return e=="-"||e===""?0:e*1},"numeric-asc":function(e,t){return e-t},"numeric-desc":function(e,t){return t-e}}),$.extend(DataTable.ext.aTypes,[function(e){if(typeof e=="number")return"numeric";if(typeof e!="string")return null;var t="0123456789-",n="0123456789.",r,i=!1;r=e.charAt(0);if(t.indexOf(r)==-1)return null;for(var s=1;s<e.length;s++){r=e.charAt(s);if(n.indexOf(r)==-1)return null;if(r=="."){if(i)return null;i=!0}}return"numeric"},function(e){var t=Date.parse(e);return t!==null&&!isNaN(t)||typeof e=="string"&&e.length===0?"date":null},function(e){return typeof e=="string"&&e.indexOf("<")!=-1&&e.indexOf(">")!=-1?"html":null}]),$.fn.DataTable=DataTable,$.fn.dataTable=DataTable,$.fn.dataTableSettings=DataTable.settings,$.fn.dataTableExt=DataTable.ext})(jQuery,window,document,undefined)}.apply(root,arguments)})}(this),define("common/Duedil.dataTables",["jquery","jquery-dataTables"],function(e){e.extend(!0,e.fn.dataTable.defaults,{sDom:"rtip",bLengthChange:!1,oLanguage:{sInfo:"<strong>_START_</strong> to <strong>_END_</strong> of <strong>_TOTAL_</strong>",sInfoEmpty:"0 records",sInfoFiltered:" (_MAX_ total)",sEmptyTable:"No data."},sPaginationType:"two_button",fnInitComplete:function(){if(this.hasClass("responsive")){var t=this.parents(".dataTables_wrapper").parent(),n=this.parents(".responsive-table-wrapper");n.parent().addClass("clearfix");if(t.hasClass("scrollable")){var r=t.find(".dataTables_paginate"),i=t.find(".dataTables_info");i.insertAfter(n),r.insertAfter(n)}this.on("draw",function(){var t=e(this),n=t.clone(!0),r=t.parents(".responsive-table-wrapper"),i=r.find(".pinned table");n.find("td:not(:first-child), th:not(:first-child)").addClass("hidden"),i.html(n.children())})}}}),e.fn.dataTableExt.sErrMode="throw",e.fn.dataTableExt.oStdClasses=e.extend(e.fn.dataTableExt.oStdClasses,{sPagePrevEnabled:"paginate_enabled_previous button small",sPagePrevDisabled:"paginate_enabled_previous button small disabled",sPageNextEnabled:"paginate_enabled_previous button small",sPageNextDisabled:"paginate_enabled_previous button small disabled",sPageButton:"paginate_button button small",sPageButtonActive:"paginate_active button small active",sPageButtonStaticDisabled:"paginate_button button small disabled"}),e.fn.dataTableExt.oSort["uk_date-asc"]=function(e,t){var e=e.split("/"),t=t.split("/"),n=parseInt(e[2]+e[1]+e[0],10),r=parseInt(t[2]+t[1]+t[0],10);return n<r?-1:n>r?1:0},e.fn.dataTableExt.oSort["uk_date-desc"]=function(e,t){var e=e.split("/"),t=t.split("/"),n=parseInt(e[2]+e[1]+e[0],10),r=parseInt(t[2]+t[1]+t[0],10);return n<r?1:n>r?-1:0},e.fn.dataTableExt.oApi.fnPagingInfo=function(e){return{iStart:e._iDisplayStart,iEnd:e.fnDisplayEnd(),iLength:e._iDisplayLength,iTotal:e.fnRecordsTotal(),iFilteredTotal:e.fnRecordsDisplay(),iPage:Math.ceil(e._iDisplayStart/e._iDisplayLength),iTotalPages:Math.ceil(e.fnRecordsDisplay()/e._iDisplayLength)}};var t={"LOW INCOME":0,"LOWER MIDDLE INCOME":1,"UPPER MIDDLE INCOME":2,"HIGH INCOME":3};e.fn.dataTableExt.oSort["subsidiary-asc"]=function(e,n){var r=t[e],i=t[n];return r<i?-1:r>i?1:0},e.fn.dataTableExt.oSort["subsidiary-desc"]=function(e,n){var r=t[e],i=t[n];return r<i?1:r>i?-1:0},e.fn.attrs=function(){var t={};return this.length?(e.each(this[0].attributes,function(){this.specified&&(t[this.nodeName]=this.nodeValue)}),t):null},e.fn.dataTableExt.oPagination.four_button={fnInit:function(t,n,r){var i=function(){return!1},s=document.createElement("span"),o=document.createElement("span"),u=document.createElement("span"),a=document.createElement("span"),f="disabled",l=function(){var t=e(this).parents(".widget").offset(),n=e("#top-bar-holder").height(),r=t&&t.top?t.top-n:0;e("html, body").animate({scrollTop:r},200)};s.appendChild(document.createTextNode(t.oLanguage.oPaginate.sFirst)),o.appendChild(document.createTextNode(t.oLanguage.oPaginate.sPrevious)),u.appendChild(document.createTextNode(t.oLanguage.oPaginate.sNext)),a.appendChild(document.createTextNode(t.oLanguage.oPaginate.sLast)),n.appendChild(s),n.appendChild(o),n.appendChild(u),n.appendChild(a),e(s).on("click",function(){e(this).hasClass(f)||(t.oApi._fnPageChange(t,"first"),l.call(this),r(t))}).on("selectstart",i),e(o).on("click",function(){e(this).hasClass(f)||(t.oApi._fnPageChange(t,"previous"),l.call(this),r(t))}).on("selectstart",i),e(u).on("click",function(){e(this).hasClass(f)||(t.oApi._fnPageChange(t,"next"),l.call(this),r(t))}).on("selectstart",i),e(a).on("click",function(){e(this).hasClass(f)||(t.oApi._fnPageChange(t,"last"),l.call(this),r(t))}).on("selectstart",i)},fnUpdate:function(e,t){if(!e.aanFeatures.p)return;var n=e.aanFeatures.p;for(var r=0,i=n.length;r<i;r++){var s=n[r].getElementsByTagName("span");e._iDisplayStart===0?(s[0].className=e.oClasses.sPagePrevDisabled,s[1].className=e.oClasses.sPagePrevDisabled):(s[0].className=e.oClasses.sPagePrevEnabled,s[1].className=e.oClasses.sPagePrevEnabled),e.fnDisplayEnd()==e.fnRecordsDisplay()?(s[2].className=e.oClasses.sPageNextDisabled,s[3].className=e.oClasses.sPageNextDisabled):(s[2].className=e.oClasses.sPageNextEnabled,s[3].className=e.oClasses.sPageNextEnabled)}}},e.fn.duedilTable=function(t){var n=this.first();if(n[0].nodeName.toLowerCase()!="table")throw"duedilTable can only be called on a <table>.";var r=null,i=!0;if(t.bServerSide){var s,o=t.fnServerParams,u=t.fnServerData;if(typeof t.iDeferLoading=="undefined"&&!t.iWantToLoadImmediately)throw"Not having iDeferLoading set when instantiating duedilTable will result it in querying the server on page load.";t.fnServerParams=function(e){n.trigger("load-begin"),s=function(e){for(var t=0;t<e.length;t++)if(e[t].name=="sEcho")return e[t].value;return null}(e);if(r)for(var t in r)(!i||r[t])&&e.push({name:t,value:r[t]});o&&o(e)},t.fnServerData=function(t,r,i,o){var a,f=function(t){i(t),a&&a.length>0&&n.find("tbody tr").each(function(){var t=e(this),n=a.shift();n&&(t.attr(n.attributes),t.find("td").each(function(){e(this).attr(n.cells.shift())}))}),t.sEcho==s&&n.trigger("load-finish",t)};(!u||u(t,r,f,o)!==!1)&&e.ajax({url:t,data:r,dataType:"json",success:function(t){!t.aaData&&t.body&&(a=[],t.aaData=[],e(t.body).find("tr").each(function(){var n=[];a.push({attributes:e(this).attrs(),cells:n});var r=[];e(this).find("td").each(function(){n.push(e(this).attrs()),r.push(this.innerHTML)}),t.aaData.push(e(this).find("td").map(function(){return n.push(e(this).attrs()),this.innerHTML}).toArray())})),f(t),e("*[rel=tooltip]").tooltip({container:"body"})},error:function(t,r,i){var s=null;!t.responseText||(s=e.parseJSON(t.responseText)),n.trigger("load-error",[t,s])}})},n.on("load-begin",function(){n.addClass("loading"),n.parents(".widget").addClass("table-loading")}).on("load-finish",function(){n.removeClass("loading"),n.parents(".widget").removeClass("table-loading")})}var a=n.dataTable(t);return a.fnSetParams=function(e,t,n){r=e,i=typeof t=="undefined"||t,n!==!1&&this.fnPageChange(n||0)},a}});var io="undefined"==typeof module?{}:module.exports;(function(){(function(e,t){var n=e;n.version="0.9.11",n.protocol=1,n.transports=[],n.j=[],n.sockets={},n.connect=function(e,r){var i=n.util.parseUri(e),s,o;t&&t.location&&(i.protocol=i.protocol||t.location.protocol.slice(0,-1),i.host=i.host||(t.document?t.document.domain:t.location.hostname),i.port=i.port||t.location.port),s=n.util.uniqueUri(i);var u={host:i.host,secure:"https"==i.protocol,port:i.port||("https"==i.protocol?443:80),query:i.query||""};n.util.merge(u,r);if(u["force new connection"]||!n.sockets[s])o=new n.Socket(u);return!u["force new connection"]&&o&&(n.sockets[s]=o),o=o||n.sockets[s],o.of(i.path.length>1?i.path:"")}})("object"==typeof module?module.exports:this.io={},this),function(e,t){var n=e.util={},r=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,i=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];n.parseUri=function(e){var t=r.exec(e||""),n={},s=14;while(s--)n[i[s]]=t[s]||"";return n},n.uniqueUri=function(e){var n=e.protocol,r=e.host,i=e.port;return"document"in t?(r=r||document.domain,i=i||(n=="https"&&document.location.protocol!=="https:"?443:document.location.port)):(r=r||"localhost",!i&&n=="https"&&(i=443)),(n||"http")+"://"+r+":"+(i||80)},n.query=function(e,t){var r=n.chunkQuery(e||""),i=[];n.merge(r,n.chunkQuery(t||""));for(var s in r)r.hasOwnProperty(s)&&i.push(s+"="+r[s]);return i.length?"?"+i.join("&"):""},n.chunkQuery=function(e){var t={},n=e.split("&"),r=0,i=n.length,s;for(;r<i;++r)s=n[r].split("="),s[0]&&(t[s[0]]=s[1]);return t};var s=!1;n.load=function(e){if("document"in t&&document.readyState==="complete"||s)return e();n.on(t,"load",e,!1)},n.on=function(e,t,n,r){e.attachEvent?e.attachEvent("on"+t,n):e.addEventListener&&e.addEventListener(t,n,r)},n.request=function(e){if(e&&"undefined"!=typeof XDomainRequest&&!n.ua.hasCORS)return new XDomainRequest;if("undefined"!=typeof XMLHttpRequest&&(!e||n.ua.hasCORS))return new XMLHttpRequest;if(!e)try{return new(window[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(t){}return null},"undefined"!=typeof window&&n.load(function(){s=!0}),n.defer=function(e){if(!n.ua.webkit||"undefined"!=typeof importScripts)return e();n.load(function(){setTimeout(e,100)})},n.merge=function(t,r,i,s){var o=s||[],u=typeof i=="undefined"?2:i,a;for(a in r)r.hasOwnProperty(a)&&n.indexOf(o,a)<0&&(typeof t[a]!="object"||!u?(t[a]=r[a],o.push(r[a])):n.merge(t[a],r[a],u-1,o));return t},n.mixin=function(e,t){n.merge(e.prototype,t.prototype)},n.inherit=function(e,t){function n(){}n.prototype=t.prototype,e.prototype=new n},n.isArray=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"},n.intersect=function(e,t){var r=[],i=e.length>t.length?e:t,s=e.length>t.length?t:e;for(var o=0,u=s.length;o<u;o++)~n.indexOf(i,s[o])&&r.push(s[o]);return r},n.indexOf=function(e,t,n){for(var r=e.length,n=n<0?n+r<0?0:n+r:n||0;n<r&&e[n]!==t;n++);return r<=n?-1:n},n.toArray=function(e){var t=[];for(var n=0,r=e.length;n<r;n++)t.push(e[n]);return t},n.ua={},n.ua.hasCORS="undefined"!=typeof XMLHttpRequest&&function(){try{var e=new XMLHttpRequest}catch(t){return!1}return e.withCredentials!=undefined}(),n.ua.webkit="undefined"!=typeof navigator&&/webkit/i.test(navigator.userAgent),n.ua.iDevice="undefined"!=typeof navigator&&/iPad|iPhone|iPod/i.test(navigator.userAgent)}("undefined"!=typeof io?io:module.exports,this),function(e,t){function n(){}e.EventEmitter=n,n.prototype.on=function(e,n){return this.$events||(this.$events={}),this.$events[e]?t.util.isArray(this.$events[e])?this.$events[e].push(n):this.$events[e]=[this.$events[e],n]:this.$events[e]=n,this},n.prototype.addListener=n.prototype.on,n.prototype.once=function(e,t){function r(){n.removeListener(e,r),t.apply(this,arguments)}var n=this;return r.listener=t,this.on(e,r),this},n.prototype.removeListener=function(e,n){if(this.$events&&this.$events[e]){var r=this.$events[e];if(t.util.isArray(r)){var i=-1;for(var s=0,o=r.length;s<o;s++)if(r[s]===n||r[s].listener&&r[s].listener===n){i=s;break}if(i<0)return this;r.splice(i,1),r.length||delete this.$events[e]}else(r===n||r.listener&&r.listener===n)&&delete this.$events[e]}return this},n.prototype.removeAllListeners=function(e){return e===undefined?(this.$events={},this):(this.$events&&this.$events[e]&&(this.$events[e]=null),this)},n.prototype.listeners=function(e){return this.$events||(this.$events={}),this.$events[e]||(this.$events[e]=[]),t.util.isArray(this.$events[e])||(this.$events[e]=[this.$events[e]]),this.$events[e]},n.prototype.emit=function(e){if(!this.$events)return!1;var n=this.$events[e];if(!n)return!1;var r=Array.prototype.slice.call(arguments,1);if("function"==typeof n)n.apply(this,r);else{if(!t.util.isArray(n))return!1;var i=n.slice();for(var s=0,o=i.length;s<o;s++)i[s].apply(this,r)}return!0}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(exports,nativeJSON){function f(e){return e<10?"0"+e:e}function date(e,t){return isFinite(e.valueOf())?e.getUTCFullYear()+"-"+f(e.getUTCMonth()+1)+"-"+f(e.getUTCDate())+"T"+f(e.getUTCHours())+":"+f(e.getUTCMinutes())+":"+f(e.getUTCSeconds())+"Z":null}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return typeof t=="string"?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,r,i,s,o=gap,u,a=t[e];a instanceof Date&&(a=date(e)),typeof rep=="function"&&(a=rep.call(t,e,a));switch(typeof a){case"string":return quote(a);case"number":return isFinite(a)?String(a):"null";case"boolean":case"null":return String(a);case"object":if(!a)return"null";gap+=indent,u=[];if(Object.prototype.toString.apply(a)==="[object Array]"){s=a.length;for(n=0;n<s;n+=1)u[n]=str(n,a)||"null";return i=u.length===0?"[]":gap?"[\n"+gap+u.join(",\n"+gap)+"\n"+o+"]":"["+u.join(",")+"]",gap=o,i}if(rep&&typeof rep=="object"){s=rep.length;for(n=0;n<s;n+=1)typeof rep[n]=="string"&&(r=rep[n],i=str(r,a),i&&u.push(quote(r)+(gap?": ":":")+i))}else for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&(i=str(r,a),i&&u.push(quote(r)+(gap?": ":":")+i));return i=u.length===0?"{}":gap?"{\n"+gap+u.join(",\n"+gap)+"\n"+o+"}":"{"+u.join(",")+"}",gap=o,i}}if(nativeJSON&&nativeJSON.parse)return exports.JSON={parse:nativeJSON.parse,stringify:nativeJSON.stringify};var JSON=exports.JSON={},cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;JSON.stringify=function(e,t,n){var r;gap="",indent="";if(typeof n=="number")for(r=0;r<n;r+=1)indent+=" ";else typeof n=="string"&&(indent=n);rep=t;if(!t||typeof t=="function"||typeof t=="object"&&typeof t.length=="number")return str("",{"":e});throw new Error("JSON.stringify")},JSON.parse=function(text,reviver){function walk(e,t){var n,r,i=e[t];if(i&&typeof i=="object")for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(r=walk(i,n),r!==undefined?i[n]=r:delete i[n]);return reviver.call(e,t,i)}var j;text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),typeof reviver=="function"?walk({"":j},""):j;throw new SyntaxError("JSON.parse")}}("undefined"!=typeof io?io:module.exports,typeof JSON!="undefined"?JSON:undefined),function(e,t){var n=e.parser={},r=n.packets=["disconnect","connect","heartbeat","message","json","event","ack","error","noop"],i=n.reasons=["transport not supported","client not handshaken","unauthorized"],s=n.advice=["reconnect"],o=t.JSON,u=t.util.indexOf;n.encodePacket=function(e){var t=u(r,e.type),n=e.id||"",a=e.endpoint||"",f=e.ack,l=null;switch(e.type){case"error":var c=e.reason?u(i,e.reason):"",h=e.advice?u(s,e.advice):"";if(c!==""||h!=="")l=c+(h!==""?"+"+h:"");break;case"message":e.data!==""&&(l=e.data);break;case"event":var p={name:e.name};e.args&&e.args.length&&(p.args=e.args),l=o.stringify(p);break;case"json":l=o.stringify(e.data);break;case"connect":e.qs&&(l=e.qs);break;case"ack":l=e.ackId+(e.args&&e.args.length?"+"+o.stringify(e.args):"")}var d=[t,n+(f=="data"?"+":""),a];return l!==null&&l!==undefined&&d.push(l),d.join(":")},n.encodePayload=function(e){var t="";if(e.length==1)return e[0];for(var n=0,r=e.length;n<r;n++){var i=e[n];t+="ï¿½"+i.length+"ï¿½"+e[n]}return t};var a=/([^:]+):([0-9]+)?(\+)?:([^:]+)?:?([\s\S]*)?/;n.decodePacket=function(e){var t=e.match(a);if(!t)return{};var n=t[2]||"",e=t[5]||"",u={type:r[t[1]],endpoint:t[4]||""};n&&(u.id=n,t[3]?u.ack="data":u.ack=!0);switch(u.type){case"error":var t=e.split("+");u.reason=i[t[0]]||"",u.advice=s[t[1]]||"";break;case"message":u.data=e||"";break;case"event":try{var f=o.parse(e);u.name=f.name,u.args=f.args}catch(l){}u.args=u.args||[];break;case"json":try{u.data=o.parse(e)}catch(l){}break;case"connect":u.qs=e||"";break;case"ack":var t=e.match(/^([0-9]+)(\+)?(.*)/);if(t){u.ackId=t[1],u.args=[];if(t[3])try{u.args=t[3]?o.parse(t[3]):[]}catch(l){}}break;case"disconnect":case"heartbeat":}return u},n.decodePayload=function(e){if(e.charAt(0)=="ï¿½"){var t=[];for(var r=1,i="";r<e.length;r++)e.charAt(r)=="ï¿½"?(t.push(n.decodePacket(e.substr(r+1).substr(0,i))),r+=Number(i)+1,i=""):i+=e.charAt(r);return t}return[n.decodePacket(e)]}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(e,t){function n(e,t){this.socket=e,this.sessid=t}e.Transport=n,t.util.mixin(n,t.EventEmitter),n.prototype.heartbeats=function(){return!0},n.prototype.onData=function(e){this.clearCloseTimeout(),(this.socket.connected||this.socket.connecting||this.socket.reconnecting)&&this.setCloseTimeout();if(e!==""){var n=t.parser.decodePayload(e);if(n&&n.length)for(var r=0,i=n.length;r<i;r++)this.onPacket(n[r])}return this},n.prototype.onPacket=function(e){return this.socket.setHeartbeatTimeout(),e.type=="heartbeat"?this.onHeartbeat():(e.type=="connect"&&e.endpoint==""&&this.onConnect(),e.type=="error"&&e.advice=="reconnect"&&(this.isOpen=!1),this.socket.onPacket(e),this)},n.prototype.setCloseTimeout=function(){if(!this.closeTimeout){var e=this;this.closeTimeout=setTimeout(function(){e.onDisconnect()},this.socket.closeTimeout)}},n.prototype.onDisconnect=function(){return this.isOpen&&this.close(),this.clearTimeouts(),this.socket.onDisconnect(),this},n.prototype.onConnect=function(){return this.socket.onConnect(),this},n.prototype.clearCloseTimeout=function(){this.closeTimeout&&(clearTimeout(this.closeTimeout),this.closeTimeout=null)},n.prototype.clearTimeouts=function(){this.clearCloseTimeout(),this.reopenTimeout&&clearTimeout(this.reopenTimeout)},n.prototype.packet=function(e){this.send(t.parser.encodePacket(e))},n.prototype.onHeartbeat=function(e){this.packet({type:"heartbeat"})},n.prototype.onOpen=function(){this.isOpen=!0,this.clearCloseTimeout(),this.socket.onOpen()},n.prototype.onClose=function(){var e=this;this.isOpen=!1,this.socket.onClose(),this.onDisconnect()},n.prototype.prepareUrl=function(){var e=this.socket.options;return this.scheme()+"://"+e.host+":"+e.port+"/"+e.resource+"/"+t.protocol+"/"+this.name+"/"+this.sessid},n.prototype.ready=function(e,t){t.call(this)}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(e,t,n){function r(e){this.options={port:80,secure:!1,document:"document"in n?document:!1,resource:"socket.io",transports:t.transports,"connect timeout":1e4,"try multiple transports":!0,reconnect:!0,"reconnection delay":500,"reconnection limit":Infinity,"reopen delay":3e3,"max reconnection attempts":10,"sync disconnect on unload":!1,"auto connect":!0,"flash policy port":10843,manualFlush:!1},t.util.merge(this.options,e),this.connected=!1,this.open=!1,this.connecting=!1,this.reconnecting=!1,this.namespaces={},this.buffer=[],this.doBuffer=!1;if(this.options["sync disconnect on unload"]&&(!this.isXDomain()||t.util.ua.hasCORS)){var r=this;t.util.on(n,"beforeunload",function(){r.disconnectSync()},!1)}this.options["auto connect"]&&this.connect()}function i(){}e.Socket=r,t.util.mixin(r,t.EventEmitter),r.prototype.of=function(e){return this.namespaces[e]||(this.namespaces[e]=new t.SocketNamespace(this,e),e!==""&&this.namespaces[e].packet({type:"connect"})),this.namespaces[e]},r.prototype.publish=function(){this.emit.apply(this,arguments);var e;for(var t in this.namespaces)this.namespaces.hasOwnProperty(t)&&(e=this.of(t),e.$emit.apply(e,arguments))},r.prototype.handshake=function(e){function s(t){t instanceof Error?(n.connecting=!1,n.onError(t.message)):e.apply(null,t.split(":"))}var n=this,r=this.options,o=["http"+(r.secure?"s":"")+":/",r.host+":"+r.port,r.resource,t.protocol,t.util.query(this.options.query,"t="+ +(new Date))].join("/");if(this.isXDomain()&&!t.util.ua.hasCORS){var u=document.getElementsByTagName("script")[0],a=document.createElement("script");a.src=o+"&jsonp="+t.j.length,u.parentNode.insertBefore(a,u),t.j.push(function(e){s(e),a.parentNode.removeChild(a)})}else{var f=t.util.request();f.open("GET",o,!0),this.isXDomain()&&(f.withCredentials=!0),f.onreadystatechange=function(){f.readyState==4&&(f.onreadystatechange=i,f.status==200?s(f.responseText):f.status==403?n.onError(f.responseText):(n.connecting=!1,!n.reconnecting&&n.onError(f.responseText)))},f.send(null)}},r.prototype.getTransport=function(e){var n=e||this.transports,r;for(var i=0,s;s=n[i];i++)if(t.Transport[s]&&t.Transport[s].check(this)&&(!this.isXDomain()||t.Transport[s].xdomainCheck(this)))return new t.Transport[s](this,this.sessionid);return null},r.prototype.connect=function(e){if(this.connecting)return this;var n=this;return n.connecting=!0,this.handshake(function(r,i,s,o){function u(e){n.transport&&n.transport.clearTimeouts(),n.transport=n.getTransport(e);if(!n.transport)return n.publish("connect_failed");n.transport.ready(n,function(){n.connecting=!0,n.publish("connecting",n.transport.name),n.transport.open(),n.options["connect timeout"]&&(n.connectTimeoutTimer=setTimeout(function(){if(!n.connected){n.connecting=!1;if(n.options["try multiple transports"]){var e=n.transports;while(e.length>0&&e.splice(0,1)[0]!=n.transport.name);e.length?u(e):n.publish("connect_failed")}}},n.options["connect timeout"]))})}n.sessionid=r,n.closeTimeout=s*1e3,n.heartbeatTimeout=i*1e3,n.transports||(n.transports=n.origTransports=o?t.util.intersect(o.split(","),n.options.transports):n.options.transports),n.setHeartbeatTimeout(),u(n.transports),n.once("connect",function(){clearTimeout(n.connectTimeoutTimer),e&&typeof e=="function"&&e()})}),this},r.prototype.setHeartbeatTimeout=function(){clearTimeout(this.heartbeatTimeoutTimer);if(this.transport&&!this.transport.heartbeats())return;var e=this;this.heartbeatTimeoutTimer=setTimeout(function(){e.transport.onClose()},this.heartbeatTimeout)},r.prototype.packet=function(e){return this.connected&&!this.doBuffer?this.transport.packet(e):this.buffer.push(e),this},r.prototype.setBuffer=function(e){this.doBuffer=e,!e&&this.connected&&this.buffer.length&&(this.options.manualFlush||this.flushBuffer())},r.prototype.flushBuffer=function(){this.transport.payload(this.buffer),this.buffer=[]},r.prototype.disconnect=function(){if(this.connected||this.connecting)this.open&&this.of("").packet({type:"disconnect"}),this.onDisconnect("booted");return this},r.prototype.disconnectSync=function(){var e=t.util.request(),n=["http"+(this.options.secure?"s":"")+":/",this.options.host+":"+this.options.port,this.options.resource,t.protocol,"",this.sessionid].join("/")+"/?disconnect=1";e.open("GET",n,!1),e.send(null),this.onDisconnect("booted")},r.prototype.isXDomain=function(){var e=n.location.port||("https:"==n.location.protocol?443:80);return this.options.host!==n.location.hostname||this.options.port!=e},r.prototype.onConnect=function(){this.connected||(this.connected=!0,this.connecting=!1,this.doBuffer||this.setBuffer(!1),this.emit("connect"))},r.prototype.onOpen=function(){this.open=!0},r.prototype.onClose=function(){this.open=!1,clearTimeout(this.heartbeatTimeoutTimer)},r.prototype.onPacket=function(e){this.of(e.endpoint).onPacket(e)},r.prototype.onError=function(e){e&&e.advice&&e.advice==="reconnect"&&(this.connected||this.connecting)&&(this.disconnect(),this.options.reconnect&&this.reconnect()),this.publish("error",e&&e.reason?e.reason:e)},r.prototype.onDisconnect=function(e){var t=this.connected,n=this.connecting;this.connected=!1,this.connecting=!1,this.open=!1;if(t||n)this.transport.close(),this.transport.clearTimeouts(),t&&(this.publish("disconnect",e),"booted"!=e&&this.options.reconnect&&!this.reconnecting&&this.reconnect())},r.prototype.reconnect=function(){function i(){if(e.connected){for(var t in e.namespaces)e.namespaces.hasOwnProperty(t)&&""!==t&&e.namespaces[t].packet({type:"connect"});e.publish("reconnect",e.transport.name,e.reconnectionAttempts)}clearTimeout(e.reconnectionTimer),e.removeListener("connect_failed",s),e.removeListener("connect",s),e.reconnecting=!1,delete e.reconnectionAttempts,delete e.reconnectionDelay,delete e.reconnectionTimer,delete e.redoTransports,e.options["try multiple transports"]=n}function s(){if(!e.reconnecting)return;if(e.connected)return i();if(e.connecting&&e.reconnecting)return e.reconnectionTimer=setTimeout(s,1e3);e.reconnectionAttempts++>=t?e.redoTransports?(e.publish("reconnect_failed"),i()):(e.on("connect_failed",s),e.options["try multiple transports"]=!0,e.transports=e.origTransports,e.transport=e.getTransport(),e.redoTransports=!0,e.connect()):(e.reconnectionDelay<r&&(e.reconnectionDelay*=2),e.connect(),e.publish("reconnecting",e.reconnectionDelay,e.reconnectionAttempts),e.reconnectionTimer=setTimeout(s,e.reconnectionDelay))}this.reconnecting=!0,this.reconnectionAttempts=0,this.reconnectionDelay=this.options["reconnection delay"];var e=this,t=this.options["max reconnection attempts"],n=this.options["try multiple transports"],r=this.options["reconnection limit"];this.options["try multiple transports"]=!1,this.reconnectionTimer=setTimeout(s,this.reconnectionDelay),this.on("connect",s)}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports,this),function(e,t){function n(e,t){this.socket=e,this.name=t||"",this.flags={},this.json=new r(this,"json"),this.ackPackets=0,this.acks={}}function r(e,t){this.namespace=e,this.name=t}e.SocketNamespace=n,t.util.mixin(n,t.EventEmitter),n.prototype.$emit=t.EventEmitter.prototype.emit,n.prototype.of=function(){return this.socket.of.apply(this.socket,arguments)},n.prototype.packet=function(e){return e.endpoint=this.name,this.socket.packet(e),this.flags={},this},n.prototype.send=function(e,t){var n={type:this.flags.json?"json":"message",data:e};return"function"==typeof t&&(n.id=++this.ackPackets,n.ack=!0,this.acks[n.id]=t),this.packet(n)},n.prototype.emit=function(e){var t=Array.prototype.slice.call(arguments,1),n=t[t.length-1],r={type:"event",name:e};return"function"==typeof n&&(r.id=++this.ackPackets,r.ack="data",this.acks[r.id]=n,t=t.slice(0,t.length-1)),r.args=t,this.packet(r)},n.prototype.disconnect=function(){return this.name===""?this.socket.disconnect():(this.packet({type:"disconnect"}),this.$emit("disconnect")),this},n.prototype.onPacket=function(e){function r(){n.packet({type:"ack",args:t.util.toArray(arguments),ackId:e.id})}var n=this;switch(e.type){case"connect":this.$emit("connect");break;case"disconnect":this.name===""?this.socket.onDisconnect(e.reason||"booted"):this.$emit("disconnect",e.reason);break;case"message":case"json":var i=["message",e.data];e.ack=="data"?i.push(r):e.ack&&this.packet({type:"ack",ackId:e.id}),this.$emit.apply(this,i);break;case"event":var i=[e.name].concat(e.args);e.ack=="data"&&i.push(r),this.$emit.apply(this,i);break;case"ack":this.acks[e.ackId]&&(this.acks[e.ackId].apply(this,e.args),delete this.acks[e.ackId]);break;case"error":e.advice?this.socket.onError(e):e.reason=="unauthorized"?this.$emit("connect_failed",e.reason):this.$emit("error",e.reason)}},r.prototype.send=function(){this.namespace.flags[this.name]=!0,this.namespace.send.apply(this.namespace,arguments)},r.prototype.emit=function(){this.namespace.flags[this.name]=!0,this.namespace.emit.apply(this.namespace,arguments)}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(e,t,n){function r(e){t.Transport.apply(this,arguments)}e.websocket=r,t.util.inherit(r,t.Transport),r.prototype.name="websocket",r.prototype.open=function(){var e=t.util.query(this.socket.options.query),r=this,i;return i||(i=n.MozWebSocket||n.WebSocket),this.websocket=new i(this.prepareUrl()+e),this.websocket.onopen=function(){r.onOpen(),r.socket.setBuffer(!1)},this.websocket.onmessage=function(e){r.onData(e.data)},this.websocket.onclose=function(){r.onClose(),r.socket.setBuffer(!0)},this.websocket.onerror=function(e){r.onError(e)},this},t.util.ua.iDevice?r.prototype.send=function(e){var t=this;return setTimeout(function(){t.websocket.send(e)},0),this}:r.prototype.send=function(e){return this.websocket.send(e),this},r.prototype.payload=function(e){for(var t=0,n=e.length;t<n;t++)this.packet(e[t]);return this},r.prototype.close=function(){return this.websocket.close(),this},r.prototype.onError=function(e){this.socket.onError(e)},r.prototype.scheme=function(){return this.socket.options.secure?"wss":"ws"},r.check=function(){return"WebSocket"in n&&!("__addTask"in WebSocket)||"MozWebSocket"in n},r.xdomainCheck=function(){return!0},t.transports.push("websocket")}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this),function(e,t){function n(){t.Transport.websocket.apply(this,arguments)}e.flashsocket=n,t.util.inherit(n,t.Transport.websocket),n.prototype.name="flashsocket",n.prototype.open=function(){var e=this,n=arguments;return WebSocket.__addTask(function(){t.Transport.websocket.prototype.open.apply(e,n)}),this},n.prototype.send=function(){var e=this,n=arguments;return WebSocket.__addTask(function(){t.Transport.websocket.prototype.send.apply(e,n)}),this},n.prototype.close=function(){return WebSocket.__tasks.length=0,t.Transport.websocket.prototype.close.call(this),this},n.prototype.ready=function(e,r){function i(){var t=e.options,i=t["flash policy port"],o=["http"+(t.secure?"s":"")+":/",t.host+":"+t.port,t.resource,"static/flashsocket","WebSocketMain"+(e.isXDomain()?"Insecure":"")+".swf"];n.loaded||(typeof WEB_SOCKET_SWF_LOCATION=="undefined"&&(WEB_SOCKET_SWF_LOCATION=o.join("/")),i!==843&&WebSocket.loadFlashPolicyFile("xmlsocket://"+t.host+":"+i),WebSocket.__initialize(),n.loaded=!0),r.call(s)}var s=this;if(document.body)return i();t.util.load(i)},n.check=function(){return typeof WebSocket!="undefined"&&"__initialize"in WebSocket&&!!swfobject?swfobject.getFlashPlayerVersion().major>=10:!1},n.xdomainCheck=function(){return!0},typeof window!="undefined"&&(WEB_SOCKET_DISABLE_AUTO_INITIALIZATION=!0),t.transports.push("flashsocket")}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports);if("undefined"!=typeof window)var swfobject=function(){function C(){if(b)return;try{var e=a.getElementsByTagName("body")[0].appendChild(U("span"));e.parentNode.removeChild(e)}catch(t){return}b=!0;var n=c.length;for(var r=0;r<n;r++)c[r]()}function k(e){b?e():c[c.length]=e}function L(t){if(typeof u.addEventListener!=e)u.addEventListener("load",t,!1);else if(typeof a.addEventListener!=e)a.addEventListener("load",t,!1);else if(typeof u.attachEvent!=e)z(u,"onload",t);else if(typeof u.onload=="function"){var n=u.onload;u.onload=function(){n(),t()}}else u.onload=t}function A(){l?O():M()}function O(){var n=a.getElementsByTagName("body")[0],r=U(t);r.setAttribute("type",i);var s=n.appendChild(r);if(s){var o=0;(function(){if(typeof s.GetVariable!=e){var t=s.GetVariable("$version");t&&(t=t.split(" ")[1].split(","),T.pv=[parseInt(t[0],10),parseInt(t[1],10),parseInt(t[2],10)])}else if(o<10){o++,setTimeout(arguments.callee,10);return}n.removeChild(r),s=null,M()})()}else M()}function M(){var t=h.length;if(t>0)for(var n=0;n<t;n++){var r=h[n].id,i=h[n].callbackFn,s={success:!1,id:r};if(T.pv[0]>0){var o=R(r);if(o)if(W(h[n].swfVersion)&&!(T.wk&&T.wk<312))V(r,!0),i&&(s.success=!0,s.ref=_(r),i(s));else if(h[n].expressInstall&&D()){var u={};u.data=h[n].expressInstall,u.width=o.getAttribute("width")||"0",u.height=o.getAttribute("height")||"0",o.getAttribute("class")&&(u.styleclass=o.getAttribute("class")),o.getAttribute("align")&&(u.align=o.getAttribute("align"));var a={},f=o.getElementsByTagName("param"),l=f.length;for(var c=0;c<l;c++)f[c].getAttribute("name").toLowerCase()!="movie"&&(a[f[c].getAttribute("name")]=f[c].getAttribute("value"));P(u,a,r,i)}else H(o),i&&i(s)}else{V(r,!0);if(i){var p=_(r);p&&typeof p.SetVariable!=e&&(s.success=!0,s.ref=p),i(s)}}}}function _(n){var r=null,i=R(n);if(i&&i.nodeName=="OBJECT")if(typeof i.SetVariable!=e)r=i;else{var s=i.getElementsByTagName(t)[0];s&&(r=s)}return r}function D(){return!w&&W("6.0.65")&&(T.win||T.mac)&&!(T.wk&&T.wk<312)}function P(t,n,r,i){w=!0,g=i||null,y={success:!1,id:r};var o=R(r);if(o){o.nodeName=="OBJECT"?(v=B(o),m=null):(v=o,m=r),t.id=s;if(typeof t.width==e||!/%$/.test(t.width)&&parseInt(t.width,10)<310)t.width="310";if(typeof t.height==e||!/%$/.test(t.height)&&parseInt(t.height,10)<137)t.height="137";a.title=a.title.slice(0,47)+" - Flash Player Installation";var f=T.ie&&T.win?["Active"].concat("").join("X"):"PlugIn",l="MMredirectURL="+u.location.toString().replace(/&/g,"%26")+"&MMplayerType="+f+"&MMdoctitle="+a.title;typeof n.flashvars!=e?n.flashvars+="&"+l:n.flashvars=l;if(T.ie&&T.win&&o.readyState!=4){var c=U("div");r+="SWFObjectNew",c.setAttribute("id",r),o.parentNode.insertBefore(c,o),o.style.display="none",function(){o.readyState==4?o.parentNode.removeChild(o):setTimeout(arguments.callee,10)}()}j(t,n,r)}}function H(e){if(T.ie&&T.win&&e.readyState!=4){var t=U("div");e.parentNode.insertBefore(t,e),t.parentNode.replaceChild(B(e),t),e.style.display="none",function(){e.readyState==4?e.parentNode.removeChild(e):setTimeout(arguments.callee,10)}()}else e.parentNode.replaceChild(B(e),e)}function B(e){var n=U("div");if(T.win&&T.ie)n.innerHTML=e.innerHTML;else{var r=e.getElementsByTagName(t)[0];if(r){var i=r.childNodes;if(i){var s=i.length;for(var o=0;o<s;o++)(i[o].nodeType!=1||i[o].nodeName!="PARAM")&&i[o].nodeType!=8&&n.appendChild(i[o].cloneNode(!0))}}}return n}function j(n,r,s){var o,u=R(s);if(T.wk&&T.wk<312)return o;if(u){typeof n.id==e&&(n.id=s);if(T.ie&&T.win){var a="";for(var f in n)n[f]!=Object.prototype[f]&&(f.toLowerCase()=="data"?r.movie=n[f]:f.toLowerCase()=="styleclass"?a+=' class="'+n[f]+'"':f.toLowerCase()!="classid"&&(a+=" "+f+'="'+n[f]+'"'));var l="";for(var c in r)r[c]!=Object.prototype[c]&&(l+='<param name="'+c+'" value="'+r[c]+'" />');u.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+a+">"+l+"</object>",p[p.length]=n.id,o=R(n.id)}else{var h=U(t);h.setAttribute("type",i);for(var d in n)n[d]!=Object.prototype[d]&&(d.toLowerCase()=="styleclass"?h.setAttribute("class",n[d]):d.toLowerCase()!="classid"&&h.setAttribute(d,n[d]));for(var v in r)r[v]!=Object.prototype[v]&&v.toLowerCase()!="movie"&&F(h,v,r[v]);u.parentNode.replaceChild(h,u),o=h}}return o}function F(e,t,n){var r=U("param");r.setAttribute("name",t),r.setAttribute("value",n),e.appendChild(r)}function I(e){var t=R(e);t&&t.nodeName=="OBJECT"&&(T.ie&&T.win?(t.style.display="none",function(){t.readyState==4?q(e):setTimeout(arguments.callee,10)}()):t.parentNode.removeChild(t))}function q(e){var t=R(e);if(t){for(var n in t)typeof t[n]=="function"&&(t[n]=null);t.parentNode.removeChild(t)}}function R(e){var t=null;try{t=a.getElementById(e)}catch(n){}return t}function U(e){return a.createElement(e)}function z(e,t,n){e.attachEvent(t,n),d[d.length]=[e,t,n]}function W(e){var t=T.pv,n=e.split(".");return n[0]=parseInt(n[0],10),n[1]=parseInt(n[1],10)||0,n[2]=parseInt(n[2],10)||0,t[0]>n[0]||t[0]==n[0]&&t[1]>n[1]||t[0]==n[0]&&t[1]==n[1]&&t[2]>=n[2]?!0:!1}function X(n,r,i,s){if(T.ie&&T.mac)return;var o=a.getElementsByTagName("head")[0];if(!o)return;var u=i&&typeof i=="string"?i:"screen";s&&(E=null,S=null);if(!E||S!=u){var f=U("style");f.setAttribute("type","text/css"),f.setAttribute("media",u),E=o.appendChild(f),T.ie&&T.win&&typeof a.styleSheets!=e&&a.styleSheets.length>0&&(E=a.styleSheets[a.styleSheets.length-1]),S=u}T.ie&&T.win?E&&typeof E.addRule==t&&E.addRule(n,r):E&&typeof a.createTextNode!=e&&E.appendChild(a.createTextNode(n+" {"+r+"}"))}function V(e,t){if(!x)return;var n=t?"visible":"hidden";b&&R(e)?R(e).style.visibility=n:X("#"+e,"visibility:"+n)}function $(t){var n=/[\\\"<>\.;]/,r=n.exec(t)!=null;return r&&typeof encodeURIComponent!=e?encodeURIComponent(t):t}var e="undefined",t="object",n="Shockwave Flash",r="ShockwaveFlash.ShockwaveFlash",i="application/x-shockwave-flash",s="SWFObjectExprInst",o="onreadystatechange",u=window,a=document,f=navigator,l=!1,c=[A],h=[],p=[],d=[],v,m,g,y,b=!1,w=!1,E,S,x=!0,T=function(){var s=typeof a.getElementById!=e&&typeof a.getElementsByTagName!=e&&typeof a.createElement!=e,o=f.userAgent.toLowerCase(),c=f.platform.toLowerCase(),h=c?/win/.test(c):/win/.test(o),p=c?/mac/.test(c):/mac/.test(o),d=/webkit/.test(o)?parseFloat(o.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,v=!1,m=[0,0,0],g=null;if(typeof f.plugins!=e&&typeof f.plugins[n]==t)g=f.plugins[n].description,g&&(typeof f.mimeTypes==e||!f.mimeTypes[i]||!!f.mimeTypes[i].enabledPlugin)&&(l=!0,v=!1,g=g.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),m[0]=parseInt(g.replace(/^(.*)\..*$/,"$1"),10),m[1]=parseInt(g.replace(/^.*\.(.*)\s.*$/,"$1"),10),m[2]=/[a-zA-Z]/.test(g)?parseInt(g.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof u[["Active"].concat("Object").join("X")]!=e)try{var y=new(window[["Active"].concat("Object").join("X")])(r);y&&(g=y.GetVariable("$version"),g&&(v=!0,g=g.split(" ")[1].split(","),m=[parseInt(g[0],10),parseInt(g[1],10),parseInt(g[2],10)]))}catch(b){}return{w3:s,pv:m,wk:d,ie:v,win:h,mac:p}}(),N=function(){if(!T.w3)return;(typeof a.readyState!=e&&a.readyState=="complete"||typeof a.readyState==e&&(a.getElementsByTagName("body")[0]||a.body))&&C(),b||(typeof a.addEventListener!=e&&a.addEventListener("DOMContentLoaded",C,!1),T.ie&&T.win&&(a.attachEvent(o,function(){a.readyState=="complete"&&(a.detachEvent(o,arguments.callee),C())}),u==top&&function(){if(b)return;try{a.documentElement.doScroll("left")}catch(e){setTimeout(arguments.callee,0);return}C()}()),T.wk&&function(){if(b)return;if(!/loaded|complete/.test(a.readyState)){setTimeout(arguments.callee,0);return}C()}(),L(C))}(),J=function(){T.ie&&T.win&&window.attachEvent("onunload",function(){var e=d.length;for(var t=0;t<e;t++)d[t][0].detachEvent(d[t][1],d[t][2]);var n=p.length;for(var r=0;r<n;r++)I(p[r]);for(var i in T)T[i]=null;T=null;for(var s in swfobject)swfobject[s]=null;swfobject=null})}();return{registerObject:function(e,t,n,r){if(T.w3&&e&&t){var i={};i.id=e,i.swfVersion=t,i.expressInstall=n,i.callbackFn=r,h[h.length]=i,V(e,!1)}else r&&r({success:!1,id:e})},getObjectById:function(e){if(T.w3)return _(e)},embedSWF:function(n,r,i,s,o,u,a,f,l,c){var h={success:!1,id:r};T.w3&&!(T.wk&&T.wk<312)&&n&&r&&i&&s&&o?(V(r,!1),k(function(){i+="",s+="";var p={};if(l&&typeof l===t)for(var d in l)p[d]=l[d];p.data=n,p.width=i,p.height=s;var v={};if(f&&typeof f===t)for(var m in f)v[m]=f[m];if(a&&typeof a===t)for(var g in a)typeof v.flashvars!=e?v.flashvars+="&"+g+"="+a[g]:v.flashvars=g+"="+a[g];if(W(o)){var y=j(p,v,r);p.id==r&&V(r,!0),h.success=!0,h.ref=y}else{if(u&&D()){p.data=u,P(p,v,r,c);return}V(r,!0)}c&&c(h)})):c&&c(h)},switchOffAutoHideShow:function(){x=!1},ua:T,getFlashPlayerVersion:function(){return{major:T.pv[0],minor:T.pv[1],release:T.pv[2]}},hasFlashPlayerVersion:W,createSWF:function(e,t,n){return T.w3?j(e,t,n):undefined},showExpressInstall:function(e,t,n,r){T.w3&&D()&&P(e,t,n,r)},removeSWF:function(e){T.w3&&I(e)},createCSS:function(e,t,n,r){T.w3&&X(e,t,n,r)},addDomLoadEvent:k,addLoadEvent:L,getQueryParamValue:function(e){var t=a.location.search||a.location.hash;if(t){/\?/.test(t)&&(t=t.split("?")[1]);if(e==null)return $(t);var n=t.split("&");for(var r=0;r<n.length;r++)if(n[r].substring(0,n[r].indexOf("="))==e)return $(n[r].substring(n[r].indexOf("=")+1))}return""},expressInstallCallback:function(){if(w){var e=R(s);e&&v&&(e.parentNode.replaceChild(v,e),m&&(V(m,!0),T.ie&&T.win&&(v.style.display="block")),g&&g(y)),w=!1}}}}();(function(){if("undefined"==typeof window||window.WebSocket)return;var e=window.console;if(!e||!e.log||!e.error)e={log:function(){},error:function(){}};if(!swfobject.hasFlashPlayerVersion("10.0.0")){e.error("Flash Player >= 10.0.0 is required.");return}location.protocol=="file:"&&e.error("WARNING: web-socket-js doesn't work in file:///... URL unless you set Flash Security Settings properly. Open the page via Web server i.e. http://..."),WebSocket=function(e,t,n,r,i){var s=this;s.__id=WebSocket.__nextId++,WebSocket.__instances[s.__id]=s,s.readyState=WebSocket.CONNECTING,s.bufferedAmount=0,s.__events={},t?typeof t=="string"&&(t=[t]):t=[],setTimeout(function(){WebSocket.__addTask(function(){WebSocket.__flash.create(s.__id,e,t,n||null,r||0,i||null)})},0)},WebSocket.prototype.send=function(e){if(this.readyState==WebSocket.CONNECTING)throw"INVALID_STATE_ERR: Web Socket connection has not been established";var t=WebSocket.__flash.send(this.__id,encodeURIComponent(e));return t<0?!0:(this.bufferedAmount+=t,!1)},WebSocket.prototype.close=function(){if(this.readyState==WebSocket.CLOSED||this.readyState==WebSocket.CLOSING)return;this.readyState=WebSocket.CLOSING,WebSocket.__flash.close(this.__id)},WebSocket.prototype.addEventListener=function(e,t,n){e in this.__events||(this.__events[e]=[]),this.__events[e].push(t)},WebSocket.prototype.removeEventListener=function(e,t,n){if(!(e in this.__events))return;var r=this.__events[e];for(var i=r.length-1;i>=0;--i)if(r[i]===t){r.splice(i,1);break}},WebSocket.prototype.dispatchEvent=function(e){var t=this.__events[e.type]||[];for(var n=0;n<t.length;++n)t[n](e);var r=this["on"+e.type];r&&r(e)},WebSocket.prototype.__handleEvent=function(e){"readyState"in e&&(this.readyState=e.readyState),"protocol"in e&&(this.protocol=e.protocol);var t;if(e.type=="open"||e.type=="error")t=this.__createSimpleEvent(e.type);else if(e.type=="close")t=this.__createSimpleEvent("close");else{if(e.type!="message")throw"unknown event type: "+e.type;var n=decodeURIComponent(e.message);t=this.__createMessageEvent("message",n)}this.dispatchEvent(t)},WebSocket.prototype.__createSimpleEvent=function(e){if(document.createEvent&&window.Event){var t=document.createEvent("Event");return t.initEvent(e,!1,!1),t}return{type:e,bubbles:!1,cancelable:!1}},WebSocket.prototype.__createMessageEvent=function(e,t){if(document.createEvent&&window.MessageEvent&&!window.opera){var n=document.createEvent("MessageEvent");return n.initMessageEvent("message",!1,!1,t,null,null,window,null),n}return{type:e,data:t,bubbles:!1,cancelable:!1}},WebSocket.CONNECTING=0,WebSocket.OPEN=1,WebSocket.CLOSING=2,WebSocket.CLOSED=3,WebSocket.__flash=null,WebSocket.__instances={},WebSocket.__tasks=[],WebSocket.__nextId=0,WebSocket.loadFlashPolicyFile=function(e){WebSocket.__addTask(function(){WebSocket.__flash.loadManualPolicyFile(e)})},WebSocket.__initialize=function(){if(WebSocket.__flash)return;WebSocket.__swfLocation&&(window.WEB_SOCKET_SWF_LOCATION=WebSocket.__swfLocation);if(!window.WEB_SOCKET_SWF_LOCATION){e.error("[WebSocket] set WEB_SOCKET_SWF_LOCATION to location of WebSocketMain.swf");return}var t=document.createElement("div");t.id="webSocketContainer",t.style.position="absolute",WebSocket.__isFlashLite()?(t.style.left="0px",t.style.top="0px"):(t.style.left="-100px",t.style.top="-100px");var n=document.createElement("div");n.id="webSocketFlash",t.appendChild(n),document.body.appendChild(t),swfobject.embedSWF(WEB_SOCKET_SWF_LOCATION,"webSocketFlash","1","1","10.0.0",null,null,{hasPriority:!0,swliveconnect:!0,allowScriptAccess:"always"},null,function(t){t.success||e.error("[WebSocket] swfobject.embedSWF failed")})},WebSocket.__onFlashInitialized=function(){setTimeout(function(){WebSocket.__flash=document.getElementById("webSocketFlash"),WebSocket.__flash.setCallerUrl(location.href),WebSocket.__flash.setDebug(!!window.WEB_SOCKET_DEBUG);for(var e=0;e<WebSocket.__tasks.length;++e)WebSocket.__tasks[e]();WebSocket.__tasks=[]},0)},WebSocket.__onFlashEvent=function(){return setTimeout(function(){try{var t=WebSocket.__flash.receiveEvents();for(var n=0;n<t.length;++n)WebSocket.__instances[t[n].webSocketId].__handleEvent(t[n])}catch(r){e.error(r)}},0),!0},WebSocket.__log=function(t){e.log(decodeURIComponent(t))},WebSocket.__error=function(t){e.error(decodeURIComponent(t))},WebSocket.__addTask=function(e){WebSocket.__flash?e():WebSocket.__tasks.push(e)},WebSocket.__isFlashLite=function(){if(!window.navigator||!window.navigator.mimeTypes)return!1;var e=window.navigator.mimeTypes["application/x-shockwave-flash"];return!e||!e.enabledPlugin||!e.enabledPlugin.filename?!1:e.enabledPlugin.filename.match(/flashlite/i)?!0:!1},window.WEB_SOCKET_DISABLE_AUTO_INITIALIZATION||(window.addEventListener?window.addEventListener("load",function(){WebSocket.__initialize()},!1):window.attachEvent("onload",function(){WebSocket.__initialize()}))})(),function(e,t,n){function r(e){if(!e)return;t.Transport.apply(this,arguments),this.sendBuffer=[]}function i(){}e.XHR=r,t.util.inherit(r,t.Transport),r.prototype.open=function(){return this.socket.setBuffer(!1),this.onOpen(),this.get(),this.setCloseTimeout(),this},r.prototype.payload=function(e){var n=[];for(var r=0,i=e.length;r<i;r++)n.push(t.parser.encodePacket(e[r]));this.send(t.parser.encodePayload(n))},r.prototype.send=function(e){return this.post(e),this},r.prototype.post=function(e){function r(){this.readyState==4&&(this.onreadystatechange=i,t.posting=!1,this.status==200?t.socket.setBuffer(!1):t.onClose())}function s(){this.onload=i,t.socket.setBuffer(!1)}var t=this;this.socket.setBuffer(!0),this.sendXHR=this.request("POST"),n.XDomainRequest&&this.sendXHR instanceof XDomainRequest?this.sendXHR.onload=this.sendXHR.onerror=s:this.sendXHR.onreadystatechange=r,this.sendXHR.send(e)},r.prototype.close=function(){return this.onClose(),this},r.prototype.request=function(e){var n=t.util.request(this.socket.isXDomain()),r=t.util.query(this.socket.options.query,"t="+ +(new Date));n.open(e||"GET",this.prepareUrl()+r,!0);if(e=="POST")try{n.setRequestHeader?n.setRequestHeader("Content-type","text/plain;charset=UTF-8"):n.contentType="text/plain"}catch(i){}return n},r.prototype.scheme=function(){return this.socket.options.secure?"https":"http"},r.check=function(e,r){try{var i=t.util.request(r),s=n.XDomainRequest&&i instanceof XDomainRequest,o=e&&e.options&&e.options.secure?"https:":"http:",u=n.location&&o!=n.location.protocol;if(i&&(!s||!u))return!0}catch(a){}return!1},r.xdomainCheck=function(e){return r.check(e,!0)}}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this),function(e,t){function n(e){t.Transport.XHR.apply(this,arguments)}e.htmlfile=n,t.util.inherit(n,t.Transport.XHR),n.prototype.name="htmlfile",n.prototype.get=function(){this.doc=new(window[["Active"].concat("Object").join("X")])("htmlfile"),this.doc.open(),this.doc.write("<html></html>"),this.doc.close(),this.doc.parentWindow.s=this;var e=this.doc.createElement("div");e.className="socketio",this.doc.body.appendChild(e),this.iframe=this.doc.createElement("iframe"),e.appendChild(this.iframe);var n=this,r=t.util.query(this.socket.options.query,"t="+ +(new Date));this.iframe.src=this.prepareUrl()+r,t.util.on(window,"unload",function(){n.destroy()})},n.prototype._=function(e,t){this.onData(e);try{var n=t.getElementsByTagName("script")[0];n.parentNode.removeChild(n)}catch(r){}},n.prototype.destroy=function(){if(this.iframe){try{this.iframe.src="about:blank"}catch(e){}this.doc=null,this.iframe.parentNode.removeChild(this.iframe),this.iframe=null,CollectGarbage()}},n.prototype.close=function(){return this.destroy(),t.Transport.XHR.prototype.close.call(this)},n.check=function(e){if(typeof window!="undefined"&&["Active"].concat("Object").join("X")in window)try{var n=new(window[["Active"].concat("Object").join("X")])("htmlfile");return n&&t.Transport.XHR.check(e)}catch(r){}return!1},n.xdomainCheck=function(){return!1},t.transports.push("htmlfile")}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(e,t,n){function r(){t.Transport.XHR.apply(this,arguments)}function i(){}e["xhr-polling"]=r,t.util.inherit(r,t.Transport.XHR),t.util.merge(r,t.Transport.XHR),r.prototype.name="xhr-polling",r.prototype.heartbeats=function(){return!1},r.prototype.open=function(){var e=this;return t.Transport.XHR.prototype.open.call(e),!1},r.prototype.get=function(){function t(){this.readyState==4&&(this.onreadystatechange=i,this.status==200?(e.onData(this.responseText),e.get()):e.onClose())}function r(){this.onload=i,this.onerror=i,e.retryCounter=1,e.onData(this.responseText),e.get()}function s(){e.retryCounter++,!e.retryCounter||e.retryCounter>3?e.onClose():e.get()}if(!this.isOpen)return;var e=this;this.xhr=this.request(),n.XDomainRequest&&this.xhr instanceof XDomainRequest?(this.xhr.onload=r,this.xhr.onerror=s):this.xhr.onreadystatechange=t,this.xhr.send(null)},r.prototype.onClose=function(){t.Transport.XHR.prototype.onClose.call(this);if(this.xhr){this.xhr.onreadystatechange=this.xhr.onload=this.xhr.onerror=i;try{this.xhr.abort()}catch(e){}this.xhr=null}},r.prototype.ready=function(e,n){var r=this;t.util.defer(function(){n.call(r)})},t.transports.push("xhr-polling")}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this),function(e,t,n){function i(e){t.Transport["xhr-polling"].apply(this,arguments),this.index=t.j.length;var n=this;t.j.push(function(e){n._(e)})}var r=n.document&&"MozAppearance"in n.document.documentElement.style;e["jsonp-polling"]=i,t.util.inherit(i,t.Transport["xhr-polling"]),i.prototype.name="jsonp-polling",i.prototype.post=function(e){function a(){f(),n.socket.setBuffer(!1)}function f(){n.iframe&&n.form.removeChild(n.iframe);try{u=document.createElement('<iframe name="'+n.iframeId+'">')}catch(e){u=document.createElement("iframe"),u.name=n.iframeId}u.id=n.iframeId,n.form.appendChild(u),n.iframe=u}var n=this,r=t.util.query(this.socket.options.query,"t="+ +(new Date)+"&i="+this.index);if(!this.form){var i=document.createElement("form"),s=document.createElement("textarea"),o=this.iframeId="socketio_iframe_"+this.index,u;i.className="socketio",i.style.position="absolute",i.style.top="0px",i.style.left="0px",i.style.display="none",i.target=o,i.method="POST",i.setAttribute("accept-charset","utf-8"),s.name="d",i.appendChild(s),document.body.appendChild(i),this.form=i,this.area=s}this.form.action=this.prepareUrl()+r,f(),this.area.value=t.JSON.stringify(e);try{this.form.submit()}catch(l){}this.iframe.attachEvent?u.onreadystatechange=function(){n.iframe.readyState=="complete"&&a()}:this.iframe.onload=a,this.socket.setBuffer(!0)},i.prototype.get=function(){var e=this,n=document.createElement("script"),i=t.util.query(this.socket.options.query,"t="+ +(new Date)+"&i="+this.index);this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),n.async=!0,n.src=this.prepareUrl()+i,n.onerror=function(){e.onClose()};var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(n,s),this.script=n,r&&setTimeout(function(){var e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)},100)},i.prototype._=function(e){return this.onData(e),this.isOpen&&this.get(),this},i.prototype.ready=function(e,n){var i=this;if(!r)return n.call(this);t.util.load(function(){n.call(i)})},i.check=function(){return"document"in n},i.xdomainCheck=function(){return!0},t.transports.push("jsonp-polling")}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this),typeof define=="function"&&define.amd&&define("socket.io",[],function(){return io})})(),define("common/Duedil.Dealr",["jquery","common/Duedil","socket.io","underscore","third-party/domReady!"],function(e,t,n,r){t.Dealr=function(){var i=e.Deferred(),s=function(n){t.log("DEALr message received:",n),t.log("DEALr message properties:",n.property);var r=n.property.split("/")[1],i=n.property.split("?")[1],s=[];if(i&&i.length>0){var o;e.each(i.split("&"),function(e,t){o=t.split("="),s[o[0]]=o[1]})}e(document).trigger("dealr_message",[r,n.payload,s])},o={SocketServer:function(){var e;if(!dealr_host){t.log("No dealr host variable available, can't connect to socket server!");return}return t.log("Connecting to DEALr Socket Server at "+dealr_host),e=n.connect(dealr_host,{"connect timeout":500,reconnect:!0,"reconnection delay":500,"reopen delay":500,"max reconnection attempts":10}),e.on("connect",function(){t.log("DEALR Connected!"),i.resolve(),e.on("message",s)}),{request:function(n){t.log("Sending properties request to dealr server",n),e.emit("requested_properties",n)}}},NoDeal:function(){i.resolve();var t=function(t){var n=e.parseJSON(t),i=[];return r.each(n,function(e,t){var n=document.createElement("a");n.href=e.replace(/^\/?dealr\//,"/nodeal/"),i.push({path:("/"+n.pathname).replace(/^\/\//,"/"),data:n.search.replace(/^\?/,"")})}),i};return{request:function(n){var r=t(n);for(var i=0;i<r.length;i++)e.post(r[i].path,r[i].data,function(e){s(e)},"json")}}}},u,a=dealr_backend&&o[dealr_backend]?dealr_backend:"SocketServer";return t.log("Initializing DEALr client with backend impl "+a),u=o[a](),{request:function(e){i.then(function(){u.request(e)})}}}()}),define("common/Duedil.events",["jquery","common/Duedil","jquery-cookie"],function(e,t){t.events={PUBLIC_MODAL_SOFT:{category:"Public Page",event_action:"Soft Modal"},PUBLIC_MODAL_HARD:{category:"Public Page",event_action:"Hard Modal"},LOGIN_INTERACTION_SIGN_IN:{category:"Navigation Bar",event_action:"Dropdown - Sign In"},LOGIN_INTERACTION_SIGN_UP:{category:"Navigation Bar",event_action:"Dropdown - Sign Up"},AUTOCOMPLETE_SEARCH:{category:"Search Box",event_action:"Dropdown - Search Type"},PROF_COM_HDR_FI:{category:"Company Profile - Header",event_action:"Financials"},PROF_COM_HDR_GRPGPH:{category:"Company Profile - Header",event_action:"Group Graph"},PROF_COM_VI_DTLS:{category:"Company Profile - Vitals",event_action:"Widget - Details"},PROF_COM_VI_DESC:{category:"Company Profile - Vitals",event_action:"Widget - Description"},PROF_COM_VI_GRPGPH:{category:"Company Profile - Vitals",event_action:"Widget - Group Structure"},PROF_COM_VI_TRDMK:{category:"Company Profile - Vitals",event_action:"Widget - Trademarks"},PROF_COM_VI_VALU:{category:"Company Profile - Vitals",event_action:"Widget - User Valuation"},PROF_COM_FI_FI:{category:"Company Profile - Financials",event_action:"Widget - Financials"},PROF_COM_FI_ESTACC:{category:"Company Profile - Financials",event_action:"Widget - Estimated Accounts"},PROF_COM_FI_ACCRAT:{category:"Company Profile - Financials",event_action:"Widget - Accounting Ratios"},DASHBOARD_FEATURED:{category:"Dashboard",event_action:"Widget - In The News"},DASHBOARD_TWEET:{category:"Dashboard",event_action:"Widget - Tweet Us"},DASHBOARD_ADMIN:{category:"Dashboard",event_action:"Widget - Administration"},FOLLOWS_ADM_UNF:{category:"Follows - Admin Page - Unfollow"},FOLLOWS_ADM_DELGRP:{category:"Follows - Admin Page - Delete Group"},FOLLOWS_PROF_COM:{category:"Follows - Company Profile"},PROF_DIR_DIRSHP:{category:"Director Profile",event_action:"Widget - Directorships"},init:function(){var e=new Date;t.events.start_time=e.getTime()},log:function(e,n,r){if(typeof _gaq=="undefined")return;var i=new Date;r=r||parseInt((i.getTime()-t.events.start_time)/1e3,10);try{_gaq.push(["_trackEvent",e.category,e.event_action,n,r])}catch(s){t.log("Event Track Error: "+s)}},trackTrigger:function(t,n){var r=self.start_time+18e5;e.cookies.set("dt_"+t,n,{expires:r})}},e(function(){t.events.init()})}),define("common/Duedil.hashScroller",["jquery","common/Duedil","Modernizr"],function(e,t,n){t.hashScroller={bound:!1,init:function(){var t=this;this.bound||this.bindEvents(),window.location.hash&&e(function(){t.scrollToHash(window.location.hash,100)})},bindEvents:function(){var t=this;this.bound=!0;var r=!1;n.hashchange&&(r=!0,e(window).on("hashchange",function(e){e.preventDefault(),t.scrollToHash(window.location.hash)})),e(document.body).on("click","a",function(e){this.pathname==window.location.pathname&&this.hash&&(this.hash==window.location.hash||!r)&&(e.preventDefault(),t.scrollToHash(this.hash))})},getElement:function(t){var n;return typeof t=="string"?(t.charAt(0)=="#"&&(t=t.substr(1)),n=document.getElementById(t),n||(n=document.getElementsByName(t)),n=e(n)):n=e(t),n.length<1?!1:n},scrollToHash:function(t,n){function o(){e("html, body").scrollTop(s)}var r=this.getElement(t);if(!r)return;var i=parseInt(e(".top-bar").outerHeight())+15,s=r.offset().top-i;n?setTimeout(o,n):o()}}}),define("common/Duedil.Login",["jquery","common/Duedil"],function(e,t){t.Login=function(){var n,r=e("#sign-in > a");return{getHref:function(){return r.attr("href")},setHref:function(e){r.attr("href",e)},setReferral:function(e){var n=encodeURIComponent(e);t.log("Updating the login URL to /login?to="+n),this.setHref("/login?to="+n),this.to=n},getReferral:function(){return typeof n=="undefined"?referrer=r.get(0).search.replace("?to=",""):referrer=this.to,t.log("Value of Duedil.Login.to: "+referrer),referrer}}}}),define("common/Duedil.Modals",["jquery","common/Duedil","common/Duedil.AjaxUtils"],function(e,t){var n=function(t,n){this.options=n,this.$container=e(t).delegate('[data-dismiss="modal"]',"click.dismiss.modal",e.proxy(this.hide,this)),this.$element=e(t).find("#modal-body"),this.options.remote&&this.load(this.$element,{url:this.options.remote})};n.prototype={constructor:n,toggle:function(){return this[this.isShown?"hide":"show"]()},load:function(n,r){this.showLoader();var i=this,s=e.extend({type:"GET",dataType:"html"},this.options.ajax||{},r||{});this.$container.attr("currentURL",s.url),s.beforeSend=function(t){t.setRequestHeader("X-Duedil-Cachebuster",cachebuster.substr(1)),t.setRequestHeader("X-PJAX","true"),t.setRequestHeader("X-PJAX-Container",e(n)),i.options.ajax&&i.options.ajax.beforeSend&&i.options.ajax.beforeSend(t)},s.success=function(r,o,u){i.fireAnalytics(u),e(n).html(r),e(n).trigger("loaded"),s.postLoad&&s.postLoad(r,n,i),i.$container.removeClass("loading"),i.options.closeableOrig===!0&&(i.options.closeable=!0),i.show(),i.isShown&&i.$container.trigger("shown"),i.center(),e("a[rel=tooltip]").tooltip({container:"body"});try{t.AjaxUtils.partials.update()}catch(a){}t.Modals.loaded(i)},!s.error||(s.custom_error=error),s.error=function(e){e.readyState==4&&(i.$container.removeClass("loading"),i.showError(e),!s.custom_error||s.custom_error.apply(i,arguments),!i.options.errorHandler||i.options.errorHandler.apply(i,arguments))},this.request=e.ajax(s)},center:function(){var t=this,n=parseInt(e(window).height()),r=parseInt(e(window).width()),i=parseInt(t.$container.width()),s=parseInt(t.$container.find("#modal-body").height()),o=10,u,u=s<n?!0:!1;u?t.$container.removeClass("vertical-scroll"):t.$container.addClass("vertical-scroll"),r>i&&t.$container.css({left:Math.round(r/2-i/2),top:Math.round(n/2-s/2),bottom:"auto"})},showLoader:function(){this.options.closeableOrig=this.options.closeable,this.options.closeable=!1;var e="";!this.options.loadingMessage||(e='<p class="message">'+this.options.loadingMessage+"</p>"),this.$container.addClass("loading"),this.$element.html('<div class="loader '+this.options.loadingclass+'">'+e+"</div>"),this.show(),this.center()},showError:function(e){this.options.closeable=!0,this.options.errorMessage=e.getResponseHeader("x-modal-error")||this.options.errorMessage;var t='<div class="error-modal"><div class="basket-header">Error ('+e.status+")</div>"+'<div class="flashmessage-cont">'+'<div class="commerce error flashmessage">'+this.options.errorMessage+"</div>"+"</div>"+'<div class="button-wrap">'+'<a href="#" class="button red" data-dismiss="modal">Close</a>'+"</div>"+"</div>";this.$element.html(t),this.show(),this.center()},show:function(){this.options.scrollTop=this.options.scrollTop||e(window).scrollTop();var n=this,r=e.Event("show");this.$container.trigger(r),this.options.closeable===!1||this.options.showclose===!1?this.$container.find(".close").hide():this.$container.find(".close").show(),e("body").addClass("modal-open"),this.escape();if(this.isShown||r.isDefaultPrevented())return;this.isShown=!0,this.backdrop(function(){var r=e.support.transition&&n.$container.hasClass("fade");n.$container.parent().length||n.$container.appendTo(document.body),n.$container.show(),r&&n.$container[0].offsetWidth,n.$container.addClass("in").attr("aria-hidden",!1),n.enforceFocus(),n.center(),n.$container.hasClass("loading")||n.$container.trigger("shown"),t.Modals.loaded(n)})},hide:function(t){t&&t.preventDefault();var n=this;if(this.options.closeable===!1)return!1;t=e.Event("hide"),this.$container.trigger(t),this.request&&this.request.abort();if(!this.isShown||t.isDefaultPrevented())return;this.isShown=!1,e("body").removeClass("modal-open"),e(window).scrollTop(this.options.scrollTop),delete this.options.scrollTop,this.escape(),e(document).off("focusin.modal"),this.$container.removeClass("in").attr("aria-hidden",!0),e.support.transition&&this.$container.hasClass("fade")?this.hideWithTransition():this.hideModal()},enforceFocus:function(){var t=this;e(document).on("focusin.modal",function(e){t.$container[0]!==e.target&&!t.$container.has(e.target).length&&t.$container.focus()})},escape:function(){var e=this;this.isShown&&this.options.keyboard&&this.options.closeable!=0?this.$container.on("keyup.dismiss.modal",function(t){t.which==27&&e.hide()}):this.isShown||this.$container.off("keyup.dismiss.modal")},hideWithTransition:function(){var t=this,n=setTimeout(function(){t.$container.off(e.support.transition.end),t.hideModal()},500);this.$container.one(e.support.transition.end,function(){clearTimeout(n),t.hideModal()})},hideModal:function(e){this.$container.hide().trigger("hidden"),this.backdrop()},removeBackdrop:function(){this.$backdrop.remove(),this.$backdrop=null},backdrop:function(t){var n=this,r=this.$container.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var i=e.support.transition&&r;this.$backdrop=e(".modal-backdrop"),this.options.backdrop!="static"&&this.$backdrop.click(e.proxy(this.hide,this)),i&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),i?this.$backdrop.one(e.support.transition.end,t):t()}else!this.isShown&&this.$backdrop?this.$backdrop.removeClass("in"):t&&t()},fireAnalytics:function(e){window._gaq&&(e.getResponseHeader("GA-timestamp")?_gaq.push(["_setCustomVar",4,"time",e.getResponseHeader("GA-timestamp"),3]):_gaq.push(["_deleteCustomVar",4]),e.getResponseHeader("GA-ident")?_gaq.push(["_setCustomVar",5,"ident",e.getResponseHeader("GA-ident"),3]):_gaq.push(["_deleteCustomVar",5]),e.getResponseHeader("GA-title")?_gaq.push(["_trackPageview",e.getResponseHeader("GA-title")]):_gaq.push(["_trackPageview"]))}},e.fn.modal=function(t){return this.each(function(){var r=e(this),i=r.data("modal"),s=e.extend({},e.fn.modal.defaults,r.data(),typeof t=="object"&&t);(!i||s.forceReload||!s.remote||s.remote!=i.options.remote)&&r.data("modal",i=new n(this,s)),typeof t=="string"?i[t]():s.show&&i.show()})},e.fn.modal.defaults={backdrop:!0,keyboard:!0,closeable:!0,showclose:!0,show:!0,errorMessage:"There was an unexpected error. Please try again",loadingMessage:null,loadingclass:null,errorHandler:function(e,t){}},e.fn.modal.Constructor=n,e(function(){e(window).resize(function(){e(".modal").data("modal")&&e(".modal").data("modal").center()}),e("body").on("show shown hide hidden",function(n){e(n.target).hasClass("modal")&&t.log("Modal: "+n.type)}),e("body").on("click.modal.data-api",'[data-toggle="modal"]',function(t){var n=e(this),r=n.attr("href"),i=e(n.attr("data-target")||r&&r.replace(/.*(?=#[^\s]+$)/,"")),s={},o=i.data("modal"),u=0;!!o&&o.options.scrollTop&&(s.scrollTop=o.options.scrollTop),i.attr("currentURL")==r&&n.attr("data-force")!="true"?s="toggle":(i.removeData("modal"),s=e.extend({remote:!/#/.test(r)&&r},i.data(),n.data(),s)),i.data("triggerEl",n),t.preventDefault();if(e(this).is("form")){if(e(t.target).is("button,input[type=submit]")){var o=e(this).serializeArray();o.push({name:e(t.target).attr("name"),value:e(t.target).attr("value")}),i.modal({remote:e(this).attr("action"),forceReload:!0,ajax:{type:e(this).attr("method")||"POST",data:o}})}}else{var a=i.modal(s),f=a.data("modal");f.escape(),a.focus(),a.one("hide",function(){n.focus()})}}),e(".modal").on("submit","form",function(t){var n=e(this).parents(".modal").data("modal"),r=e(this).attr("action");n.options.isForm=!0,e(this).attr("data-modalform")&&(t.preventDefault(),e(this).attr("data-loadingmessage")?n.options.loadingMessage=e(this).attr("data-loadingmessage"):delete n.options.loadingMessage,e(this).attr("data-loadingclass")?n.options.loadingclass=e(this).attr("data-loadingclass"):delete n.options.loadingclass,e(this).attr("data-showclose")?n.options.showclose=e(this).data("showclose"):delete n.options.showclose,n.load(n.$element,{url:r,type:e(this).attr("method")||"POST",data:e(this).serializeArray()}))}),e(window).trigger("modals-ready")})}),define("common/Duedil.ResponsiveTables",["jquery","common/Duedil","third-party/domReady!"],function(e,t){function s(e){e.addClass(i),e.wrap('<div class="'+r+'">');var t=e.clone();t.find("td:not(:first-child), th:not(:first-child)").addClass("hidden"),t.removeClass("responsive always-responsive"),e.closest("."+r).append(t),t.wrap('<div class="pinned">'),e.wrap('<div class="scrollable">')}function o(e){e.parents("."+r).find(".pinned").remove();var t=e.parents(".scrollable").children();t.unwrap(),t.unwrap(),e.removeClass(i)}function u(){var t=e(window).width();e("table.always-responsive").each(function(t,n){if(e(n).hasClass(i))return;s(e(n))}),t<=n?e("table.responsive").not("."+i).each(function(t,n){s(e(n))}):t>n&&e("table.responsive."+i).each(function(t,n){o(e(n))})}var n=768,r="responsive-table-wrapper",i="is-responsive";t.ResponsiveTables={init:function(){u(),e(window).off("resize.responsive-tables"),e(window).on("resize.responsive-tables",u)}},t.ResponsiveTables.init()}),define("common/Duedil.sidebar",["jquery","common/Duedil"],function(e,t){function o(t){var n=t.width(),i=t.parents(r),s=i.outerWidth();i.css({position:"absolute",left:"0",width:e(window).width-n,transitionDuration:"0.3s",height:e("#widget-tab-contents").height()}),e(t.data("target")).css({position:"relative",marginLeft:s-n-1,transitionDuration:"0.3s"}),e(t.data("source")).css({marginRight:n})}function u(t){var n=t.width(),i=t.parents(r),s=i.outerWidth(),o=e(t.data("container")).width()-n+"px";i.css({position:"absolute",left:"-"+(s-n-1)+"px",transitionDuration:"0.3s",height:e("#widget-tab-contents").height()}),e(t.data("target")).css({position:"relative",marginLeft:n,width:o,transitionDuration:"0.3s"}),e(t.data("source")).css({marginRight:"0"})}function a(){e(window).width()<=n?(e(r).css({height:e("#widget-tab-contents").height()}),u(e(i)),e(i).toggle(function(t){o(e(t.target))},function(t){u(e(t.target))})):(e(r).removeAttr("style"),e(e(i).data("target")).removeAttr("style"),e("#user-lists").removeAttr("style"),e(".list-tools").removeAttr("style"))}var n=768,r=".sidebar",i=".showhide",s=".sidebar.toggle-list li";t.sidebar={init:function(){if(e(r).length==0||e(i).length==0)return!1;a(),e(window).off("resize.duedil-sidebars"),e(window).on("resize.duedil-sidebars",a),e(s).off("click.duedil-sidebars"),e(s).on("click.duedil-sidebars",a)}},e(function(){e("html").hasClass("lt-ie9")||t.sidebar.init()})}),define("common/Duedil.pjax",["jquery","common/Duedil","Modernizr","NProgress","common/Duedil.AjaxUtils","common/Duedil.ResponsiveTables","common/Duedil.hashScroller","common/Duedil.sidebar"],function(e,t,n,r){function a(){if(!e.fn.pjax)return;var n={id:null,delay:400,visible:!1},s=7500;t.pjax=function(t,n){return e.pjax({url:t,container:n,timeout:s})},t.pjax.getDefaultTimeout=function(){return s},t.pjax.onclick=function(n){if(!t.pjax.hasProfile())return;var r=e(this).data("pjax"),i;if(typeof r=="undefined"||r===!0)i=u;else{if(!r)return;i=r}return e.pjax.click(n,i,{timeout:s})},e(document).on("click","a[data-pjax]",t.pjax.onclick),t.pjax.registerActive=function(e){o=e},t.pjax.deregisterActive=function(e){o&&o.guid()==e.guid()&&(o=null)},t.pjax.hasProfile=function(){return!!o},e(document).on({"pjax:beforeSend":function(e,t){t.setRequestHeader("X-Duedil-Cachebuster",cachebuster.substr(1))},"pjax:start":function(e){n.id=window.setTimeout(function(){r.start(),n.visible=!0},n.delay)},"pjax:end":function(i){n.visible?(r.done(),n.visible=!1):(window.clearTimeout(n.id),n.id=null),t.AjaxUtils.partials.update(),window.location.hash&&(t.hashScroller.getElement(window.location.hash)||e("body").animate({scrollTop:0},"fast")),t.helpers.removeTooltips(),t.helpers.bindTooltips(),t.ResponsiveTables.init(),t.hashScroller.init(),t.sidebar.init()}}),i.resolve()}var i=e.Deferred(),s;t.whenPjax=i.promise();var o,u="#main";e(function(){e(window).bind("popstate",function(t){if(t.state&&t.state.container&&t.state.url&&o){var n=e("<a></a>").attr("href",t.state.url)[0].pathname;o.isInternal(n)||(t.state.container=u)}}),n.history&&require(["jquery-pjax"],function(){a()})})}),define("common/Duedil.profile",["jquery","common/Duedil","common/Duedil.pjax","common/Duedil.Dealr"],function(e,t){var n="/sites/default/themes/duedil_web/socket.io/WebSocketMain.swf";t.profile={},classdefs={},t.profile.subclass=function(n,i){if(!i.init||typeof i.init!="function")throw"Invalid subclass data for Duedil.Profile class creation";classdefs[n]=i;var s=function(n){this.raw_data=n;var r=this;classdefs[this.classname].uses&&e.each(classdefs[this.classname].uses(),function(e,t){t.setActiveClient(r)}),t.whenPjax.then(function(){t.pjax&&t.pjax.registerActive(r)}),this.init()};return s.prototype=new r,s.prototype.classname=n,s.prototype.namespace=i.namespace||n.toLowerCase(),e.each(i,function(e,t){if(e=="init"||e=="destroy"||e=="update")return;s.prototype[e]=t}),s};var r=function(){};r.prototype.init=function(){function s(e,t,n){i.updateStart(e,t,n)}this.tabsinit();var n=this,r=[];this.destroyWidgets=function(){t.log("Destroying widgets for",this.guid()),t.widgets.destroy(this.namespace,r)},classdefs[this.classname].init.call(this),t.widgets&&t.widgets[this.namespace]&&(r=t.widgets.init(this));var i=this;e(document).on("pjax:start."+this.guid(),s),e(document).one("pjax:start."+this.guid(),function(){e(document).on("pjax:end."+i.guid(),function(t){var n=e(t.target);if(i.internal_pjax)for(var r in i.internal_pjax)if(n.is(i.internal_pjax[r])){i.update();return}e(document).off("pjax:start."+i.guid(),s),i.destroy(),delete i})}),this.dealrId&&this.dealrId()&&(e(document).on("dealr_message."+this.guid(),function(e,t,n,r){if(t!==i.dealrId())return;i.onDealrMessage(n,r)}),this.raw_data.requested_properties&&t.Dealr.request(this.raw_data.requested_properties))},r.prototype.destroy=function(){t.log(this.classname+" object is committing hara-kiri!");var n=this;classdefs[this.classname].uses&&e.each(classdefs[this.classname].uses(),function(e,t){t.removeClient(n)}),n=null,t.widgets&&t.widgets[this.namespace]&&this.destroyWidgets(),classdefs[this.classname].destroy&&classdefs[this.classname].destroy.call(this),t.pjax&&t.pjax.deregisterActive(this),e(document).off("."+this.guid()),e(this).trigger("destroyed").remove()},r.prototype.onDealrMessage=function(e,n){var r;typeof this.dealrWidgetMap=="function"?r=this.dealrWidgetMap(e,n):r=this.dealrWidgetMap[e.property],t.log(this.namespace+" Profile Obj targetting widget "+r+" for dealr message");var i=t.widgets.widget(r,this.namespace);i?typeof i.update=="function"?i.update(e,n):t.log("Widget "+r+" can't recieve dealr updates! No update method"):t.log("Widget "+r+" not found in '"+this.namespace+"' namespace!")},r.prototype.updateTabsForHref=function(t,n){function r(t){return typeof t=="string"&&(t=e("<a></a>").attr("href",t)),t.prop("pathname")}t||(t=window.location.pathname),n||(n="selected"),t=r(t);var i=e(".large-tabs li"),s=i.filter(function(){return r(e(this).find("a"))==t});return s.length&&(i.removeClass(n),s.addClass(n)),s},r.prototype.updateStart=function(e,t,n){this.updateTabsForHref(n.url)},r.prototype.update=function(){t.log(this.classname+" object is updating post-pjax"),this.destroyWidgets(),t.widgets&&t.widgets[this.namespace]&&t.widgets.init(this),classdefs[this.classname].update&&classdefs[this.classname].update.call(this)},r.prototype.tabsinit=function(t){e(t||"div.tabs").on("click","li a",function(){e(this).parent().addClass("selected").siblings().removeClass("selected")}),e(".large-tabs").on("click","li a",function(t){var n=e(this).parent(),r=n.parents(".large-tabs"),i=r.find(".button");i=i.add(r.siblings(".large-tabs").find(".button")),n.hasClass("selected")?(t.preventDefault(),t.stopPropagation(),i.not(n).toggleClass("responsive-hidden")):(i.removeClass("selected").addClass("responsive-hidden"),n.addClass("selected"))})}});var Kicksend={mailcheck:{threshold:3,defaultDomains:"yahoo.com google.com hotmail.com gmail.com me.com aol.com mac.com live.com comcast.net googlemail.com msn.com hotmail.co.uk yahoo.co.uk facebook.com verizon.net sbcglobal.net att.net gmx.com mail.com".split(" "),defaultTopLevelDomains:"co.uk com net org info edu gov mil".split(" "),run:function(e){e.domains=e.domains||Kicksend.mailcheck.defaultDomains,e.topLevelDomains=e.topLevelDomains||Kicksend.mailcheck.defaultTopLevelDomains,e.distanceFunction=e.distanceFunction||Kicksend.sift3Distance;var t=Kicksend.mailcheck.suggest(encodeURI(e.email),e.domains,e.topLevelDomains,e.distanceFunction);t?e.suggested&&e.suggested(t):e.empty&&e.empty()},suggest:function(e,t,n,r){e=e.toLowerCase(),e=this.splitEmail(e);if(t=this.findClosestDomain(e.domain,t,r)){if(t!=e.domain)return{address:e.address,domain:t,full:e.address+"@"+t}}else if(n=this.findClosestDomain(e.topLevelDomain,n),e.domain&&n&&n!=e.topLevelDomain)return t=e.domain,t=t.substring(0,t.lastIndexOf(e.topLevelDomain))+n,{address:e.address,domain:t,full:e.address+"@"+t};return!1},findClosestDomain:function(e,t,n){var r,i=99,s=null;if(!e||!t)return!1;n||(n=this.sift3Distance);for(var o=0;o<t.length;o++){if(e===t[o])return e;r=n(e,t[o]),r<i&&(i=r,s=t[o])}return i<=this.threshold&&null!==s?s:!1},sift3Distance:function(e,t){if(null==e||0===e.length)return null==t||0===t.length?0:t.length;if(null==t||0===t.length)return e.length;for(var n=0,r=0,i=0,s=0;n+r<e.length&&n+i<t.length;){if(e.charAt(n+r)==t.charAt(n+i))s++;else for(var o=i=r=0;5>o;o++){if(n+o<e.length&&e.charAt(n+o)==t.charAt(n)){r=o;break}if(n+o<t.length&&e.charAt(n)==t.charAt(n+o)){i=o;break}}n++}return(e.length+t.length)/2-s},splitEmail:function(e){e=e.split("@");if(2>e.length)return!1;for(var t=0;t<e.length;t++)if(""===e[t])return!1;var n=e.pop(),r=n.split("."),i="";if(0==r.length)return!1;if(1==r.length)i=r[0];else{for(t=1;t<r.length;t++)i+=r[t]+".";2<=r.length&&(i=i.substring(0,i.length-1))}return{topLevelDomain:i,domain:n,address:e.join("@")}}}};window.jQuery&&function(e){e.fn.mailcheck=function(e){var t=this;if(e.suggested){var n=e.suggested;e.suggested=function(e){n(t,e)}}if(e.empty){var r=e.empty;e.empty=function(){r.call(null,t)}}e.email=this.val(),Kicksend.mailcheck.run(e)}}(jQuery),define("mailcheck",function(){}),define("common/Duedil.SignupModal",["jquery","common/Duedil","common/Duedil.Modals","mailcheck"],function(e,t){function s(t){function i(e){var t=!1,n=e.siblings(".help-block");return e.mailcheck({suggested:function(e,r){n.removeClass("hidden"),n.html('Did you mean <a class="mailfix-suggestion" href="#">'+r.full+"</a>?"),t=!0},empty:function(e){n.addClass("hidden")}}),t}var n=e("#modal-register-first-step"),r=e("#modal-register-second-step");e("#edit-to").val(window.location.href),n.find("[name=mail]").focus(),n.on("click",".button",function(e){var r=n.find("[name=mail]");r.val().length===0&&(e.preventDefault(),e.stopPropagation(),r.focus(),r.siblings(".help-block").removeClass("hidden"),t.modal("center"))}),n.on("submit",function(e){e.preventDefault();var s=n.find("[name=mail]"),o=r.find("[name=mail]");if(!s.val())return;n.addClass("hidden"),o.val(s.val()),r.removeClass("hidden"),r.find("input:visible").first().focus(),i(o)&&o.parents(".form-row").removeClass("hidden"),t.modal("center")}),r.on("click",".mailfix-suggestion",function(t){t.preventDefault(),r.find("[name=mail]").val(e(t.target).text()),e(t.target).parent().addClass("hidden")})}var n="duedil_signup_modal_limit",r=3,i=6;t.SignupModal=function(){var t;this.modal=e("#modal"),this.beingShown=this.modal.is(":visible")&&this.modal.find(".public-register-modal").length!==0?!0:!1;if(logged_in){this.hide();return}registration_modal_use_tracking===1?(t=e.cookies.get(n)||0,t===r?(this.show(),e.cookies.set(n,t+1)):t===i?this.show(!1):e.cookies.set(n,t+1)):this.show(!1)},t.SignupModal.prototype.show=function(e){var n=this;if(this.beingShown)return!1;this.modal.modal({remote:"/modals/public-register?to="+t.Login().getReferral(),closeable:typeof e!="undefined"?e:!0}),this.modal.on("shown",function(e){s(n.modal),this.beingShown=!0})},t.SignupModal.prototype.hide=function(){this.beingShown&&(this.modal.modal("hide"),this.beingShown=!1)}}),define("common/Duedil.Topbar",["jquery","common/Duedil","underscore","third-party/domReady!","common/Duedil.typeahead"],function(e,t,n){t.Topbar={_init:function(){this.topbar=e(".top-bar"),this.main_nav=this.topbar.find(".nav-top-bar"),this.global_search=this.topbar.find(".global-search"),this.search=this.global_search.find("#quick-query"),this.hamburger=this.topbar.find("#hamburger-toggle"),this._initiateTypeahead(),this._mobileMenuBindings(),this._searchBindings()},_initiateTypeahead:function(){this.search.typeahead(e.extend(t.typeahead.settings,t.typeahead.sources.companies)),this._typeaheadBindings()},_typeaheadBindings:function(){var n=this;n.global_search.on("click",".search-item a",function(r){var i=e(this).attr("href");t.pjax&&t.pjax.hasProfile()&&(t.pjax(i,"#main"),n._isMobileMenuOpen()&&n._toggleMobileMenu(),n.search.blur(),r.preventDefault())}),this.search.bind("typeahead:selected",function(e,r){t.pjax&&t.pjax.hasProfile()?(t.pjax(r.url,"#main"),n._isMobileMenuOpen()&&n._toggleMobileMenu(),n.search.blur()):window.location=r.url}),n.global_search.on("click",".tt-dropdown-menu .search-more a",function(e){n._isMobileMenuOpen()&&n._toggleMobileMenu(),n.global_search.submit(),e.preventDefault()})},_searchBindings:function(){var r=this;r.global_search.on("submit",function(n){var i=e(this),s=i.attr("action"),o=s+"?"+i.serialize();t.pjax&&t.pjax.hasProfile()&&(t.pjax(o,"#main"),r.search.blur(),e(".tt-dropdown-menu").hide(),n.preventDefault()),r._isMobileMenuOpen()&&r._toggleMobileMenu()}),r.global_search.on("click",".dropdown-menu li",function(n){var i=e(this),s=i.find("a").first(),o=s.attr("href"),u=s.data("placeholder"),a=s.find("i")[0].className.replace("-dark"," large"),f=s.data("source");f&&(r.search.typeahead("destroy"),r.search.typeahead(e.extend(t.typeahead.settings,t.typeahead.sources[f]))),r.global_search.find(".dropdown-toggle i")[0].className=a,r.global_search.attr("action",o),r.search.focus(),u&&r.search.attr("placeholder",u),r.global_search.attr("action",o),n.preventDefault()}),e(document).on("click",".js-full-screen a",n.bind(function(){this._isMobileMenuOpen()&&this._toggleMobileMenu()},this)),r.global_search.find(".dropdown-toggle").on({"show.bs.popover shown.bs.popover":function(t){var n=e(this);n.parent().hasClass("open")&&n.tooltip("hide")}})},_isMobileMenuOpen:function(){return this.hamburger.hasClass("open")?!0:!1},_toggleMobileMenu:function(){this.hamburger.trigger("click")},_clearSearch:function(){return this.search.val()&&this.search.val().length>0?(this.search.typeahead("setQuery",""),!0):!1},_mobileMenuBindings:function(){var t=this;this.hamburger.on("click",function(n){t.hamburger.toggleClass("open"),t.topbar.toggleClass("mobile-open"),t.main_nav.toggleClass("open"),t._isMobileMenuOpen()?e("body").addClass("mobile-menu-open"):e("body").removeClass("mobile-menu-open"),n.preventDefault()})}},t.Topbar._init()}),function(e){define("bootstrap-tour",["jquery"],function(){return function(){(function(){(function(e,t){var n,r;return r=t.document,n=function(){function n(n){this._options=e.extend({name:"tour",container:"body",keyboard:!0,storage:t.localStorage,debug:!1,backdrop:!1,redirect:!0,orphan:!1,basePath:"",template:"<div class='popover'>          <div class='arrow'></div>          <h3 class='popover-title'></h3>          <div class='popover-content'></div>          <nav class='popover-navigation'>            <div class='btn-group'>              <button class='btn btn-sm btn-default' data-role='prev'>&laquo; Prev</button>              <button class='btn btn-sm btn-default' data-role='next'>Next &raquo;</button>            </div>            <button class='btn btn-sm btn-default' data-role='end'>End tour</button>          </nav>        </div>",afterSetState:function(e,t){},afterGetState:function(e,t){},afterRemoveState:function(e){},onStart:function(e){},onEnd:function(e){},onShow:function(e){},onShown:function(e){},onHide:function(e){},onHidden:function(e){},onNext:function(e){},onPrev:function(e){}},n),this._steps=[],this.setCurrentStep(),this.backdrop={overlay:null,$element:null,$background:null}}return n.prototype.setState=function(e,t){var n;return n=""+this._options.name+"_"+e,this._options.storage.setItem(n,t),this._options.afterSetState(n,t)},n.prototype.removeState=function(e){var t;return t=""+this._options.name+"_"+e,this._options.storage.removeItem(t),this._options.afterRemoveState(t)},n.prototype.getState=function(e){var t,n;t=""+this._options.name+"_"+e,n=this._options.storage.getItem(t);if(n===void 0||n==="null")n=null;return this._options.afterGetState(e,n),n},n.prototype.addSteps=function(e){var t,n,r,i;i=[];for(n=0,r=e.length;n<r;n++)t=e[n],i.push(this.addStep(t));return i},n.prototype.addStep=function(e){return this._steps.push(e)},n.prototype.getStep=function(t){if(this._steps[t]!=null)return e.extend({id:"step-"+t,path:"",placement:"right",title:"",content:"<p></p>",next:t===this._steps.length-1?-1:t+1,prev:t-1,animation:!0,container:this._options.container,backdrop:this._options.backdrop,redirect:this._options.redirect,orphan:this._options.orphan,template:this._options.template,onShow:this._options.onShow,onShown:this._options.onShown,onHide:this._options.onHide,onHidden:this._options.onHidden,onNext:this._options.onNext,onPrev:this._options.onPrev},this._steps[t])},n.prototype.start=function(t){var n,i=this;return t==null&&(t=!1),this.ended()&&!t?this._debug("Tour ended, start prevented."):(e(r).off("click.tour."+this._options.name,".popover *[data-role=next]").on("click.tour."+this._options.name,".popover *[data-role=next]:not(.disabled)",function(e){return e.preventDefault(),i.next()}),e(r).off("click.tour."+this._options.name,".popover *[data-role=prev]").on("click.tour."+this._options.name,".popover *[data-role=prev]:not(.disabled)",function(e){return e.preventDefault(),i.prev()}),e(r).off("click.tour."+this._options.name,".popover *[data-role=end]").on("click.tour."+this._options.name,".popover *[data-role=end]",function(e){return e.preventDefault(),i.end()}),this._onResize(function(){return i.showStep(i._current)}),this._setupKeyboardNavigation(),n=this._makePromise(this._options.onStart!=null?this._options.onStart(this):void 0),this._callOnPromiseDone(n,this.showStep,this._current))},n.prototype.next=function(){var e;return this.ended()?this._debug("Tour ended, next prevented."):(e=this.hideStep(this._current),this._callOnPromiseDone(e,this._showNextStep))},n.prototype.prev=function(){var e;return this.ended()?this._debug("Tour ended, prev prevented."):(e=this.hideStep(this._current),this._callOnPromiseDone(e,this._showPrevStep))},n.prototype.goto=function(e){var t;return this.ended()?this._debug("Tour ended, goto prevented."):(t=this.hideStep(this._current),this._callOnPromiseDone(t,this.showStep,e))},n.prototype.end=function(){var n,i,s=this;return n=function(n){e(r).off("click.tour."+s._options.name),e(r).off("keyup.tour."+s._options.name),e(t).off("resize.tour."+s._options.name),s.setState("end","yes");if(s._options.onEnd!=null)return s._options.onEnd(s)},i=this.hideStep(this._current),this._callOnPromiseDone(i,n)},n.prototype.ended=function(){return!!this.getState("end")},n.prototype.restart=function(){return this.removeState("current_step"),this.removeState("end"),this.setCurrentStep(0),this.start()},n.prototype.hideStep=function(t){var n,r,i,s=this;return i=this.getStep(t),r=this._makePromise(i.onHide!=null?i.onHide(this,t):void 0),n=function(t){var n;n=s._isOrphan(i)?e("body"):e(i.element),n.popover("destroy"),i.reflex&&n.css("cursor","").off("click.tour."+s._options.name),i.backdrop&&s._hideBackdrop();if(i.onHidden!=null)return i.onHidden(s)},this._callOnPromiseDone(r,n),r},n.prototype.showStep=function(t){var n,i,s,o,u=this;o=this.getStep(t);if(!o)return;return s=t<this._current,n=this._makePromise(o.onShow!=null?o.onShow(this,t):void 0),i=function(n){var i,a;u.setCurrentStep(t),a=e.isFunction(o.path)?o.path.call():u._options.basePath+o.path,i=[r.location.pathname,r.location.hash].join("");if(u._isRedirect(a,i)){u._redirect(o,a);return}if(u._isOrphan(o)){if(!o.orphan){u._debug("Skip the orphan step "+(u._current+1)+". Orphan option is false and the element doesn't exist or is hidden."),s?u._showPrevStep():u._showNextStep();return}u._debug("Show the orphan step "+(u._current+1)+". Orphans option is true.")}return o.backdrop&&u._showBackdrop(u._isOrphan(o)?void 0:o.element),u._showPopover(o,t),o.onShown!=null&&o.onShown(u),u._debug("Step "+(u._current+1)+" of "+u._steps.length)},this._callOnPromiseDone(n,i)},n.prototype.setCurrentStep=function(e){return e!=null?(this._current=e,this.setState("current_step",e)):(this._current=this.getState("current_step"),this._current=this._current===null?0:parseInt(this._current,10))},n.prototype._showNextStep=function(){var e,t,n,r=this;return n=this.getStep(this._current),t=function(e){return r.showStep(n.next)},e=this._makePromise(n.onNext!=null?n.onNext(this):void 0),this._callOnPromiseDone(e,t)},n.prototype._showPrevStep=function(){var e,t,n,r=this;return n=this.getStep(this._current),t=function(e){return r.showStep(n.prev)},e=this._makePromise(n.onPrev!=null?n.onPrev(this):void 0),this._callOnPromiseDone(e,t)},n.prototype._debug=function(e){if(this._options.debug)return t.console.log("Bootstrap Tour '"+this._options.name+"' | "+e)},n.prototype._isRedirect=function(e,t){return e!=null&&e!==""&&e.replace(/\?.*$/,"").replace(/\/?$/,"")!==t.replace(/\/?$/,"")},n.prototype._redirect=function(t,n){if(e.isFunction(t.redirect))return t.redirect.call(this,n);if(t.redirect===!0)return this._debug("Redirect to "+n),r.location.href=n},n.prototype._isOrphan=function(t){return t.element==null||!e(t.element).length||e(t.element).is(":hidden")},n.prototype._showPopover=function(t,n){var r,i,s,o,u,a,f=this;a=e.extend({},this._options),s=e.isFunction(t.template)?e(t.template(n,t)):e(t.template),i=s.find(".popover-navigation"),u=this._isOrphan(t),u&&(t.element="body",t.placement="top",s=s.addClass("orphan")),r=e(t.element),s.addClass("tour-"+this._options.name),t.options&&e.extend(a,t.options),t.reflex&&r.css("cursor","pointer").on("click.tour."+this._options.name,function(e){return f._current<f._steps.length-1?f.next():f.end()}),t.prev<0&&i.find("*[data-role=prev]").addClass("disabled"),t.next<0&&i.find("*[data-role=next]").addClass("disabled"),t.template=s.clone().wrap("<div>").parent().html(),r.popover({placement:t.placement,trigger:"manual",title:t.title,content:t.content,html:!0,animation:t.animation,container:t.container,template:t.template,selector:t.element}).popover("show"),o=r.data("bs.popover")?r.data("bs.popover").tip():r.data("popover").tip(),o.attr("id",t.id),this._scrollIntoView(o),this._reposition(o,t);if(u)return this._center(o)},n.prototype._reposition=function(t,n){var i,s,o,u,a,f,l;u=t[0].offsetWidth,s=t[0].offsetHeight,l=t.offset(),a=l.left,f=l.top,i=e(r).outerHeight()-l.top-t.outerHeight(),i<0&&(l.top=l.top+i),o=e("html").outerWidth()-l.left-t.outerWidth(),o<0&&(l.left=l.left+o),l.top<0&&(l.top=0),l.left<0&&(l.left=0),t.offset(l);if(n.placement==="bottom"||n.placement==="top"){if(a!==l.left)return this._replaceArrow(t,(l.left-a)*2,u,"left")}else if(f!==l.top)return this._replaceArrow(t,(l.top-f)*2,s,"top")},n.prototype._center=function(n){return n.css("top",e(t).outerHeight()/2-n.outerHeight()/2)},n.prototype._replaceArrow=function(e,t,n,r){return e.find(".arrow").css(r,t?50*(1-t/n)+"%":"")},n.prototype._scrollIntoView=function(n){return e("html, body").stop().animate({scrollTop:Math.ceil(n.offset().top-e(t).height()/2)})},n.prototype._onResize=function(n,r){return e(t).on("resize.tour."+this._options.name,function(){return clearTimeout(r),r=setTimeout(n,100)})},n.prototype._setupKeyboardNavigation=function(){var t=this;if(this._options.keyboard)return e(r).on("keyup.tour."+this._options.name,function(e){if(!e.which)return;switch(e.which){case 39:return e.preventDefault(),t._current<t._steps.length-1?t.next():t.end();case 37:e.preventDefault();if(t._current>0)return t.prev();break;case 27:return e.preventDefault(),t.end()}})},n.prototype._makePromise=function(t){return t&&e.isFunction(t.then)?t:null},n.prototype._callOnPromiseDone=function(e,t,n){var r=this;return e?e.then(function(e){return t.call(r,n)}):t.call(this,n)},n.prototype._showBackdrop=function(e){if(this.backdrop.overlay!==null)return;this._showOverlay();if(e!=null)return this._showOverlayElement(e)},n.prototype._hideBackdrop=function(){if(this.backdrop.overlay===null)return;return this.backdrop.$element&&this._hideOverlayElement(),this._hideOverlay()},n.prototype._showOverlay=function(){return this.backdrop=e("<div/>"),this.backdrop.addClass("tour-backdrop"),this.backdrop.height(e(r).innerHeight()),e("body").append(this.backdrop)},n.prototype._hideOverlay=function(){return this.backdrop.remove(),this.backdrop.overlay=null},n.prototype._showOverlayElement=function(t){var n,r,i;return r=e(t),n=e("<div/>"),i=r.offset(),i.top=i.top,i.left=i.left,n.width(r.innerWidth()).height(r.innerHeight()).addClass("tour-step-background").offset(i),r.addClass("tour-step-backdrop"),e("body").append(n),this.backdrop.$element=r,this.backdrop.$background=n},n.prototype._hideOverlayElement=function(){return this.backdrop.$element.removeClass("tour-step-backdrop"),this.backdrop.$background.remove(),this.backdrop.$element=null,this.backdrop.$background=null},n}(),t.Tour=n})(jQuery,window)}).call(this)}.apply(e,arguments)})}(this),define("common/Duedil.Tours",["jquery","common/Duedil","bootstrap-tour"],function(e,t){t.Tutorial=t.Tutorial||!1,t.Tutorials=t.Tutorials||{},t.Courses={_search:{_general:{_run:function(n,r,i,s){var o=this,u={name:"_search._general",onStart:function(){t.FacetedBrowser.Tutorial._hideSearchIntro()},onEnd:function(n){if(s!==0){window.location=s;return}e("#search-tutorial").length>0&&(t.FacetedBrowser.Facets.status._close(),t.FacetedBrowser.Facets.gross_profit._close(),t.FacetedBrowser.Facets.gross_profit_delta_percentage._close(),t.FacetedBrowser.Tutorial._resetScrollSidebar()),t.Tutorial._clearOverlayElement()}};t.Tutorial=new Tour(e.extend(u,n)),t.Tutorial.addStep({path:"/search/companies"+t.Tutorials._generateUrl(),orphan:!0,title:"DueDil search",content:"This is our business discovery and analysis tool. This gives you the powerful ability to find new clients and export information for your CRM so you can turn prospects into meetings, or carry out research on industries and towns."}),t.Tutorial.addStep({path:"/search/companies"+t.Tutorials._generateUrl(),element:".facet[data-facet-id=status]",placement:"right",title:"Primary company attributes",content:"These are the primary company attributes. No company name is necessary to begin your search. You can start refining by location, company status, type of company with description keywords, and more.",onShown:function(n){t.FacetedBrowser.Facets.status._open(),t.Tutorial.disableNextNavigation(),t.FacetedBrowser.Facets.gross_profit._open(function(e){t.Tutorial.enableNextNavigation()}),n._replaceArrow(e(n._steps[n._current].element).data("popover").tip(),0,0,"top")},onNext:function(e){var n=this,r=e._steps[e._current+1].element;t.FacetedBrowser.Tutorial._scrollSidebarElementIntoView(r,e)}}),t.Tutorial.addStep({path:"/search/companies"+t.Tutorials._generateUrl(),element:".facet[data-facet-id=gross_profit]",placement:"right",title:"Financial metrics",content:"Further refine your results using financial metrics to find companies that are the right size for your business and most likely to use your services. You can use the sliders to quickly narrow down your range or enter specific numbers for a more precise selection.",onPrev:function(e){var n=this,r=e._steps[e._current-1].element;t.FacetedBrowser.Tutorial._scrollSidebarElementIntoView(r,e)},onShown:function(){t.Tutorial.disableNextNavigation(),t.FacetedBrowser.Facets.gross_profit_delta_percentage._open(function(e){t.Tutorial.enableNextNavigation()})},onNext:function(e){var n=this,r=e._steps[e._current+1].element;t.FacetedBrowser.Tutorial._scrollSidebarElementIntoView(r,e)}}),t.Tutorial.addStep({path:"/search/companies"+t.Tutorials._generateUrl(),element:".facet[data-facet-id=gross_profit_delta_percentage]",placement:"right",title:"Financial deltas",content:"Deltas enable you to filter over the change of a particular financial. If you want to find fast growing companies you can use the 'Turnover (Delta)' filter to find companies that had an increase in Turnover between two sets of accounts.",onPrev:function(e){var n=this,r=e._steps[e._current-1].element;t.FacetedBrowser.Tutorial._scrollSidebarElementIntoView(r,e)}}),t.Tutorial.addStep({path:"/search/companies"+t.Tutorials._generateUrl(),element:"#MapView-button",placement:"bottom",title:"Map",content:"Search and map results by county, city, urban area, town or postcode. Want to map all the accounting firms in Manchester? Or view the micro-economy at Heathrow airport? Now you can."}),t.Tutorial.addStep({path:"/search/companies"+t.Tutorials._generateUrl(),element:"#VisualSummaryView-button",placement:"bottom",title:"Chart",content:"Visualise your results with powerful charts. Easily compare companies, spot patterns and determine the relative strength of your selected group."}),t.Tutorial.addStep({path:"/search/companies"+t.Tutorials._generateUrl(),element:"#ProfileView-button",placement:"bottom",title:"Report",content:"Generate detailed statistical reports and view your results against the wider market. Want to see how Portsmouth's economy compares to the entire UK? Easy."}),t.Tutorial.addStep({path:"/search/companies"+t.Tutorials._generateUrl(),element:"#sorting-adding-group",placement:"bottom",title:"Sorting and Adding Fields",content:"Sort your results list and customise what information is included by adding fields such as 'Turnover' or 'Employee Count'."}),t.Tutorial.addStep({path:"/search/companies"+t.Tutorials._generateUrl(),element:"#save-export-group",placement:"bottom",title:"Save and export (Coming soon)",content:"Save your searches for later and export your results along with financial data for your own use."}),r?t.Tutorial.restart():t.Tutorial.start()}}},_intro:{_introtoduedil:{_run:function(n,r,i,s){var o=this,u={name:"_intro._introtoduedil",onEnd:function(e){window.location="/plans?ref=intro-tutorial-end"}};t.Tutorial=new Tour(e.extend(u,n)),t.Tutorial.addStep({path:"/"+t.Tutorials._generateUrl(),element:"#widget_dashboardactivitywidget",placement:"top",title:"Activity feed",content:"This is your activity feed. Follow companies and directors to be notified whenever new events occur such as a company filing new accounts, a change in credit score or a director retiring an appointment. Look for the 'Follow' button on every company and director profile. Credit subscribers get exclusive daily updates of insolvency and Gazette notices. <a href=\"/plans?ref=intro-tutorial\">See plans</a>"}),t.Tutorial.addStep({path:"/"+t.Tutorials._generateUrl(),element:"#dashboard .large-tabs li:eq(1)",placement:"bottom",title:"Follows",content:"Manage your portfolio here. Create custom lists and discreetly monitor competitors, suppliers and customers. You will also receive email alerts notifying you of updates to your portfolio."}),t.Tutorial.addStep({path:"/"+t.Tutorials._generateUrl(),element:"#widget_linkedinnetworkwidgetdashboard",placement:"left",title:"Sync LinkedIn",content:"Sync your LinkedIn account and we'll show you who you know along with their companies. Utilise your connections to find new leads and build relationships."}),t.Tutorial.addStep({path:"/search/companies"+t.Tutorials._generateUrl(),orphan:!0,backdrop:!1,title:"Advanced search",content:'Advanced search gives you the powerful ability to find new customers and research your market. Tailor your search with hundreds of financial and legal criteria, before exporting data to your CRM to turn prospects into meetings. <strong>Advanced search is only available on certain plans. <a href="/plans?ref=intro-tutorial">See plans</a></strong>'}),t.Tutorial.addStep({path:"/search/companies"+t.Tutorials._generateUrl(),element:"#top-filter button-group a",placement:"bottom",title:"Director Search",content:'Find exactly who you\'re looking for with advanced director search. Subscribers get access to all filters, including age, gender, disqualification status, company performance and more. <a href="/plans?ref=intro-tutorial">See plans</a>'}),t.Tutorial.addStep({path:"/company/00175064/filofax-group-limited"+t.Tutorials._generateUrl(),element:"#widget-panel-tabs .button .vitals",placement:"bottom",backdrop:!1,title:"Company vitals",content:"Key company information is contained on the vitals tab, including company status, address, industry classification, website and headline financials."}),t.Tutorial.addStep({path:"/company/00175064/filofax-group-limited/documents"+t.Tutorials._generateUrl(),element:"#widget-panel-tabs .button .documents",placement:"bottom",backdrop:!1,title:"Companies House documents",content:'Download official Companies House filings to review original accounting data and authenticate director and shareholder details. Documents are updated daily and filings will be available on DueDil within 24 hours of being placed on public record. <strong>Members receive inclusive credits for documents. <a href="/plans?ref=intro-tutorial">See plans</a></strong>'}),t.Tutorial.addStep({path:"/company/00175064/filofax-group-limited/financials"+t.Tutorials._generateUrl(),element:"#widget-panel-tabs .button .financials",placement:"bottom",backdrop:!1,title:"Financials",content:"Detailed company financials dating back more than 20 years. Includes profit and loss items, balance sheet and cash flow. Graph and compare any metric and export financials for use in Excel and other accounting software."}),t.Tutorial.addStep({path:"/company/00175064/filofax-group-limited/financials"+t.Tutorials._generateUrl(),element:"#widget_ratioswidget",placement:"left",title:"Accounting ratios",content:"Analyse performance and compare a company against its peers with more than a dozen financial ratios. Use the Liquidity ratio to to determine a company's ability to pay off its short-terms debt or Return On Capital Employed (ROCE) to compare profitability, for example."}),t.Tutorial.addStep({path:"/company/00175064/filofax-group-limited/risk"+t.Tutorials._generateUrl(),element:"#widget-panel-tabs .button .risk",placement:"bottom",backdrop:!1,title:"Credit reports",content:"Avoid bad debt with DueDil's comprehensive credit reports. Get an in-depth credit assessment and insight into every aspect of a company's operation, including current credit rating, credit limit and CCJs. Members receive inclusive credits for credit reports. <a href=\"/plans?ref=intro-tutorial\">See plans</a></strong>"}),t.Tutorial.addStep({path:"/company/00175064/filofax-group-limited/people"+t.Tutorials._generateUrl(),element:"#widget-panel-tabs .button .people",placement:"bottom",backdrop:!1,title:"Directors and secretaries",content:"Find out more about the people behind the company and know who you're dealing with before you approach them. All current and previous appointments are displayed, along with title and length of appointment."}),t.Tutorial.addStep({path:"/company/00175064/filofax-group-limited/people"+t.Tutorials._generateUrl(),element:"#widget_shareholdingswidget_people",placement:"left",title:"Company shareholders",content:"Verify a companyâs registered shareholders with ownership percentages."}),t.Tutorial.addStep({path:"/company/00175064/filofax-group-limited/group"+t.Tutorials._generateUrl(),element:"#widget-panel-tabs .button .group",placement:"bottom",backdrop:!1,title:"Group structure graph",content:"Unravel corporate relationships. Rapidly identify parent and subsidiary companies, both domestic and foreign. Avoid conflicts of interest, find cross-sell opportunities and quickly learn who the ultimate beneficiary of any transaction is."}),t.Tutorial.addStep({path:"/director/903553409/gordon-james-donald-raw"+t.Tutorials._generateUrl(),orphan:!0,backdrop:!1,title:"Director profiles",content:'Get the backstory on every company director with full professional history. See who they are connected to and quickly build a pre-meeting profile. <strong>Subscribers get to see full DOB and director service address. <a href="/plans?ref=intro-tutorial">See plans</a></strong>'}),t.Tutorial.addStep({path:"/director/903553409/gordon-james-donald-raw"+t.Tutorials._generateUrl(),element:"#top-bar-holder .logo",placement:"bottom",title:"Dashboard",content:"The ever-present DueDil logo in the top left of your window takes you back to the Dashboard, your homepage on DueDil."}),r?t.Tutorial.restart():t.Tutorial.start()}},_findnewcustomers:{_run:function(n,r,i,s){var o=this,u={name:"_intro._findnewcustomers",onEnd:function(e){window.location="/plans?ref=new-customers-tutorial-end"}};t.Tutorial=new Tour(e.extend(u,n)),t.Tutorial.addStep({path:"/"+t.Tutorials._generateUrl(),element:"#widget_linkedinnetworkwidgetdashboard",placement:"left",title:"Sync LinkedIn",content:"Sync your LinkedIn account and we'll show you who you know along with their companies. Utilise your connections to find new leads and build relationships."}),t.Tutorial.addStep({path:"/search/companies"+t.Tutorials._generateUrl(),orphan:!0,backdrop:!1,title:"Advanced search",content:'Advanced search gives you the powerful ability to find new customers and research your market. Tailor your search with hundreds of financial and legal criteria, before exporting data to your CRM to turn prospects into meetings. <strong>Advanced search is only available on certain plans. <a href="/plans?ref=new-customers-tutorial">See plans</a></strong>'}),t.Tutorial.addStep({path:"/search/companies"+t.Tutorials._generateUrl(),element:"#search-side-bar",placement:"right",title:"Use filters to find prospects",content:"Let's say you have a new product that you want to sell to Chemists in the Greater Manchester area. Using advanced filters you can easily find ideal businesses to sell to.",onNext:function(e){var n=this,r=e._steps[e._current+1].element;t.FacetedBrowser.Tutorial._scrollSidebarElementIntoView(r,e)}}),t.Tutorial.addStep({path:"/search/companies"+t.Tutorials._generateUrl(),element:'.facet[data-facet-id="total_assets"]',placement:"right",title:"Financial filters",content:'You might want to target smaller independent stores. If youâre a Prospecting or Enterprise subscriber you can use any combination of over 40 search filters. For example, you could refine your results by searching for companies with no more than Â£250,000 in Total Assets using the financial filters. <strong>Advanced filters are available to subscribers. <a href="/plans?ref=new-customers-tutorial">See plans</a></strong>',onShown:function(){t.Tutorial.disableNextNavigation(),t.FacetedBrowser.Facets.total_assets._open(function(e){t.Tutorial.enableNextNavigation()})}}),t.Tutorial.addStep({path:"/search/companies"+t.Tutorials._generateUrl(),element:'#top-facets [data-id="location"]',placement:"right",title:"Location search",content:"Location search allows you to precisely pinpoint local businesses. Look up any location in the UK by county, city, town or postcode.",onPrev:function(e){var n=this,r=e._steps[e._current-1].element;t.FacetedBrowser.Tutorial._scrollSidebarElementIntoView(r,e)}}),t.Tutorial.addStep({path:"/search/companies"+t.Tutorials._generateUrl(),element:"#MapView-button",placement:"bottom",title:"Map view",content:"Visualise your results on the map to locate your potential prospects."}),t.Tutorial.addStep({path:"/search/companies"+t.Tutorials._generateUrl(),element:"#VisualSummaryView-button",placement:"bottom",title:"Chart view",content:'Also included in some plans is the interactive chart feature, which is sometimes a better way of visualising a long list of results. Chart view lets you easily compare companies, so you can see which leads you should prioritise by adding and sorting by relevant financial metrics. <strong>Comparison charts are available to subscribers. <a href="/plans?ref=new-customers-tutorial">See plans</a></strong>'}),t.Tutorial.addStep({path:"/search/companies"+t.Tutorials._generateUrl(),element:"#save-export-group",placement:"bottom",title:"Save and export (coming soon)",content:'Save your search results and come back anytime to further analyse your lists. When you\'re ready, export detailed company records on your leads for use in your CRM software or Excel and start converting prospects into sales. <strong>Save and export are exclusive to subscribers. <a href="/plans?ref=new-customers-tutorial">See plans</a></strong>'}),t.Tutorial.addStep({path:"/"+t.Tutorials._generateUrl(),element:"#top-bar-holder .logo",placement:"bottom",title:"Dashboard",content:"The ever-present DueDil logo in the top left of your window takes you back to the Dashboard, your homepage on DueDil."}),r?t.Tutorial.restart():t.Tutorial.start()}},_conductcreditcheck:{_run:function(n,r,i,s){var o=this,u={name:"_intro._conductcreditcheck",onEnd:function(e){window.location="/plans?ref=credit-check-tutorial-end"}};t.Tutorial=new Tour(e.extend(u,n)),t.Tutorial.addStep({path:"/"+t.Tutorials._generateUrl(),element:"#widget_dashboardactivitywidget",placement:"top",title:"Activity feed",content:"Follow companies to keep on top of changes and get early warning signs so you can take appropriate action. Receive updates on changes to credit scores, newly filed documents and new director appointments or resignations. You will also receive email alerts notifying you of changes to your portfolio."}),t.Tutorial.addStep({path:"/company/00445790/tesco-plc/documents"+t.Tutorials._generateUrl(),element:"#widget-panel-tabs .button .documents",placement:"bottom",backdrop:!1,title:"Companies House documents",content:'Download official Companies House filings to review original accounting data and authenticate director and shareholder details. Documents are updated daily and filings will be available on DueDil within 24 hours of being placed on public record. <strong>Subscribers receive inclusive credits for documents. <a href="/plans?ref=credit-check-tutorial">See plans</a></strong>'}),t.Tutorial.addStep({path:"/company/00445790/tesco-plc/documents"+t.Tutorials._generateUrl(),element:"#widget_ratioswidget",placement:"left",title:"Accounting ratios",content:"Analyse performance and compare a company against its peers with more than a dozen profitability and solvency ratios. Use the Liquidity ratio to to determine a company's ability to pay off its short-terms debt or Return On Capital Employed (ROCE) to compare profitability, for example."}),t.Tutorial.addStep({path:"/company/00445790/tesco-plc/risk"+t.Tutorials._generateUrl(),element:"#widget-panel-tabs .button .risk",placement:"bottom",backdrop:!1,title:"Credit reports",content:"Avoid bad debt with DueDil's comprehensive credit reports. Get an in-depth credit assessment and insight into every aspect of a company's operation, including current credit rating, credit limit and CCJs. <strong>Subscribers receive inclusive credits for credit reports. <a href=\"/plans?ref=credit-check-tutorial\">See plans</a></strong>"}),t.Tutorial.addStep({path:"/company/00445790/tesco-plc/people"+t.Tutorials._generateUrl(),element:"#widget-panel-tabs .button .people",placement:"bottom",backdrop:!1,title:"Directors and secretaries",content:"Find out more about the people behind the company and know who you're dealing with before you approach them. All current and previous appointments are displayed, along with title and length of appointment."}),t.Tutorial.addStep({path:"/company/00445790/tesco-plc/people"+t.Tutorials._generateUrl(),element:"#widget_shareholdingswidget_people",placement:"left",title:"Company shareholders",content:"Verify a company's registered shareholders with ownership percentages."}),t.Tutorial.addStep({path:"/company/00445790/tesco-plc/group"+t.Tutorials._generateUrl(),element:"#widget-panel-tabs .button .group",placement:"bottom",backdrop:!1,title:"Group structure graph",content:"Satisfy regulatory demands and avoid conflicts of interest when dealing with potential new clients. Understand the ownership and subsidiary structure of the company you're dealing with and learn who the ultimate beneficiary of any transaction is."}),t.Tutorial.addStep({path:"/director/918156127/jonathan-mark-lloyd"+t.Tutorials._generateUrl(),orphan:!0,backdrop:!1,title:"Director profiles",content:'Get the backstory on every company director with full professional history. See who they are connected to and if there is anything in their background that might influence your decision. <strong>Subscribers get to see full DOB and director service address. <a href="/plans?ref=credit-check=tutorial">See plans</a></strong>'}),r?t.Tutorial.restart():t.Tutorial.start()}},_scopeoutcompetition:{_run:function(n,r,i,s){var o=this,u={name:"_intro._scopeoutcompetition",backdrop:!1,onEnd:function(e){window.location="/plans?ref=scope-competition-tutorial-end"}};t.Tutorial=new Tour(e.extend(n,u)),t.Tutorial.addStep({path:"/search/companies"+t.Tutorials._generateUrl(),orphan:!0,backdrop:!1,title:"Advanced search",content:'This is the portal to DueDil\'s most advanced and most powerful search functions. <strong>Advanced search is only available on certain plans. <a href="/plans?ref=competition-tutorial">See plans</a></strong>'}),t.Tutorial.addStep({path:"/search/companies"+t.Tutorials._generateUrl(),element:'#top-facets [data-facet-id="location"]',placement:"right",title:"Location-based search",content:"Let's say you're in the recruitment sector, based in London and looking to size up the competition. Our intelligent location-based search means you can search for companies within a specific region, county, city, postcode, urban area, post town and district ward.",onNext:function(e){var n=this,r=e._steps[e._current+1].element;t.FacetedBrowser.Tutorial._scrollSidebarElementIntoView(r,e)}}),t.Tutorial.addStep({path:"/search/companies"+t.Tutorials._generateUrl(),element:'#facets [data-facet-id="keywords"]',placement:"right",title:"Keywords",content:"Driven by DueDil's proprietary algorithms, keywords accurately identify the industry or part of the industry youâre seeking when standard industry classifications are too vague.",onNext:function(e){var n=this,r=e._steps[e._current+1].element;t.FacetedBrowser.Tutorial._scrollSidebarElementIntoView(r,e),t.FacetedBrowser.Facets.keywords._close()},onShown:function(e){t.Tutorial.disableNextNavigation(),t.FacetedBrowser.Facets.keywords._open(function(e){t.Tutorial.enableNextNavigation()})},onPrev:function(e){t.FacetedBrowser.Facets.keywords._close()}}),t.Tutorial.addStep({path:"/search/companies"+t.Tutorials._generateUrl(),element:'#facets [data-facet-id="status"]',placement:"right",title:"Status",content:"Choose to view all companies in your results, or just the ones currently active. The grey numbers in brackets show how many results fall into each category before you refine your search results.",onNext:function(e){var n=this,r=e._steps[e._current+1].element;t.FacetedBrowser.Tutorial._scrollSidebarElementIntoView(r,e)},onPrev:function(e){var n=this,r=e._steps[e._current-1].element;t.FacetedBrowser.Tutorial._scrollSidebarElementIntoView(r,e)}}),t.Tutorial.addStep({path:"/search/companies"+t.Tutorials._generateUrl(),element:'#facets [data-facet-id="gross_profit"]',placement:"right",title:"Gross Profit",content:'Certain plans give you access to the full range of over 40 search filters. The Gross Profit histogram allows you to narrow down results to include only the big players. The blue bars show reported profit figures across the current selection. You can refine your results by moving the slider or by entering new limits in the range boxes. No need to type number in full - the system will recognise ".5m", "Â£500k", "500k" or "500,000". <a class="bold" href="/plans?ref=scope-competition-tutorial">See Plans</a>',onNext:function(e){var n=this,r=e._steps[e._current+1].element;t.FacetedBrowser.Tutorial._scrollSidebarElementIntoView(r,e),t.FacetedBrowser.Facets.gross_profit._close()},onShown:function(e){t.Tutorial.disableNextNavigation(),t.FacetedBrowser.Facets.gross_profit._open(function(e){t.Tutorial.enableNextNavigation()})},onPrev:function(e){var n=this,r=e._steps[e._current-1].element;t.FacetedBrowser.Tutorial._scrollSidebarElementIntoView(r,e),t.FacetedBrowser.Facets.gross_profit._close()}}),t.Tutorial.addStep({path:"/search/companies"+t.Tutorials._generateUrl(),element:"#VisualSummaryView-button",placement:"bottom",title:"Chart",content:'Also included in some plans is the interactive chart feature, which is sometimes a better way of visualising a long list of results. Use both Bar Charts and Bubble Charts to compare companies by multiple search parameters, allowing you to see which competitors are performing better than others. <a class="bold" href="/plans?ref=scope-competition-tutorial">See Plans</a>'}),t.Tutorial.addStep({path:"/search/companies"+t.Tutorials._generateUrl(),element:"#MapView-button",placement:"bottom",title:"Map",content:"When sizing up the competition itâs important to know where they are. DueDilâs map view instantly shows where the companies in your search results can be found. Looking into the local competition? Search by Postcode Area.",onShown:function(t){e("#MapView-button").trigger("click")}}),t.Tutorial.addStep({path:"/company/00445790/tesco-plc"+t.Tutorials._generateUrl(),orphan:!0,title:"Full company profile",content:"Here you can download original documents and credit reports as well as learning more about the companyâs corporate structure, shareholders, directors and more."}),t.Tutorial.addStep({path:"/"+t.Tutorials._generateUrl(),element:"#top-bar-holder .logo",placement:"bottom",title:"Dashboard",content:"The ever-present DueDil logo in the top left of your window takes you back to the Dashboard, your homepage on DueDil."}),t.Tutorial.addStep({path:"/"+t.Tutorials._generateUrl(),element:"#dashboard .large-tabs li:eq(1)",placement:"bottom",title:"Follows",content:"Manage your portfolio here. Create custom lists and discreetly monitor competitors, suppliers and customers. You will also receive email alerts notifying you of updates to your portfolio."}),r?t.Tutorial.restart():t.Tutorial.start()}},_conductcompliancecheck:{_run:function(n,r,i,s){var o=this,u={name:"_intro._conductcompliancecheck",onEnd:function(e){window.location="/plans?ref=compliance-tutorial-end"}};t.Tutorial=new Tour(e.extend(u,n)),t.Tutorial.addStep({path:"/"+t.Tutorials._generateUrl(),orphan:!0,title:"Dashboard",content:"This is the start point for any search on DueDil. We'll see later how this area of the site acts as a repository for compliance files on companies, individuals and groups thereof."}),t.Tutorial.addStep({path:"/company/01170825/glencore-uk-ltd"+t.Tutorials._generateUrl(),orphan:!0,title:"Company profile",content:"The Glencore IPO in May 2011 meant 100s of hours of compliance research for those behind the scenes. Letâs see what we can achieve with DueDil in a few minutes."}),t.Tutorial.addStep({path:"/company/01170825/glencore-uk-ltd"+t.Tutorials._generateUrl(),element:"#widget-panel-tabs .button .vitals",placement:"bottom",backdrop:!1,title:"Company vitals",content:"This is a quick-reference summary which includes headline indicators of a companyâs financial health and basic registration information."}),t.Tutorial.addStep({path:"/company/01170825/glencore-uk-ltd/documents"+t.Tutorials._generateUrl(),element:"#widget-panel-tabs .button .documents",placement:"bottom",backdrop:!1,title:"Documents",content:"The 'Documents' tab is an important tool to cross-check registration details, financial returns and directors details. Here users can download original filings as submitted to Companies House. Downloads are available in PDF and in CSV formats."}),t.Tutorial.addStep({path:"/company/01170825/glencore-uk-ltd/financials"+t.Tutorials._generateUrl(),element:"#widget-panel-tabs .button .financials",placement:"bottom",backdrop:!1,title:"Financials",content:"The 'Financials' tab contains over 40 in-depth financial indicators. They constitute a comprehensive diagnosis of a company's financial health, covering up to 20 years of records. Download these in CSV format to manipulate in Excel or other programs."}),t.Tutorial.addStep({path:"/company/01170825/glencore-uk-ltd/risk"+t.Tutorials._generateUrl(),element:"#widget-panel-tabs .button .risk",placement:"bottom",backdrop:!1,title:"Credit Risk",content:"DueDil's credit reports incorporate a credit score informed by factors such as longevity, debtor days, County Court Judgments against the business or changes in the company's credit limit. Download a comprehensive PDF report and save it locally or share with colleagues."}),t.Tutorial.addStep({path:"/company/01170825/glencore-uk-ltd/people"+t.Tutorials._generateUrl(),element:"#widget-panel-tabs .button .people",placement:"bottom",backdrop:!1,title:"People",content:"Compliance-checking a company is just as much about understanding the people behind a business. The People tab lists current and previous directors of a company. Analysing individual director profiles lists past and present directorships so users can learn more about a director's other business interests and business history. Previous directors listed include Marc Rich, a controversial figure once convicted of tax evasion, wire fraud, racketeering, and trading with Iran in the US."}),t.Tutorial.addStep({path:"/company/01170825/glencore-uk-ltd/group"+t.Tutorials._generateUrl(),element:"#widget-panel-tabs .button .group",placement:"bottom",backdrop:!1,title:"Group structure graph",content:"The group graph provides an interactive visualisation of complex relationships between parent and subsidiary companies in the Glencore 'family', including entities registered overseas. For example Glencore International Ag is based in Switzerland, an opaque business environment, and might bear further scrutiny."}),t.Tutorial.addStep({path:"/company/01170825/glencore-uk-ltd/group"+t.Tutorials._generateUrl(),element:"#follows-form",placement:"bottom",title:"Follows tab",content:"Clicking on the 'Follows' tab of the Dashboard brings up the companies you're following. You can view these all together or by group; you can also add to them whenever you like. Each week we'll send you an email with any updates to the companies and directors you're following. Don't worry, we won't let any company or user know who you're following, so your research is completely discreet."}),t.Tutorial.addStep({path:"/"+t.Tutorials._generateUrl(),element:"#top-bar-holder .logo",placement:"bottom",title:"Dashboard",content:"The ever-present DueDil logo in the top left of your window takes you back to the Dashboard, your homepage on DueDil."}),t.Tutorial.addStep({path:"/follows"+t.Tutorials._generateUrl(),orphan:!0,backdrop:!1,title:"Follows",content:"Follows shows all the companies and directors you're following. You can view these all together or by group; you can also add to them whenever you like. Each week we'll send you an email with any updates to the companies and directors you're following. Don't worry, we won't let any company or user know who you're following, so your research is completely discreet."}),r?t.Tutorial.restart():t.Tutorial.start()}}}},t.Tutorials={_init:function(e){var n=this;this.state=e||{},this.currentTour=t.Tutorial,this.tourOptions={debug:!1,backdrop:!0,reflex:!1,keyboard:!1,template:"<div class='popover'><div class='arrow'></div><h3 class='popover-title'></h3><div class='popover-content'></div><div class='popover-navigation'><div class='btn-group'><button class='btn btn-sm btn-default' data-role='prev'>&laquo; Prev</button><button class='btn btn-sm btn-default' data-role='next'>Next &raquo;</button></div><button class='btn btn-sm btn-default' data-role='end'>End tour</button></div></div>"},this.end_redirect=n._setRedirect(),n._isTutorialInProgress()&&n._resumeTutorial(),n._isTutorialInContinuation()&&n._continueTutorial(),n._bindEvents()},_bindEvents:function(){var t=this;e(".start-tutorial").on("click",function(){var n=e(this),r=n.data("course"),i=n.data("class"),s=n.data("step");t._startTutorial(r,i,t.tourOptions,!0,0)});return},_setRedirect:function(){var e=this;return typeof e.state.end_redirect=="undefined"?!1:e.state.end_redirect},_generateUrl:function(){var e=this,n=t.Tutorial._options.name,r=[],i,s,o;r=n.split("."),i=r[0],s=r[1];var o="?tutorial=1&tutorial_course="+i+"&tutorial_class="+s;return o},_isTutorialInProgress:function(){var e=this;return typeof e.state.tutorial=="undefined"||typeof e.state.tutorial_course=="undefined"||typeof e.state.tutorial_class=="undefined"?!1:!0},_resumeTutorial:function(){var e=this;e._startTutorial(e.state.tutorial_course,e.state.tutorial_class,e.tourOptions,!1,0);return},_isTutorialInContinuation:function(){var e=this;return e._isTutorialInProgress()&&typeof e.state.tutorial_step!="undefined"?!0:!1},_continueTutorial:function(){var e=this;e._startTutorial(e.state.tutorial_course,e.state.tutorial_class,e.tourOptions,!1,this.state.tutorial_step);return},_startTutorial:function(e,n,r,i,s){var o=this;t.Courses[e][n]._run(r,i,s,o.end_redirect);return}},Tour.prototype.step_backdrop_interval=null,Tour.prototype.step_element_height=null,Tour.prototype.step_element_position=null,Tour.prototype.$overlayBackground=null,Tour.prototype.$overlayElement=null,Tour.prototype.disableNextNavigation=function(){e(".popover-navigation").find("*[data-role=next]").addClass("disabled")},Tour.prototype.enableNextNavigation=function(){e(".popover-navigation").find("*[data-role=next]").removeClass("disabled")},Tour.prototype._repositionTip=function(t){var n,r;n=e(t.element),r=n.data("bs.popover")?n.data("bs.popover").tip():n.data("popover").tip(),this._reposition(r,t)},Tour.prototype._getDocumentHeight=function(){var e=document;return Math.max(Math.max(e.body.scrollHeight,e.documentElement.scrollHeight),Math.max(e.body.offsetHeight,e.documentElement.offsetHeight),Math.max(e.body.clientHeight,e.documentElement.clientHeight))},Tour.prototype._hideBackdrop=function(){var t=this;if(this.backdrop.overlay===null)return;return this.backdrop.$element&&this._hideOverlayElement(),e(".tour-step-backdrop").remove(),t.$overlayBackground=null,this._hideOverlay()},Tour.prototype._showBackdrop=function(t){var n=this;n._isLastStep()?e("body").addClass("tutorial-last-step"):e("body").hasClass("tutorial-last-step")&&e("body").removeClass("tutorial-last-step");if(this.backdrop.overlay!==null)return;this._showOverlay(),clearInterval(n.step_backdrop_interval);if(t!=null)return n._monitorElementChanges(t),this._showOverlayElement(t)},Tour.prototype._isLastStep=function(){var e=this;return t.Tutorial._current!==t.Tutorial._steps.length-1?!1:!0},Tour.prototype._monitorElementChanges=function(n){var r=this;r.step_element_height=e(n).outerHeight(),r.step_element_position=e(n).offset().top,setTimeout(function(){r.step_backdrop_interval=setInterval(function(){var i=e(n).outerHeight(),s=e(n).offset().top;(i!==r.step_element_height||s!==r.step_element_position)&&r._showOverlayElement(n),t.Tutorial.ended()&&clearInterval(r.step_backdrop_interval)},200)},50)},Tour.prototype._showOverlayElement=function(t){var n=this;n.$overlayElement=e(t),n.$overlayBackground={top:e(".tour-step-backdrop-top").length>0?e(".tour-step-backdrop-top"):e("<div />").addClass("tour-step-backdrop-top"),right:e(".tour-step-backdrop-right").length>0?e(".tour-step-backdrop-right"):e("<div />").addClass("tour-step-backdrop-right"),bottom:e(".tour-step-backdrop-bottom").length>0?e(".tour-step-backdrop-bottom"):e("<div />").addClass("tour-step-backdrop-bottom"),left:e(".tour-step-backdrop-left").length>0?e(".tour-step-backdrop-left"):e("<div />").addClass("tour-step-backdrop-left"),element:e(".tour-step-backdrop-element").length>0?e(".tour-step-backdrop-element"):e("<div />").addClass("tour-step-backdrop-element")},elOffset=n.$overlayElement.offset(),n.backdrop.length>0&&n.backdrop.remove(),n.$overlayBackground.top.css({top:0,right:0,left:0,height:elOffset.top}),n.$overlayBackground.right.css({top:elOffset.top,right:0,left:elOffset.left+n.$overlayElement.outerWidth(),height:n.$overlayElement.outerHeight()}),n.$overlayBackground.bottom.css({top:elOffset.top+n.$overlayElement.outerHeight(),right:0,left:0,bottom:0,height:n._getDocumentHeight()-(elOffset.top+n.$overlayElement.outerHeight())}),n.$overlayBackground.left.css({top:elOffset.top,left:0,width:elOffset.left,height:n.$overlayElement.outerHeight()}),n.$overlayBackground.element.css({top:elOffset.top,left:elOffset.left,width:n.$overlayElement.outerWidth(),height:n.$overlayElement.outerHeight()}),e.each(n.$overlayBackground,function(t,n){n.addClass("tour-step-backdrop").appendTo(e("body"))})},Tour.prototype._scrollIntoView=function(t){var n=this;e("html, body").stop().animate({scrollTop:Math.ceil(t.offset().top-e(window).height()/2)},600)},Tour.prototype.end=function(){var t,n,r=this;return t=function(t){e(document).off("click.tour."+r._options.name),e(document).off("keyup.tour."+r._options.name),e(window).off("resize.tour."+r._options.name),r.setState("end","yes");if(r._options.onEnd!=null)return r._options.onEnd(r)},n=this.hideStep(this._current),clearInterval(r.step_backdrop_interval),r._clearOverlayElement(),this._callOnPromiseDone(n,t)},Tour.prototype._clearOverlayElement=function(){var t=this;e(".tour-step-backdrop").remove(),t.$overlayBackground=null}}),define("common/Duedil.user",["jquery","common/Duedil","jquery-cookie"],function(e,t){t.user={init:function(){logged_in&&e.cookies.del("clicktrack")}},e(function(){t.user.init()})}),define("common/Duedil.widgets",["jquery","common/Duedil"],function(e,t){e.fn.tickList=function(t,n){function o(e){for(var n in e)typeof t[n]=="undefined"?t[n]=e[n]:delete t[n];a()}function u(n){e.extend(t,n),a()}function a(){r.removeClass(n).each(function(){var r=e(this),i=r.data("state"),s=!0;for(var o in i)if(i[o]!=t[o]){s=!1;break}s&&r.addClass(n)})}var r=this;if(typeof t=="string"){var i=n;n=t,t=n}n=n||"selected";var s={};return this.each(function(){var r=e(this),i=r.data("state-toggle")||!1,a=r.data("state");r.hasClass(n)&&e.extend(s,a),i?r.click(function(){return o(a),e(this).trigger("update",t),!1}):r.click(function(){return u(a),e(this).trigger("update",t),!1})}),t||(t=s),a(),this.getListState=function(){return t},this},t.widgets={active:null,init:function(n,r){var i=r||n.namespace,s=[];return t.log("Init widgets for",n.guid()),e("div.widget").each(function(){var r=e(this).attr("id");r&&r.indexOf("widget_")!==-1&&(r=r.replace("widget_","")),t.widgets[i][r]&&typeof t.widgets[i][r].init=="function"&&(t.widgets[i][r].init(n),s.push(r)),e(".header .dropdown",this).on("click",function(){var t=e(this).parent(".header");e(this).hasClass("open")?t.css("z-index",t.data("old-z-index")):(t.data("old-z-index",t.css("z-index")),t.css("z-index",60))})}),t.hashScroller.init(),s},destroy:function(n,r){e(r).each(function(e,r){t.widgets[n][r]&&typeof t.widgets[n][r].destroy=="function"&&t.widgets[n][r].destroy()})},helpers:{dataTablesGroupRows:function(e,t,n){if(t.aiDisplay.length===0)return;var r=e[0].getElementsByTagName("td").length,i="",s="",o="",u="",a,f;for(f=0;f<e.length;f++)a=n?f:t._iDisplayStart+f,s=t.aoData[t.aiDisplay[a]]._aData[0],s!==i&&(o=document.createElement("tr"),u=document.createElement("td"),u.colSpan=r,u.className="separator",u.innerHTML=s,o.appendChild(u),e[f].parentNode.insertBefore(o,e[f]),i=s)},create_datatable:function(t,n,r,i){var i=i||"dt";return this.destroy_datatable(t,i),t[i]=e(n).dataTable(r)},destroy_datatable:function(e,n){var n=n||"dt";if(e[n]&&e[n].fnDestroy){try{e[n].fnDestroy()}catch(r){t.log("datatable removal err:",r)}e[n]=null}},buildConnections:function(e,t,n){var r=document.createDocumentFragment(),i,s,o,u=document.createElement("img"),a=t?e[t].values:e.people.values,f=a.length,l;for(l=0;l<f;l++){i=document.createElement("tr"),s=document.createElement("td"),o=document.createElement("div"),button=document.createElement("div"),o.className="avatar avatar-38";var c=a[l].pictureUrl||theme_path+"/images/default-avatar-small.png";u.setAttribute("src",c),u.setAttribute("width",38),u.setAttribute("height",38),o.appendChild(u.cloneNode(!0)),s.appendChild(o.cloneNode(!0)),i.appendChild(s.cloneNode(!0)),s=document.createElement("td");var h=!1;switch(a[l].distance){case 1:h="1st";break;case 2:h="2nd";break;case 3:h="3rd"}var p='<br /><span class="degree">'+(h?h+" degree connection":"connection unknown")+"</span>",d=a[l].headline;if(a[l].positions&&a[l].positions.values&&a[l].positions.values.length>0)for(var v in a[l].positions.values){var m=a[l].positions.values[v];if(m.isCurrent){var g=m.org&&m.org!==n?m.org:!1;d=m.title+" at ",g&&(d+="<a href='/company/"+g+"'>"),d+=m.company.name,g&&(d+="</a>"),m.company&&m.company.creditIndicator&&(d+=m.company.creditIndicator)}break}var y=a[l].duedilId?"<input type='hidden' class='duedilId' value='"+a[l].duedilId+"'>":"";y+=a[l].id?"<input type='hidden' class='linkedinId' value='"+a[l].id+"'>":"",y+=a[l].invited?"<input type='hidden' class='invited' value='"+a[l].invited+"'>":"";if(a[l].lastName==="private")s.innerHTML='Hidden User<br><span class="headline">Restricted LinkedIn profile</span>'+p;else{var b='<strong><span class="linkedin-firstname">'+a[l].firstName+"</span> "+a[l].lastName+"</strong>";typeof a[l].publicProfileUrl!="undefined"&&(b='<a href="'+a[l].publicProfileUrl+'" target="_blank">'+b+"</a>"),s.innerHTML=b+'<br class="linkedin-invite-marker"><span class="headline">'+d+"</span>"+p}s.innerHTML+=y,i.appendChild(s.cloneNode(!0)),r.appendChild(i)}return r}},widget:function(e,n){return n||(n=t.profile.active.widgetNamespace),n?(e=e.replace(/^widget_/,""),t.widgets[n][e]||null):null}}}),function(e){define("Highcharts",["jquery"],function(){return function(){return function(){function e(e,t){var n;e||(e={});for(n in t)e[n]=t[n];return e}function t(){for(var e=0,t=arguments,n=t.length,r={};e<n;e++)r[t[e++]]=t[e];return r}function n(e,t){return parseInt(e,t||10)}function r(e){return typeof e=="string"}function i(e){return typeof e=="object"}function s(e){return Object.prototype.toString.call(e)==="[object Array]"}function o(e){return typeof e=="number"}function u(e){return W.log(e)/W.LN10}function a(e){return W.pow(10,e)}function f(e,t){for(var n=e.length;n--;)if(e[n]===t){e.splice(n,1);break}}function l(e){return e!==R&&e!==null}function c(e,t,n){var s,o;if(r(t))l(n)?e.setAttribute(t,n):e&&e.getAttribute&&(o=e.getAttribute(t));else if(l(t)&&i(t))for(s in t)e.setAttribute(s,t[s]);return o}function h(e){return s(e)?e:[e]}function p(){var e=arguments,t,n,r=e.length;for(t=0;t<r;t++)if(n=e[t],typeof n!="undefined"&&n!==null)return n}function d(t,n){nt&&n&&n.opacity!==R&&(n.filter="alpha(opacity="+n.opacity*100+")"),e(t.style,n)}function v(t,n,r,i,s){return t=U.createElement(t),n&&e(t,n),s&&d(t,{padding:0,border:Et,margin:0}),r&&d(t,r),i&&i.appendChild(t),t}function m(t,n){var r=function(){};return r.prototype=new t,e(r.prototype,n),r}function g(e,t,r,i){var s=dt.lang,o=e;t===-1?(t=(e||0).toString(),e=t.indexOf(".")>-1?t.split(".")[1].length:0):e=isNaN(t=Q(t))?2:t;var t=e,r=r===void 0?s.decimalPoint:r,i=i===void 0?s.thousandsSep:i,s=o<0?"-":"",e=String(n(o=Q(+o||0).toFixed(t))),u=e.length>3?e.length%3:0;return s+(u?e.substr(0,u)+i:"")+e.substr(u).replace(/(\d{3})(?=\d)/g,"$1"+i)+(t?r+Q(o-e).toFixed(t).slice(2):"")}function y(e,t){return Array((t||2)+1-String(e).length).join(0)+e}function b(e,t,n,r){var i,n=p(n,1);i=e/n,t||(t=[1,2,2.5,5,10],r&&r.allowDecimals===!1&&(n===1?t=[1,2,5,10]:n<=.1&&(t=[1/n])));for(r=0;r<t.length;r++)if(e=t[r],i<=(t[r]+(t[r+1]||t[r]))/2)break;return e*=n,e}function w(e,t){var n=t||[[xt,[1,2,5,10,20,25,50,100,200,500]],[Tt,[1,2,5,10,15,30]],[Nt,[1,2,5,10,15,30]],[Ct,[1,2,3,4,6,8,12]],[kt,[1,2]],[Lt,[1,2]],[At,[1,2,3,4,6]],[Ot,null]],r=n[n.length-1],i=yt[r[0]],s=r[1],o;for(o=0;o<n.length;o++)if(r=n[o],i=yt[r[0]],s=r[1],n[o+1]&&e<=(i*s[s.length-1]+yt[n[o+1][0]])/2)break;return i===yt[Ot]&&e<5*i&&(s=[1,2,5]),i===yt[Ot]&&e<5*i&&(s=[1,2,5]),n=b(e/i,s),{unitRange:i,count:n,unitName:r[0]}}function E(t,n,r,i){var s=[],o={},u=dt.global.useUTC,a,f=new Date(n),n=t.unitRange,l=t.count;n>=yt[Tt]&&(f.setMilliseconds(0),f.setSeconds(n>=yt[Nt]?0:l*V(f.getSeconds()/l))),n>=yt[Nt]&&f[Ft](n>=yt[Ct]?0:l*V(f[_t]()/l)),n>=yt[Ct]&&f[It](n>=yt[kt]?0:l*V(f[Dt]()/l)),n>=yt[kt]&&f[qt](n>=yt[At]?1:l*V(f[Ht]()/l)),n>=yt[At]&&(f[Rt](n>=yt[Ot]?0:l*V(f[Bt]()/l)),a=f[jt]()),n>=yt[Ot]&&(a-=a%l,f[Ut](a)),n===yt[Lt]&&f[qt](f[Ht]()-f[Pt]()+p(i,1)),i=1,a=f[jt]();for(var c=f.getTime(),h=f[Bt](),d=f[Ht](),f=u?0:(864e5+f.getTimezoneOffset()*6e4)%864e5;c<r;)s.push(c),n===yt[Ot]?c=Mt(a+i*l,0):n===yt[At]?c=Mt(a,h+i*l):!!u||n!==yt[kt]&&n!==yt[Lt]?(c+=n*l,n<=yt[Ct]&&c%yt[kt]===f&&(o[c]=kt)):c=Mt(a,h,d+i*l*(n===yt[kt]?1:7)),i++;return s.push(c),s.info=e(t,{higherRanks:o,totalRange:n*l}),s}function S(){this.symbol=this.color=0}function x(e,t){var n=e.length,r,i;for(i=0;i<n;i++)e[i].ss_i=i;e.sort(function(e,n){return r=t(e,n),r===0?e.ss_i-n.ss_i:r});for(i=0;i<n;i++)delete e[i].ss_i}function T(e){for(var t=e.length,n=e[0];t--;)e[t]<n&&(n=e[t]);return n}function N(e){for(var t=e.length,n=e[0];t--;)e[t]>n&&(n=e[t]);return n}function C(e,t){for(var n in e)e[n]&&e[n]!==t&&e[n].destroy&&e[n].destroy(),delete e[n]}function k(e){pt||(pt=v(wt)),e&&pt.appendChild(e),pt.innerHTML=""}function L(e,t){var n="Highcharts error #"+e+": www.highcharts.com/errors/"+e;if(t)throw n;z.console&&console.log(n)}function A(e){return parseFloat(e.toPrecision(14))}function O(e,t){mt=p(e,t.animation)}function M(){var e=dt.global.useUTC,t=e?"getUTC":"get",n=e?"setUTC":"set";Mt=e?Date.UTC:function(e,t,n,r,i,s){return(new Date(e,t,p(n,1),p(r,0),p(i,0),p(s,0))).getTime()},_t=t+"Minutes",Dt=t+"Hours",Pt=t+"Day",Ht=t+"Date",Bt=t+"Month",jt=t+"FullYear",Ft=n+"Minutes",It=n+"Hours",qt=n+"Date",Rt=n+"Month",Ut=n+"FullYear"}function _(){}function D(e,t,n){this.axis=e,this.pos=t,this.type=n||"",this.isNew=!0,n||this.addLabel()}function P(e,t){return this.axis=e,t&&(this.options=t,this.id=t.id),this}function H(e,t,n,r,i){var s=e.chart.inverted;this.axis=e,this.isNegative=n,this.options=t,this.x=r,this.stack=i,this.alignOptions={align:t.align||(s?n?"left":"right":"center"),verticalAlign:t.verticalAlign||(s?"middle":n?"bottom":"top"),y:p(t.y,s?4:n?14:-6),x:p(t.x,s?n?-6:6:0)},this.textAlign=t.textAlign||(s?n?"right":"left":"center")}function B(){this.init.apply(this,arguments)}function j(e,t){var r=t.borderWidth,i=t.style,s=t.shared,o=n(i.padding);this.chart=e,this.options=t,i.padding=0,this.crosshairs=[],this.currentY=this.currentX=0,this.tooltipIsHidden=!0,this.label=e.renderer.label("",0,0,null,null,null,t.useHTML,null,"tooltip").attr({padding:o,fill:t.backgroundColor,"stroke-width":r,r:t.borderRadius,zIndex:8}).css(i).hide().add(),at||this.label.shadow(t.shadow),this.shared=s}function F(e,t){var n=at?"":t.chart.zoomType;this.zoomX=/x/.test(n),this.zoomY=/y/.test(n),this.options=t,this.chart=e,this.init(e,t.tooltip)}function I(e){this.init(e)}function q(e,t){var n,r=e.series;e.series=null,n=Yt(dt,e),n.series=e.series=r;var r=n.chart,s=r.margin,s=i(s)?s:[s,s,s,s];this.optionsMarginTop=p(r.marginTop,s[0]),this.optionsMarginRight=p(r.marginRight,s[1]),this.optionsMarginBottom=p(r.marginBottom,s[2]),this.optionsMarginLeft=p(r.marginLeft,s[3]),this.runChartClick=(s=r.events)&&!!s.click,this.callback=t,this.isResizing=0,this.options=n,this.axes=[],this.series=[],this.hasCartesianSeries=r.showAxes,this.init(s)}var R,U=document,z=window,W=Math,X=W.round,V=W.floor,$=W.ceil,J=W.max,K=W.min,Q=W.abs,G=W.cos,Y=W.sin,Z=W.PI,et=Z*2/360,tt=navigator.userAgent,nt=/msie/i.test(tt)&&!z.opera,rt=U.documentMode===8,it=/AppleWebKit/.test(tt),st=/Firefox/.test(tt),ot=!!U.createElementNS&&!!U.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect,ut=st&&parseInt(tt.split("Firefox/")[1],10)<4,at=!ot&&!nt&&!!U.createElement("canvas").getContext,ft,lt=U.documentElement.ontouchstart!==R,ct={},ht=0,pt,dt,vt,mt,gt,yt,bt=function(){},wt="div",Et="none",St="rgba(192,192,192,"+(ot?1e-6:.002)+")",xt="millisecond",Tt="second",Nt="minute",Ct="hour",kt="day",Lt="week",At="month",Ot="year",Mt,_t,Dt,Pt,Ht,Bt,jt,Ft,It,qt,Rt,Ut,zt={};z.Highcharts={},vt=function(e,t,n){if(!l(t)||isNaN(t))return"Invalid date";var e=p(e,"%Y-%m-%d %H:%M:%S"),r=new Date(t),i,s=r[Dt](),o=r[Pt](),u=r[Ht](),a=r[Bt](),f=r[jt](),c=dt.lang,h=c.weekdays,t={a:h[o].substr(0,3),A:h[o],d:y(u),e:u,b:c.shortMonths[a],B:c.months[a],m:y(a+1),y:f.toString().substr(2,2),Y:f,H:y(s),I:y(s%12||12),l:s%12||12,M:y(r[_t]()),p:s<12?"AM":"PM",P:s<12?"am":"pm",S:y(r.getSeconds()),L:y(X(t%1e3),3)};for(i in t)e=e.replace("%"+i,t[i]);return n?e.substr(0,1).toUpperCase()+e.substr(1):e},S.prototype={wrapColor:function(e){this.color>=e&&(this.color=0)},wrapSymbol:function(e){this.symbol>=e&&(this.symbol=0)}},yt=t(xt,1,Tt,1e3,Nt,6e4,Ct,36e5,kt,864e5,Lt,6048e5,At,2592e6,Ot,31556952e3),gt={init:function(e,t,n){var t=t||"",r=e.shift,i=t.indexOf("C")>-1,s=i?7:3,o,t=t.split(" "),n=[].concat(n),u,a,f=function(e){for(o=e.length;o--;)e[o]==="M"&&e.splice(o+1,0,e[o+1],e[o+2],e[o+1],e[o+2])};i&&(f(t),f(n)),e.isArea&&(u=t.splice(t.length-6,6),a=n.splice(n.length-6,6));if(r<=n.length/s)for(;r--;)n=[].concat(n).splice(0,s).concat(n);e.shift=0;if(t.length)for(e=n.length;t.length<e;)r=[].concat(t).splice(t.length-s,s),i&&(r[s-6]=r[s-2],r[s-5]=r[s-1]),t=t.concat(r);return u&&(t=t.concat(u),n=n.concat(a)),[t,n]},step:function(e,t,n,r){var i=[],s=e.length;if(n===1)i=r;else if(s===t.length&&n<1)for(;s--;)r=parseFloat(e[s]),i[s]=isNaN(r)?e[s]:n*parseFloat(t[s]-r)+r;else i=t;return i}};var Wt=z.HighchartsAdapter,Xt=Wt||{},Vt=Xt.adapterRun,$t=Xt.getScript,Jt=Xt.each,Kt=Xt.grep,Qt=Xt.offset,Gt=Xt.map,Yt=Xt.merge,Zt=Xt.addEvent,en=Xt.removeEvent,tn=Xt.fireEvent,nn=Xt.washMouseEvent,rn=Xt.animate,sn=Xt.stop;Wt&&Wt.init&&Wt.init(gt);if(!Wt&&z.jQuery){var on=jQuery,$t=on.getScript,Vt=function(e,t){return on(e)[t]()},Jt=function(e,t){for(var n=0,r=e.length;n<r;n++)if(t.call(e[n],e[n],n,e)===!1)return n},Kt=on.grep,Gt=function(e,t){for(var n=[],r=0,i=e.length;r<i;r++)n[r]=t.call(e[r],e[r],r,e);return n},Yt=function(){var e=arguments;return on.extend(!0,null,e[0],e[1],e[2],e[3])},Qt=function(e){return on(e).offset()},Zt=function(e,t,n){on(e).bind(t,n)},en=function(e,t,n){var r=U.removeEventListener?"removeEventListener":"detachEvent";U[r]&&!e[r]&&(e[r]=function(){}),on(e).unbind(t,n)},tn=function(t,n,r,i){var s=on.Event(n),o="detached"+n,u;!nt&&r&&(delete r.layerX,delete r.layerY),e(s,r),t[n]&&(t[o]=t[n],t[n]=null),Jt(["preventDefault","stopPropagation"],function(e){var t=s[e];s[e]=function(){try{t.call(s)}catch(n){e==="preventDefault"&&(u=!0)}}}),on(t).trigger(s),t[o]&&(t[n]=t[o],t[o]=null),i&&!s.isDefaultPrevented()&&!u&&i(s)},nn=function(e){return e},rn=function(e,t,n){var r=on(e);t.d&&(e.toD=t.d,t.d=1),r.stop(),r.animate(t,n)},sn=function(e){on(e).stop()};on.extend(on.easing,{easeOutQuad:function(e,t,n,r,i){return-r*(t/=i)*(t-2)+n}});var un=on.fx,an=un.step;Jt(["cur","_default","width","height"],function(e,t){var n=an,r,i;e==="cur"?n=un.prototype:e==="_default"&&on.Tween&&(n=on.Tween.propHooks[e],e="set"),(r=n[e])&&(n[e]=function(n){return n=t?n:this,i=n.elem,i.attr?i.attr(n.prop,e==="cur"?R:n.now):r.apply(this,arguments)})}),an.d=function(e){var t=e.elem;if(!e.started){var n=gt.init(t,t.d,t.toD);e.start=n[0],e.end=n[1],e.started=!0}t.attr("d",gt.step(e.start,e.end,e.pos,t.toD))}}Xt={enabled:!0,align:"center",x:0,y:15,style:{color:"#666",fontSize:"11px",lineHeight:"14px"}},dt={colors:"#4572A7,#AA4643,#89A54E,#80699B,#3D96AE,#DB843D,#92A8CD,#A47D7C,#B5CA92".split(","),symbols:["circle","diamond","square","triangle","triangle-down"],lang:{loading:"Loading...",months:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),shortMonths:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),weekdays:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),decimalPoint:".",resetZoom:"Reset zoom",resetZoomTitle:"Reset zoom level 1:1",thousandsSep:","},global:{useUTC:!0,canvasToolsURL:"http://code.highcharts.com/2.2.5/modules/canvas-tools.js"},chart:{borderColor:"#4572A7",borderRadius:5,defaultSeriesType:"line",ignoreHiddenSeries:!0,spacingTop:10,spacingRight:10,spacingBottom:15,spacingLeft:10,style:{fontFamily:'"Lucida Grande", "Lucida Sans Unicode", Verdana, Arial, Helvetica, sans-serif',fontSize:"12px"},backgroundColor:"#FFFFFF",plotBorderColor:"#C0C0C0",resetZoomButton:{theme:{zIndex:20},position:{align:"right",x:-10,y:10}}},title:{text:"Chart title",align:"center",y:15,style:{color:"#3E576F",fontSize:"16px"}},subtitle:{text:"",align:"center",y:30,style:{color:"#6D869F"}},plotOptions:{line:{allowPointSelect:!1,showCheckbox:!1,animation:{duration:1e3},events:{},lineWidth:2,shadow:!0,marker:{enabled:!0,lineWidth:0,radius:4,lineColor:"#FFFFFF",states:{hover:{},select:{fillColor:"#FFFFFF",lineColor:"#000000",lineWidth:2}}},point:{events:{}},dataLabels:Yt(Xt,{enabled:!1,y:-6,formatter:function(){return this.y}}),cropThreshold:300,pointRange:0,showInLegend:!0,states:{hover:{marker:{}},select:{marker:{}}},stickyTracking:!0}},labels:{style:{position:"absolute",color:"#3E576F"}},legend:{enabled:!0,align:"center",layout:"horizontal",labelFormatter:function(){return this.name},borderWidth:1,borderColor:"#909090",borderRadius:5,navigation:{activeColor:"#3E576F",inactiveColor:"#CCC"},shadow:!1,itemStyle:{cursor:"pointer",color:"#3E576F",fontSize:"12px"},itemHoverStyle:{color:"#000"},itemHiddenStyle:{color:"#CCC"},itemCheckboxStyle:{position:"absolute",width:"13px",height:"13px"},symbolWidth:16,symbolPadding:5,verticalAlign:"bottom",x:0,y:0},loading:{labelStyle:{fontWeight:"bold",position:"relative",top:"1em"},style:{position:"absolute",backgroundColor:"white",opacity:.5,textAlign:"center"}},tooltip:{enabled:!0,backgroundColor:"rgba(255, 255, 255, .85)",borderWidth:2,borderRadius:5,dateTimeLabelFormats:{millisecond:"%A, %b %e, %H:%M:%S.%L",second:"%A, %b %e, %H:%M:%S",minute:"%A, %b %e, %H:%M",hour:"%A, %b %e, %H:%M",day:"%A, %b %e, %Y",week:"Week from %A, %b %e, %Y",month:"%B %Y",year:"%Y"},headerFormat:'<span style="font-size: 10px">{point.key}</span><br/>',pointFormat:'<span style="color:{series.color}">{series.name}</span>: <b>{point.y}</b><br/>',shadow:!0,shared:at,snap:lt?25:10,style:{color:"#333333",fontSize:"12px",padding:"5px",whiteSpace:"nowrap"}},credits:{enabled:!0,text:"Highcharts.com",href:"http://www.highcharts.com",position:{align:"right",x:-10,verticalAlign:"bottom",y:-5},style:{cursor:"pointer",color:"#909090",fontSize:"10px"}}};var fn=dt.plotOptions,Wt=fn.line;M();var ln=function(e){var t=[],r;return function(e){(r=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]?(?:\.[0-9]+)?)\s*\)/.exec(e))?t=[n(r[1]),n(r[2]),n(r[3]),parseFloat(r[4],10)]:(r=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(e))&&(t=[n(r[1],16),n(r[2],16),n(r[3],16),1])}(e),{get:function(n){return t&&!isNaN(t[0])?n==="rgb"?"rgb("+t[0]+","+t[1]+","+t[2]+")":n==="a"?t[3]:"rgba("+t.join(",")+")":e},brighten:function(e){if(o(e)&&e!==0){var r;for(r=0;r<3;r++)t[r]+=n(e*255),t[r]<0&&(t[r]=0),t[r]>255&&(t[r]=255)}return this},setOpacity:function(e){return t[3]=e,this}}};_.prototype={init:function(e,t){this.element=t==="span"?v(t):U.createElementNS("http://www.w3.org/2000/svg",t),this.renderer=e,this.attrSetters={}},animate:function(e,t,n){t=p(t,mt,!0),sn(this),t?(t=Yt(t),n&&(t.complete=n),rn(this,e,t)):(this.attr(e),n&&n())},attr:function(e,t){var i,s,o,u,a=this.element,f=a.nodeName,h=this.renderer,p,d=this.attrSetters,v=this.shadows,m,g,y=this;r(e)&&l(t)&&(i=e,e={},e[i]=t);if(r(e))i=e,f==="circle"?i={x:"cx",y:"cy"}[i]||i:i==="strokeWidth"&&(i="stroke-width"),y=c(a,i)||this[i]||0,i!=="d"&&i!=="visibility"&&(y=parseFloat(y));else for(i in e)if(p=!1,s=e[i],o=d[i]&&d[i](s,i),o!==!1){o!==R&&(s=o);if(i==="d")s&&s.join&&(s=s.join(" ")),/(NaN| {2}|^$)/.test(s)&&(s="M 0 0");else if(i==="x"&&f==="text"){for(o=0;o<a.childNodes.length;o++)u=a.childNodes[o],c(u,"x")===c(a,"x")&&c(u,"x",s);this.rotation&&c(a,"transform","rotate("+this.rotation+" "+s+" "+n(e.y||c(a,"y"))+")")}else if(i==="fill")s=h.color(s,a,i);else if(f!=="circle"||i!=="x"&&i!=="y")if(f==="rect"&&i==="r")c(a,{rx:s,ry:s}),p=!0;else if(i==="translateX"||i==="translateY"||i==="rotation"||i==="verticalAlign")p=g=!0;else if(i==="stroke")s=h.color(s,a,i);else if(i==="dashstyle"){if(i="stroke-dasharray",s=s&&s.toLowerCase(),s==="solid")s=Et;else if(s){s=s.replace("shortdashdotdot","3,1,1,1,1,1,").replace("shortdashdot","3,1,1,1").replace("shortdot","1,1,").replace("shortdash","3,1,").replace("longdash","8,3,").replace(/dot/g,"1,3,").replace("dash","4,3,").replace(/,$/,"").split(",");for(o=s.length;o--;)s[o]=n(s[o])*e["stroke-width"];s=s.join(",")}}else i==="isTracker"?this[i]=s:i==="width"?s=n(s):i==="align"?(i="text-anchor",s={left:"start",center:"middle",right:"end"}[s]):i==="title"&&(o=a.getElementsByTagName("title")[0],o||(o=U.createElementNS("http://www.w3.org/2000/svg","title"),a.appendChild(o)),o.textContent=s);else i={x:"cx",y:"cy"}[i]||i;i==="strokeWidth"&&(i="stroke-width"),it&&i==="stroke-width"&&s===0&&(s=1e-6),this.symbolName&&/^(x|y|width|height|r|start|end|innerR|anchorX|anchorY)/.test(i)&&(m||(this.symbolAttr(e),m=!0),p=!0);if(v&&/^(width|height|visibility|x|y|d|transform)$/.test(i))for(o=v.length;o--;)c(v[o],i,i==="height"?J(s-(v[o].cutHeight||0),0):s);(i==="width"||i==="height")&&f==="rect"&&s<0&&(s=0),this[i]=s,g&&this.updateTransform(),i==="text"?(this.textStr=s,this.added&&h.buildText(this)):p||c(a,i,s)}return it&&/Chrome\/(18|19)/.test(tt)&&f==="text"&&(e.x!==R||e.y!==R)&&(i=a.parentNode,s=a.nextSibling,i&&(i.removeChild(a),s?i.insertBefore(a,s):i.appendChild(a))),y},symbolAttr:function(e){var t=this;Jt("x,y,r,start,end,width,height,innerR,anchorX,anchorY".split(","),function(n){t[n]=p(e[n],t[n])}),t.attr({d:t.renderer.symbols[t.symbolName](t.x,t.y,t.width,t.height,t)})},clip:function(e){return this.attr("clip-path","url("+this.renderer.url+"#"+e.id+")")},crisp:function(e,t,n,r,i){var s,o={},u={},a,e=e||this.strokeWidth||this.attr&&this.attr("stroke-width")||0;a=X(e)%2/2,u.x=V(t||this.x||0)+a,u.y=V(n||this.y||0)+a,u.width=V((r||this.width||0)-2*a),u.height=V((i||this.height||0)-2*a),u.strokeWidth=e;for(s in u)this[s]!==u[s]&&(this[s]=o[s]=u[s]);return o},css:function(t){var n=this.element,n=t&&t.width&&n.nodeName==="text",r,i="",s=function(e,t){return"-"+t.toLowerCase()};t&&t.color&&(t.fill=t.color),this.styles=t=e(this.styles,t);if(nt&&!ot)n&&delete t.width,d(this.element,t);else{for(r in t)i+=r.replace(/([A-Z])/g,s)+":"+t[r]+";";this.attr({style:i})}return n&&this.added&&this.renderer.buildText(this),this},on:function(e,t){var n=t;return lt&&e==="click"&&(e="touchstart",n=function(e){e.preventDefault(),t()}),this.element["on"+e]=n,this},setRadialReference:function(e){return this.element.radialReference=e,this},translate:function(e,t){return this.attr({translateX:e,translateY:t})},invert:function(){return this.inverted=!0,this.updateTransform(),this},htmlCss:function(t){var n=this.element;if(n=t&&n.tagName==="SPAN"&&t.width)delete t.width,this.textWidth=n,this.updateTransform();return this.styles=e(this.styles,t),d(this.element,t),this},htmlGetBBox:function(e){var t=this.element,n=this.bBox;if(!n||e)t.nodeName==="text"&&(t.style.position="absolute"),n=this.bBox={x:t.offsetLeft,y:t.offsetTop,width:t.offsetWidth,height:t.offsetHeight};return n},htmlUpdateTransform:function(){if(this.added){var e=this.renderer,t=this.element,r=this.translateX||0,i=this.translateY||0,s=this.x||0,o=this.y||0,u=this.textAlign||"left",a={left:0,center:.5,right:1}[u],f=u&&u!=="left",c=this.shadows;if(r||i)d(t,{marginLeft:r,marginTop:i}),c&&Jt(c,function(e){d(e,{marginLeft:r+1,marginTop:i+1})});this.inverted&&Jt(t.childNodes,function(n){e.invertChild(n,t)});if(t.tagName==="SPAN"){var h,v,c=this.rotation,m;h=0;var g=1,y=0,b;m=n(this.textWidth);var w=this.xCorr||0,E=this.yCorr||0,S=[c,u,t.innerHTML,this.textWidth].join(",");S!==this.cTT&&(l(c)&&(h=c*et,g=G(h),y=Y(h),d(t,{filter:c?["progid:DXImageTransform.Microsoft.Matrix(M11=",g,", M12=",-y,", M21=",y,", M22=",g,", sizingMethod='auto expand')"].join(""):Et})),h=p(this.elemWidth,t.offsetWidth),v=p(this.elemHeight,t.offsetHeight),h>m&&/[ \-]/.test(t.innerText)&&(d(t,{width:m+"px",display:"block",whiteSpace:"normal"}),h=m),m=e.fontMetrics(t.style.fontSize).b,w=g<0&&-h,E=y<0&&-v,b=g*y<0,w+=y*m*(b?1-a:a),E-=g*m*(c?b?a:1-a:1),f&&(w-=h*a*(g<0?-1:1),c&&(E-=v*a*(y<0?-1:1)),d(t,{textAlign:u})),this.xCorr=w,this.yCorr=E),d(t,{left:s+w+"px",top:o+E+"px"}),this.cTT=S}}else this.alignOnAdd=!0},updateTransform:function(){var e=this.translateX||0,t=this.translateY||0,n=this.inverted,r=this.rotation,i=[];n&&(e+=this.attr("width"),t+=this.attr("height")),(e||t)&&i.push("translate("+e+","+t+")"),n?i.push("rotate(90) scale(-1,1)"):r&&i.push("rotate("+r+" "+(this.x||0)+" "+(this.y||0)+")"),i.length&&c(this.element,"transform",i.join(" "))},toFront:function(){var e=this.element;return e.parentNode.appendChild(e),this},align:function(e,t,n){e?(this.alignOptions=e,this.alignByTranslate=t,n||this.renderer.alignedObjects.push(this)):(e=this.alignOptions,t=this.alignByTranslate);var n=p(n,this.renderer),r=e.align,i=e.verticalAlign,s=(n.x||0)+(e.x||0),o=(n.y||0)+(e.y||0),u={};return/^(right|center)$/.test(r)&&(s+=(n.width-(e.width||0))/{right:1,center:2}[r]),u[t?"translateX":"x"]=X(s),/^(bottom|middle)$/.test(i)&&(o+=(n.height-(e.height||0))/({bottom:1,middle:2}[i]||1)),u[t?"translateY":"y"]=X(o),this[this.placed?"animate":"attr"](u),this.placed=!0,this.alignAttr=u,this},getBBox:function(t){var n,r,i=this.rotation;r=this.element;var s=i*et;if(r.namespaceURI==="http://www.w3.org/2000/svg"||this.renderer.forExport){try{n=r.getBBox?e({},r.getBBox()):{width:r.offsetWidth,height:r.offsetHeight}}catch(o){}if(!n||n.width<0)n={width:0,height:0};t=n.width,r=n.height,i&&(n.width=Q(r*Y(s))+Q(t*G(s)),n.height=Q(r*G(s))+Q(t*Y(s)))}else n=this.htmlGetBBox(t);return n},show:function(){return this.attr({visibility:"visible"})},hide:function(){return this.attr({visibility:"hidden"})},add:function(e){var t=this.renderer,r=e||t,i=r.element||t.box,s=i.childNodes,o=this.element,u=c(o,"zIndex"),a;this.parentInverted=e&&e.inverted,this.textStr!==void 0&&t.buildText(this),u&&(r.handleZ=!0,u=n(u));if(r.handleZ)for(r=0;r<s.length;r++)if(e=s[r],t=c(e,"zIndex"),e!==o&&(n(t)>u||!l(u)&&l(t))){i.insertBefore(o,e),a=!0;break}return a||i.appendChild(o),this.added=!0,tn(this,"add"),this},safeRemoveChild:function(e){var t=e.parentNode;t&&t.removeChild(e)},destroy:function(){var e=this,t=e.element||{},n=e.shadows,r=e.box,i,s;t.onclick=t.onmouseout=t.onmouseover=t.onmousemove=null,sn(e),e.clipPath&&(e.clipPath=e.clipPath.destroy());if(e.stops){for(s=0;s<e.stops.length;s++)e.stops[s]=e.stops[s].destroy();e.stops=null}e.safeRemoveChild(t),n&&Jt(n,function(t){e.safeRemoveChild(t)}),r&&r.destroy(),f(e.renderer.alignedObjects,e);for(i in e)delete e[i];return null},empty:function(){for(var e=this.element,t=e.childNodes,n=t.length;n--;)e.removeChild(t[n])},shadow:function(e,t,n){var r=[],i,s=this.element,o,u=this.parentInverted?"(-1,-1)":"(1,1)";if(e){for(e=1;e<=3;e++)i=s.cloneNode(0),o=7-2*e,c(i,{isShadow:"true",stroke:"rgb(0, 0, 0)","stroke-opacity":.05*e,"stroke-width":o,transform:"translate"+u,fill:Et}),n&&(c(i,"height",J(c(i,"height")-o,0)),i.cutHeight=o),t?t.element.appendChild(i):s.parentNode.insertBefore(i,s),r.push(i);this.shadows=r}return this}};var cn=function(){this.init.apply(this,arguments)};cn.prototype={Element:_,init:function(e,t,n,r){var i=location,s;s=this.createElement("svg").attr({xmlns:"http://www.w3.org/2000/svg",version:"1.1"}),e.appendChild(s.element),this.isSVG=!0,this.box=s.element,this.boxWrapper=s,this.alignedObjects=[],this.url=nt?"":i.href.replace(/#.*?$/,"").replace(/([\('\)])/g,"\\$1"),this.defs=this.createElement("defs").add(),this.forExport=r,this.gradients={},this.setSize(t,n,!1);var o;st&&e.getBoundingClientRect&&(this.subPixelFix=t=function(){d(e,{left:0,top:0}),o=e.getBoundingClientRect(),d(e,{left:$(o.left)-o.left+"px",top:$(o.top)-o.top+"px"})},t(),Zt(z,"resize",t))},isHidden:function(){return!this.boxWrapper.getBBox().width},destroy:function(){var e=this.defs;return this.box=null,this.boxWrapper=this.boxWrapper.destroy(),C(this.gradients||{}),this.gradients=null,e&&(this.defs=e.destroy()),this.subPixelFix&&en(z,"resize",this.subPixelFix),this.alignedObjects=null},createElement:function(e){var t=new this.Element;return t.init(this,e),t},draw:function(){},buildText:function(e){for(var t=e.element,r=p(e.textStr,"").toString().replace(/<(b|strong)>/g,'<span style="font-weight:bold">').replace(/<(i|em)>/g,'<span style="font-style:italic">').replace(/<a/g,"<span").replace(/<\/(b|strong|i|em|a)>/g,"</span>").split(/<br.*?>/g),i=t.childNodes,s=/style="([^"]+)"/,o=/href="([^"]+)"/,u=c(t,"x"),a=e.styles,f=a&&n(a.width),l=a&&a.lineHeight,h,a=i.length,v=[];a--;)t.removeChild(i[a]);f&&!e.added&&this.box.appendChild(t),r[r.length-1]===""&&r.pop(),Jt(r,function(r,i){var a,p=0,m,r=r.replace(/<span/g,"|||<span").replace(/<\/span>/g,"</span>|||");a=r.split("|||"),Jt(a,function(r){if(r!==""||a.length===1){var g={},y=U.createElementNS("http://www.w3.org/2000/svg","tspan");s.test(r)&&c(y,"style",r.match(s)[1].replace(/(;| |^)color([ :])/,"$1fill$2")),o.test(r)&&(c(y,"onclick",'location.href="'+r.match(o)[1]+'"'),d(y,{cursor:"pointer"})),r=(r.replace(/<(.|\n)*?>/g,"")||" ").replace(/&lt;/g,"<").replace(/&gt;/g,">"),y.appendChild(U.createTextNode(r)),p?g.dx=3:g.x=u;if(!p){if(i){!ot&&e.renderer.forExport&&d(y,{display:"block"}),m=z.getComputedStyle&&n(z.getComputedStyle(h,null).getPropertyValue("line-height"));if(!m||isNaN(m)){var b;(b=l)||(b=h.offsetHeight)||(v[i]=t.getBBox().height,b=X(v[i]-(v[i-1]||0))||18),m=b}c(y,"dy",m)}h=y}c(y,g),t.appendChild(y),p++;if(f)for(var r=r.replace(/-/g,"- ").split(" "),w=[];r.length||w.length;)b=e.getBBox().width,g=b>f,!g||r.length===1?(r=w,w=[],r.length&&(y=U.createElementNS("http://www.w3.org/2000/svg","tspan"),c(y,{dy:l||16,x:u}),t.appendChild(y),b>f&&(f=b))):(y.removeChild(y.firstChild),w.unshift(r.pop())),r.length&&y.appendChild(U.createTextNode(r.join(" ").replace(/- /g,"-")))}})})},button:function(n,r,i,s,o,u,a){var f=this.label(n,r,i),l=0,c,h,p,d,v,n={x1:0,y1:0,x2:0,y2:1},o=Yt(t("stroke-width",1,"stroke","#999","fill",t("linearGradient",n,"stops",[[0,"#FFF"],[1,"#DDD"]]),"r",3,"padding",3,"style",t("color","black")),o);return p=o.style,delete o.style,u=Yt(o,t("stroke","#68A","fill",t("linearGradient",n,"stops",[[0,"#FFF"],[1,"#ACF"]])),u),d=u.style,delete u.style,a=Yt(o,t("stroke","#68A","fill",t("linearGradient",n,"stops",[[0,"#9BD"],[1,"#CDF"]])),a),v=a.style,delete a.style,Zt(f.element,"mouseenter",function(){f.attr(u).css(d)}),Zt(f.element,"mouseleave",function(){c=[o,u,a][l],h=[p,d,v][l],f.attr(c).css(h)}),f.setState=function(e){(l=e)?e===2&&f.attr(a).css(v):f.attr(o).css(p)},f.on("click",function(){s.call(f)}).attr(o).css(e({cursor:"default"},p))},crispLine:function(e,t){return e[1]===e[4]&&(e[1]=e[4]=X(e[1])+t%2/2),e[2]===e[5]&&(e[2]=e[5]=X(e[2])+t%2/2),e},path:function(t){var n={fill:Et};return s(t)?n.d=t:i(t)&&e(n,t),this.createElement("path").attr(n)},circle:function(e,t,n){return e=i(e)?e:{x:e,y:t,r:n},this.createElement("circle").attr(e)},arc:function(e,t,n,r,s,o){return i(e)&&(t=e.y,n=e.r,r=e.innerR,s=e.start,o=e.end,e=e.x),this.symbol("arc",e||0,t||0,n||0,n||0,{innerR:r||0,start:s||0,end:o||0})},rect:function(e,t,n,r,s,o){return s=i(e)?e.r:s,s=this.createElement("rect").attr({rx:s,ry:s,fill:Et}),s.attr(i(e)?e:s.crisp(o,e,t,J(n,0),J(r,0)))},setSize:function(e,t,n){var r=this.alignedObjects,i=r.length;this.width=e,this.height=t;for(this.boxWrapper[p(n,!0)?"animate":"attr"]({width:e,height:t});i--;)r[i].align()},g:function(e){var t=this.createElement("g");return l(e)?t.attr({"class":"highcharts-"+e}):t},image:function(t,n,r,i,s){var o={preserveAspectRatio:Et};return arguments.length>1&&e(o,{x:n,y:r,width:i,height:s}),o=this.createElement("image").attr(o),o.element.setAttributeNS?o.element.setAttributeNS("http://www.w3.org/1999/xlink","href",t):o.element.setAttribute("hc-svg-href",t),o},symbol:function(t,n,r,i,s,o){var u,a=this.symbols[t],a=a&&a(X(n),X(r),i,s,o),f=/^url\((.*?)\)$/,l,c;return a?(u=this.path(a),e(u,{symbolName:t,x:n,y:r,width:i,height:s}),o&&e(u,o)):f.test(t)&&(c=function(e,t){e.attr({width:t[0],height:t[1]}),e.alignByTranslate||e.translate(-X(t[0]/2),-X(t[1]/2))},l=t.match(f)[1],t=ct[l],u=this.image(l).attr({x:n,y:r}),t?c(u,t):(u.attr({width:0,height:0}),v("img",{onload:function(){c(u,ct[l]=[this.width,this.height])},src:l}))),u},symbols:{circle:function(e,t,n,r){var i=.166*n;return["M",e+n/2,t,"C",e+n+i,t,e+n+i,t+r,e+n/2,t+r,"C",e-i,t+r,e-i,t,e+n/2,t,"Z"]},square:function(e,t,n,r){return["M",e,t,"L",e+n,t,e+n,t+r,e,t+r,"Z"]},triangle:function(e,t,n,r){return["M",e+n/2,t,"L",e+n,t+r,e,t+r,"Z"]},"triangle-down":function(e,t,n,r){return["M",e,t,"L",e+n,t,e+n/2,t+r,"Z"]},diamond:function(e,t,n,r){return["M",e+n/2,t,"L",e+n,t+r/2,e+n/2,t+r,e,t+r/2,"Z"]},arc:function(e,t,n,r,i){var s=i.start,n=i.r||n||r,o=i.end-1e-6,r=i.innerR,u=i.open,a=G(s),f=Y(s),l=G(o),o=Y(o),i=i.end-s<Z?0:1;return["M",e+n*a,t+n*f,"A",n,n,0,i,1,e+n*l,t+n*o,u?"M":"L",e+r*l,t+r*o,"A",r,r,0,i,0,e+r*a,t+r*f,u?"":"Z"]}},clipRect:function(e,t,n,r){var i="highcharts-"+ht++,s=this.createElement("clipPath").attr({id:i}).add(this.defs),e=this.rect(e,t,n,r,0).add(s);return e.id=i,e.clipPath=s,e},color:function(t,n,r){var i=this,o,u=/^rgba/,a;t&&t.linearGradient?a="linearGradient":t&&t.radialGradient&&(a="radialGradient");if(a){var r=t[a],f=i.gradients,h,p,d,n=n.radialReference;if(!r.id||!f[r.id])s(r)&&(t[a]=r={x1:r[0],y1:r[1],x2:r[2],y2:r[3],gradientUnits:"userSpaceOnUse"}),a==="radialGradient"&&n&&!l(r.gradientUnits)&&e(r,{cx:n[0]-n[2]/2+r.cx*n[2],cy:n[1]-n[2]/2+r.cy*n[2],r:r.r*n[2],gradientUnits:"userSpaceOnUse"}),r.id="highcharts-"+ht++,f[r.id]=h=i.createElement(a).attr(r).add(i.defs),h.stops=[],Jt(t.stops,function(e){u.test(e[1])?(o=ln(e[1]),p=o.get("rgb"),d=o.get("a")):(p=e[1],d=1),e=i.createElement("stop").attr({offset:e[0],"stop-color":p,"stop-opacity":d}).add(h),h.stops.push(e)});return"url("+i.url+"#"+r.id+")"}return u.test(t)?(o=ln(t),c(n,r+"-opacity",o.get("a")),o.get("rgb")):(n.removeAttribute(r+"-opacity"),t)},text:function(e,t,n,r){var i=dt.chart.style;return r&&!this.forExport?this.html(e,t,n):(t=X(p(t,0)),n=X(p(n,0)),e=this.createElement("text").attr({x:t,y:n,text:e}).css({fontFamily:i.fontFamily,fontSize:i.fontSize}),e.x=t,e.y=n,e)},html:function(t,n,r){var i=dt.chart.style,s=this.createElement("span"),o=s.attrSetters,u=s.element,a=s.renderer;return o.text=function(e){return u.innerHTML=e,!1},o.x=o.y=o.align=function(e,t){return t==="align"&&(t="textAlign"),s[t]=e,s.htmlUpdateTransform(),!1},s.attr({text:t,x:X(n),y:X(r)}).css({position:"absolute",whiteSpace:"nowrap",fontFamily:i.fontFamily,fontSize:i.fontSize}),s.css=s.htmlCss,a.isSVG&&(s.add=function(t){var n,r,i=a.box.parentNode;if(t){if(n=t.div,!n)n=t.div=v(wt,{className:c(t.element,"class")},{position:"absolute",left:t.attr("translateX")+"px",top:t.attr("translateY")+"px"},i),r=n.style,e(t.attrSetters,{translateX:function(e){r.left=e+"px"},translateY:function(e){r.top=e+"px"},visibility:function(e,t){r[t]=e}})}else n=i;return n.appendChild(u),s.added=!0,s.alignOnAdd&&s.htmlUpdateTransform(),s}),s},fontMetrics:function(e){var e=n(e||11),e=e<24?e+4:X(e*1.2),t=X(e*.8);return{h:e,b:t}},label:function(t,n,r,i,s,o,u,a,f){function c(){var e=v.styles,e=e&&e.textAlign,t=w*(1-b),n;n=a?0:k,l(E)&&(e==="center"||e==="right")&&(t+={center:.5,right:1}[e]*(E-y.width)),(t!==m.x||n!==m.y)&&m.attr({x:t,y:n}),m.x=t,m.y=n}function h(e,t){g?g.attr(e,t):C[e]=t}function p(){v.attr({text:t,x:n,y:r}),l(s)&&v.attr({anchorX:s,anchorY:o})}var d=this,v=d.g(f),m=d.text("",0,0,u).attr({zIndex:1}).add(v),g,y,b=0,w=3,E,S,x,T,N=0,C={},k,u=v.attrSetters;Zt(v,"add",p),u.width=function(e){return E=e,!1},u.height=function(e){return S=e,!1},u.padding=function(e){return l(e)&&e!==w&&(w=e,c()),!1},u.align=function(e){return b={left:0,center:.5,right:1}[e],!1},u.text=function(e,t){m.attr(t,e);var n;return n=m.element.style,y=(E===void 0||S===void 0||v.styles.textAlign)&&m.getBBox(!0),v.width=(E||y.width||0)+2*w,v.height=(S||y.height||0)+2*w,k=w+d.fontMetrics(n&&n.fontSize).b,g||(n=a?-k:0,v.box=g=i?d.symbol(i,-b*w,n,v.width,v.height):d.rect(-b*w,n,v.width,v.height,0,C["stroke-width"]),g.add(v)),g.attr(Yt({width:v.width,height:v.height},C)),C=null,c(),!1},u["stroke-width"]=function(e,t){return N=e%2/2,h(t,e),!1},u.stroke=u.fill=u.r=function(e,t){return h(t,e),!1},u.anchorX=function(e,t){return s=e,h(t,e+N-x),!1},u.anchorY=function(e,t){return o=e,h(t,e-T),!1},u.x=function(e){return v.x=e,e-=b*((E||y.width)+w),x=X(e),v.attr("translateX",x),!1},u.y=function(e){return T=v.y=X(e),v.attr("translateY",e),!1};var L=v.css;return e(v,{css:function(e){if(e){var t={},e=Yt({},e);Jt("fontSize,fontWeight,fontFamily,color,lineHeight,width".split(","),function(n){e[n]!==R&&(t[n]=e[n],delete e[n])}),m.css(t)}return L.call(v,e)},getBBox:function(){return g.getBBox()},shadow:function(e){return g.shadow(e),v},destroy:function(){en(v,"add",p),en(v.element,"mouseenter"),en(v.element,"mouseleave"),m&&(m=m.destroy()),_.prototype.destroy.call(v)}})}},ft=cn;var hn;if(!ot&&!at){hn={init:function(e,t){var n=["<",t,' filled="f" stroked="f"'],r=["position: ","absolute",";"];(t==="shape"||t===wt)&&r.push("left:0;top:0;width:1px;height:1px;"),rt&&r.push("visibility: ",t===wt?"hidden":"visible"),n.push(' style="',r.join(""),'"/>'),t&&(n=t===wt||t==="span"||t==="img"?n.join(""):e.prepVML(n),this.element=v(n)),this.renderer=e,this.attrSetters={}},add:function(e){var t=this.renderer,n=this.element,r=t.box,r=e?e.element||e:r;return e&&e.inverted&&t.invertChild(n,r),rt&&r.gVis==="hidden"&&d(n,{visibility:"hidden"}),r.appendChild(n),this.added=!0,this.alignOnAdd&&!this.deferUpdateTransform&&this.updateTransform(),tn(this,"add"),this},toggleChildren:function(e,t){for(var n=e.childNodes,r=n.length;r--;)d(n[r],{visibility:t}),n[r].nodeName==="DIV"&&this.toggleChildren(n[r],t)},updateTransform:_.prototype.htmlUpdateTransform,attr:function(e,t){var n,i,s,u=this.element||{},a=u.style,f=u.nodeName,h=this.renderer,p=this.symbolName,d,m=this.shadows,g,y=this.attrSetters,b=this;r(e)&&l(t)&&(n=e,e={},e[n]=t);if(r(e))n=e,b=n==="strokeWidth"||n==="stroke-width"?this.strokeweight:this[n];else for(n in e)if(i=e[n],g=!1,s=y[n]&&y[n](i,n),s!==!1&&i!==null){s!==R&&(i=s);if(p&&/^(x|y|r|start|end|width|height|innerR|anchorX|anchorY)/.test(n))d||(this.symbolAttr(e),d=!0),g=!0;else if(n==="d"){i=i||[],this.d=i.join(" "),s=i.length;for(g=[];s--;)g[s]=o(i[s])?X(i[s]*10)-5:i[s]==="Z"?"x":i[s];i=g.join(" ")||"x",u.path=i;if(m)for(s=m.length;s--;)m[s].path=m[s].cutOff?this.cutOffPath(i,m[s].cutOff):i;g=!0}else n==="zIndex"||n==="visibility"?(rt&&n==="visibility"&&f==="DIV"&&(u.gVis=i,this.toggleChildren(u,i),i==="visible"&&(i=null)),i&&(a[n]=i),g=!0):n==="width"||n==="height"?(i=J(0,i),this[n]=i,this.updateClipping?(this[n]=i,this.updateClipping()):a[n]=i,g=!0):n==="x"||n==="y"?(this[n]=i,a[{x:"left",y:"top"}[n]]=i):n==="class"?u.className=i:n==="stroke"?(i=h.color(i,u,n),n="strokecolor"):n==="stroke-width"||n==="strokeWidth"?(u.stroked=i?!0:!1,n="strokeweight",this[n]=i,o(i)&&(i+="px")):n==="dashstyle"?((u.getElementsByTagName("stroke")[0]||v(h.prepVML(["<stroke/>"]),null,null,u))[n]=i||"solid",this.dashstyle=i,g=!0):n==="fill"?f==="SPAN"?a.color=i:(u.filled=i!==Et?!0:!1,i=h.color(i,u,n),n="fillcolor"):f==="shape"&&n==="rotation"?this[n]=i:n==="translateX"||n==="translateY"||n==="rotation"?(this[n]=i,this.updateTransform(),g=!0):n==="text"&&(this.bBox=null,u.innerHTML=i,g=!0);if(m&&n==="visibility")for(s=m.length;s--;)m[s].style[n]=i;g||(rt?u[n]=i:c(u,n,i))}return b},clip:function(e){var t=this,n=e.members,r=t.element,i=r.parentNode;return n.push(t),t.destroyClip=function(){f(n,t)},i&&i.className==="highcharts-tracker"&&!rt&&d(r,{visibility:"hidden"}),t.css(e.getCSS(t))},css:_.prototype.htmlCss,safeRemoveChild:function(e){e.parentNode&&k(e)},destroy:function(){return this.destroyClip&&this.destroyClip(),_.prototype.destroy.apply(this)},empty:function(){for(var e=this.element.childNodes,t=e.length,n;t--;)n=e[t],n.parentNode.removeChild(n)},on:function(e,t){return this.element["on"+e]=function(){var e=z.event;e.target=e.srcElement,t(e)},this},cutOffPath:function(e,t){var r,e=e.split(/[ ,]/);r=e.length;if(r===9||r===11)e[r-4]=e[r-2]=n(e[r-2])-10*t;return e.join(" ")},shadow:function(e,t,r){var i=[],s=this.element,o=this.renderer,u,a=s.style,f,l=s.path,c,h;l&&typeof l.value!="string"&&(l="x"),h=l;if(e){for(e=1;e<=3;e++)c=7-2*e,r&&(h=this.cutOffPath(l.value,c+.5)),f=['<shape isShadow="true" strokeweight="',7-2*e,'" filled="false" path="',h,'" coordsize="10 10" style="',s.style.cssText,'" />'],u=v(o.prepVML(f),null,{left:n(a.left)+1,top:n(a.top)+1}),r&&(u.cutOff=c+1),f=['<stroke color="black" opacity="',.05*e,'"/>'],v(o.prepVML(f),null,null,u),t?t.element.appendChild(u):s.parentNode.insertBefore(u,s),i.push(u);this.shadows=i}return this}},hn=m(_,hn);var pn={Element:hn,isIE8:tt.indexOf("MSIE 8.0")>-1,init:function(e,t,n){var r,i;this.alignedObjects=[],r=this.createElement(wt),i=r.element,i.style.position="relative",e.appendChild(r.element),this.box=i,this.boxWrapper=r,this.setSize(t,n,!1),U.namespaces.hcv||(U.namespaces.add("hcv","urn:schemas-microsoft-com:vml"),U.createStyleSheet().cssText="hcv\\:fill, hcv\\:path, hcv\\:shape, hcv\\:stroke{ behavior:url(#default#VML); display: inline-block; } ")},isHidden:function(){return!this.box.offsetWidth},clipRect:function(t,n,r,i){var s=this.createElement();return e(s,{members:[],left:t,top:n,width:r,height:i,getCSS:function(t){var n=t.inverted,r=this.top,i=this.left,s=i+this.width,o=r+this.height,r={clip:"rect("+X(n?i:r)+"px,"+X(n?o:s)+"px,"+X(n?s:o)+"px,"+X(n?r:i)+"px)"};return!n&&rt&&t.element.nodeName!=="IMG"&&e(r,{width:s+"px",height:o+"px"}),r},updateClipping:function(){Jt(s.members,function(e){e.css(s.getCSS(e))})}})},color:function(e,t,n){var r,i=/^rgba/,s,o=Et;e&&e.linearGradient?s="gradient":e&&e.radialGradient&&(s="pattern");if(s){var u,a,f=e.linearGradient||e.radialGradient,l,c,h,p,d,m,g="",e=e.stops,y,b=[];c=e[0],y=e[e.length-1],c[0]>0&&e.unshift([0,c[1]]),y[0]<1&&e.push([1,y[1]]),Jt(e,function(e,t){i.test(e[1])?(r=ln(e[1]),u=r.get("rgb"),a=r.get("a")):(u=e[1],a=1),b.push(e[0]*100+"% "+u),t?(p=a,d=u):(h=a,m=u)}),s==="gradient"?(l=f.x1||f[0]||0,e=f.y1||f[1]||0,c=f.x2||f[2]||0,f=f.y2||f[3]||0,l=90-W.atan((f-e)/(c-l))*180/Z):(o=f.r*2,g='src="http://code.highcharts.com/gfx/radial-gradient.png" size="'+o+","+o+'" origin="0.5,0.5" position="'+f.cx+","+f.cy+'" color2="'+m+'" ',o=d),n==="fill"?(n=['<fill colors="'+b.join(",")+'" angle="',l,'" opacity="',p,'" o:opacity2="',h,'" type="',s,'" ',g,'focus="100%" method="any" />'],v(this.prepVML(n),null,null,t)):o=u}else i.test(e)&&t.tagName!=="IMG"?(r=ln(e),n=["<",n,' opacity="',r.get("a"),'"/>'],v(this.prepVML(n),null,null,t),o=r.get("rgb")):(t=t.getElementsByTagName(n),t.length&&(t[0].opacity=1),o=e);return o},prepVML:function(e){var t=this.isIE8,e=e.join("");return t?(e=e.replace("/>",' xmlns="urn:schemas-microsoft-com:vml" />'),e=e.indexOf('style="')===-1?e.replace("/>",' style="display:inline-block;behavior:url(#default#VML);" />'):e.replace('style="','style="display:inline-block;behavior:url(#default#VML);')):e=e.replace("<","<hcv:"),e},text:cn.prototype.html,path:function(t){var n={coordsize:"10 10"};return s(t)?n.d=t:i(t)&&e(n,t),this.createElement("shape").attr(n)},circle:function(e,t,n){return this.symbol("circle").attr({x:e-n,y:t-n,width:2*n,height:2*n})},g:function(e){var t;return e&&(t={className:"highcharts-"+e,"class":"highcharts-"+e}),this.createElement(wt).attr(t)},image:function(e,t,n,r,i){var s=this.createElement("img").attr({src:e});return arguments.length>1&&s.css({left:t,top:n,width:r,height:i}),s},rect:function(e,t,n,r,s,o){i(e)&&(t=e.y,n=e.width,r=e.height,o=e.strokeWidth,e=e.x);var u=this.symbol("rect");return u.r=s,u.attr(u.crisp(o,e,t,J(n,0),J(r,0)))},invertChild:function(e,t){var r=t.style;d(e,{flip:"x",left:n(r.width)-1,top:n(r.height)-1,rotation:-90})},symbols:{arc:function(e,t,n,r,i){var s=i.start,o=i.end,u=i.r||n||r,n=G(s),r=Y(s),a=G(o),f=Y(o),l=i.innerR,c=.08/u,h=l&&.1/l||0;return o-s===0?["x"]:(2*Z-o+s<c?a=-c:o-s<h&&(a=G(s+h)),s=["wa",e-u,t-u,e+u,t+u,e+u*n,t+u*r,e+u*a,t+u*f],i.open&&s.push("M",e-l,t-l),s.push("at",e-l,t-l,e+l,t+l,e+l*a,t+l*f,e+l*n,t+l*r,"x","e"),s)},circle:function(e,t,n,r){return["wa",e,t,e+n,t+r,e+n,t+r/2,e+n,t+r/2,"e"]},rect:function(e,t,n,r,i){var s=e+n,o=t+r,u;return!l(i)||!i.r?s=cn.prototype.symbols.square.apply(0,arguments):(u=K(i.r,n,r),s=["M",e+u,t,"L",s-u,t,"wa",s-2*u,t,s,t+2*u,s-u,t,s,t+u,"L",s,o-u,"wa",s-2*u,o-2*u,s,o,s,o-u,s-u,o,"L",e+u,o,"wa",e,o-2*u,e+2*u,o,e+u,o,e,o-u,"L",e,t+u,"wa",e,t,e+2*u,t+2*u,e,t+u,e+u,t,"x","e"]),s}}};hn=function(){this.init.apply(this,arguments)},hn.prototype=Yt(cn.prototype,pn),ft=hn}var dn,vn;at&&(dn=function(){},dn.prototype.symbols={},vn=function(){function e(){var e=t.length,n;for(n=0;n<e;n++)t[n]();t=[]}var t=[];return{push:function(n,r){t.length===0&&$t(r,e),t.push(n)}}}()),ft=hn||dn||cn,D.prototype={addLabel:function(){var t=this.axis,n=t.options,r=t.chart,i=t.horiz,s=t.categories,u=this.pos,f=n.labels,c=t.tickPositions,i=s&&i&&s.length&&!f.step&&!f.staggerLines&&!f.rotation&&r.plotWidth/c.length||!i&&r.plotWidth/2,h=u===c[0],p=u===c[c.length-1],d=s&&l(s[u])?s[u]:u,s=this.label,c=c.info,v;t.isDatetimeAxis&&c&&(v=n.dateTimeLabelFormats[c.higherRanks[u]||c.unitName]),this.isFirst=h,this.isLast=p,n=t.labelFormatter.call({axis:t,chart:r,isFirst:h,isLast:p,dateTimeLabelFormat:v,value:t.isLog?A(a(d)):d}),u=i&&{width:J(1,X(i-2*(f.padding||10)))+"px"},u=e(u,f.style),l(s)?s&&s.attr({text:n}).css(u):(i={align:f.align},o(f.rotation)&&(i.rotation=f.rotation),this.label=l(n)&&f.enabled?r.renderer.text(n,0,0,f.useHTML).attr(i).css(u).add(t.axisGroup):null)},getLabelSize:function(){var e=this.label,t=this.axis;return e?(this.labelBBox=e.getBBox(!0))[t.horiz?"height":"width"]:0},getLabelSides:function(){var e=this.axis.options.labels,t=this.labelBBox.width,e=t*{left:0,center:.5,right:1}[e.align]-e.x;return[-e,t-e]},handleOverflow:function(e,t){var n=!0,r=this.axis,i=r.chart,s=this.isFirst,o=this.isLast,u=t.x,a=r.reversed,f=r.tickPositions;if(s||o){var l=this.getLabelSides(),c=l[0],l=l[1],i=i.plotLeft,h=i+r.len,f=(r=r.ticks[f[e+(s?1:-1)]])&&r.label.xy.x+r.getLabelSides()[s?0:1];s&&!a||o&&a?u+c<i&&(u=i-c,r&&u+l>f&&(n=!1)):u+l>h&&(u=h-l,r&&u+c<f&&(n=!1)),t.x=u}return n},getPosition:function(e,t,n,r){var i=this.axis,s=i.chart,o=r&&s.oldChartHeight||s.chartHeight;return{x:e?i.translate(t+n,null,null,r)+i.transB:i.left+i.offset+(i.opposite?(r&&s.oldChartWidth||s.chartWidth)-i.right-i.left:0),y:e?o-i.bottom+i.offset-(i.opposite?i.height:0):o-i.translate(t+n,null,null,r)-i.transB}},getLabelPosition:function(e,t,r,i,s,o,u,a){var f=this.axis,c=f.transA,h=f.reversed,f=f.staggerLines,e=e+s.x-(o&&i?o*c*(h?-1:1):0),t=t+s.y-(o&&!i?o*c*(h?1:-1):0);return l(s.y)||(t+=n(r.styles.lineHeight)*.9-r.getBBox().height/2),f&&(t+=u/(a||1)%f*16),{x:e,y:t}},getMarkPath:function(e,t,n,r,i,s){return s.crispLine(["M",e,t,"L",e+(i?0:-n),t+(i?n:0)],r)},render:function(e,t){var n=this.axis,r=n.options,i=n.chart.renderer,s=n.horiz,o=this.type,u=this.label,a=this.pos,f=r.labels,l=this.gridLine,c=o?o+"Grid":"grid",h=o?o+"Tick":"tick",d=r[c+"LineWidth"],v=r[c+"LineColor"],m=r[c+"LineDashStyle"],g=r[h+"Length"],c=r[h+"Width"]||0,y=r[h+"Color"],b=r[h+"Position"],h=this.mark,w=f.step,E=!0,S=r.categories&&r.tickmarkPlacement==="between"?.5:0,x=this.getPosition(s,a,S,t),T=x.x,x=x.y,N=n.staggerLines;d&&(a=n.getPlotLinePath(a+S,d,t),l===R&&(l={stroke:v,"stroke-width":d},m&&(l.dashstyle=m),o||(l.zIndex=1),this.gridLine=l=d?i.path(a).attr(l).add(n.gridGroup):null),!t&&l&&a&&l[this.isNew?"attr":"animate"]({d:a})),c&&(b==="inside"&&(g=-g),n.opposite&&(g=-g),o=this.getMarkPath(T,x,g,c,s,i),h?h.animate({d:o}):this.mark=i.path(o).attr({stroke:y,"stroke-width":c}).add(n.axisGroup)),u&&!isNaN(T)&&(u.xy=x=this.getLabelPosition(T,x,u,s,f,S,e,w),this.isFirst&&!p(r.showFirstLabel,1)||this.isLast&&!p(r.showLastLabel,1)?E=!1:!N&&s&&f.overflow==="justify"&&!this.handleOverflow(e,x)&&(E=!1),w&&e%w&&(E=!1),E?(u[this.isNew?"attr":"animate"](x),u.show(),this.isNew=!1):u.hide())},destroy:function(){C(this,this.axis)}},P.prototype={render:function(){var e=this,t=e.axis,n=t.horiz,r=(t.pointRange||0)/2,i=e.options,s=i.label,o=e.label,a=i.width,f=i.to,c=i.from,h=l(c)&&l(f),d=i.value,v=i.dashStyle,m=e.svgElem,g=[],y,b=i.color,w=i.zIndex,E=i.events,S=t.chart.renderer;t.isLog&&(c=u(c),f=u(f),d=u(d));if(a){if(g=t.getPlotLinePath(d,a),r={stroke:b,"stroke-width":a},v)r.dashstyle=v}else{if(!h)return;if(c=J(c,t.min-r),f=K(f,t.max+r),g=t.getPlotBandPath(c,f,i),r={fill:b},i.borderWidth)r.stroke=i.borderColor,r["stroke-width"]=i.borderWidth}l(w)&&(r.zIndex=w);if(m)g?m.animate({d:g},null,m.onGetPath):(m.hide(),m.onGetPath=function(){m.show()});else if(g&&g.length&&(e.svgElem=m=S.path(g).attr(r).add(),E))for(y in i=function(t){m.on(t,function(n){E[t].apply(e,[n])})},E)i(y);return s&&l(s.text)&&g&&g.length&&t.width>0&&t.height>0?(s=Yt({align:n&&h&&"center",x:n?!h&&4:10,verticalAlign:!n&&h&&"middle",y:n?h?16:10:h?6:-4,rotation:n&&!h&&90},s),o||(e.label=o=S.text(s.text,0,0).attr({align:s.textAlign||s.align,rotation:s.rotation,zIndex:w}).css(s.style).add()),t=[g[1],g[4],p(g[6],g[1])],g=[g[2],g[5],p(g[7],g[2])],n=T(t),h=T(g),o.align(s,!1,{x:n,y:h,width:N(t)-n,height:N(g)-h}),o.show()):o&&o.hide(),e},destroy:function(){f(this.axis.plotLinesAndBands,this),C(this,this.axis)}},H.prototype={destroy:function(){C(this,this.axis)},setTotal:function(e){this.cum=this.total=e},render:function(e){var t=this.options.formatter.call(this);this.label?this.label.attr({text:t,visibility:"hidden"}):this.label=this.axis.chart.renderer.text(t,0,0).css(this.options.style).attr({align:this.textAlign,rotation:this.options.rotation,visibility:"hidden"}).add(e)},setOffset:function(e,t){var n=this.axis,r=n.chart,i=r.inverted,s=this.isNegative,o=n.translate(this.total,0,0,0,1),n=n.translate(0),n=Q(o-n),u=r.xAxis[0].translate(this.x)+e,r=r.plotHeight,i={x:i?s?o:o-n:u,y:i?r-u-t:s?r-o-n:r-o,width:i?n:t,height:i?t:n};this.label&&this.label.align(this.alignOptions,null,i).attr({visibility:"visible"})}},B.prototype={defaultOptions:{dateTimeLabelFormats:{millisecond:"%H:%M:%S.%L",second:"%H:%M:%S",minute:"%H:%M",hour:"%H:%M",day:"%e. %b",week:"%e. %b",month:"%b '%y",year:"%Y"},endOnTick:!1,gridLineColor:"#C0C0C0",labels:Xt,lineColor:"#C0D0E0",lineWidth:1,minPadding:.01,maxPadding:.01,minorGridLineColor:"#E0E0E0",minorGridLineWidth:1,minorTickColor:"#A0A0A0",minorTickLength:2,minorTickPosition:"outside",startOfWeek:1,startOnTick:!1,tickColor:"#C0D0E0",tickLength:5,tickmarkPlacement:"between",tickPixelInterval:100,tickPosition:"outside",tickWidth:1,title:{align:"middle",style:{color:"#6D869F",fontWeight:"bold"}},type:"linear"},defaultYAxisOptions:{endOnTick:!0,gridLineWidth:1,tickPixelInterval:72,showLastLabel:!0,labels:{align:"right",x:-8,y:3},lineWidth:0,maxPadding:.05,minPadding:.05,startOnTick:!0,tickWidth:0,title:{rotation:270,text:"Y-values"},stackLabels:{enabled:!1,formatter:function(){return this.total},style:Xt.style}},defaultLeftAxisOptions:{labels:{align:"right",x:-8,y:null},title:{rotation:270}},defaultRightAxisOptions:{labels:{align:"left",x:8,y:null},title:{rotation:90}},defaultBottomAxisOptions:{labels:{align:"center",x:0,y:14},title:{rotation:0}},defaultTopAxisOptions:{labels:{align:"center",x:0,y:-5},title:{rotation:0}},init:function(e,t){var n=t.isX;this.horiz=e.inverted?!n:n,this.xOrY=(this.isXAxis=n)?"x":"y",this.opposite=t.opposite,this.side=this.horiz?this.opposite?0:2:this.opposite?1:3,this.setOptions(t);var r=this.options,i=r.type,s=i==="datetime";this.labelFormatter=r.labels.formatter||this.defaultLabelFormatter,this.staggerLines=this.horiz&&r.labels.staggerLines,this.userOptions=t,this.minPixelPadding=0,this.chart=e,this.reversed=r.reversed,this.categories=r.categories,this.isLog=i==="logarithmic",this.isLinked=l(r.linkedTo),this.isDatetimeAxis=s,this.ticks={},this.minorTicks={},this.plotLinesAndBands=[],this.alternateBands={},this.len=0,this.minRange=this.userMinRange=r.minRange||r.maxZoom,this.range=r.range,this.offset=r.offset||0,this.stacks={},this.min=this.max=null;var o,r=this.options.events;e.axes.push(this),e[n?"xAxis":"yAxis"].push(this),this.series=[],e.inverted&&n&&this.reversed===R&&(this.reversed=!0),this.removePlotLine=this.removePlotBand=this.removePlotBandOrLine,this.addPlotLine=this.addPlotBand=this.addPlotBandOrLine;for(o in r)Zt(this,o,r[o]);this.isLog&&(this.val2lin=u,this.lin2val=a)},setOptions:function(e){this.options=Yt(this.defaultOptions,this.isXAxis?{}:this.defaultYAxisOptions,[this.defaultTopAxisOptions,this.defaultRightAxisOptions,this.defaultBottomAxisOptions,this.defaultLeftAxisOptions][this.side],e)},defaultLabelFormatter:function(){var e=this.axis,t=this.value,n=e.tickInterval,r=this.dateTimeLabelFormat;return e.categories?t:r?vt(r,t):n%1e6===0?t/1e6+"M":n%1e3===0?t/1e3+"k":t>=1e3?g(t,0):g(t,-1)},getSeriesExtremes:function(){var e=this,t=e.chart,n=e.stacks,r=[],i=[],s;e.dataMin=e.dataMax=null,Jt(e.series,function(o){if(o.visible||!t.options.chart.ignoreHiddenSeries){var u=o.options,a,f,c,h,d,v,m,g,y,b=u.threshold,w,E=[],S=0;e.isLog&&b<=0&&(b=u.threshold=null);if(e.isXAxis){if(u=o.xData,u.length)e.dataMin=K(p(e.dataMin,u[0]),T(u)),e.dataMax=J(p(e.dataMax,u[0]),N(u))}else{var x,C,k,L=o.cropped,A=o.xAxis.getExtremes(),O=!!o.modifyValue;a=u.stacking,e.usePercentage=a==="percent",a&&(d=u.stack,h=o.type+p(d,""),v="-"+h,o.stackKey=h,f=r[h]||[],r[h]=f,c=i[v]||[],i[v]=c),e.usePercentage&&(e.dataMin=0,e.dataMax=99),u=o.processedXData,m=o.processedYData,w=m.length;for(s=0;s<w;s++)if(g=u[s],y=m[s],y!==null&&y!==R&&(a?(C=(x=y<b)?c:f,k=x?v:h,y=C[g]=l(C[g])?C[g]+y:y,n[k]||(n[k]={}),n[k][g]||(n[k][g]=new H(e,e.options.stackLabels,x,g,d)),n[k][g].setTotal(y)):O&&(y=o.modifyValue(y)),L||(u[s+1]||g)>=A.min&&(u[s-1]||g)<=A.max))if(g=y.length)for(;g--;)y[g]!==null&&(E[S++]=y[g]);else E[S++]=y;!e.usePercentage&&E.length&&(e.dataMin=K(p(e.dataMin,E[0]),T(E)),e.dataMax=J(p(e.dataMax,E[0]),N(E))),l(b)&&(e.dataMin>=b?(e.dataMin=b,e.ignoreMinPadding=!0):e.dataMax<b&&(e.dataMax=b,e.ignoreMaxPadding=!0))}}})},translate:function(e,t,n,r,i){var s=this.len,o=1,u=0,a=r?this.oldTransA:this.transA,r=r?this.oldMin:this.min,i=this.options.ordinal||this.isLog&&i;return a||(a=this.transA),n&&(o*=-1,u=s),this.reversed&&(o*=-1,u-=o*s),t?(this.reversed&&(e=s-e),e=e/a+r,i&&(e=this.lin2val(e))):(i&&(e=this.val2lin(e)),e=o*(e-r)*a+u+o*this.minPixelPadding),e},getPlotLinePath:function(e,t,n){var r=this.chart,i=this.left,s=this.top,o,u,a,e=this.translate(e,null,null,n),f=n&&r.oldChartHeight||r.chartHeight,l=n&&r.oldChartWidth||r.chartWidth,c;o=this.transB,n=u=X(e+o),o=a=X(f-e-o);if(isNaN(e))c=!0;else if(this.horiz){if(o=s,a=f-this.bottom,n<i||n>i+this.width)c=!0}else if(n=i,u=l-this.right,o<s||o>s+this.height)c=!0;return c?null:r.renderer.crispLine(["M",n,o,"L",u,a],t||0)},getPlotBandPath:function(e,t){var n=this.getPlotLinePath(t),r=this.getPlotLinePath(e);return r&&n?r.push(n[4],n[5],n[1],n[2]):r=null,r},getLinearTickPositions:function(e,t,n){for(var r,t=A(V(t/e)*e),n=A($(n/e)*e),i=[];t<=n;){i.push(t),t=A(t+e);if(t===r)break;r=t}return i},getLogTickPositions:function(e,t,n,r){var i=this.options,s=this.len,o=[];r||(this._minorAutoInterval=null);if(e>=.5)e=X(e),o=this.getLinearTickPositions(e,t,n);else if(e>=.08)for(var s=V(t),f,l,c,h,d,i=e>.3?[1,2,4]:e>.15?[1,2,4,6,8]:[1,2,3,4,5,6,7,8,9];s<n+1&&!d;s++){l=i.length;for(f=0;f<l&&!d;f++)c=u(a(s)*i[f]),c>t&&o.push(h),h>n&&(d=!0),h=c}else if(t=a(t),n=a(n),e=i[r?"minorTickInterval":"tickInterval"],e=p(e==="auto"?null:e,this._minorAutoInterval,(n-t)*(i.tickPixelInterval/(r?5:1))/((r?s/this.tickPositions.length:s)||1)),e=b(e,null,W.pow(10,V(W.log(e)/W.LN10))),o=Gt(this.getLinearTickPositions(e,t,n),u),!r)this._minorAutoInterval=e/5;return r||(this.tickInterval=e),o},getMinorTickPositions:function(){var e=this.tickPositions,t=this.minorTickInterval,n=[],r,i;if(this.isLog){i=e.length;for(r=1;r<i;r++)n=n.concat(this.getLogTickPositions(t,e[r-1],e[r],!0))}else for(e=this.min+(e[0]-this.min)%t;e<=this.max;e+=t)n.push(e);return n},adjustForMinRange:function(){var e=this.options,t=this.min,n=this.max,r,i=this.dataMax-this.dataMin>=this.minRange,s,o,u,a,f;this.isXAxis&&this.minRange===R&&!this.isLog&&(l(e.min)||l(e.max)?this.minRange=null:(Jt(this.series,function(e){a=e.xData;for(o=f=e.xIncrement?1:a.length-1;o>0;o--)if(u=a[o]-a[o-1],s===R||u<s)s=u}),this.minRange=K(s*5,this.dataMax-this.dataMin)));if(n-t<this.minRange){var c=this.minRange;r=(c-n+t)/2,r=[t-r,p(e.min,t-r)],i&&(r[2]=this.dataMin),t=N(r),n=[t+c,p(e.max,t+c)],i&&(n[2]=this.dataMax),n=T(n),n-t<c&&(r[0]=n-c,r[1]=p(e.min,n-c),t=N(r))}this.min=t,this.max=n},setAxisTranslation:function(){var e=this.max-this.min,t=0,n,r,i=this.transA;this.isXAxis&&(this.isLinked?t=this.linkedParent.pointRange:Jt(this.series,function(e){t=J(t,e.pointRange),r=e.closestPointRange,!e.noSharedTooltip&&l(r)&&(n=l(n)?K(n,r):r)}),this.pointRange=t,this.closestPointRange=n),this.oldTransA=i,this.translationSlope=this.transA=i=this.len/(e+t||1),this.transB=this.horiz?this.left:this.bottom,this.minPixelPadding=i*(t/2)},setTickPositions:function(e){var t=this,n=t.chart,r=t.options,i=t.isLog,s=t.isDatetimeAxis,o=t.isXAxis,a=t.isLinked,f=t.options.tickPositioner,c=r.maxPadding,h=r.minPadding,d=r.tickInterval,v=r.tickPixelInterval,m=t.categories;a?(t.linkedParent=n[o?"xAxis":"yAxis"][r.linkedTo],n=t.linkedParent.getExtremes(),t.min=p(n.min,n.dataMin),t.max=p(n.max,n.dataMax),r.type!==t.linkedParent.options.type&&L(11,1)):(t.min=p(t.userMin,r.min,t.dataMin),t.max=p(t.userMax,r.max,t.dataMax)),i&&(!e&&K(t.min,p(t.dataMin,t.min))<=0&&L(10,1),t.min=A(u(t.min)),t.max=A(u(t.max))),t.range&&(t.userMin=t.min=J(t.min,t.max-t.range),t.userMax=t.max,e)&&(t.range=null),t.adjustForMinRange(),!m&&!t.usePercentage&&!a&&l(t.min)&&l(t.max)&&(n=t.max-t.min||1,!l(r.min)&&!l(t.userMin)&&h&&(t.dataMin<0||!t.ignoreMinPadding)&&(t.min-=n*h),!l(r.max)&&!l(t.userMax)&&c&&(t.dataMax>0||!t.ignoreMaxPadding)&&(t.max+=n*c)),t.tickInterval=t.min===t.max||t.min===void 0||t.max===void 0?1:a&&!d&&v===t.linkedParent.options.tickPixelInterval?t.linkedParent.tickInterval:p(d,m?1:(t.max-t.min)*v/(t.len||1)),o&&!e&&Jt(t.series,function(e){e.processData(t.min!==t.oldMin||t.max!==t.oldMax)}),t.setAxisTranslation(),t.beforeSetTickPositions&&t.beforeSetTickPositions(),t.postProcessTickInterval&&(t.tickInterval=t.postProcessTickInterval(t.tickInterval)),!s&&!i&&(e=W.pow(10,V(W.log(t.tickInterval)/W.LN10)),!l(r.tickInterval))&&(t.tickInterval=b(t.tickInterval,null,e,r)),t.minorTickInterval=r.minorTickInterval==="auto"&&t.tickInterval?t.tickInterval/5:r.minorTickInterval,t.tickPositions=f=r.tickPositions||f&&f.apply(t,[t.min,t.max]),f||(f=s?(t.getNonLinearTimeTicks||E)(w(t.tickInterval,r.units),t.min,t.max,r.startOfWeek,t.ordinalPositions,t.closestPointRange,!0):i?t.getLogTickPositions(t.tickInterval,t.min,t.max):t.getLinearTickPositions(t.tickInterval,t.min,t.max),t.tickPositions=f),a||(i=f[0],s=f[f.length-1],r.startOnTick?t.min=i:t.min>i&&f.shift(),r.endOnTick?t.max=s:t.max<s&&f.pop())},setMaxTicks:function(){var e=this.chart,t=e.maxTicks,n=this.tickPositions,r=this.xOrY;t||(t={x:0,y:0}),!this.isLinked&&!this.isDatetimeAxis&&n.length>t[r]&&this.options.alignTicks!==!1&&(t[r]=n.length),e.maxTicks=t},adjustTickAmount:function(){var e=this.xOrY,t=this.tickPositions,n=this.chart.maxTicks;if(n&&n[e]&&!this.isDatetimeAxis&&!this.categories&&!this.isLinked&&this.options.alignTicks!==!1){var r=this.tickAmount,i=t.length;this.tickAmount=e=n[e];if(i<e){for(;t.length<e;)t.push(A(t[t.length-1]+this.tickInterval));this.transA*=(i-1)/(e-1),this.max=t[t.length-1]}l(r)&&e!==r&&(this.isDirty=!0)}},setScale:function(){var e=this.stacks,t,n,r,i;this.oldMin=this.min,this.oldMax=this.max,this.oldAxisLength=this.len,this.setAxisSize(),i=this.len!==this.oldAxisLength,Jt(this.series,function(e){if(e.isDirtyData||e.isDirty||e.xAxis.isDirty)r=!0});if(i||r||this.isLinked||this.userMin!==this.oldUserMin||this.userMax!==this.oldUserMax)if(this.getSeriesExtremes(),this.setTickPositions(),this.oldUserMin=this.userMin,this.oldUserMax=this.userMax,!this.isDirty)this.isDirty=i||this.min!==this.oldMin||this.max!==this.oldMax;if(!this.isXAxis)for(t in e)for(n in e[t])e[t][n].cum=e[t][n].total;this.setMaxTicks()},setExtremes:function(t,n,r,i,s){var o=this,u=o.chart,r=p(r,!0),s=e(s,{min:t,max:n});tn(o,"setExtremes",s,function(){o.userMin=t,o.userMax=n,o.isDirtyExtremes=!0,r&&u.redraw(i)})},setAxisSize:function(){var e=this.chart,t=this.options,n=t.offsetLeft||0,r=t.offsetRight||0;this.left=p(t.left,e.plotLeft+n),this.top=p(t.top,e.plotTop),this.width=p(t.width,e.plotWidth-n+r),this.height=p(t.height,e.plotHeight),this.bottom=e.chartHeight-this.height-this.top,this.right=e.chartWidth-this.width-this.left,this.len=J(this.horiz?this.width:this.height,0)},getExtremes:function(){var e=this.isLog;return{min:e?A(a(this.min)):this.min,max:e?A(a(this.max)):this.max,dataMin:this.dataMin,dataMax:this.dataMax,userMin:this.userMin,userMax:this.userMax}},getThreshold:function(e){var t=this.isLog,n=t?a(this.min):this.min,t=t?a(this.max):this.max;return n>e||e===null?e=n:t<e&&(e=t),this.translate(e,0,1,0,1)},addPlotBandOrLine:function(e){return e=(new P(this,e)).render(),this.plotLinesAndBands.push(e),e},getOffset:function(){var e=this,t=e.chart,n=t.renderer,r=e.options,i=e.tickPositions,s=e.ticks,o=e.horiz,u=e.side,a,f=0,c,h=0,d=r.title,v=r.labels,m=0,g=t.axisOffset,y=[-1,1,1,-1][u],b;e.hasData=t=e.series.length&&l(e.min)&&l(e.max),e.showAxis=a=t||p(r.showEmpty,!0),e.axisGroup||(e.axisGroup=n.g("axis").attr({zIndex:r.zIndex||7}).add(),e.gridGroup=n.g("grid").attr({zIndex:r.gridZIndex||1}).add());if(t||e.isLinked)Jt(i,function(t){s[t]?s[t].addLabel():s[t]=new D(e,t)}),Jt(i,function(e){if(u===0||u===2||{1:"left",3:"right"}[u]===v.align)m=J(s[e].getLabelSize(),m)}),e.staggerLines&&(m+=(e.staggerLines-1)*16);else for(b in s)s[b].destroy(),delete s[b];d&&d.text&&(e.axisTitle||(e.axisTitle=n.text(d.text,0,0,d.useHTML).attr({zIndex:7,rotation:d.rotation||0,align:d.textAlign||{low:"left",middle:"center",high:"right"}[d.align]}).css(d.style).add(e.axisGroup),e.axisTitle.isNew=!0),a&&(f=e.axisTitle.getBBox()[o?"height":"width"],h=p(d.margin,o?5:10),c=d.offset),e.axisTitle[a?"show":"hide"]()),e.offset=y*p(r.offset,g[u]),e.axisTitleMargin=p(c,m+h+(u!==2&&m&&y*r.labels[o?"y":"x"])),g[u]=J(g[u],e.axisTitleMargin+f+y*e.offset)},getLinePath:function(e){var t=this.chart,n=this.opposite,r=this.offset,i=this.horiz,s=this.left+(n?this.width:0)+r,n=t.chartHeight-this.bottom-(n?this.height:0)+r;return t.renderer.crispLine(["M",i?this.left:s,i?n:this.top,"L",i?t.chartWidth-this.right:s,i?n:t.chartHeight-this.bottom],e)},getTitlePosition:function(){var e=this.horiz,t=this.left,r=this.top,i=this.len,s=this.options.title,o=e?t:r,u=this.opposite,a=this.offset,f=n(s.style.fontSize||12),i={low:o+(e?0:i),middle:o+i/2,high:o+(e?i:0)}[s.align],t=(e?r+this.height:t)+(e?1:-1)*(u?-1:1)*this.axisTitleMargin+(this.side===2?f:0);return{x:e?i:t+(u?this.width:0)+a+(s.x||0),y:e?t-(u?this.height:0)+a:i+(s.y||0)}},render:function(){var e=this,t=e.chart,n=t.renderer,r=e.options,i=e.isLog,s=e.isLinked,o=e.tickPositions,u=e.axisTitle,f=e.stacks,c=e.ticks,h=e.minorTicks,p=e.alternateBands,d=r.stackLabels,v=r.alternateGridColor,m=r.lineWidth,g,y=t.hasRendered&&l(e.oldMin)&&!isNaN(e.oldMin),b=e.showAxis,w,E;if(e.hasData||s)if(e.minorTickInterval&&!e.categories&&Jt(e.getMinorTickPositions(),function(t){h[t]||(h[t]=new D(e,t,"minor")),y&&h[t].isNew&&h[t].render(null,!0),h[t].isActive=!0,h[t].render()}),Jt(o.slice(1).concat([o[0]]),function(t,n){n=n===o.length-1?0:n+1;if(!s||t>=e.min&&t<=e.max)c[t]||(c[t]=new D(e,t)),y&&c[t].isNew&&c[t].render(n,!0),c[t].isActive=!0,c[t].render(n)}),v&&Jt(o,function(t,n){n%2===0&&t<e.max&&(p[t]||(p[t]=new P(e)),w=t,E=o[n+1]!==R?o[n+1]:e.max,p[t].options={from:i?a(w):w,to:i?a(E):E,color:v},p[t].render(),p[t].isActive=!0)}),!e._addedPlotLB)Jt((r.plotLines||[]).concat(r.plotBands||[]),function(t){e.addPlotBandOrLine(t)}),e._addedPlotLB=!0;Jt([c,h,p],function(e){for(var t in e)e[t].isActive?e[t].isActive=!1:(e[t].destroy(),delete e[t])}),m&&(g=e.getLinePath(m),e.axisLine?e.axisLine.animate({d:g}):e.axisLine=n.path(g).attr({stroke:r.lineColor,"stroke-width":m,zIndex:7}).add(),e.axisLine[b?"show":"hide"]()),u&&b&&(u[u.isNew?"attr":"animate"](e.getTitlePosition()),u.isNew=!1);if(d&&d.enabled){var S,x,r=e.stackTotalGroup;r||(e.stackTotalGroup=r=n.g("stack-labels").attr({visibility:"visible",zIndex:6}).add()),r.translate(t.plotLeft,t.plotTop);for(S in f)for(x in t=f[S],t)t[x].render(r)}e.isDirty=!1},removePlotBandOrLine:function(e){for(var t=this.plotLinesAndBands,n=t.length;n--;)t[n].id===e&&t[n].destroy()},setTitle:function(e,t){var n=this.chart,r=this.options;r.title=Yt(r.title,e),this.axisTitle=void 0,this.isDirty=!0,p(t,!0)&&n.redraw()},redraw:function(){var e=this.chart;e.tracker.resetTracker&&e.tracker.resetTracker(!0),this.render(),Jt(this.plotLinesAndBands,function(e){e.render()}),Jt(this.series,function(e){e.isDirty=!0})},setCategories:function(e,t){var n=this.chart;this.categories=this.userOptions.categories=e,Jt(this.series,function(e){e.translate(),e.setTooltipPoints(!0)}),this.isDirty=!0,p(t,!0)&&n.redraw()},destroy:function(){var e=this,t=e.stacks,n;en(e);for(n in t)C(t[n]),t[n]=null;Jt([e.ticks,e.minorTicks,e.alternateBands,e.plotLinesAndBands],function(e){C(e)}),Jt(["stackTotalGroup","axisLine","axisGroup","gridGroup","axisTitle"],function(t){e[t]&&(e[t]=e[t].destroy())})}},j.prototype={destroy:function(){Jt(this.crosshairs,function(e){e&&e.destroy()}),this.label&&(this.label=this.label.destroy())},move:function(e,t){var n=this;n.currentX=n.tooltipIsHidden?e:(2*n.currentX+e)/3,n.currentY=n.tooltipIsHidden?t:(n.currentY+t)/2,n.label.attr({x:n.currentX,y:n.currentY}),n.tooltipTick=Q(e-n.currentX)>1||Q(t-n.currentY)>1?function(){n.move(e,t)}:null},hide:function(){if(!this.tooltipIsHidden){var e=this.chart.hoverPoints;this.label.hide(),e&&Jt(e,function(e){e.setState()}),this.chart.hoverPoints=null,this.tooltipIsHidden=!0}},hideCrosshairs:function(){Jt(this.crosshairs,function(e){e&&e.hide()})},getAnchor:function(e,t){var n,r=this.chart,i=r.inverted,s=0,o=0,e=h(e);return n=e[0].tooltipPos,n||(Jt(e,function(e){s+=e.plotX,o+=e.plotLow?(e.plotLow+e.plotHigh)/2:e.plotY}),s/=e.length,o/=e.length,n=[i?r.plotWidth-o:s,this.shared&&!i&&e.length>1&&t?t.chartY-r.plotTop:i?r.plotHeight-s:o]),Gt(n,X)},getPosition:function(e,t,n){var r=this.chart,i=r.plotLeft,s=r.plotTop,o=r.plotWidth,u=r.plotHeight,a=p(this.options.distance,12),f=n.plotX,n=n.plotY,r=f+i+(r.inverted?a:-e-a),l=n-t+s+15,c;return r<7&&(r=i+f+a),r+e>i+o&&(r-=r+e-(i+o),l=n-t+s-a,c=!0),l<s+5&&(l=s+5,c&&n>=l&&n<=l+t&&(l=n+s+a)),l+t>s+u&&(l=J(s,s+u-t-a)),{x:r,y:l}},refresh:function(e,t){function n(){var e=this.points||h(this),t=e[0].series,n;return n=[t.tooltipHeaderFormatter(e[0].key)],Jt(e,function(e){t=e.series,n.push(t.tooltipFormatter&&t.tooltipFormatter(e)||e.point.tooltipFormatter(t.tooltipOptions.pointFormat))}),n.push(s.footerFormat||""),n.join("")}var r=this.chart,i=this.label,s=this.options,o,u,a,f={},l,c=[];l=s.formatter||n;var f=r.hoverPoints,d,v=s.crosshairs;a=this.shared,u=this.getAnchor(e,t),o=u[0],u=u[1],a&&(!e.series||!e.series.noSharedTooltip)?(f&&Jt(f,function(e){e.setState()}),r.hoverPoints=e,Jt(e,function(e){e.setState("hover"),c.push(e.getLabelConfig())}),f={x:e[0].category,y:e[0].y},f.points=c,e=e[0]):f=e.getLabelConfig(),l=l.call(f),f=e.series,a=a||!f.isCartesian||f.tooltipOutsidePlot||r.isInsidePlot(o,u),l===!1||!a?this.hide():(this.tooltipIsHidden&&i.show(),i.attr({text:l}),d=s.borderColor||e.color||f.color||"#606060",i.attr({stroke:d}),i=(s.positioner||this.getPosition).call(this,i.width,i.height,{plotX:o,plotY:u}),this.move(X(i.x),X(i.y)),this.tooltipIsHidden=!1);if(v){v=h(v);for(i=v.length;i--;)if(a=e.series[i?"yAxis":"xAxis"],v[i]&&a)(a=a.getPlotLinePath(i?p(e.stackY,e.y):e.x,1),this.crosshairs[i])?this.crosshairs[i].attr({d:a,visibility:"visible"}):(f={"stroke-width":v[i].width||1,stroke:v[i].color||"#C0C0C0",zIndex:v[i].zIndex||2},v[i].dashStyle&&(f.dashstyle=v[i].dashStyle),this.crosshairs[i]=r.renderer.path(a).attr(f).add())}tn(r,"tooltipRefresh",{text:l,x:o+r.plotLeft,y:u+r.plotTop,borderColor:d})},tick:function(){this.tooltipTick&&this.tooltipTick()}},F.prototype={normalizeMouseEvent:function(t){var n,r,i,t=t||z.event;return t.target||(t.target=t.srcElement),t.originalEvent&&(t=t.originalEvent),t.event&&(t=t.event),i=t.touches?t.touches.item(0):t,this.chartPosition=n=Qt(this.chart.container),i.pageX===R?(r=t.x,n=t.y):(r=i.pageX-n.left,n=i.pageY-n.top),e(t,{chartX:X(r),chartY:X(n)})},getMouseCoordinates:function(e){var t={xAxis:[],yAxis:[]},n=this.chart;return Jt(n.axes,function(r){var i=r.isXAxis;t[i?"xAxis":"yAxis"].push({axis:r,value:r.translate((n.inverted?!i:i)?e.chartX-n.plotLeft:n.plotHeight-e.chartY+n.plotTop,!0)})}),t},onmousemove:function(e){var t=this.chart,n=t.series,r,i,s=t.hoverPoint,o=t.hoverSeries,u,a,f=t.chartWidth,l=t.inverted?t.plotHeight+t.plotTop-e.chartY:e.chartX-t.plotLeft;if(t.tooltip&&this.options.tooltip.shared&&(!o||!o.noSharedTooltip)){i=[],u=n.length;for(a=0;a<u;a++)n[a].visible&&n[a].options.enableMouseTracking!==!1&&!n[a].noSharedTooltip&&n[a].tooltipPoints.length&&(r=n[a].tooltipPoints[l],r._dist=Q(l-r.plotX),f=K(f,r._dist),i.push(r));for(u=i.length;u--;)i[u]._dist>f&&i.splice(u,1);i.length&&i[0].plotX!==this.hoverX&&(t.tooltip.refresh(i,e),this.hoverX=i[0].plotX)}o&&o.tracker&&(r=o.tooltipPoints[l])&&r!==s&&r.onMouseOver()},resetTracker:function(e){var t=this.chart,n=t.hoverSeries,r=t.hoverPoint,i=t.hoverPoints||r,t=t.tooltip;(e=e&&t&&i)&&h(i)[0].plotX===R&&(e=!1),e?t.refresh(i):(r&&r.onMouseOut(),n&&n.onMouseOut(),t&&(t.hide(),t.hideCrosshairs()),this.hoverX=null)},setDOMEvents:function(){function t(){if(n.selectionMarker){var e={xAxis:[],yAxis:[]},o=n.selectionMarker.getBBox(),u=o.x-r.plotLeft,a=o.y-r.plotTop,f;s&&(Jt(r.axes,function(t){if(t.options.zoomEnabled!==!1){var n=t.isXAxis,i=r.inverted?!n:n,s=t.translate(i?u:r.plotHeight-a-o.height,!0,0,0,1),i=t.translate(i?u+o.width:r.plotHeight-a,!0,0,0,1);!isNaN(s)&&!isNaN(i)&&(e[n?"xAxis":"yAxis"].push({axis:t,min:K(s,i),max:J(s,i)}),f=!0)}}),f&&tn(r,"selection",e,function(e){r.zoom(e)})),n.selectionMarker=n.selectionMarker.destroy()}r&&(d(i,{cursor:"auto"}),r.cancelClick=s,r.mouseIsDown=s=!1),en(U,lt?"touchend":"mouseup",t)}var n=this,r=n.chart,i=r.container,s,o=n.zoomX&&!r.inverted||n.zoomY&&r.inverted,u=n.zoomY&&!r.inverted||n.zoomX&&r.inverted;n.hideTooltipOnMouseMove=function(e){nn(e),n.chartPosition&&r.hoverSeries&&r.hoverSeries.isCartesian&&!r.isInsidePlot(e.pageX-n.chartPosition.left-r.plotLeft,e.pageY-n.chartPosition.top-r.plotTop)&&n.resetTracker()},n.hideTooltipOnMouseLeave=function(){n.resetTracker(),n.chartPosition=null},i.onmousedown=function(e){e=n.normalizeMouseEvent(e),!lt&&e.preventDefault&&e.preventDefault(),r.mouseIsDown=!0,r.cancelClick=!1,r.mouseDownX=n.mouseDownX=e.chartX,n.mouseDownY=e.chartY,Zt(U,lt?"touchend":"mouseup",t)};var a=function(e){if(!e||!(e.touches&&e.touches.length>1)){e=n.normalizeMouseEvent(e),lt||(e.returnValue=!1);var t=e.chartX,i=e.chartY,a=!r.isInsidePlot(t-r.plotLeft,i-r.plotTop);lt&&e.type==="touchstart"&&(c(e.target,"isTracker")?r.runTrackerClick||e.preventDefault():!r.runChartClick&&!a&&e.preventDefault()),a&&(t<r.plotLeft?t=r.plotLeft:t>r.plotLeft+r.plotWidth&&(t=r.plotLeft+r.plotWidth),i<r.plotTop?i=r.plotTop:i>r.plotTop+r.plotHeight&&(i=r.plotTop+r.plotHeight));if(r.mouseIsDown&&e.type!=="touchstart"){if(s=Math.sqrt(Math.pow(n.mouseDownX-t,2)+Math.pow(n.mouseDownY-i,2)),s>10){e=r.isInsidePlot(n.mouseDownX-r.plotLeft,n.mouseDownY-r.plotTop),r.hasCartesianSeries&&(n.zoomX||n.zoomY)&&e&&!n.selectionMarker&&(n.selectionMarker=r.renderer.rect(r.plotLeft,r.plotTop,o?1:r.plotWidth,u?1:r.plotHeight,0).attr({fill:n.options.chart.selectionMarkerFill||"rgba(69,114,167,0.25)",zIndex:7}).add());if(n.selectionMarker&&o){var f=t-n.mouseDownX;n.selectionMarker.attr({width:Q(f),x:(f>0?0:f)+n.mouseDownX})}n.selectionMarker&&u&&(i-=n.mouseDownY,n.selectionMarker.attr({height:Q(i),y:(i>0?0:i)+n.mouseDownY})),e&&!n.selectionMarker&&n.options.chart.panning&&r.pan(t)}}else a||n.onmousemove(e);return a||!r.hasCartesianSeries}};i.onmousemove=a,Zt(i,"mouseleave",n.hideTooltipOnMouseLeave),Zt(U,"mousemove",n.hideTooltipOnMouseMove),i.ontouchstart=function(e){(n.zoomX||n.zoomY)&&i.onmousedown(e),a(e)},i.ontouchmove=a,i.ontouchend=function(){s&&n.resetTracker()},i.onclick=function(t){var i=r.hoverPoint,s,o,t=n.normalizeMouseEvent(t);t.cancelBubble=!0,r.cancelClick||(i&&(c(t.target,"isTracker")||c(t.target.parentNode,"isTracker"))?(s=i.plotX,o=i.plotY,e(i,{pageX:n.chartPosition.left+r.plotLeft+(r.inverted?r.plotWidth-o:s),pageY:n.chartPosition.top+r.plotTop+(r.inverted?r.plotHeight-s:o)}),tn(i.series,"click",e(t,{point:i})),i.firePointEvent("click",t)):(e(t,n.getMouseCoordinates(t)),r.isInsidePlot(t.chartX-r.plotLeft,t.chartY-r.plotTop)&&tn(r,"click",t)))}},destroy:function(){var e=this.chart,t=e.container;e.trackerGroup&&(e.trackerGroup=e.trackerGroup.destroy()),en(t,"mouseleave",this.hideTooltipOnMouseLeave),en(U,"mousemove",this.hideTooltipOnMouseMove),t.onclick=t.onmousedown=t.onmousemove=t.ontouchstart=t.ontouchend=t.ontouchmove=null,clearInterval(this.tooltipInterval)},init:function(e,t){e.trackerGroup||(e.trackerGroup=e.renderer.g("tracker").attr({zIndex:9}).add()),t.enabled&&(e.tooltip=new j(e,t),this.tooltipInterval=setInterval(function(){e.tooltip.tick()},32)),this.setDOMEvents()}},I.prototype={init:function(e){var t=this,r=t.options=e.options.legend;if(r.enabled){var i=r.itemStyle,s=p(r.padding,8),o=r.itemMarginTop||0;t.baseline=n(i.fontSize)+3+o,t.itemStyle=i,t.itemHiddenStyle=Yt(i,r.itemHiddenStyle),t.itemMarginTop=o,t.padding=s,t.initialItemX=s,t.initialItemY=s-5,t.maxItemWidth=0,t.chart=e,t.itemHeight=0,t.lastLineHeight=0,t.render(),Zt(t.chart,"endResize",function(){t.positionCheckboxes()})}},colorizeItem:function(e,t){var n=this.options,r=e.legendItem,i=e.legendLine,s=e.legendSymbol,o=this.itemHiddenStyle.color,n=t?n.itemStyle.color:o,o=t?e.color:o;r&&r.css({fill:n}),i&&i.attr({stroke:o}),s&&s.attr({stroke:o,fill:o})},positionItem:function(e){var t=this.options,n=t.symbolPadding,t=!t.rtl,r=e._legendItemPos,i=r[0],r=r[1],s=e.checkbox;e.legendGroup&&e.legendGroup.translate(t?i:this.legendWidth-i-2*n-4,r),s&&(s.x=i,s.y=r)},destroyItem:function(e){var t=e.checkbox;Jt(["legendItem","legendLine","legendSymbol","legendGroup"],function(t){e[t]&&e[t].destroy()}),t&&k(e.checkbox)},destroy:function(){var e=this.group,t=this.box;t&&(this.box=t.destroy()),e&&(this.group=e.destroy())},positionCheckboxes:function(){var e=this;Jt(e.allItems,function(t){var n=t.checkbox,r=e.group.alignAttr;n&&d(n,{left:r.translateX+t.legendItemWidth+n.x-20+"px",top:r.translateY+n.y+3+"px"})})},renderItem:function(e){var t,n=this,r=n.chart,i=r.renderer,s=n.options,o=s.layout==="horizontal",u=s.symbolWidth,a=s.symbolPadding,f=n.itemStyle,l=n.itemHiddenStyle,c=n.padding,h=!s.rtl,p=s.width,d=s.itemMarginBottom||0,m=n.itemMarginTop,g=n.initialItemX,y=e.legendItem,b=e.series||e,w=b.options,E=w.showCheckbox;!y&&(e.legendGroup=i.g("legend-item").attr({zIndex:1}).add(n.scrollGroup),b.drawLegendSymbol(n,e),e.legendItem=y=i.text(s.labelFormatter.call(e),h?u+a:-a,n.baseline,s.useHTML).css(Yt(e.visible?f:l)).attr({align:h?"left":"right",zIndex:2}).add(e.legendGroup),e.legendGroup.on("mouseover",function(){e.setState("hover"),y.css(n.options.itemHoverStyle)}).on("mouseout",function(){y.css(e.visible?f:l),e.setState()}).on("click",function(t){var n=function(){e.setVisible()},t={browserEvent:t};e.firePointEvent?e.firePointEvent("legendItemClick",t,n):tn(e,"legendItemClick",t,n)}),n.colorizeItem(e,e.visible),w&&E)&&(e.checkbox=v("input",{type:"checkbox",checked:e.selected,defaultChecked:e.selected},s.itemCheckboxStyle,r.container),Zt(e.checkbox,"click",function(t){tn(e,"checkboxClick",{checked:t.target.checked},function(){e.select()})})),i=y.getBBox(),t=e.legendItemWidth=s.itemWidth||u+a+i.width+c+(E?20:0),s=t,n.itemHeight=u=i.height,o&&n.itemX-g+s>(p||r.chartWidth-2*c-g)&&(n.itemX=g,n.itemY+=m+n.lastLineHeight+d,n.lastLineHeight=0),n.maxItemWidth=J(n.maxItemWidth,s),n.lastItemY=m+n.itemY+d,n.lastLineHeight=J(u,n.lastLineHeight),e._legendItemPos=[n.itemX,n.itemY],o?n.itemX+=s:(n.itemY+=m+u+d,n.lastLineHeight=u),n.offsetWidth=p||J(o?n.itemX-g:s,n.offsetWidth)},render:function(){var t=this,n=t.chart,r=n.renderer,i=t.group,s,o,u,a,f=t.box,l=t.options,c=t.padding,h=l.borderWidth,p=l.backgroundColor;t.itemX=t.initialItemX,t.itemY=t.initialItemY,t.offsetWidth=0,t.lastItemY=0,i||(t.group=i=r.g("legend").attr({zIndex:7}).add(),t.contentGroup=r.g().attr({zIndex:1}).add(i),t.scrollGroup=r.g().add(t.contentGroup),t.clipRect=r.clipRect(0,0,9999,n.chartHeight),t.contentGroup.clip(t.clipRect)),s=[],Jt(n.series,function(e){var t=e.options;t.showInLegend&&(s=s.concat(e.legendItems||(t.legendType==="point"?e.data:e)))}),x(s,function(e,t){return(e.options.legendIndex||0)-(t.options.legendIndex||0)}),l.reversed&&s.reverse(),t.allItems=s,t.display=o=!!s.length,Jt(s,function(e){t.renderItem(e)}),u=l.width||t.offsetWidth,a=t.lastItemY+t.lastLineHeight,a=t.handleOverflow(a);if(h||p)u+=c,a+=c,f?u>0&&a>0&&(f[f.isNew?"attr":"animate"](f.crisp(null,null,null,u,a)),f.isNew=!1):(t.box=f=r.rect(0,0,u,a,l.borderRadius,h||0).attr({stroke:l.borderColor,"stroke-width":h||0,fill:p||Et}).add(i).shadow(l.shadow),f.isNew=!0),f[o?"show":"hide"]();t.legendWidth=u,t.legendHeight=a,Jt(s,function(e){t.positionItem(e)}),o&&i.align(e({width:u,height:a},l),!0,n.spacingBox),n.isResizing||this.positionCheckboxes()},handleOverflow:function(e){var t=this,n=this.chart,r=n.renderer,i=this.options,s=i.y,s=n.spacingBox.height+(i.verticalAlign==="top"?-s:s)-this.padding,o=i.maxHeight,u=this.clipRect,a=i.navigation,f=p(a.animation,!0),l=a.arrowSize||12,c=this.nav;return i.layout==="horizontal"&&(s/=2),o&&(s=K(s,o)),e>s?(this.clipHeight=n=s-20,this.pageCount=$(e/n),this.currentPage=p(this.currentPage,1),this.fullHeight=e,u.attr({height:n}),c||(this.nav=c=r.g().attr({zIndex:1}).add(this.group),this.up=r.symbol("triangle",0,0,l,l).on("click",function(){t.scroll(-1,f)}).add(c),this.pager=r.text("",15,10).css(a.style).add(c),this.down=r.symbol("triangle-down",0,0,l,l).on("click",function(){t.scroll(1,f)}).add(c)),t.scroll(0),e=s):c&&(u.attr({height:n.chartHeight}),c.hide(),this.scrollGroup.attr({translateY:1})),e},scroll:function(e,t){var n=this.pageCount,r=this.currentPage+e,i=this.clipHeight,s=this.options.navigation,o=s.activeColor,s=s.inactiveColor,u=this.pager,a=this.padding;r>n&&(r=n),r>0&&(t!==R&&O(t,this.chart),this.nav.attr({translateX:a,translateY:i+7,visibility:"visible"}),this.up.attr({fill:r===1?s:o}).css({cursor:r===1?"default":"pointer"}),u.attr({text:r+"/"+this.pageCount}),this.down.attr({x:18+this.pager.getBBox().width,fill:r===n?s:o}).css({cursor:r===n?"default":"pointer"}),this.scrollGroup.animate({translateY:-K(i*(r-1),this.fullHeight-i+a)+1}),u.attr({text:r+"/"+n}),this.currentPage=r)}},q.prototype={initSeries:function(e){var t=this.options.chart,t=new zt[e.type||t.type||t.defaultSeriesType];return t.init(this,e),t},addSeries:function(e,t,n){var r=this;e&&(O(n,r),t=p(t,!0),tn(r,"addSeries",{options:e},function(){r.initSeries(e),r.isDirtyLegend=!0,t&&r.redraw()}))},isInsidePlot:function(e,t){return e>=0&&e<=this.plotWidth&&t>=0&&t<=this.plotHeight},adjustTickAmounts:function(){this.options.chart.alignTicks!==!1&&Jt(this.axes,function(e){e.adjustTickAmount()}),this.maxTicks=null},redraw:function(e){var t=this.axes,n=this.series,r=this.tracker,i=this.legend,s=this.isDirtyLegend,o,u=this.isDirtyBox,a=n.length,f=a,l=this.clipRect,c=this.renderer,h=c.isHidden();O(e,this);for(h&&this.cloneRenderTo();f--;)if(e=n[f],e.isDirty&&e.options.stacking){o=!0;break}if(o)for(f=a;f--;)if(e=n[f],e.options.stacking)e.isDirty=!0;Jt(n,function(e){e.isDirty&&e.options.legendType==="point"&&(s=!0)}),s&&i.options.enabled&&(i.render(),this.isDirtyLegend=!1),this.hasCartesianSeries&&(this.isResizing||(this.maxTicks=null,Jt(t,function(e){e.setScale()})),this.adjustTickAmounts(),this.getMargins(),Jt(t,function(e){e.isDirtyExtremes&&(e.isDirtyExtremes=!1,tn(e,"afterSetExtremes",e.getExtremes()));if(e.isDirty||u||o)e.redraw(),u=!0})),u&&(this.drawChartBox(),l&&(sn(l),l.animate({width:this.plotSizeX,height:this.plotSizeY+1}))),Jt(n,function(e){e.isDirty&&e.visible&&(!e.isCartesian||e.xAxis)&&e.redraw()}),r&&r.resetTracker&&r.resetTracker(!0),c.draw(),tn(this,"redraw"),h&&this.cloneRenderTo(!0)},showLoading:function(t){var n=this.options,r=this.loadingDiv,i=n.loading;r||(this.loadingDiv=r=v(wt,{className:"highcharts-loading"},e(i.style,{left:this.plotLeft+"px",top:this.plotTop+"px",width:this.plotWidth+"px",height:this.plotHeight+"px",zIndex:10,display:Et}),this.container),this.loadingSpan=v("span",null,i.labelStyle,r)),this.loadingSpan.innerHTML=t||n.lang.loading,this.loadingShown||(d(r,{opacity:0,display:""}),rn(r,{opacity:i.style.opacity},{duration:i.showDuration||0}),this.loadingShown=!0)},hideLoading:function(){var e=this.options,t=this.loadingDiv;t&&rn(t,{opacity:0},{duration:e.loading.hideDuration||100,complete:function(){d(t,{display:Et})}}),this.loadingShown=!1},get:function(e){var t=this.axes,n=this.series,r,i;for(r=0;r<t.length;r++)if(t[r].options.id===e)return t[r];for(r=0;r<n.length;r++)if(n[r].options.id===e)return n[r];for(r=0;r<n.length;r++){i=n[r].points||[];for(t=0;t<i.length;t++)if(i[t].id===e)return i[t]}return null},getAxes:function(){var e=this,t=this.options,n=t.xAxis||{},t=t.yAxis||{},n=h(n);Jt(n,function(e,t){e.index=t,e.isX=!0}),t=h(t),Jt(t,function(e,t){e.index=t}),n=n.concat(t),Jt(n,function(t){new B(e,t)}),e.adjustTickAmounts()},getSelectedPoints:function(){var e=[];return Jt(this.series,function(t){e=e.concat(Kt(t.points,function(e){return e.selected}))}),e},getSelectedSeries:function(){return Kt(this.series,function(e){return e.selected})},showResetZoom:function(){var e=this,t=dt.lang,n=e.options.chart.resetZoomButton,r=n.theme,i=r.states,s=n.relativeTo==="chart"?null:{x:e.plotLeft,y:e.plotTop,width:e.plotWidth,height:e.plotHeight};this.resetZoomButton=e.renderer.button(t.resetZoom,null,null,function(){e.zoomOut()},r,i&&i.hover).attr({align:n.position.align,title:t.resetZoomTitle}).add().align(n.position,!1,s)},zoomOut:function(){var e=this,t=e.resetZoomButton;tn(e,"selection",{resetSelection:!0},function(){e.zoom()}),t&&(e.resetZoomButton=t.destroy())},zoom:function(e){var t=this,n=t.options.chart,r;t.resetZoomEnabled!==!1&&!t.resetZoomButton&&t.showResetZoom(),!e||e.resetSelection?Jt(t.axes,function(e){e.options.zoomEnabled!==!1&&(e.setExtremes(null,null,!1),r=!0)}):Jt(e.xAxis.concat(e.yAxis),function(e){var n=e.axis;t.tracker[n.isXAxis?"zoomX":"zoomY"]&&(n.setExtremes(e.min,e.max,!1),r=!0)}),r&&t.redraw(p(n.animation,t.pointCount<100))},pan:function(e){var t=this.xAxis[0],n=this.mouseDownX,r=t.pointRange/2,i=t.getExtremes(),s=t.translate(n-e,!0)+r,n=t.translate(n+this.plotWidth-e,!0)-r;(r=this.hoverPoints)&&Jt(r,function(e){e.setState()}),t.series.length&&s>K(i.dataMin,i.min)&&n<J(i.dataMax,i.max)&&t.setExtremes(s,n,!0,!1),this.mouseDownX=e,d(this.container,{cursor:"move"})},setTitle:function(e,t){var n=this,r=n.options,i;n.chartTitleOptions=i=Yt(r.title,e),n.chartSubtitleOptions=r=Yt(r.subtitle,t),Jt([["title",e,i],["subtitle",t,r]],function(e){var t=e[0],r=n[t],i=e[1],e=e[2];r&&i&&(r=r.destroy()),e&&e.text&&!r&&(n[t]=n.renderer.text(e.text,0,0,e.useHTML).attr({align:e.align,"class":"highcharts-"+t,zIndex:e.zIndex||4}).css(e.style).add().align(e,!1,n.spacingBox))})},getChartSize:function(){var e=this.options.chart,t=this.renderToClone||this.renderTo;this.containerWidth=Vt(t,"width"),this.containerHeight=Vt(t,"height"),this.chartWidth=e.width||this.containerWidth||600,this.chartHeight=e.height||(this.containerHeight>19?this.containerHeight:400)},cloneRenderTo:function(e){var t=this.renderToClone,n=this.container;e?t&&(this.renderTo.appendChild(n),k(t),delete this.renderToClone):(n&&this.renderTo.removeChild(n),this.renderToClone=t=this.renderTo.cloneNode(0),d(t,{position:"absolute",top:"-9999px",display:"block"}),U.body.appendChild(t),n&&t.appendChild(n))},getContainer:function(){var t,n=this.options.chart,i,s,o;this.renderTo=t=n.renderTo,o="highcharts-"+ht++,r(t)&&(this.renderTo=t=U.getElementById(t)),t||L(13,!0),t.innerHTML="",t.offsetWidth||this.cloneRenderTo(),this.getChartSize(),i=this.chartWidth,s=this.chartHeight,this.container=t=v(wt,{className:"highcharts-container"+(n.className?" "+n.className:""),id:o},e({position:"relative",overflow:"hidden",width:i+"px",height:s+"px",textAlign:"left",lineHeight:"normal"},n.style),this.renderToClone||t),this.renderer=n.forExport?new cn(t,i,s,!0):new ft(t,i,s),at&&this.renderer.create(this,t,i,s)},getMargins:function(){var e=this.options.chart,t=e.spacingTop,n=e.spacingRight,r=e.spacingBottom,e=e.spacingLeft,i,s=this.legend,o=this.optionsMarginTop,u=this.optionsMarginLeft,a=this.optionsMarginRight,f=this.optionsMarginBottom,c=this.chartTitleOptions,h=this.chartSubtitleOptions,d=this.options.legend,v=p(d.margin,10),m=d.x,g=d.y,y=d.align,b=d.verticalAlign;this.resetMargins(),i=this.axisOffset,(this.title||this.subtitle)&&!l(this.optionsMarginTop)&&(h=J(this.title&&!c.floating&&!c.verticalAlign&&c.y||0,this.subtitle&&!h.floating&&!h.verticalAlign&&h.y||0))&&(this.plotTop=J(this.plotTop,h+p(c.margin,15)+t)),s.display&&!d.floating&&(y==="right"?l(a)||(this.marginRight=J(this.marginRight,s.legendWidth-m+v+n)):y==="left"?l(u)||(this.plotLeft=J(this.plotLeft,s.legendWidth+m+v+e)):b==="top"?l(o)||(this.plotTop=J(this.plotTop,s.legendHeight+g+v+t)):b==="bottom"&&!l(f)&&(this.marginBottom=J(this.marginBottom,s.legendHeight-g+v+r))),this.extraBottomMargin&&(this.marginBottom+=this.extraBottomMargin),this.extraTopMargin&&(this.plotTop+=this.extraTopMargin),this.hasCartesianSeries&&Jt(this.axes,function(e){e.getOffset()}),l(u)||(this.plotLeft+=i[3]),l(o)||(this.plotTop+=i[0]),l(f)||(this.marginBottom+=i[2]),l(a)||(this.marginRight+=i[1]),this.setChartSize()},initReflow:function(){function e(e){var s=n.width||Vt(r,"width"),o=n.height||Vt(r,"height"),e=e?e.target:z;if(s&&o&&(e===z||e===U)){if(s!==t.containerWidth||o!==t.containerHeight)clearTimeout(i),i=setTimeout(function(){t.resize(s,o,!1)},100);t.containerWidth=s,t.containerHeight=o}}var t=this,n=t.options.chart,r=t.renderTo,i;Zt(z,"resize",e),Zt(t,"destroy",function(){en(z,"resize",e)})},fireEndResize:function(){var e=this;e&&tn(e,"endResize",null,function(){e.isResizing-=1})},resize:function(e,t,n){var r,i,s=this.title,o=this.subtitle;this.isResizing+=1,O(n,this),this.oldChartHeight=this.chartHeight,this.oldChartWidth=this.chartWidth,l(e)&&(this.chartWidth=r=X(e)),l(t)&&(this.chartHeight=i=X(t)),d(this.container,{width:r+"px",height:i+"px"}),this.renderer.setSize(r,i,n),this.plotWidth=r-this.plotLeft-this.marginRight,this.plotHeight=i-this.plotTop-this.marginBottom,this.maxTicks=null,Jt(this.axes,function(e){e.isDirty=!0,e.setScale()}),Jt(this.series,function(e){e.isDirty=!0}),this.isDirtyBox=this.isDirtyLegend=!0,this.getMargins(),e=this.spacingBox,s&&s.align(null,null,e),o&&o.align(null,null,e),this.redraw(n),this.oldChartHeight=null,tn(this,"resize"),mt===!1?this.fireEndResize():setTimeout(this.fireEndResize,mt&&mt.duration||500)},setChartSize:function(){var e=this.inverted,t=this.chartWidth,n=this.chartHeight,r=this.options.chart,i=r.spacingTop,s=r.spacingRight,o=r.spacingBottom,r=r.spacingLeft;this.plotLeft=X(this.plotLeft),this.plotTop=X(this.plotTop),this.plotWidth=X(t-this.plotLeft-this.marginRight),this.plotHeight=X(n-this.plotTop-this.marginBottom),this.plotSizeX=e?this.plotHeight:this.plotWidth,this.plotSizeY=e?this.plotWidth:this.plotHeight,this.spacingBox={x:r,y:i,width:t-r-s,height:n-i-o},Jt(this.axes,function(e){e.setAxisSize(),e.setAxisTranslation()})},resetMargins:function(){var e=this.options.chart,t=e.spacingRight,n=e.spacingBottom,r=e.spacingLeft;this.plotTop=p(this.optionsMarginTop,e.spacingTop),this.marginRight=p(this.optionsMarginRight,t),this.marginBottom=p(this.optionsMarginBottom,n),this.plotLeft=p(this.optionsMarginLeft,r),this.axisOffset=[0,0,0,0]},drawChartBox:function(){var e=this.options.chart,t=this.renderer,n=this.chartWidth,r=this.chartHeight,i=this.chartBackground,s=this.plotBackground,o=this.plotBorder,u=this.plotBGImage,a=e.borderWidth||0,f=e.backgroundColor,l=e.plotBackgroundColor,c=e.plotBackgroundImage,h,p={x:this.plotLeft,y:this.plotTop,width:this.plotWidth,height:this.plotHeight};h=a+(e.shadow?8:0);if(a||f)i?i.animate(i.crisp(null,null,null,n-h,r-h)):(i={fill:f||Et},a&&(i.stroke=e.borderColor,i["stroke-width"]=a),this.chartBackground=t.rect(h/2,h/2,n-h,r-h,e.borderRadius,a).attr(i).add().shadow(e.shadow));l&&(s?s.animate(p):this.plotBackground=t.rect(this.plotLeft,this.plotTop,this.plotWidth,this.plotHeight,0).attr({fill:l}).add().shadow(e.plotShadow)),c&&(u?u.animate(p):this.plotBGImage=t.image(c,this.plotLeft,this.plotTop,this.plotWidth,this.plotHeight).add()),e.plotBorderWidth&&(o?o.animate(o.crisp(null,this.plotLeft,this.plotTop,this.plotWidth,this.plotHeight)):this.plotBorder=t.rect(this.plotLeft,this.plotTop,this.plotWidth,this.plotHeight,0,e.plotBorderWidth).attr({stroke:e.plotBorderColor,"stroke-width":e.plotBorderWidth,zIndex:4}).add()),this.isDirtyBox=!1},propFromSeries:function(){var e=this,t=e.options.chart,n,r=e.options.series,i,s;Jt(["inverted","angular","polar"],function(o){n=zt[t.type||t.defaultSeriesType],s=e[o]||t[o]||n&&n.prototype[o];for(i=r&&r.length;!s&&i--;)(n=zt[r[i].type])&&n.prototype[o]&&(s=!0);e[o]=s})},render:function(){var t=this,r=t.axes,i=t.renderer,s=t.options,o=s.labels,s=s.credits,u;t.setTitle(),t.legend=new I(t),Jt(r,function(e){e.setScale()}),t.getMargins(),t.maxTicks=null,Jt(r,function(e){e.setTickPositions(!0),e.setMaxTicks()}),t.adjustTickAmounts(),t.getMargins(),t.drawChartBox(),t.hasCartesianSeries&&Jt(r,function(e){e.render()}),t.seriesGroup||(t.seriesGroup=i.g("series-group").attr({zIndex:3}).add()),Jt(t.series,function(e){e.translate(),e.setTooltipPoints(),e.render()}),o.items&&Jt(o.items,function(){var r=e(o.style,this.style),s=n(r.left)+t.plotLeft,u=n(r.top)+t.plotTop+12;delete r.left,delete r.top,i.text(this.html,s,u).attr({zIndex:2}).css(r).add()}),s.enabled&&!t.credits&&(u=s.href,t.credits=i.text(s.text,0,0).on("click",function(){u&&(location.href=u)}).attr({align:s.position.align,zIndex:8}).css(s.style).add().align(s.position)),t.hasRendered=!0},destroy:function(){var e=this,t=e.axes,n=e.series,r=e.container,i,s=r&&r.parentNode;if(e!==null){tn(e,"destroy"),en(e);for(i=t.length;i--;)t[i]=t[i].destroy();for(i=n.length;i--;)n[i]=n[i].destroy();Jt("title,subtitle,chartBackground,plotBackground,plotBGImage,plotBorder,seriesGroup,clipRect,credits,tracker,scroller,rangeSelector,legend,resetZoomButton,tooltip,renderer".split(","),function(t){var n=e[t];n&&(e[t]=n.destroy())}),r&&(r.innerHTML="",en(r),s&&k(r),r=null);for(i in e)delete e[i];e=e.options=null}},firstRender:function(){var e=this,t=e.options,n=e.callback;!ot&&z==z.top&&U.readyState!=="complete"||at&&!z.canvg?at?vn.push(function(){e.firstRender()},t.global.canvasToolsURL):U.attachEvent("onreadystatechange",function(){U.detachEvent("onreadystatechange",e.firstRender),U.readyState==="complete"&&e.firstRender()}):(e.getContainer(),tn(e,"init"),Highcharts.RangeSelector&&t.rangeSelector.enabled&&(e.rangeSelector=new Highcharts.RangeSelector(e)),e.resetMargins(),e.setChartSize(),e.propFromSeries(),e.getAxes(),Jt(t.series||[],function(t){e.initSeries(t)}),Highcharts.Scroller&&(t.navigator.enabled||t.scrollbar.enabled)&&(e.scroller=new Highcharts.Scroller(e)),e.tracker=new F(e,t),e.render(),e.renderer.draw(),n&&n.apply(e,[e]),Jt(e.callbacks,function(t){t.apply(e,[e])}),e.cloneRenderTo(!0),tn(e,"load"))},init:function(e){var t=this.options.chart,n;t.reflow!==!1&&Zt(this,"load",this.initReflow);if(e)for(n in e)Zt(this,n,e[n]);this.xAxis=[],this.yAxis=[],this.animation=at?!1:p(t.animation,!0),this.setSize=this.resize,this.pointCount=0,this.counters=new S,this.firstRender()}},q.prototype.callbacks=[];var mn=function(){};mn.prototype={init:function(e,t,n){var r=e.chart.counters;return this.series=e,this.applyOptions(t,n),this.pointAttr={},e.options.colorByPoint&&(t=e.chart.options.colors,this.options||(this.options={}),this.color=this.options.color=this.color||t[r.color++],r.wrapColor(t.length)),e.chart.pointCount++,this},applyOptions:function(t,n){var r=this.series,i=typeof t;this.config=t;if(i==="number"||t===null)this.y=t;else if(typeof t[0]=="number")this.x=t[0],this.y=t[1];else if(i==="object"&&typeof t.length!="number"){if(e(this,t),this.options=t,t.dataLabels)r._hasPointLabels=!0}else typeof t[0]=="string"&&(this.name=t[0],this.y=t[1]);this.x===R&&(this.x=n===R?r.autoIncrement():n)},destroy:function(){var e=this.series.chart,t=e.hoverPoints,n;e.pointCount--,t&&(this.setState(),f(t,this),!t.length)&&(e.hoverPoints=null),this===e.hoverPoint&&this.onMouseOut();if(this.graphic||this.dataLabel)en(this),this.destroyElements();this.legendItem&&e.legend.destroyItem(this);for(n in this)this[n]=null},destroyElements:function(){for(var e="graphic,tracker,dataLabel,group,connector,shadowGroup".split(","),t,n=6;n--;)t=e[n],this[t]&&(this[t]=this[t].destroy())},getLabelConfig:function(){return{x:this.category,y:this.y,key:this.name||this.category,series:this.series,point:this,percentage:this.percentage,total:this.total||this.stackTotal}},select:function(e,t){var n=this,r=n.series.chart,e=p(e,!n.selected);n.firePointEvent(e?"select":"unselect",{accumulate:t},function(){n.selected=e,n.setState(e&&"select"),t||Jt(r.getSelectedPoints(),function(e){e.selected&&e!==n&&(e.selected=!1,e.setState(""),e.firePointEvent("unselect"))})})},onMouseOver:function(){var e=this.series,t=e.chart,n=t.tooltip,r=t.hoverPoint;r&&r!==this&&r.onMouseOut(),this.firePointEvent("mouseOver"),n&&(!n.shared||e.noSharedTooltip)&&n.refresh(this),this.setState("hover"),t.hoverPoint=this},onMouseOut:function(){this.firePointEvent("mouseOut"),this.setState(),this.series.chart.hoverPoint=null},tooltipFormatter:function(e){var t=this.series,n=t.tooltipOptions,i=e.match(/\{(series|point)\.[a-zA-Z]+\}/g),s=/[{\.}]/,o,u,a,f,l={y:0,open:0,high:0,low:0,close:0,percentage:1,total:1};n.valuePrefix=n.valuePrefix||n.yPrefix,n.valueDecimals=n.valueDecimals||n.yDecimals,n.valueSuffix=n.valueSuffix||n.ySuffix;for(f in i)u=i[f],r(u)&&u!==e&&(a=(" "+u).split(s),o={point:this,series:t}[a[1]],a=a[2],o===this&&l.hasOwnProperty(a)?(o=l[a]?a:"value",o=(n[o+"Prefix"]||"")+g(this[a],p(n[o+"Decimals"],-1))+(n[o+"Suffix"]||"")):o=o[a],e=e.replace(u,o));return e},update:function(e,t,n){var r=this,s=r.series,o=r.graphic,u,a=s.data,f=a.length,l=s.chart,t=p(t,!0);r.firePointEvent("update",{options:e},function(){r.applyOptions(e),i(e)&&(s.getAttribs(),o&&o.attr(r.pointAttr[s.state]));for(u=0;u<f;u++)if(a[u]===r){s.xData[u]=r.x,s.yData[u]=r.y,s.options.data[u]=e;break}s.isDirty=!0,s.isDirtyData=!0,t&&l.redraw(n)})},remove:function(e,t){var n=this,r=n.series,i=r.chart,s,o=r.data,u=o.length;O(t,i),e=p(e,!0),n.firePointEvent("remove",null,function(){for(s=0;s<u;s++)if(o[s]===n){o.splice(s,1),r.options.data.splice(s,1),r.xData.splice(s,1),r.yData.splice(s,1);break}n.destroy(),r.isDirty=!0,r.isDirtyData=!0,e&&i.redraw()})},firePointEvent:function(e,t,n){var r=this,i=this.series.options;(i.point.events[e]||r.options&&r.options.events&&r.options.events[e])&&this.importEvents(),e==="click"&&i.allowPointSelect&&(n=function(e){r.select(null,e.ctrlKey||e.metaKey||e.shiftKey)}),tn(this,e,t,n)},importEvents:function(){if(!this.hasImportedEvents){var e=Yt(this.series.options.point,this.options).events,t;this.events=e;for(t in e)Zt(this,t,e[t]);this.hasImportedEvents=!0}},setState:function(e){var t=this.plotX,n=this.plotY,r=this.series,i=r.options.states,s=fn[r.type].marker&&r.options.marker,o=s&&!s.enabled,u=s&&s.states[e],a=u&&u.enabled===!1,f=r.stateMarkerGraphic,l=r.chart,c=this.pointAttr,e=e||"";e===this.state||this.selected&&e!=="select"||i[e]&&i[e].enabled===!1||e&&(a||o&&!u.enabled)||(this.graphic?(i=s&&this.graphic.symbolName&&c[e].r,this.graphic.attr(Yt(c[e],i?{x:t-i,y:n-i,width:2*i,height:2*i}:{}))):(e&&u&&(f||(i=u.radius,r.stateMarkerGraphic=f=l.renderer.symbol(r.symbol,-i,-i,2*i,2*i).attr(c[e]).add(r.group)),f.translate(t,n)),f&&f[e?"show":"hide"]()),this.state=e)}};var gn=function(){};gn.prototype={isCartesian:!0,type:"line",pointClass:mn,sorted:!0,pointAttrToOptions:{stroke:"lineColor","stroke-width":"lineWidth",fill:"fillColor",r:"radius"},init:function(t,n){var r,i;i=t.series.length,this.chart=t,this.options=n=this.setOptions(n),this.bindAxes(),e(this,{index:i,name:n.name||"Series "+(i+1),state:"",pointAttr:{},visible:n.visible!==!1,selected:n.selected===!0}),at&&(n.animation=!1),i=n.events;for(r in i)Zt(this,r,i[r]);if(i&&i.click||n.point&&n.point.events&&n.point.events.click||n.allowPointSelect)t.runTrackerClick=!0;this.getColor(),this.getSymbol(),this.setData(n.data,!1),this.isCartesian&&(t.hasCartesianSeries=!0),t.series.push(this)},bindAxes:function(){var e=this,t=e.options,n=e.chart,r;e.isCartesian&&Jt(["xAxis","yAxis"],function(i){Jt(n[i],function(n){r=n.options;if(t[i]===r.index||t[i]===R&&r.index===0)n.series.push(e),e[i]=n,n.isDirty=!0})})},autoIncrement:function(){var e=this.options,t=this.xIncrement,t=p(t,e.pointStart,0);return this.pointInterval=p(this.pointInterval,e.pointInterval,1),this.xIncrement=t+this.pointInterval,t},getSegments:function(){var e=-1,t=[],n,r=this.points,i=r.length;if(i)if(this.options.connectNulls){for(n=i;n--;)r[n].y===null&&r.splice(n,1);r.length&&(t=[r])}else Jt(r,function(n,s){n.y===null?(s>e+1&&t.push(r.slice(e+1,s)),e=s):s===i-1&&t.push(r.slice(e+1,s+1))});this.segments=t},setOptions:function(e){var t=this.chart.options,n=t.plotOptions,r=e.data;return e.data=null,n=Yt(n[this.type],n.series,e),n.data=e.data=r,this.tooltipOptions=Yt(t.tooltip,n.tooltip),n},getColor:function(){var e=this.options,t=this.chart.options.colors,n=this.chart.counters;this.color=e.color||!e.colorByPoint&&t[n.color++]||"gray",n.wrapColor(t.length)},getSymbol:function(){var e=this.options.marker,t=this.chart,n=t.options.symbols,t=t.counters;this.symbol=e.symbol||n[t.symbol++],/^url/.test(this.symbol)&&(e.radius=0),t.wrapSymbol(n.length)},drawLegendSymbol:function(e){var t=this.options,n=t.marker,r=e.options.symbolWidth,i=this.chart.renderer,s=this.legendGroup,e=e.baseline,o;t.lineWidth&&(o={"stroke-width":t.lineWidth},t.dashStyle&&(o.dashstyle=t.dashStyle),this.legendLine=i.path(["M",0,e-4,"L",r,e-4]).attr(o).add(s)),n&&n.enabled&&(t=n.radius,this.legendSymbol=i.symbol(this.symbol,r/2-t,e-4-t,2*t,2*t).attr(this.pointAttr[""]).add(s))},addPoint:function(e,t,n,r){var i=this.data,s=this.graph,o=this.area,u=this.chart,a=this.xData,f=this.yData,l=s&&s.shift||0,c=this.options.data;O(r,u),s&&n&&(s.shift=l+1),o&&(n&&(o.shift=l+1),o.isArea=!0),t=p(t,!0),r={series:this},this.pointClass.prototype.applyOptions.apply(r,[e]),a.push(r.x),f.push(this.valueCount===4?[r.open,r.high,r.low,r.close]:r.y),c.push(e),n&&(i[0]&&i[0].remove?i[0].remove(!1):(i.shift(),a.shift(),f.shift(),c.shift())),this.getAttribs(),this.isDirtyData=this.isDirty=!0,t&&u.redraw()},setData:function(e,t){var n=this.points,r=this.options,i=this.initialColor,u=this.chart,a=null,f=this.xAxis,c=this.pointClass.prototype;this.xIncrement=null,this.pointRange=f&&f.categories&&1||r.pointRange,l(i)&&(u.counters.color=i);var h=[],d=[],v=e?e.length:[],m=this.valueCount;if(v>(r.turboThreshold||1e3)){for(i=0;a===null&&i<v;)a=e[i],i++;if(o(a)){c=p(r.pointStart,0),r=p(r.pointInterval,1);for(i=0;i<v;i++)h[i]=c,d[i]=e[i],c+=r;this.xIncrement=c}else if(s(a))if(m)for(i=0;i<v;i++)r=e[i],h[i]=r[0],d[i]=r.slice(1,m+1);else for(i=0;i<v;i++)r=e[i],h[i]=r[0],d[i]=r[1]}else for(i=0;i<v;i++)r={series:this},c.applyOptions.apply(r,[e[i]]),h[i]=r.x,d[i]=c.toYData?c.toYData.apply(r):r.y;this.data=[],this.options.data=e,this.xData=h,this.yData=d;for(i=n&&n.length||0;i--;)n[i]&&n[i].destroy&&n[i].destroy();f&&(f.minRange=f.userMinRange),this.isDirty=this.isDirtyData=u.isDirtyBox=!0,p(t,!0)&&u.redraw(!1)},remove:function(e,t){var n=this,r=n.chart,e=p(e,!0);n.isRemoving||(n.isRemoving=!0,tn(n,"remove",null,function(){n.destroy(),r.isDirtyLegend=r.isDirtyBox=!0,e&&r.redraw(t)})),n.isRemoving=!1},processData:function(e){var t=this.xData,n=this.yData,r=t.length,i=0,s=r,o,u,a=this.xAxis,f=this.options,l=f.cropThreshold,c=this.isCartesian;if(c&&!this.isDirty&&!a.isDirty&&!this.yAxis.isDirty&&!e)return!1;if(c&&this.sorted&&(!l||r>l||this.forceCrop))if(e=a.getExtremes(),a=e.min,l=e.max,t[r-1]<a||t[0]>l)t=[],n=[];else if(t[0]<a||t[r-1]>l){for(e=0;e<r;e++)if(t[e]>=a){i=J(0,e-1);break}for(;e<r;e++)if(t[e]>l){s=e+1;break}t=t.slice(i,s),n=n.slice(i,s),o=!0}for(e=t.length-1;e>0;e--)if(r=t[e]-t[e-1],r>0&&(u===R||r<u))u=r;this.cropped=o,this.cropStart=i,this.processedXData=t,this.processedYData=n,f.pointRange===null&&(this.pointRange=u||1),this.closestPointRange=u},generatePoints:function(){var e=this.options.data,t=this.data,n,r=this.processedXData,i=this.processedYData,s=this.pointClass,o=r.length,u=this.cropStart||0,a,f=this.hasGroupedData,l,c=[],p;!t&&!f&&(t=[],t.length=e.length,t=this.data=t);for(p=0;p<o;p++)a=u+p,f?c[p]=(new s).init(this,[r[p]].concat(h(i[p]))):(t[a]?l=t[a]:e[a]!==R&&(t[a]=l=(new s).init(this,e[a],r[p])),c[p]=l);if(t&&(o!==(n=t.length)||f))for(p=0;p<n;p++)if(p===u&&!f&&(p+=o),t[p])t[p].destroyElements(),t[p].plotX=R;this.data=t,this.points=c},translate:function(){this.processedXData||this.processData(),this.generatePoints();for(var e=this.chart,t=this.options,n=t.stacking,r=this.xAxis,i=r.categories,s=this.yAxis,o=this.points,u=o.length,a=!!this.modifyValue,f,c=s.series,h=c.length;h--;)if(c[h].visible){h===this.index&&(f=!0);break}for(h=0;h<u;h++){var c=o[h],p=c.x,d=c.y,v=c.low,m=s.stacks[(d<t.threshold?"-":"")+this.stackKey];c.plotX=r.translate(p,0,0,0,1),n&&this.visible&&m&&m[p]&&(v=m[p],p=v.total,v.cum=v=v.cum-d,d=v+d,f&&(v=t.threshold),n==="percent"&&(v=p?v*100/p:0,d=p?d*100/p:0),c.percentage=p?c.y*100/p:0,c.stackTotal=p,c.stackY=d),c.yBottom=l(v)?s.translate(v,0,1,0,1):null,a&&(d=this.modifyValue(d,c)),c.plotY=typeof d=="number"?X(s.translate(d,0,1,0,1)*10)/10:R,c.clientX=e.inverted?e.plotHeight-c.plotX:c.plotX,c.category=i&&i[c.x]!==R?i[c.x]:c.x}this.getSegments()},setTooltipPoints:function(e){var t=[],n=this.chart.plotSizeX,r,i;r=this.xAxis;var s,o,u=[];if(this.options.enableMouseTracking!==!1){e&&(this.tooltipPoints=null),Jt(this.segments||this.points,function(e){t=t.concat(e)}),r&&r.reversed&&(t=t.reverse()),e=t.length;for(o=0;o<e;o++){s=t[o],r=t[o-1]?t[o-1]._high+1:0;for(s._high=i=t[o+1]?J(0,V((s.plotX+(t[o+1]?t[o+1].plotX:n))/2)):n;r>=0&&r<=i;)u[r++]=s}this.tooltipPoints=u}},tooltipHeaderFormatter:function(e){var t=this.tooltipOptions,n=t.xDateFormat,r=this.xAxis,i=r&&r.options.type==="datetime",s;if(i&&!n)for(s in yt)if(yt[s]>=r.closestPointRange){n=t.dateTimeLabelFormats[s];break}return t.headerFormat.replace("{point.key}",i?vt(n,e):e).replace("{series.name}",this.name).replace("{series.color}",this.color)},onMouseOver:function(){var e=this.chart,t=e.hoverSeries;if(lt||!e.mouseIsDown)t&&t!==this&&t.onMouseOut(),this.options.events.mouseOver&&tn(this,"mouseOver"),this.setState("hover"),e.hoverSeries=this},onMouseOut:function(){var e=this.options,t=this.chart,n=t.tooltip,r=t.hoverPoint;r&&r.onMouseOut(),this&&e.events.mouseOut&&tn(this,"mouseOut"),n&&!e.stickyTracking&&!n.shared&&n.hide(),this.setState(),t.hoverSeries=null},animate:function(e){var t=this.chart,n=this.clipRect,r=this.options.animation;r&&!i(r)&&(r={}),e?n.isAnimating||(n.attr("width",0),n.isAnimating=!0):(n.animate({width:t.plotSizeX},r),this.animate=null)},drawPoints:function(){var t,n=this.points,r=this.chart,i,s,o,u,a,f,l,c;if(this.options.marker.enabled)for(o=n.length;o--;)if(u=n[o],i=u.plotX,s=u.plotY,c=u.graphic,s!==R&&!isNaN(s))if(t=u.pointAttr[u.selected?"select":""],a=t.r,f=p(u.marker&&u.marker.symbol,this.symbol),l=f.indexOf("url")===0,c)c.animate(e({x:i-a,y:s-a},c.symbolName?{width:2*a,height:2*a}:{}));else if(a>0||l)u.graphic=r.renderer.symbol(f,i-a,s-a,2*a,2*a).attr(t).add(this.group)},convertAttribs:function(e,t,n,r){var i=this.pointAttrToOptions,s,o,u={},e=e||{},t=t||{},n=n||{},r=r||{};for(s in i)o=i[s],u[s]=p(e[o],t[s],n[s],r[s]);return u},getAttribs:function(){var e=this,t=fn[e.type].marker?e.options.marker:e.options,n=t.states,r=n.hover,i,s=e.color,o={stroke:s,fill:s},u=e.points||[],a=[],f,c=e.pointAttrToOptions,h;e.options.marker?(r.radius=r.radius||t.radius+2,r.lineWidth=r.lineWidth||t.lineWidth+1):r.color=r.color||ln(r.color||s).brighten(r.brightness).get(),a[""]=e.convertAttribs(t,o),Jt(["hover","select"],function(t){a[t]=e.convertAttribs(n[t],a[""])}),e.pointAttr=a;for(s=u.length;s--;){o=u[s],(t=o.options&&o.options.marker||o.options)&&t.enabled===!1&&(t.radius=0),i=!1;if(o.options)for(h in c)l(t[c[h]])&&(i=!0);i?(f=[],n=t.states||{},i=n.hover=n.hover||{},e.options.marker||(i.color=ln(i.color||o.options.color).brighten(i.brightness||r.brightness).get()),f[""]=e.convertAttribs(t,a[""]),f.hover=e.convertAttribs(n.hover,a.hover,f[""]),f.select=e.convertAttribs(n.select,a.select,f[""])):f=a,o.pointAttr=f}},destroy:function(){var e=this,t=e.chart,n=e.clipRect,r=/AppleWebKit\/533/.test(tt),i,s,o=e.data||[],u,a,l;tn(e,"destroy"),en(e),Jt(["xAxis","yAxis"],function(t){if(l=e[t])f(l.series,e),l.isDirty=!0}),e.legendItem&&e.chart.legend.destroyItem(e);for(s=o.length;s--;)(u=o[s])&&u.destroy&&u.destroy();e.points=null,n&&n!==t.clipRect&&(e.clipRect=n.destroy()),Jt("area,graph,dataLabelsGroup,group,tracker,trackerGroup".split(","),function(t){e[t]&&(i=r&&t==="group"?"hide":"destroy",e[t][i]())}),t.hoverSeries===e&&(t.hoverSeries=null),f(t.series,e);for(a in e)delete e[a]},drawDataLabels:function(){var e=this,t=e.options,n=t.dataLabels;if(n.enabled||e._hasPointLabels){var r,i,s=e.points,o,u,a,f=e.dataLabelsGroup,c=e.chart,h=e.xAxis,h=h?h.left:c.plotLeft,d=e.yAxis,d=d?d.top:c.plotTop,v=c.renderer,m=c.inverted,g=e.type,y=t.stacking,b=g==="column"||g==="bar",w=n.verticalAlign===null,E=n.y===null,S=v.fontMetrics(n.style.fontSize),x=S.h,T=S.b,N,C;b&&(S={top:T,middle:T-x/2,bottom:-x+T},y?(w&&(n=Yt(n,{verticalAlign:"middle"})),E&&(n=Yt(n,{y:S[n.verticalAlign]}))):w?n=Yt(n,{verticalAlign:"top"}):E&&(n=Yt(n,{y:S[n.verticalAlign]}))),f?f.translate(h,d):f=e.dataLabelsGroup=v.g("data-labels").attr({visibility:e.visible?"visible":"hidden",zIndex:6}).translate(h,d).add(),u=n,Jt(s,function(s){N=s.dataLabel,n=u,(o=s.options)&&o.dataLabels&&(n=Yt(n,o.dataLabels));if(C=n.enabled){var h=s.barX&&s.barX+s.barW/2||p(s.plotX,-999),d=p(s.plotY,-999),w=n.y===null?s.y>=t.threshold?-x+T:T:n.y;r=(m?c.plotWidth-d:h)+n.x,i=X((m?c.plotHeight-h:d)+w)}if(N&&e.isCartesian&&(!c.isInsidePlot(r,i)||!C))s.dataLabel=N.destroy();else if(C){var h=n.align,E;a=n.formatter.call(s.getLabelConfig(),n),g==="column"&&(r+={left:-1,right:1}[h]*s.barW/2||0),!y&&m&&s.y<0&&(h="right",r-=10),n.style.color=p(n.color,n.style.color,e.color,"black");if(N)N.attr({text:a}).animate({x:r,y:i});else if(l(a)){h={align:h,fill:n.backgroundColor,stroke:n.borderColor,"stroke-width":n.borderWidth,r:n.borderRadius||0,rotation:n.rotation,padding:n.padding,zIndex:1};for(E in h)h[E]===R&&delete h[E];N=s.dataLabel=v[n.rotation?"text":"label"](a,r,i,null,null,null,n.useHTML,!0).attr(h).css(n.style).add(f).shadow(n.shadow)}b&&t.stacking&&N&&(E=s.barX,h=s.barY,d=s.barW,s=s.barH,N.align(n,null,{x:m?c.plotWidth-h-s:E,y:m?c.plotHeight-E-d:h,width:m?s:d,height:m?d:s}))}})}},getSegmentPath:function(e){var t=this,n=[];return Jt(e,function(r,i){t.getPointSpline?n.push.apply(n,t.getPointSpline(e,r,i)):(n.push(i?"L":"M"),i&&t.options.step&&n.push(r.plotX,e[i-1].plotY),n.push(r.plotX,r.plotY))}),n},drawGraph:function(){var e=this,t=e.options,n=e.graph,r=[],i=e.group,s=t.lineColor||e.color,o=t.lineWidth,u=t.dashStyle,a,f=e.chart.renderer,l=[];Jt(e.segments,function(t){a=e.getSegmentPath(t),t.length>1?r=r.concat(a):l.push(t[0])}),e.graphPath=r,e.singlePoints=l,n?(sn(n),n.animate({d:r})):o&&(n={stroke:s,"stroke-width":o},u&&(n.dashstyle=u),e.graph=f.path(r).attr(n).add(i).shadow(t.shadow))},invertGroups:function(){function e(){var e={width:t.yAxis.len,height:t.xAxis.len};n.attr(e).invert(),r&&r.attr(e).invert()}var t=this,n=t.group,r=t.trackerGroup,i=t.chart;Zt(i,"resize",e),Zt(t,"destroy",function(){en(i,"resize",e)}),e(),t.invertGroups=e},createGroup:function(){var e=this.chart;(this.group=e.renderer.g("series")).attr({visibility:this.visible?"visible":"hidden",zIndex:this.options.zIndex}).translate(this.xAxis.left,this.yAxis.top).add(e.seriesGroup),this.createGroup=bt},render:function(){var e=this,t=e.chart,n,r=e.options,i=r.clip!==!1,s=r.animation,s=(r=s&&e.animate)?s&&s.duration||500:0,o=e.clipRect,u=t.renderer;!o&&(o=e.clipRect=!t.hasRendered&&t.clipRect?t.clipRect:u.clipRect(0,0,t.plotSizeX,t.plotSizeY+1),!t.clipRect)&&(t.clipRect=o),e.createGroup(),n=e.group,e.drawDataLabels(),r&&e.animate(!0),e.getAttribs(),e.drawGraph&&e.drawGraph(),e.drawPoints(),e.options.enableMouseTracking!==!1&&e.drawTracker(),t.inverted&&e.invertGroups(),i&&!e.hasRendered&&(n.clip(o),e.trackerGroup&&e.trackerGroup.clip(t.clipRect)),r&&e.animate(),setTimeout(function(){o.isAnimating=!1,(n=e.group)&&o!==t.clipRect&&o.renderer&&(i&&n.clip(e.clipRect=t.clipRect),o.destroy())},s),e.isDirty=e.isDirtyData=!1,e.hasRendered=!0},redraw:function(){var e=this.chart,t=this.isDirtyData,n=this.group;n&&(e.inverted&&n.attr({width:e.plotWidth,height:e.plotHeight}),n.animate({translateX:this.xAxis.left,translateY:this.yAxis.top})),this.translate(),this.setTooltipPoints(!0),this.render(),t&&tn(this,"updatedData")},setState:function(e){var t=this.options,n=this.graph,r=t.states,t=t.lineWidth,e=e||"";this.state!==e&&(this.state=e,r[e]&&r[e].enabled===!1||(e&&(t=r[e].lineWidth||t+1),n&&!n.dashstyle&&n.attr({"stroke-width":t},e?0:500)))},setVisible:function(e,t){var n=this.chart,r=this.legendItem,i=this.group,s=this.tracker,o=this.dataLabelsGroup,u,a=this.points,f=n.options.chart.ignoreHiddenSeries;u=this.visible,u=(this.visible=e=e===R?!u:e)?"show":"hide",i&&i[u]();if(s)s[u]();else if(a)for(i=a.length;i--;)(s=a[i],s.tracker)&&s.tracker[u]();o&&o[u](),r&&n.legend.colorizeItem(this,e),this.isDirty=!0,this.options.stacking&&Jt(n.series,function(e){e.options.stacking&&e.visible&&(e.isDirty=!0)}),f&&(n.isDirtyBox=!0),t!==!1&&n.redraw(),tn(this,u)},show:function(){this.setVisible(!0)},hide:function(){this.setVisible(!1)},select:function(e){this.selected=e=e===R?!this.selected:e,this.checkbox&&(this.checkbox.checked=e),tn(this,e?"select":"unselect")},drawTrackerGroup:function(){var e=this.trackerGroup,t=this.chart;return this.isCartesian&&(e||(this.trackerGroup=e=t.renderer.g().attr({zIndex:this.options.zIndex||1}).add(t.trackerGroup)),e.translate(this.xAxis.left,this.yAxis.top)),e},drawTracker:function(){var e=this,t=e.options,n=t.trackByArea,r=[].concat(n?e.areaPath:e.graphPath),i=r.length,s=e.chart,o=s.renderer,u=s.options.tooltip.snap,a=e.tracker,f=t.cursor,f=f&&{cursor:f},l=e.singlePoints,c=e.drawTrackerGroup(),h;if(i&&!n)for(h=i+1;h--;)r[h]==="M"&&r.splice(h+1,0,r[h+1]-u,r[h+2],"L"),(h&&r[h]==="M"||h===i)&&r.splice(h,0,"L",r[h-2]+u,r[h-1]);for(h=0;h<l.length;h++)i=l[h],r.push("M",i.plotX-u,i.plotY,"L",i.plotX+u,i.plotY);a?a.attr({d:r}):e.tracker=o.path(r).attr({isTracker:!0,"stroke-linejoin":"bevel",visibility:e.visible?"visible":"hidden",stroke:St,fill:n?St:Et,"stroke-width":t.lineWidth+(n?0:2*u)}).on(lt?"touchstart":"mouseover",function(){s.hoverSeries!==e&&e.onMouseOver()}).on("mouseout",function(){t.stickyTracking||e.onMouseOut()}).css(f).add(c)}},Xt=m(gn),zt.line=Xt,fn.area=Yt(Wt,{threshold:0}),Xt=m(gn,{type:"area",getSegmentPath:function(e){var t=gn.prototype.getSegmentPath.call(this,e),n=[].concat(t),r,i=this.options;r=t.length;var s=this.yAxis.getThreshold(i.threshold);r===3&&n.push("L",t[1],t[2]);if(i.stacking&&this.type!=="areaspline")for(r=e.length-1;r>=0;r--)r<e.length-1&&i.step&&n.push(e[r+1].plotX,e[r].yBottom),n.push(e[r].plotX,e[r].yBottom);else n.push("L",e[e.length-1].plotX,s,"L",e[0].plotX,s);return this.areaPath=this.areaPath.concat(n),t},drawGraph:function(){this.areaPath=[],gn.prototype.drawGraph.apply(this);var e=this.areaPath,t=this.options,n=this.area;n?n.animate({d:e}):this.area=this.chart.renderer.path(e).attr({fill:p(t.fillColor,ln(this.color).setOpacity(t.fillOpacity||.75).get())}).add(this.group)},drawLegendSymbol:function(e,t){t.legendSymbol=this.chart.renderer.rect(0,e.baseline-11,e.options.symbolWidth,12,2).attr({zIndex:3}).add(t.legendGroup)}}),zt.area=Xt,fn.spline=Yt(Wt),pn=m(gn,{type:"spline",getPointSpline:function(e,t,n){var r=t.plotX,i=t.plotY,s=e[n-1],o=e[n+1],u,a,f,l;if(n&&n<e.length-1){e=s.plotY,f=o.plotX;var o=o.plotY,c;u=(1.5*r+s.plotX)/2.5,a=(1.5*i+e)/2.5,f=(1.5*r+f)/2.5,l=(1.5*i+o)/2.5,c=(l-a)*(f-r)/(f-u)+i-l,a+=c,l+=c,a>e&&a>i?(a=J(e,i),l=2*i-a):a<e&&a<i&&(a=K(e,i),l=2*i-a),l>o&&l>i?(l=J(o,i),a=2*i-l):l<o&&l<i&&(l=K(o,i),a=2*i-l),t.rightContX=f,t.rightContY=l}return n?(t=["C",s.rightContX||s.plotX,s.rightContY||s.plotY,u||r,a||i,r,i],s.rightContX=s.rightContY=null):t=["M",r,i],t}}),zt.spline=pn,fn.areaspline=Yt(fn.area);var yn=Xt.prototype,pn=m(pn,{type:"areaspline",getSegmentPath:yn.getSegmentPath,drawGraph:yn.drawGraph});zt.areaspline=pn,fn.column=Yt(Wt,{borderColor:"#FFFFFF",borderWidth:1,borderRadius:0,groupPadding:.2,marker:null,pointPadding:.1,minPointLength:0,cropThreshold:50,pointRange:null,states:{hover:{brightness:.1,shadow:!1},select:{color:"#C0C0C0",borderColor:"#000000",shadow:!1}},dataLabels:{y:null,verticalAlign:null},threshold:0}),pn=m(gn,{type:"column",tooltipOutsidePlot:!0,pointAttrToOptions:{stroke:"borderColor","stroke-width":"borderWidth",fill:"color",r:"borderRadius"},init:function(){gn.prototype.init.apply(this,arguments);var e=this,t=e.chart;t.hasRendered&&Jt(t.series,function(t){t.type===e.type&&(t.isDirty=!0)})},translate:function(){var t=this,n=t.chart,r=t.options,i=r.stacking,s=r.borderWidth,o=0,u=t.xAxis,a=u.reversed,f={},c,h;gn.prototype.translate.apply(t),Jt(n.series,function(e){e.type===t.type&&e.visible&&t.options.group===e.options.group&&(e.options.stacking?(c=e.stackKey,f[c]===R&&(f[c]=o++),h=f[c]):h=o++,e.columnIndex=h)});var d=t.points,u=Q(u.transA)*(u.ordinalSlope||r.pointRange||u.closestPointRange||1),v=u*r.groupPadding,m=(u-2*v)/o,g=r.pointWidth,y=l(g)?(m-g)/2:m*r.pointPadding,b=p(g,m-2*y),w=$(J(b,1+2*s)),E=y+(v+((a?o-t.columnIndex:t.columnIndex)||0)*m-u/2)*(a?-1:1),S=t.yAxis.getThreshold(r.threshold),x=p(r.minPointLength,5);Jt(d,function(r){var o=r.plotY,u=p(r.yBottom,S),a=r.plotX+E,f=$(K(o,u)),l=$(J(o,u)-f),c=t.yAxis.stacks[(r.y<0?"-":"")+t.stackKey];i&&t.visible&&c&&c[r.x]&&c[r.x].setOffset(E,w),Q(l)<x&&x&&(l=x,f=Q(f-S)>x?u-x:S-(o<=S?x:0)),e(r,{barX:a,barY:f,barW:w,barH:l,pointWidth:b}),r.shapeType="rect",r.shapeArgs=o=n.renderer.Element.prototype.crisp.call(0,s,a,f,w,l),s%2&&(o.y-=1,o.height+=1),r.trackerArgs=Q(l)<3&&Yt(r.shapeArgs,{height:6,y:f-3})})},getSymbol:function(){},drawLegendSymbol:Xt.prototype.drawLegendSymbol,drawGraph:function(){},drawPoints:function(){var e=this,t=e.options,n=e.chart.renderer,r,i;Jt(e.points,function(s){var o=s.plotY;o!==R&&!isNaN(o)&&s.y!==null&&(r=s.graphic,i=s.shapeArgs,r?(sn(r),r.animate(Yt(i))):s.graphic=r=n[s.shapeType](i).attr(s.pointAttr[s.selected?"select":""]).add(e.group).shadow(t.shadow,null,t.stacking&&!t.borderRadius))})},drawTracker:function(){var e=this,t=e.chart,n=t.renderer,r,i,s=+(new Date),o=e.options,u=o.cursor,a=u&&{cursor:u},f=e.drawTrackerGroup(),l,h,p;Jt(e.points,function(u){i=u.tracker,r=u.trackerArgs||u.shapeArgs,h=u.plotY,p=!e.isCartesian||h!==R&&!isNaN(h),delete r.strokeWidth,u.y!==null&&p&&(i?i.attr(r):u.tracker=n[u.shapeType](r).attr({isTracker:s,fill:St,visibility:e.visible?"visible":"hidden"}).on(lt?"touchstart":"mouseover",function(n){l=n.relatedTarget||n.fromElement,t.hoverSeries!==e&&c(l,"isTracker")!==s&&e.onMouseOver(),u.onMouseOver()}).on("mouseout",function(t){!o.stickyTracking&&(l=t.relatedTarget||t.toElement,c(l,"isTracker")!==s)&&e.onMouseOut()}).css(a).add(u.group||f))})},animate:function(e){var t=this,n=t.points,r=t.options;e||(Jt(n,function(e){var n=e.graphic,e=e.shapeArgs,i=t.yAxis,s=r.threshold;n&&(n.attr({height:0,y:l(s)?i.getThreshold(s):i.translate(i.getExtremes().min,0,1,0,1)}),n.animate({height:e.height,y:e.y},r.animation))}),t.animate=null)},remove:function(){var e=this,t=e.chart;t.hasRendered&&Jt(t.series,function(t){t.type===e.type&&(t.isDirty=!0)}),gn.prototype.remove.apply(e,arguments)}}),zt.column=pn,fn.bar=Yt(fn.column,{dataLabels:{align:"left",x:5,y:null,verticalAlign:"middle"}}),yn=m(pn,{type:"bar",inverted:!0}),zt.bar=yn,fn.scatter=Yt(Wt,{lineWidth:0,states:{hover:{lineWidth:0}},tooltip:{headerFormat:'<span style="font-size: 10px; color:{series.color}">{series.name}</span><br/>',pointFormat:"x: <b>{point.x}</b><br/>y: <b>{point.y}</b><br/>"}}),yn=m(gn,{type:"scatter",sorted:!1,translate:function(){var e=this;gn.prototype.translate.apply(e),Jt(e.points,function(t){t.shapeType="circle",t.shapeArgs={x:t.plotX,y:t.plotY,r:e.chart.options.tooltip.snap}})},drawTracker:function(){for(var e=this,t=e.options.cursor,t=t&&{cursor:t},n=e.points,r=n.length,i;r--;)if(i=n[r].graphic)i.element._i=r;e._hasTracking?e._hasTracking=!0:e.group.attr({isTracker:!0}).on(lt?"touchstart":"mouseover",function(t){e.onMouseOver(),t.target._i!==R&&n[t.target._i].onMouseOver()}).on("mouseout",function(){e.options.stickyTracking||e.onMouseOut()}).css(t)}}),zt.scatter=yn,fn.pie=Yt(Wt,{borderColor:"#FFFFFF",borderWidth:1,center:["50%","50%"],colorByPoint:!0,dataLabels:{distance:30,enabled:!0,formatter:function(){return this.point.name},y:5},legendType:"point",marker:null,size:"75%",showInLegend:!1,slicedOffset:10,states:{hover:{brightness:.1,shadow:!1}}}),Wt={type:"pie",isCartesian:!1,pointClass:m(mn,{init:function(){mn.prototype.init.apply(this,arguments);var t=this,n;return e(t,{visible:t.visible!==!1,name:p(t.name,"Slice")}),n=function(){t.slice()},Zt(t,"select",n),Zt(t,"unselect",n),t},setVisible:function(e){var t=this.series.chart,n=this.tracker,r=this.dataLabel,i=this.connector,s=this.shadowGroup,o;o=(this.visible=e=e===R?!this.visible:e)?"show":"hide",this.group[o](),n&&n[o](),r&&r[o](),i&&i[o](),s&&s[o](),this.legendItem&&t.legend.colorizeItem(this,e)},slice:function(e,t,n){var r=this.series.chart,i=this.slicedTranslation;O(n,r),p(t,!0),e=this.sliced=l(e)?e:!this.sliced,e={translateX:e?i[0]:r.plotLeft,translateY:e?i[1]:r.plotTop},this.group.animate(e),this.shadowGroup&&this.shadowGroup.animate(e)}}),pointAttrToOptions:{stroke:"borderColor","stroke-width":"borderWidth",fill:"color"},getColor:function(){this.initialColor=this.chart.counters.color},animate:function(){var e=this;Jt(e.points,function(t){var n=t.graphic,t=t.shapeArgs,r=-Z/2;n&&(n.attr({r:0,start:r,end:r}),n.animate({r:t.r,start:t.start,end:t.end},e.options.animation))}),e.animate=null},setData:function(e,t){gn.prototype.setData.call(this,e,!1),this.processData(),this.generatePoints(),p(t,!0)&&this.chart.redraw()},getCenter:function(){var e=this.options,t=this.chart,r=t.plotWidth,i=t.plotHeight,e=e.center.concat([e.size,e.innerSize||0]),s=K(r,i),o;return Gt(e,function(e,t){return(o=/%$/.test(e))?[r,i,s,s][t]*n(e)/100:e})},translate:function(){this.generatePoints();var e=0,t=-0.25,n=this.options,r=n.slicedOffset,i=r+n.borderWidth,s,o=this.chart,u,a,f,l=this.points,c=2*Z,h,p,d,v=n.dataLabels.distance;this.center=s=this.getCenter(),this.getX=function(e,t){return f=W.asin((e-s[1])/(s[2]/2+v)),s[0]+(t?-1:1)*G(f)*(s[2]/2+v)},Jt(l,function(t){e+=t.y}),Jt(l,function(n){h=e?n.y/e:0,u=X(t*c*1e3)/1e3,t+=h,a=X(t*c*1e3)/1e3,n.shapeType="arc",n.shapeArgs={x:s[0],y:s[1],r:s[2]/2,innerR:s[3]/2,start:u,end:a},f=(a+u)/2,n.slicedTranslation=Gt([G(f)*r+o.plotLeft,Y(f)*r+o.plotTop],X),p=G(f)*s[2]/2,d=Y(f)*s[2]/2,n.tooltipPos=[s[0]+p*.7,s[1]+d*.7],n.labelPos=[s[0]+p+G(f)*v,s[1]+d+Y(f)*v,s[0]+p+G(f)*i,s[1]+d+Y(f)*i,s[0]+p,s[1]+d,v<0?"center":f<c/4?"left":"right",f],n.percentage=h*100,n.total=e}),this.setTooltipPoints()},render:function(){this.getAttribs(),this.drawPoints(),this.options.enableMouseTracking!==!1&&this.drawTracker(),this.drawDataLabels(),this.options.animation&&this.animate&&this.animate(),this.isDirty=!1},drawPoints:function(){var t=this,n=t.chart,r=n.renderer,i,s,o,u=t.options.shadow,a,f;Jt(t.points,function(l){s=l.graphic,f=l.shapeArgs,o=l.group,a=l.shadowGroup,u&&!a&&(a=l.shadowGroup=r.g("shadow").attr({zIndex:4}).add()),o||(o=l.group=r.g("point").attr({zIndex:5}).add()),i=l.sliced?l.slicedTranslation:[n.plotLeft,n.plotTop],o.translate(i[0],i[1]),a&&a.translate(i[0],i[1]),s?s.animate(f):l.graphic=s=r.arc(f).setRadialReference(t.center).attr(e(l.pointAttr[""],{"stroke-linejoin":"round"})).add(l.group).shadow(u,a),l.visible===!1&&l.setVisible(!1)})},drawDataLabels:function(){var e=this.data,t,n=this.chart,r=this.options.dataLabels,i=p(r.connectorPadding,10),s=p(r.connectorWidth,1),o,u,a=p(r.softConnector,!0),f=r.distance,l=this.center,c=l[2]/2,h=l[1],d=f>0,v=[[],[]],m,g,y,b,w=2,E;if(r.enabled){gn.prototype.drawDataLabels.apply(this),Jt(e,function(e){e.dataLabel&&v[e.labelPos[7]<Z/2?0:1].push(e)}),v[1].reverse(),b=function(e,t){return t.y-e.y};for(e=v[0][0]&&v[0][0].dataLabel&&(v[0][0].dataLabel.getBBox().height||21);w--;){var S=[],x=[],T=v[w],N=T.length,C;if(f>0){for(E=h-c-f;E<=h+c+f;E+=e)S.push(E);y=S.length;if(N>y){u=[].concat(T),u.sort(b);for(E=N;E--;)u[E].rank=E;for(E=N;E--;)T[E].rank>=y&&T.splice(E,1);N=T.length}for(E=0;E<N;E++){t=T[E],u=t.labelPos,t=9999;for(g=0;g<y;g++)o=Q(S[g]-u[1]),o<t&&(t=o,C=g);if(C<E&&S[E]!==null)C=E;else for(y<N-E+C&&S[E]!==null&&(C=y-N+E);S[C]===null;)C++;x.push({i:C,y:S[C]}),S[C]=null}x.sort(b)}for(E=0;E<N;E++){t=T[E],u=t.labelPos,o=t.dataLabel,y=t.visible===!1?"hidden":"visible",m=u[1];if(f>0){if(g=x.pop(),C=g.i,g=g.y,m>g&&S[C+1]!==null||m<g&&S[C-1]!==null)g=m}else g=m;m=r.justify?l[0]+(w?-1:1)*(c+f):this.getX(C===0||C===S.length-1?m:g,w),o.attr({visibility:y,align:u[6]})[o.moved?"animate":"attr"]({x:m+r.x+({left:i,right:-i}[u[6]]||0),y:g+r.y}),o.moved=!0,d&&s&&(o=t.connector,u=a?["M",m+(u[6]==="left"?5:-5),g,"C",m,g,2*u[2]-u[4],2*u[3]-u[5],u[2],u[3],"L",u[4],u[5]]:["M",m+(u[6]==="left"?5:-5),g,"L",u[2],u[3],"L",u[4],u[5]],o?(o.animate({d:u}),o.attr("visibility",y)):t.connector=o=this.chart.renderer.path(u).attr({"stroke-width":s,stroke:r.connectorColor||t.color||"#606060",visibility:y,zIndex:3}).translate(n.plotLeft,n.plotTop).add())}}}},drawTracker:pn.prototype.drawTracker,drawLegendSymbol:Xt.prototype.drawLegendSymbol,getSymbol:function(){}},Wt=m(gn,Wt),zt.pie=Wt,e(Highcharts,{Axis:B,CanVGRenderer:dn,Chart:q,Color:ln,Legend:I,Point:mn,Tick:D,Tooltip:j,Renderer:ft,Series:gn,SVGRenderer:cn,VMLRenderer:hn,dateFormat:vt,pathAnim:gt,getOptions:function(){return dt},hasBidiBug:ut,numberFormat:g,seriesTypes:zt,setOptions:function(e){return dt=Yt(dt,e),M(),dt},addEvent:Zt,removeEvent:en,createElement:v,discardElement:k,css:d,each:Jt,extend:e,map:Gt,merge:Yt,pick:p,splat:h,extendClass:m,pInt:n,product:"Highcharts",version:"2.2.5"})}(),e.Highcharts=Highcharts}.apply(e,arguments)})}(this),function(e){define("highcharts-exporting",["Highcharts"],function(){return function(){(function(){function e(e){for(var t=e.length;t--;)typeof e[t]=="number"&&(e[t]=Math.round(e[t])-.5);return e}var t=Highcharts,n=t.Chart,r=t.addEvent,i=t.removeEvent,s=t.createElement,o=t.discardElement,u=t.css,a=t.merge,f=t.each,l=t.extend,c=Math.max,h=document,p=window,d=h.documentElement.ontouchstart!==void 0,v=t.getOptions();l(v.lang,{downloadPNG:"Download PNG image",downloadJPEG:"Download JPEG image",downloadPDF:"Download PDF document",downloadSVG:"Download SVG vector image",exportButtonTitle:"Export to raster or vector image",printButtonTitle:"Print the chart"}),v.navigation={menuStyle:{border:"1px solid #A0A0A0",background:"#FFFFFF"},menuItemStyle:{padding:"0 5px",background:"none",color:"#303030",fontSize:d?"14px":"11px"},menuItemHoverStyle:{background:"#4572A5",color:"#FFFFFF"},buttonOptions:{align:"right",backgroundColor:{linearGradient:[0,0,0,20],stops:[[.4,"#F7F7F7"],[.6,"#E3E3E3"]]},borderColor:"#B0B0B0",borderRadius:3,borderWidth:1,height:20,hoverBorderColor:"#909090",hoverSymbolFill:"#81A7CF",hoverSymbolStroke:"#4572A5",symbolFill:"#E0E0E0",symbolStroke:"#A0A0A0",symbolX:11.5,symbolY:10.5,verticalAlign:"top",width:24,y:10}},v.exporting={type:"image/png",url:"http://export.highcharts.com/",width:800,buttons:{exportButton:{symbol:"exportIcon",x:-10,symbolFill:"#A8BF77",hoverSymbolFill:"#768F3E",_id:"exportButton",_titleKey:"exportButtonTitle",menuItems:[{textKey:"downloadPNG",onclick:function(){this.exportChart()}},{textKey:"downloadJPEG",onclick:function(){this.exportChart({type:"image/jpeg"})}},{textKey:"downloadPDF",onclick:function(){this.exportChart({type:"application/pdf"})}},{textKey:"downloadSVG",onclick:function(){this.exportChart({type:"image/svg+xml"})}}]},printButton:{symbol:"printIcon",x:-36,symbolFill:"#B5C9DF",hoverSymbolFill:"#779ABF",_id:"printButton",_titleKey:"printButtonTitle",onclick:function(){this.print()}}}},l(n.prototype,{getSVG:function(e){var t=this,n,r,i,u=a(t.options,e);return h.createElementNS||(h.createElementNS=function(e,t){return h.createElement(t)}),e=s("div",null,{position:"absolute",top:"-9999em",width:t.chartWidth+"px",height:t.chartHeight+"px"},h.body),l(u.chart,{renderTo:e,forExport:!0}),u.exporting.enabled=!1,u.chart.plotBackgroundImage=null,u.series=[],f(t.series,function(e){i=a(e.options,{animation:!1,showCheckbox:!1,visible:e.visible}),i.isInternal||(i&&i.marker&&/^url\(/.test(i.marker.symbol)&&(i.marker.symbol="circle"),u.series.push(i))}),n=new Highcharts.Chart(u),f(["xAxis","yAxis"],function(e){f(t[e],function(t,r){var i=n[e][r],s=t.getExtremes(),o=s.userMin,s=s.userMax;(o!==void 0||s!==void 0)&&i.setExtremes(o,s,!0,!1)})}),r=n.container.innerHTML,u=null,n.destroy(),o(e),r=r.replace(/zIndex="[^"]+"/g,"").replace(/isShadow="[^"]+"/g,"").replace(/symbolName="[^"]+"/g,"").replace(/jQuery[0-9]+="[^"]+"/g,"").replace(/isTracker="[^"]+"/g,"").replace(/url\([^#]+#/g,"url(#").replace(/<svg /,'<svg xmlns:xlink="http://www.w3.org/1999/xlink" ').replace(/ href=/g," xlink:href=").replace(/\n/," ").replace(/<\/svg>.*?$/,"</svg>").replace(/&nbsp;/g," ").replace(/&shy;/g,"Â­").replace(/<IMG /g,"<image ").replace(/height=([^" ]+)/g,'height="$1"').replace(/width=([^" ]+)/g,'width="$1"').replace(/hc-svg-href="([^"]+)">/g,'xlink:href="$1"/>').replace(/id=([^" >]+)/g,'id="$1"').replace(/class=([^" ]+)/g,'class="$1"').replace(/ transform /g," ").replace(/:(path|rect)/g,"$1").replace(/style="([^"]+)"/g,function(e){return e.toLowerCase()}),r=r.replace(/(url\(#highcharts-[0-9]+)&quot;/g,"$1").replace(/&quot;/g,"'"),r.match(/ xmlns="/g).length===2&&(r=r.replace(/xmlns="[^"]+"/,"")),r},exportChart:function(e,t){var n,r=this.getSVG(a(this.options.exporting.chartOptions,t)),e=a(this.options.exporting,e);n=s("form",{method:"post",action:e.url,enctype:"multipart/form-data"},{display:"none"},h.body),f(["filename","type","width","svg"],function(t){s("input",{type:"hidden",name:t,value:{filename:e.filename||"chart",type:e.type,width:e.width,svg:r}[t]},null,n)}),n.submit(),o(n)},print:function(){var e=this,t=e.container,n=[],r=t.parentNode,i=h.body,s=i.childNodes;e.isPrinting||(e.isPrinting=!0,f(s,function(e,t){e.nodeType===1&&(n[t]=e.style.display,e.style.display="none")}),i.appendChild(t),p.print(),setTimeout(function(){r.appendChild(t),f(s,function(e,t){e.nodeType===1&&(e.style.display=n[t])}),e.isPrinting=!1},1e3))},contextMenu:function(e,t,n,i,o,a){var h=this,p=h.options.navigation,v=p.menuItemStyle,m=h.chartWidth,g=h.chartHeight,y="cache-"+e,b=h[y],w=c(o,a),E,S;b||(h[y]=b=s("div",{className:"highcharts-"+e},{position:"absolute",zIndex:1e3,padding:w+"px"},h.container),E=s("div",null,l({MozBoxShadow:"3px 3px 10px #888",WebkitBoxShadow:"3px 3px 10px #888",boxShadow:"3px 3px 10px #888"},p.menuStyle),b),S=function(){u(b,{display:"none"})},r(b,"mouseleave",S),f(t,function(e){if(e){var t=s("div",{onmouseover:function(){u(this,p.menuItemHoverStyle)},onmouseout:function(){u(this,v)},innerHTML:e.text||h.options.lang[e.textKey]},l({cursor:"pointer"},v),E);t[d?"ontouchstart":"onclick"]=function(){S(),e.onclick.apply(h,arguments)},h.exportDivElements.push(t)}}),h.exportDivElements.push(E,b),h.exportMenuWidth=b.offsetWidth,h.exportMenuHeight=b.offsetHeight),e={display:"block"},n+h.exportMenuWidth>m?e.right=m-n-o-w+"px":e.left=n-w+"px",i+a+h.exportMenuHeight>g?e.bottom=g-i-w+"px":e.top=i+a-w+"px",u(b,e)},addButton:function(e){function t(){h.attr(v),c.attr(d)}var n=this,r=n.renderer,i=a(n.options.navigation.buttonOptions,e),s=i.onclick,o=i.menuItems,u=i.width,f=i.height,c,h,p,e=i.borderWidth,d={stroke:i.borderColor},v={stroke:i.symbolStroke,fill:i.symbolFill},m=i.symbolSize||12;n.exportDivElements||(n.exportDivElements=[],n.exportSVGElements=[]),i.enabled!==!1&&(c=r.rect(0,0,u,f,i.borderRadius,e).align(i,!0).attr(l({fill:i.backgroundColor,"stroke-width":e,zIndex:19},d)).add(),p=r.rect(0,0,u,f,0).align(i).attr({id:i._id,fill:"rgba(255, 255, 255, 0.001)",title:n.options.lang[i._titleKey],zIndex:21}).css({cursor:"pointer"}).on("mouseover",function(){h.attr({stroke:i.hoverSymbolStroke,fill:i.hoverSymbolFill}),c.attr({stroke:i.hoverBorderColor})}).on("mouseout",t).on("click",t).add(),o&&(s=function(){t();var e=p.getBBox();n.contextMenu("export-menu",o,e.x,e.y,u,f)}),p.on("click",function(){s.apply(n,arguments)}),h=r.symbol(i.symbol,i.symbolX-m/2,i.symbolY-m/2,m,m).align(i,!0).attr(l(v,{"stroke-width":i.symbolStrokeWidth||1,zIndex:20})).add(),n.exportSVGElements.push(c,p,h))},destroyExport:function(){var e,t;for(e=0;e<this.exportSVGElements.length;e++)t=this.exportSVGElements[e],t.onclick=t.ontouchstart=null,this.exportSVGElements[e]=t.destroy();for(e=0;e<this.exportDivElements.length;e++)t=this.exportDivElements[e],i(t,"mouseleave"),this.exportDivElements[e]=t.onmouseout=t.onmouseover=t.ontouchstart=t.onclick=null,o(t)}}),t.Renderer.prototype.symbols.exportIcon=function(t,n,r,i){return e(["M",t,n+r,"L",t+r,n+i,t+r,n+i*.8,t,n+i*.8,"Z","M",t+r*.5,n+i*.8,"L",t+r*.8,n+i*.4,t+r*.4,n+i*.4,t+r*.4,n,t+r*.6,n,t+r*.6,n+i*.4,t+r*.2,n+i*.4,"Z"])},t.Renderer.prototype.symbols.printIcon=function(t,n,r,i){return e(["M",t,n+i*.7,"L",t+r,n+i*.7,t+r,n+i*.4,t,n+i*.4,"Z","M",t+r*.2,n+i*.4,"L",t+r*.2,n,t+r*.8,n,t+r*.8,n+i*.4,"Z","M",t+r*.2,n+i*.7,"L",t,n+i,t+r,n+i,t+r*.8,n+i*.7,"Z"])},n.prototype.callbacks.push(function(e){var t,n=e.options.exporting,i=n.buttons;if(n.enabled!==!1){for(t in i)e.addButton(i[t]);r(e,"destroy",e.destroyExport)}})})()}.apply(e,arguments)})}(this),define("common/Duedil.map",["jquery","common/Duedil","underscore"],function(e,t){var n=new e.Deferred,r=_.once(function(){window.google&&window.google.maps?n.resolve():e.getScript("//www.google.com/jsapi",function(){google.load("maps","3",{other_params:"sensor=false",callback:n.resolve})})});t.map=function(i,s){function c(){s.find(".loading, .map-canvas").addClass("hidden"),s.find(".app-unavailable").removeClass("hidden")}function h(){o=new google.maps.Geocoder}function p(t){var n=new e.Deferred;return o.geocode({address:t},function(e,t){t===google.maps.GeocoderStatus.OK?(d(e[0].geometry.location),n.resolve()):n.resolve()}),n.promise()}function d(e){var n=new google.maps.Marker({position:e,map:f,icon:t.helpers.theme_path+"/images/map-pin.png"});n.setAnimation(google.maps.Animation.DROP),a.push(n)}function v(){var e=new google.maps.LatLngBounds;for(var t=0,n=a.length;t<n;t++)e.extend(a[t].position);f.fitBounds(e),f.getZoom()>l&&f.setZoom(l)}function m(){var t=[],n={zoom:l,mapTypeId:google.maps.MapTypeId.ROADMAP,styles:[{featureType:"water",elementType:"geometry.fill",stylers:[{lightness:60},{saturation:-30}]},{featureType:"road.highway",elementType:"geometry",stylers:[{visibility:"on"},{weight:.8}]},{featureType:"road.highway",elementType:"geometry",stylers:[{visibility:"on"},{weight:.4}]},{featureType:"road.highway",elementType:"labels",stylers:[{gamma:1.91}]},{featureType:"administrative.country",elementType:"geometry.stroke",stylers:[{weight:.9},{gamma:1.2}]},{featureType:"administrative.locality",elementType:"geometry.stroke",stylers:[{visibility:"on"},{weight:3.5}]}]};s.find(".loading").addClass("hidden"),f=new google.maps.Map(s.find(".map-canvas")[0],n);if(u instanceof google.maps.LatLng){d(u),n.setCenter(u);return}if(Object.prototype.toString.call(u)==="[object Array]")for(var r=0,i=u.length;r<i;r++)t.push(p(u[r]));else t.push(p(u));e.when.apply(window,t).done(function(){a.length===0?c():v()})}r();var o=null,u=i,a=[],f,l=15;n.then(h).then(m)}}),define("common/Duedil.chart",["jquery","common/Duedil","Highcharts","common/highcharts-tooltips"],function(e,t,n,r){t.chart=function(i,s){var o,u,a=s.find("#add_metrics"),f={},l={symbol:"circle",fillColor:"white",lineWidth:2,lineColor:null,radius:4},c=[],h=s.find("#print-chart"),p=s.find("#download-chart"),d=!1,v=function(){var t=new e.Deferred;return e.ajax(i.url+"/financials-data",{success:function(n){o=e.parseJSON(n),(!o.dates||o.dates.length===0)&&t.reject(),t.resolve()},error:function(e){t.reject()}}),t.promise()},m=function(e){for(var t in u.series)if(u.series[t].name==e)return u.series[t];return!1},g=function(e){var t=o.financials[e].values,n=[],r;for(r=0;r<t.length;r++)n.unshift([t[r].date*1e3,t[r].value]);return n},y=function(t,n,r){if(!u||m(n))return!1;var i=g(t);u.addSeries({data:i,name:n,id:t,yAxis:r||0,marker:l});var s=u.series[u.series.length-1].color,o=e("<div class='metric button'><div class='color-square'></div><div class='name'>"+n+"</div><div class='delete'><div>&times;</div></div></div>").appendTo("#added_metrics").attr("data-metric",t).children(".color-square").css("background",s).parent();f[t]=o},b=function(e,t,n){var r=g(e);return c.push({data:r,name:t,yAxis:n||0}),c},w=function(){return c},E=function(t){var n,r,i,s;if(!f[t])return;r=f[t],f[t]=null,delete f[t],s=r.children(".name").text(),r.remove(),e(".active-result[data-metric='"+t+"']").show(),i=m(s),n=i.yAxis.options.index,i&&i.remove()},S=function(){var e={width:"element",placeholder:"Add metric"},t;a.empty(),a.append("<option></option>");for(t in o.financials)o.financials.hasOwnProperty(t)&&a.append('<option value="'+t+'">'+o.financials[t].title+"</option>");a.select2(e)},x=function(){s.find("#added_metrics").on("click",".metric.button .delete",function(){E(e(this).parent().data("metric"))}),a.on("change",function(t){var n=t.val,r=t.added.text,i=m(r),s;switch(o.financials[n].type){case"currency":s=0;break;case"percentage":s=2;break;case"decimal":default:s=1}i||y(n,r,s),e(".select2-chosen").text("Add metric")}),h.on("click",function(){u&&u.print()}),p.on("click",function(){u&&u.exportChart({type:"application/pdf",filename:i.name+"- chart"})}),d=!0},T=function(){s.find(".loading").addClass("hidden"),s.find(".app-unavailable").removeClass("hidden")},N=function(){var e={chart:{renderTo:s.find(".chart-holder .chart-canvas")[0],type:"line",plotBorderWidth:1,symbols:["circle"],plotBackgroundColor:"#fdfcfc"},legend:{enabled:!1},credits:{enabled:!1},title:{text:null},xAxis:{type:"datetime",dateTimeLabelFormats:{year:"%Y"},gridLineWidth:1,tickLength:0,tickmarkPlacement:"on"},yAxis:[{title:{text:"Currency ("+o.currency+")"},labels:{formatter:function(){return t.helpers.number_format(this.value)}},showEmpty:!1},{title:{text:"Decimal"},labels:{formatter:function(){return this.value.toFixed(1)}},showEmpty:!1},{title:{text:"Percentage"},labels:{formatter:function(){return this.value.toFixed(1)+"%"}},showEmpty:!1}],colors:["#fc9f3b","#099f9d","#ffd457","#f74141","#396b75","#ffa59b","#a864a8","#c9d73c","#7cd6ef","#840d71"],plotOptions:{line:{marker:l,shadow:!1,states:{hover:{lineWidth:3}}},series:{compare:"value"}},exporting:{enabled:!1,url:"//export.highcharts.com"},navigation:{buttonOption:{align:"right"}},tooltip:{style:{fontWeight:"normal"},formatter:function(){var e;switch(this.series.yAxis.options.index){case 0:e=n.numberFormat(this.y)+" "+o.currency;break;case 1:default:e=this.y.toFixed(2);break;case 2:e=this.y.toFixed(2)+"%"}return'<strong style="color:'+this.series.color+';font-weight:bold">'+this.series.name+"</strong><br>"+"<strong>"+n.dateFormat("%e %b %Y",this.x)+":</strong> "+e}}};s.find(".loading").addClass("hidden"),s.find(".chart-holder, .chart-tools").removeClass("hidden"),n.setOptions(r),u=new n.Chart(e),S(),y("fin_net_assets","Net Assets"),d||x()},C=(new e.Deferred).then(N);e.when(v()).then(C.resolve,T)}}),define("groupgraph",["d3"],function(e){function t(e,n,r){typeof n=="string"&&(n=document.getElementById(n)),this.orgs=e,this.canvas=n;if(!r)for(var r in e)break;this.startOrg=r,this.trackedOrg=null,this.maxAssets=0,this.minAssets=Infinity,this.treeNodes=[],this.treeRawNodes=[],this.treeLinks=[],this.builtNodes=[],this.builtLinks=[],this.upScale=10,this.colors=[{base:"#e76158"},{base:"#A864A8"},{base:"#C9D73C"},{base:"#7CD6EF"},{base:"#FFa59B"},{base:"#fc9f3b"},{base:"#099F9D"},{base:"#FFD457"},{base:"#396B75"},{base:"#840D71"}],this.colors.forEach(function(e){e.dark||(e.dark=t._colorAdjust(e.base,.6)),e.med||(e.med=t._colorAdjust(e.base,.8)),e.light||(e.light=t._colorAdjust(e.base,1.7))}),this.process(),this.build(),this.focus(this.startOrg)}return t.prototype.getOrg=function(e){return this.orgs[e]},t.prototype.highlight=function(e){},t.prototype.focus=function(e,t){typeof e=="string"&&(e=this.getOrg(e)),t||(this.trackedOrg=e,this.beginTracking()),this.highlight(e)},t.prototype.process=function(){this.processOrg(this.startOrg),this.minAssets==this.maxAssets&&this.minAssets--;for(var e in this.orgs)e=this.orgs[this.orgs[e].org=e],e.group=e.level,e.title=e.assets?"Cumulative Assets &pound;"+t._priceFormat(e.assets):"Unknown or zero assets",e.color=this.fill(e.group),e.r=20+20*Math.pow((e.assets-this.minAssets)/(this.maxAssets-this.minAssets),.4)},t.prototype.fill=function(e){var t=this.colors.length;return e%=t,e<0&&(e+=t),this.colors[e]},t.prototype.processOrg=function(e){typeof e=="string"&&(e=this.getOrg(e));if(e.processed)return!1;e.processed=!0;var t=this;this.treeNodes.push(e),e.children=e.children.map(this.getOrg,this),e.parents=e.parents.map(this.getOrg,this),e.level=parseInt(e.level)||0,e.limited=e.dissolved==undefined,e.dissolved=parseInt(e.dissolved)||0,e.assets=parseFloat(e.assets)||0,e.parent=e.parents[0]||null,e.international=e.international||!1,e.children.forEach(function(t){this.processOrg(t),e.assets+=t.assets},this),this.maxAssets=Math.max(this.maxAssets,e.assets),this.minAssets=Math.min(this.minAssets,e.assets),e.parents.forEach(function(t){this.processOrg(t);var n={source:e,target:t};this.treeLinks.push(n),e.links||(e.links=[]),t.links||(t.links=[]),e.links.push(n),t.links.push(n)},this)},t.prototype.zoom=function(e,t,n){var r=Math.min(4,Math.max(.125,this.scale*Math.pow(2,e)));if(r==this.scale)return;t==undefined||n==undefined?t=n=.5:(t/=this.w,n/=this.h);var i=(t-this.x/this.w)/this.scale,s=(n-this.y/this.h)/this.scale,o=r-this.scale;this.x-=o*i*this.w,this.y-=o*s*this.h,this.scale=r,this.render()},t.prototype.render=function(){this.vis.attr("transform","translate("+this.x+","+this.y+") scale("+this.scale+")")},t.prototype.resize=function(){var e=this.canvas.offsetWidth,t=this.canvas.offsetHeight;this.x+=(e-this.w)/2,this.y+=(t-this.h)/2,this.w=e,this.h=t,this.vis&&this.render()},t.prototype.addDragHandler=function(){if(this._dragHandled)return;this._dragHandled=!0;var t=this,n=!1,r=0,i=0,s;s=function(){n=!1,window.$&&$(document.body).unbind("mouseup",s)},this.svg.on("mousedown",function(){n=!0,r=e.event.clientX,i=e.event.clientY,window.$&&$(document.body).mouseup(s)}).on("mousemove",function(){if(!n)return;t.trackedOrg=null,t.x-=r-(r=e.event.clientX),t.y-=i-(i=e.event.clientY),t.render()}).on("touchstart",function(){e.event.preventDefault(),n=!0,r=e.event.touches.item(0).clientX,i=e.event.touches.item(0).clientY}).on("touchmove",function(){if(e.event.touches.length==2)groupGraph.zoom((e.event.scale-1)/2);else{if(!n)return;t.trackedOrg=null,t.x-=r-(r=e.event.touches.item(0).clientX),t.y-=i-(i=e.event.touches.item(0).clientY),t.render()}}),window.$||this.svg.on("mouseup",s)},t.prototype.buildOrg=function(e){if(e.built)return;e.built=!0,this.builtNodes.push(e);var t=this,n=this.nodeSpace.append("svg:g").attr("class","node").on("click",function(){t.focus(e,!0),t.clickTrackTimeout&&clearTimeout(t.clickTrackTimeout),t.clickTrackTimeout=setTimeout(function(){t.trackedOrg=e,t.beginTracking()},1e3)}).on("touchend",function(){var n=(new Date).getTime(),r=$(this).data("lastTouch")||n+1,i=n-r;i<500&&i>0&&t.exploreOut(e,2,!0),$(this).data("lastTouch",n),t.focus(e,!0),t.clickTrackTimeout&&clearTimeout(t.clickTrackTimeout),t.clickTrackTimeout=setTimeout(function(){t.trackedOrg=e,t.beginTracking()},1e3)}).on("mouseover",function(){e.svgBlob.style("stroke",e.color.dark),e.svgLabelBg.style("stroke",e.color.dark),e.links.forEach(function(t){if(!t.source.built||!t.target.built)return;var n=t.svgLine.style("stroke",t.target.color.base).style("stroke-width","2").node(),r=t.svgPointer.style("fill",t.target.color.dark).node(),i=e==t.target?t.source:t.target,s=i.svgNode.node();i.svgBlob.style("stroke",i.color.dark),i.svgLabelBg.style("fill","#333").style("stroke","#000"),i.svgLabel.style("fill","#FFF"),n.parentNode.appendChild(n),r.parentNode.appendChild(r),s.parentNode.appendChild(s)});var t=e.svgNode.node();t.parentNode.appendChild(t)}).on("mouseout",function(){e.svgBlob.style("stroke",e.color.med),e.svgLabelBg.style("stroke","#AAA"),e.links.forEach(function(t){if(!t.source.built||!t.target.built)return;t.svgLine.style("stroke","rgba(128,128,128,0.3)").style("stroke-width","1"),t.svgPointer.style("fill","#999");var n=e==t.target?t.source:t.target;n.svgBlob.style("stroke",n.color.med),n.svgLabelBg.style("fill","#FFF").style("stroke","#AAA"),n.svgLabel.style("fill","#000")})}).on("dblclick",function(){t.exploreOut(e,2,!0)});(e.svgNode=n).node().org=e;var r=e.children.length||e.parents.length;r&&(r=e.children.some(function(e){return!e.built})||e.parents.some(function(e){return!e.built})),r&&(e.svgBuild=n.append("svg:g"),e.svgBuild.append("svg:circle").attr("r",(e.r+8).toString()).style("fill",e.color.base).style("opacity","0.5"),e.svgBuild.append("svg:circle").attr("r",(e.r+2).toString()).style("fill","white")),e.svgBlob=n.append("svg:circle").attr("r",e.r.toString()).style("stroke-width","2").style("stroke",e.color.med).style("fill",e.color.base).style("opacity",e.dissolved?"0.3":"1"),e.svgLabelBg=n.append("svg:rect").attr("rx",3).attr("ry",3).attr("opacity",.9).style("fill","#FFF").style("stroke","#AAA").style("stroke-width","1.5"),e.svgLabel=n.append("svg:text").attr("fill",e.dissolved?"#999":"#000").text(e.name||e.org),this.canvasAdded&&this._renderLabelBg(e),e.links.forEach(function(e){e.source.built&&e.target.built&&(this.builtLinks.push(e),e.svgLine=this.linkSpace.append("svg:line").attr("class","link").style("stroke","rgba(128,128,128,0.3)").style("stroke-width","1"),e.svgPointer=this.linkSpace.append("svg:circle").attr("class","pointer").attr("r",3).style("fill","#999"))},this)},t.prototype._renderLabelBg=function(e){var t=e.svgLabel.node().getBBox();e.svgLabelBg.attr("x",t.x-3).attr("y",t.y-3).attr("width",t.width+6).attr("height",t.height+6)},t.prototype.exploreOut=function(e,t,n){this.buildOrg(e),n=n!==!1,n&&this.force&&this.force.stop();if(t>0){e.open=!0,t--;var r=function(n){n.built||(n.x=e.x,n.y=e.y),this.exploreOut(n,t,!1)};e.children.forEach(r,this),e.parents.forEach(r,this),e.svgBuild&&e.svgBuild.remove()}n&&this.force&&this.force.start()},t.prototype.exploreUp=function(e){this.buildOrg(e),e.parents.forEach(function(e){this.exploreUp(e)},this),!e.open&&!e.children.some(function(e){return!e.built})&&e.svgBuild&&(e.open=!0,e.svgBuild.remove())},t.prototype.build=function(){var t=this;this.resize(),this.scale=1,this.x=0,this.y=0,this.svg=e.select(document.createElementNS("http://www.w3.org/2000/svg","svg")).attr("width","100%").attr("height","100%"),this.svg.append("svg:rect").attr("x",0).attr("y",0).attr("width",4e3).attr("height",4e3).style("fill","rgba(255,255,255,0)"),this.vis=this.svg.append("svg:g"),this.linkSpace=this.vis.append("svg:g"),this.nodeSpace=this.vis.append("svg:g"),this.addDragHandler();var n=this.orgs[this.startOrg];this.exploreOut(n,2),this.exploreUp(n);var r=this.upScale,i;this.force=e.layout.force().nodes(this.builtNodes).links(this.builtLinks).size([this.w/r,this.h/r]).start().on("tick",function(){t.builtNodes.forEach(function(e){e.svgNode.attr("transform","translate("+e.x*r+","+e.y*r+")")}),t.builtLinks.forEach(function(e){var t=e.target.x*r,n=e.target.y*r;e.svgLine.attr("x1",e.source.x*r).attr("y1",e.source.y*r).attr("x2",t).attr("y2",n);var i=e.target.r+4,s=Math.atan2(e.source.y-e.target.y,e.source.x-e.target.x);e.svgPointer.attr("transform","translate("+(t+i*Math.cos(s))+","+(n+i*Math.sin(s))+")")}),t.beginTracking()}),this.canvasAdded=!0,this.canvas.appendChild(this.svg.node()),this.builtNodes.forEach(this._renderLabelBg),this.render()},t.prototype.beginTracking=function(){if(this.tracking)return;this.tracking=!0;var t=this;e.timer(function(){return!t.track()},0)},t.prototype.endTracking=function(){this.trackedOrg=null},t.prototype.track=function(){if(!this.trackedOrg)return this.tracking=!1;var e=this.trackedOrg.x*this.upScale*this.scale+this.x,t=this.trackedOrg.y*this.upScale*this.scale+this.y,n=this.w/2,r=this.h/2,i=n-e,s=r-t;return this.x+=i/15,this.y+=s/15,this.render(),this.tracking=!(Math.abs(i)<3&&Math.abs(s)<3)},t._colorAdjust=function(e,t){return t===undefined&&(t=.7),e.charAt(0)=="#"&&(e=e.substr(1)),"#"+e.match(/.{2}/g).map(function(e){return e=Math.round(Math.min(255,parseInt(e,16)*t)).toString(16),e.length==2?e:e.length==1?"0"+e:"00"}).join("")},t._priceFormat=function(e){return(Math.round(100*e)/100).toString().replace(/(\d{1,3})(?=(\d\d\d)+(\.|$))/g,"$1,")},t}),define("common/Duedil.groupgraph",["jquery","common/Duedil","groupgraph","Modernizr"],function(e,t,n,r){t.groupgraph=function(t,i){var s=!1,o,u,a=function(e){var n={notSupported:"Group Graph requires features that your browser does not support. Please consider upgrading to a more modern browser for a faster, fuller experience. We recommend Google Chrome.",noStructure:"This company does not have a group structure.",cantLoad:"Group Graph data is unavailable at this time."},r=t.find(".app-unavailable");r.find("h3").text(n[e]),r.removeClass("hidden")},f=function(t){var n=e("#node-info"),r=n.find("a"),i=t.currentTarget.org,s=n.find(".international-flag img").hide();n.find(".company-name").text(i.name||i.org),i.international?(r.addClass("disabled"),s.attr({src:theme_path+"/images/flags/48/"+i.flag+".png","data-original-title":"Based in "+i.international}).show()):(r.removeClass("disabled"),r.attr("href","/company/"+i.org),r.data("name",i.name||i.org)),n.find(".aggregates .parents .count").text(i.parents.length),n.find(".aggregates .subsidiaries .count").text(i.children.length)},l=function(){var n=e("#group-controls"),r=e("#node-info");n.find(".zoom-in").on("click",function(){u.zoom(.5)}),n.find(".zoom-out").on("click",function(){u.zoom(-0.5)}),t.on("mouseenter",".node",f),t.find(".node:eq(0)").trigger("mouseenter"),t.find(".view-profile").on("click",function(t){e(this).hasClass("disabled")&&(t.preventDefault(),t.stopPropagation())}),r.find(".international-flag img").tooltip({container:"body"}),s=!0},c=function(){t.find(".graph-canvas").removeClass("hidden"),u=new n(o,t.find(".group-wrapper")[0],i),s||l()},h=(new e.Deferred).then(function(){r.svg?c():a("notSupported")},a),p=t.find(".loading");parseInt(t.data("has-group"),10)!==0?(p.removeClass("hidden"),e.ajax({dataType:"json",url:"/company/"+i+"/-/groupgraph",cache:!0,success:function(t){var n=0;e.each(t,function(e,t){n++;if(n>1)return!1}),p.addClass("hidden"),n<=1?h.reject("noStructure"):(o=t,h.resolve())},error:function(){p.addClass("hidden"),h.reject("cantLoad")}})):a("noStructure")}}),function(e){define("jquery-mousewheel",["jquery"],function(){return function(){(function(e){function n(t){var n=t||window.event,r=[].slice.call(arguments,1),i=0,s=!0,o=0,u=0;return t=e.event.fix(n),t.type="mousewheel",t.wheelDelta&&(i=t.wheelDelta/120),t.detail&&(i=-t.detail/3),u=i,n.axis!==undefined&&n.axis===n.HORIZONTAL_AXIS&&(u=0,o=-1*i),n.wheelDeltaY!==undefined&&(u=n.wheelDeltaY/120),n.wheelDeltaX!==undefined&&(o=-1*n.wheelDeltaX/120),r.unshift(t,i,o,u),e.event.handle.apply(this,r)}var t=["DOMMouseScroll","mousewheel"];e.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var e=t.length;e;)this.addEventListener(t[--e],n,!1);else this.onmousewheel=n},teardown:function(){if(this.removeEventListener)for(var e=t.length;e;)this.removeEventListener(t[--e],n,!1);else this.onmousewheel=null}},e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})})(jQuery)}.apply(e,arguments)})}(this),define("common/Duedil.widgets.company",["jquery","common/Duedil","Highcharts","common/highcharts-tooltips","common/AttachReferenceViewBinding","Modernizr","highcharts-exporting","common/Duedil.map","common/Duedil.chart","common/Duedil.groupgraph","common/Duedil.widgets","common/Duedil.Modals","jquery-mousewheel"],function($,Duedil,Highcharts,tooltipStyle,AttachReferenceViewBinding,Modernizr){Highcharts.setOptions(tooltipStyle),Duedil.widgets.company={dealrtestwidget:{init:function(){$(document).bind("dealr_message",Duedil.widgets.company.dealrtestwidget.handler)},handler:function(e,t,n){if(n.property=="test"){var e=$("#widget_dealrtestwidget .container");e.find(".empty").remove(),e.append($(document.createElement("h6")).text(n.time)),e.append($(document.createElement("dl")).css("line-height","20px").append($(document.createElement("dt")).text("Random").css({"float":"left","font-weight":"bold","margin-right":"4px"})).append($(document.createElement("dd")).text(n.rand)))}},destroy:function(){$(document).unbind("dealr_message",Duedil.widgets.company.dealrtestwidget.handler)}},rayfinancialswidget:{profile:null,widget:null,dropdown:null,checkboxes:null,init:function(e){var t=this;this.profile=e,this.widget=$("#widget_rayfinancialswidget"),this.dropdown=$("#filing-periods"),this.checkboxes=this.dropdown.find("input:checkbox"),t.attachFilingPeriodToggleBindings(),t.attachCommerceBindings(),t.attachScrollers(),$(".scrollable thead:first th[data-period]",this.widget).each(function(){t.recalculateDeltas($(this),!1)}),AttachReferenceViewBinding.bind(this.widget),t.toggleSelection()},destroy:function(){this.detachCommerceBindings(),AttachReferenceViewBinding.destroy(),this.profile&&(this.profile=null)},attachFilingPeriodToggleBindings:function(){var e=this;this.dropdown.find(".dropdown-menu").on("click.dropdown.data-api",function(e){e.stopPropagation()}),this.checkboxes.on("change",function(t){var n=e.checkboxes.filter(":checked");if(n.length===0){e.checkboxes.first().prop("checked",!0).trigger("change");return}n.length===1?n.attr("disabled","disabled"):n.removeAttr("disabled"),e.toggleFilingPeriod(t)})},toggleSelection:function(){var e=this;this.dropdown.find(".toggle-select").on("click",function(t){$(this).data("target")==="selectall"?e.checkboxes.prop("checked",!0):e.checkboxes.prop("checked",!1),e.checkboxes.trigger("change")})},toggleFilingPeriod:function(e){var t=$(e.target).attr("id"),n=this.widget.find('.scrollable [data-period="'+t+'"]'),r=$(n[0]).parent("tr").children(),i=!0;$(e.target).is(":checked")?(n.removeClass("hidden"),i=!1):n.addClass("hidden"),this.recalculateDeltas($(n[0]),i)},recalculateDeltas:function(e,t){var n=this.widget.find(".scrollable table"),r=e.prevAll().not(".hidden"),i=e.nextAll().not(".hidden"),s=[],o,u,a;r.length&&s.push($(r[0])),t||s.push(e),i.length&&s.push($(i[0]));if(s.length<=1)return;for(a=0;a<s.length-1;a++)o=n.find('td[data-period="'+s[a].data("period")+'"]').filter("[data-value]"),u=n.find('td[data-period="'+s[a+1].data("period")+'"]').filter("[data-value]"),o.each(function(e,t){var r=$(t).data("value"),i=$(u[e]).data("value"),s=n.find(t).next(".percentage"),o;if(!r||!i){s.text("");return}o=(parseInt(r,10)-parseInt(i,10))/Math.abs(parseInt(i,10))*100,o===0&&(s.html('<span class="icon-font icon-delta-same"></span>'+o+"&#37;"),s.removeClass("up down").addClass("same")),o>0&&(s.html('<span class="icon-font icon-delta-up"></span>'+o.toFixed(2)+"&#37;"),s.removeClass("down same").addClass("up")),o<0&&(s.html('<span class="icon-font icon-delta-down"></span>'+Math.abs(o).toFixed(2)+"&#37;"),s.removeClass("up same").addClass("down"))})},attachScrollers:function(){var e=this,t=this.widget.find(".scrollers .button"),n=this.widget.find(".scrollable"),r=n.find("table"),i=r.find("thead:first-child th").filter(":visible");t.on("click",function(e){var t=$(e.target).data("scroll"),r=function(){var e=0;return i.each(function(t,n){e+=$(n).width()}),e/i.length}();t==="right"?n.scrollLeft(n.scrollLeft()+r):n.scrollLeft(n.scrollLeft()-r)})},attachCommerceBindings:function(){var e=this,t=$("#financials_export_purchase"),n=Duedil.Commerce.basketQueue();$(t).on("submit",function(e){var t,r=$(".buy-wrapper.covering-method button",this);e.preventDefault(),r.attr("disabled","disabled").addClass("disabled"),t=$(this).serializeArray(),t.push({name:"_format",value:"json"}),t.push({name:r.attr("name"),value:r.attr("value")}),n.push({type:"POST",url:$(this).attr("action"),data:t,success:Duedil.Commerce.uiResponseHandler({error:{tooltip:{target:$(e.target)}}})})}),$("a.basket-remove",t).on("click",function(e){e.preventDefault(),$.ajax({type:"GET",url:$(this).attr("href")+"&_format=json",success:Duedil.Commerce.handleResponse})}),$(document).on("basket-item-add",function(e,n){$(t).find(".inbasket-wrapper").removeClass("hidden").addClass("visible").siblings().removeClass("visible").addClass("hidden"),$(".buy-wrapper .button",t).removeAttr("disabled").removeClass("disabled")}).on("basket-item-remove",function(e,n){$(t).find(".buy-wrapper.covering-method").removeClass("hidden").addClass("visible").siblings().removeClass("visible").addClass("hidden")}).on("checkout-complete",function(e,n){var r=$(t);r.find(".download-wrapper").removeClass("hidden").addClass("visible").siblings().removeClass("visible").addClass("hidden")})},detachCommerceBindings:function(){$(document).off("basket-item-add").off("basket-item-remove").off("checkout-complete"),$(".remove",this.widget).off("click")}},raydescriptionwidget:{init:function(){this.trackEvents();var e=$("#widget_raydescriptionwidget .desc-bodies > div"),t=e.not(".cta-box"),n=(t.length>0?t:e).first();n.show().siblings().hide();var r=n.attr("id").replace("description-","");$('#widget_raydescriptionwidget li a[data-source="'+r+'"]').parent().addClass("selected");var i=$("#widget_raydescriptionwidget li").size();i<=1&&$("#widget_raydescriptionwidget .dropdown-toggle").addClass("disabled");var s;n[0].firstChild.innerHTML=="ray"?s="Companies House":s=n[0].firstChild.innerHTML,$("#widget_raydescriptionwidget .dropdown-toggle span.selection").html(s),this.tabclick($("#widget_raydescriptionwidget li a"))},tabclick:function(e){e.on("click",function(e){Duedil.events.log(Duedil.events.PROF_COM_VI_DESC,"Changed to "+$(this).attr("title"));var t=$("#description-"+$(this).data("source")),n=$(this).data("source"),r;n=="ray"?r="Companies House Description":n=="duedil"?r="DueDil Description":r=$(this).data("source")+" Description",$("#widget_raydescriptionwidget .dropdown-toggle span.selection").html(r),$('#widget_raydescriptionwidget li a[data-source="'+$(this).data("source")+'"]').parent().siblings().removeClass("selected"),$('#widget_raydescriptionwidget li a[data-source="'+$(this).data("source")+'"]').parent().addClass("selected"),t.show().siblings().hide(),e.preventDefault()})},update:function(e){var t=e;if(!document.getElementById("description-wikipedia")){$('<div class="desc-body" id="description-wikipedia"></div>').appendTo("#widget_raydescriptionwidget .desc-bodies");var n=$('<a href="#" class="icon wikipedia" data-source="wikipedia"></a>').appendTo($("<li>").appendTo("#widget_raydescriptionwidget .tabs ul"));this.tabclick(n)}$("#description-wikipedia").hide().text(t.abstract);var r=$("#widget_raydescriptionwidget .desc-bodies > div");r.length==2&&$(r[0]).hasClass("cta-box")&&$("#widget_raydescriptionwidget .tabs a:last").click()},trackEvents:function(){$("#widget_raydescriptionwidget .cta-box").on("click",function(){Duedil.events.log(Duedil.events.PROF_COM_VI_DESC,"Clicked CTA: Add Description")})}},twitterwidget:{init:function(e){},destroy:function(){}},lse:{init:function(){},update:function(e){var t={Volume:Duedil.helpers.separateThousands,AverageDailyVolume:Duedil.helpers.separateThousands,ChangeinPercent:function(e){return"("+e+")"}},n=!1;$(".stock-info-field").each(function(){var r=$(this),i=r.data("field"),s=e[i];if(i=="Change"||i=="ChangeinPercent")i=="Change"&&r.text().charAt(0)==="+"&&(n=!0),n?(r.removeClass("negative").addClass("positive"),r.show()):(r.removeClass("positive").addClass("negative"),r.show());s==null?i=="Ask"?r.text("N/A"):r.text("-"):(t[i]&&(s=t[i](s)),r.text(s))}),$("#spinning-loader-wrapper").fadeOut()}},investmentswidget_financials:{init:function(){Duedil.widgets.helpers.create_datatable(this,"#widget_investmentswidget_financials .data-table",{iDisplayLength:9,aaSorting:[[0,"desc"]]})},destroy:function(){Duedil.widgets.helpers.destroy_datatable(this)}},crunchbasecompanywidget:{init:function(){Duedil.widgets.helpers.create_datatable(this,"#widget_crunchbasecompanywidget table",{iDisplayLength:3,fnDrawCallback:function(e){Duedil.widgets.helpers.dataTablesGroupRows($(this).find("tbody tr"),e)}})},destroy:function(){Duedil.widgets.helpers.destroy_datatable(this)}},crunchbasefundingcompanywidget:{init:function(){Duedil.widgets.helpers.create_datatable(this,"#widget_crunchbasefundingcompanywidget table",{iDisplayLength:1})},destroy:function(){Duedil.widgets.helpers.destroy_datatable(this)}},associateddirectorsdocwidget:{destroy:function(){Duedil.widgets.helpers.destroy_datatable(this)},init:function(){function u(e){var t;return r.each(function(){var r=$(this),i=$.extend({},e,r.data("state")),s=n[i.status||""][i.type||""];r.hasClass("selected")&&(t=s),r.find(".count").text(""+s)}),t}function a(t){var n="Showing ";!t.status&&!t.type?n+="all ":t.status&&(n+=t.status+" "),n+="directorships",t.type&&(n+=" of "+t.type),e.find(".dropdown-label").text(n)}var e=$("#widget_associateddirectorsdocwidget"),t=e.find("table").first(),n=t.data("counts"),r=e.find(".header .dropdown li a[data-state]"),i;r.tickList(t.data("filter"));var s=r.getListState(),o=u(s);a(s);var i=this.dt=$(t).duedilTable({bSort:!1,iDisplayLength:t.data("size"),iDeferLoading:o,bServerSide:!0,sAjaxSource:t.data("source")});r.on("update",function(e,t){s=t,u(t),i&&i.fnSetParams(t)}),t.on("load-finish",function(){a(s)})}},groupwidget:{init:function(){Duedil.widgets.helpers.create_datatable(this,"#widget_groupwidget table",{iDisplayLength:6,aaSorting:[[2,"asc"]]})},destroy:function(){Duedil.widgets.helpers.destroy_datatable(this)}},rayregisterednameswidget:{init:function(){Duedil.widgets.helpers.create_datatable(this,"#widget_rayregisterednameswidget .data-table",{iDisplayLength:10,bSort:!1,aoColumnDefs:[{sType:"date",aTargets:[0,1]}]})},destroy:function(){Duedil.widgets.helpers.destroy_datatable(this)}},subsidiarieswidget:{init:function(){Duedil.widgets.helpers.create_datatable(this,"#widget_subsidiarieswidget .data-table",{iDisplayLength:6,aoColumnDefs:[{sType:"string",aTargets:[2]},{sType:"subsidiary",aTargets:[3]},{sWidth:"50px",aTargets:[2]},{sWidth:"60px",aTargets:[1]}]})},destroy:function(){Duedil.widgets.helpers.destroy_datatable(this)}},filings_widg_factory:function(e){return{destroy:function(){Duedil.widgets.helpers.destroy_datatable(this)},init:function(){function f(e){var t;return r.each(function(){var e=$(this);e.hasClass("selected")&&(t=e.data("count"))}),t}function l(e){var n="Showing ";typeof e.type=="object"?n+=e.type.desc:n+="all",t.find(".dropdown-label").text(n)}var t=$(e),n=t.find("table"),r=t.find(".header .dropdown li a[data-state]"),i=t.find(".header .dropdown a.show-more"),s=t.find(".header .dropdown"),o;r.tickList(n.data("filter"));var u=r.getListState(),a=f(u);l(u);var o=this.dt=$(n).duedilTable({bSort:!1,iDisplayLength:n.data("size"),iDeferLoading:a,bServerSide:!0,sAjaxSource:n.data("source")});r.on("update",function(e,t){u=t,o&&(o.fnSetParams({type:t.type.code}),s.removeClass("open"))}),n.on("load-finish",function(){l(u)}),i.on("click",function(e){e.preventDefault(),e.stopPropagation(),r.parent().removeClass("hidden"),i.parent().hide()})}}},docs_widg_factory:function(e){return{init:function(){var t=["VAM","VAF","ADJ","SDF","SOJ","STO","WDN","EXA","I","O","OA","OB","OD","ODE","ODL","TBP","TBS","TX","U","V","VA","VS","VV","VW","VZ","W","X","XV","Y","YV","YZ","GLE","ODA","QLA","QSO","QLS","QSR","RPZ","RQJ","TOC","QK","RWW","SW","SR","ODV","TAA","VAA","VWW","ODT","RPW","ODW","ODX","ODY","ODZ","OF","OWD","Q","QL","QLL","QS","QSC","RPX","RPY","RQA","RQB","RQC","RQL","RQX","RWX","RWY","S","SEP","SEU","SEY","SX","T","TB","TBC","TBE","TBG","TBJ","TBN","TBX"],n=this,r=$(e);Duedil.widgets.helpers.create_datatable(this,e,{bServerSide:!0,sAjaxSource:r.data("source"),iDeferLoading:r.data("count"),fnServerData:function(e,n,r){$.getJSON(e,n,function(e){var n=[],i=0;for(var s in e)if(typeof e[s]=="object"){for(var o in e[s].documents){var u={},a=e[s].documents[o];u[0]=Duedil.helpers.formatDateJMY(a.docs_filedate),u[1]=a.docs_filedesc,u[2]=$.inArray(a.docs_filedoc,t)>=0?'<img src="/sites/default/themes/duedil_web/images/flag-icn.png"/>':"",n.push(u)}i=e[s].docs_count}r({sEcho:e.sEcho,iTotalRecords:i,iTotalDisplayRecords:i,aaData:n})})},iDisplayLength:10,aaSorting:[[0,"desc"]],aoColumnDefs:[{aTargets:[2],sClass:"flag"}]})},destroy:function(){Duedil.widgets.helpers.destroy_datatable(this)}}},raydocumentswidget:{tbl:function(){return $("#ray-documents-table")},getFormData:function(e){return $(this.form).serializeArray()},handle_error:function(e){var t=$("#ray-documents-table_wrapper"),n=this.tbl(),r=this.form.closest(".widget").find(".header"),i=this.form.find(".overlay.loading"),s=this.form.find(".overlay.error"),o=$(".message",s),u="Our document delivery platform is temporarily unavailable. Please check back shortly.";e&&e.hasOwnProperty("error")&&(e.error.hasOwnProperty("message")&&(u=e.error.message),e.error.hasOwnProperty("type")&&(s.removeClass("error"),s.addClass(e.error.type))),o.text(u),i.addClass("hidden"),t.addClass("hidden"),s.removeClass("hidden"),$(".dropdown, .dropdown-label",r).addClass("hidden"),n.closest(".widget").removeClass("table-loading")},init:function(e){this.form=$("#ray_downloads_purchase");var t=this.tbl(),n=this,r=this.form.find(".overlay.loading"),i=this.form.closest(".widget").find(".header");t.on("load-begin",function(){t.data("already-loaded")||(r.removeClass("hidden"),$("#ray-documents-table_wrapper").addClass("hidden"),setTimeout(function(){t.closest(".widget").removeClass("table-loading")},50),$(".dropdown, .dropdown-label",i).addClass("hidden")),s.stop()}).on("load-finish",function(e,o){if(!t.data("already-loaded")){r.addClass("hidden"),$("#ray-documents-table_wrapper").removeClass("hidden"),t.removeClass("hidden"),t.data("already-loaded",!0);if(!!o.menuBody){t.closest(".widget").find(".header .dropdown-menu").html(o.menuBody);var u=$(".dropdown",i),a=$(".dropdown-label",i),f=u.find("a[data-state]");f.length>0&&(u.removeClass("hidden"),a.removeClass("hidden"),f.tickList(t.data("filter")),f.on("update",function(e,t){listState=t,n.dt&&(n.dt.fnSetParams({types:t.type}),u.removeClass("open"),a.text(t.label))}))}$(".dropdown, .dropdown-label",i).removeClass("hidden")}s.start()}).on("load-error",function(e,t,r){n.handle_error(r)}).on("draw",function(){AttachReferenceViewBinding.destroy(),AttachReferenceViewBinding.bind(t)});var s=Duedil.Commerce.availabilityPoller(function(){var e=t.find("tr:has(.pending-wrapper:visible)");return e.map(function(){var e=$(this).data("productcode");if(e)return e}).get()});this.dt=t.duedilTable({bSort:!1,iDisplayLength:t.data("size"),iWantToLoadImmediately:!0,bServerSide:!0,sPaginationType:"four_button",sAjaxSource:t.data("source")}),this._queue=Duedil.Commerce.basketQueue();var o=function(e){var n=t.find("tr");for(var r=0;r<n.length;r++){var i=$(n[r]),s=i.data("productcode");if(s&&s==e)return i}};$(document).on("basket-item-add.docwidget",function(e,t){if(!t.productcode)return;var n=o(t.productcode);if(!n)return;var r=n.find(".inbasket-wrapper"),i=r.find(".in-basket");i.tooltip("destroy").tooltip({title:"Added to basket",placement:"right",container:"body",trigger:"manual"}),n.find(".buy-wrapper.covering-method .button").removeClass("disabled"),n.find(".buy-wrapper.covering-method .button").removeAttr("disabled"),r.show().siblings().hide(),i.tooltip("show"),setTimeout(function(){i.tooltip("hide")},2500)}),$(document).on("basket-item-remove.docwidget",function(e,t){if(!t.productcode)return;var n=o(t.productcode);n&&(n.find(".buy-wrapper.covering-method").show().siblings().hide(),n.find(".buy-wrapper.covering-method .button").removeClass("disabled"),n.find(".buy-wrapper.covering-method .button").removeAttr("disabled"))}),$(document).on("basket-clear.docwidget checkout-complete.docwidget",function(e,t){!!t&&!!t.items&&($.each(t.items,function(e,t){var r=$("tr[data-productcode='"+t+"'] .actions .pending-wrapper",n.form);r.length>0&&r.show().siblings().hide()}),s.start())}),$(document).on("product-available.docwidget",function(e,t){var n=o(t);n&&n.find(".download-wrapper").show().siblings().hide()}),$(document).on("product-unavailable.docwidget",function(e,t){var n=o(t);n&&n.find(".unavailable-wrapper").show().siblings().hide()});var u=function(e){e.preventDefault();var t=n.getFormData();e.submittedBy&&(t[t.length]={name:e.submittedBy.attr("name"),value:e.submittedBy.attr("value")}),t[t.length]={name:"_format",value:"json"},n._queue.push({type:"POST",url:n.form.attr("action"),data:t,success:Duedil.Commerce.uiResponseHandler({errors:{tooltip:{target:$(e.target),placement:"right"}}})})};$(this.form).on("submit.docwidget",u),$(this.form).on("click.docwidget",":submit",function(e){var t=$(e.target);if(!t.is(":submit")){var n=t.closest(":submit");n.length!==0&&(e.submittedBy=$(n[0]))}else e.submittedBy=t;$(this).addClass("disabled").attr("disabled","disabled"),u(e)}),$(this.form).on("click.docwidgets","a.basket-remove",function(e){e.preventDefault(),$.ajax({type:"GET",url:$(this).attr("href")+"&_format=json",success:Duedil.Commerce.handleResponse})}),$(this.form).on("click.docwidgets",".unknown-wrapper a",function(e){e.preventDefault(),$.ajax({type:"GET",url:$(this).attr("href")+"?_format=json",context:this,success:function(e){$(this).parent().addClass("hidden"),$(this).closest(".actions").find(".pending-wrapper").removeClass("hidden"),s.start()}})})},update:function(e){var t=this.munge(e),n=this.options();n.aaData=t.aaData,n.iDeferLoading=t.totalRecords,Duedil.widgets.helpers.create_datatable(this,this.tbl(),n)},destroy:function(){$(document).off(".docwidget"),Duedil.widgets.helpers.destroy_datatable(this),$(this.form).off(".docwidget"),this.form=null,AttachReferenceViewBinding.destroy()}},raymortgageswidget:{init:function(){var e=$(".mortgage-filters").find("li > a"),t=$("#widget_raymortgageswidget .data-table");Duedil.widgets.helpers.create_datatable(this,"#widget_raymortgageswidget .data-table",{iDisplayLength:1,aoColumns:[{bVisible:!1},null],fnDrawCallback:function(e){Duedil.widgets.helpers.dataTablesGroupRows($(this).find("tbody tr"),e)}},"oMortgageTable"),e.on("click",function(e){var n=$(this),r=n.parent().data("filter");$(".mortgage-filters .selection").text(n.text()),t.not("."+r).parent().hide(),t.filter("."+r).parent().show(),e.preventDefault()}),e.parent().eq(0).find("> a").trigger("click")},destroy:function(){Duedil.widgets.helpers.destroy_datatable(this,"oMortgageTable")}},registeredtrademarkswidget:{init:function(){function i(t){var n="Showing ";t=="text"?n+="Text":t=="image"?n+="Images":n+="all",e.find(".dropdown-label").text(n)}var e=$("#widget_registeredtrademarkswidget");e.find(".dropdown-label").text("Showing all"),Duedil.widgets.helpers.create_datatable(this,"#widget_registeredtrademarkswidget table",{iDisplayLength:5,aoColumnDefs:[{bVisible:!1,aTargets:[0]}]},"oTrademarkTable");var t=this.oTrademarkTable,n=t.fnSettings(),r=e.find(".header .dropdown li a[data-state]");r.tickList({type:""}),r.on("update",function(e,r){Duedil.events.log(Duedil.events.PROF_COM_VI_TRDMK,"Type Changed to "+r.type),n._iDisplayLength=r.type=="text"?10:5,t.fnFilter(r.type,0),i(r.type)})},destroy:function(){Duedil.widgets.helpers.destroy_datatable(this,"oTrademarkTable")}},gazettenoticeswidget:{init:function(){var e=this;e.swap_modal_content=!1,e.modal_content=!1,e._setupDataTables("#widget_gazettenoticeswidget .data-table")},_setupDataTables:function(e){var t=this;Duedil.widgets.helpers.create_datatable(this,e,{aaSortingFixed:[[0,"desc"]],iDisplayLength:$(e).data("size"),fnDrawCallback:function(){$(e+" td").on("click.gazette",function(e){var n=$(this);t.modal_content!==!1&&(t.swap_modal_content=!0,t.modal_content=$("#modal-body").html()),$("#modal-body").html(n.parent().find(".notice-details .notice").html()),$("#modal").modal().focus().data("modal").escape()}),$("#modal").on("hidden",function(){if(!t.swap_modal_content||t.modal_content.length==0)return!1;t.swap_modal_content=!1,$("#modal-body").html(t.modal_content),t.modal_content=!1})}})},destroy:function(){Duedil.widgets.helpers.destroy_datatable(this),$("#widget_gazettenoticeswidget .data-table a.view-details").off("click.gazette")}},contactswidget:{init:function(){Duedil.widgets.helpers.create_datatable(this,"#widget_contactswidget .data-table",{iDisplayLength:5,bSort:!1,aoColumnDefs:[{sWidth:"200px",aTargets:[0]}]})}},angel_widg_factory:function(e){return{init:function(){Duedil.widgets.helpers.create_datatable(this,"#widget_angellistwidget_"+e+" .data-table",{iDisplayLength:5,bSort:!1,aoColumnDefs:[{sWidth:"200px",aTargets:[0]}]})},destroy:function(){Duedil.widgets.helpers.destroy_datatable(this)}}},raydetailswidget:{init:function(){this.trackEvents();var e=$(".company-details .google-map");e.each(function(){var e=$(this),t=e.attr("data-address");new Duedil.map(t,e)})},trackEvents:function(){$("#widget_raydetailswidget a.edit").on("click",function(){Duedil.events.log(Duedil.events.PROF_COM_VI_DTLS,"Clicked Edit: Edit Details link")}),$("#widget_raydetailswidget .social-profiles a").on("click",function(e){var t=$(this).find("i").attr("class").split("-");Duedil.events.log(Duedil.events.PROF_COM_VI_DTLS,"Clicked Edit: "+t[1].split(" ")[0])}),$("#widget_raydetailswidget .cta-box a").on("click",function(){Duedil.events.log(Duedil.events.PROF_COM_VI_DTLS,"Clicked CTA: "+$(this).text())})}},shareholdings_factory:function(e){return{chart:null,widget:null,table:null,init:function(){var t=this,n=[],r=[],i=[],s;this.widget=$("#widget_shareholdingswidget_"+e),this.table=this.widget.find("table"),this.metrics=this.table.find("tr.metrics"),this.metrics_length=this.metrics.length,this.metrics.each(function(){var e=Math.round(100*parseFloat($(this).data("raw-percentage")))/100,t=$(this).data("key"),n=$(this).data("name"),s=$(this).data("share-ownership-formatted");i.push(n),r.push(e)}),$.each(r,function(e,t){n.push({name:i[e],data:[t]})}),n.sort(function(e,t){return t.data[0]-e.data[0]});var o=new Highcharts.Chart({chart:{renderTo:$("#shareholdings-chart .chart")[0],type:"column",height:t.chartHeight(),spacingLeft:0,spacingRight:0,spacingTop:20},title:{text:""},colors:["#88afcf","#cf8888","#bad6ed"],plotOptions:{column:{animation:!1,pointPadding:.2,borderWidth:0,shadow:!1}},legend:{enabled:!0,layout:"vertical",borderWidth:0,itemWidth:220,verticalAlign:"bottom",itemStyle:{fontFamily:'"Helvetica Neue", Helvetica, Arial, sans-serif',fontSize:"13px"},labelFormatter:function(){var e=this.name,t=e.match(/.{1,30}/g);return t.toString().replace(/\,/g,"<br/>")}},tooltip:{headerFormat:"<h4>Shareholders</h4><br />",valueSuffix:"%"},yAxis:{min:0,max:t.chartMax(n.length),title:{text:null},labels:{enabled:!0,formatter:function(){return this.value+"%"},x:15,y:-2,align:"center"}},xAxis:{title:{text:null},labels:{enabled:!1,y:18},tickLength:0},series:n,exporting:{enabled:!1},credits:{enabled:!1}});Duedil.widgets.helpers.create_datatable(this,this.table,{iDisplayLength:5,aaSortingFixed:[[1,"desc"]],bSortable:!1,aoColumnDefs:[{bVisible:!1,aTargets:[0,1]}],fnDrawCallback:function(e){Duedil.widgets.helpers.dataTablesGroupRows($(this).find("tbody tr"),e)}})},chartHeight:function(){var e=this;if(e.metrics_length<=5)return 250;if(e.metrics_length>5&&e.metrics_length<=10)return 300;if(e.metrics_length>10)return 450},chartMax:function(e){return e>1?null:100},destroy:function(){this.chart=null}}},ratioswidget:{init:function(){var e=this,t=$("#widget_ratioswidget"),n=t.find("#ratio-details");firstRatio=t.find(".dropdown-menu li:first"),unit=e.ratioUnit(firstRatio.data("type"),n.data("currency")),e.updateUnit(n.find("table span.unit"),unit),t.on("click",".dropdown-menu a",function(t){t.preventDefault();var r=$(this).parent(),i=r.data("ratios"),s=r.data("diff"),o=r.data("percentage"),u,a=document.createDocumentFragment(),f,l,c;u=e.ratioUnit(r.data("type"),n.data("currency")),Duedil.events.log(Duedil.events.PROF_COM_FI_ACCRAT,"Changed to: "+r.find("dfn").text());if(i.length>1)for(c=1;c<i.length;c++)f=document.createElement("tr"),l=document.createElement("td"),l.className="date",l.innerHTML=i[c].date_formatted,f.appendChild(l),l=document.createElement("td"),l.className="value",l.innerHTML=i[c].value_formatted,f.appendChild(l),a.appendChild(f);else f=document.createElement("tr"),l=document.createElement("td"),l.innerHTML="No previous values.",l.colSpan="2",f.appendChild(l),a.appendChild(l);$("#ratio-name").text(r.find("a").text()),$("#graph-ratio").data("metric",r.data("metric")),$("#graph-ratio").data("type",r.data("type")),n.find("span.first-value").text(r.data("first-value")),n.find("span.first-date").text(r.data("first-date")),n.find("span.diff").html((parseFloat(s)>0?"+":"")+s+(s?u:"")),n.find("span.percentage").text(o?"("+o+"%)":""),n.find("tbody").empty().html(a.cloneNode(!0)),n.find("div.first-value-wrapper span.unit").empty().text(u),e.updateUnit(n.find("table span.unit"),u),n.find("p").text(r.data("description")),n.find(".formula").html(r.data("formula").replace("%ob",'<span class="nonital">(</span>').replace("%cb",'<span class="nonital">)</span>')),parseFloat(s)>0?(n.find(".diff-wrapper").removeClass("red"),n.find(".diff-wrapper").addClass("green")):parseFloat(s)<0?(n.find(".diff-wrapper").removeClass("green"),n.find(".diff-wrapper").addClass("red")):(n.find(".diff-wrapper").removeClass("red"),n.find(".diff-wrapper").removeClass("green"))})},ratioUnit:function(e,t){switch(e){case"percentage":unit="%";break;case"currency":unit=" "+t;break;default:unit=""}return unit},updateUnit:function(e,t){e.empty().text(t?"("+t.replace(" ","")+")":"")}},linkedinnetworkwidgetfactory:function(e){return{widget:null,table:null,init:function(t){t&&t.raw_data&&t.raw_data.company?this.avoid_org_link=t.raw_data.company.org:this.avoid_org_link=null,this.widget=$(e),this.table=$("#linkedin-connections"),this.widget.on("click.linkedinconnections_ns",".signup.button",function(e){e.preventDefault(),e.stopPropagation(),Duedil.LoginArea.changeState("REGOPEN")}),$(document).on("shown",function(e){var t=$(e.target).data("triggerEl");if(t&&t.hasClass("invite-link")){var n=t.parents("tr").find(".linkedinId").val(),r=t.parents("tr").find(".linkedin-firstname").text();$(".modal .invite-name").text(r),$(".modal input#edit-id").val(n)}})},update:function(e){e.people&&e.people.values.length>0&&(Duedil.helpers.tabNotifications.init(),Duedil.helpers.tabNotifications.create("linkedin-connections","people"));if(!this.widget)return;var t=this.widget.find(".loading"),n=this.widget.find(".your-connections"),r=this.widget.find(".no-connections"),i=this.widget.find(".expired-token");apiThrottle=this.widget.find(".api-throttle");var s=e.people?"people":"connections";if(e.people&&e.people!="null"||e.connections&&e.connections!="null"){this.destroy(),this.table.find("tbody").html(Duedil.widgets.helpers.buildConnections(e,s,this.avoid_org_link)),button=document.createElement("div"),invited=document.createElement("div"),label=document.createElement("span");var o=document.createElement("a"),u=document.createElement("div");$(o).text("Invite").attr({"data-toggle":"modal",href:"/modals/linkedin-invite","data-target":"#modal","data-force":"true","data-showclose":"false","class":"invite-link linkedin-invite"}).insertBefore(this.table.find(" tbody tr:not(:has(.duedilId, .linkedinId[value='private'], .invited))").find("td:eq(1) .linkedin-invite-marker")),$(u).attr({"class":"duedil-badge js-tooltip","data-placement":"right",rel:"tooltip"}),$(invited).text("Invited").addClass("linkedin-invite invited").insertBefore(this.table.find(" tbody tr:has(.invited)").find("td:eq(1) .linkedin-invite-marker")),$(u).appendTo(this.table.find(" tbody tr:has(.duedilId)").find("td:first .avatar")),this.widget.find(".js-popover").popover({container:"body",trigger:"hover",html:!0}),Duedil.widgets.helpers.create_datatable(this,this.widget.find("table"),{iDisplayLength:5,bSort:!1}),t.hide(),n.show()}else e.failed_on==="expired_token"?(t.hide(),i.show()):e.failed_on==="api_throttle"?(t.hide(),apiThrottle.show()):(t.hide(),r.show())},destroy:function(){this.widget.find(".js-popover").popover("destroy"),Duedil.widgets.helpers.destroy_datatable(this),this.widget.off(".linkedinconnections_ns",".login.button")}}},valuationwidget:{profile:null,widget:null,wrapper:null,table:null,form:null,flagForm:null,pages:null,progressBar:null,valInput:null,estimation:null,characterCount:null,comment:null,criteria:{industry:null,metric:null},multiples:{consumerDiscretionary:{revenue:.9,ebitda:7.5,ebit:10.4,bookValue:2,netIncome:13.1},consumerStaples:{revenue:.7,ebitda:7.7,ebit:11,bookValue:1,netIncome:15.8},energy:{revenue:2.2,ebitda:9.2,ebit:23.7,bookValue:1.7,netIncome:28.7},financials:{revenue:11.9,ebitda:11.3,ebit:14.7,bookValue:.9,netIncome:9.6},healthcare:{revenue:1.7,ebitda:11.5,ebit:12.5,bookValue:1.2,netIncome:12.2},industrials:{revenue:.9,ebitda:7.8,ebit:10.3,bookValue:2.1,netIncome:16.3},informationTechnology:{revenue:1.2,ebitda:11.5,ebit:8.3,bookValue:3.2,netIncome:18},materials:{revenue:1,ebitda:9.7,ebit:9.7,bookValue:2.8,netIncome:14.5},telecommunicationServices:{revenue:1,ebitda:8.3,ebit:19.2,bookValue:4.6,netIncome:23.7},utilities:{revenue:3.1,ebitda:7,ebit:15.5,bookValue:1.8,netIncome:13.5}},init:function(e){this.profile=e.raw_data.company,this.widget=$("#widget_valuationwidget"),this.wrapper=$("#valuation"),this.form=$("#valuation-form"),this.flagForm=$("#flag-valuation-form"),this.table=$("#valuation-comments"),this.pages=this.form.find(".valuation-page"),this.progressBar=this.form.find(".progress-bar div"),this.valInput=this.form.find(".valuation-input"),this.comment=this.form.find("textarea"),this.characterCount=this.form.find(".character-count"),this.updateTotalSteps(),this.widget.find("select").select2({placeholder:"Industry",allowClear:!0}),Duedil.widgets.helpers.create_datatable(this,this.table,{iDisplayLength:3,bSort:!1,bAutoWidth:!1,fnDrawCallback:function(e){e.aoData.length&&(this.removeClass("hidden"),$(e.nTableWrapper).show())},aaSortingFixed:[[1,"desc"]],aoColumnDefs:[{bVisible:!1,aTargets:[1]}]}),this.bindEvents(),Math.floor(Math.random()*100+1)===1&&this.makeItSo()},bindEvents:function(){var e=this;this.widget.find(".make-valuation .value").on("click",function(t){e.openForm()}),$("#valuation-pagers .button").on("click",function(t){e.changePage($(t.target))}),this.widget.find(".valuation-help-toggle").on("click",function(t){t.preventDefault(),e.form.find(".valuation-help").slideToggle("fast")}),this.widget.on("click",".flag",function(t){var n=$(this);e.flagValuation(n)}),this.widget.find(".finish").on("click",function(t){var n=e.table.find("tbody tr:first-child");t.preventDefault(),e.closeForm(),e.resetForm(),n.css({backgroundColor:"#cdefc9"}),setTimeout(function(){n.addClass("fade-highlight"),n.css({backgroundColor:"#fff"})},800)}),this.widget.find(".cancel").on("click",function(t){e.closeForm(),e.resetForm()}),this.widget.find("select").on("change",function(t){var n=$(this),r=n.find("option:selected");n.hasClass("industry-selector")?($("#edit-valuation-industry").val(r.val()),r.val()!==""?e.enablePager("next"):e.disablePager("next")):$("#edit-valuation-metric").val(r.val()),e.updateValuation(r)}),this.valInput.on("keydown",function(t){setTimeout(function(){var t=e.valInput.data("original"),n=Duedil.helpers.number_format(e.valInput.val());n!=t&&(n==0?(e.valInput.val(""),e.valInput.data("original","")):(e.valInput.val(n),e.valInput.data("original",n)))},1)}),this.comment.on("keyup",function(t){e.updateCharacterCount()}),this.form.on("submit",function(t){t.preventDefault(),e.submitValuation(e.form[0])})},openForm:function(){this.wrapper.hide(),this.form.show(),this.pages.first().addClass("show"),this.updateProgressBar(),Duedil.events.log(Duedil.events.PROF_COM_VI_VALU,"Started valuation")},closeForm:function(){this.pages.removeClass("show"),this.form.find(".valuation-success").removeClass("show"),this.form.hide(),this.wrapper.show(),this.resetForm()},resetForm:function(){this.form.find("select").val(0).trigger("liszt:updated"),this.criteria.industry=null,this.criteria.metric=null,this.valInput.val(""),this.form.find("textarea").val("").trigger("keyup"),$("#edit-valuation-industry").val(""),$("#edit-valuation-metric").val(""),$("#valuation-pagers").show(),$("#valuation-errors").hide(),this.disablePager("next"),this.disablePager("previous"),$("#valuation-pagers .next").show(),$("#valuation-pagers .submit").hide(),Duedil.events.log(Duedil.events.PROF_COM_VI_VALU,"Cancelled valuation")},flagValuation:function(e){var t=e.siblings(".count"),n=parseInt(t.text(),10)||0;if(e.hasClass("disabled"))return!1;$("#edit-flag-vid").val(e.data("vid")),$("#edit-flag-action").val(e.hasClass("flagged")?0:1),$.ajax({type:this.flagForm[0].method,url:this.flagForm[0].action,data:this.flagForm.serialize(),success:function(r){r.errors||(e.hasClass("flagged")?(e.removeClass("flagged red"),t.text(n-1===0?"":n-1),Duedil.events.log(Duedil.events.PROF_COM_VI_VALU,"Unflagged user valuation")):(e.addClass("flagged red"),t.text(n+1),Duedil.events.log(Duedil.events.PROF_COM_VI_VALU,"Flagged user valuation")))},error:function(e){return!1}})},updateValuation:function(e){var t=0,n=0,r="";e.closest("select").hasClass("industry-selector")?this.criteria.industry=e.attr("value")||null:this.criteria.metric=e.attr("value")||null,this.criteria.industry&&this.criteria.metric&&(t=this.multiples[this.criteria.industry][this.criteria.metric],n=this.form.find(".metric-selector option:selected").data("value"),r=Math.round(n*t)),this.estimation=r,this.valInput.val(r).trigger("keydown"),Duedil.events.log(Duedil.events.PROF_COM_VI_VALU,"Valuation estimate made")},enablePager:function(e){this.form.find("."+e).removeClass("disabled")},disablePager:function(e){this.form.find("."+e).addClass("disabled")},changePage:function(e){var t=this.pages.filter(".show"),n=this.pages.index(t);return e.hasClass("disabled")?!1:e.hasClass("next")?(n++,t.removeClass("show"),$(this.pages[n]).addClass("show"),this.updateProgressBar(),n>=1&&this.enablePager("previous"),n===this.pages.length-1&&(e.hide(),$("#valuation-pagers .submit").show()),!0):e.hasClass("previous")?(n--,t.removeClass("show"),$(this.pages[n]).addClass("show"),this.updateProgressBar(),n<this.pages.length&&(e.siblings(".next").show(),$("#valuation-pagers .submit").hide()),n<=0&&this.disablePager("previous"),!0):!1},updateProgressBar:function(){var e=this.pages.index(this.pages.filter(".show"))+1,t=100/this.pages.length;this.progressBar.width(t*e+"%"),this.updateStepCounter(e)},updateStepCounter:function(e){this.form.find(".js-step").text(e)},updateTotalSteps:function(){this.form.find(".js-total-steps").text(this.pages.length)},updateCharacterCount:function(){var e=200,t=this.comment.val().length;t>=e&&(this.comment.val(this.comment.val().substring(0,e)),t=this.comment.val().length),this.characterCount.text(e-t)},submitValuation:function(e){var t=this,n=$("#valuation-errors"),r=n.find("ul");$.ajax({type:e.method,url:e.action,data:$(e).serialize(),success:function(e){var i;n.show(),r.empty();if(e.errors)for(i in e.errors)r.append("<li>"+e.errors[i]+"</li>");else t.pages.removeClass("show"),t.form.find(".valuation-success").addClass("show"),t.insertSocialShareLinks(e.success_vals.valuation_value),t.prependValuation(e.success_vals.valuation_comment,e.success_vals.valuation_value),t.updateAverageValuation(e.success_vals.valuation_value),t.estimation&&t.estimation!=t.valInput.val()&&Duedil.events.log(Duedil.events.PROF_COM_VI_VALU,"User edited estimate")},error:function(e){n.show(),r.empty().append("<li>We couldn't save your valuation at this time. Please try again later.</li>"),Duedil.events.log(Duedil.events.PROF_COM_VI_VALU,"Valuation submission failed")},dataType:"json"})},insertSocialShareLinks:function(e){var t="I just valued %c at %v "+this.widget.find(".average-wrapper").data("currency")+" on @duedil";twttr.widgets.createShareButton(window.location.origin+this.profile.url,this.widget.find(".valuation-social-share")[0],function(e){return},{size:"large",count:"none",text:t.replace("%c",this.profile.title).replace("%v",Duedil.helpers.number_format(e)),dnt:!0})},prependValuation:function(e,t){var n=new Date,r=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],i=n.getDate()<10?"0"+n.getDate():n.getDate(),s=r[n.getMonth()],o=n.getFullYear();this.dt.fnAddData(['<div><div class="user-details"><div class="avatar avatar-30"><img src="'+(user.picture?user.picture:theme_path+"/images/default-avatar-small.png")+'" width="30" height="30">'+"</div>"+"<div>"+'<span class="username">'+user.name+"</span><br>"+'<span class="user-valuation" data-raw-value="'+t+'">'+Duedil.helpers.number_format(t)+" "+this.widget.find(".average-wrapper").data("currency")+"</span>"+"</div>"+"</div>"+'<div class="flag-valuation">'+'<span class="count"></span>'+'<div class="button flag disabled">'+"<div></div>"+"</div>"+"</div>"+'<div class="user-comment">'+e+"</div>"+'<div class="date">'+[i,s,o].join(" ")+"</div>"+"</div>",Math.floor(n.getTime()/1e3)]),this.dt.fnSort([[1,"desc"]])},updateAverageValuation:function(e){var t=[];this.table.find(".user-valuation").each(function(){t.push($(this).data("raw-value"))}),this.widget.find(".average-wrapper").empty().html('<div class="average-valuation">'+Duedil.helpers.number_format(this.median(t))+" "+'<span class="currency">'+this.widget.find(".average-wrapper").data("currency")+"</span>"+"</div>"+'<div class="valuations-count">'+t.length+" "+(t.length===1?"valuation":"valuations")+"</div>")},median:function(e){var t=e.length,n=t/2|0;return e=e.sort(),t%2===0?(e[n]+e[n-1])/2:e[n]},makeItSo:function(){this.form.find(".valuation-success").addClass("success-meme")},destroy:function(){Duedil.widgets.helpers.destroy_datatable(this)}},creditscorewidget:{widget:null,widget_endpoint:null,profile:null,company:null,form:null,history_chart:null,init:function(e){var t=this;t.widget=$("#widget_creditscorewidget"),t.profile=e,t.company=e.raw_data.company,t.form=$("#credit-score-purchase"),t.widget_endpoint=t.company.url+"/creditscore_widget",t.open_red_flags_modal=e.raw_data.open_red_flags_modal,t._hasReport()?t._loadReport():this._drawHistograms(),t._shouldLoadReport()&&t._reloadWidget(),t.open_red_flags_modal&&t._openRedFlagsModal(),t._attachCommerceBindings(),t._initGazetteDataTables()},_openRedFlagsModal:function(){var e=this,t=$("#modal"),n=this.widget.find(".buy-wrapper.visible button"),r=this.widget.find(".inbasket-wrapper .button"),i="#red-flags-modal #purchase-item",s={show:!0,remote:"/company/"+this.company.org+"/red-flags"};t.modal(s),t.delegate(i,"click",function(){if(n.is(":visible")){n.trigger("click");var e=setInterval(function(){r.is(":visible")&&(r.trigger("click"),clearInterval(e))},50)}else r.trigger("click");return!1})},_drawHistograms:function(){this.histograms=this.widget.find(".box-graph .histogram").map(function(){var e=$(this).data("histogram");if(!e)return;var t=0,n=0,r=e.length;for(;n<r;n++)t=Math.max(e[n][1],t);var i=new Highcharts.Chart({chart:{margins:0,backgroundColor:"#F8F8F8",renderTo:this,animation:!1,spacingTop:0,spacingLeft:0,spacingRight:0,spacingBottom:0,borderRadius:0},exporting:{enabled:!1},title:{text:""},yAxis:{gridLineWidth:0,max:t,tickInterval:t,title:{text:null},labels:!1,minPadding:0,maxPadding:0},xAxis:{labels:!1,lineWidth:0,tickLength:0,minPadding:0,maxPadding:0,alternateGridColor:"white",tickInterval:20,min:1,max:100},legend:{enabled:!1},plotOptions:{column:{states:{hover:{enabled:!1}},animation:!1,pointPadding:0,shadow:!1,borderWidth:0,pointWidth:4,color:"#e6e6e6"}},series:[{data:e,type:"column"}],tooltip:{formatter:function(){return!1}},credits:{enabled:!1}});return i.xAxis[0].setExtremes(1,100,!0,!1),i}).toArray()},destroy:function(){this._unloadReport(),this._detachCommerceBindings(),AttachReferenceViewBinding.destroy(),this.widget=null,this.profile=null,this.company=null,this.form=null,this.widget_endpoint=null},_hasReport:function(){return this.widget.find(".report:not(.load-report)").length>0},_shouldLoadReport:function(){return this.widget.find(".report.load-report").length>0},_loadReport:function(){this._setScoreNeedle(),this._loadHistoryGraph(),this._drawHistograms(),AttachReferenceViewBinding.bind(this.widget),this.widget.find("#ccj-information .address").click(function(){$(this).toggleClass("expanded")})},_reloadWidget:function(){var e=this;$(".report, #credit-score-purchase, .message",this.widget).hide(),$(this.widget).addClass("loading-report"),$("> div",this.widget).append('<p class="message">We\'re generating your report now.</p>'),this._unloadReport(),this.ajazzle=$.ajax({url:this.widget_endpoint,context:e,success:function(t){e.ajazzle=null,$(this.widget).html($(t).html()).removeClass("loading-report"),$(this.widget).attr("class",$(t).attr("class")),$(".js-popover",this.widget).popover({container:"body",trigger:"hover",html:!0}),this.init(this.profile)},error:function(t,n,r){e.ajazzle=null,e._showError()}})},_showError:function(){this.widget.addClass("loading-error")},_setScoreNeedle:function(){var e=$("#dial").data("rating"),t=$("#needle");if(Modernizr.csstransforms){var n=180*(e/100),r=n*Math.PI/180,i=Math.cos(r),s=Math.sin(r),o="rotate("+n+"deg)";t.css({"-webkit-transform":o,"-moz-transform":o,"-ms-transform":o,"-o-transform":o,transform:o})}else{var u=t.data("fallback-src");t.attr("src",u)}},_loadHistoryGraph:function(){var e=this,t=$("#credit-history .graph-container .graph"),n=$(t).data("currency"),r=Highcharts.merge(e.lineGraphTheme,{chart:{renderTo:$(t).get(0),spacingRight:0,spacingLeft:0,spacingTop:20},yAxis:[{title:{text:null},min:0,max:100,gridLineWidth:1,gridLineColor:"#e3e3e3",tickInterval:20,labels:{align:"left",x:4,y:-3}},{title:{text:null},opposite:!0,min:0,gridLineWidth:0,labels:{align:"right",formatter:function(){return Duedil.helpers.money_format(this.value,n)},x:-4,y:-3}}],xAxis:{lineWidth:2,lineColor:"#000000",gridLineWidth:0},tooltip:{formatter:function(){return["<strong>",Duedil.helpers.formatDateJMY(this.x/1e3),"</strong>"," ",this.y].join("")}},series:[]}),i=$(t).data("rating-history"),s=[],o=[],u=$(t).data("limit-history"),a=[];if(!t.length)return;u&&$.each(u.sort(function(e,t){return e.date-t.date}),function(e,t){a.push([t.date*1e3,t.limit])}),a.length&&r.series.push({yAxis:1,data:[a[a.length-1],[(new Date).getTime(),a[a.length-1][1]]],color:r.colors[0],enableMouseTracking:!1,marker:{enabled:!1}}),r.series.push({data:a,yAxis:1});if(i){var f=null;$.each(i.sort(function(e,t){return e.date-t.date}),function(e,t){var n=t.date*1e3;s.push([n,t.rating>0?t.rating:null]),f&&(f.to=n,f=null),t.rating<=0&&o.push(f={color:"rgba(240, 77, 81, 0.1)",from:n})});var l={yAxis:0,data:[],color:r.colors[1],enableMouseTracking:!1,marker:{enabled:!1}};for(var c=1;c<s.length;c++)!s[c][1]&&s[c-1][1]&&(l.data.push(s[c-1]),l.data.push([s[c][0],s[c-1][1]]));f?f.to=(new Date).getTime():s.length&&(l.data.push(s[s.length-1]),l.data.push([(new Date).getTime(),s[s.length-1][1]]))}r.series.push(l),r.series.push({data:s,yAxis:0}),r.xAxis.plotBands=o,e.history_chart=new Highcharts.Chart(r)},_unloadReport:function(){this.ajazzle&&(this.ajazzle.abort(),this.ajazzle=null),this.histograms&&($(this.histograms).each(function(){this.destroy()}),this.histograms=null),this.history_chart&&(this.history_chart.destroy(),this.history_chart=null)},_attachCommerceBindings:function(){var e=this,t=Duedil.Commerce.basketQueue();$(this.form).on("submit",function(e){var n,r=$(this).find(".buy-wrapper.covering-method button");e.preventDefault(),r.attr("disabled","disabled").addClass("disabled"),n=$(this).serializeArray(),n.push({name:"_format",value:"json"}),n.push({name:r.attr("name"),value:r.attr("value")}),t.push({type:"POST",url:$(this).attr("action"),data:n,success:Duedil.Commerce.uiResponseHandler({errors:{tooltip:{target:$(e.target),placement:"top"}}})})}),$("a.basket-remove",e.form).on("click",function(e){e.preventDefault(),$.ajax({type:"GET",url:$(this).attr("href")+"&_format=json",success:Duedil.Commerce.handleResponse})}),$(document).on("basket-item-add.credit-score-widget",function(t,n){$(e.form).find(".inbasket-wrapper").removeClass("hidden").addClass("visible").siblings().removeClass("visible").addClass("hidden"),$(".buy-wrapper .button",e.form).removeAttr("disabled").removeClass("disabled")}).on("basket-item-remove.credit-score-widget",function(t,n){$(e.form).find(".buy-wrapper.covering-method").removeClass("hidden").addClass("visible").siblings().removeClass("visible").addClass("hidden")}).on("checkout-complete.credit-score-widget",function(t,n){!!n&&!!n.items&&$.each(n.items,function(t,n){if(n==e.form.data("product-code"))return e._reloadWidget(),!1})})},_detachCommerceBindings:function(){$(document).off(".credit-score-widget"),$(".remove",this.widget).off("click")},_initGazetteDataTables:function(){Duedil.widgets.company.gazettenoticeswidget._setupDataTables("#credit-company-gazette-notices .data-table")},_detachGazetteBindings:function(){$("#credit-company-gazette-notices .view-details").off("click")},lineGraphTheme:{chart:{height:250},colors:["#f1ba26","#59b3ef"],xAxis:{tickLength:0,tickmarkPlacement:"on",lineColor:"#7c7b7b",gridLineColor:"#d8d8ef",gridLineWidth:1,minPadding:.05,type:"datetime",max:(new Date).getTime(),dateTimeLabelFormats:{year:"%Y"},labels:{style:{fontSize:"10px"}},alternateGridColor:"#f8f6f7"},yAxis:{gridLineColor:"#d8d8ef",title:null,labels:{style:{fontSize:"10px"}}},plotOptions:{line:{step:"center",fillOpacity:.15,shadow:!1,states:{hover:{enabled:!0,lineWidth:2}},marker:{symbol:"circle",fillColor:"white",lineWidth:3,lineColor:null,radius:5,states:{hover:{enabled:!0,radius:6}}}}},tooltip:{formatter:function(){return["<strong>",Duedil.helpers.formatDateJMY(this.x/1e3),"</strong>"," ",Duedil.helpers.number_format(this.y)].join("")}},loading:{labelStyle:{top:"45%"}},legend:{enabled:!1},title:{text:null},exporting:{enabled:!1},credits:{enabled:!1}}},companyfinancialstatswidget:{widget:null,dates:null,currency:null,charts:[],init:function(){var e=this;this.widget=$("#widget_companyfinancialstatswidget"),this.dates=$("#financial-stats-metrics").data("dates"),this.currency=$("#financial-stats-metrics").data("currency");if(!this.dates)return;this.widget.find(".metric-wrapper").each(function(){e.buildGraph($(this))})},gatherData:function(e){var t=[],n;for(n=0;n<this.dates.length;n++)e[n]!==0&&t.push([this.dates[n]*1e3,e[n]]);return t},buildGraph:function(e){var t=this;values=e.data("values"),chart=new Highcharts.Chart({chart:{renderTo:e.find(".chart-wrapper")[0],type:"line",backgroundColor:null,plotBackgroundColor:"#fff",width:264,height:146},colors:["#90b2d5"],legend:{enabled:!1},credits:{enabled:!1},title:{text:null},xAxis:{type:"datetime",dateTimeLabelFormats:{year:"%Y"},tickLength:0,tickmarkPlacement:"on",lineColor:"#7f7f7f",minPadding:0,min:t.dates[0]*1e3,max:t.dates[t.dates.length-1]*1e3},yAxis:{title:{text:null},maxPadding:0,labels:{align:"left",formatter:function(){return Duedil.helpers.abbreviateNumber(this.value,2)}},opposite:!0,gridLineColor:"#e5e5e5",alternateGridColor:"#f8f6f7"},plotOptions:{line:{shadow:!1,states:{hover:{lineWidth:3}},marker:{symbol:"circle",fillColor:"white",lineColor:null,lineWidth:3,radius:4,states:{hover:{radius:5}}}}},exporting:{enabled:!1},tooltip:{style:{padding:"8px",fontSize:"13px",fontWeight:"normal"},formatter:function(){return"<strong>"+Highcharts.dateFormat("%e %b %Y",this.x)+"</strong> "+Highcharts.numberFormat(this.y,0)+" "+t.currency}},series:[{name:e.find("h3").text(),data:t.gatherData(values)}]}),this.charts.push(chart)},destroy:function(){for(var e=0;e<this.charts.length;e++)this.charts[e].destroy();this.charts=[]}},companymapwidget:{init:function(){var e=$("#widget_companymapwidget .google-map"),t=new Duedil.map(e.data("address"),e)}},groupgraphwidget:{widget:null,groupgraph:null,init:function(e){this.widget=$("#widget_groupgraphwidget"),this.groupgraph=new Duedil.groupgraph($("#groupgraph"),e.raw_data.company.org)}},chartwidget:{widget:null,init:function(e){this.widget=$("#widget_chartwidget");var t=this.widget.find(".chart-wrapper"),n=new Duedil.chart(e.raw_data.company,t)}}};with({w:Duedil.widgets.company})w.filingswidget_vitals=w.filings_widg_factory("#widget_filingswidget_vitals"),w.filingswidget_financials=w.filings_widg_factory("#widget_filingswidget_financials"),w.angellistwidget_financials=w.angel_widg_factory("financials"),w.angellistwidget_people=w.angel_widg_factory("people"),w.shareholdingswidget_people=w.shareholdings_factory("people"),w.shareholdingswidget_financials=w.shareholdings_factory("financials"),w.linkedinnetworkwidgetcompany=w.linkedinnetworkwidgetfactory("#widget_linkedinnetworkwidgetcompany"),w.linkedinnetworkwidgetdashboard=w.linkedinnetworkwidgetfactory("#widget_linkedinnetworkwidgetdashboard")}),function(e){define("bootstrap-dropdown",["jquery"],function(){return function(){!function(e){function t(){e(".dropdown-backdrop").remove(),e(r).each(function(){n(e(this)).removeClass("open")})}function n(t){var n=t.attr("data-target"),r;n||(n=t.attr("href"),n=n&&/#/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,"")),r=n&&e(n);if(!r||!r.length)r=t.parent();return r}var r="[data-toggle=dropdown]",i=function(t){var n=e(t).on("click.dropdown.data-api",this.toggle);e("html").on("click.dropdown.data-api",function(){n.parent().removeClass("open")})};i.prototype={constructor:i,toggle:function(r){var i=e(this),s,o;if(i.is(".disabled, :disabled"))return;return s=n(i),o=s.hasClass("open"),t(),o||("ontouchstart"in document.documentElement&&e('<div class="dropdown-backdrop"/>').insertBefore(e(this)).on("click",t),s.toggleClass("open")),i.focus(),!1},keydown:function(t){var i,s,o,u,a,f;if(!/(38|40|27)/.test(t.keyCode))return;i=e(this),t.preventDefault(),t.stopPropagation();if(i.is(".disabled, :disabled"))return;u=n(i),a=u.hasClass("open");if(!a||a&&t.keyCode==27)return t.which==27&&u.find(r).focus(),i.click();s=e("[role=menu] li:not(.divider):visible a",u);if(!s.length)return;f=s.index(s.filter(":focus")),t.keyCode==38&&f>0&&f--,t.keyCode==40&&f<s.length-1&&f++,~f||(f=0),s.eq(f).focus()}};var s=e.fn.dropdown;e.fn.dropdown=function(t){return this.each(function(){var n=e(this),r=n.data("dropdown");r||n.data("dropdown",r=new i(this)),typeof t=="string"&&r[t].call(n)})},e.fn.dropdown.Constructor=i,e.fn.dropdown.noConflict=function(){return e.fn.dropdown=s,this},e(document).on("click.dropdown.data-api",t).on("click.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.dropdown.data-api",r,i.prototype.toggle).on("keydown.dropdown.data-api",r+", [role=menu]",i.prototype.keydown)}(window.jQuery)}.apply(e,arguments)})}(this),function(e){define("bootstrap-datepicker",["jquery"],function(){return function(){(function(e){function n(){return new Date(Date.UTC.apply(Date,arguments))}function r(){var e=new Date;return n(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate())}function o(t,n){var r=e(t).data(),i={},s,o=new RegExp("^"+n.toLowerCase()+"([A-Z])"),n=new RegExp("^"+n.toLowerCase());for(var u in r)n.test(u)&&(s=u.replace(o,function(e,t){return t.toLowerCase()}),i[s]=r[u]);return i}function u(t){var n={};if(!c[t]){t=t.split("-")[0];if(!c[t])return}var r=c[t];return e.each(l,function(e,t){t in r&&(n[t]=r[t])}),n}var t=e(window),i=function(t,n){var r=this;this._process_options(n),this.element=e(t),this.isInline=!1,this.isInput=this.element.is("input"),this.component=this.element.is(".date")?this.element.find(".add-on, .btn"):!1,this.hasInput=this.component&&this.element.find("input").length,this.component&&this.component.length===0&&(this.component=!1),this.picker=e(h.template),this._buildEvents(),this._attachEvents(),this.isInline?this.picker.addClass("datepicker-inline").appendTo(this.element):this.picker.addClass("datepicker-dropdown dropdown-menu"),this.o.rtl&&(this.picker.addClass("datepicker-rtl"),this.picker.find(".prev i, .next i").toggleClass("icon-arrow-left icon-arrow-right")),this.viewMode=this.o.startView,this.o.calendarWeeks&&this.picker.find("tfoot th.today").attr("colspan",function(e,t){return parseInt(t)+1}),this._allow_update=!1,this.setStartDate(this._o.startDate),this.setEndDate(this._o.endDate),this.setDaysOfWeekDisabled(this.o.daysOfWeekDisabled),this.fillDow(),this.fillMonths(),this._allow_update=!0,this.update(),this.showMode(),this.isInline&&this.show()};i.prototype={constructor:i,_process_options:function(t){this._o=e.extend({},this._o,t);var n=this.o=e.extend({},this._o),r=n.language;c[r]||(r=r.split("-")[0],c[r]||(r=f.language)),n.language=r;switch(n.startView){case 2:case"decade":n.startView=2;break;case 1:case"year":n.startView=1;break;default:n.startView=0}switch(n.minViewMode){case 1:case"months":n.minViewMode=1;break;case 2:case"years":n.minViewMode=2;break;default:n.minViewMode=0}n.startView=Math.max(n.startView,n.minViewMode),n.weekStart%=7,n.weekEnd=(n.weekStart+6)%7;var i=h.parseFormat(n.format);n.startDate!==-Infinity&&(n.startDate?n.startDate instanceof Date?n.startDate=this._local_to_utc(this._zero_time(n.startDate)):n.startDate=h.parseDate(n.startDate,i,n.language):n.startDate=-Infinity),n.endDate!==Infinity&&(n.endDate?n.endDate instanceof Date?n.endDate=this._local_to_utc(this._zero_time(n.endDate)):n.endDate=h.parseDate(n.endDate,i,n.language):n.endDate=Infinity),n.daysOfWeekDisabled=n.daysOfWeekDisabled||[],e.isArray(n.daysOfWeekDisabled)||(n.daysOfWeekDisabled=n.daysOfWeekDisabled.split(/[,\s]*/)),n.daysOfWeekDisabled=e.map(n.daysOfWeekDisabled,function(e){return parseInt(e,10)});var s=String(n.orientation).toLowerCase().split(/\s+/g),o=n.orientation.toLowerCase();s=e.grep(s,function(e){return/^auto|left|right|top|bottom$/.test(e)}),n.orientation={x:"auto",y:"auto"};if(!!o&&o!=="auto")if(s.length===1)switch(s[0]){case"top":case"bottom":n.orientation.y=s[0];break;case"left":case"right":n.orientation.x=s[0]}else o=e.grep(s,function(e){return/^left|right$/.test(e)}),n.orientation.x=o[0]||"auto",o=e.grep(s,function(e){return/^top|bottom$/.test(e)}),n.orientation.y=o[0]||"auto"},_events:[],_secondaryEvents:[],_applyEvents:function(e){for(var t=0,n,r;t<e.length;t++)n=e[t][0],r=e[t][1],n.on(r)},_unapplyEvents:function(e){for(var t=0,n,r;t<e.length;t++)n=e[t][0],r=e[t][1],n.off(r)},_buildEvents:function(){this.isInput?this._events=[[this.element,{focus:e.proxy(this.show,this),keyup:e.proxy(this.update,this),keydown:e.proxy(this.keydown,this)}]]:this.component&&this.hasInput?this._events=[[this.element.find("input"),{focus:e.proxy(this.show,this),keyup:e.proxy(this.update,this),keydown:e.proxy(this.keydown,this)}],[this.component,{click:e.proxy(this.show,this)}]]:this.element.is("div")?this.isInline=!0:this._events=[[this.element,{click:e.proxy(this.show,this)}]],this._secondaryEvents=[[this.picker,{click:e.proxy(this.click,this)}],[e(window),{resize:e.proxy(this.place,this)}],[e(document),{"mousedown touchstart":e.proxy(function(e){this.element.is(e.target)||this.element.find(e.target).length||this.picker.is(e.target)||this.picker.find(e.target).length||this.hide()},this)}]]},_attachEvents:function(){this._detachEvents(),this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents(),this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(t,n){var r=n||this.date,i=this._utc_to_local(r);this.element.trigger({type:t,date:i,format:e.proxy(function(e){var t=e||this.o.format;return h.formatDate(r,t,this.o.language)},this)})},show:function(e){this.isInline||this.picker.appendTo("body"),this.picker.show(),this.height=this.component?this.component.outerHeight():this.element.outerHeight(),this.place(),this._attachSecondaryEvents(),e&&e.preventDefault(),this._trigger("show")},hide:function(e){if(this.isInline)return;if(!this.picker.is(":visible"))return;this.picker.hide().detach(),this._detachSecondaryEvents(),this.viewMode=this.o.startView,this.showMode(),this.o.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())&&this.setValue(),this._trigger("hide")},remove:function(){this.hide(),this._detachEvents(),this._detachSecondaryEvents(),this.picker.remove(),delete this.element.data().datepicker,this.isInput||delete this.element.data().date},_utc_to_local:function(e){return new Date(e.getTime()+e.getTimezoneOffset()*6e4)},_local_to_utc:function(e){return new Date(e.getTime()-e.getTimezoneOffset()*6e4)},_zero_time:function(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate())},_zero_utc_time:function(e){return new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()))},getDate:function(){return this._utc_to_local(this.getUTCDate())},getUTCDate:function(){return this.date},setDate:function(e){this.setUTCDate(this._local_to_utc(e))},setUTCDate:function(e){this.date=e,this.setValue()},setValue:function(){var e=this.getFormattedDate();this.isInput?this.element.val(e).change():this.component&&this.element.find("input").val(e).change()},getFormattedDate:function(e){return e===undefined&&(e=this.o.format),h.formatDate(this.date,e,this.o.language)},setStartDate:function(e){this._process_options({startDate:e}),this.update(),this.updateNavArrows()},setEndDate:function(e){this._process_options({endDate:e}),this.update(),this.updateNavArrows()},setDaysOfWeekDisabled:function(e){this._process_options({daysOfWeekDisabled:e}),this.update(),this.updateNavArrows()},place:function(){if(this.isInline)return;var n=this.picker.outerWidth(),r=this.picker.outerHeight(),i=10,s=t.width(),o=t.height(),u=t.scrollTop(),a=parseInt(this.element.parents().filter(function(){return e(this).css("z-index")!="auto"}).first().css("z-index"))+10,f=this.component?this.component.parent().offset():this.element.offset(),l=this.component?this.component.outerHeight(!0):this.element.outerHeight(!1),c=this.component?this.component.outerWidth(!0):this.element.outerWidth(!1),h=f.left,p=f.top;this.picker.removeClass("datepicker-orient-top datepicker-orient-bottom datepicker-orient-right datepicker-orient-left"),this.o.orientation.x!=="auto"?(this.picker.addClass("datepicker-orient-"+this.o.orientation.x),this.o.orientation.x==="right"&&(h-=n-c)):(this.picker.addClass("datepicker-orient-left"),f.left<0?h-=f.left-i:f.left+n>s&&(h=s-n-i));var d=this.o.orientation.y,v,m;d==="auto"&&(v=-u+f.top-r,m=u+o-(f.top+l+r),Math.max(v,m)===m?d="top":d="bottom"),this.picker.addClass("datepicker-orient-"+d),d==="top"?p+=l:p-=r+parseInt(this.picker.css("padding-top")),this.picker.css({top:p,left:h,zIndex:a})},_allow_update:!0,update:function(){if(!this._allow_update)return;var e=new Date(this.date),t,n=!1;arguments&&arguments.length&&(typeof arguments[0]=="string"||arguments[0]instanceof Date)?(t=arguments[0],t instanceof Date&&(t=this._local_to_utc(t)),n=!0):(t=this.isInput?this.element.val():this.element.data("date")||this.element.find("input").val(),delete this.element.data().date),this.date=h.parseDate(t,this.o.format,this.o.language),n?this.setValue():t?e.getTime()!==this.date.getTime()&&this._trigger("changeDate"):this._trigger("clearDate"),this.date<this.o.startDate?(this.viewDate=new Date(this.o.startDate),this.date=new Date(this.o.startDate)):this.date>this.o.endDate?(this.viewDate=new Date(this.o.endDate),this.date=new Date(this.o.endDate)):(this.viewDate=new Date(this.date),this.date=new Date(this.date)),this.fill()},fillDow:function(){var e=this.o.weekStart,t="<tr>";if(this.o.calendarWeeks){var n='<th class="cw">&nbsp;</th>';t+=n,this.picker.find(".datepicker-days thead tr:first-child").prepend(n)}while(e<this.o.weekStart+7)t+='<th class="dow">'+c[this.o.language].daysMin[e++%7]+"</th>";t+="</tr>",this.picker.find(".datepicker-days thead").append(t)},fillMonths:function(){var e="",t=0;while(t<12)e+='<span class="month">'+c[this.o.language].monthsShort[t++]+"</span>";this.picker.find(".datepicker-months td").html(e)},setRange:function(t){!t||!t.length?delete this.range:this.range=e.map(t,function(e){return e.valueOf()}),this.fill()},getClassNames:function(t){var n=[],r=this.viewDate.getUTCFullYear(),i=this.viewDate.getUTCMonth(),s=this.date.valueOf(),o=new Date;return t.getUTCFullYear()<r||t.getUTCFullYear()==r&&t.getUTCMonth()<i?n.push("old"):(t.getUTCFullYear()>r||t.getUTCFullYear()==r&&t.getUTCMonth()>i)&&n.push("new"),this.o.todayHighlight&&t.getUTCFullYear()==o.getFullYear()&&t.getUTCMonth()==o.getMonth()&&t.getUTCDate()==o.getDate()&&n.push("today"),t.valueOf()==s&&n.push("active"),(t.valueOf()<this.o.startDate||t.valueOf()>this.o.endDate||e.inArray(t.getUTCDay(),this.o.daysOfWeekDisabled)!==-1)&&n.push("disabled"),this.range&&(t>this.range[0]&&t<this.range[this.range.length-1]&&n.push("range"),e.inArray(t.valueOf(),this.range)!=-1&&n.push("selected")),n},fill:function(){var t=new Date(this.viewDate),r=t.getUTCFullYear(),i=t.getUTCMonth(),s=this.o.startDate!==-Infinity?this.o.startDate.getUTCFullYear():-Infinity,o=this.o.startDate!==-Infinity?this.o.startDate.getUTCMonth():-Infinity,u=this.o.endDate!==Infinity?this.o.endDate.getUTCFullYear():Infinity,a=this.o.endDate!==Infinity?this.o.endDate.getUTCMonth():Infinity,f=this.date&&this.date.valueOf(),l;this.picker.find(".datepicker-days thead th.datepicker-switch").text(c[this.o.language].months[i]+" "+r),this.picker.find("tfoot th.today").text(c[this.o.language].today).toggle(this.o.todayBtn!==!1),this.picker.find("tfoot th.clear").text(c[this.o.language].clear).toggle(this.o.clearBtn!==!1),this.updateNavArrows(),this.fillMonths();var p=n(r,i-1,28,0,0,0,0),d=h.getDaysInMonth(p.getUTCFullYear(),p.getUTCMonth());p.setUTCDate(d),p.setUTCDate(d-(p.getUTCDay()-this.o.weekStart+7)%7);var v=new Date(p);v.setUTCDate(v.getUTCDate()+42),v=v.valueOf();var m=[],g;while(p.valueOf()<v){if(p.getUTCDay()==this.o.weekStart){m.push("<tr>");if(this.o.calendarWeeks){var y=new Date(+p+(this.o.weekStart-p.getUTCDay()-7)%7*864e5),b=new Date(+y+(11-y.getUTCDay())%7*864e5),w=new Date(+(w=n(b.getUTCFullYear(),0,1))+(11-w.getUTCDay())%7*864e5),E=(b-w)/864e5/7+1;m.push('<td class="cw">'+E+"</td>")}}g=this.getClassNames(p),g.push("day");if(this.o.beforeShowDay!==e.noop){var S=this.o.beforeShowDay(this._utc_to_local(p));S===undefined?S={}:typeof S=="boolean"?S={enabled:S}:typeof S=="string"&&(S={classes:S}),S.enabled===!1&&g.push("disabled"),S.classes&&(g=g.concat(S.classes.split(/\s+/))),S.tooltip&&(l=S.tooltip)}g=e.unique(g),m.push('<td class="'+g.join(" ")+'"'+(l?' title="'+l+'"':"")+">"+p.getUTCDate()+"</td>"),p.getUTCDay()==this.o.weekEnd&&m.push("</tr>"),p.setUTCDate(p.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").empty().append(m.join(""));var x=this.date&&this.date.getUTCFullYear(),T=this.picker.find(".datepicker-months").find("th:eq(1)").text(r).end().find("span").removeClass("active");x&&x==r&&T.eq(this.date.getUTCMonth()).addClass("active"),(r<s||r>u)&&T.addClass("disabled"),r==s&&T.slice(0,o).addClass("disabled"),r==u&&T.slice(a+1).addClass("disabled"),m="",r=parseInt(r/10,10)*10;var N=this.picker.find(".datepicker-years").find("th:eq(1)").text(r+"-"+(r+9)).end().find("td");r-=1;for(var C=-1;C<11;C++)m+='<span class="year'+(C==-1?" old":C==10?" new":"")+(x==r?" active":"")+(r<s||r>u?" disabled":"")+'">'+r+"</span>",r+=1;N.html(m)},updateNavArrows:function(){if(!this._allow_update)return;var e=new Date(this.viewDate),t=e.getUTCFullYear(),n=e.getUTCMonth();switch(this.viewMode){case 0:this.o.startDate!==-Infinity&&t<=this.o.startDate.getUTCFullYear()&&n<=this.o.startDate.getUTCMonth()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.o.endDate!==Infinity&&t>=this.o.endDate.getUTCFullYear()&&n>=this.o.endDate.getUTCMonth()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 1:case 2:this.o.startDate!==-Infinity&&t<=this.o.startDate.getUTCFullYear()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.o.endDate!==Infinity&&t>=this.o.endDate.getUTCFullYear()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"})}},click:function(t){t.preventDefault();var r=e(t.target).closest("span, td, th");if(r.length==1)switch(r[0].nodeName.toLowerCase()){case"th":switch(r[0].className){case"datepicker-switch":this.showMode(1);break;case"prev":case"next":var i=h.modes[this.viewMode].navStep*(r[0].className=="prev"?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveMonth(this.viewDate,i),this._trigger("changeMonth",this.viewDate);break;case 1:case 2:this.viewDate=this.moveYear(this.viewDate,i),this.viewMode===1&&this._trigger("changeYear",this.viewDate)}this.fill();break;case"today":var s=new Date;s=n(s.getFullYear(),s.getMonth(),s.getDate(),0,0,0),this.showMode(-2);var o=this.o.todayBtn=="linked"?null:"view";this._setDate(s,o);break;case"clear":var u;this.isInput?u=this.element:this.component&&(u=this.element.find("input")),u&&u.val("").change(),this._trigger("changeDate"),this.update(),this.o.autoclose&&this.hide()}break;case"span":if(!r.is(".disabled")){this.viewDate.setUTCDate(1);if(r.is(".month")){var a=1,f=r.parent().find("span").index(r),l=this.viewDate.getUTCFullYear();this.viewDate.setUTCMonth(f),this._trigger("changeMonth",this.viewDate),this.o.minViewMode===1&&this._setDate(n(l,f,a,0,0,0,0))}else{var l=parseInt(r.text(),10)||0,a=1,f=0;this.viewDate.setUTCFullYear(l),this._trigger("changeYear",this.viewDate),this.o.minViewMode===2&&this._setDate(n(l,f,a,0,0,0,0))}this.showMode(-1),this.fill()}break;case"td":if(r.is(".day")&&!r.is(".disabled")){var a=parseInt(r.text(),10)||1,l=this.viewDate.getUTCFullYear(),f=this.viewDate.getUTCMonth();r.is(".old")?f===0?(f=11,l-=1):f-=1:r.is(".new")&&(f==11?(f=0,l+=1):f+=1),this._setDate(n(l,f,a,0,0,0,0))}}},_setDate:function(e,t){if(!t||t=="date")this.date=new Date(e);if(!t||t=="view")this.viewDate=new Date(e);this.fill(),this.setValue(),this._trigger("changeDate");var n;this.isInput?n=this.element:this.component&&(n=this.element.find("input")),n&&n.change(),this.o.autoclose&&(!t||t=="date")&&this.hide()},moveMonth:function(e,t){if(!t)return e;var n=new Date(e.valueOf()),r=n.getUTCDate(),i=n.getUTCMonth(),s=Math.abs(t),o,u;t=t>0?1:-1;if(s==1){u=t==-1?function(){return n.getUTCMonth()==i}:function(){return n.getUTCMonth()!=o},o=i+t,n.setUTCMonth(o);if(o<0||o>11)o=(o+12)%12}else{for(var a=0;a<s;a++)n=this.moveMonth(n,t);o=n.getUTCMonth(),n.setUTCDate(r),u=function(){return o!=n.getUTCMonth()}}while(u())n.setUTCDate(--r),n.setUTCMonth(o);return n},moveYear:function(e,t){return this.moveMonth(e,t*12)},dateWithinRange:function(e){return e>=this.o.startDate&&e<=this.o.endDate},keydown:function(e){if(this.picker.is(":not(:visible)")){e.keyCode==27&&this.show();return}var t=!1,n,r,i,s,o;switch(e.keyCode){case 27:this.hide(),e.preventDefault();break;case 37:case 39:if(!this.o.keyboardNavigation)break;n=e.keyCode==37?-1:1,e.ctrlKey?(s=this.moveYear(this.date,n),o=this.moveYear(this.viewDate,n),this._trigger("changeYear",this.viewDate)):e.shiftKey?(s=this.moveMonth(this.date,n),o=this.moveMonth(this.viewDate,n),this._trigger("changeMonth",this.viewDate)):(s=new Date(this.date),s.setUTCDate(this.date.getUTCDate()+n),o=new Date(this.viewDate),o.setUTCDate(this.viewDate.getUTCDate()+n)),this.dateWithinRange(s)&&(this.date=s,this.viewDate=o,this.setValue(),this.update(),e.preventDefault(),t=!0);break;case 38:case 40:if(!this.o.keyboardNavigation)break;n=e.keyCode==38?-1:1,e.ctrlKey?(s=this.moveYear(this.date,n),o=this.moveYear(this.viewDate,n),this._trigger("changeYear",this.viewDate)):e.shiftKey?(s=this.moveMonth(this.date,n),o=this.moveMonth(this.viewDate,n),this._trigger("changeMonth",this.viewDate)):(s=new Date(this.date),s.setUTCDate(this.date.getUTCDate()+n*7),o=new Date(this.viewDate),o.setUTCDate(this.viewDate.getUTCDate()+n*7)),this.dateWithinRange(s)&&(this.date=s,this.viewDate=o,this.setValue(),this.update(),e.preventDefault(),t=!0);break;case 13:this.hide(),e.preventDefault();break;case 9:this.hide()}if(t){this._trigger("changeDate");var u;this.isInput?u=this.element:this.component&&(u=this.element.find("input")),u&&u.change()}},showMode:function(e){e&&(this.viewMode=Math.max(this.o.minViewMode,Math.min(2,this.viewMode+e))),this.picker.find(">div").hide().filter(".datepicker-"+h.modes[this.viewMode].clsName).css("display","block"),this.updateNavArrows()}};var s=function(t,n){this.element=e(t),this.inputs=e.map(n.inputs,function(e){return e.jquery?e[0]:e}),delete n.inputs,e(this.inputs).datepicker(n).bind("changeDate",e.proxy(this.dateUpdated,this)),this.pickers=e.map(this.inputs,function(t){return e(t).data("datepicker")}),this.updateDates()};s.prototype={updateDates:function(){this.dates=e.map(this.pickers,function(e){return e.date}),this.updateRanges()},updateRanges:function(){var t=e.map(this.dates,function(e){return e.valueOf()});e.each(this.pickers,function(e,n){n.setRange(t)})},dateUpdated:function(t){var n=e(t.target).data("datepicker"),r=n.getUTCDate(),i=e.inArray(t.target,this.inputs),s=this.inputs.length;if(i==-1)return;if(r<this.dates[i])while(i>=0&&r<this.dates[i])this.pickers[i--].setUTCDate(r);else if(r>this.dates[i])while(i<s&&r>this.dates[i])this.pickers[i++].setUTCDate(r);this.updateDates()},remove:function(){e.map(this.pickers,function(e){e.remove()}),delete this.element.data().datepicker}};var a=e.fn.datepicker;e.fn.datepicker=function(t){var n=Array.apply(null,arguments);n.shift();var r,a;return this.each(function(){var a=e(this),l=a.data("datepicker"),c=typeof t=="object"&&t;if(!l){var h=o(this,"date"),p=e.extend({},f,h,c),d=u(p.language),v=e.extend({},f,d,h,c);if(a.is(".input-daterange")||v.inputs){var m={inputs:v.inputs||a.find("input").toArray()};a.data("datepicker",l=new s(this,e.extend(v,m)))}else a.data("datepicker",l=new i(this,v))}if(typeof t=="string"&&typeof l[t]=="function"){r=l[t].apply(l,n);if(r!==undefined)return!1}}),r!==undefined?r:this};var f=e.fn.datepicker.defaults={autoclose:!1,beforeShowDay:e.noop,calendarWeeks:!1,clearBtn:!1,daysOfWeekDisabled:[],endDate:Infinity,forceParse:!0,format:"mm/dd/yyyy",keyboardNavigation:!0,language:"en",minViewMode:0,orientation:"auto",rtl:!1,startDate:-Infinity,startView:0,todayBtn:!1,todayHighlight:!1,weekStart:0},l=e.fn.datepicker.locale_opts=["format","rtl","weekStart"];e.fn.datepicker.Constructor=i;var c=e.fn.datepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear"}},h={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(e){return e%4===0&&e%100!==0||e%400===0},getDaysInMonth:function(e,t){return[31,h.isLeapYear(e)?29:28,31,30,31,30,31,31,30,31,30,31][t]},validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\[\u3400-\u9fff-`{-~\t\n\r]+/g,parseFormat:function(e){var t=e.replace(this.validParts,"\0").split("\0"),n=e.match(this.validParts);if(!t||!t.length||!n||n.length===0)throw new Error("Invalid date format.");return{separators:t,parts:n}},parseDate:function(t,r,s){if(t instanceof Date)return t;typeof r=="string"&&(r=h.parseFormat(r));if(/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(t)){var o=/([\-+]\d+)([dmwy])/,u=t.match(/([\-+]\d+)([dmwy])/g),a,f;t=new Date;for(var l=0;l<u.length;l++){a=o.exec(u[l]),f=parseInt(a[1]);switch(a[2]){case"d":t.setUTCDate(t.getUTCDate()+f);break;case"m":t=i.prototype.moveMonth.call(i.prototype,t,f);break;case"w":t.setUTCDate(t.getUTCDate()+f*7);break;case"y":t=i.prototype.moveYear.call(i.prototype,t,f)}}return n(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),0,0,0)}var u=t&&t.match(this.nonpunctuation)||[],t=new Date,p={},d=["yyyy","yy","M","MM","m","mm","d","dd"],v={yyyy:function(e,t){return e.setUTCFullYear(t)},yy:function(e,t){return e.setUTCFullYear(2e3+t)},m:function(e,t){if(isNaN(e))return e;t-=1;while(t<0)t+=12;t%=12,e.setUTCMonth(t);while(e.getUTCMonth()!=t)e.setUTCDate(e.getUTCDate()-1);return e},d:function(e,t){return e.setUTCDate(t)}},m,g,a;v.M=v.MM=v.mm=v.m,v.dd=v.d,t=n(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0);var y=r.parts.slice();u.length!=y.length&&(y=e(y).filter(function(t,n){return e.inArray(n,d)!==-1}).toArray());if(u.length==y.length){for(var l=0,b=y.length;l<b;l++){m=parseInt(u[l],10),a=y[l];if(isNaN(m))switch(a){case"MM":g=e(c[s].months).filter(function(){var e=this.slice(0,u[l].length),t=u[l].slice(0,e.length);return e==t}),m=e.inArray(g[0],c[s].months)+1;break;case"M":g=e(c[s].monthsShort).filter(function(){var e=this.slice(0,u[l].length),t=u[l].slice(0,e.length);return e==t}),m=e.inArray(g[0],c[s].monthsShort)+1}p[a]=m}for(var l=0,w,E;l<d.length;l++)E=d[l],E in p&&!isNaN(p[E])&&(w=new Date(t),v[E](w,p[E]),isNaN(w)||(t=w))}return t},formatDate:function(t,n,r){typeof n=="string"&&(n=h.parseFormat(n));var i={d:t.getUTCDate(),D:c[r].daysShort[t.getUTCDay()],DD:c[r].days[t.getUTCDay()],m:t.getUTCMonth()+1,M:c[r].monthsShort[t.getUTCMonth()],MM:c[r].months[t.getUTCMonth()],yy:t.getUTCFullYear().toString().substring(2),yyyy:t.getUTCFullYear()};i.dd=(i.d<10?"0":"")+i.d,i.mm=(i.m<10?"0":"")+i.m;var t=[],s=e.extend([],n.separators);for(var o=0,u=n.parts.length;o<=u;o++)s.length&&t.push(s.shift()),t.push(i[n.parts[o]]);return t.join("")},headTemplate:'<thead><tr><th class="prev">&laquo;</th><th colspan="5" class="datepicker-switch"></th><th class="next">&raquo;</th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr><tr><th colspan="7" class="clear"></th></tr></tfoot>'};h.template='<div class="datepicker"><div class="datepicker-days"><table class=" table-condensed">'+h.headTemplate+"<tbody></tbody>"+h.footTemplate+"</table>"+"</div>"+'<div class="datepicker-months">'+'<table class="table-condensed">'+h.headTemplate+h.contTemplate+h.footTemplate+"</table>"+"</div>"+'<div class="datepicker-years">'+'<table class="table-condensed">'+h.headTemplate+h.contTemplate+h.footTemplate+"</table>"+"</div>"+"</div>",e.fn.datepicker.DPGlobal=h,e.fn.datepicker.noConflict=function(){return e.fn.datepicker=a,this},e(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-provide="datepicker"]',function(t){var n=e(this);if(n.data("datepicker"))return;t.preventDefault(),n.datepicker("show")}),e(function(){e('[data-provide="datepicker-inline"]').datepicker()})})(window.jQuery)}.apply(e,arguments)})}(this),define("common/Class",[],function(){var e=!1,t=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;return this.Class=function(){},Class.extend=function(n){function o(t){for(var n in t)this[n]=t[n];!e&&this.initialize&&this.initialize.apply(this,arguments)}var r=this.prototype;e=!0;var i=new this;e=!1;for(var s in n)i[s]=typeof n[s]=="function"&&typeof r[s]=="function"&&t.test(n[s])?function(e,t){return function(){var n=this._super;this._super=r[e];var i=t.apply(this,arguments);return this._super=n,i}}(s,n[s]):n[s];return o.prototype=i,o.prototype.constructor=o,o.extend=arguments.callee,o},Class}),function(e){define("jquery-duedilFollow",["jquery"],function(){return function(){(function(e){e.fn.duedilFollow=function(t){this.api={lists:{get:"/follows/get/list",add:"/follows/add/list"},follows:{follow:"/follows/follow",unfollow:"/follows/unfollow",add:"/follows/add",remove:"/follows/remove"}},this.options=t,this.lists=[],this.newList=e("#follows-new-list-name"),this._init=function(t){var n=e(this);n.on({submit:function(r){var i=n.find("input[type=submit]"),s=i.hasClass("follow")?"follow":"unfollow",o=t.api.follows[s]+"/"+t.options.entity+"/"+t.options.id;r.preventDefault(),e.ajax({url:o,type:"post",data:{follows_key:n.find("input[name=follows_key]").val(),ajax:1},success:function(e){e&&e.success&&t._switch_state(i,t)}}),!t.lists||s=="unfollow"&&t._remove_from_lists(t)},keypress:function(e){if(e.keyCode==13)return!1;t.newList.focus()}}),n.on("click",".dropdown-menu",function(e){e.stopPropagation()}),n.on({click:function(e){t.newList.focus(),e.stopPropagation(),e.preventDefault(),n.trigger("submit",this)},mouseenter:function(e){var t=n.find("input[name=submit]"),r=t.siblings("button.dropdown-toggle");t.hasClass("unfollow")&&(t.val("Unfollow"),r.empty().html("&times;"))},mouseleave:function(e){var t=n.find("input[name=submit]"),r=t.siblings("button.dropdown-toggle");t.hasClass("unfollow")&&(t.val("Following"),r.empty().html('<span class="arrow"></span>'))}},".follow, .unfollow"),n.on({click:function(r){r.stopPropagation(),r.preventDefault(),t.newList.focus();var i=n.find("input[name=submit]"),s=e(i).siblings("div.dropdown-menu");if(i.hasClass("follow")){n.trigger("submit",this);return}n.find("div.button-group").toggleClass("open"),t.newList.focus()}},"button.dropdown-toggle"),n.on({click:function(r){var i=e(this),s=i.attr("id"),o=e(i).hasClass("selected")?"remove":"add",u=t.api.follows[o]+"/"+t.options.entity+"/"+t.options.id+"/"+s;r.preventDefault(),e.ajax({url:u,type:"post",data:{follows_key:n.find("input[name=follows_key]").val(),ajax:1},success:function(e){e&&e.success&&(o=="add"?t._add_to_list(t,s):t._remove_from_list(t,s))}})}},"ul.groups li"),n.on({click:function(r){var i=n.find(".new-group .button"),s=n.find(".new-group-name"),o=n.find(".help-block");r.preventDefault(),s.val().length>=1&&s.val().length<=30?(s.removeClass("error"),s.focus(),o.hide(),e.ajax({url:t.api.lists.add,type:"post",data:{follows_key:n.find("input[name=follows_key]").val(),ajax:1,name:s.val()},success:function(r){if(r&&r.success){t.lists||(t.lists=[]);var i=r.list.id;e.ajax({url:t.api.follows.add+"/"+t.options.entity+"/"+t.options.id+"/"+i,type:"post",data:{follows_key:n.find("input[name=follows_key]").val(),ajax:1},success:function(e){e&&e.success&&t._add_to_list(t,i)}}),t.lists.push(r.list),t._update_lists(t),s.val("")}else o.text(r.message).show()}})):s.addClass("error")}},".new-group .button"),n.on({keyup:function(t){t.preventDefault(),t.stopPropagation(),t.keyCode==13&&e(".new-group .button").click()}},"#follows-new-list-name")},this._switch_state=function(t,n){var r=e(t),i=r.siblings("button.dropdown-toggle"),s=r.parent(".button-group");r.hasClass("follow")?(r.removeClass("follow").addClass("unfollow"),r.val("Following"),i.removeClass("primary-cta").addClass("muted"),r.removeClass("primary-cta").addClass("muted"),s.addClass("open"),n.newList.focus()):(r.addClass("follow").removeClass("unfollow"),r.val("Follow"),i.removeClass("muted").addClass("primary-cta").empty().html('<span class="arrow"></span>'),r.removeClass("muted").addClass("primary-cta"),s.removeClass("open"))},this._load_lists=function(t){var n=e(".dropdown-menu .groups",this);e.get(t.api.lists.get,function(e){t.lists=e.lists.reverse(),t._update_lists(t)})},this._update_lists=function(t){var n=t.find("ul.groups");n.empty(),e.each(t.lists,function(r,i){var s=e('<li><a class="name" href="#"></a></li>');s.attr("id",i.id),s.find(".name").text(i.name);var o=i.follows[t.options.entity];!!o&&e.inArray(t.options.id,o)!==-1&&s.addClass("selected"),n.prepend(s)})},this._remove_from_lists=function(t){e.each(t.lists,function(n,r){var i=r.follows[t.options.entity];i||(i=[]);var s=e.inArray(t.options.id,i);s!==-1&&(i.splice(s,1),r.follows[t.options.entity]=i,r.total_follows--)}),t._update_lists(t)},this._add_to_list=function(t,n){e.each(t.lists,function(r,i){if(i.id==n){var s=i.follows[t.options.entity];s||(s=[]);if(e.inArray(t.options.id,s)!==-1)return;s.push(t.options.id),i.follows[t.options.entity]=s,i.total_follows=(i.total_follows||0)+1}}),t._update_lists(t)},this._remove_from_list=function(t,n){e.each(t.lists,function(r,i){if(i.id==n){var s=i.follows[t.options.entity];s||(s=[]);var o=e.inArray(t.options.id,s);o!==-1&&(s.splice(o,1),i.follows[t.options.entity]=s,i.total_follows--)}}),t._update_lists(t)};var n=this;return this.each(function(){n._init.apply(this,[n]),n._load_lists.apply(this,[n])})}})(jQuery)}.apply(e,arguments)})}(this),function(e,t,n){function f(e){var t={},r=/^jQuery\d+$/;return n.each(e.attributes,function(e,n){n.specified&&!r.test(n.name)&&(t[n.name]=n.value)}),t}function l(e,t){var r=this,i=n(r);if(r.value==i.attr("placeholder")&&i.hasClass("placeholder"))if(i.data("placeholder-password")){i=i.hide().next().show().attr("id",i.removeAttr("id").data("placeholder-id"));if(e===!0)return i[0].value=t;i.focus()}else r.value="",i.removeClass("placeholder")}function c(){var e,t=this,r=n(t),i=r,s=this.id;if(t.value==""){if(t.type=="password"){if(!r.data("placeholder-textinput")){try{e=r.clone().attr({type:"text"})}catch(o){e=n("<input>").attr(n.extend(f(this),{type:"text"}))}e.removeAttr("name").data({"placeholder-password":!0,"placeholder-id":s}).bind("focus.placeholder",l),r.data({"placeholder-textinput":e,"placeholder-id":s}).before(e)}r=r.removeAttr("id").hide().prev().attr("id",s).show()}r.addClass("placeholder"),r[0].value=r.attr("placeholder")}else r.removeClass("placeholder")}var r="placeholder"in t.createElement("input"),i="placeholder"in t.createElement("textarea"),s=n.fn,o=n.valHooks,u,a;r&&i?(a=s.placeholder=function(){return this},a.input=a.textarea=!0):(a=s.placeholder=function(){return this.filter((r?"textarea":":input")+"[placeholder]").not(".placeholder").bind({"focus.placeholder":l,"blur.placeholder":c}).data("placeholder-enabled",!0).trigger("blur.placeholder").end()},a.input=r,a.textarea=i,u={get:function(e){var t=n(e);return t.data("placeholder-enabled")&&t.hasClass("placeholder")?"":e.value},set:function(e,t){var r=n(e);return r.data("placeholder-enabled")?(t==""?(e.value=t,c.call(e)):r.hasClass("placeholder")?l.call(e,!0,t)||(e.value=t):e.value=t,r):e.value=t}},r||(o.input=u),i||(o.textarea=u),n(function(){n(t).delegate("form","submit.placeholder",function(){var e=n(".placeholder",this).each(l);setTimeout(function(){e.each(c)},10)})}),n(e).bind("beforeunload.placeholder",function(){n(".placeholder").each(function(){this.value=""})}))}(this,document,jQuery),define("third-party/jquery.placeholder",function(){}),function(e,t){typeof define=="function"&&define.amd?define("es5-shim",t):typeof exports=="object"?module.exports=t():e.returnExports=t()}(this,function(){function f(){}function R(e){return e=+e,e!==e?e=0:e!==0&&e!==1/0&&e!==-1/0&&(e=(e>0||-1)*Math.floor(Math.abs(e))),e}function U(e){var t=typeof e;return e===null||t==="undefined"||t==="boolean"||t==="number"||t==="string"}function z(e){var t,n,r;if(U(e))return e;n=e.valueOf;if(u(n)){t=n.call(e);if(U(t))return t}r=e.toString;if(u(r)){t=r.call(e);if(U(t))return t}throw new TypeError}var e=Function.prototype.call,t=Array.prototype,n=Object.prototype,r=t.slice,i=Array.prototype.splice,s=Array.prototype.push,o=Array.prototype.unshift,u=function(e){return n.toString.call(e)==="[object Function]"},a=function(e){return n.toString.call(e)==="[object RegExp]"};Function.prototype.bind||(Function.prototype.bind=function(t){var n=this;if(!u(n))throw new TypeError("Function.prototype.bind called on incompatible "+n);var i=r.call(arguments,1),s=function(){if(this instanceof c){var e=n.apply(this,i.concat(r.call(arguments)));return Object(e)===e?e:this}return n.apply(t,i.concat(r.call(arguments)))},o=Math.max(0,n.length-i.length),a=[];for(var l=0;l<o;l++)a.push("$"+l);var c=Function("binder","return function("+a.join(",")+"){return binder.apply(this,arguments)}")(s);return n.prototype&&(f.prototype=n.prototype,c.prototype=new f,f.prototype=null),c});var l=e.bind(n.hasOwnProperty),c=e.bind(n.toString),h,p,d,v,m;if(m=l(n,"__defineGetter__"))h=e.bind(n.__defineGetter__),p=e.bind(n.__defineSetter__),d=e.bind(n.__lookupGetter__),v=e.bind(n.__lookupSetter__);[1,2].splice(0).length!==2&&(!function(){function e(e){var t=[];while(e--)t.unshift(e);return t}var t=[],n;t.splice.bind(t,0,0).apply(null,e(20)),t.splice.bind(t,0,0).apply(null,e(26)),n=t.length,t.splice(5,0,"XXX");if(n+1===t.length)return!0}()?Array.prototype.splice=function(e,t){var n,u=r.call(arguments,2),a=u.length;if(!arguments.length)return[];e===void 0&&(e=0),t===void 0&&(t=this.length-e);if(a>0){if(t<=0){if(e===this.length)return s.apply(this,u),[];if(e===0)return o.apply(this,u),[]}return n=r.call(this,e,e+t),u.push.apply(u,r.call(this,e+t,this.length)),u.unshift.apply(u,r.call(this,0,e)),u.unshift(0,this.length),i.apply(this,u),n}return i.call(this,e,t)}:Array.prototype.splice=function(e,t){return arguments.length?i.apply(this,[e===void 0?0:e,t===void 0?this.length-e:t].concat(r.call(arguments,2))):[]}),[].unshift(0)!==1&&(Array.prototype.unshift=function(){return o.apply(this,arguments),this.length}),Array.isArray||(Array.isArray=function(t){return c(t)==="[object Array]"});var g=Object("a"),y=g[0]!=="a"||!(0 in g),b=function(t){var n=!0;return t&&t.call("foo",function(e,t,r){typeof r!="object"&&(n=!1)}),!!t&&n};if(!Array.prototype.forEach||!b(Array.prototype.forEach))Array.prototype.forEach=function(t){var n=W(this),r=y&&c(this)==="[object String]"?this.split(""):n,i=arguments[1],s=-1,o=r.length>>>0;if(!u(t))throw new TypeError;while(++s<o)s in r&&t.call(i,r[s],s,n)};if(!Array.prototype.map||!b(Array.prototype.map))Array.prototype.map=function(t){var n=W(this),r=y&&c(this)==="[object String]"?this.split(""):n,i=r.length>>>0,s=Array(i),o=arguments[1];if(!u(t))throw new TypeError(t+" is not a function");for(var a=0;a<i;a++)a in r&&(s[a]=t.call(o,r[a],a,n));return s};if(!Array.prototype.filter||!b(Array.prototype.filter))Array.prototype.filter=function(t){var n=W(this),r=y&&c(this)==="[object String]"?this.split(""):n,i=r.length>>>0,s=[],o,a=arguments[1];if(!u(t))throw new TypeError(t+" is not a function");for(var f=0;f<i;f++)f in r&&(o=r[f],t.call(a,o,f,n)&&s.push(o));return s};if(!Array.prototype.every||!b(Array.prototype.every))Array.prototype.every=function(t){var n=W(this),r=y&&c(this)==="[object String]"?this.split(""):n,i=r.length>>>0,s=arguments[1];if(!u(t))throw new TypeError(t+" is not a function");for(var o=0;o<i;o++)if(o in r&&!t.call(s,r[o],o,n))return!1;return!0};if(!Array.prototype.some||!b(Array.prototype.some))Array.prototype.some=function(t){var n=W(this),r=y&&c(this)==="[object String]"?this.split(""):n,i=r.length>>>0,s=arguments[1];if(!u(t))throw new TypeError(t+" is not a function");for(var o=0;o<i;o++)if(o in r&&t.call(s,r[o],o,n))return!0;return!1};var w=!1;Array.prototype.reduce&&(w=typeof Array.prototype.reduce.call("a",function(e,t,n,r){return r})=="object");if(!Array.prototype.reduce||!w)Array.prototype.reduce=function(t){var n=W(this),r=y&&c(this)==="[object String]"?this.split(""):n,i=r.length>>>0;if(!u(t))throw new TypeError(t+" is not a function");if(!i&&arguments.length===1)throw new TypeError("reduce of empty array with no initial value");var s=0,o;if(arguments.length>=2)o=arguments[1];else do{if(s in r){o=r[s++];break}if(++s>=i)throw new TypeError("reduce of empty array with no initial value")}while(!0);for(;s<i;s++)s in r&&(o=t.call(void 0,o,r[s],s,n));return o};Array.prototype.reduceRight||(Array.prototype.reduceRight=function(t){var n=W(this),r=y&&c(this)==="[object String]"?this.split(""):n,i=r.length>>>0;if(!u(t))throw new TypeError(t+" is not a function");if(!i&&arguments.length===1)throw new TypeError("reduceRight of empty array with no initial value");var s,o=i-1;if(arguments.length>=2)s=arguments[1];else do{if(o in r){s=r[o--];break}if(--o<0)throw new TypeError("reduceRight of empty array with no initial value")}while(!0);if(o<0)return s;do o in this&&(s=t.call(void 0,s,r[o],o,n));while(o--);return s});if(!Array.prototype.indexOf||[0,1].indexOf(1,2)!==-1)Array.prototype.indexOf=function(t){var n=y&&c(this)==="[object String]"?this.split(""):W(this),r=n.length>>>0;if(!r)return-1;var i=0;arguments.length>1&&(i=R(arguments[1])),i=i>=0?i:Math.max(0,r+i);for(;i<r;i++)if(i in n&&n[i]===t)return i;return-1};if(!Array.prototype.lastIndexOf||[0,1].lastIndexOf(0,-3)!==-1)Array.prototype.lastIndexOf=function(t){var n=y&&c(this)==="[object String]"?this.split(""):W(this),r=n.length>>>0;if(!r)return-1;var i=r-1;arguments.length>1&&(i=Math.min(i,R(arguments[1]))),i=i>=0?i:r-Math.abs(i);for(;i>=0;i--)if(i in n&&t===n[i])return i;return-1};if(!Object.keys){var E=!{toString:null}.propertyIsEnumerable("toString"),S=function(){}.propertyIsEnumerable("prototype"),x=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],T=x.length,N=function(t){var n=c(t),r=n==="[object Arguments]";return r||(r=!Array.isArray(n)&&t!==null&&typeof t=="object"&&typeof t.length=="number"&&t.length>=0&&u(t.callee)),r};Object.keys=function(t){var n=u(t),r=N(t),i=t!==null&&typeof t=="object",s=i&&c(t)==="[object String]";if(!i&&!n&&!r)throw new TypeError("Object.keys called on a non-object");var o=[],a=S&&n;if(s||r)for(var f=0;f<t.length;++f)o.push(String(f));else for(var h in t)(!a||h!=="prototype")&&l(t,h)&&o.push(String(h));if(E){var p=t.constructor,d=p&&p.prototype===t;for(var v=0;v<T;v++){var m=x[v];(!d||m!=="constructor")&&l(t,m)&&o.push(m)}}return o}}var C=-621987552e5,k="-000001";if(!Date.prototype.toISOString||(new Date(C)).toISOString().indexOf(k)===-1)Date.prototype.toISOString=function(){var t,n,r,i,s;if(!isFinite(this))throw new RangeError("Date.prototype.toISOString called on non-finite value.");i=this.getUTCFullYear(),s=this.getUTCMonth(),i+=Math.floor(s/12),s=(s%12+12)%12,t=[s+1,this.getUTCDate(),this.getUTCHours(),this.getUTCMinutes(),this.getUTCSeconds()],i=(i<0?"-":i>9999?"+":"")+("00000"+Math.abs(i)).slice(0<=i&&i<=9999?-4:-6),n=t.length;while(n--)r=t[n],r<10&&(t[n]="0"+r);return i+"-"+t.slice(0,2).join("-")+"T"+t.slice(2).join(":")+"."+("000"+this.getUTCMilliseconds()).slice(-3)+"Z"};var L=!1;try{L=Date.prototype.toJSON&&(new Date(NaN)).toJSON()===null&&(new Date(C)).toJSON().indexOf(k)!==-1&&Date.prototype.toJSON.call({toISOString:function(){return!0}})}catch(A){}L||(Date.prototype.toJSON=function(t){var n=Object(this),r=z(n),i;if(typeof r=="number"&&!isFinite(r))return null;i=n.toISOString;if(typeof i!="function")throw new TypeError("toISOString property is not callable");return i.call(n)});var O=Date.parse("+033658-09-27T01:46:40.000Z")===1e15,M=!isNaN(Date.parse("2012-04-04T24:00:00.500Z"))||!isNaN(Date.parse("2012-11-31T23:59:59.000Z")),_=isNaN(Date.parse("2000-01-01T00:00:00.000Z"));if(!Date.parse||_||M||!O)Date=function(e){function t(n,r,i,s,o,u,a){var f=arguments.length;if(this instanceof e){var l=f===1&&String(n)===n?new e(t.parse(n)):f>=7?new e(n,r,i,s,o,u,a):f>=6?new e(n,r,i,s,o,u):f>=5?new e(n,r,i,s,o):f>=4?new e(n,r,i,s):f>=3?new e(n,r,i):f>=2?new e(n,r):f>=1?new e(n):new e;return l.constructor=t,l}return e.apply(this,arguments)}function i(e,t){var n=t>1?1:0;return r[t]+Math.floor((e-1969+n)/4)-Math.floor((e-1901+n)/100)+Math.floor((e-1601+n)/400)+365*(e-1970)}function s(t){return Number(new e(1970,0,1,0,0,0,t))}var n=new RegExp("^(\\d{4}|[+-]\\d{6})(?:-(\\d{2})(?:-(\\d{2})(?:T(\\d{2}):(\\d{2})(?::(\\d{2})(?:(\\.\\d{1,}))?)?(Z|(?:([-+])(\\d{2}):(\\d{2})))?)?)?)?$"),r=[0,31,59,90,120,151,181,212,243,273,304,334,365];for(var o in e)t[o]=e[o];return t.now=e.now,t.UTC=e.UTC,t.prototype=e.prototype,t.prototype.constructor=t,t.parse=function(r){var o=n.exec(r);if(o){var u=Number(o[1]),a=Number(o[2]||1)-1,f=Number(o[3]||1)-1,l=Number(o[4]||0),c=Number(o[5]||0),h=Number(o[6]||0),p=Math.floor(Number(o[7]||0)*1e3),d=Boolean(o[4]&&!o[8]),v=o[9]==="-"?1:-1,m=Number(o[10]||0),g=Number(o[11]||0),y;if(l<(c>0||h>0||p>0?24:25)&&c<60&&h<60&&p<1e3&&a>-1&&a<12&&m<24&&g<60&&f>-1&&f<i(u,a+1)-i(u,a)){y=((i(u,a)+f)*24+l+m*v)*60,y=((y+c+g*v)*60+h)*1e3+p,d&&(y=s(y));if(-864e13<=y&&y<=864e13)return y}return NaN}return e.parse.apply(this,arguments)},t}(Date);Date.now||(Date.now=function(){return(new Date).getTime()}),(!Number.prototype.toFixed||8e-5.toFixed(3)!=="0.000"||.9.toFixed(0)==="0"||1.255.toFixed(2)!=="1.25"||0xde0b6b3a7640080.toFixed(0)!=="1000000000000000128")&&function(){function i(r,i){var s=-1;while(++s<t)i+=r*n[s],n[s]=i%e,i=Math.floor(i/e)}function s(r){var i=t,s=0;while(--i>=0)s+=n[i],n[i]=Math.floor(s/r),s=s%r*e}function o(){var e=t,r="";while(--e>=0)if(r!==""||e===0||n[e]!==0){var i=String(n[e]);r===""?r=i:r+="0000000".slice(0,7-i.length)+i}return r}function u(e,t,n){return t===0?n:t%2===1?u(e,t-1,n*e):u(e*e,t/2,n)}function a(e){var t=0;while(e>=4096)t+=12,e/=4096;while(e>=2)t+=1,e/=2;return t}var e,t,n,r;e=1e7,t=6,n=[0,0,0,0,0,0],Number.prototype.toFixed=function(t){var n,r,f,l,c,h,p,d;n=Number(t),n=n!==n?0:Math.floor(n);if(n<0||n>20)throw new RangeError("Number.toFixed called with invalid number of decimals");r=Number(this);if(r!==r)return"NaN";if(r<=-1e21||r>=1e21)return String(r);f="",r<0&&(f="-",r=-r),l="0";if(r>1e-21){c=a(r*u(2,69,1))-69,h=c<0?r*u(2,-c,1):r/u(2,c,1),h*=4503599627370496,c=52-c;if(c>0){i(0,h),p=n;while(p>=7)i(1e7,0),p-=7;i(u(10,p,1),0),p=c-1;while(p>=23)s(1<<23),p-=23;s(1<<p),i(1,1),s(2),l=o()}else i(0,h),i(1<<-c,0),l=o()+"0.00000000000000000000".slice(2,2+n)}return n>0?(d=l.length,d<=n?l=f+"0.0000000000000000000".slice(0,n-d+2)+l:l=f+l.slice(0,d-n)+"."+l.slice(d-n)):l=f+l,l}}();var D=String.prototype.split;"ab".split(/(?:ab)*/).length!==2||".".split(/(.?)(.?)/).length!==4||"tesst".split(/(s)*/)[1]==="t"||"".split(/.?/).length||".".split(/()()/).length>1?function(){var e=/()??/.exec("")[1]===void 0;String.prototype.split=function(t,n){var r=this;if(t===void 0&&n===0)return[];if(Object.prototype.toString.call(t)!=="[object RegExp]")return D.apply(this,arguments);var i=[],s=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.extended?"x":"")+(t.sticky?"y":""),o=0,u,a,f,l;t=new RegExp(t.source,s+"g"),r+="",e||(u=new RegExp("^"+t.source+"$(?!\\s)",s)),n=n===void 0?-1>>>0:n>>>0;while(a=t.exec(r)){f=a.index+a[0].length;if(f>o){i.push(r.slice(o,a.index)),!e&&a.length>1&&a[0].replace(u,function(){for(var e=1;e<arguments.length-2;e++)arguments[e]===void 0&&(a[e]=void 0)}),a.length>1&&a.index<r.length&&Array.prototype.push.apply(i,a.slice(1)),l=a[0].length,o=f;if(i.length>=n)break}t.lastIndex===a.index&&t.lastIndex++}return o===r.length?(l||!t.test(""))&&i.push(""):i.push(r.slice(o)),i.length>n?i.slice(0,n):i}}():"0".split(void 0,0).length&&(String.prototype.split=function(t,n){return t===void 0&&n===0?[]:D.apply(this,arguments)});var P=String.prototype.replace,H=function(){var e=[];return"x".replace(/x(.)?/g,function(t,n){e.push(n)}),e.length===1&&typeof e[0]=="undefined"}();H||(String.prototype.replace=function(t,n){var r=u(n),i=a(t)&&/\)[*?]/.test(t.source);if(!r||!i)return P.apply(this,arguments);var s=function(e){var r=arguments.length,i=t.lastIndex;t.lastIndex=0;var s=t.exec(e);return t.lastIndex=i,s.push(arguments[r-2],arguments[r-1]),n.apply(this,s)};return P.call(this,t,s)});if("".substr&&"0b".substr(-1)!=="b"){var B=String.prototype.substr;String.prototype.substr=function(t,n){return B.call(this,t<0?(t=this.length+t)<0?0:t:t,n)}}var j="	\n\f\r Â áá ââââââââââââ¯âã\u2028\u2029ï»¿",F="â";if(!String.prototype.trim||j.trim()||!F.trim()){j="["+j+"]";var I=new RegExp("^"+j+j+"*"),q=new RegExp(j+j+"*$");String.prototype.trim=function(){if(this===void 0||this===null)throw new TypeError("can't convert "+this+" to object");return String(this).replace(I,"").replace(q,"")}}if(parseInt(j+"08")!==8||parseInt(j+"0x16")!==22)parseInt=function(e){var t=/^0[xX]/;return function(r,i){return r=String(r).trim(),Number(i)||(i=t.test(r)?16:10),e(r,i)}}(parseInt);var W=function(e){if(e==null)throw new TypeError("can't convert "+e+" to object");return Object(e)}}),define("text",["module"],function(e){var t,n,r,i,s,o=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],u=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,a=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,f=typeof location!="undefined"&&location.href,l=f&&location.protocol&&location.protocol.replace(/\:/,""),c=f&&location.hostname,h=f&&(location.port||undefined),p={},d=e.config&&e.config()||{};t={version:"2.0.12",strip:function(e){if(e){e=e.replace(u,"");var t=e.match(a);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:d.createXhr||function(){var e,t,n;if(typeof XMLHttpRequest!="undefined")return new XMLHttpRequest;if(typeof ActiveXObject!="undefined")for(t=0;t<3;t+=1){n=o[t];try{e=new ActiveXObject(n)}catch(r){}if(e){o=[n];break}}return e},parseName:function(e){var t,n,r,i=!1,s=e.indexOf("."),o=e.indexOf("./")===0||e.indexOf("../")===0;return s!==-1&&(!o||s>1)?(t=e.substring(0,s),n=e.substring(s+1,e.length)):t=e,r=n||t,s=r.indexOf("!"),s!==-1&&(i=r.substring(s+1)==="strip",r=r.substring(0,s),n?n=r:t=r),{moduleName:t,ext:n,strip:i}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,n,r,i){var s,o,u,a=t.xdRegExp.exec(e);return a?(s=a[2],o=a[3],o=o.split(":"),u=o[1],o=o[0],(!s||s===n)&&(!o||o.toLowerCase()===r.toLowerCase())&&(!u&&!o||u===i)):!0},finishLoad:function(e,n,r,i){r=n?t.strip(r):r,d.isBuild&&(p[e]=r),i(r)},load:function(e,n,r,i){if(i&&i.isBuild&&!i.inlineText){r();return}d.isBuild=i&&i.isBuild;var s=t.parseName(e),o=s.moduleName+(s.ext?"."+s.ext:""),u=n.toUrl(o),a=d.useXhr||t.useXhr;if(u.indexOf("empty:")===0){r();return}!f||a(u,l,c,h)?t.get(u,function(n){t.finishLoad(e,s.strip,n,r)},function(e){r.error&&r.error(e)}):n([o],function(e){t.finishLoad(s.moduleName+"."+s.ext,s.strip,e,r)})},write:function(e,n,r,i){if(p.hasOwnProperty(n)){var s=t.jsEscape(p[n]);r.asModule(e+"!"+n,"define(function () { return '"+s+"';});\n")}},writeFile:function(e,n,r,i,s){var o=t.parseName(n),u=o.ext?"."+o.ext:"",a=o.moduleName+u,f=r.toUrl(o.moduleName+u)+".js";t.load(a,r,function(n){var r=function(e){return i(f,e)};r.asModule=function(e,t){return i.asModule(e,f,t)},t.write(e,a,r,s)},s)}};if(d.env==="node"||!d.env&&typeof process!="undefined"&&process.versions&&!!process.versions.node&&!process.versions["node-webkit"])n=require.nodeRequire("fs"),t.get=function(e,t,r){try{var i=n.readFileSync(e,"utf8");i.indexOf("ï»¿")===0&&(i=i.substring(1)),t(i)}catch(s){r&&r(s)}};else if(d.env==="xhr"||!d.env&&t.createXhr())t.get=function(e,n,r,i){var s=t.createXhr(),o;s.open("GET",e,!0);if(i)for(o in i)i.hasOwnProperty(o)&&s.setRequestHeader(o.toLowerCase(),i[o]);d.onXhr&&d.onXhr(s,e),s.onreadystatechange=function(t){var i,o;s.readyState===4&&(i=s.status||0,i>399&&i<600?(o=new Error(e+" HTTP status: "+i),o.xhr=s,r&&r(o)):n(s.responseText),d.onXhrComplete&&d.onXhrComplete(s,e))},s.send(null)};else if(d.env==="rhino"||!d.env&&typeof Packages!="undefined"&&typeof java!="undefined")t.get=function(e,t){var n,r,i="utf-8",s=new java.io.File(e),o=java.lang.System.getProperty("line.separator"),u=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(s),i)),a="";try{n=new java.lang.StringBuffer,r=u.readLine(),r&&r.length()&&r.charAt(0)===65279&&(r=r.substring(1)),r!==null&&n.append(r);while((r=u.readLine())!==null)n.append(o),n.append(r);a=String(n.toString())}finally{u.close()}t(a)};else if(d.env==="xpconnect"||!d.env&&typeof Components!="undefined"&&Components.classes&&Components.interfaces)r=Components.classes,i=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),s="@mozilla.org/windows-registry-key;1"in r,t.get=function(e,t){var n,o,u,a={};s&&(e=e.replace(/\//g,"\\")),u=new FileUtils.File(e);try{n=r["@mozilla.org/network/file-input-stream;1"].createInstance(i.nsIFileInputStream),n.init(u,1,0,!1),o=r["@mozilla.org/intl/converter-input-stream;1"].createInstance(i.nsIConverterInputStream),o.init(n,"utf-8",n.available(),i.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),o.readString(n.available(),a),o.close(),n.close(),t(a.value)}catch(f){throw new Error((u&&u.path||"")+": "+f)}};return t}),define("common",["jquery","Modernizr","common/Duedil","common/AttachReferenceView","common/AttachReferenceViewBinding","common/Emitter","common/EventBinding","common/Contacts","NProgress","common/Accordion","common/Duedil.AjaxUtils","common/Duedil.analytics","common/Duedil.collapseMessages","common/Duedil.Commerce","common/Duedil.companyAutocomplete","common/Duedil.dataTables","common/Duedil.Dealr","common/Duedil.events","common/Duedil.hashScroller","common/Duedil.Login","common/Duedil.Modals","common/Duedil.pjax","common/Duedil.profile","common/Duedil.ResponsiveTables","common/Duedil.sidebar","common/Duedil.SignupModal","common/Duedil.Topbar","common/Duedil.Tours","common/Duedil.user","common/Duedil.widgets","common/Duedil.widgets.company","common/Duedil.map","common/Duedil.chart","common/Duedil.groupgraph","bootstrap-dropdown","bootstrap-datepicker","jquery-select2","common/Class","jquery-duedilFollow","third-party/jquery.placeholder","es5-shim","text","third-party/domReady!"],function(e,t,n,r,i,s,o,u,a){return n.helpers.bindNoSelect(),n.helpers.bindTooltips(),n.helpers.tabNotifications.init(),n.companyAutocomplete(),n.collapseMessages(),n.Commerce.init(),u.attach(),a.configure({showSpinner:!1,trickleRate:.08,trickleSpeed:100,ease:"ease-out"}),e.fn.datepicker.defaults.format="dd MM yyyy",t.input.placeholder||function(){var t="input[placeholder], textarea[placeholder]";e(t).placeholder(),e("body").on("shown",function(n){var r=e(n.target);r.hasClass("modal")&&r.find(t).placeholder()})}(),n});