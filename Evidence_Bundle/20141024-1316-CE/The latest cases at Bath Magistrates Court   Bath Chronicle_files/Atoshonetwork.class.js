function Atoshonetwork(){}Atoshonetwork={$:null,oTranslation:null,sLanguage:null,oHistory:null,Phone:function(){},_guid:null,_arroGlobalObject:[],_arrsMainConfig:{},_oBasket:null,_onPageProducts:[],_arrsConfig:{basketEnabled:false,url:"//www.atoshonetwork.com",jQueryVersion:"1.10.2",contentType:"Editorial",customPlaceHolderLoaded:false,disableStoreFront:false,MixPanel:{token:"3af1c34bd901e156fcd31cf99d690d21",enabled:true},StatsEnabled:true,shopContainerSelector:null,shareLinksEnabled:true},_sCauseOfNoTag:null,_bCustomPlaceholderLoaded:false,customPlaceHoldersLoaded:function(){return Atoshonetwork._arrsConfig.customPlaceHolderLoaded},getObject:function(a){return Atoshonetwork._arroGlobalObject[a]},getConfig:function(a){if(!a){return Atoshonetwork._arrsConfig}return Atoshonetwork._arrsMainConfig[a]},onSourceLoaded:function(a){Atoshonetwork.Event.listen("atosho.config.onSourceLoaded",a)},onUrlLoaded:function(a){Atoshonetwork.Event.listen("atosho.config.onUrlLoaded",a)},onCustomPlaceholdersLoaded:function(a){Atoshonetwork.Event.listen("atosho.config.onCustomPlaceholdersLoaded",a)},onCurrencyLoaded:function(a){Atoshonetwork.Event.listen("atosho.config.onCurrencyLoaded",a)},onProductLoaded:function(a){Atoshonetwork.Event.listen("atosho.config.onProductLoaded",a)},onHubLoaded:function(a){Atoshonetwork.Event.listen("atosho.config.onHubLoaded",a)},onCollectionLoaded:function(a){Atoshonetwork.Event.listen("atosho.config.onCollectionLoaded",a)},onJqueryLoaded:function(a){Atoshonetwork.Event.listen("atosho.file.onJqueryLoaded",a)},onAllProductsLoaded:function(a){Atoshonetwork.Event.listen("atosho.config.onAllProductsLoaded",a)},onPageViewed:function(a){Atoshonetwork.Event.listen("atosho.stats.onPageViewed",a)},onImageLoaded:function(a){Atoshonetwork.$("img").on("load",a)},init:function(){var c=Atoshonetwork;c.initConfigPlaceHolder();var d=c.Common.getCookie("atoshonetwork_mp_token");if(d){c._arrsConfig.MixPanel.token=d}var a=c.Common.getCookie("atoshonetwork_context");if(a){c._arrsConfig.contentType=a}var b=c.Common.getCookie("atoshonetwork_guid");if(b==""||b.length>30){c._guid=Atoshonetwork.Common.generateGUID();c.Common.setCookie("atoshonetwork_guid",Atoshonetwork._guid)}else{c._guid=b}if(c._arrsConfig.disableStoreFront){return}c.startListeners();Atoshonetwork.Event.fire("atosholoaded");Atoshonetwork.Event.triggerNative(Atoshonetwork.$("atoshoevent")[0],"atosholoaded");c.loadSource(window.location.host)},checkUrlAuth:function(){var b=Atoshonetwork.$;var a=["ATOSHONOTAG","annonce"];b("meta").each(function(){if(Atoshonetwork._arrsMainConfig.Source.country.id==60&&b(this).attr("content")){for(var c=0;c<a.length;++c){if(b(this).attr("content").toLowerCase().indexOf(a[c])!=-1){Atoshonetwork._sCauseOfNoTag="keyword '"+a[c]+"'";return false}}}});if(b("meta[property='at:tag']").length&&b("meta[property='at:tag']").attr("content")=="false"){Atoshonetwork._sCauseOfNoTag="tag";return false}return true},checkUrlBlackList:function(){var d=Atoshonetwork.$;if(Atoshonetwork._arrsMainConfig.Source.blacklist){var e=Atoshonetwork._arrsMainConfig.Source.blacklist;var c=function(){Atoshonetwork._sCauseOfNoTag="Blacklisted";return false};for(var b=0;b<e.length;b++){var a=e[b];if(window.location.href.match(new RegExp(a.urlregex))){if(a.selector!=""){var f=d(a.selector);if(f.length&&a.word!=""){if(f.prop("tagName").toLowerCase()=="meta"&&f.attr("content").match(new RegExp(a.word,"i"))){return c()}else{if(f.text().match(new RegExp(a.word,"i"))){return c()}}}else{if(f.length){return c()}}}else{return c()}}}}return true},loadSource:function(c,b){var a=Atoshonetwork.$;Atoshonetwork.Getter.Source(c,function(g,k,f,j){switch(g){case"success":var h=Atoshonetwork.Common.getCookie("atoshonetwork_active");if(h){f.Source.active=h}Atoshonetwork._arrsMainConfig=f;if(f.Source.active&&parseInt(f.Source.active)!=1&&Atoshonetwork._arrsConfig.contentType=="Editorial"){Atoshonetwork.stats("impression",{url:window.location.href,a:0});return}Atoshonetwork._arrsConfig.MixPanel.enabled=!!f.Source.mixpanel;Atoshonetwork.Getter.Currency(f.Source.currency.id,function(n,l,m,o){if(n=="success"){Atoshonetwork._arrsMainConfig.Currency=m}});Atoshonetwork._arrsConfig.keyurl=Atoshonetwork.Common.getUrlKey(f.Source.param_whitelist);Atoshonetwork.initCustomPlaceHolders();var e=Atoshonetwork.hasDestinationShop();if(e){Atoshonetwork._arrsConfig.contentType=e}else{if(f.Source.customization.isMobileActive&&f.Source.customization.isMobileActive==1&&Atoshonetwork.Common.getBrowserInfo().isMobile){Atoshonetwork._arrsConfig.contentType="Mobile"}else{if(Atoshonetwork._arrsConfig.contentType!="Chrome"){Atoshonetwork._arrsConfig.contentType="Editorial"}}}if((Atoshonetwork.checkUrlBlackList()&&Atoshonetwork.checkUrlAuth())||Atoshonetwork._arrsConfig.contentType=="Chrome"){var d=function(){Atoshonetwork.loadContextCSS();Atoshonetwork.System.loadJavascriptArray(Atoshonetwork.System._arrsJavascriptFiles[Atoshonetwork._arrsConfig.contentType],function(){Atoshonetwork.$(document).ready(function(){Atoshonetwork[Atoshonetwork._arrsConfig.contentType].load()})})};if(Atoshonetwork._arrsConfig.contentType=="Editorial"){if(parseInt(Atoshonetwork.getConfig("Source").customization.globalBasketEnabled)!=0||Atoshonetwork.getConfig().basketEnabled){d()}else{if(!Atoshonetwork.hasSectionHub()){Atoshonetwork.Getter.Url(Atoshonetwork._arrsConfig.keyurl,function(l){if(l=="success"){d()}else{if(l=="error"){Atoshonetwork.Event.fireOnce("atosho.stats.onPageViewed",[0,[]])}}})}else{d()}}}else{d()}}break;case"error":Atoshonetwork.stats("error",{url:window.location.href,error:"INV_SOURCE",msg:"Source does not exist: "+window.location.host});break;default:break}if(g=="success"||g=="error"){Atoshonetwork.Event.fire("atosho.config.onSourceLoaded",[g])}b&&b(g)})},cssloaded:false,loadContextCSS:function(){if(!Atoshonetwork.cssloaded){Atoshonetwork.cssloaded=true;Atoshonetwork.System.loadCssFiles(Atoshonetwork.System._arrsCssFiles.Main);if(Atoshonetwork.System._arrsCssFiles[Atoshonetwork._arrsConfig.contentType]){Atoshonetwork.System.loadCssFiles(Atoshonetwork.System._arrsCssFiles[Atoshonetwork._arrsConfig.contentType])}if(Atoshonetwork._arrsMainConfig.Source.customization.css&&Atoshonetwork._arrsMainConfig.Source.customization.css.trim()!=""){var a=document.createElement("style");a.type="text/css";a.id="atoshoStyle";a.innerHTML=Atoshonetwork._arrsMainConfig.Source.customization.css;document.getElementsByTagName("head")[0].appendChild(a)}}},getZone:function(a){if(Atoshonetwork._arrsMainConfig.Source.zones[a]){return Atoshonetwork._arrsMainConfig.Source.zones[a]}else{return{id:0,name:a,type:a}}},hasSectionHub:function(){var b=Atoshonetwork.getConfig("Source").hubs;for(i=b.length-1;i>=0;i--){var a=b[i];if(window.location.href.match(new RegExp(a.regex))){return true}}return false},hasDestinationShop:function(){if(Atoshonetwork._arrsMainConfig.Source.destinationshops){var a=Atoshonetwork.Common.getBrowserInfo().isMobile;if(!window.location.origin){window.location.origin=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")}var b=window.location.origin+window.location.pathname;for(var c=0;c<Atoshonetwork._arrsMainConfig.Source.destinationshops.length;c++){var d=Atoshonetwork._arrsMainConfig.Source.destinationshops[c];if(b.match(new RegExp(d.url))){if(a&&d.ismobile){return"MobileDestinationShop"}else{if(!a&&!d.ismobile){return"DestinationShop"}}}}}return false},loadLanguage:function(a){if(Atoshonetwork.sLanguage!=null){a&&a(Atoshonetwork.sLanguage);return Atoshonetwork.sLanguage}else{var b="";switch(Atoshonetwork._arrsMainConfig.Source.country.iso2){case"DK":b="da";break;case"FR":b="fr";break;case"NO":b="no";break;case"TR":b="tr";break;default:b="en";break}Atoshonetwork.sLanguage=b;a&&a(b);return Atoshonetwork.sLanguage}},loadTranslation:function(a){if(Atoshonetwork.oTranslation!=null){a(Atoshonetwork.oTranslation)}else{Atoshonetwork.loadLanguage(function(c){var b=new Atoshonetwork.Translation();b.load(c,function(f,d,e){Atoshonetwork.oTranslation=b;a(b)})})}},initConfigPlaceHolder:function(){var b=Atoshonetwork.$;var a=b("<atoshonetwork type='config'></atoshonetwork>");b("body").append(a)},modifyConfigPlaceHolder:function(a,b){var c=Atoshonetwork.$;c("atoshonetwork[type=config]","body").attr(a,b)},initCustomPlaceHolders:function(){if(Atoshonetwork._bCustomPlaceholderLoaded){return}var f=Atoshonetwork.$;var h=[];if(typeof Atoshonetwork._arrsMainConfig.Source.placeHolders==="string"){var e=Atoshonetwork._arrsMainConfig.Source.placeHolders.split(";");if(e.length){for(var c=0;c<e.length;c++){if(e[c]!=""){var g=e[c].split("|");h[c]={};h[c].selector=g[0];h[c].method=g[1];h[c].position=g[2];if(g[3]){h[c].id=g[3]}}}}}else{h=Atoshonetwork._arrsMainConfig.Source.placeHolders}var b=f("<atosho></atosho>");var c=0;for(var a=0;a<h.length;a++){var d=h[a];if(!d.regex||d.regex.trim()==""){d.regex="[Ss]*"}if(window.location.href.match(new RegExp(d.regex))){f(d.selector).each(function(){var j=b.clone().attr("position",d.id?d.id:c);j.attr("css",d.css);switch(d.method){case"prepend":switch(d.position){case"inner":f(this).prepend(j);break;case"outer":f(j).insertBefore(f(this));break}break;case"append":switch(d.position){case"inner":f(this).append(j);break;case"outer":f(j).insertAfter(f(this));break}break}c++})}}Atoshonetwork._bCustomPlaceholderLoaded=true;Atoshonetwork.Event.fire("atosho.config.onCustomPlaceholdersLoaded",[h.length])},stats:function(b,a){if(!this._arrsConfig.StatsEnabled||Atoshonetwork._arrsConfig.contentType=="Chrome"){return}Atoshonetwork.Getter.Json().doAjax("GET","//stats.atosho.com/"+b,a,null,{},true)},recordPageView:function(){if(!Atoshonetwork.getConfig("Source").bypassImpressions){var a=Atoshonetwork.Common.base64_encode(window.location.href)}},loadAs:function(b,a){Atoshonetwork.System.loadJavascriptArray(Atoshonetwork.System._arrsJavascriptFiles[b],function(){if(Atoshonetwork[Atoshonetwork._arrsConfig.contentType]&&Atoshonetwork[Atoshonetwork._arrsConfig.contentType].unload){Atoshonetwork[Atoshonetwork._arrsConfig.contentType].unload()}Atoshonetwork._arrsConfig.contentType=b;Atoshonetwork[b].load();a&&a()})},reload:function(){Atoshonetwork[Atoshonetwork._arrsConfig.contentType].unload();Atoshonetwork._arrsEvents=[];Atoshonetwork.loadSource(window.location.host)},start:function(a){Atosho.extend(Atoshonetwork._arrsConfig,a);Atoshonetwork.System.loadJavascript("//ajax.googleapis.com/ajax/libs/jquery/"+Atoshonetwork._arrsConfig.jQueryVersion+"/jquery.min.js",Atoshonetwork.System.jQueryLoaded)},startListeners:function(){var a=false;Atoshonetwork.Event.listen("atosho.editorial.storefront.onClick",function(d,c,b){var e=[];e[0]=4;if(Atoshonetwork.Common.getCookie("atoshonetwork_url_clicked")==""){e[e.length]=1;Atoshonetwork.Common.setCookie("atoshonetwork_url_clicked",1,null,window.location.pathname)}if(!a){e[e.length]=2;a=true}Atoshonetwork.stats("click",{url:window.location.href,z:b.id,p:c,type:e.join(",")})});Atoshonetwork.onPageViewed(function(d,c,b){if(c){Atoshonetwork.stats("impression",{url:window.location.href,a:1,z:b.join(",")});Atoshonetwork.recordPageView()}else{Atoshonetwork.stats("impression",{url:window.location.href,a:0})}});Atoshonetwork.onCurrencyLoaded(function(c,b){if(b=="success"){var d=Atoshonetwork.Common.getParameterByName("atosho_p");if(d){Atoshonetwork.ProductPage.renderTo(d)}}});Atoshonetwork.onCustomPlaceholdersLoaded(function(){Atoshonetwork._arrsConfig.customPlaceHolderLoaded=true;Atoshonetwork.modifyConfigPlaceHolder("customLoaded",Atoshonetwork._arrsConfig.customPlaceHolderLoaded.toString())});if(window.addEventListener&&!Atoshonetwork.Chrome){window.addEventListener("message",function(b){if(!Atoshonetwork.Chrome){var c=b.data;try{c=JSON.parse(b.data)}catch(d){}if(c.type){switch(c.type){case"ATOSHO_PIT_MAIN_BUTTON_CLICKED":Atoshonetwork.loadAs("Chrome");break}}}})}}};Atoshonetwork.System={_arrsJavascriptFiles:{Main:["Main.class.js"],Editorial:["Editorial.class.js"],Chrome:["Chrome.class.js"],DestinationShop:["Destination.class.js"],Mobile:["Mobile.class.js"],MobileDestinationShop:["MobileDestinationShop.class.js"]},_arrsCssFiles:{Main:["global.css"],MobileDestinationShop:["MobileDestinationShop.css"]},_arroLoadedJavascript:{},_sVersion:"10602",loadJavascriptArray:function(b,d){var c=b.slice(0);var a=Atoshonetwork.System;if(typeof b==="string"){a.loadJavascript(Atoshonetwork._arrsConfig.globalPath+c,d)}else{if(c.constructor===Array){if(c.length){a.loadJavascript(Atoshonetwork._arrsConfig.globalPath+c.shift(),function(){a.loadJavascriptArray(c,d)})}else{d&&d()}}}},loadJavascript:function(h,g){var f=Atoshonetwork.System;var d=function(){f._arroLoadedJavascript[h]="loaded";g&&g()};if(f._arroLoadedJavascript[h]){if(f._arroLoadedJavascript[h]=="beforeLoad"){var c=self.setInterval(function(){if(f._arroLoadedJavascript[h]=="loaded"){clearInterval(c);d()}},10)}else{d()}return}f._arroLoadedJavascript[h]="beforeLoad";var b=document.createElement("script"),a=document.getElementsByTagName("script"),e=a.length;b.setAttribute("type","text/javascript");b.setAttribute("charset","utf-8");b.setAttribute("async","true");b.setAttribute("data-cfasync","false");if(b.readyState){b.onreadystatechange=function(){if(b.readyState==="loaded"||b.readyState==="complete"){b.onreadystatechange=null;d()}}}else{b.onload=function(){d()}}b.setAttribute("src",h+"?_="+f._sVersion);document.getElementsByTagName("head")[0].appendChild(b)},loadCssFiles:function(c){var b=Atoshonetwork.System;var d=Atoshonetwork.$;for(var a=0;a<c.length;a++){Atoshonetwork.System.loadCssFile(Atoshonetwork._arrsConfig.globalPath+c[a])}},loadCssFile:function(a){var b=Atoshonetwork.System;var c=Atoshonetwork.$;if(document.createStyleSheet){document.createStyleSheet(a)}else{c("head").append(c("<link rel='stylesheet' href='"+a+"?_="+b._sVersion+"' type='text/css' media='screen' />"))}},jQueryLoaded:function(){Atoshonetwork.$=jQuery.noConflict(true);Atoshonetwork.System.loadJavascriptArray(Atoshonetwork.System._arrsJavascriptFiles.Main,Atoshonetwork.init)},getScriptPath:function(a){var b=Atoshonetwork.$('script[src*="'+a+'"]').attr("src");return b.substr(0,b.lastIndexOf("/")+1)}};