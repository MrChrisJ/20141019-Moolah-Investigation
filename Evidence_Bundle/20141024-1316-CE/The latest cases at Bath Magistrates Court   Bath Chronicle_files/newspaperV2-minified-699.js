window.Modernizr=function(AP,AO,AN){function O(){}function Q(B,A){var D=B.charAt(0).toUpperCase()+B.substr(1),C=(B+" "+Z.join(D+" ")+D).split(" ");return !!S(C,A)}function S(B,A){for(var C in B){if(AF[B[C]]!==AN&&(!A||A(B[C],AG))){return !0}}}function U(B,A){return(""+B).indexOf(A)!==-1}function W(B,A){return typeof B===A}function Y(B,A){return AA(AB.join(B+";")+(A||""))}function AA(A){AF.cssText=A}var AM="1.7",AL={},AK=!0,AJ=AO.documentElement,AI=AO.head||AO.getElementsByTagName("head")[0],AH="modernizr",AG=AO.createElement(AH),AF=AG.style,AE=AO.createElement("input"),AD=":)",AC=Object.prototype.toString,AB=" -webkit- -moz- -o- -ms- -khtml- ".split(" "),Z="Webkit Moz O ms Khtml".split(" "),X={svg:"http://www.w3.org/2000/svg"},V={},T={},R={},P=[],N,M=function(A){var D=AO.createElement("style"),C=AO.createElement("div"),B;D.textContent=A+"{#modernizr{height:3px}}",AI.appendChild(D),C.id="modernizr",AJ.appendChild(C),B=C.offsetHeight===3,D.parentNode.removeChild(D),C.parentNode.removeChild(C);return !!B},K=function(){function B(E,D){D=D||AO.createElement(A[E]||"div");var C=(E="on"+E) in D;C||(D.setAttribute||(D=AO.createElement("div")),D.setAttribute&&D.removeAttribute&&(D.setAttribute(E,""),C=W(D[E],"function"),W(D[E],AN)||(D[E]=AN),D.removeAttribute(E))),D=null;return C}var A={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return B}(),J=({}).hasOwnProperty,I;W(J,AN)||W(J.call,AN)?I=function(B,A){return A in B&&W(B.constructor.prototype[A],AN)}:I=function(B,A){return J.call(B,A)},V.borderradius=function(){return Q("borderRadius","",function(A){return U(A,"orderRadius")})},V.boxshadow=function(){return Q("boxShadow")},V.textshadow=function(){return AO.createElement("div").style.textShadow===""},V.cssgradients=function(){var B="background-image:",A="gradient(linear,left top,right bottom,from(#9f9),to(white));",C="linear-gradient(left top,#9f9, white);";AA((B+AB.join(A+B)+AB.join(C+B)).slice(0,-B.length));return U(AF.backgroundImage,"gradient")};for(var L in V){I(V,L)&&(N=L.toLowerCase(),AL[N]=V[L](),P.push((AL[N]?"":"no-")+N))}AL.input||O(),AL.crosswindowmessaging=AL.postmessage,AL.historymanagement=AL.history,AL.addTest=function(B,A){B=B.toLowerCase();if(!AL[B]){A=!!A(),AJ.className+=" "+(A?"":"no-")+B,AL[B]=A;return AL}},AA(""),AG=AE=null,AK&&AP.attachEvent&&function(){var A=AO.createElement("div");A.innerHTML="<elem></elem>";return A.childNodes.length!==1}()&&function(x,w){function A(h,g){var l=-1,k=h.length,j,i=[];while(++l<k){j=h[l],(g=j.media||g)!="screen"&&i.push(A(j.imports,g),j.cssText)}return i.join("")}function B(d){var c=-1;while(++c<t){d.createElement(u[c])}}var v="abbr|article|aside|audio|canvas|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",u=v.split("|"),t=u.length,s=new RegExp("(^|\\s)("+v+")","gi"),r=new RegExp("<(/*)("+v+")","gi"),q=new RegExp("(^|[^\\n]*?\\s)("+v+")([^\\n]*)({[\\n\\w\\W]*?})","gi"),H=w.createDocumentFragment(),G=w.documentElement,F=G.firstChild,E=w.createElement("body"),D=w.createElement("style"),C;B(w),B(H),F.insertBefore(D,F.firstChild),D.media="print",x.attachEvent("onbeforeprint",function(){var b=-1,i=A(w.styleSheets,"all"),d=[],h;C=C||w.body;while((h=q.exec(i))!=null){d.push((h[1]+h[2]+h[3]).replace(s,"$1.iepp_$2")+h[4])}D.styleSheet.cssText=d.join("\n");while(++b<t){var g=w.getElementsByTagName(u[b]),f=g.length,e=-1;while(++e<f){g[e].className.indexOf("iepp_")<0&&(g[e].className+=" iepp_"+u[b])}}H.appendChild(C),G.appendChild(E),E.className=C.className,E.innerHTML=C.innerHTML.replace(r,"<$1font")}),x.attachEvent("onafterprint",function(){E.innerHTML="",G.removeChild(E),G.appendChild(C),D.styleSheet.cssText=""})}(AP,AO),AL._enableHTML5=AK,AL._version=AM,AJ.className=AJ.className.replace(/\bno-js\b/,"")+" js "+P.join(" ");return AL}(this,this.document),function(AP,AO,AN){function AF(A){return !A||A=="loaded"||A=="complete"}function AG(){var B=1,A=-1;while(AA.length- ++A){if(AA[A].s&&!(B=AA[A].r)){break}}B&&AJ()}function AH(A){var C=AO.createElement("script"),B;C.src=A.s,C.onreadystatechange=C.onload=function(){!B&&AF(C.readyState)&&(B=1,AG(),C.onload=C.onreadystatechange=null)},AD(function(){B||(B=1,AG())},L.errorTimeout),A.e?C.onload():AC.parentNode.insertBefore(C,AC)}function AI(A){var D=AO.createElement("link"),C;D.href=A.s,D.rel="stylesheet",D.type="text/css",!A.e&&(M||W)?function B(E){AD(function(){if(!C){try{E.sheet.cssRules.length?(C=1,AG()):B(E)}catch(F){F.code==1000||F.message=="security"||F.message=="denied"?(C=1,AD(function(){AG()},0)):B(E)}}},0)}(D):(D.onload=function(){C||(C=1,AD(function(){AG()},0))},A.e&&D.onload()),AD(function(){C||(C=1,AG())},L.errorTimeout),!A.e&&AC.parentNode.insertBefore(D,AC)}function AJ(){var A=AA.shift();Y=1,A?A.t?AD(function(){A.t=="c"?AI(A):AH(A)},0):(A(),AG()):Y=0}function AK(g,b,H,G,F,E){function D(){!B&&AF(C.readyState)&&(A.r=B=1,!Y&&AG(),C.onload=C.onreadystatechange=null,AD(function(){Q.removeChild(C)},0))}var C=AO.createElement(g),B=0,A={t:H,s:b,e:E};C.src=C.data=b,!U&&(C.style.display="none"),C.width=C.height="0",g!="object"&&(C.type=H),C.onload=C.onreadystatechange=D,g=="img"?C.onerror=D:g=="script"&&(C.onerror=function(){A.e=A.r=1,AJ()}),AA.splice(G,0,A),Q.insertBefore(C,U?null:AC),AD(function(){B||(Q.removeChild(C),A.r=A.e=B=1,AG())},L.errorTimeout)}function AL(B,A,D){var C=A=="c"?I:J;Y=0,A=A||"j",V(B)?AK(C,B,A,this.i++,AE,D):(AA.splice(this.i++,0,B),AA.length==1&&AJ());return this}function AM(){var A=L;A.loader={load:AL,i:0};return A}var AE=AO.documentElement,AD=AP.setTimeout,AC=AO.getElementsByTagName("script")[0],AB=({}).toString,AA=[],Y=0,W="MozAppearance" in AE.style,U=W&&!!AO.createRange().compareNode,S=W&&!U,Q=U?AE:AC.parentNode,O=AP.opera&&AB.call(AP.opera)=="[object Opera]",M="webkitAppearance" in AE.style,K=M&&"async" in AO.createElement("script"),J=W?"object":O||K?"img":"script",I=M?"img":J,Z=Array.isArray||function(A){return AB.call(A)=="[object Array]"},X=function(A){return typeof A=="object"},V=function(A){return typeof A=="string"},T=function(A){return AB.call(A)=="[object Function]"},R=[],P={},N,L;L=function(B){function F(i){var H=i.split("!"),o=R.length,n=H.pop(),m=H.length,l={url:n,origUrl:n,prefixes:H},k,j;for(j=0;j<m;j++){k=P[H[j]],k&&(l=k(l))}for(j=0;j<o;j++){l=R[j](l)}return l}function G(c,H,m,l,k){var f=F(c),d=f.autoCallback;if(!f.bypass){H&&(H=T(H)?H:H[c]||H[l]||H[c.split("/").pop().split("?")[0]]);if(f.instead){return f.instead(c,H,m,l,k)}m.load(f.url,f.forceCSS||!f.forceJS&&/css$/.test(f.url)?"c":AN,f.noexec),(T(H)||T(d))&&m.load(function(){AM(),H&&H(f.origUrl,k,l),d&&d(f.origUrl,k,l)})}}function A(e,H){function o(b){if(V(b)){G(b,k,H,0,n)}else{if(X(b)){for(j in b){b.hasOwnProperty(j)&&G(b[j],k,H,j,n)}}}}var n=!!e.test,m=n?e.yep:e.nope,l=e.load||e.both,k=e.callback,j;o(m),o(l),e.complete&&H.load(e.complete)}var E,D,C=this.yepnope.loader;if(V(B)){G(B,0,C,0)}else{if(Z(B)){for(E=0;E<B.length;E++){D=B[E],V(D)?G(D,0,C,0):Z(D)?L(D):X(D)&&A(D,C)}}else{X(B)&&A(B,C)}}},L.addPrefix=function(B,A){P[B]=A},L.addFilter=function(A){R.push(A)},L.errorTimeout=10000,AO.readyState==null&&AO.addEventListener&&(AO.readyState="loading",AO.addEventListener("DOMContentLoaded",N=function(){AO.removeEventListener("DOMContentLoaded",N,0),AO.readyState="complete"},0)),AP.yepnope=AM()}(this,this.document),Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))};
/* jQuery UI - v1.9.2 - 2013-04-02
* http://jqueryui.com
* Includes: jquery.ui.core.js, jquery.ui.widget.js, jquery.ui.mouse.js, jquery.ui.position.js, jquery.ui.draggable.js, jquery.ui.resizable.js, jquery.ui.button.js, jquery.ui.datepicker.js, jquery.ui.dialog.js, jquery.ui.menu.js, jquery.ui.slider.js, jquery.ui.tabs.js, jquery.ui.tooltip.js
* Copyright 2013 jQuery Foundation and other contributors Licensed MIT */
(function(B,F){var A=0,E=/^ui-id-\d+$/;B.ui=B.ui||{};if(B.ui.version){return }B.extend(B.ui,{version:"1.9.2",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}});B.fn.extend({_focus:B.fn.focus,focus:function(G,H){return typeof G==="number"?this.each(function(){var I=this;setTimeout(function(){B(I).focus();if(H){H.call(I)}},G)}):this._focus.apply(this,arguments)},scrollParent:function(){var G;if((B.ui.ie&&(/(static|relative)/).test(this.css("position")))||(/absolute/).test(this.css("position"))){G=this.parents().filter(function(){return(/(relative|absolute|fixed)/).test(B.css(this,"position"))&&(/(auto|scroll)/).test(B.css(this,"overflow")+B.css(this,"overflow-y")+B.css(this,"overflow-x"))}).eq(0)}else{G=this.parents().filter(function(){return(/(auto|scroll)/).test(B.css(this,"overflow")+B.css(this,"overflow-y")+B.css(this,"overflow-x"))}).eq(0)}return(/fixed/).test(this.css("position"))||!G.length?B(document):G},zIndex:function(J){if(J!==F){return this.css("zIndex",J)}if(this.length){var H=B(this[0]),G,I;while(H.length&&H[0]!==document){G=H.css("position");if(G==="absolute"||G==="relative"||G==="fixed"){I=parseInt(H.css("zIndex"),10);if(!isNaN(I)&&I!==0){return I}}H=H.parent()}}return 0},uniqueId:function(){return this.each(function(){if(!this.id){this.id="ui-id-"+(++A)}})},removeUniqueId:function(){return this.each(function(){if(E.test(this.id)){B(this).removeAttr("id")}})}});function D(I,G){var K,J,H,L=I.nodeName.toLowerCase();if("area"===L){K=I.parentNode;J=K.name;if(!I.href||!J||K.nodeName.toLowerCase()!=="map"){return false}H=B("img[usemap=#"+J+"]")[0];return !!H&&C(H)}return(/input|select|textarea|button|object/.test(L)?!I.disabled:"a"===L?I.href||G:G)&&C(I)}function C(G){return B.expr.filters.visible(G)&&!B(G).parents().andSelf().filter(function(){return B.css(this,"visibility")==="hidden"}).length}B.extend(B.expr[":"],{data:B.expr.createPseudo?B.expr.createPseudo(function(G){return function(H){return !!B.data(H,G)}}):function(I,H,G){return !!B.data(I,G[3])},focusable:function(G){return D(G,!isNaN(B.attr(G,"tabindex")))},tabbable:function(I){var G=B.attr(I,"tabindex"),H=isNaN(G);return(H||G>=0)&&D(I,!H)}});B(function(){var G=document.body,H=G.appendChild(H=document.createElement("div"));H.offsetHeight;B.extend(H.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0});B.support.minHeight=H.offsetHeight===100;B.support.selectstart="onselectstart" in H;G.removeChild(H).style.display="none"});if(!B("<a>").outerWidth(1).jquery){B.each(["Width","Height"],function(I,G){var H=G==="Width"?["Left","Right"]:["Top","Bottom"],J=G.toLowerCase(),L={innerWidth:B.fn.innerWidth,innerHeight:B.fn.innerHeight,outerWidth:B.fn.outerWidth,outerHeight:B.fn.outerHeight};function K(O,N,M,P){B.each(H,function(){N-=parseFloat(B.css(O,"padding"+this))||0;if(M){N-=parseFloat(B.css(O,"border"+this+"Width"))||0}if(P){N-=parseFloat(B.css(O,"margin"+this))||0}});return N}B.fn["inner"+G]=function(M){if(M===F){return L["inner"+G].call(this)}return this.each(function(){B(this).css(J,K(this,M)+"px")})};B.fn["outer"+G]=function(M,N){if(typeof M!=="number"){return L["outer"+G].call(this,M)}return this.each(function(){B(this).css(J,K(this,M,true,N)+"px")})}})}if(B("<a>").data("a-b","a").removeData("a-b").data("a-b")){B.fn.removeData=(function(G){return function(H){if(arguments.length){return G.call(this,B.camelCase(H))}else{return G.call(this)}}})(B.fn.removeData)}(function(){var G=/msie ([\w.]+)/.exec(navigator.userAgent.toLowerCase())||[];B.ui.ie=G.length?true:false;B.ui.ie6=parseFloat(G[1],10)===6})();B.fn.extend({disableSelection:function(){return this.bind((B.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(G){G.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}});B.extend(B.ui,{plugin:{add:function(H,I,K){var G,J=B.ui[H].prototype;for(G in K){J.plugins[G]=J.plugins[G]||[];J.plugins[G].push([I,K[G]])}},call:function(G,I,H){var J,K=G.plugins[I];if(!K||!G.element[0].parentNode||G.element[0].parentNode.nodeType===11){return }for(J=0;J<K.length;J++){if(G.options[K[J][0]]){K[J][1].apply(G.element,H)}}}},contains:B.contains,hasScroll:function(J,H){if(B(J).css("overflow")==="hidden"){return false}var G=(H&&H==="left")?"scrollLeft":"scrollTop",I=false;if(J[G]>0){return true}J[G]=1;I=(J[G]>0);J[G]=0;return I},isOverAxis:function(H,G,I){return(H>G)&&(H<(G+I))},isOver:function(L,H,K,J,G,I){return B.ui.isOverAxis(L,K,G)&&B.ui.isOverAxis(H,J,I)}})})(jQuery);(function(B,E){var A=0,D=Array.prototype.slice,C=B.cleanData;B.cleanData=function(F){for(var G=0,H;(H=F[G])!=null;G++){try{B(H).triggerHandler("remove")}catch(I){}}C(F)};B.widget=function(G,J,F){var M,L,I,K,H=G.split(".")[0];G=G.split(".")[1];M=H+"-"+G;if(!F){F=J;J=B.Widget}B.expr[":"][M.toLowerCase()]=function(N){return !!B.data(N,M)};B[H]=B[H]||{};L=B[H][G];I=B[H][G]=function(N,O){if(!this._createWidget){return new I(N,O)}if(arguments.length){this._createWidget(N,O)}};B.extend(I,L,{version:F.version,_proto:B.extend({},F),_childConstructors:[]});K=new J();K.options=B.widget.extend({},K.options);B.each(F,function(O,N){if(B.isFunction(N)){F[O]=(function(){var P=function(){return J.prototype[O].apply(this,arguments)},Q=function(R){return J.prototype[O].apply(this,R)};return function(){var T=this._super,R=this._superApply,S;this._super=P;this._superApply=Q;S=N.apply(this,arguments);this._super=T;this._superApply=R;return S}})()}});I.prototype=B.widget.extend(K,{widgetEventPrefix:L?K.widgetEventPrefix:G},F,{constructor:I,namespace:H,widgetName:G,widgetBaseClass:M,widgetFullName:M});if(L){B.each(L._childConstructors,function(O,P){var N=P.prototype;B.widget(N.namespace+"."+N.widgetName,I,P._proto)});delete L._childConstructors}else{J._childConstructors.push(I)}B.widget.bridge(G,I)};B.widget.extend=function(K){var G=D.call(arguments,1),J=0,F=G.length,H,I;for(;J<F;J++){for(H in G[J]){I=G[J][H];if(G[J].hasOwnProperty(H)&&I!==E){if(B.isPlainObject(I)){K[H]=B.isPlainObject(K[H])?B.widget.extend({},K[H],I):B.widget.extend({},I)}else{K[H]=I}}}}return K};B.widget.bridge=function(G,F){var H=F.prototype.widgetFullName||G;B.fn[G]=function(K){var I=typeof K==="string",J=D.call(arguments,1),L=this;K=!I&&J.length?B.widget.extend.apply(null,[K].concat(J)):K;if(I){this.each(function(){var N,M=B.data(this,H);if(!M){return B.error("cannot call methods on "+G+" prior to initialization; attempted to call method '"+K+"'")}if(!B.isFunction(M[K])||K.charAt(0)==="_"){return B.error("no such method '"+K+"' for "+G+" widget instance")}N=M[K].apply(M,J);if(N!==M&&N!==E){L=N&&N.jquery?L.pushStack(N.get()):N;return false}})}else{this.each(function(){var M=B.data(this,H);if(M){M.option(K||{})._init()}else{B.data(this,H,new F(K,this))}})}return L}};B.Widget=function(){};B.Widget._childConstructors=[];B.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:false,create:null},_createWidget:function(F,G){G=B(G||this.defaultElement||this)[0];this.element=B(G);this.uuid=A++;this.eventNamespace="."+this.widgetName+this.uuid;this.options=B.widget.extend({},this.options,this._getCreateOptions(),F);this.bindings=B();this.hoverable=B();this.focusable=B();if(G!==this){B.data(G,this.widgetName,this);B.data(G,this.widgetFullName,this);this._on(true,this.element,{remove:function(H){if(H.target===G){this.destroy()}}});this.document=B(G.style?G.ownerDocument:G.document||G);this.window=B(this.document[0].defaultView||this.document[0].parentWindow)}this._create();this._trigger("create",null,this._getCreateEventData());this._init()},_getCreateOptions:B.noop,_getCreateEventData:B.noop,_create:B.noop,_init:B.noop,destroy:function(){this._destroy();this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(B.camelCase(this.widgetFullName));this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled");this.bindings.unbind(this.eventNamespace);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")},_destroy:B.noop,widget:function(){return this.element},option:function(I,J){var F=I,K,H,G;if(arguments.length===0){return B.widget.extend({},this.options)}if(typeof I==="string"){F={};K=I.split(".");I=K.shift();if(K.length){H=F[I]=B.widget.extend({},this.options[I]);for(G=0;G<K.length-1;G++){H[K[G]]=H[K[G]]||{};H=H[K[G]]}I=K.pop();if(J===E){return H[I]===E?null:H[I]}H[I]=J}else{if(J===E){return this.options[I]===E?null:this.options[I]}F[I]=J}}this._setOptions(F);return this},_setOptions:function(F){var G;for(G in F){this._setOption(G,F[G])}return this},_setOption:function(F,G){this.options[F]=G;if(F==="disabled"){this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!G).attr("aria-disabled",G);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")}return this},enable:function(){return this._setOption("disabled",false)},disable:function(){return this._setOption("disabled",true)},_on:function(I,H,G){var J,F=this;if(typeof I!=="boolean"){G=H;H=I;I=false}if(!G){G=H;H=this.element;J=this.widget()}else{H=J=B(H);this.bindings=this.bindings.add(H)}B.each(G,function(P,O){function M(){if(!I&&(F.options.disabled===true||B(this).hasClass("ui-state-disabled"))){return }return(typeof O==="string"?F[O]:O).apply(F,arguments)}if(typeof O!=="string"){M.guid=O.guid=O.guid||M.guid||B.guid++}var N=P.match(/^(\w+)\s*(.*)$/),L=N[1]+F.eventNamespace,K=N[2];if(K){J.delegate(K,L,M)}else{H.bind(L,M)}})},_off:function(G,F){F=(F||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;G.unbind(F).undelegate(F)},_delay:function(I,H){function G(){return(typeof I==="string"?F[I]:I).apply(F,arguments)}var F=this;return setTimeout(G,H||0)},_hoverable:function(F){this.hoverable=this.hoverable.add(F);this._on(F,{mouseenter:function(G){B(G.currentTarget).addClass("ui-state-hover")},mouseleave:function(G){B(G.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(F){this.focusable=this.focusable.add(F);this._on(F,{focusin:function(G){B(G.currentTarget).addClass("ui-state-focus")},focusout:function(G){B(G.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(F,G,H){var K,J,I=this.options[F];H=H||{};G=B.Event(G);G.type=(F===this.widgetEventPrefix?F:this.widgetEventPrefix+F).toLowerCase();G.target=this.element[0];J=G.originalEvent;if(J){for(K in J){if(!(K in G)){G[K]=J[K]}}}this.element.trigger(G,H);return !(B.isFunction(I)&&I.apply(this.element[0],[G].concat(H))===false||G.isDefaultPrevented())}};B.each({show:"fadeIn",hide:"fadeOut"},function(G,F){B.Widget.prototype["_"+G]=function(J,I,L){if(typeof I==="string"){I={effect:I}}var K,H=!I?G:I===true||typeof I==="number"?F:I.effect||F;I=I||{};if(typeof I==="number"){I={duration:I}}K=!B.isEmptyObject(I);I.complete=L;if(I.delay){J.delay(I.delay)}if(K&&B.effects&&(B.effects.effect[H]||B.uiBackCompat!==false&&B.effects[H])){J[G](I)}else{if(H!==G&&J[H]){J[H](I.duration,I.easing,L)}else{J.queue(function(M){B(this)[G]();if(L){L.call(J[0])}M()})}}}});if(B.uiBackCompat!==false){B.Widget.prototype._getCreateOptions=function(){return B.metadata&&B.metadata.get(this.element[0])[this.widgetName]}}})(jQuery);(function(B,C){var A=false;B(document).mouseup(function(D){A=false});B.widget("ui.mouse",{version:"1.9.2",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var D=this;this.element.bind("mousedown."+this.widgetName,function(E){return D._mouseDown(E)}).bind("click."+this.widgetName,function(E){if(true===B.data(E.target,D.widgetName+".preventClickEvent")){B.removeData(E.target,D.widgetName+".preventClickEvent");E.stopImmediatePropagation();return false}});this.started=false},_mouseDestroy:function(){this.element.unbind("."+this.widgetName);if(this._mouseMoveDelegate){B(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)}},_mouseDown:function(F){if(A){return }(this._mouseStarted&&this._mouseUp(F));this._mouseDownEvent=F;var E=this,G=(F.which===1),D=(typeof this.options.cancel==="string"&&F.target.nodeName?B(F.target).closest(this.options.cancel).length:false);if(!G||D||!this._mouseCapture(F)){return true}this.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet){this._mouseDelayTimer=setTimeout(function(){E.mouseDelayMet=true},this.options.delay)}if(this._mouseDistanceMet(F)&&this._mouseDelayMet(F)){this._mouseStarted=(this._mouseStart(F)!==false);if(!this._mouseStarted){F.preventDefault();return true}}if(true===B.data(F.target,this.widgetName+".preventClickEvent")){B.removeData(F.target,this.widgetName+".preventClickEvent")}this._mouseMoveDelegate=function(H){return E._mouseMove(H)};this._mouseUpDelegate=function(H){return E._mouseUp(H)};B(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);F.preventDefault();A=true;return true},_mouseMove:function(D){if(B.ui.ie&&!(document.documentMode>=9)&&!D.button){return this._mouseUp(D)}if(this._mouseStarted){this._mouseDrag(D);return D.preventDefault()}if(this._mouseDistanceMet(D)&&this._mouseDelayMet(D)){this._mouseStarted=(this._mouseStart(this._mouseDownEvent,D)!==false);(this._mouseStarted?this._mouseDrag(D):this._mouseUp(D))}return !this._mouseStarted},_mouseUp:function(D){B(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted){this._mouseStarted=false;if(D.target===this._mouseDownEvent.target){B.data(D.target,this.widgetName+".preventClickEvent",true)}this._mouseStop(D)}return false},_mouseDistanceMet:function(D){return(Math.max(Math.abs(this._mouseDownEvent.pageX-D.pageX),Math.abs(this._mouseDownEvent.pageY-D.pageY))>=this.options.distance)},_mouseDelayMet:function(D){return this.mouseDelayMet},_mouseStart:function(D){},_mouseDrag:function(D){},_mouseStop:function(D){},_mouseCapture:function(D){return true}})})(jQuery);(function(E,C){E.ui=E.ui||{};var I,J=Math.max,N=Math.abs,L=Math.round,D=/left|center|right/,G=/top|center|bottom/,A=/[\+\-]\d+%?/,K=/^\w+/,B=/%$/,F=E.fn.position;function M(Q,P,O){return[parseInt(Q[0],10)*(B.test(Q[0])?P/100:1),parseInt(Q[1],10)*(B.test(Q[1])?O/100:1)]}function H(O,P){return parseInt(E.css(O,P),10)||0}E.position={scrollbarWidth:function(){if(I!==C){return I}var P,O,R=E("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),Q=R.children()[0];E("body").append(R);P=Q.offsetWidth;R.css("overflow","scroll");O=Q.offsetWidth;if(P===O){O=R[0].clientWidth}R.remove();return(I=P-O)},getScrollInfo:function(S){var R=S.isWindow?"":S.element.css("overflow-x"),Q=S.isWindow?"":S.element.css("overflow-y"),P=R==="scroll"||(R==="auto"&&S.width<S.element[0].scrollWidth),O=Q==="scroll"||(Q==="auto"&&S.height<S.element[0].scrollHeight);return{width:P?E.position.scrollbarWidth():0,height:O?E.position.scrollbarWidth():0}},getWithinInfo:function(P){var Q=E(P||window),O=E.isWindow(Q[0]);return{element:Q,isWindow:O,offset:Q.offset()||{left:0,top:0},scrollLeft:Q.scrollLeft(),scrollTop:Q.scrollTop(),width:O?Q.width():Q.outerWidth(),height:O?Q.height():Q.outerHeight()}}};E.fn.position=function(Y){if(!Y||!Y.of){return F.apply(this,arguments)}Y=E.extend({},Y);var Z,V,S,X,R,U=E(Y.of),Q=E.position.getWithinInfo(Y.within),O=E.position.getScrollInfo(Q),T=U[0],W=(Y.collision||"flip").split(" "),P={};if(T.nodeType===9){V=U.width();S=U.height();X={top:0,left:0}}else{if(E.isWindow(T)){V=U.width();S=U.height();X={top:U.scrollTop(),left:U.scrollLeft()}}else{if(T.preventDefault){Y.at="left top";V=S=0;X={top:T.pageY,left:T.pageX}}else{V=U.outerWidth();S=U.outerHeight();X=U.offset()}}}R=E.extend({},X);E.each(["my","at"],function(){var c=(Y[this]||"").split(" "),b,a;if(c.length===1){c=D.test(c[0])?c.concat(["center"]):G.test(c[0])?["center"].concat(c):["center","center"]}c[0]=D.test(c[0])?c[0]:"center";c[1]=G.test(c[1])?c[1]:"center";b=A.exec(c[0]);a=A.exec(c[1]);P[this]=[b?b[0]:0,a?a[0]:0];Y[this]=[K.exec(c[0])[0],K.exec(c[1])[0]]});if(W.length===1){W[1]=W[0]}if(Y.at[0]==="right"){R.left+=V}else{if(Y.at[0]==="center"){R.left+=V/2}}if(Y.at[1]==="bottom"){R.top+=S}else{if(Y.at[1]==="center"){R.top+=S/2}}Z=M(P.at,V,S);R.left+=Z[0];R.top+=Z[1];return this.each(function(){var b,k,d=E(this),f=d.outerWidth(),c=d.outerHeight(),e=H(this,"marginLeft"),a=H(this,"marginTop"),j=f+e+H(this,"marginRight")+O.width,i=c+a+H(this,"marginBottom")+O.height,g=E.extend({},R),h=M(P.my,d.outerWidth(),d.outerHeight());if(Y.my[0]==="right"){g.left-=f}else{if(Y.my[0]==="center"){g.left-=f/2}}if(Y.my[1]==="bottom"){g.top-=c}else{if(Y.my[1]==="center"){g.top-=c/2}}g.left+=h[0];g.top+=h[1];if(!E.support.offsetFractions){g.left=L(g.left);g.top=L(g.top)}b={marginLeft:e,marginTop:a};E.each(["left","top"],function(m,l){if(E.ui.position[W[m]]){E.ui.position[W[m]][l](g,{targetWidth:V,targetHeight:S,elemWidth:f,elemHeight:c,collisionPosition:b,collisionWidth:j,collisionHeight:i,offset:[Z[0]+h[0],Z[1]+h[1]],my:Y.my,at:Y.at,within:Q,elem:d})}});if(E.fn.bgiframe){d.bgiframe()}if(Y.using){k=function(o){var q=X.left-g.left,n=q+V-f,p=X.top-g.top,m=p+S-c,l={target:{element:U,left:X.left,top:X.top,width:V,height:S},element:{element:d,left:g.left,top:g.top,width:f,height:c},horizontal:n<0?"left":q>0?"right":"center",vertical:m<0?"top":p>0?"bottom":"middle"};if(V<f&&N(q+n)<V){l.horizontal="center"}if(S<c&&N(p+m)<S){l.vertical="middle"}if(J(N(q),N(n))>J(N(p),N(m))){l.important="horizontal"}else{l.important="vertical"}Y.using.call(this,o,l)}}d.offset(E.extend(g,{using:k}))})};E.ui.position={fit:{left:function(S,R){var Q=R.within,U=Q.isWindow?Q.scrollLeft:Q.offset.left,W=Q.width,T=S.left-R.collisionPosition.marginLeft,V=U-T,P=T+R.collisionWidth-W-U,O;if(R.collisionWidth>W){if(V>0&&P<=0){O=S.left+V+R.collisionWidth-W-U;S.left+=V-O}else{if(P>0&&V<=0){S.left=U}else{if(V>P){S.left=U+W-R.collisionWidth}else{S.left=U}}}}else{if(V>0){S.left+=V}else{if(P>0){S.left-=P}else{S.left=J(S.left-T,S.left)}}}},top:function(R,Q){var P=Q.within,V=P.isWindow?P.scrollTop:P.offset.top,W=Q.within.height,T=R.top-Q.collisionPosition.marginTop,U=V-T,S=T+Q.collisionHeight-W-V,O;if(Q.collisionHeight>W){if(U>0&&S<=0){O=R.top+U+Q.collisionHeight-W-V;R.top+=U-O}else{if(S>0&&U<=0){R.top=V}else{if(U>S){R.top=V+W-Q.collisionHeight}else{R.top=V}}}}else{if(U>0){R.top+=U}else{if(S>0){R.top-=S}else{R.top=J(R.top-T,R.top)}}}}},flip:{left:function(U,T){var S=T.within,Y=S.offset.left+S.scrollLeft,b=S.width,Q=S.isWindow?S.scrollLeft:S.offset.left,V=U.left-T.collisionPosition.marginLeft,Z=V-Q,P=V+T.collisionWidth-b-Q,X=T.my[0]==="left"?-T.elemWidth:T.my[0]==="right"?T.elemWidth:0,a=T.at[0]==="left"?T.targetWidth:T.at[0]==="right"?-T.targetWidth:0,R=-2*T.offset[0],O,W;if(Z<0){O=U.left+X+a+R+T.collisionWidth-b-Y;if(O<0||O<N(Z)){U.left+=X+a+R}}else{if(P>0){W=U.left-T.collisionPosition.marginLeft+X+a+R-Q;if(W>0||N(W)<P){U.left+=X+a+R}}}},top:function(T,S){var R=S.within,a=R.offset.top+R.scrollTop,b=R.height,O=R.isWindow?R.scrollTop:R.offset.top,V=T.top-S.collisionPosition.marginTop,X=V-O,U=V+S.collisionHeight-b-O,Y=S.my[1]==="top",W=Y?-S.elemHeight:S.my[1]==="bottom"?S.elemHeight:0,c=S.at[1]==="top"?S.targetHeight:S.at[1]==="bottom"?-S.targetHeight:0,Q=-2*S.offset[1],Z,P;if(X<0){P=T.top+W+c+Q+S.collisionHeight-b-a;if((T.top+W+c+Q)>X&&(P<0||P<N(X))){T.top+=W+c+Q}}else{if(U>0){Z=T.top-S.collisionPosition.marginTop+W+c+Q-O;if((T.top+W+c+Q)>U&&(Z>0||N(Z)<U)){T.top+=W+c+Q}}}}},flipfit:{left:function(){E.ui.position.flip.left.apply(this,arguments);E.ui.position.fit.left.apply(this,arguments)},top:function(){E.ui.position.flip.top.apply(this,arguments);E.ui.position.fit.top.apply(this,arguments)}}};(function(){var S,U,P,R,Q,O=document.getElementsByTagName("body")[0],T=document.createElement("div");S=document.createElement(O?"div":"body");P={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"};if(O){E.extend(P,{position:"absolute",left:"-1000px",top:"-1000px"})}for(Q in P){S.style[Q]=P[Q]}S.appendChild(T);U=O||document.documentElement;U.insertBefore(S,U.firstChild);T.style.cssText="position: absolute; left: 10.7432222px;";R=E(T).offset().left;E.support.offsetFractions=R>10&&R<11;S.innerHTML="";U.removeChild(S)})();if(E.uiBackCompat!==false){(function(P){var O=P.fn.position;P.fn.position=function(R){if(!R||!R.offset){return O.call(this,R)}var S=R.offset.split(" "),Q=R.at.split(" ");if(S.length===1){S[1]=S[0]}if(/^\d/.test(S[0])){S[0]="+"+S[0]}if(/^\d/.test(S[1])){S[1]="+"+S[1]}if(Q.length===1){if(/left|center|right/.test(Q[0])){Q[1]="center"}else{Q[1]=Q[0];Q[0]="center"}}return O.call(this,P.extend(R,{at:Q[0]+S[0]+" "+Q[1]+S[1],offset:C}))}}(jQuery))}}(jQuery));(function(A,B){A.widget("ui.draggable",A.ui.mouse,{version:"1.9.2",widgetEventPrefix:"drag",options:{addClasses:true,appendTo:"parent",axis:false,connectToSortable:false,containment:false,cursor:"auto",cursorAt:false,grid:false,handle:false,helper:"original",iframeFix:false,opacity:false,refreshPositions:false,revert:false,revertDuration:500,scope:"default",scroll:true,scrollSensitivity:20,scrollSpeed:20,snap:false,snapMode:"both",snapTolerance:20,stack:false,zIndex:false},_create:function(){if(this.options.helper=="original"&&!(/^(?:r|a|f)/).test(this.element.css("position"))){this.element[0].style.position="relative"}(this.options.addClasses&&this.element.addClass("ui-draggable"));(this.options.disabled&&this.element.addClass("ui-draggable-disabled"));this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled");this._mouseDestroy()},_mouseCapture:function(C){var D=this.options;if(this.helper||D.disabled||A(C.target).is(".ui-resizable-handle")){return false}this.handle=this._getHandle(C);if(!this.handle){return false}A(D.iframeFix===true?"iframe":D.iframeFix).each(function(){A('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1000}).css(A(this).offset()).appendTo("body")});return true},_mouseStart:function(C){var D=this.options;this.helper=this._createHelper(C);this.helper.addClass("ui-draggable-dragging");this._cacheHelperProportions();if(A.ui.ddmanager){A.ui.ddmanager.current=this}this._cacheMargins();this.cssPosition=this.helper.css("position");this.scrollParent=this.helper.scrollParent();this.offset=this.positionAbs=this.element.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};A.extend(this.offset,{click:{left:C.pageX-this.offset.left,top:C.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.originalPosition=this.position=this._generatePosition(C);this.originalPageX=C.pageX;this.originalPageY=C.pageY;(D.cursorAt&&this._adjustOffsetFromHelper(D.cursorAt));if(D.containment){this._setContainment()}if(this._trigger("start",C)===false){this._clear();return false}this._cacheHelperProportions();if(A.ui.ddmanager&&!D.dropBehaviour){A.ui.ddmanager.prepareOffsets(this,C)}this._mouseDrag(C,true);if(A.ui.ddmanager){A.ui.ddmanager.dragStart(this,C)}return true},_mouseDrag:function(C,E){this.position=this._generatePosition(C);this.positionAbs=this._convertPositionTo("absolute");if(!E){var D=this._uiHash();if(this._trigger("drag",C,D)===false){this._mouseUp({});return false}this.position=D.position}if(!this.options.axis||this.options.axis!="y"){this.helper[0].style.left=this.position.left+"px"}if(!this.options.axis||this.options.axis!="x"){this.helper[0].style.top=this.position.top+"px"}if(A.ui.ddmanager){A.ui.ddmanager.drag(this,C)}return false},_mouseStop:function(E){var G=false;if(A.ui.ddmanager&&!this.options.dropBehaviour){G=A.ui.ddmanager.drop(this,E)}if(this.dropped){G=this.dropped;this.dropped=false}var C=this.element[0],F=false;while(C&&(C=C.parentNode)){if(C==document){F=true}}if(!F&&this.options.helper==="original"){return false}if((this.options.revert=="invalid"&&!G)||(this.options.revert=="valid"&&G)||this.options.revert===true||(A.isFunction(this.options.revert)&&this.options.revert.call(this.element,G))){var D=this;A(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){if(D._trigger("stop",E)!==false){D._clear()}})}else{if(this._trigger("stop",E)!==false){this._clear()}}return false},_mouseUp:function(C){A("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)});if(A.ui.ddmanager){A.ui.ddmanager.dragStop(this,C)}return A.ui.mouse.prototype._mouseUp.call(this,C)},cancel:function(){if(this.helper.is(".ui-draggable-dragging")){this._mouseUp({})}else{this._clear()}return this},_getHandle:function(C){var D=!this.options.handle||!A(this.options.handle,this.element).length?true:false;A(this.options.handle,this.element).find("*").andSelf().each(function(){if(this==C.target){D=true}});return D},_createHelper:function(D){var E=this.options;var C=A.isFunction(E.helper)?A(E.helper.apply(this.element[0],[D])):(E.helper=="clone"?this.element.clone().removeAttr("id"):this.element);if(!C.parents("body").length){C.appendTo((E.appendTo=="parent"?this.element[0].parentNode:E.appendTo))}if(C[0]!=this.element[0]&&!(/(fixed|absolute)/).test(C.css("position"))){C.css("position","absolute")}return C},_adjustOffsetFromHelper:function(C){if(typeof C=="string"){C=C.split(" ")}if(A.isArray(C)){C={left:+C[0],top:+C[1]||0}}if("left" in C){this.offset.click.left=C.left+this.margins.left}if("right" in C){this.offset.click.left=this.helperProportions.width-C.right+this.margins.left}if("top" in C){this.offset.click.top=C.top+this.margins.top}if("bottom" in C){this.offset.click.top=this.helperProportions.height-C.bottom+this.margins.top}},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var C=this.offsetParent.offset();if(this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&A.contains(this.scrollParent[0],this.offsetParent[0])){C.left+=this.scrollParent.scrollLeft();C.top+=this.scrollParent.scrollTop()}if((this.offsetParent[0]==document.body)||(this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&A.ui.ie)){C={top:0,left:0}}return{top:C.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:C.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var C=this.element.position();return{top:C.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:C.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}else{return{top:0,left:0}}},_cacheMargins:function(){this.margins={left:(parseInt(this.element.css("marginLeft"),10)||0),top:(parseInt(this.element.css("marginTop"),10)||0),right:(parseInt(this.element.css("marginRight"),10)||0),bottom:(parseInt(this.element.css("marginBottom"),10)||0)}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var F=this.options;if(F.containment=="parent"){F.containment=this.helper[0].parentNode}if(F.containment=="document"||F.containment=="window"){this.containment=[F.containment=="document"?0:A(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,F.containment=="document"?0:A(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,(F.containment=="document"?0:A(window).scrollLeft())+A(F.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(F.containment=="document"?0:A(window).scrollTop())+(A(F.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]}if(!(/^(document|window|parent)$/).test(F.containment)&&F.containment.constructor!=Array){var G=A(F.containment);var D=G[0];if(!D){return }var E=G.offset();var C=(A(D).css("overflow")!="hidden");this.containment=[(parseInt(A(D).css("borderLeftWidth"),10)||0)+(parseInt(A(D).css("paddingLeft"),10)||0),(parseInt(A(D).css("borderTopWidth"),10)||0)+(parseInt(A(D).css("paddingTop"),10)||0),(C?Math.max(D.scrollWidth,D.offsetWidth):D.offsetWidth)-(parseInt(A(D).css("borderLeftWidth"),10)||0)-(parseInt(A(D).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(C?Math.max(D.scrollHeight,D.offsetHeight):D.offsetHeight)-(parseInt(A(D).css("borderTopWidth"),10)||0)-(parseInt(A(D).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom];this.relative_container=G}else{if(F.containment.constructor==Array){this.containment=F.containment}}},_convertPositionTo:function(F,H){if(!H){H=this.position}var D=F=="absolute"?1:-1;var E=this.options,C=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&A.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,G=(/(html|body)/i).test(C[0].tagName);return{top:(H.top+this.offset.relative.top*D+this.offset.parent.top*D-((this.cssPosition=="fixed"?-this.scrollParent.scrollTop():(G?0:C.scrollTop()))*D)),left:(H.left+this.offset.relative.left*D+this.offset.parent.left*D-((this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():G?0:C.scrollLeft())*D))}},_generatePosition:function(D){var E=this.options,L=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&A.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,I=(/(html|body)/i).test(L[0].tagName);var H=D.pageX;var G=D.pageY;if(this.originalPosition){var C;if(this.containment){if(this.relative_container){var K=this.relative_container.offset();C=[this.containment[0]+K.left,this.containment[1]+K.top,this.containment[2]+K.left,this.containment[3]+K.top]}else{C=this.containment}if(D.pageX-this.offset.click.left<C[0]){H=C[0]+this.offset.click.left}if(D.pageY-this.offset.click.top<C[1]){G=C[1]+this.offset.click.top}if(D.pageX-this.offset.click.left>C[2]){H=C[2]+this.offset.click.left}if(D.pageY-this.offset.click.top>C[3]){G=C[3]+this.offset.click.top}}if(E.grid){var J=E.grid[1]?this.originalPageY+Math.round((G-this.originalPageY)/E.grid[1])*E.grid[1]:this.originalPageY;G=C?(!(J-this.offset.click.top<C[1]||J-this.offset.click.top>C[3])?J:(!(J-this.offset.click.top<C[1])?J-E.grid[1]:J+E.grid[1])):J;var F=E.grid[0]?this.originalPageX+Math.round((H-this.originalPageX)/E.grid[0])*E.grid[0]:this.originalPageX;H=C?(!(F-this.offset.click.left<C[0]||F-this.offset.click.left>C[2])?F:(!(F-this.offset.click.left<C[0])?F-E.grid[0]:F+E.grid[0])):F}}return{top:(G-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+((this.cssPosition=="fixed"?-this.scrollParent.scrollTop():(I?0:L.scrollTop())))),left:(H-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+((this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():I?0:L.scrollLeft())))}},_clear:function(){this.helper.removeClass("ui-draggable-dragging");if(this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval){this.helper.remove()}this.helper=null;this.cancelHelperRemoval=false},_trigger:function(C,D,E){E=E||this._uiHash();A.ui.plugin.call(this,C,[D,E]);if(C=="drag"){this.positionAbs=this._convertPositionTo("absolute")}return A.Widget.prototype._trigger.call(this,C,D,E)},plugins:{},_uiHash:function(C){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});A.ui.plugin.add("draggable","connectToSortable",{start:function(D,F){var E=A(this).data("draggable"),G=E.options,C=A.extend({},F,{item:E.element});E.sortables=[];A(G.connectToSortable).each(function(){var H=A.data(this,"sortable");if(H&&!H.options.disabled){E.sortables.push({instance:H,shouldRevert:H.options.revert});H.refreshPositions();H._trigger("activate",D,C)}})},stop:function(D,F){var E=A(this).data("draggable"),C=A.extend({},F,{item:E.element});A.each(E.sortables,function(){if(this.instance.isOver){this.instance.isOver=0;E.cancelHelperRemoval=true;this.instance.cancelHelperRemoval=false;if(this.shouldRevert){this.instance.options.revert=true}this.instance._mouseStop(D);this.instance.options.helper=this.instance.options._helper;if(E.options.helper=="original"){this.instance.currentItem.css({top:"auto",left:"auto"})}}else{this.instance.cancelHelperRemoval=false;this.instance._trigger("deactivate",D,C)}})},drag:function(D,G){var F=A(this).data("draggable"),C=this;var E=function(J){var O=this.offset.click.top,N=this.offset.click.left;var H=this.positionAbs.top,L=this.positionAbs.left;var K=J.height,M=J.width;var P=J.top,I=J.left;return A.ui.isOver(H+O,L+N,P,I,K,M)};A.each(F.sortables,function(I){var H=false;var J=this;this.instance.positionAbs=F.positionAbs;this.instance.helperProportions=F.helperProportions;this.instance.offset.click=F.offset.click;if(this.instance._intersectsWith(this.instance.containerCache)){H=true;A.each(F.sortables,function(){this.instance.positionAbs=F.positionAbs;this.instance.helperProportions=F.helperProportions;this.instance.offset.click=F.offset.click;if(this!=J&&this.instance._intersectsWith(this.instance.containerCache)&&A.ui.contains(J.instance.element[0],this.instance.element[0])){H=false}return H})}if(H){if(!this.instance.isOver){this.instance.isOver=1;this.instance.currentItem=A(C).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",true);this.instance.options._helper=this.instance.options.helper;this.instance.options.helper=function(){return G.helper[0]};D.target=this.instance.currentItem[0];this.instance._mouseCapture(D,true);this.instance._mouseStart(D,true,true);this.instance.offset.click.top=F.offset.click.top;this.instance.offset.click.left=F.offset.click.left;this.instance.offset.parent.left-=F.offset.parent.left-this.instance.offset.parent.left;this.instance.offset.parent.top-=F.offset.parent.top-this.instance.offset.parent.top;F._trigger("toSortable",D);F.dropped=this.instance.element;F.currentItem=F.element;this.instance.fromOutside=F}if(this.instance.currentItem){this.instance._mouseDrag(D)}}else{if(this.instance.isOver){this.instance.isOver=0;this.instance.cancelHelperRemoval=true;this.instance.options.revert=false;this.instance._trigger("out",D,this.instance._uiHash(this.instance));this.instance._mouseStop(D,true);this.instance.options.helper=this.instance.options._helper;this.instance.currentItem.remove();if(this.instance.placeholder){this.instance.placeholder.remove()}F._trigger("fromSortable",D);F.dropped=false}}})}});A.ui.plugin.add("draggable","cursor",{start:function(D,E){var C=A("body"),F=A(this).data("draggable").options;if(C.css("cursor")){F._cursor=C.css("cursor")}C.css("cursor",F.cursor)},stop:function(C,D){var E=A(this).data("draggable").options;if(E._cursor){A("body").css("cursor",E._cursor)}}});A.ui.plugin.add("draggable","opacity",{start:function(D,E){var C=A(E.helper),F=A(this).data("draggable").options;if(C.css("opacity")){F._opacity=C.css("opacity")}C.css("opacity",F.opacity)},stop:function(C,D){var E=A(this).data("draggable").options;if(E._opacity){A(D.helper).css("opacity",E._opacity)}}});A.ui.plugin.add("draggable","scroll",{start:function(D,E){var C=A(this).data("draggable");if(C.scrollParent[0]!=document&&C.scrollParent[0].tagName!="HTML"){C.overflowOffset=C.scrollParent.offset()}},drag:function(E,F){var D=A(this).data("draggable"),G=D.options,C=false;if(D.scrollParent[0]!=document&&D.scrollParent[0].tagName!="HTML"){if(!G.axis||G.axis!="x"){if((D.overflowOffset.top+D.scrollParent[0].offsetHeight)-E.pageY<G.scrollSensitivity){D.scrollParent[0].scrollTop=C=D.scrollParent[0].scrollTop+G.scrollSpeed}else{if(E.pageY-D.overflowOffset.top<G.scrollSensitivity){D.scrollParent[0].scrollTop=C=D.scrollParent[0].scrollTop-G.scrollSpeed}}}if(!G.axis||G.axis!="y"){if((D.overflowOffset.left+D.scrollParent[0].offsetWidth)-E.pageX<G.scrollSensitivity){D.scrollParent[0].scrollLeft=C=D.scrollParent[0].scrollLeft+G.scrollSpeed}else{if(E.pageX-D.overflowOffset.left<G.scrollSensitivity){D.scrollParent[0].scrollLeft=C=D.scrollParent[0].scrollLeft-G.scrollSpeed}}}}else{if(!G.axis||G.axis!="x"){if(E.pageY-A(document).scrollTop()<G.scrollSensitivity){C=A(document).scrollTop(A(document).scrollTop()-G.scrollSpeed)}else{if(A(window).height()-(E.pageY-A(document).scrollTop())<G.scrollSensitivity){C=A(document).scrollTop(A(document).scrollTop()+G.scrollSpeed)}}}if(!G.axis||G.axis!="y"){if(E.pageX-A(document).scrollLeft()<G.scrollSensitivity){C=A(document).scrollLeft(A(document).scrollLeft()-G.scrollSpeed)}else{if(A(window).width()-(E.pageX-A(document).scrollLeft())<G.scrollSensitivity){C=A(document).scrollLeft(A(document).scrollLeft()+G.scrollSpeed)}}}}if(C!==false&&A.ui.ddmanager&&!G.dropBehaviour){A.ui.ddmanager.prepareOffsets(D,E)}}});A.ui.plugin.add("draggable","snap",{start:function(D,E){var C=A(this).data("draggable"),F=C.options;C.snapElements=[];A(F.snap.constructor!=String?(F.snap.items||":data(draggable)"):F.snap).each(function(){var H=A(this);var G=H.offset();if(this!=C.element[0]){C.snapElements.push({item:this,width:H.outerWidth(),height:H.outerHeight(),top:G.top,left:G.left})}})},drag:function(O,L){var F=A(this).data("draggable"),M=F.options;var S=M.snapTolerance;var R=L.offset.left,Q=R+F.helperProportions.width,E=L.offset.top,D=E+F.helperProportions.height;for(var P=F.snapElements.length-1;P>=0;P--){var N=F.snapElements[P].left,K=N+F.snapElements[P].width,J=F.snapElements[P].top,U=J+F.snapElements[P].height;if(!((N-S<R&&R<K+S&&J-S<E&&E<U+S)||(N-S<R&&R<K+S&&J-S<D&&D<U+S)||(N-S<Q&&Q<K+S&&J-S<E&&E<U+S)||(N-S<Q&&Q<K+S&&J-S<D&&D<U+S))){if(F.snapElements[P].snapping){(F.options.snap.release&&F.options.snap.release.call(F.element,O,A.extend(F._uiHash(),{snapItem:F.snapElements[P].item})))}F.snapElements[P].snapping=false;continue}if(M.snapMode!="inner"){var C=Math.abs(J-D)<=S;var T=Math.abs(U-E)<=S;var H=Math.abs(N-Q)<=S;var I=Math.abs(K-R)<=S;if(C){L.position.top=F._convertPositionTo("relative",{top:J-F.helperProportions.height,left:0}).top-F.margins.top}if(T){L.position.top=F._convertPositionTo("relative",{top:U,left:0}).top-F.margins.top}if(H){L.position.left=F._convertPositionTo("relative",{top:0,left:N-F.helperProportions.width}).left-F.margins.left}if(I){L.position.left=F._convertPositionTo("relative",{top:0,left:K}).left-F.margins.left}}var G=(C||T||H||I);if(M.snapMode!="outer"){var C=Math.abs(J-E)<=S;var T=Math.abs(U-D)<=S;var H=Math.abs(N-R)<=S;var I=Math.abs(K-Q)<=S;if(C){L.position.top=F._convertPositionTo("relative",{top:J,left:0}).top-F.margins.top}if(T){L.position.top=F._convertPositionTo("relative",{top:U-F.helperProportions.height,left:0}).top-F.margins.top}if(H){L.position.left=F._convertPositionTo("relative",{top:0,left:N}).left-F.margins.left}if(I){L.position.left=F._convertPositionTo("relative",{top:0,left:K-F.helperProportions.width}).left-F.margins.left}}if(!F.snapElements[P].snapping&&(C||T||H||I||G)){(F.options.snap.snap&&F.options.snap.snap.call(F.element,O,A.extend(F._uiHash(),{snapItem:F.snapElements[P].item})))}F.snapElements[P].snapping=(C||T||H||I||G)}}});A.ui.plugin.add("draggable","stack",{start:function(D,E){var G=A(this).data("draggable").options;var F=A.makeArray(A(G.stack)).sort(function(I,H){return(parseInt(A(I).css("zIndex"),10)||0)-(parseInt(A(H).css("zIndex"),10)||0)});if(!F.length){return }var C=parseInt(F[0].style.zIndex)||0;A(F).each(function(H){this.style.zIndex=C+H});this[0].style.zIndex=C+F.length}});A.ui.plugin.add("draggable","zIndex",{start:function(D,E){var C=A(E.helper),F=A(this).data("draggable").options;if(C.css("zIndex")){F._zIndex=C.css("zIndex")}C.css("zIndex",F.zIndex)},stop:function(C,D){var E=A(this).data("draggable").options;if(E._zIndex){A(D.helper).css("zIndex",E._zIndex)}}})})(jQuery);(function(C,D){C.widget("ui.resizable",C.ui.mouse,{version:"1.9.2",widgetEventPrefix:"resize",options:{alsoResize:false,animate:false,animateDuration:"slow",animateEasing:"swing",aspectRatio:false,autoHide:false,containment:false,ghost:false,grid:false,handles:"e,s,se",helper:false,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1000},_create:function(){var H=this,J=this.options;this.element.addClass("ui-resizable");C.extend(this,{_aspectRatio:!!(J.aspectRatio),aspectRatio:J.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:J.helper||J.ghost||J.animate?J.helper||"ui-resizable-helper":null});if(this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)){this.element.wrap(C('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")}));this.element=this.element.parent().data("resizable",this.element.data("resizable"));this.elementIsWrapper=true;this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")});this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0});this.originalResizeStyle=this.originalElement.css("resize");this.originalElement.css("resize","none");this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"}));this.originalElement.css({margin:this.originalElement.css("margin")});this._proportionallyResize()}this.handles=J.handles||(!C(".ui-resizable-handle",this.element).length?"e,s,se":{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"});if(this.handles.constructor==String){if(this.handles=="all"){this.handles="n,e,s,w,se,sw,ne,nw"}var K=this.handles.split(",");this.handles={};for(var F=0;F<K.length;F++){var I=C.trim(K[F]),E="ui-resizable-"+I;var G=C('<div class="ui-resizable-handle '+E+'"></div>');G.css({zIndex:J.zIndex});if("se"==I){G.addClass("ui-icon ui-icon-gripsmall-diagonal-se")}this.handles[I]=".ui-resizable-"+I;this.element.append(G)}}this._renderAxis=function(P){P=P||this.element;for(var M in this.handles){if(this.handles[M].constructor==String){this.handles[M]=C(this.handles[M],this.element).show()}if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var N=C(this.handles[M],this.element),O=0;O=/sw|ne|nw|se|n|s/.test(M)?N.outerHeight():N.outerWidth();var L=["padding",/ne|nw|n/.test(M)?"Top":/se|sw|s/.test(M)?"Bottom":/^e$/.test(M)?"Right":"Left"].join("");P.css(L,O);this._proportionallyResize()}if(!C(this.handles[M]).length){continue}}};this._renderAxis(this.element);this._handles=C(".ui-resizable-handle",this.element).disableSelection();this._handles.mouseover(function(){if(!H.resizing){if(this.className){var L=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)}H.axis=L&&L[1]?L[1]:"se"}});if(J.autoHide){this._handles.hide();C(this.element).addClass("ui-resizable-autohide").mouseenter(function(){if(J.disabled){return }C(this).removeClass("ui-resizable-autohide");H._handles.show()}).mouseleave(function(){if(J.disabled){return }if(!H.resizing){C(this).addClass("ui-resizable-autohide");H._handles.hide()}})}this._mouseInit()},_destroy:function(){this._mouseDestroy();var E=function(G){C(G).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){E(this.element);var F=this.element;this.originalElement.css({position:F.css("position"),width:F.outerWidth(),height:F.outerHeight(),top:F.css("top"),left:F.css("left")}).insertAfter(F);F.remove()}this.originalElement.css("resize",this.originalResizeStyle);E(this.originalElement);return this},_mouseCapture:function(F){var G=false;for(var E in this.handles){if(C(this.handles[E])[0]==F.target){G=true}}return !this.options.disabled&&G},_mouseStart:function(G){var J=this.options,F=this.element.position(),E=this.element;this.resizing=true;this.documentScroll={top:C(document).scrollTop(),left:C(document).scrollLeft()};if(E.is(".ui-draggable")||(/absolute/).test(E.css("position"))){E.css({position:"absolute",top:F.top,left:F.left})}this._renderProxy();var K=B(this.helper.css("left")),H=B(this.helper.css("top"));if(J.containment){K+=C(J.containment).scrollLeft()||0;H+=C(J.containment).scrollTop()||0}this.offset=this.helper.offset();this.position={left:K,top:H};this.size=this._helper?{width:E.outerWidth(),height:E.outerHeight()}:{width:E.width(),height:E.height()};this.originalSize=this._helper?{width:E.outerWidth(),height:E.outerHeight()}:{width:E.width(),height:E.height()};this.originalPosition={left:K,top:H};this.sizeDiff={width:E.outerWidth()-E.width(),height:E.outerHeight()-E.height()};this.originalMousePosition={left:G.pageX,top:G.pageY};this.aspectRatio=(typeof J.aspectRatio=="number")?J.aspectRatio:((this.originalSize.width/this.originalSize.height)||1);var I=C(".ui-resizable-"+this.axis).css("cursor");C("body").css("cursor",I=="auto"?this.axis+"-resize":I);E.addClass("ui-resizable-resizing");this._propagate("start",G);return true},_mouseDrag:function(E){var G=this.helper,F=this.options,L={},K=this,I=this.originalMousePosition,M=this.axis;var O=(E.pageX-I.left)||0,N=(E.pageY-I.top)||0;var H=this._change[M];if(!H){return false}var J=H.apply(this,[E,O,N]);this._updateVirtualBoundaries(E.shiftKey);if(this._aspectRatio||E.shiftKey){J=this._updateRatio(J,E)}J=this._respectSize(J,E);this._propagate("resize",E);G.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"});if(!this._helper&&this._proportionallyResizeElements.length){this._proportionallyResize()}this._updateCache(J);this._trigger("resize",E,this.ui());return false},_mouseStop:function(H){this.resizing=false;var I=this.options,L=this;if(this._helper){var G=this._proportionallyResizeElements,E=G.length&&(/textarea/i).test(G[0].nodeName),F=E&&C.ui.hasScroll(G[0],"left")?0:L.sizeDiff.height,K=E?0:L.sizeDiff.width;var N={width:(L.helper.width()-K),height:(L.helper.height()-F)},J=(parseInt(L.element.css("left"),10)+(L.position.left-L.originalPosition.left))||null,M=(parseInt(L.element.css("top"),10)+(L.position.top-L.originalPosition.top))||null;if(!I.animate){this.element.css(C.extend(N,{top:M,left:J}))}L.helper.height(L.size.height);L.helper.width(L.size.width);if(this._helper&&!I.animate){this._proportionallyResize()}}C("body").css("cursor","auto");this.element.removeClass("ui-resizable-resizing");this._propagate("stop",H);if(this._helper){this.helper.remove()}return false},_updateVirtualBoundaries:function(G){var J=this.options,I,H,F,K,E;E={minWidth:A(J.minWidth)?J.minWidth:0,maxWidth:A(J.maxWidth)?J.maxWidth:Infinity,minHeight:A(J.minHeight)?J.minHeight:0,maxHeight:A(J.maxHeight)?J.maxHeight:Infinity};if(this._aspectRatio||G){I=E.minHeight*this.aspectRatio;F=E.minWidth/this.aspectRatio;H=E.maxHeight*this.aspectRatio;K=E.maxWidth/this.aspectRatio;if(I>E.minWidth){E.minWidth=I}if(F>E.minHeight){E.minHeight=F}if(H<E.maxWidth){E.maxWidth=H}if(K<E.maxHeight){E.maxHeight=K}}this._vBoundaries=E},_updateCache:function(E){var F=this.options;this.offset=this.helper.offset();if(A(E.left)){this.position.left=E.left}if(A(E.top)){this.position.top=E.top}if(A(E.height)){this.size.height=E.height}if(A(E.width)){this.size.width=E.width}},_updateRatio:function(H,G){var I=this.options,J=this.position,F=this.size,E=this.axis;if(A(H.height)){H.width=(H.height*this.aspectRatio)}else{if(A(H.width)){H.height=(H.width/this.aspectRatio)}}if(E=="sw"){H.left=J.left+(F.width-H.width);H.top=null}if(E=="nw"){H.top=J.top+(F.height-H.height);H.left=J.left+(F.width-H.width)}return H},_respectSize:function(L,G){var J=this.helper,I=this._vBoundaries,Q=this._aspectRatio||G.shiftKey,P=this.axis,S=A(L.width)&&I.maxWidth&&(I.maxWidth<L.width),M=A(L.height)&&I.maxHeight&&(I.maxHeight<L.height),H=A(L.width)&&I.minWidth&&(I.minWidth>L.width),R=A(L.height)&&I.minHeight&&(I.minHeight>L.height);if(H){L.width=I.minWidth}if(R){L.height=I.minHeight}if(S){L.width=I.maxWidth}if(M){L.height=I.maxHeight}var F=this.originalPosition.left+this.originalSize.width,O=this.position.top+this.size.height;var K=/sw|nw|w/.test(P),E=/nw|ne|n/.test(P);if(H&&K){L.left=F-I.minWidth}if(S&&K){L.left=F-I.maxWidth}if(R&&E){L.top=O-I.minHeight}if(M&&E){L.top=O-I.maxHeight}var N=!L.width&&!L.height;if(N&&!L.left&&L.top){L.top=null}else{if(N&&!L.top&&L.left){L.left=null}}return L},_proportionallyResize:function(){var J=this.options;if(!this._proportionallyResizeElements.length){return }var G=this.helper||this.element;for(var F=0;F<this._proportionallyResizeElements.length;F++){var H=this._proportionallyResizeElements[F];if(!this.borderDif){var E=[H.css("borderTopWidth"),H.css("borderRightWidth"),H.css("borderBottomWidth"),H.css("borderLeftWidth")],I=[H.css("paddingTop"),H.css("paddingRight"),H.css("paddingBottom"),H.css("paddingLeft")];this.borderDif=C.map(E,function(K,M){var L=parseInt(K,10)||0,N=parseInt(I[M],10)||0;return L+N})}H.css({height:(G.height()-this.borderDif[0]-this.borderDif[2])||0,width:(G.width()-this.borderDif[1]-this.borderDif[3])||0})}},_renderProxy:function(){var E=this.element,H=this.options;this.elementOffset=E.offset();if(this._helper){this.helper=this.helper||C('<div style="overflow:hidden;"></div>');var F=(C.ui.ie6?1:0),G=(C.ui.ie6?2:-1);this.helper.addClass(this._helper).css({width:this.element.outerWidth()+G,height:this.element.outerHeight()+G,position:"absolute",left:this.elementOffset.left-F+"px",top:this.elementOffset.top-F+"px",zIndex:++H.zIndex});this.helper.appendTo("body").disableSelection()}else{this.helper=this.element}},_change:{e:function(G,F,E){return{width:this.originalSize.width+F}},w:function(H,F,E){var J=this.options,G=this.originalSize,I=this.originalPosition;return{left:I.left+F,width:G.width-F}},n:function(H,F,E){var J=this.options,G=this.originalSize,I=this.originalPosition;return{top:I.top+E,height:G.height-E}},s:function(G,F,E){return{height:this.originalSize.height+E}},se:function(G,F,E){return C.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[G,F,E]))},sw:function(G,F,E){return C.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[G,F,E]))},ne:function(G,F,E){return C.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[G,F,E]))},nw:function(G,F,E){return C.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[G,F,E]))}},_propagate:function(F,E){C.ui.plugin.call(this,F,[E,this.ui()]);(F!="resize"&&this._trigger(F,E,this.ui()))},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}});C.ui.plugin.add("resizable","alsoResize",{start:function(F,G){var E=C(this).data("resizable"),I=E.options;var H=function(J){C(J).each(function(){var K=C(this);K.data("resizable-alsoresize",{width:parseInt(K.width(),10),height:parseInt(K.height(),10),left:parseInt(K.css("left"),10),top:parseInt(K.css("top"),10)})})};if(typeof (I.alsoResize)=="object"&&!I.alsoResize.parentNode){if(I.alsoResize.length){I.alsoResize=I.alsoResize[0];H(I.alsoResize)}else{C.each(I.alsoResize,function(J){H(J)})}}else{H(I.alsoResize)}},resize:function(G,I){var F=C(this).data("resizable"),J=F.options,H=F.originalSize,L=F.originalPosition;var K={height:(F.size.height-H.height)||0,width:(F.size.width-H.width)||0,top:(F.position.top-L.top)||0,left:(F.position.left-L.left)||0},E=function(M,N){C(M).each(function(){var Q=C(this),R=C(this).data("resizable-alsoresize"),P={},O=N&&N.length?N:Q.parents(I.originalElement[0]).length?["width","height"]:["width","height","top","left"];C.each(O,function(S,U){var T=(R[U]||0)+(K[U]||0);if(T&&T>=0){P[U]=T||null}});Q.css(P)})};if(typeof (J.alsoResize)=="object"&&!J.alsoResize.nodeType){C.each(J.alsoResize,function(M,N){E(M,N)})}else{E(J.alsoResize)}},stop:function(E,F){C(this).removeData("resizable-alsoresize")}});C.ui.plugin.add("resizable","animate",{stop:function(I,O){var M=C(this).data("resizable"),J=M.options;var H=M._proportionallyResizeElements,E=H.length&&(/textarea/i).test(H[0].nodeName),F=E&&C.ui.hasScroll(H[0],"left")?0:M.sizeDiff.height,L=E?0:M.sizeDiff.width;var G={width:(M.size.width-L),height:(M.size.height-F)},K=(parseInt(M.element.css("left"),10)+(M.position.left-M.originalPosition.left))||null,N=(parseInt(M.element.css("top"),10)+(M.position.top-M.originalPosition.top))||null;M.element.animate(C.extend(G,N&&K?{top:N,left:K}:{}),{duration:J.animateDuration,easing:J.animateEasing,step:function(){var P={width:parseInt(M.element.css("width"),10),height:parseInt(M.element.css("height"),10),top:parseInt(M.element.css("top"),10),left:parseInt(M.element.css("left"),10)};if(H&&H.length){C(H[0]).css({width:P.width,height:P.height})}M._updateCache(P);M._propagate("resize",I)}})}});C.ui.plugin.add("resizable","containment",{start:function(F,Q){var O=C(this).data("resizable"),J=O.options,L=O.element;var G=J.containment,K=(G instanceof C)?G.get(0):(/parent/.test(G))?L.parent().get(0):G;if(!K){return }O.containerElement=C(K);if(/document/.test(G)||G==document){O.containerOffset={left:0,top:0};O.containerPosition={left:0,top:0};O.parentData={element:C(document),left:0,top:0,width:C(document).width(),height:C(document).height()||document.body.parentNode.scrollHeight}}else{var N=C(K),I=[];C(["Top","Right","Left","Bottom"]).each(function(T,S){I[T]=B(N.css("padding"+S))});O.containerOffset=N.offset();O.containerPosition=N.position();O.containerSize={height:(N.innerHeight()-I[3]),width:(N.innerWidth()-I[1])};var P=O.containerOffset,E=O.containerSize.height,M=O.containerSize.width,H=(C.ui.hasScroll(K,"left")?K.scrollWidth:M),R=(C.ui.hasScroll(K)?K.scrollHeight:E);O.parentData={element:K,left:P.left,top:P.top,width:H,height:R}}},resize:function(G,Q){var M=C(this).data("resizable"),I=M.options,F=M.containerSize,P=M.containerOffset,N=M.size,O=M.position,R=M._aspectRatio||G.shiftKey,E={top:0,left:0},H=M.containerElement;if(H[0]!=document&&(/static/).test(H.css("position"))){E=P}if(O.left<(M._helper?P.left:0)){M.size.width=M.size.width+(M._helper?(M.position.left-P.left):(M.position.left-E.left));if(R){M.size.height=M.size.width/M.aspectRatio}M.position.left=I.helper?P.left:0}if(O.top<(M._helper?P.top:0)){M.size.height=M.size.height+(M._helper?(M.position.top-P.top):M.position.top);if(R){M.size.width=M.size.height*M.aspectRatio}M.position.top=M._helper?P.top:0}M.offset.left=M.parentData.left+M.position.left;M.offset.top=M.parentData.top+M.position.top;var L=Math.abs((M._helper?M.offset.left-E.left:(M.offset.left-E.left))+M.sizeDiff.width),S=Math.abs((M._helper?M.offset.top-E.top:(M.offset.top-P.top))+M.sizeDiff.height);var K=M.containerElement.get(0)==M.element.parent().get(0),J=/relative|absolute/.test(M.containerElement.css("position"));if(K&&J){L-=M.parentData.left}if(L+M.size.width>=M.parentData.width){M.size.width=M.parentData.width-L;if(R){M.size.height=M.size.width/M.aspectRatio}}if(S+M.size.height>=M.parentData.height){M.size.height=M.parentData.height-S;if(R){M.size.width=M.size.height*M.aspectRatio}}},stop:function(F,N){var K=C(this).data("resizable"),G=K.options,L=K.position,M=K.containerOffset,E=K.containerPosition,H=K.containerElement;var I=C(K.helper),P=I.offset(),O=I.outerWidth()-K.sizeDiff.width,J=I.outerHeight()-K.sizeDiff.height;if(K._helper&&!G.animate&&(/relative/).test(H.css("position"))){C(this).css({left:P.left-E.left-M.left,width:O,height:J})}if(K._helper&&!G.animate&&(/static/).test(H.css("position"))){C(this).css({left:P.left-E.left-M.left,width:O,height:J})}}});C.ui.plugin.add("resizable","ghost",{start:function(G,H){var F=C(this).data("resizable"),I=F.options,E=F.size;F.ghost=F.originalElement.clone();F.ghost.css({opacity:0.25,display:"block",position:"relative",height:E.height,width:E.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass(typeof I.ghost=="string"?I.ghost:"");F.ghost.appendTo(F.helper)},resize:function(F,G){var E=C(this).data("resizable"),H=E.options;if(E.ghost){E.ghost.css({position:"relative",height:E.size.height,width:E.size.width})}},stop:function(F,G){var E=C(this).data("resizable"),H=E.options;if(E.ghost&&E.helper){E.helper.get(0).removeChild(E.ghost.get(0))}}});C.ui.plugin.add("resizable","grid",{resize:function(E,N){var K=C(this).data("resizable"),H=K.options,L=K.size,I=K.originalSize,J=K.originalPosition,O=K.axis,M=H._aspectRatio||E.shiftKey;H.grid=typeof H.grid=="number"?[H.grid,H.grid]:H.grid;var G=Math.round((L.width-I.width)/(H.grid[0]||1))*(H.grid[0]||1),F=Math.round((L.height-I.height)/(H.grid[1]||1))*(H.grid[1]||1);if(/^(se|s|e)$/.test(O)){K.size.width=I.width+G;K.size.height=I.height+F}else{if(/^(ne)$/.test(O)){K.size.width=I.width+G;K.size.height=I.height+F;K.position.top=J.top-F}else{if(/^(sw)$/.test(O)){K.size.width=I.width+G;K.size.height=I.height+F;K.position.left=J.left-G}else{K.size.width=I.width+G;K.size.height=I.height+F;K.position.top=J.top-F;K.position.left=J.left-G}}}}});var B=function(E){return parseInt(E,10)||0};var A=function(E){return !isNaN(parseInt(E,10))}})(jQuery);(function(F,B){var K,E,A,H,I="ui-button ui-widget ui-state-default ui-corner-all",C="ui-state-hover ui-state-active ",G="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",J=function(){var L=F(this).find(":ui-button");setTimeout(function(){L.button("refresh")},1)},D=function(M){var L=M.name,N=M.form,O=F([]);if(L){if(N){O=F(N).find("[name='"+L+"']")}else{O=F("[name='"+L+"']",M.ownerDocument).filter(function(){return !this.form})}}return O};F.widget("ui.button",{version:"1.9.2",defaultElement:"<button>",options:{disabled:null,text:true,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,J);if(typeof this.options.disabled!=="boolean"){this.options.disabled=!!this.element.prop("disabled")}else{this.element.prop("disabled",this.options.disabled)}this._determineButtonType();this.hasTitle=!!this.buttonElement.attr("title");var O=this,M=this.options,P=this.type==="checkbox"||this.type==="radio",N=!P?"ui-state-active":"",L="ui-state-focus";if(M.label===null){M.label=(this.type==="input"?this.buttonElement.val():this.buttonElement.html())}this._hoverable(this.buttonElement);this.buttonElement.addClass(I).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){if(M.disabled){return }if(this===K){F(this).addClass("ui-state-active")}}).bind("mouseleave"+this.eventNamespace,function(){if(M.disabled){return }F(this).removeClass(N)}).bind("click"+this.eventNamespace,function(Q){if(M.disabled){Q.preventDefault();Q.stopImmediatePropagation()}});this.element.bind("focus"+this.eventNamespace,function(){O.buttonElement.addClass(L)}).bind("blur"+this.eventNamespace,function(){O.buttonElement.removeClass(L)});if(P){this.element.bind("change"+this.eventNamespace,function(){if(H){return }O.refresh()});this.buttonElement.bind("mousedown"+this.eventNamespace,function(Q){if(M.disabled){return }H=false;E=Q.pageX;A=Q.pageY}).bind("mouseup"+this.eventNamespace,function(Q){if(M.disabled){return }if(E!==Q.pageX||A!==Q.pageY){H=true}})}if(this.type==="checkbox"){this.buttonElement.bind("click"+this.eventNamespace,function(){if(M.disabled||H){return false}F(this).toggleClass("ui-state-active");O.buttonElement.attr("aria-pressed",O.element[0].checked)})}else{if(this.type==="radio"){this.buttonElement.bind("click"+this.eventNamespace,function(){if(M.disabled||H){return false}F(this).addClass("ui-state-active");O.buttonElement.attr("aria-pressed","true");var Q=O.element[0];D(Q).not(Q).map(function(){return F(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")})}else{this.buttonElement.bind("mousedown"+this.eventNamespace,function(){if(M.disabled){return false}F(this).addClass("ui-state-active");K=this;O.document.one("mouseup",function(){K=null})}).bind("mouseup"+this.eventNamespace,function(){if(M.disabled){return false}F(this).removeClass("ui-state-active")}).bind("keydown"+this.eventNamespace,function(Q){if(M.disabled){return false}if(Q.keyCode===F.ui.keyCode.SPACE||Q.keyCode===F.ui.keyCode.ENTER){F(this).addClass("ui-state-active")}}).bind("keyup"+this.eventNamespace,function(){F(this).removeClass("ui-state-active")});if(this.buttonElement.is("a")){this.buttonElement.keyup(function(Q){if(Q.keyCode===F.ui.keyCode.SPACE){F(this).click()}})}}}this._setOption("disabled",M.disabled);this._resetButton()},_determineButtonType:function(){var L,N,M;if(this.element.is("[type=checkbox]")){this.type="checkbox"}else{if(this.element.is("[type=radio]")){this.type="radio"}else{if(this.element.is("input")){this.type="input"}else{this.type="button"}}}if(this.type==="checkbox"||this.type==="radio"){L=this.element.parents().last();N="label[for='"+this.element.attr("id")+"']";this.buttonElement=L.find(N);if(!this.buttonElement.length){L=L.length?L.siblings():this.element.siblings();this.buttonElement=L.filter(N);if(!this.buttonElement.length){this.buttonElement=L.find(N)}}this.element.addClass("ui-helper-hidden-accessible");M=this.element.is(":checked");if(M){this.buttonElement.addClass("ui-state-active")}this.buttonElement.prop("aria-pressed",M)}else{this.buttonElement=this.element}},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible");this.buttonElement.removeClass(I+" "+C+" "+G).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html());if(!this.hasTitle){this.buttonElement.removeAttr("title")}},_setOption:function(L,M){this._super(L,M);if(L==="disabled"){if(M){this.element.prop("disabled",true)}else{this.element.prop("disabled",false)}return }this._resetButton()},refresh:function(){var L=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");if(L!==this.options.disabled){this._setOption("disabled",L)}if(this.type==="radio"){D(this.element[0]).each(function(){if(F(this).is(":checked")){F(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true")}else{F(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}})}else{if(this.type==="checkbox"){if(this.element.is(":checked")){this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true")}else{this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false")}}}},_resetButton:function(){if(this.type==="input"){if(this.options.label){this.element.val(this.options.label)}return }var P=this.buttonElement.removeClass(G),N=F("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(P.empty()).text(),M=this.options.icons,L=M.primary&&M.secondary,O=[];if(M.primary||M.secondary){if(this.options.text){O.push("ui-button-text-icon"+(L?"s":(M.primary?"-primary":"-secondary")))}if(M.primary){P.prepend("<span class='ui-button-icon-primary ui-icon "+M.primary+"'></span>")}if(M.secondary){P.append("<span class='ui-button-icon-secondary ui-icon "+M.secondary+"'></span>")}if(!this.options.text){O.push(L?"ui-button-icons-only":"ui-button-icon-only");if(!this.hasTitle){P.attr("title",F.trim(N))}}}else{O.push("ui-button-text-only")}P.addClass(O.join(" "))}});F.widget("ui.buttonset",{version:"1.9.2",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(L,M){if(L==="disabled"){this.buttons.button("option",L,M)}this._super(L,M)},refresh:function(){var L=this.element.css("direction")==="rtl";this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return F(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(L?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(L?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset");this.buttons.map(function(){return F(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})}(jQuery));(function($,undefined){$.extend($.ui,{datepicker:{version:"1.9.2"}});var PROP_NAME="datepicker";var dpuuid=new Date().getTime();var instActive;function Datepicker(){this.debug=false;this._curInst=null;this._keyEvent=false;this._disabledInputs=[];this._datepickerShowing=false;this._inDialog=false;this._mainDivId="ui-datepicker-div";this._inlineClass="ui-datepicker-inline";this._appendClass="ui-datepicker-append";this._triggerClass="ui-datepicker-trigger";this._dialogClass="ui-datepicker-dialog";this._disableClass="ui-datepicker-disabled";this._unselectableClass="ui-datepicker-unselectable";this._currentClass="ui-datepicker-current-day";this._dayOverClass="ui-datepicker-days-cell-over";this.regional=[];this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:false,showMonthAfterYear:false,yearSuffix:""};this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:false,hideIfNoPrevNext:false,navigationAsDateFormat:false,gotoCurrent:false,changeMonth:false,changeYear:false,yearRange:"c-10:c+10",showOtherMonths:false,selectOtherMonths:false,showWeek:false,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:true,showButtonPanel:false,autoSize:false,disabled:false};$.extend(this._defaults,this.regional[""]);this.dpDiv=bindHover($('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}$.extend(Datepicker.prototype,{markerClassName:"hasDatepicker",maxRows:4,log:function(){if(this.debug){console.log.apply("",arguments)}},_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(settings){extendRemove(this._defaults,settings||{});return this},_attachDatepicker:function(target,settings){var inlineSettings=null;for(var attrName in this._defaults){var attrValue=target.getAttribute("date:"+attrName);if(attrValue){inlineSettings=inlineSettings||{};try{inlineSettings[attrName]=eval(attrValue)}catch(err){inlineSettings[attrName]=attrValue}}}var nodeName=target.nodeName.toLowerCase();var inline=(nodeName=="div"||nodeName=="span");if(!target.id){this.uuid+=1;target.id="dp"+this.uuid}var inst=this._newInst($(target),inline);inst.settings=$.extend({},settings||{},inlineSettings||{});if(nodeName=="input"){this._connectDatepicker(target,inst)}else{if(inline){this._inlineDatepicker(target,inst)}}},_newInst:function(target,inline){var id=target[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1");return{id:id,input:target,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:inline,dpDiv:(!inline?this.dpDiv:bindHover($('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')))}},_connectDatepicker:function(target,inst){var input=$(target);inst.append=$([]);inst.trigger=$([]);if(input.hasClass(this.markerClassName)){return }this._attachments(input,inst);input.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",function(event,key,value){inst.settings[key]=value}).bind("getData.datepicker",function(event,key){return this._get(inst,key)});this._autoSize(inst);$.data(target,PROP_NAME,inst);if(inst.settings.disabled){this._disableDatepicker(target)}},_attachments:function(input,inst){var appendText=this._get(inst,"appendText");var isRTL=this._get(inst,"isRTL");if(inst.append){inst.append.remove()}if(appendText){inst.append=$('<span class="'+this._appendClass+'">'+appendText+"</span>");input[isRTL?"before":"after"](inst.append)}input.unbind("focus",this._showDatepicker);if(inst.trigger){inst.trigger.remove()}var showOn=this._get(inst,"showOn");if(showOn=="focus"||showOn=="both"){input.focus(this._showDatepicker)}if(showOn=="button"||showOn=="both"){var buttonText=this._get(inst,"buttonText");var buttonImage=this._get(inst,"buttonImage");inst.trigger=$(this._get(inst,"buttonImageOnly")?$("<img/>").addClass(this._triggerClass).attr({src:buttonImage,alt:buttonText,title:buttonText}):$('<button type="button"></button>').addClass(this._triggerClass).html(buttonImage==""?buttonText:$("<img/>").attr({src:buttonImage,alt:buttonText,title:buttonText})));input[isRTL?"before":"after"](inst.trigger);inst.trigger.click(function(){if($.datepicker._datepickerShowing&&$.datepicker._lastInput==input[0]){$.datepicker._hideDatepicker()}else{if($.datepicker._datepickerShowing&&$.datepicker._lastInput!=input[0]){$.datepicker._hideDatepicker();$.datepicker._showDatepicker(input[0])}else{$.datepicker._showDatepicker(input[0])}}return false})}},_autoSize:function(inst){if(this._get(inst,"autoSize")&&!inst.inline){var date=new Date(2009,12-1,20);var dateFormat=this._get(inst,"dateFormat");if(dateFormat.match(/[DM]/)){var findMax=function(names){var max=0;var maxI=0;for(var i=0;i<names.length;i++){if(names[i].length>max){max=names[i].length;maxI=i}}return maxI};date.setMonth(findMax(this._get(inst,(dateFormat.match(/MM/)?"monthNames":"monthNamesShort"))));date.setDate(findMax(this._get(inst,(dateFormat.match(/DD/)?"dayNames":"dayNamesShort")))+20-date.getDay())}inst.input.attr("size",this._formatDate(inst,date).length)}},_inlineDatepicker:function(target,inst){var divSpan=$(target);if(divSpan.hasClass(this.markerClassName)){return }divSpan.addClass(this.markerClassName).append(inst.dpDiv).bind("setData.datepicker",function(event,key,value){inst.settings[key]=value}).bind("getData.datepicker",function(event,key){return this._get(inst,key)});$.data(target,PROP_NAME,inst);this._setDate(inst,this._getDefaultDate(inst),true);this._updateDatepicker(inst);this._updateAlternate(inst);if(inst.settings.disabled){this._disableDatepicker(target)}inst.dpDiv.css("display","block")},_dialogDatepicker:function(input,date,onSelect,settings,pos){var inst=this._dialogInst;if(!inst){this.uuid+=1;var id="dp"+this.uuid;this._dialogInput=$('<input type="text" id="'+id+'" style="position: absolute; top: -100px; width: 0px;"/>');this._dialogInput.keydown(this._doKeyDown);$("body").append(this._dialogInput);inst=this._dialogInst=this._newInst(this._dialogInput,false);inst.settings={};$.data(this._dialogInput[0],PROP_NAME,inst)}extendRemove(inst.settings,settings||{});date=(date&&date.constructor==Date?this._formatDate(inst,date):date);this._dialogInput.val(date);this._pos=(pos?(pos.length?pos:[pos.pageX,pos.pageY]):null);if(!this._pos){var browserWidth=document.documentElement.clientWidth;var browserHeight=document.documentElement.clientHeight;var scrollX=document.documentElement.scrollLeft||document.body.scrollLeft;var scrollY=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[(browserWidth/2)-100+scrollX,(browserHeight/2)-150+scrollY]}this._dialogInput.css("left",(this._pos[0]+20)+"px").css("top",this._pos[1]+"px");inst.settings.onSelect=onSelect;this._inDialog=true;this.dpDiv.addClass(this._dialogClass);this._showDatepicker(this._dialogInput[0]);if($.blockUI){$.blockUI(this.dpDiv)}$.data(this._dialogInput[0],PROP_NAME,inst);return this},_destroyDatepicker:function(target){var $target=$(target);var inst=$.data(target,PROP_NAME);if(!$target.hasClass(this.markerClassName)){return }var nodeName=target.nodeName.toLowerCase();$.removeData(target,PROP_NAME);if(nodeName=="input"){inst.append.remove();inst.trigger.remove();$target.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)}else{if(nodeName=="div"||nodeName=="span"){$target.removeClass(this.markerClassName).empty()}}},_enableDatepicker:function(target){var $target=$(target);var inst=$.data(target,PROP_NAME);if(!$target.hasClass(this.markerClassName)){return }var nodeName=target.nodeName.toLowerCase();if(nodeName=="input"){target.disabled=false;inst.trigger.filter("button").each(function(){this.disabled=false}).end().filter("img").css({opacity:"1.0",cursor:""})}else{if(nodeName=="div"||nodeName=="span"){var inline=$target.children("."+this._inlineClass);inline.children().removeClass("ui-state-disabled");inline.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",false)}}this._disabledInputs=$.map(this._disabledInputs,function(value){return(value==target?null:value)})},_disableDatepicker:function(target){var $target=$(target);var inst=$.data(target,PROP_NAME);if(!$target.hasClass(this.markerClassName)){return }var nodeName=target.nodeName.toLowerCase();if(nodeName=="input"){target.disabled=true;inst.trigger.filter("button").each(function(){this.disabled=true}).end().filter("img").css({opacity:"0.5",cursor:"default"})}else{if(nodeName=="div"||nodeName=="span"){var inline=$target.children("."+this._inlineClass);inline.children().addClass("ui-state-disabled");inline.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",true)}}this._disabledInputs=$.map(this._disabledInputs,function(value){return(value==target?null:value)});this._disabledInputs[this._disabledInputs.length]=target},_isDisabledDatepicker:function(target){if(!target){return false}for(var i=0;i<this._disabledInputs.length;i++){if(this._disabledInputs[i]==target){return true}}return false},_getInst:function(target){try{return $.data(target,PROP_NAME)}catch(err){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(target,name,value){var inst=this._getInst(target);if(arguments.length==2&&typeof name=="string"){return(name=="defaults"?$.extend({},$.datepicker._defaults):(inst?(name=="all"?$.extend({},inst.settings):this._get(inst,name)):null))}var settings=name||{};if(typeof name=="string"){settings={};settings[name]=value}if(inst){if(this._curInst==inst){this._hideDatepicker()}var date=this._getDateDatepicker(target,true);var minDate=this._getMinMaxDate(inst,"min");var maxDate=this._getMinMaxDate(inst,"max");extendRemove(inst.settings,settings);if(minDate!==null&&settings.dateFormat!==undefined&&settings.minDate===undefined){inst.settings.minDate=this._formatDate(inst,minDate)}if(maxDate!==null&&settings.dateFormat!==undefined&&settings.maxDate===undefined){inst.settings.maxDate=this._formatDate(inst,maxDate)}this._attachments($(target),inst);this._autoSize(inst);this._setDate(inst,date);this._updateAlternate(inst);this._updateDatepicker(inst)}},_changeDatepicker:function(target,name,value){this._optionDatepicker(target,name,value)},_refreshDatepicker:function(target){var inst=this._getInst(target);if(inst){this._updateDatepicker(inst)}},_setDateDatepicker:function(target,date){var inst=this._getInst(target);if(inst){this._setDate(inst,date);this._updateDatepicker(inst);this._updateAlternate(inst)}},_getDateDatepicker:function(target,noDefault){var inst=this._getInst(target);if(inst&&!inst.inline){this._setDateFromField(inst,noDefault)}return(inst?this._getDate(inst):null)},_doKeyDown:function(event){var inst=$.datepicker._getInst(event.target);var handled=true;var isRTL=inst.dpDiv.is(".ui-datepicker-rtl");inst._keyEvent=true;if($.datepicker._datepickerShowing){switch(event.keyCode){case 9:$.datepicker._hideDatepicker();handled=false;break;case 13:var sel=$("td."+$.datepicker._dayOverClass+":not(."+$.datepicker._currentClass+")",inst.dpDiv);if(sel[0]){$.datepicker._selectDay(event.target,inst.selectedMonth,inst.selectedYear,sel[0])}var onSelect=$.datepicker._get(inst,"onSelect");if(onSelect){var dateStr=$.datepicker._formatDate(inst);onSelect.apply((inst.input?inst.input[0]:null),[dateStr,inst])}else{$.datepicker._hideDatepicker()}return false;break;case 27:$.datepicker._hideDatepicker();break;case 33:$.datepicker._adjustDate(event.target,(event.ctrlKey?-$.datepicker._get(inst,"stepBigMonths"):-$.datepicker._get(inst,"stepMonths")),"M");break;case 34:$.datepicker._adjustDate(event.target,(event.ctrlKey?+$.datepicker._get(inst,"stepBigMonths"):+$.datepicker._get(inst,"stepMonths")),"M");break;case 35:if(event.ctrlKey||event.metaKey){$.datepicker._clearDate(event.target)}handled=event.ctrlKey||event.metaKey;break;case 36:if(event.ctrlKey||event.metaKey){$.datepicker._gotoToday(event.target)}handled=event.ctrlKey||event.metaKey;break;case 37:if(event.ctrlKey||event.metaKey){$.datepicker._adjustDate(event.target,(isRTL?+1:-1),"D")}handled=event.ctrlKey||event.metaKey;if(event.originalEvent.altKey){$.datepicker._adjustDate(event.target,(event.ctrlKey?-$.datepicker._get(inst,"stepBigMonths"):-$.datepicker._get(inst,"stepMonths")),"M")}break;case 38:if(event.ctrlKey||event.metaKey){$.datepicker._adjustDate(event.target,-7,"D")}handled=event.ctrlKey||event.metaKey;break;case 39:if(event.ctrlKey||event.metaKey){$.datepicker._adjustDate(event.target,(isRTL?-1:+1),"D")}handled=event.ctrlKey||event.metaKey;if(event.originalEvent.altKey){$.datepicker._adjustDate(event.target,(event.ctrlKey?+$.datepicker._get(inst,"stepBigMonths"):+$.datepicker._get(inst,"stepMonths")),"M")}break;case 40:if(event.ctrlKey||event.metaKey){$.datepicker._adjustDate(event.target,+7,"D")}handled=event.ctrlKey||event.metaKey;break;default:handled=false}}else{if(event.keyCode==36&&event.ctrlKey){$.datepicker._showDatepicker(this)}else{handled=false}}if(handled){event.preventDefault();event.stopPropagation()}},_doKeyPress:function(event){var inst=$.datepicker._getInst(event.target);if($.datepicker._get(inst,"constrainInput")){var chars=$.datepicker._possibleChars($.datepicker._get(inst,"dateFormat"));var chr=String.fromCharCode(event.charCode==undefined?event.keyCode:event.charCode);return event.ctrlKey||event.metaKey||(chr<" "||!chars||chars.indexOf(chr)>-1)}},_doKeyUp:function(event){var inst=$.datepicker._getInst(event.target);if(inst.input.val()!=inst.lastVal){try{var date=$.datepicker.parseDate($.datepicker._get(inst,"dateFormat"),(inst.input?inst.input.val():null),$.datepicker._getFormatConfig(inst));if(date){$.datepicker._setDateFromField(inst);$.datepicker._updateAlternate(inst);$.datepicker._updateDatepicker(inst)}}catch(err){$.datepicker.log(err)}}return true},_showDatepicker:function(input){input=input.target||input;if(input.nodeName.toLowerCase()!="input"){input=$("input",input.parentNode)[0]}if($.datepicker._isDisabledDatepicker(input)||$.datepicker._lastInput==input){return }var inst=$.datepicker._getInst(input);if($.datepicker._curInst&&$.datepicker._curInst!=inst){$.datepicker._curInst.dpDiv.stop(true,true);if(inst&&$.datepicker._datepickerShowing){$.datepicker._hideDatepicker($.datepicker._curInst.input[0])}}var beforeShow=$.datepicker._get(inst,"beforeShow");var beforeShowSettings=beforeShow?beforeShow.apply(input,[input,inst]):{};if(beforeShowSettings===false){return }extendRemove(inst.settings,beforeShowSettings);inst.lastVal=null;$.datepicker._lastInput=input;$.datepicker._setDateFromField(inst);if($.datepicker._inDialog){input.value=""}if(!$.datepicker._pos){$.datepicker._pos=$.datepicker._findPos(input);$.datepicker._pos[1]+=input.offsetHeight}var isFixed=false;$(input).parents().each(function(){isFixed|=$(this).css("position")=="fixed";return !isFixed});var offset={left:$.datepicker._pos[0],top:$.datepicker._pos[1]};$.datepicker._pos=null;inst.dpDiv.empty();inst.dpDiv.css({position:"absolute",display:"block",top:"-1000px"});$.datepicker._updateDatepicker(inst);offset=$.datepicker._checkOffset(inst,offset,isFixed);inst.dpDiv.css({position:($.datepicker._inDialog&&$.blockUI?"static":(isFixed?"fixed":"absolute")),display:"none",left:offset.left+"px",top:offset.top+"px"});if(!inst.inline){var showAnim=$.datepicker._get(inst,"showAnim");var duration=$.datepicker._get(inst,"duration");var postProcess=function(){var cover=inst.dpDiv.find("iframe.ui-datepicker-cover");if(!!cover.length){var borders=$.datepicker._getBorders(inst.dpDiv);cover.css({left:-borders[0],top:-borders[1],width:inst.dpDiv.outerWidth(),height:inst.dpDiv.outerHeight()})}};inst.dpDiv.zIndex($(input).zIndex()+1);$.datepicker._datepickerShowing=true;if($.effects&&($.effects.effect[showAnim]||$.effects[showAnim])){inst.dpDiv.show(showAnim,$.datepicker._get(inst,"showOptions"),duration,postProcess)}else{inst.dpDiv[showAnim||"show"]((showAnim?duration:null),postProcess)}if(!showAnim||!duration){postProcess()}if(inst.input.is(":visible")&&!inst.input.is(":disabled")){inst.input.focus()}$.datepicker._curInst=inst}},_updateDatepicker:function(inst){this.maxRows=4;var borders=$.datepicker._getBorders(inst.dpDiv);instActive=inst;inst.dpDiv.empty().append(this._generateHTML(inst));this._attachHandlers(inst);var cover=inst.dpDiv.find("iframe.ui-datepicker-cover");if(!!cover.length){cover.css({left:-borders[0],top:-borders[1],width:inst.dpDiv.outerWidth(),height:inst.dpDiv.outerHeight()})}inst.dpDiv.find("."+this._dayOverClass+" a").mouseover();var numMonths=this._getNumberOfMonths(inst);var cols=numMonths[1];var width=17;inst.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width("");if(cols>1){inst.dpDiv.addClass("ui-datepicker-multi-"+cols).css("width",(width*cols)+"em")}inst.dpDiv[(numMonths[0]!=1||numMonths[1]!=1?"add":"remove")+"Class"]("ui-datepicker-multi");inst.dpDiv[(this._get(inst,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl");if(inst==$.datepicker._curInst&&$.datepicker._datepickerShowing&&inst.input&&inst.input.is(":visible")&&!inst.input.is(":disabled")&&inst.input[0]!=document.activeElement){inst.input.focus()}if(inst.yearshtml){var origyearshtml=inst.yearshtml;setTimeout(function(){if(origyearshtml===inst.yearshtml&&inst.yearshtml){inst.dpDiv.find("select.ui-datepicker-year:first").replaceWith(inst.yearshtml)}origyearshtml=inst.yearshtml=null},0)}},_getBorders:function(elem){var convert=function(value){return{thin:1,medium:2,thick:3}[value]||value};return[parseFloat(convert(elem.css("border-left-width"))),parseFloat(convert(elem.css("border-top-width")))]},_checkOffset:function(inst,offset,isFixed){var dpWidth=inst.dpDiv.outerWidth();var dpHeight=inst.dpDiv.outerHeight();var inputWidth=inst.input?inst.input.outerWidth():0;var inputHeight=inst.input?inst.input.outerHeight():0;var viewWidth=document.documentElement.clientWidth+(isFixed?0:$(document).scrollLeft());var viewHeight=document.documentElement.clientHeight+(isFixed?0:$(document).scrollTop());offset.left-=(this._get(inst,"isRTL")?(dpWidth-inputWidth):0);offset.left-=(isFixed&&offset.left==inst.input.offset().left)?$(document).scrollLeft():0;offset.top-=(isFixed&&offset.top==(inst.input.offset().top+inputHeight))?$(document).scrollTop():0;offset.left-=Math.min(offset.left,(offset.left+dpWidth>viewWidth&&viewWidth>dpWidth)?Math.abs(offset.left+dpWidth-viewWidth):0);offset.top-=Math.min(offset.top,(offset.top+dpHeight>viewHeight&&viewHeight>dpHeight)?Math.abs(dpHeight+inputHeight):0);return offset},_findPos:function(obj){var inst=this._getInst(obj);var isRTL=this._get(inst,"isRTL");while(obj&&(obj.type=="hidden"||obj.nodeType!=1||$.expr.filters.hidden(obj))){obj=obj[isRTL?"previousSibling":"nextSibling"]}var position=$(obj).offset();return[position.left,position.top]},_hideDatepicker:function(input){var inst=this._curInst;if(!inst||(input&&inst!=$.data(input,PROP_NAME))){return }if(this._datepickerShowing){var showAnim=this._get(inst,"showAnim");var duration=this._get(inst,"duration");var postProcess=function(){$.datepicker._tidyDialog(inst)};if($.effects&&($.effects.effect[showAnim]||$.effects[showAnim])){inst.dpDiv.hide(showAnim,$.datepicker._get(inst,"showOptions"),duration,postProcess)}else{inst.dpDiv[(showAnim=="slideDown"?"slideUp":(showAnim=="fadeIn"?"fadeOut":"hide"))]((showAnim?duration:null),postProcess)}if(!showAnim){postProcess()}this._datepickerShowing=false;var onClose=this._get(inst,"onClose");if(onClose){onClose.apply((inst.input?inst.input[0]:null),[(inst.input?inst.input.val():""),inst])}this._lastInput=null;if(this._inDialog){this._dialogInput.css({position:"absolute",left:"0",top:"-100px"});if($.blockUI){$.unblockUI();$("body").append(this.dpDiv)}}this._inDialog=false}},_tidyDialog:function(inst){inst.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(event){if(!$.datepicker._curInst){return }var $target=$(event.target),inst=$.datepicker._getInst($target[0]);if((($target[0].id!=$.datepicker._mainDivId&&$target.parents("#"+$.datepicker._mainDivId).length==0&&!$target.hasClass($.datepicker.markerClassName)&&!$target.closest("."+$.datepicker._triggerClass).length&&$.datepicker._datepickerShowing&&!($.datepicker._inDialog&&$.blockUI)))||($target.hasClass($.datepicker.markerClassName)&&$.datepicker._curInst!=inst)){$.datepicker._hideDatepicker()}},_adjustDate:function(id,offset,period){var target=$(id);var inst=this._getInst(target[0]);if(this._isDisabledDatepicker(target[0])){return }this._adjustInstDate(inst,offset+(period=="M"?this._get(inst,"showCurrentAtPos"):0),period);this._updateDatepicker(inst)},_gotoToday:function(id){var target=$(id);var inst=this._getInst(target[0]);if(this._get(inst,"gotoCurrent")&&inst.currentDay){inst.selectedDay=inst.currentDay;inst.drawMonth=inst.selectedMonth=inst.currentMonth;inst.drawYear=inst.selectedYear=inst.currentYear}else{var date=new Date();inst.selectedDay=date.getDate();inst.drawMonth=inst.selectedMonth=date.getMonth();inst.drawYear=inst.selectedYear=date.getFullYear()}this._notifyChange(inst);this._adjustDate(target)},_selectMonthYear:function(id,select,period){var target=$(id);var inst=this._getInst(target[0]);inst["selected"+(period=="M"?"Month":"Year")]=inst["draw"+(period=="M"?"Month":"Year")]=parseInt(select.options[select.selectedIndex].value,10);this._notifyChange(inst);this._adjustDate(target)},_selectDay:function(id,month,year,td){var target=$(id);if($(td).hasClass(this._unselectableClass)||this._isDisabledDatepicker(target[0])){return }var inst=this._getInst(target[0]);inst.selectedDay=inst.currentDay=$("a",td).html();inst.selectedMonth=inst.currentMonth=month;inst.selectedYear=inst.currentYear=year;this._selectDate(id,this._formatDate(inst,inst.currentDay,inst.currentMonth,inst.currentYear))},_clearDate:function(id){var target=$(id);var inst=this._getInst(target[0]);this._selectDate(target,"")},_selectDate:function(id,dateStr){var target=$(id);var inst=this._getInst(target[0]);dateStr=(dateStr!=null?dateStr:this._formatDate(inst));if(inst.input){inst.input.val(dateStr)}this._updateAlternate(inst);var onSelect=this._get(inst,"onSelect");if(onSelect){onSelect.apply((inst.input?inst.input[0]:null),[dateStr,inst])}else{if(inst.input){inst.input.trigger("change")}}if(inst.inline){this._updateDatepicker(inst)}else{this._hideDatepicker();this._lastInput=inst.input[0];if(typeof (inst.input[0])!="object"){inst.input.focus()}this._lastInput=null}},_updateAlternate:function(inst){var altField=this._get(inst,"altField");if(altField){var altFormat=this._get(inst,"altFormat")||this._get(inst,"dateFormat");var date=this._getDate(inst);var dateStr=this.formatDate(altFormat,date,this._getFormatConfig(inst));$(altField).each(function(){$(this).val(dateStr)})}},noWeekends:function(date){var day=date.getDay();return[(day>0&&day<6),""]},iso8601Week:function(date){var checkDate=new Date(date.getTime());checkDate.setDate(checkDate.getDate()+4-(checkDate.getDay()||7));var time=checkDate.getTime();checkDate.setMonth(0);checkDate.setDate(1);return Math.floor(Math.round((time-checkDate)/86400000)/7)+1},parseDate:function(format,value,settings){if(format==null||value==null){throw"Invalid arguments"}value=(typeof value=="object"?value.toString():value+"");if(value==""){return null}var shortYearCutoff=(settings?settings.shortYearCutoff:null)||this._defaults.shortYearCutoff;shortYearCutoff=(typeof shortYearCutoff!="string"?shortYearCutoff:new Date().getFullYear()%100+parseInt(shortYearCutoff,10));var dayNamesShort=(settings?settings.dayNamesShort:null)||this._defaults.dayNamesShort;var dayNames=(settings?settings.dayNames:null)||this._defaults.dayNames;var monthNamesShort=(settings?settings.monthNamesShort:null)||this._defaults.monthNamesShort;var monthNames=(settings?settings.monthNames:null)||this._defaults.monthNames;var year=-1;var month=-1;var day=-1;var doy=-1;var literal=false;var lookAhead=function(match){var matches=(iFormat+1<format.length&&format.charAt(iFormat+1)==match);if(matches){iFormat++}return matches};var getNumber=function(match){var isDoubled=lookAhead(match);var size=(match=="@"?14:(match=="!"?20:(match=="y"&&isDoubled?4:(match=="o"?3:2))));var digits=new RegExp("^\\d{1,"+size+"}");var num=value.substring(iValue).match(digits);if(!num){throw"Missing number at position "+iValue}iValue+=num[0].length;return parseInt(num[0],10)};var getName=function(match,shortNames,longNames){var names=$.map(lookAhead(match)?longNames:shortNames,function(v,k){return[[k,v]]}).sort(function(a,b){return -(a[1].length-b[1].length)});var index=-1;$.each(names,function(i,pair){var name=pair[1];if(value.substr(iValue,name.length).toLowerCase()==name.toLowerCase()){index=pair[0];iValue+=name.length;return false}});if(index!=-1){return index+1}else{throw"Unknown name at position "+iValue}};var checkLiteral=function(){if(value.charAt(iValue)!=format.charAt(iFormat)){throw"Unexpected literal at position "+iValue}iValue++};var iValue=0;for(var iFormat=0;iFormat<format.length;iFormat++){if(literal){if(format.charAt(iFormat)=="'"&&!lookAhead("'")){literal=false}else{checkLiteral()}}else{switch(format.charAt(iFormat)){case"d":day=getNumber("d");break;case"D":getName("D",dayNamesShort,dayNames);break;case"o":doy=getNumber("o");break;case"m":month=getNumber("m");break;case"M":month=getName("M",monthNamesShort,monthNames);break;case"y":year=getNumber("y");break;case"@":var date=new Date(getNumber("@"));year=date.getFullYear();month=date.getMonth()+1;day=date.getDate();break;case"!":var date=new Date((getNumber("!")-this._ticksTo1970)/10000);year=date.getFullYear();month=date.getMonth()+1;day=date.getDate();break;case"'":if(lookAhead("'")){checkLiteral()}else{literal=true}break;default:checkLiteral()}}}if(iValue<value.length){var extra=value.substr(iValue);if(!/^\s+/.test(extra)){throw"Extra/unparsed characters found in date: "+extra}}if(year==-1){year=new Date().getFullYear()}else{if(year<100){year+=new Date().getFullYear()-new Date().getFullYear()%100+(year<=shortYearCutoff?0:-100)}}if(doy>-1){month=1;day=doy;do{var dim=this._getDaysInMonth(year,month-1);if(day<=dim){break}month++;day-=dim}while(true)}var date=this._daylightSavingAdjust(new Date(year,month-1,day));if(date.getFullYear()!=year||date.getMonth()+1!=month||date.getDate()!=day){throw"Invalid date"}return date},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:(((1970-1)*365+Math.floor(1970/4)-Math.floor(1970/100)+Math.floor(1970/400))*24*60*60*10000000),formatDate:function(format,date,settings){if(!date){return""}var dayNamesShort=(settings?settings.dayNamesShort:null)||this._defaults.dayNamesShort;var dayNames=(settings?settings.dayNames:null)||this._defaults.dayNames;var monthNamesShort=(settings?settings.monthNamesShort:null)||this._defaults.monthNamesShort;var monthNames=(settings?settings.monthNames:null)||this._defaults.monthNames;var lookAhead=function(match){var matches=(iFormat+1<format.length&&format.charAt(iFormat+1)==match);if(matches){iFormat++}return matches};var formatNumber=function(match,value,len){var num=""+value;if(lookAhead(match)){while(num.length<len){num="0"+num}}return num};var formatName=function(match,value,shortNames,longNames){return(lookAhead(match)?longNames[value]:shortNames[value])};var output="";var literal=false;if(date){for(var iFormat=0;iFormat<format.length;iFormat++){if(literal){if(format.charAt(iFormat)=="'"&&!lookAhead("'")){literal=false}else{output+=format.charAt(iFormat)}}else{switch(format.charAt(iFormat)){case"d":output+=formatNumber("d",date.getDate(),2);break;case"D":output+=formatName("D",date.getDay(),dayNamesShort,dayNames);break;case"o":output+=formatNumber("o",Math.round((new Date(date.getFullYear(),date.getMonth(),date.getDate()).getTime()-new Date(date.getFullYear(),0,0).getTime())/86400000),3);break;case"m":output+=formatNumber("m",date.getMonth()+1,2);break;case"M":output+=formatName("M",date.getMonth(),monthNamesShort,monthNames);break;case"y":output+=(lookAhead("y")?date.getFullYear():(date.getYear()%100<10?"0":"")+date.getYear()%100);break;case"@":output+=date.getTime();break;case"!":output+=date.getTime()*10000+this._ticksTo1970;break;case"'":if(lookAhead("'")){output+="'"}else{literal=true}break;default:output+=format.charAt(iFormat)}}}}return output},_possibleChars:function(format){var chars="";var literal=false;var lookAhead=function(match){var matches=(iFormat+1<format.length&&format.charAt(iFormat+1)==match);if(matches){iFormat++}return matches};for(var iFormat=0;iFormat<format.length;iFormat++){if(literal){if(format.charAt(iFormat)=="'"&&!lookAhead("'")){literal=false}else{chars+=format.charAt(iFormat)}}else{switch(format.charAt(iFormat)){case"d":case"m":case"y":case"@":chars+="0123456789";break;case"D":case"M":return null;case"'":if(lookAhead("'")){chars+="'"}else{literal=true}break;default:chars+=format.charAt(iFormat)}}}return chars},_get:function(inst,name){return inst.settings[name]!==undefined?inst.settings[name]:this._defaults[name]},_setDateFromField:function(inst,noDefault){if(inst.input.val()==inst.lastVal){return }var dateFormat=this._get(inst,"dateFormat");var dates=inst.lastVal=inst.input?inst.input.val():null;var date,defaultDate;date=defaultDate=this._getDefaultDate(inst);var settings=this._getFormatConfig(inst);try{date=this.parseDate(dateFormat,dates,settings)||defaultDate}catch(event){this.log(event);dates=(noDefault?"":dates)}inst.selectedDay=date.getDate();inst.drawMonth=inst.selectedMonth=date.getMonth();inst.drawYear=inst.selectedYear=date.getFullYear();inst.currentDay=(dates?date.getDate():0);inst.currentMonth=(dates?date.getMonth():0);inst.currentYear=(dates?date.getFullYear():0);this._adjustInstDate(inst)},_getDefaultDate:function(inst){return this._restrictMinMax(inst,this._determineDate(inst,this._get(inst,"defaultDate"),new Date()))},_determineDate:function(inst,date,defaultDate){var offsetNumeric=function(offset){var date=new Date();date.setDate(date.getDate()+offset);return date};var offsetString=function(offset){try{return $.datepicker.parseDate($.datepicker._get(inst,"dateFormat"),offset,$.datepicker._getFormatConfig(inst))}catch(e){}var date=(offset.toLowerCase().match(/^c/)?$.datepicker._getDate(inst):null)||new Date();var year=date.getFullYear();var month=date.getMonth();var day=date.getDate();var pattern=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g;var matches=pattern.exec(offset);while(matches){switch(matches[2]||"d"){case"d":case"D":day+=parseInt(matches[1],10);break;case"w":case"W":day+=parseInt(matches[1],10)*7;break;case"m":case"M":month+=parseInt(matches[1],10);day=Math.min(day,$.datepicker._getDaysInMonth(year,month));break;case"y":case"Y":year+=parseInt(matches[1],10);day=Math.min(day,$.datepicker._getDaysInMonth(year,month));break}matches=pattern.exec(offset)}return new Date(year,month,day)};var newDate=(date==null||date===""?defaultDate:(typeof date=="string"?offsetString(date):(typeof date=="number"?(isNaN(date)?defaultDate:offsetNumeric(date)):new Date(date.getTime()))));newDate=(newDate&&newDate.toString()=="Invalid Date"?defaultDate:newDate);if(newDate){newDate.setHours(0);newDate.setMinutes(0);newDate.setSeconds(0);newDate.setMilliseconds(0)}return this._daylightSavingAdjust(newDate)},_daylightSavingAdjust:function(date){if(!date){return null}date.setHours(date.getHours()>12?date.getHours()+2:0);return date},_setDate:function(inst,date,noChange){var clear=!date;var origMonth=inst.selectedMonth;var origYear=inst.selectedYear;var newDate=this._restrictMinMax(inst,this._determineDate(inst,date,new Date()));inst.selectedDay=inst.currentDay=newDate.getDate();inst.drawMonth=inst.selectedMonth=inst.currentMonth=newDate.getMonth();inst.drawYear=inst.selectedYear=inst.currentYear=newDate.getFullYear();if((origMonth!=inst.selectedMonth||origYear!=inst.selectedYear)&&!noChange){this._notifyChange(inst)}this._adjustInstDate(inst);if(inst.input){inst.input.val(clear?"":this._formatDate(inst))}},_getDate:function(inst){var startDate=(!inst.currentYear||(inst.input&&inst.input.val()=="")?null:this._daylightSavingAdjust(new Date(inst.currentYear,inst.currentMonth,inst.currentDay)));return startDate},_attachHandlers:function(inst){var stepMonths=this._get(inst,"stepMonths");var id="#"+inst.id.replace(/\\\\/g,"\\");inst.dpDiv.find("[data-handler]").map(function(){var handler={prev:function(){window["DP_jQuery_"+dpuuid].datepicker._adjustDate(id,-stepMonths,"M")},next:function(){window["DP_jQuery_"+dpuuid].datepicker._adjustDate(id,+stepMonths,"M")},hide:function(){window["DP_jQuery_"+dpuuid].datepicker._hideDatepicker()},today:function(){window["DP_jQuery_"+dpuuid].datepicker._gotoToday(id)},selectDay:function(){window["DP_jQuery_"+dpuuid].datepicker._selectDay(id,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this);return false},selectMonth:function(){window["DP_jQuery_"+dpuuid].datepicker._selectMonthYear(id,this,"M");return false},selectYear:function(){window["DP_jQuery_"+dpuuid].datepicker._selectMonthYear(id,this,"Y");return false}};$(this).bind(this.getAttribute("data-event"),handler[this.getAttribute("data-handler")])})},_generateHTML:function(inst){var today=new Date();today=this._daylightSavingAdjust(new Date(today.getFullYear(),today.getMonth(),today.getDate()));var isRTL=this._get(inst,"isRTL");var showButtonPanel=this._get(inst,"showButtonPanel");var hideIfNoPrevNext=this._get(inst,"hideIfNoPrevNext");var navigationAsDateFormat=this._get(inst,"navigationAsDateFormat");var numMonths=this._getNumberOfMonths(inst);var showCurrentAtPos=this._get(inst,"showCurrentAtPos");var stepMonths=this._get(inst,"stepMonths");var isMultiMonth=(numMonths[0]!=1||numMonths[1]!=1);var currentDate=this._daylightSavingAdjust((!inst.currentDay?new Date(9999,9,9):new Date(inst.currentYear,inst.currentMonth,inst.currentDay)));var minDate=this._getMinMaxDate(inst,"min");var maxDate=this._getMinMaxDate(inst,"max");var drawMonth=inst.drawMonth-showCurrentAtPos;var drawYear=inst.drawYear;if(drawMonth<0){drawMonth+=12;drawYear--}if(maxDate){var maxDraw=this._daylightSavingAdjust(new Date(maxDate.getFullYear(),maxDate.getMonth()-(numMonths[0]*numMonths[1])+1,maxDate.getDate()));maxDraw=(minDate&&maxDraw<minDate?minDate:maxDraw);while(this._daylightSavingAdjust(new Date(drawYear,drawMonth,1))>maxDraw){drawMonth--;if(drawMonth<0){drawMonth=11;drawYear--}}}inst.drawMonth=drawMonth;inst.drawYear=drawYear;var prevText=this._get(inst,"prevText");prevText=(!navigationAsDateFormat?prevText:this.formatDate(prevText,this._daylightSavingAdjust(new Date(drawYear,drawMonth-stepMonths,1)),this._getFormatConfig(inst)));var prev=(this._canAdjustMonth(inst,-1,drawYear,drawMonth)?'<a class="ui-datepicker-prev ui-corner-all" data-handler="prev" data-event="click" title="'+prevText+'"><span class="ui-icon ui-icon-circle-triangle-'+(isRTL?"e":"w")+'">'+prevText+"</span></a>":(hideIfNoPrevNext?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+prevText+'"><span class="ui-icon ui-icon-circle-triangle-'+(isRTL?"e":"w")+'">'+prevText+"</span></a>"));var nextText=this._get(inst,"nextText");nextText=(!navigationAsDateFormat?nextText:this.formatDate(nextText,this._daylightSavingAdjust(new Date(drawYear,drawMonth+stepMonths,1)),this._getFormatConfig(inst)));var next=(this._canAdjustMonth(inst,+1,drawYear,drawMonth)?'<a class="ui-datepicker-next ui-corner-all" data-handler="next" data-event="click" title="'+nextText+'"><span class="ui-icon ui-icon-circle-triangle-'+(isRTL?"w":"e")+'">'+nextText+"</span></a>":(hideIfNoPrevNext?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+nextText+'"><span class="ui-icon ui-icon-circle-triangle-'+(isRTL?"w":"e")+'">'+nextText+"</span></a>"));var currentText=this._get(inst,"currentText");var gotoDate=(this._get(inst,"gotoCurrent")&&inst.currentDay?currentDate:today);currentText=(!navigationAsDateFormat?currentText:this.formatDate(currentText,gotoDate,this._getFormatConfig(inst)));var controls=(!inst.inline?'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" data-handler="hide" data-event="click">'+this._get(inst,"closeText")+"</button>":"");var buttonPanel=(showButtonPanel)?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(isRTL?controls:"")+(this._isInRange(inst,gotoDate)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" data-handler="today" data-event="click">'+currentText+"</button>":"")+(isRTL?"":controls)+"</div>":"";var firstDay=parseInt(this._get(inst,"firstDay"),10);firstDay=(isNaN(firstDay)?0:firstDay);var showWeek=this._get(inst,"showWeek");var dayNames=this._get(inst,"dayNames");var dayNamesShort=this._get(inst,"dayNamesShort");var dayNamesMin=this._get(inst,"dayNamesMin");var monthNames=this._get(inst,"monthNames");var monthNamesShort=this._get(inst,"monthNamesShort");var beforeShowDay=this._get(inst,"beforeShowDay");var showOtherMonths=this._get(inst,"showOtherMonths");var selectOtherMonths=this._get(inst,"selectOtherMonths");var calculateWeek=this._get(inst,"calculateWeek")||this.iso8601Week;var defaultDate=this._getDefaultDate(inst);var html="";for(var row=0;row<numMonths[0];row++){var group="";this.maxRows=4;for(var col=0;col<numMonths[1];col++){var selectedDate=this._daylightSavingAdjust(new Date(drawYear,drawMonth,inst.selectedDay));var cornerClass=" ui-corner-all";var calender="";if(isMultiMonth){calender+='<div class="ui-datepicker-group';if(numMonths[1]>1){switch(col){case 0:calender+=" ui-datepicker-group-first";cornerClass=" ui-corner-"+(isRTL?"right":"left");break;case numMonths[1]-1:calender+=" ui-datepicker-group-last";cornerClass=" ui-corner-"+(isRTL?"left":"right");break;default:calender+=" ui-datepicker-group-middle";cornerClass="";break}}calender+='">'}calender+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+cornerClass+'">'+(/all|left/.test(cornerClass)&&row==0?(isRTL?next:prev):"")+(/all|right/.test(cornerClass)&&row==0?(isRTL?prev:next):"")+this._generateMonthYearHeader(inst,drawMonth,drawYear,minDate,maxDate,row>0||col>0,monthNames,monthNamesShort)+'</div><table class="ui-datepicker-calendar"><thead><tr>';var thead=(showWeek?'<th class="ui-datepicker-week-col">'+this._get(inst,"weekHeader")+"</th>":"");for(var dow=0;dow<7;dow++){var day=(dow+firstDay)%7;thead+="<th"+((dow+firstDay+6)%7>=5?' class="ui-datepicker-week-end"':"")+'><span title="'+dayNames[day]+'">'+dayNamesMin[day]+"</span></th>"}calender+=thead+"</tr></thead><tbody>";var daysInMonth=this._getDaysInMonth(drawYear,drawMonth);if(drawYear==inst.selectedYear&&drawMonth==inst.selectedMonth){inst.selectedDay=Math.min(inst.selectedDay,daysInMonth)}var leadDays=(this._getFirstDayOfMonth(drawYear,drawMonth)-firstDay+7)%7;var curRows=Math.ceil((leadDays+daysInMonth)/7);var numRows=(isMultiMonth?this.maxRows>curRows?this.maxRows:curRows:curRows);this.maxRows=numRows;var printDate=this._daylightSavingAdjust(new Date(drawYear,drawMonth,1-leadDays));for(var dRow=0;dRow<numRows;dRow++){calender+="<tr>";var tbody=(!showWeek?"":'<td class="ui-datepicker-week-col">'+this._get(inst,"calculateWeek")(printDate)+"</td>");for(var dow=0;dow<7;dow++){var daySettings=(beforeShowDay?beforeShowDay.apply((inst.input?inst.input[0]:null),[printDate]):[true,""]);var otherMonth=(printDate.getMonth()!=drawMonth);var unselectable=(otherMonth&&!selectOtherMonths)||!daySettings[0]||(minDate&&printDate<minDate)||(maxDate&&printDate>maxDate);tbody+='<td class="'+((dow+firstDay+6)%7>=5?" ui-datepicker-week-end":"")+(otherMonth?" ui-datepicker-other-month":"")+((printDate.getTime()==selectedDate.getTime()&&drawMonth==inst.selectedMonth&&inst._keyEvent)||(defaultDate.getTime()==printDate.getTime()&&defaultDate.getTime()==selectedDate.getTime())?" "+this._dayOverClass:"")+(unselectable?" "+this._unselectableClass+" ui-state-disabled":"")+(otherMonth&&!showOtherMonths?"":" "+daySettings[1]+(printDate.getTime()==currentDate.getTime()?" "+this._currentClass:"")+(printDate.getTime()==today.getTime()?" ui-datepicker-today":""))+'"'+((!otherMonth||showOtherMonths)&&daySettings[2]?' title="'+daySettings[2]+'"':"")+(unselectable?"":' data-handler="selectDay" data-event="click" data-month="'+printDate.getMonth()+'" data-year="'+printDate.getFullYear()+'"')+">"+(otherMonth&&!showOtherMonths?"&#xa0;":(unselectable?'<span class="ui-state-default">'+printDate.getDate()+"</span>":'<a class="ui-state-default'+(printDate.getTime()==today.getTime()?" ui-state-highlight":"")+(printDate.getTime()==currentDate.getTime()?" ui-state-active":"")+(otherMonth?" ui-priority-secondary":"")+'" href="#">'+printDate.getDate()+"</a>"))+"</td>";printDate.setDate(printDate.getDate()+1);printDate=this._daylightSavingAdjust(printDate)}calender+=tbody+"</tr>"}drawMonth++;if(drawMonth>11){drawMonth=0;drawYear++}calender+="</tbody></table>"+(isMultiMonth?"</div>"+((numMonths[0]>0&&col==numMonths[1]-1)?'<div class="ui-datepicker-row-break"></div>':""):"");group+=calender}html+=group}html+=buttonPanel+($.ui.ie6&&!inst.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':"");inst._keyEvent=false;return html},_generateMonthYearHeader:function(inst,drawMonth,drawYear,minDate,maxDate,secondary,monthNames,monthNamesShort){var changeMonth=this._get(inst,"changeMonth");var changeYear=this._get(inst,"changeYear");var showMonthAfterYear=this._get(inst,"showMonthAfterYear");var html='<div class="ui-datepicker-title">';var monthHtml="";if(secondary||!changeMonth){monthHtml+='<span class="ui-datepicker-month">'+monthNames[drawMonth]+"</span>"}else{var inMinYear=(minDate&&minDate.getFullYear()==drawYear);var inMaxYear=(maxDate&&maxDate.getFullYear()==drawYear);monthHtml+='<select class="ui-datepicker-month" data-handler="selectMonth" data-event="change">';for(var month=0;month<12;month++){if((!inMinYear||month>=minDate.getMonth())&&(!inMaxYear||month<=maxDate.getMonth())){monthHtml+='<option value="'+month+'"'+(month==drawMonth?' selected="selected"':"")+">"+monthNamesShort[month]+"</option>"}}monthHtml+="</select>"}if(!showMonthAfterYear){html+=monthHtml+(secondary||!(changeMonth&&changeYear)?"&#xa0;":"")}if(!inst.yearshtml){inst.yearshtml="";if(secondary||!changeYear){html+='<span class="ui-datepicker-year">'+drawYear+"</span>"}else{var years=this._get(inst,"yearRange").split(":");var thisYear=new Date().getFullYear();var determineYear=function(value){var year=(value.match(/c[+-].*/)?drawYear+parseInt(value.substring(1),10):(value.match(/[+-].*/)?thisYear+parseInt(value,10):parseInt(value,10)));return(isNaN(year)?thisYear:year)};var year=determineYear(years[0]);var endYear=Math.max(year,determineYear(years[1]||""));year=(minDate?Math.max(year,minDate.getFullYear()):year);endYear=(maxDate?Math.min(endYear,maxDate.getFullYear()):endYear);inst.yearshtml+='<select class="ui-datepicker-year" data-handler="selectYear" data-event="change">';for(;year<=endYear;year++){inst.yearshtml+='<option value="'+year+'"'+(year==drawYear?' selected="selected"':"")+">"+year+"</option>"}inst.yearshtml+="</select>";html+=inst.yearshtml;inst.yearshtml=null}}html+=this._get(inst,"yearSuffix");if(showMonthAfterYear){html+=(secondary||!(changeMonth&&changeYear)?"&#xa0;":"")+monthHtml}html+="</div>";return html},_adjustInstDate:function(inst,offset,period){var year=inst.drawYear+(period=="Y"?offset:0);var month=inst.drawMonth+(period=="M"?offset:0);var day=Math.min(inst.selectedDay,this._getDaysInMonth(year,month))+(period=="D"?offset:0);var date=this._restrictMinMax(inst,this._daylightSavingAdjust(new Date(year,month,day)));inst.selectedDay=date.getDate();inst.drawMonth=inst.selectedMonth=date.getMonth();inst.drawYear=inst.selectedYear=date.getFullYear();if(period=="M"||period=="Y"){this._notifyChange(inst)}},_restrictMinMax:function(inst,date){var minDate=this._getMinMaxDate(inst,"min");var maxDate=this._getMinMaxDate(inst,"max");var newDate=(minDate&&date<minDate?minDate:date);newDate=(maxDate&&newDate>maxDate?maxDate:newDate);return newDate},_notifyChange:function(inst){var onChange=this._get(inst,"onChangeMonthYear");if(onChange){onChange.apply((inst.input?inst.input[0]:null),[inst.selectedYear,inst.selectedMonth+1,inst])}},_getNumberOfMonths:function(inst){var numMonths=this._get(inst,"numberOfMonths");return(numMonths==null?[1,1]:(typeof numMonths=="number"?[1,numMonths]:numMonths))},_getMinMaxDate:function(inst,minMax){return this._determineDate(inst,this._get(inst,minMax+"Date"),null)},_getDaysInMonth:function(year,month){return 32-this._daylightSavingAdjust(new Date(year,month,32)).getDate()},_getFirstDayOfMonth:function(year,month){return new Date(year,month,1).getDay()},_canAdjustMonth:function(inst,offset,curYear,curMonth){var numMonths=this._getNumberOfMonths(inst);var date=this._daylightSavingAdjust(new Date(curYear,curMonth+(offset<0?offset:numMonths[0]*numMonths[1]),1));if(offset<0){date.setDate(this._getDaysInMonth(date.getFullYear(),date.getMonth()))}return this._isInRange(inst,date)},_isInRange:function(inst,date){var minDate=this._getMinMaxDate(inst,"min");var maxDate=this._getMinMaxDate(inst,"max");return((!minDate||date.getTime()>=minDate.getTime())&&(!maxDate||date.getTime()<=maxDate.getTime()))},_getFormatConfig:function(inst){var shortYearCutoff=this._get(inst,"shortYearCutoff");shortYearCutoff=(typeof shortYearCutoff!="string"?shortYearCutoff:new Date().getFullYear()%100+parseInt(shortYearCutoff,10));return{shortYearCutoff:shortYearCutoff,dayNamesShort:this._get(inst,"dayNamesShort"),dayNames:this._get(inst,"dayNames"),monthNamesShort:this._get(inst,"monthNamesShort"),monthNames:this._get(inst,"monthNames")}},_formatDate:function(inst,day,month,year){if(!day){inst.currentDay=inst.selectedDay;inst.currentMonth=inst.selectedMonth;inst.currentYear=inst.selectedYear}var date=(day?(typeof day=="object"?day:this._daylightSavingAdjust(new Date(year,month,day))):this._daylightSavingAdjust(new Date(inst.currentYear,inst.currentMonth,inst.currentDay)));return this.formatDate(this._get(inst,"dateFormat"),date,this._getFormatConfig(inst))}});function bindHover(dpDiv){var selector="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return dpDiv.delegate(selector,"mouseout",function(){$(this).removeClass("ui-state-hover");if(this.className.indexOf("ui-datepicker-prev")!=-1){$(this).removeClass("ui-datepicker-prev-hover")}if(this.className.indexOf("ui-datepicker-next")!=-1){$(this).removeClass("ui-datepicker-next-hover")}}).delegate(selector,"mouseover",function(){if(!$.datepicker._isDisabledDatepicker(instActive.inline?dpDiv.parent()[0]:instActive.input[0])){$(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover");$(this).addClass("ui-state-hover");if(this.className.indexOf("ui-datepicker-prev")!=-1){$(this).addClass("ui-datepicker-prev-hover")}if(this.className.indexOf("ui-datepicker-next")!=-1){$(this).addClass("ui-datepicker-next-hover")}}})}function extendRemove(target,props){$.extend(target,props);for(var name in props){if(props[name]==null||props[name]==undefined){target[name]=props[name]}}return target}$.fn.datepicker=function(options){if(!this.length){return this}if(!$.datepicker.initialized){$(document).mousedown($.datepicker._checkExternalClick).find(document.body).append($.datepicker.dpDiv);$.datepicker.initialized=true}var otherArgs=Array.prototype.slice.call(arguments,1);if(typeof options=="string"&&(options=="isDisabled"||options=="getDate"||options=="widget")){return $.datepicker["_"+options+"Datepicker"].apply($.datepicker,[this[0]].concat(otherArgs))}if(options=="option"&&arguments.length==2&&typeof arguments[1]=="string"){return $.datepicker["_"+options+"Datepicker"].apply($.datepicker,[this[0]].concat(otherArgs))}return this.each(function(){typeof options=="string"?$.datepicker["_"+options+"Datepicker"].apply($.datepicker,[this].concat(otherArgs)):$.datepicker._attachDatepicker(this,options)})};$.datepicker=new Datepicker();$.datepicker.initialized=false;$.datepicker.uuid=new Date().getTime();$.datepicker.version="1.9.2";window["DP_jQuery_"+dpuuid]=$})(jQuery);(function(D,E){var B="ui-dialog ui-widget ui-widget-content ui-corner-all ",A={buttons:true,height:true,maxHeight:true,maxWidth:true,minHeight:true,minWidth:true,width:true},C={maxHeight:true,maxWidth:true,minHeight:true,minWidth:true};D.widget("ui.dialog",{version:"1.9.2",options:{autoOpen:true,buttons:{},closeOnEscape:true,closeText:"close",dialogClass:"",draggable:true,hide:null,height:"auto",maxHeight:false,maxWidth:false,minHeight:150,minWidth:150,modal:false,position:{my:"center",at:"center",of:window,collision:"fit",using:function(G){var F=D(this).css(G).offset().top;if(F<0){D(this).css("top",G.top-F)}}},resizable:true,show:null,stack:true,title:"",width:300,zIndex:1000},_create:function(){this.originalTitle=this.element.attr("title");if(typeof this.originalTitle!=="string"){this.originalTitle=""}this.oldPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)};this.options.title=this.options.title||this.originalTitle;var K=this,J=this.options,M=J.title||"&#160;",H,L,F,I,G;H=(this.uiDialog=D("<div>")).addClass(B+J.dialogClass).css({display:"none",outline:0,zIndex:J.zIndex}).attr("tabIndex",-1).keydown(function(N){if(J.closeOnEscape&&!N.isDefaultPrevented()&&N.keyCode&&N.keyCode===D.ui.keyCode.ESCAPE){K.close(N);N.preventDefault()}}).mousedown(function(N){K.moveToTop(false,N)}).appendTo("body");this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(H);L=(this.uiDialogTitlebar=D("<div>")).addClass("ui-dialog-titlebar  ui-widget-header  ui-corner-all  ui-helper-clearfix").bind("mousedown",function(){H.focus()}).prependTo(H);F=D("<a href='#'></a>").addClass("ui-dialog-titlebar-close  ui-corner-all").attr("role","button").click(function(N){N.preventDefault();K.close(N)}).appendTo(L);(this.uiDialogTitlebarCloseText=D("<span>")).addClass("ui-icon ui-icon-closethick").text(J.closeText).appendTo(F);I=D("<span>").uniqueId().addClass("ui-dialog-title").html(M).prependTo(L);G=(this.uiDialogButtonPane=D("<div>")).addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix");(this.uiButtonSet=D("<div>")).addClass("ui-dialog-buttonset").appendTo(G);H.attr({role:"dialog","aria-labelledby":I.attr("id")});L.find("*").add(L).disableSelection();this._hoverable(F);this._focusable(F);if(J.draggable&&D.fn.draggable){this._makeDraggable()}if(J.resizable&&D.fn.resizable){this._makeResizable()}this._createButtons(J.buttons);this._isOpen=false;if(D.fn.bgiframe){H.bgiframe()}this._on(H,{keydown:function(P){if(!J.modal||P.keyCode!==D.ui.keyCode.TAB){return }var O=D(":tabbable",H),Q=O.filter(":first"),N=O.filter(":last");if(P.target===N[0]&&!P.shiftKey){Q.focus(1);return false}else{if(P.target===Q[0]&&P.shiftKey){N.focus(1);return false}}}})},_init:function(){if(this.options.autoOpen){this.open()}},_destroy:function(){var G,F=this.oldPosition;if(this.overlay){this.overlay.destroy()}this.uiDialog.hide();this.element.removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body");this.uiDialog.remove();if(this.originalTitle){this.element.attr("title",this.originalTitle)}G=F.parent.children().eq(F.index);if(G.length&&G[0]!==this.element[0]){G.before(this.element)}else{F.parent.append(this.element)}},widget:function(){return this.uiDialog},close:function(I){var H=this,G,F;if(!this._isOpen){return }if(false===this._trigger("beforeClose",I)){return }this._isOpen=false;if(this.overlay){this.overlay.destroy()}if(this.options.hide){this._hide(this.uiDialog,this.options.hide,function(){H._trigger("close",I)})}else{this.uiDialog.hide();this._trigger("close",I)}D.ui.dialog.overlay.resize();if(this.options.modal){G=0;D(".ui-dialog").each(function(){if(this!==H.uiDialog[0]){F=D(this).css("z-index");if(!isNaN(F)){G=Math.max(G,F)}}});D.ui.dialog.maxZ=G}return this},isOpen:function(){return this._isOpen},moveToTop:function(I,H){var G=this.options,F;if((G.modal&&!I)||(!G.stack&&!G.modal)){return this._trigger("focus",H)}if(G.zIndex>D.ui.dialog.maxZ){D.ui.dialog.maxZ=G.zIndex}if(this.overlay){D.ui.dialog.maxZ+=1;D.ui.dialog.overlay.maxZ=D.ui.dialog.maxZ;this.overlay.$el.css("z-index",D.ui.dialog.overlay.maxZ)}F={scrollTop:this.element.scrollTop(),scrollLeft:this.element.scrollLeft()};D.ui.dialog.maxZ+=1;this.uiDialog.css("z-index",D.ui.dialog.maxZ);this.element.attr(F);this._trigger("focus",H);return this},open:function(){if(this._isOpen){return }var H,G=this.options,F=this.uiDialog;this._size();this._position(G.position);F.show(G.show);this.overlay=G.modal?new D.ui.dialog.overlay(this):null;this.moveToTop(true);H=this.element.find(":tabbable");if(!H.length){H=this.uiDialogButtonPane.find(":tabbable");if(!H.length){H=F}}H.eq(0).focus();this._isOpen=true;this._trigger("open");return this},_createButtons:function(H){var G=this,F=false;this.uiDialogButtonPane.remove();this.uiButtonSet.empty();if(typeof H==="object"&&H!==null){D.each(H,function(){return !(F=true)})}if(F){D.each(H,function(I,K){var J,L;K=D.isFunction(K)?{click:K,text:I}:K;K=D.extend({type:"button"},K);L=K.click;K.click=function(){L.apply(G.element[0],arguments)};J=D("<button></button>",K).appendTo(G.uiButtonSet);if(D.fn.button){J.button()}});this.uiDialog.addClass("ui-dialog-buttons");this.uiDialogButtonPane.appendTo(this.uiDialog)}else{this.uiDialog.removeClass("ui-dialog-buttons")}},_makeDraggable:function(){var H=this,G=this.options;function F(I){return{position:I.position,offset:I.offset}}this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(I,J){D(this).addClass("ui-dialog-dragging");H._trigger("dragStart",I,F(J))},drag:function(I,J){H._trigger("drag",I,F(J))},stop:function(I,J){G.position=[J.position.left-H.document.scrollLeft(),J.position.top-H.document.scrollTop()];D(this).removeClass("ui-dialog-dragging");H._trigger("dragStop",I,F(J));D.ui.dialog.overlay.resize()}})},_makeResizable:function(J){J=(J===E?this.options.resizable:J);var K=this,I=this.options,F=this.uiDialog.css("position"),H=typeof J==="string"?J:"n,e,s,w,se,sw,ne,nw";function G(L){return{originalPosition:L.originalPosition,originalSize:L.originalSize,position:L.position,size:L.size}}this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:I.maxWidth,maxHeight:I.maxHeight,minWidth:I.minWidth,minHeight:this._minHeight(),handles:H,start:function(L,M){D(this).addClass("ui-dialog-resizing");K._trigger("resizeStart",L,G(M))},resize:function(L,M){K._trigger("resize",L,G(M))},stop:function(L,M){D(this).removeClass("ui-dialog-resizing");I.height=D(this).height();I.width=D(this).width();K._trigger("resizeStop",L,G(M));D.ui.dialog.overlay.resize()}}).css("position",F).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var F=this.options;if(F.height==="auto"){return F.minHeight}else{return Math.min(F.minHeight,F.height)}},_position:function(G){var H=[],I=[0,0],F;if(G){if(typeof G==="string"||(typeof G==="object"&&"0" in G)){H=G.split?G.split(" "):[G[0],G[1]];if(H.length===1){H[1]=H[0]}D.each(["left","top"],function(K,J){if(+H[K]===H[K]){I[K]=H[K];H[K]=J}});G={my:H[0]+(I[0]<0?I[0]:"+"+I[0])+" "+H[1]+(I[1]<0?I[1]:"+"+I[1]),at:H.join(" ")}}G=D.extend({},D.ui.dialog.prototype.options.position,G)}else{G=D.ui.dialog.prototype.options.position}F=this.uiDialog.is(":visible");if(!F){this.uiDialog.show()}this.uiDialog.position(G);if(!F){this.uiDialog.hide()}},_setOptions:function(H){var I=this,F={},G=false;D.each(H,function(J,K){I._setOption(J,K);if(J in A){G=true}if(J in C){F[J]=K}});if(G){this._size()}if(this.uiDialog.is(":data(resizable)")){this.uiDialog.resizable("option",F)}},_setOption:function(H,I){var G,J,F=this.uiDialog;switch(H){case"buttons":this._createButtons(I);break;case"closeText":this.uiDialogTitlebarCloseText.text(""+I);break;case"dialogClass":F.removeClass(this.options.dialogClass).addClass(B+I);break;case"disabled":if(I){F.addClass("ui-dialog-disabled")}else{F.removeClass("ui-dialog-disabled")}break;case"draggable":G=F.is(":data(draggable)");if(G&&!I){F.draggable("destroy")}if(!G&&I){this._makeDraggable()}break;case"position":this._position(I);break;case"resizable":J=F.is(":data(resizable)");if(J&&!I){F.resizable("destroy")}if(J&&typeof I==="string"){F.resizable("option","handles",I)}if(!J&&I!==false){this._makeResizable(I)}break;case"title":D(".ui-dialog-title",this.uiDialogTitlebar).html(""+(I||"&#160;"));break}this._super(H,I)},_size:function(){var G,J,I,H=this.options,F=this.uiDialog.is(":visible");this.element.show().css({width:"auto",minHeight:0,height:0});if(H.minWidth>H.width){H.width=H.minWidth}G=this.uiDialog.css({height:"auto",width:H.width}).outerHeight();J=Math.max(0,H.minHeight-G);if(H.height==="auto"){if(D.support.minHeight){this.element.css({minHeight:J,height:"auto"})}else{this.uiDialog.show();I=this.element.css("height","auto").height();if(!F){this.uiDialog.hide()}this.element.height(Math.max(I,J))}}else{this.element.height(Math.max(H.height-G,0))}if(this.uiDialog.is(":data(resizable)")){this.uiDialog.resizable("option","minHeight",this._minHeight())}}});D.extend(D.ui.dialog,{uuid:0,maxZ:0,getTitleId:function(F){var G=F.attr("id");if(!G){this.uuid+=1;G=this.uuid}return"ui-dialog-title-"+G},overlay:function(F){this.$el=D.ui.dialog.overlay.create(F)}});D.extend(D.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:D.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(F){return F+".dialog-overlay"}).join(" "),create:function(G){if(this.instances.length===0){setTimeout(function(){if(D.ui.dialog.overlay.instances.length){D(document).bind(D.ui.dialog.overlay.events,function(H){if(D(H.target).zIndex()<D.ui.dialog.overlay.maxZ){return false}})}},1);D(window).bind("resize.dialog-overlay",D.ui.dialog.overlay.resize)}var F=(this.oldInstances.pop()||D("<div>").addClass("ui-widget-overlay"));D(document).bind("keydown.dialog-overlay",function(H){var I=D.ui.dialog.overlay.instances;if(I.length!==0&&I[I.length-1]===F&&G.options.closeOnEscape&&!H.isDefaultPrevented()&&H.keyCode&&H.keyCode===D.ui.keyCode.ESCAPE){G.close(H);H.preventDefault()}});F.appendTo(document.body).css({width:this.width(),height:this.height()});if(D.fn.bgiframe){F.bgiframe()}this.instances.push(F);return F},destroy:function(F){var G=D.inArray(F,this.instances),H=0;if(G!==-1){this.oldInstances.push(this.instances.splice(G,1)[0])}if(this.instances.length===0){D([document,window]).unbind(".dialog-overlay")}F.height(0).width(0).remove();D.each(this.instances,function(){H=Math.max(H,this.css("z-index"))});this.maxZ=H},height:function(){var G,F;if(D.ui.ie){G=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight);F=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight);if(G<F){return D(window).height()+"px"}else{return G+"px"}}else{return D(document).height()+"px"}},width:function(){var F,G;if(D.ui.ie){F=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth);G=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth);if(F<G){return D(window).width()+"px"}else{return F+"px"}}else{return D(document).width()+"px"}},resize:function(){var F=D([]);D.each(D.ui.dialog.overlay.instances,function(){F=F.add(this)});F.css({width:0,height:0}).css({width:D.ui.dialog.overlay.width(),height:D.ui.dialog.overlay.height()})}});D.extend(D.ui.dialog.overlay.prototype,{destroy:function(){D.ui.dialog.overlay.destroy(this.$el)}})}(jQuery));(function(B,C){var A=false;B.widget("ui.menu",{version:"1.9.2",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element;this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,B.proxy(function(D){if(this.options.disabled){D.preventDefault()}},this));if(this.options.disabled){this.element.addClass("ui-state-disabled").attr("aria-disabled","true")}this._on({"mousedown .ui-menu-item > a":function(D){D.preventDefault()},"click .ui-state-disabled > a":function(D){D.preventDefault()},"click .ui-menu-item:has(a)":function(D){var E=B(D.target).closest(".ui-menu-item");if(!A&&E.not(".ui-state-disabled").length){A=true;this.select(D);if(E.has(".ui-menu").length){this.expand(D)}else{if(!this.element.is(":focus")){this.element.trigger("focus",[true]);if(this.active&&this.active.parents(".ui-menu").length===1){clearTimeout(this.timer)}}}}},"mouseenter .ui-menu-item":function(D){var E=B(D.currentTarget);E.siblings().children(".ui-state-active").removeClass("ui-state-active");this.focus(D,E)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(F,D){var E=this.active||this.element.children(".ui-menu-item").eq(0);if(!D){this.focus(F,E)}},blur:function(D){this._delay(function(){if(!B.contains(this.element[0],this.document[0].activeElement)){this.collapseAll(D)}})},keydown:"_keydown"});this.refresh();this._on(this.document,{click:function(D){if(!B(D.target).closest(".ui-menu").length){this.collapseAll(D)}A=false}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").andSelf().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show();this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var D=B(this);if(D.data("ui-menu-submenu-carat")){D.remove()}});this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(J){var E,I,K,H,G,D=true;function F(L){return L.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}switch(J.keyCode){case B.ui.keyCode.PAGE_UP:this.previousPage(J);break;case B.ui.keyCode.PAGE_DOWN:this.nextPage(J);break;case B.ui.keyCode.HOME:this._move("first","first",J);break;case B.ui.keyCode.END:this._move("last","last",J);break;case B.ui.keyCode.UP:this.previous(J);break;case B.ui.keyCode.DOWN:this.next(J);break;case B.ui.keyCode.LEFT:this.collapse(J);break;case B.ui.keyCode.RIGHT:if(this.active&&!this.active.is(".ui-state-disabled")){this.expand(J)}break;case B.ui.keyCode.ENTER:case B.ui.keyCode.SPACE:this._activate(J);break;case B.ui.keyCode.ESCAPE:this.collapse(J);break;default:D=false;I=this.previousFilter||"";K=String.fromCharCode(J.keyCode);H=false;clearTimeout(this.filterTimer);if(K===I){H=true}else{K=I+K}G=new RegExp("^"+F(K),"i");E=this.activeMenu.children(".ui-menu-item").filter(function(){return G.test(B(this).children("a").text())});E=H&&E.index(this.active.next())!==-1?this.active.nextAll(".ui-menu-item"):E;if(!E.length){K=String.fromCharCode(J.keyCode);G=new RegExp("^"+F(K),"i");E=this.activeMenu.children(".ui-menu-item").filter(function(){return G.test(B(this).children("a").text())})}if(E.length){this.focus(J,E);if(E.length>1){this.previousFilter=K;this.filterTimer=this._delay(function(){delete this.previousFilter},1000)}else{delete this.previousFilter}}else{delete this.previousFilter}}if(D){J.preventDefault()}},_activate:function(D){if(!this.active.is(".ui-state-disabled")){if(this.active.children("a[aria-haspopup='true']").length){this.expand(D)}else{this.select(D)}}},refresh:function(){var F,E=this.options.icons.submenu,D=this.element.find(this.options.menus);D.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var I=B(this),H=I.prev("a"),G=B("<span>").addClass("ui-menu-icon ui-icon "+E).data("ui-menu-submenu-carat",true);H.attr("aria-haspopup","true").prepend(G);I.attr("aria-labelledby",H.attr("id"))});F=D.add(this.element);F.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()});F.children(":not(.ui-menu-item)").each(function(){var G=B(this);if(!/[^\-\s]/.test(G.text())){G.addClass("ui-widget-content ui-menu-divider")}});F.children(".ui-state-disabled").attr("aria-disabled","true");if(this.active&&!B.contains(this.element[0],this.active[0])){this.blur()}},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},focus:function(E,D){var G,F;this.blur(E,E&&E.type==="focus");this._scrollIntoView(D);this.active=D.first();F=this.active.children("a").addClass("ui-state-focus");if(this.options.role){this.element.attr("aria-activedescendant",F.attr("id"))}this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active");if(E&&E.type==="keydown"){this._close()}else{this.timer=this._delay(function(){this._close()},this.delay)}G=D.children(".ui-menu");if(G.length&&(/^mouse/.test(E.type))){this._startOpening(G)}this.activeMenu=D.parent();this._trigger("focus",E,{item:D})},_scrollIntoView:function(G){var J,F,H,D,E,I;if(this._hasScroll()){J=parseFloat(B.css(this.activeMenu[0],"borderTopWidth"))||0;F=parseFloat(B.css(this.activeMenu[0],"paddingTop"))||0;H=G.offset().top-this.activeMenu.offset().top-J-F;D=this.activeMenu.scrollTop();E=this.activeMenu.height();I=G.height();if(H<0){this.activeMenu.scrollTop(D+H)}else{if(H+I>E){this.activeMenu.scrollTop(D+H-E+I)}}}},blur:function(E,D){if(!D){clearTimeout(this.timer)}if(!this.active){return }this.active.children("a").removeClass("ui-state-focus");this.active=null;this._trigger("blur",E,{item:this.active})},_startOpening:function(D){clearTimeout(this.timer);if(D.attr("aria-hidden")!=="true"){return }this.timer=this._delay(function(){this._close();this._open(D)},this.delay)},_open:function(E){var D=B.extend({of:this.active},this.options.position);clearTimeout(this.timer);this.element.find(".ui-menu").not(E.parents(".ui-menu")).hide().attr("aria-hidden","true");E.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(D)},collapseAll:function(E,D){clearTimeout(this.timer);this.timer=this._delay(function(){var F=D?this.element:B(E&&E.target).closest(this.element.find(".ui-menu"));if(!F.length){F=this.element}this._close(F);this.blur(E);this.activeMenu=F},this.delay)},_close:function(D){if(!D){D=this.active?this.active.parent():this.element}D.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(E){var D=this.active&&this.active.parent().closest(".ui-menu-item",this.element);if(D&&D.length){this._close();this.focus(E,D)}},expand:function(E){var D=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();if(D&&D.length){this._open(D.parent());this._delay(function(){this.focus(E,D)})}},next:function(D){this._move("next","first",D)},previous:function(D){this._move("prev","last",D)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(G,E,F){var D;if(this.active){if(G==="first"||G==="last"){D=this.active[G==="first"?"prevAll":"nextAll"](".ui-menu-item").eq(-1)}else{D=this.active[G+"All"](".ui-menu-item").eq(0)}}if(!D||!D.length||!this.active){D=this.activeMenu.children(".ui-menu-item")[E]()}this.focus(F,D)},nextPage:function(F){var E,G,D;if(!this.active){this.next(F);return }if(this.isLastItem()){return }if(this._hasScroll()){G=this.active.offset().top;D=this.element.height();this.active.nextAll(".ui-menu-item").each(function(){E=B(this);return E.offset().top-G-D<0});this.focus(F,E)}else{this.focus(F,this.activeMenu.children(".ui-menu-item")[!this.active?"first":"last"]())}},previousPage:function(F){var E,G,D;if(!this.active){this.next(F);return }if(this.isFirstItem()){return }if(this._hasScroll()){G=this.active.offset().top;D=this.element.height();this.active.prevAll(".ui-menu-item").each(function(){E=B(this);return E.offset().top-G+D>0});this.focus(F,E)}else{this.focus(F,this.activeMenu.children(".ui-menu-item").first())}},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(D){this.active=this.active||B(D.target).closest(".ui-menu-item");var E={item:this.active};if(!this.active.has(".ui-menu").length){this.collapseAll(D,true)}this._trigger("select",D,E)}})}(jQuery));(function(B,C){var A=5;B.widget("ui.slider",B.ui.mouse,{version:"1.9.2",widgetEventPrefix:"slide",options:{animate:false,distance:0,max:100,min:0,orientation:"horizontal",range:false,step:1,value:0,values:null},_create:function(){var F,D,I=this.options,H=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),G="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",E=[];this._keySliding=false;this._mouseSliding=false;this._animateOff=true;this._handleIndex=null;this._detectOrientation();this._mouseInit();this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"+(I.disabled?" ui-slider-disabled ui-disabled":""));this.range=B([]);if(I.range){if(I.range===true){if(!I.values){I.values=[this._valueMin(),this._valueMin()]}if(I.values.length&&I.values.length!==2){I.values=[I.values[0],I.values[0]]}}this.range=B("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+((I.range==="min"||I.range==="max")?" ui-slider-range-"+I.range:""))}D=(I.values&&I.values.length)||1;for(F=H.length;F<D;F++){E.push(G)}this.handles=H.add(B(E.join("")).appendTo(this.element));this.handle=this.handles.eq(0);this.handles.add(this.range).filter("a").click(function(J){J.preventDefault()}).mouseenter(function(){if(!I.disabled){B(this).addClass("ui-state-hover")}}).mouseleave(function(){B(this).removeClass("ui-state-hover")}).focus(function(){if(!I.disabled){B(".ui-slider .ui-state-focus").removeClass("ui-state-focus");B(this).addClass("ui-state-focus")}else{B(this).blur()}}).blur(function(){B(this).removeClass("ui-state-focus")});this.handles.each(function(J){B(this).data("ui-slider-handle-index",J)});this._on(this.handles,{keydown:function(N){var O,L,K,M,J=B(N.target).data("ui-slider-handle-index");switch(N.keyCode){case B.ui.keyCode.HOME:case B.ui.keyCode.END:case B.ui.keyCode.PAGE_UP:case B.ui.keyCode.PAGE_DOWN:case B.ui.keyCode.UP:case B.ui.keyCode.RIGHT:case B.ui.keyCode.DOWN:case B.ui.keyCode.LEFT:N.preventDefault();if(!this._keySliding){this._keySliding=true;B(N.target).addClass("ui-state-active");O=this._start(N,J);if(O===false){return }}break}M=this.options.step;if(this.options.values&&this.options.values.length){L=K=this.values(J)}else{L=K=this.value()}switch(N.keyCode){case B.ui.keyCode.HOME:K=this._valueMin();break;case B.ui.keyCode.END:K=this._valueMax();break;case B.ui.keyCode.PAGE_UP:K=this._trimAlignValue(L+((this._valueMax()-this._valueMin())/A));break;case B.ui.keyCode.PAGE_DOWN:K=this._trimAlignValue(L-((this._valueMax()-this._valueMin())/A));break;case B.ui.keyCode.UP:case B.ui.keyCode.RIGHT:if(L===this._valueMax()){return }K=this._trimAlignValue(L+M);break;case B.ui.keyCode.DOWN:case B.ui.keyCode.LEFT:if(L===this._valueMin()){return }K=this._trimAlignValue(L-M);break}this._slide(N,J,K)},keyup:function(K){var J=B(K.target).data("ui-slider-handle-index");if(this._keySliding){this._keySliding=false;this._stop(K,J);this._change(K,J);B(K.target).removeClass("ui-state-active")}}});this._refreshValue();this._animateOff=false},_destroy:function(){this.handles.remove();this.range.remove();this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all");this._mouseDestroy()},_mouseCapture:function(F){var J,M,E,H,L,N,I,D,K=this,G=this.options;if(G.disabled){return false}this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()};this.elementOffset=this.element.offset();J={x:F.pageX,y:F.pageY};M=this._normValueFromMouse(J);E=this._valueMax()-this._valueMin()+1;this.handles.each(function(O){var P=Math.abs(M-K.values(O));if(E>P){E=P;H=B(this);L=O}});if(G.range===true&&this.values(1)===G.min){L+=1;H=B(this.handles[L])}N=this._start(F,L);if(N===false){return false}this._mouseSliding=true;this._handleIndex=L;H.addClass("ui-state-active").focus();I=H.offset();D=!B(F.target).parents().andSelf().is(".ui-slider-handle");this._clickOffset=D?{left:0,top:0}:{left:F.pageX-I.left-(H.width()/2),top:F.pageY-I.top-(H.height()/2)-(parseInt(H.css("borderTopWidth"),10)||0)-(parseInt(H.css("borderBottomWidth"),10)||0)+(parseInt(H.css("marginTop"),10)||0)};if(!this.handles.hasClass("ui-state-hover")){this._slide(F,L,M)}this._animateOff=true;return true},_mouseStart:function(){return true},_mouseDrag:function(F){var D={x:F.pageX,y:F.pageY},E=this._normValueFromMouse(D);this._slide(F,this._handleIndex,E);return false},_mouseStop:function(D){this.handles.removeClass("ui-state-active");this._mouseSliding=false;this._stop(D,this._handleIndex);this._change(D,this._handleIndex);this._handleIndex=null;this._clickOffset=null;this._animateOff=false;return false},_detectOrientation:function(){this.orientation=(this.options.orientation==="vertical")?"vertical":"horizontal"},_normValueFromMouse:function(E){var D,H,G,F,I;if(this.orientation==="horizontal"){D=this.elementSize.width;H=E.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)}else{D=this.elementSize.height;H=E.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)}G=(H/D);if(G>1){G=1}if(G<0){G=0}if(this.orientation==="vertical"){G=1-G}F=this._valueMax()-this._valueMin();I=this._valueMin()+G*F;return this._trimAlignValue(I)},_start:function(F,E){var D={handle:this.handles[E],value:this.value()};if(this.options.values&&this.options.values.length){D.value=this.values(E);D.values=this.values()}return this._trigger("start",F,D)},_slide:function(H,G,F){var D,E,I;if(this.options.values&&this.options.values.length){D=this.values(G?0:1);if((this.options.values.length===2&&this.options.range===true)&&((G===0&&F>D)||(G===1&&F<D))){F=D}if(F!==this.values(G)){E=this.values();E[G]=F;I=this._trigger("slide",H,{handle:this.handles[G],value:F,values:E});D=this.values(G?0:1);if(I!==false){this.values(G,F,true)}}}else{if(F!==this.value()){I=this._trigger("slide",H,{handle:this.handles[G],value:F});if(I!==false){this.value(F)}}}},_stop:function(F,E){var D={handle:this.handles[E],value:this.value()};if(this.options.values&&this.options.values.length){D.value=this.values(E);D.values=this.values()}this._trigger("stop",F,D)},_change:function(F,E){if(!this._keySliding&&!this._mouseSliding){var D={handle:this.handles[E],value:this.value()};if(this.options.values&&this.options.values.length){D.value=this.values(E);D.values=this.values()}this._trigger("change",F,D)}},value:function(D){if(arguments.length){this.options.value=this._trimAlignValue(D);this._refreshValue();this._change(null,0);return }return this._value()},values:function(E,H){var G,D,F;if(arguments.length>1){this.options.values[E]=this._trimAlignValue(H);this._refreshValue();this._change(null,E);return }if(arguments.length){if(B.isArray(arguments[0])){G=this.options.values;D=arguments[0];for(F=0;F<G.length;F+=1){G[F]=this._trimAlignValue(D[F]);this._change(null,F)}this._refreshValue()}else{if(this.options.values&&this.options.values.length){return this._values(E)}else{return this.value()}}}else{return this._values()}},_setOption:function(E,F){var D,G=0;if(B.isArray(this.options.values)){G=this.options.values.length}B.Widget.prototype._setOption.apply(this,arguments);switch(E){case"disabled":if(F){this.handles.filter(".ui-state-focus").blur();this.handles.removeClass("ui-state-hover");this.handles.prop("disabled",true);this.element.addClass("ui-disabled")}else{this.handles.prop("disabled",false);this.element.removeClass("ui-disabled")}break;case"orientation":this._detectOrientation();this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation);this._refreshValue();break;case"value":this._animateOff=true;this._refreshValue();this._change(null,0);this._animateOff=false;break;case"values":this._animateOff=true;this._refreshValue();for(D=0;D<G;D+=1){this._change(null,D)}this._animateOff=false;break;case"min":case"max":this._animateOff=true;this._refreshValue();this._animateOff=false;break}},_value:function(){var D=this.options.value;D=this._trimAlignValue(D);return D},_values:function(D){var G,F,E;if(arguments.length){G=this.options.values[D];G=this._trimAlignValue(G);return G}else{F=this.options.values.slice();for(E=0;E<F.length;E+=1){F[E]=this._trimAlignValue(F[E])}return F}},_trimAlignValue:function(G){if(G<=this._valueMin()){return this._valueMin()}if(G>=this._valueMax()){return this._valueMax()}var D=(this.options.step>0)?this.options.step:1,F=(G-this._valueMin())%D,E=G-F;if(Math.abs(F)*2>=D){E+=(F>0)?D:(-D)}return parseFloat(E.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var I,H,L,J,M,G=this.options.range,F=this.options,K=this,E=(!this._animateOff)?F.animate:false,D={};if(this.options.values&&this.options.values.length){this.handles.each(function(N){H=(K.values(N)-K._valueMin())/(K._valueMax()-K._valueMin())*100;D[K.orientation==="horizontal"?"left":"bottom"]=H+"%";B(this).stop(1,1)[E?"animate":"css"](D,F.animate);if(K.options.range===true){if(K.orientation==="horizontal"){if(N===0){K.range.stop(1,1)[E?"animate":"css"]({left:H+"%"},F.animate)}if(N===1){K.range[E?"animate":"css"]({width:(H-I)+"%"},{queue:false,duration:F.animate})}}else{if(N===0){K.range.stop(1,1)[E?"animate":"css"]({bottom:(H)+"%"},F.animate)}if(N===1){K.range[E?"animate":"css"]({height:(H-I)+"%"},{queue:false,duration:F.animate})}}}I=H})}else{L=this.value();J=this._valueMin();M=this._valueMax();H=(M!==J)?(L-J)/(M-J)*100:0;D[this.orientation==="horizontal"?"left":"bottom"]=H+"%";this.handle.stop(1,1)[E?"animate":"css"](D,F.animate);if(G==="min"&&this.orientation==="horizontal"){this.range.stop(1,1)[E?"animate":"css"]({width:H+"%"},F.animate)}if(G==="max"&&this.orientation==="horizontal"){this.range[E?"animate":"css"]({width:(100-H)+"%"},{queue:false,duration:F.animate})}if(G==="min"&&this.orientation==="vertical"){this.range.stop(1,1)[E?"animate":"css"]({height:H+"%"},F.animate)}if(G==="max"&&this.orientation==="vertical"){this.range[E?"animate":"css"]({height:(100-H)+"%"},{queue:false,duration:F.animate})}}}})}(jQuery));(function(C,E){var A=0,F=/#.*$/;function D(){return ++A}function B(G){return G.hash.length>1&&G.href.replace(F,"")===location.href.replace(F,"").replace(/\s/g,"%20")}C.widget("ui.tabs",{version:"1.9.2",delay:300,options:{active:null,collapsible:false,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_create:function(){var H=this,G=this.options,I=G.active,J=location.hash.substring(1);this.running=false;this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",G.collapsible).delegate(".ui-tabs-nav > li","mousedown"+this.eventNamespace,function(K){if(C(this).is(".ui-state-disabled")){K.preventDefault()}}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){if(C(this).closest("li").is(".ui-state-disabled")){this.blur()}});this._processTabs();if(I===null){if(J){this.tabs.each(function(K,L){if(C(L).attr("aria-controls")===J){I=K;return false}})}if(I===null){I=this.tabs.index(this.tabs.filter(".ui-tabs-active"))}if(I===null||I===-1){I=this.tabs.length?0:false}}if(I!==false){I=this.tabs.index(this.tabs.eq(I));if(I===-1){I=G.collapsible?false:0}}G.active=I;if(!G.collapsible&&G.active===false&&this.anchors.length){G.active=0}if(C.isArray(G.disabled)){G.disabled=C.unique(G.disabled.concat(C.map(this.tabs.filter(".ui-state-disabled"),function(K){return H.tabs.index(K)}))).sort()}if(this.options.active!==false&&this.anchors.length){this.active=this._findActive(this.options.active)}else{this.active=C()}this._refresh();if(this.active.length){this.load(G.active)}},_getCreateEventData:function(){return{tab:this.active,panel:!this.active.length?C():this._getPanelForTab(this.active)}},_tabKeydown:function(I){var H=C(this.document[0].activeElement).closest("li"),G=this.tabs.index(H),J=true;if(this._handlePageNav(I)){return }switch(I.keyCode){case C.ui.keyCode.RIGHT:case C.ui.keyCode.DOWN:G++;break;case C.ui.keyCode.UP:case C.ui.keyCode.LEFT:J=false;G--;break;case C.ui.keyCode.END:G=this.anchors.length-1;break;case C.ui.keyCode.HOME:G=0;break;case C.ui.keyCode.SPACE:I.preventDefault();clearTimeout(this.activating);this._activate(G);return ;case C.ui.keyCode.ENTER:I.preventDefault();clearTimeout(this.activating);this._activate(G===this.options.active?false:G);return ;default:return }I.preventDefault();clearTimeout(this.activating);G=this._focusNextTab(G,J);if(!I.ctrlKey){H.attr("aria-selected","false");this.tabs.eq(G).attr("aria-selected","true");this.activating=this._delay(function(){this.option("active",G)},this.delay)}},_panelKeydown:function(G){if(this._handlePageNav(G)){return }if(G.ctrlKey&&G.keyCode===C.ui.keyCode.UP){G.preventDefault();this.active.focus()}},_handlePageNav:function(G){if(G.altKey&&G.keyCode===C.ui.keyCode.PAGE_UP){this._activate(this._focusNextTab(this.options.active-1,false));return true}if(G.altKey&&G.keyCode===C.ui.keyCode.PAGE_DOWN){this._activate(this._focusNextTab(this.options.active+1,true));return true}},_findNextTab:function(H,I){var G=this.tabs.length-1;function J(){if(H>G){H=0}if(H<0){H=G}return H}while(C.inArray(J(),this.options.disabled)!==-1){H=I?H+1:H-1}return H},_focusNextTab:function(G,H){G=this._findNextTab(G,H);this.tabs.eq(G).focus();return G},_setOption:function(G,H){if(G==="active"){this._activate(H);return }if(G==="disabled"){this._setupDisabled(H);return }this._super(G,H);if(G==="collapsible"){this.element.toggleClass("ui-tabs-collapsible",H);if(!H&&this.options.active===false){this._activate(0)}}if(G==="event"){this._setupEvents(H)}if(G==="heightStyle"){this._setupHeightStyle(H)}},_tabId:function(G){return G.attr("aria-controls")||"ui-tabs-"+D()},_sanitizeSelector:function(G){return G?G.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var H=this.options,G=this.tablist.children(":has(a[href])");H.disabled=C.map(G.filter(".ui-state-disabled"),function(I){return G.index(I)});this._processTabs();if(H.active===false||!this.anchors.length){H.active=false;this.active=C()}else{if(this.active.length&&!C.contains(this.tablist[0],this.active[0])){if(this.tabs.length===H.disabled.length){H.active=false;this.active=C()}else{this._activate(this._findNextTab(Math.max(0,H.active-1),false))}}else{H.active=this.tabs.index(this.active)}}this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled);this._setupEvents(this.options.event);this._setupHeightStyle(this.options.heightStyle);this.tabs.not(this.active).attr({"aria-selected":"false",tabIndex:-1});this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-expanded":"false","aria-hidden":"true"});if(!this.active.length){this.tabs.eq(0).attr("tabIndex",0)}else{this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true",tabIndex:0});this._getPanelForTab(this.active).show().attr({"aria-expanded":"true","aria-hidden":"false"})}},_processTabs:function(){var G=this;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist");this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1});this.anchors=this.tabs.map(function(){return C("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1});this.panels=C();this.anchors.each(function(M,K){var H,I,L,J=C(K).uniqueId().attr("id"),N=C(K).closest("li"),O=N.attr("aria-controls");if(B(K)){H=K.hash;I=G.element.find(G._sanitizeSelector(H))}else{L=G._tabId(N);H="#"+L;I=G.element.find(H);if(!I.length){I=G._createPanel(L);I.insertAfter(G.panels[M-1]||G.tablist)}I.attr("aria-live","polite")}if(I.length){G.panels=G.panels.add(I)}if(O){N.data("ui-tabs-aria-controls",O)}N.attr({"aria-controls":H.substring(1),"aria-labelledby":J});I.attr("aria-labelledby",J)});this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel")},_getList:function(){return this.element.find("ol,ul").eq(0)},_createPanel:function(G){return C("<div>").attr("id",G).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",true)},_setupDisabled:function(I){if(C.isArray(I)){if(!I.length){I=false}else{if(I.length===this.anchors.length){I=true}}}for(var H=0,G;(G=this.tabs[H]);H++){if(I===true||C.inArray(H,I)!==-1){C(G).addClass("ui-state-disabled").attr("aria-disabled","true")}else{C(G).removeClass("ui-state-disabled").removeAttr("aria-disabled")}}this.options.disabled=I},_setupEvents:function(H){var G={click:function(I){I.preventDefault()}};if(H){C.each(H.split(" "),function(J,I){G[I]="_eventHandler"})}this._off(this.anchors.add(this.tabs).add(this.panels));this._on(this.anchors,G);this._on(this.tabs,{keydown:"_tabKeydown"});this._on(this.panels,{keydown:"_panelKeydown"});this._focusable(this.tabs);this._hoverable(this.tabs)},_setupHeightStyle:function(G){var I,J,H=this.element.parent();if(G==="fill"){if(!C.support.minHeight){J=H.css("overflow");H.css("overflow","hidden")}I=H.height();this.element.siblings(":visible").each(function(){var L=C(this),K=L.css("position");if(K==="absolute"||K==="fixed"){return }I-=L.outerHeight(true)});if(J){H.css("overflow",J)}this.element.children().not(this.panels).each(function(){I-=C(this).outerHeight(true)});this.panels.each(function(){C(this).height(Math.max(0,I-C(this).innerHeight()+C(this).height()))}).css("overflow","auto")}else{if(G==="auto"){I=0;this.panels.each(function(){I=Math.max(I,C(this).height("").height())}).height(I)}}},_eventHandler:function(G){var P=this.options,K=this.active,L=C(G.currentTarget),J=L.closest("li"),N=J[0]===K[0],H=N&&P.collapsible,I=H?C():this._getPanelForTab(J),M=!K.length?C():this._getPanelForTab(K),O={oldTab:K,oldPanel:M,newTab:H?C():J,newPanel:I};G.preventDefault();if(J.hasClass("ui-state-disabled")||J.hasClass("ui-tabs-loading")||this.running||(N&&!P.collapsible)||(this._trigger("beforeActivate",G,O)===false)){return }P.active=H?false:this.tabs.index(J);this.active=N?C():J;if(this.xhr){this.xhr.abort()}if(!M.length&&!I.length){C.error("jQuery UI Tabs: Mismatching fragment identifier.")}if(I.length){this.load(this.tabs.index(J),G)}this._toggle(G,O)},_toggle:function(M,L){var K=this,G=L.newPanel,J=L.oldPanel;this.running=true;function I(){K.running=false;K._trigger("activate",M,L)}function H(){L.newTab.closest("li").addClass("ui-tabs-active ui-state-active");if(G.length&&K.options.show){K._show(G,K.options.show,I)}else{G.show();I()}}if(J.length&&this.options.hide){this._hide(J,this.options.hide,function(){L.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active");H()})}else{L.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active");J.hide();H()}J.attr({"aria-expanded":"false","aria-hidden":"true"});L.oldTab.attr("aria-selected","false");if(G.length&&J.length){L.oldTab.attr("tabIndex",-1)}else{if(G.length){this.tabs.filter(function(){return C(this).attr("tabIndex")===0}).attr("tabIndex",-1)}}G.attr({"aria-expanded":"true","aria-hidden":"false"});L.newTab.attr({"aria-selected":"true",tabIndex:0})},_activate:function(H){var G,I=this._findActive(H);if(I[0]===this.active[0]){return }if(!I.length){I=this.active}G=I.find(".ui-tabs-anchor")[0];this._eventHandler({target:G,currentTarget:G,preventDefault:C.noop})},_findActive:function(G){return G===false?C():this.tabs.eq(G)},_getIndex:function(G){if(typeof G==="string"){G=this.anchors.index(this.anchors.filter("[href$='"+G+"']"))}return G},_destroy:function(){if(this.xhr){this.xhr.abort()}this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible");this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role");this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeData("href.tabs").removeData("load.tabs").removeUniqueId();this.tabs.add(this.panels).each(function(){if(C.data(this,"ui-tabs-destroy")){C(this).remove()}else{C(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")}});this.tabs.each(function(){var G=C(this),H=G.data("ui-tabs-aria-controls");if(H){G.attr("aria-controls",H)}else{G.removeAttr("aria-controls")}});this.panels.show();if(this.options.heightStyle!=="content"){this.panels.css("height","")}},enable:function(G){var H=this.options.disabled;if(H===false){return }if(G===E){H=false}else{G=this._getIndex(G);if(C.isArray(H)){H=C.map(H,function(I){return I!==G?I:null})}else{H=C.map(this.tabs,function(I,J){return J!==G?J:null})}}this._setupDisabled(H)},disable:function(G){var H=this.options.disabled;if(H===true){return }if(G===E){H=true}else{G=this._getIndex(G);if(C.inArray(G,H)!==-1){return }if(C.isArray(H)){H=C.merge([G],H).sort()}else{H=[G]}}this._setupDisabled(H)},load:function(I,M){I=this._getIndex(I);var L=this,J=this.tabs.eq(I),H=J.find(".ui-tabs-anchor"),G=this._getPanelForTab(J),K={tab:J,panel:G};if(B(H[0])){return }this.xhr=C.ajax(this._ajaxSettings(H,M,K));if(this.xhr&&this.xhr.statusText!=="canceled"){J.addClass("ui-tabs-loading");G.attr("aria-busy","true");this.xhr.success(function(N){setTimeout(function(){G.html(N);L._trigger("load",M,K)},1)}).complete(function(O,N){setTimeout(function(){if(N==="abort"){L.panels.stop(false,true)}J.removeClass("ui-tabs-loading");G.removeAttr("aria-busy");if(O===L.xhr){delete L.xhr}},1)})}},_ajaxSettings:function(G,J,I){var H=this;return{url:G.attr("href"),beforeSend:function(L,K){return H._trigger("beforeLoad",J,C.extend({jqXHR:L,ajaxSettings:K},I))}}},_getPanelForTab:function(G){var H=C(G).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+H))}});if(C.uiBackCompat!==false){C.ui.tabs.prototype._ui=function(H,G){return{tab:H,panel:G,index:this.anchors.index(H)}};C.widget("ui.tabs",C.ui.tabs,{url:function(H,G){this.anchors.eq(H).attr("href",G)}});C.widget("ui.tabs",C.ui.tabs,{options:{ajaxOptions:null,cache:false},_create:function(){this._super();var G=this;this._on({tabsbeforeload:function(H,I){if(C.data(I.tab[0],"cache.tabs")){H.preventDefault();return }I.jqXHR.success(function(){if(G.options.cache){C.data(I.tab[0],"cache.tabs",true)}})}})},_ajaxSettings:function(H,I,J){var G=this.options.ajaxOptions;return C.extend({},G,{error:function(M,K){try{G.error(M,K,J.tab.closest("li").index(),J.tab[0])}catch(L){}}},this._superApply(arguments))},_setOption:function(G,H){if(G==="cache"&&H===false){this.anchors.removeData("cache.tabs")}this._super(G,H)},_destroy:function(){this.anchors.removeData("cache.tabs");this._super()},url:function(G){this.anchors.eq(G).removeData("cache.tabs");this._superApply(arguments)}});C.widget("ui.tabs",C.ui.tabs,{abort:function(){if(this.xhr){this.xhr.abort()}}});C.widget("ui.tabs",C.ui.tabs,{options:{spinner:"<em>Loading&#8230;</em>"},_create:function(){this._super();this._on({tabsbeforeload:function(I,J){if(I.target!==this.element[0]||!this.options.spinner){return }var H=J.tab.find("span"),G=H.html();H.html(this.options.spinner);J.jqXHR.complete(function(){H.html(G)})}})}});C.widget("ui.tabs",C.ui.tabs,{options:{enable:null,disable:null},enable:function(I){var H=this.options,G;if(I&&H.disabled===true||(C.isArray(H.disabled)&&C.inArray(I,H.disabled)!==-1)){G=true}this._superApply(arguments);if(G){this._trigger("enable",null,this._ui(this.anchors[I],this.panels[I]))}},disable:function(I){var H=this.options,G;if(I&&H.disabled===false||(C.isArray(H.disabled)&&C.inArray(I,H.disabled)===-1)){G=true}this._superApply(arguments);if(G){this._trigger("disable",null,this._ui(this.anchors[I],this.panels[I]))}}});C.widget("ui.tabs",C.ui.tabs,{options:{add:null,remove:null,tabTemplate:"<li><a href='#{href}'><span>#{label}</span></a></li>"},add:function(L,K,J){if(J===E){J=this.anchors.length}var M,H,I=this.options,G=C(I.tabTemplate.replace(/#\{href\}/g,L).replace(/#\{label\}/g,K)),N=!L.indexOf("#")?L.replace("#",""):this._tabId(G);G.addClass("ui-state-default ui-corner-top").data("ui-tabs-destroy",true);G.attr("aria-controls",N);M=J>=this.tabs.length;H=this.element.find("#"+N);if(!H.length){H=this._createPanel(N);if(M){if(J>0){H.insertAfter(this.panels.eq(-1))}else{H.appendTo(this.element)}}else{H.insertBefore(this.panels[J])}}H.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").hide();if(M){G.appendTo(this.tablist)}else{G.insertBefore(this.tabs[J])}I.disabled=C.map(I.disabled,function(O){return O>=J?++O:O});this.refresh();if(this.tabs.length===1&&I.active===false){this.option("active",0)}this._trigger("add",null,this._ui(this.anchors[J],this.panels[J]));return this},remove:function(I){I=this._getIndex(I);var H=this.options,J=this.tabs.eq(I).remove(),G=this._getPanelForTab(J).remove();if(J.hasClass("ui-tabs-active")&&this.anchors.length>2){this._activate(I+(I+1<this.anchors.length?1:-1))}H.disabled=C.map(C.grep(H.disabled,function(K){return K!==I}),function(K){return K>=I?--K:K});this.refresh();this._trigger("remove",null,this._ui(J.find("a")[0],G[0]));return this}});C.widget("ui.tabs",C.ui.tabs,{length:function(){return this.anchors.length}});C.widget("ui.tabs",C.ui.tabs,{options:{idPrefix:"ui-tabs-"},_tabId:function(H){var G=H.is("li")?H.find("a[href]"):H;G=G[0];return C(G).closest("li").attr("aria-controls")||G.title&&G.title.replace(/\s/g,"_").replace(/[^\w\u00c0-\uFFFF\-]/g,"")||this.options.idPrefix+D()}});C.widget("ui.tabs",C.ui.tabs,{options:{panelTemplate:"<div></div>"},_createPanel:function(G){return C(this.options.panelTemplate).attr("id",G).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",true)}});C.widget("ui.tabs",C.ui.tabs,{_create:function(){var G=this.options;if(G.active===null&&G.selected!==E){G.active=G.selected===-1?false:G.selected}this._super();G.selected=G.active;if(G.selected===false){G.selected=-1}},_setOption:function(H,I){if(H!=="selected"){return this._super(H,I)}var G=this.options;this._super("active",I===-1?false:I);G.selected=G.active;if(G.selected===false){G.selected=-1}},_eventHandler:function(){this._superApply(arguments);this.options.selected=this.options.active;if(this.options.selected===false){this.options.selected=-1}}});C.widget("ui.tabs",C.ui.tabs,{options:{show:null,select:null},_create:function(){this._super();if(this.options.active!==false){this._trigger("show",null,this._ui(this.active.find(".ui-tabs-anchor")[0],this._getPanelForTab(this.active)[0]))}},_trigger:function(J,K,L){var I,G,H=this._superApply(arguments);if(!H){return false}if(J==="beforeActivate"){I=L.newTab.length?L.newTab:L.oldTab;G=L.newPanel.length?L.newPanel:L.oldPanel;H=this._super("select",K,{tab:I.find(".ui-tabs-anchor")[0],panel:G[0],index:I.closest("li").index()})}else{if(J==="activate"&&L.newTab.length){H=this._super("show",K,{tab:L.newTab.find(".ui-tabs-anchor")[0],panel:L.newPanel[0],index:L.newTab.closest("li").index()})}}return H}});C.widget("ui.tabs",C.ui.tabs,{select:function(G){G=this._getIndex(G);if(G===-1){if(this.options.collapsible&&this.options.selected!==-1){G=this.options.selected}else{return }}this.anchors.eq(G).trigger(this.options.event+this.eventNamespace)}});(function(){var G=0;C.widget("ui.tabs",C.ui.tabs,{options:{cookie:null},_create:function(){var H=this.options,I;if(H.active==null&&H.cookie){I=parseInt(this._cookie(),10);if(I===-1){I=false}H.active=I}this._super()},_cookie:function(I){var H=[this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+(++G))];if(arguments.length){H.push(I===false?-1:I);H.push(this.options.cookie)}return C.cookie.apply(null,H)},_refresh:function(){this._super();if(this.options.cookie){this._cookie(this.options.active,this.options.cookie)}},_eventHandler:function(){this._superApply(arguments);if(this.options.cookie){this._cookie(this.options.active,this.options.cookie)}},_destroy:function(){this._super();if(this.options.cookie){this._cookie(null,this.options.cookie)}}})})();C.widget("ui.tabs",C.ui.tabs,{_trigger:function(H,I,J){var G=C.extend({},J);if(H==="load"){G.panel=G.panel[0];G.tab=G.tab.find(".ui-tabs-anchor")[0]}return this._super(H,I,G)}});C.widget("ui.tabs",C.ui.tabs,{options:{fx:null},_getFx:function(){var H,G,I=this.options.fx;if(I){if(C.isArray(I)){H=I[0];G=I[1]}else{H=G=I}}return I?{show:G,hide:H}:null},_toggle:function(N,M){var L=this,G=M.newPanel,J=M.oldPanel,K=this._getFx();if(!K){return this._super(N,M)}L.running=true;function I(){L.running=false;L._trigger("activate",N,M)}function H(){M.newTab.closest("li").addClass("ui-tabs-active ui-state-active");if(G.length&&K.show){G.animate(K.show,K.show.duration,function(){I()})}else{G.show();I()}}if(J.length&&K.hide){J.animate(K.hide,K.hide.duration,function(){M.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active");H()})}else{M.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active");J.hide();H()}}})}})(jQuery);(function(D){var B=0;function C(F,G){var E=(F.attr("aria-describedby")||"").split(/\s+/);E.push(G);F.data("ui-tooltip-id",G).attr("aria-describedby",D.trim(E.join(" ")))}function A(G){var H=G.data("ui-tooltip-id"),F=(G.attr("aria-describedby")||"").split(/\s+/),E=D.inArray(H,F);if(E!==-1){F.splice(E,1)}G.removeData("ui-tooltip-id");F=D.trim(F.join(" "));if(F){G.attr("aria-describedby",F)}else{G.removeAttr("aria-describedby")}}D.widget("ui.tooltip",{version:"1.9.2",options:{content:function(){return D(this).attr("title")},hide:true,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:true,tooltipClass:null,track:false,close:null,open:null},_create:function(){this._on({mouseover:"open",focusin:"open"});this.tooltips={};this.parents={};if(this.options.disabled){this._disable()}},_setOption:function(E,G){var F=this;if(E==="disabled"){this[G?"_disable":"_enable"]();this.options[E]=G;return }this._super(E,G);if(E==="content"){D.each(this.tooltips,function(I,H){F._updateContent(H)})}},_disable:function(){var E=this;D.each(this.tooltips,function(H,F){var G=D.Event("blur");G.target=G.currentTarget=F[0];E.close(G,true)});this.element.find(this.options.items).andSelf().each(function(){var F=D(this);if(F.is("[title]")){F.data("ui-tooltip-title",F.attr("title")).attr("title","")}})},_enable:function(){this.element.find(this.options.items).andSelf().each(function(){var E=D(this);if(E.data("ui-tooltip-title")){E.attr("title",E.data("ui-tooltip-title"))}})},open:function(F){var E=this,G=D(F?F.target:this.element).closest(this.options.items);if(!G.length||G.data("ui-tooltip-id")){return }if(G.attr("title")){G.data("ui-tooltip-title",G.attr("title"))}G.data("ui-tooltip-open",true);if(F&&F.type==="mouseover"){G.parents().each(function(){var I=D(this),H;if(I.data("ui-tooltip-open")){H=D.Event("blur");H.target=H.currentTarget=this;E.close(H,true)}if(I.attr("title")){I.uniqueId();E.parents[this.id]={element:this,title:I.attr("title")};I.attr("title","")}})}this._updateContent(G,F)},_updateContent:function(J,I){var H,E=this.options.content,G=this,F=I?I.type:null;if(typeof E==="string"){return this._open(I,J,E)}H=E.call(J[0],function(K){if(!J.data("ui-tooltip-open")){return }G._delay(function(){if(I){I.type=F}this._open(I,J,K)})});if(H){this._open(I,J,H)}},_open:function(I,K,H){var J,G,F,L=D.extend({},this.options.position);if(!H){return }J=this._find(K);if(J.length){J.find(".ui-tooltip-content").html(H);return }if(K.is("[title]")){if(I&&I.type==="mouseover"){K.attr("title","")}else{K.removeAttr("title")}}J=this._tooltip(K);C(K,J.attr("id"));J.find(".ui-tooltip-content").html(H);function E(M){L.of=M;if(J.is(":hidden")){return }J.position(L)}if(this.options.track&&I&&/^mouse/.test(I.type)){this._on(this.document,{mousemove:E});E(I)}else{J.position(D.extend({of:K},this.options.position))}J.hide();this._show(J,this.options.show);if(this.options.show&&this.options.show.delay){F=setInterval(function(){if(J.is(":visible")){E(L.of);clearInterval(F)}},D.fx.interval)}this._trigger("open",I,{tooltip:J});G={keyup:function(M){if(M.keyCode===D.ui.keyCode.ESCAPE){var N=D.Event(M);N.currentTarget=K[0];this.close(N,true)}},remove:function(){this._removeTooltip(J)}};if(!I||I.type==="mouseover"){G.mouseleave="close"}if(!I||I.type==="focusin"){G.focusout="close"}this._on(true,K,G)},close:function(F){var E=this,H=D(F?F.currentTarget:this.element),G=this._find(H);if(this.closing){return }if(H.data("ui-tooltip-title")){H.attr("title",H.data("ui-tooltip-title"))}A(H);G.stop(true);this._hide(G,this.options.hide,function(){E._removeTooltip(D(this))});H.removeData("ui-tooltip-open");this._off(H,"mouseleave focusout keyup");if(H[0]!==this.element[0]){this._off(H,"remove")}this._off(this.document,"mousemove");if(F&&F.type==="mouseleave"){D.each(this.parents,function(J,I){D(I.element).attr("title",I.title);delete E.parents[J]})}this.closing=true;this._trigger("close",F,{tooltip:G});this.closing=false},_tooltip:function(E){var G="ui-tooltip-"+B++,F=D("<div>").attr({id:G,role:"tooltip"}).addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||""));D("<div>").addClass("ui-tooltip-content").appendTo(F);F.appendTo(this.document[0].body);if(D.fn.bgiframe){F.bgiframe()}this.tooltips[G]=E;return F},_find:function(E){var F=E.data("ui-tooltip-id");return F?D("#"+F):D()},_removeTooltip:function(E){E.remove();delete this.tooltips[E.attr("id")]},_destroy:function(){var E=this;D.each(this.tooltips,function(H,F){var G=D.Event("blur");G.target=G.currentTarget=F[0];E.close(G,true);D("#"+H).remove();if(F.data("ui-tooltip-title")){F.attr("title",F.data("ui-tooltip-title"));F.removeData("ui-tooltip-title")}})}})}(jQuery));
(function(D,B){var E=encodeURIComponent,C=decodeURIComponent,A={each:function(G,F){for(var H in G){G.hasOwnProperty(H)&&F(H,G[H])}},merge:function(I,G){for(var J in G){if(G.hasOwnProperty(J)){var H=G[J],F=I[J]}I[J]=F&&typeof H=="object"&&typeof F=="object"?this.merge(F,H):H}return I},isEmptyObject:function(G){var F;for(F in G){return !1}return !0},isArray:Array.isArray||function(F){return typeof F.length=="undefined"?!1:!0},isNumeric:function(F){return !isNaN(parseFloat(F))&&isFinite(F)},createCookieString:function(K,N,F,I){I=I||{};var O=E(K)+"="+(F?E(N):N),G=I.expires,M=I.path||"/",L=I.domain;if(G instanceof Date){O+="; expires="+G.toUTCString()}else{if(this.isNumeric(G)){var J=G,H=G=new Date;H.setDate(H.getDate()+J),O+="; expires="+G.toUTCString()}}return O+="; path="+M,L&&(O+="; domain="+L),I.secure===!0&&(O+="; secure"),O},createCookieHashString:function(G){if(G===null||typeof G!="object"){return""}var F=[];return this.each(G,function(I,H){typeof H!="function"&&typeof H!="undefined"&&F.push(E(I)+"="+E(String(H)))}),F.join("&")},parseCookieHash:function(I){var G=I.split("&"),K=null,F={};if(I.length){for(var H=0,J=G.length;H<J;H++){K=G[H].split("="),F[C(K[0])]=C(K[1])}}return F},parseCookieString:function(K,O){var G={};if(typeof K=="string"&&K.length>0){var I=O===!1?function(Q){return Q}:C,P=K.split(/;\s/g),F=null,N=null,M=null;for(var J=0,H=P.length;J<H;J++){M=P[J].match(/([^=]+)=/i);if(this.isArray(M)){try{F=C(M[1]),N=I(P[J].substring(M[1].length+1))}catch(L){}}else{F=C(P[J]),N=""}G[F]=N}}return G},exists:function(G){var F=this.parseCookieString(document.cookie,!0);return F.hasOwnProperty(G)},get:function(I,G){var J,H,F;return typeof G=="function"?(F=G,G={}):typeof G=="object"?F=G.converter:G={},J=this.parseCookieString(document.cookie,!G.raw),H=J[I],H===null||typeof H=="undefined"?null:typeof F=="function"?F(H):H},getSub:function(H,F,I){var G=this.getSubs(H);return G===null?null:typeof F=="undefined"||F===null?null:G[F]===null||typeof G[F]=="undefined"?null:typeof I=="function"?I(G[F]):G[F]},getSubs:function(G){var F=this.parseCookieString(document.cookie,!1);return typeof F[G]=="string"?this.parseCookieHash(F[G]):null},remove:function(G,F){return F=this.merge(F||{},{expires:new Date(0)}),this.set(G,"",F),this},removeSub:function(I,G,J){if(typeof I=="undefined"||I===null){return""}if(typeof G=="undefined"||G===null){return""}J=J||{};var H=this.getSubs(I);if(typeof H=="object"&&H.hasOwnProperty(G)){delete H[G];if(!J.removeIfEmpty){return this.setSubs(I,H,J)}for(var F in H){if(H.hasOwnProperty(F)&&!typeof H[F]==="function"&&!typeof H[F]==="undefined"){return this.setSubs(I,H,J)}}return this.remove(I,J)}return""},set:function(H,F,I){typeof F=="undefined"&&(F=""),I=I||{};var G=this.createCookieString(H,F,!I.raw,I);return document.cookie=G,this},setSub:function(I,G,J,H){if(typeof I=="undefined"||typeof G=="undefined"){return""}typeof J=="undefined"&&(J="");var F=this.getSubs(I);if(F===null||typeof F!="object"){F={}}return F[G]=J,this.setSubs(I,F,H)},setSubs:function(H,F,I){if(H===null||typeof H=="undefined"){return""}if(F===null||typeof F=="undefined"||typeof F!="object"){return""}var G=this.createCookieString(H,this.createCookieHashString(F),!1,I);return document.cookie=G,G},enabled:function(){var G="jUQFUy5j3vHnA14R",F="cookieMonster",H=navigator.cookieEnabled?!0:!1;return typeof navigator.cookieEnabled=="undefined"&&!H&&(this.set(G,F),H=this.exists(G)),H&&this.remove(G),H}};D.Cookie=A})(window);
/*
* jQuery Cookie Plugin v1.3.1
* https://github.com/carhartl/jquery-cookie
*
* Copyright 2013 Klaus Hartl
* Released under the MIT license
*/
(function(A){if(typeof define==="function"&&define.amd){define(["jquery"],A)}else{A(jQuery)}}(function(E){var A=/\+/g;function D(G){return G}function B(G){return decodeURIComponent(G.replace(A," "))}function F(G){if(G.indexOf('"')===0){G=G.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\")}try{return C.json?JSON.parse(G):G}catch(H){}}var C=E.cookie=function(N,M,R){if(M!==undefined){R=E.extend({},C.defaults,R);if(typeof R.expires==="number"){var O=R.expires,Q=R.expires=new Date();Q.setDate(Q.getDate()+O)}M=C.json?JSON.stringify(M):String(M);return(document.cookie=[C.raw?N:encodeURIComponent(N),"=",C.raw?M:encodeURIComponent(M),R.expires?"; expires="+R.expires.toUTCString():"",R.path?"; path="+R.path:"",R.domain?"; domain="+R.domain:"",R.secure?"; secure":""].join(""))}var G=C.raw?D:B;var P=document.cookie.split("; ");var S=N?undefined:{};for(var L=0,J=P.length;L<J;L++){var K=P[L].split("=");var H=G(K.shift());var I=G(K.join("="));if(N&&N===H){S=F(I);break}if(!N){S[H]=F(I)}}return S};C.defaults={};E.removeCookie=function(H,G){if(E.cookie(H)!==undefined){E.cookie(H,"",E.extend(G,{expires:-1}));return true}return false}}));
/*
 * Feature Carousel, Version 1.3
 * http://www.bkosolutions.com
 *
 * Copyright 2011 Brian Osborne
 * Licensed under GPL version 3
 * brian@bkosborne.com
 *
 * http://www.gnu.org/licenses/gpl.txt
 */
(function(A){A.fn.featureCarousel=function(F){if(this.length>1){this.each(function(){A(this).featureCarousel(F)});return this}F=A.extend({},A.fn.featureCarousel.defaults,F||{});var Q={currentCenterNum:F.startingFeature,containerWidth:0,containerHeight:0,largeFeatureWidth:0,largeFeatureHeight:0,smallFeatureWidth:0,smallFeatureHeight:0,fbLeftPos:0,fbLeftPosData:0,totalFeatureCount:A(this).children("div").length,currentlyMoving:false,featuresContainer:A(this),featuresArray:[],containerIDTag:"#"+A(this).attr("id"),timeoutVar:null,rotationsRemaining:0,itemsToAnimate:0,borderWidth:0};var J=function(W){if(F.preload==true){var U=Q.featuresContainer.find("img");var T=0;var V=U.length;U.each(function(Y,Z){var X=new Image();A(X).bind("load error",function(){T++;if(T==V){W()}});X.src=Z.src})}else{W()}};var M=function(T){return Q.featuresArray[T-1]};var N=function(T){A.each(Q.featuresArray,function(){if(A(this).data().setPosition==T){return A(this)}})};var C=function(T){if((T-1)==0){return Q.totalFeatureCount}else{return T-1}};var I=function(T){if((T+1)>Q.totalFeatureCount){return 1}else{return T+1}};var E=function(){Q.containerWidth=Q.featuresContainer.width();Q.containerHeight=Q.featuresContainer.height();var T=A(Q.containerIDTag).find(".fb-l-carousel-image:first, .fb-s-carousel-image:first");if(F.largeFeatureWidth>1){Q.largeFeatureWidth=F.largeFeatureWidth}else{if(F.largeFeatureWidth>0&&F.largeFeatureWidth<1){Q.largeFeatureWidth=T.width()*F.largeFeatureWidth}else{Q.largeFeatureWidth=T.outerWidth()}}if(F.fbLeftPos!=0){Q.fbLeftPos=F.fbLeftPos}if(F.fbLeftPosData!=0){Q.fbLeftPosData=F.fbLeftPosData}if(F.largeFeatureHeight>1){Q.largeFeatureHeight=F.largeFeatureHeight}else{if(F.largeFeatureHeight>0&&F.largeFeatureHeight<1){Q.largeFeatureHeight=T.height()*F.largeFeatureHeight}else{Q.largeFeatureHeight=T.outerHeight()}}if(F.smallFeatureWidth>1){Q.smallFeatureWidth=F.smallFeatureWidth}else{if(F.smallFeatureWidth>0&&F.smallFeatureWidth<1){Q.smallFeatureWidth=T.width()*F.smallFeatureWidth}else{Q.smallFeatureWidth=T.outerWidth()/2}}if(F.smallFeatureHeight>1){Q.smallFeatureHeight=F.smallFeatureHeight}else{if(F.smallFeatureHeight>0&&F.smallFeatureHeight<1){Q.smallFeatureHeight=T.height()*F.smallFeatureHeight}else{Q.smallFeatureHeight=T.outerHeight()/2}}};var B=function(){if(F.displayCutoff>0&&F.displayCutoff<Q.totalFeatureCount){Q.totalFeatureCount=F.displayCutoff}Q.featuresContainer.find(".fb-l-carousel-feature, .fb-s-carousel-feature").each(function(T){if(T<Q.totalFeatureCount){Q.featuresArray[T]=A(this)}});if(Q.featuresContainer.find(".fb-l-carousel-feature, .fb-s-carousel-feature").first().css("borderLeftWidth")!="medium"){Q.borderWidth=parseInt(Q.featuresContainer.find(".fb-l-carousel-feature, .fb-s-carousel-feature").first().css("borderLeftWidth"))*2}Q.featuresContainer.find(".fb-l-carousel-feature",".fb-s-carousel-feature").each(function(){A(this).css({left:(Q.containerWidth/2)-(Q.smallFeatureWidth/2)-(Q.borderWidth/2),width:Q.smallFeatureWidth,height:Q.smallFeatureHeight,top:F.smallFeatureOffset+F.topPadding,opacity:1})}).find(".fb-l-carousel-image",".fb-carousel-image").css({width:Q.smallFeatureWidth});if(F.captionBelow){Q.featuresContainer.find(".fb-l-carousel-caption, .fb-s-carousel-caption").css("position","relative")}if(Q.totalFeatureCount<4){Q.itemsToAnimate=Q.totalFeatureCount}else{Q.itemsToAnimate=4}Q.featuresContainer.find(".fb-l-carousel-caption, .fb-s-carousel-caption").hide()};var R=function(){A.each(Q.featuresArray,function(X){A(this).data("setPosition",X+1)});var V=C(F.startingFeature);Q.currentCenterNum=V;var U=M(V);U.data("position",1);var T=U.prevAll();T.each(function(X){A(this).data("position",(Q.totalFeatureCount-X))});var W=U.nextAll();W.each(function(X){if(A(this).data("setPosition")!=undefined){A(this).data("position",(X+2))}});if(F.counterStyle=="caption"){A.each(Q.featuresArray,function(){var Y=C(A(this).data("position"));var X=A("<span></span>");X.addClass("numberTag");X.html("("+Y+" of "+Q.totalFeatureCount+") ");A(this).find(".fb-l-carousel-caption p, .fb-s-carousel-caption p").prepend(X)})}};var H=function(){if(F.trackerIndividual){var X=A("<ul></ul>");X.addClass("tracker-individual-container");for(var V=0;V<Q.totalFeatureCount;V++){var T=V+1;var U=A("<div>"+T+"</div>");U.addClass("tracker-individual-blip");U.css("cursor","pointer");U.attr("id","tracker-"+(V+1));var Z=A("<li></li>");Z.append(U);Z.css("float","left");Z.css("list-style-type","none");X.append(Z)}A(Q.containerIDTag).append(X);X.hide().show()}if(F.trackerSummation){var Y=A("<div></div>");Y.addClass("tracker-summation-container");var a=A("<span></span>").addClass("tracker-summation-current").text(F.startingFeature);var b=A("<span></span>").addClass("tracker-summation-total").text(Q.totalFeatureCount);var W=A("<span></span>").addClass("tracker-summation-middle").text(" of ");Y.append(a).append(W).append(b);A(Q.containerIDTag).append(Y)}};var S=function(X,U){if(F.trackerIndividual){var T=Q.featuresContainer.find(".tracker-individual-container");var V=T.find("#tracker-"+X);var W=T.find("#tracker-"+U);V.removeClass("tracker-individual-blip-selected");W.addClass("tracker-individual-blip-selected")}if(F.trackerSummation){var T=Q.featuresContainer.find(".tracker-summation-container");T.find(".tracker-summation-current").text(U)}};var P=function(U){clearTimeout(Q.timeoutVar);if(!U&&F.autoPlay!=0){var T=(Math.abs(F.autoPlay)<F.carouselSpeed)?F.carouselSpeed:Math.abs(F.autoPlay);Q.timeoutVar=setTimeout(function(){(F.autoPlay>0)?K(true,1):K(false,1)},T)}};var D=function(T){A.each(Q.featuresArray,function(){var U;if(T==false){U=I(A(this).data().position)}else{U=C(A(this).data().position)}A(this).data("position",U)})};var O=function(X,c){var W,T,V,Z,U,d,a;var b=X.data("position");var Y;if(c==true){Y=C(b)}else{Y=I(b)}if(b==1){F.leavingCenter(X)}if(Y==1){W=Q.largeFeatureWidth;T=Q.largeFeatureHeight;V=F.topPadding;U=X.css("z-index");Z=(Q.containerWidth/2)-(Q.largeFeatureWidth/2)-(Q.borderWidth/2);a=1}else{W=Q.smallFeatureWidth;T=Q.smallFeatureHeight;V=F.smallFeatureOffset+F.topPadding;U=1;a=1;if(Y==Q.totalFeatureCount){Z=Q.fbLeftPos}else{if(Y==2){Z=Q.fbLeftPosData}else{Z=(Q.containerWidth/2)-(Q.smallFeatureWidth/2)-(Q.borderWidth/2);a=0}}}if(b==1){X.find(".fb-l-carousel-caption, .fb-s-carousel-caption").hide()}X.animate({width:W,height:T,top:V,left:Z,opacity:a},F.carouselSpeed,F.animationEasing,function(){if(Y==1){if(F.captionBelow){X.css("height","auto")}X.find(".fb-l-carousel-caption, .fb-s-carousel-caption").fadeTo("fast",0.85);F.movedToCenter(X)}Q.rotationsRemaining=Q.rotationsRemaining-1;X.css("z-index",U);if(F.trackerIndividual||F.trackerSummation){if(Y==1){var e=Q.featuresContainer.find(".fb-l-carousel-feature, .fb-s-carousel-feature").index(X)+1;var f;if(c==false){f=I(e)}else{f=C(e)}S(f,e)}}var g=Q.rotationsRemaining/Q.itemsToAnimate;if(g%1==0){Q.currentlyMoving=false;D(c);if(Q.rotationsRemaining>0){L(c)}}P(false)}).find(".fb-l-carousel-image, .fb-s-carousel-image").animate({width:W,height:T},F.carouselSpeed,F.animationEasing).end()};var L=function(W){Q.currentlyMoving=true;var X,U,V,T;if(W==true){X=M(I(Q.currentCenterNum));U=M(Q.currentCenterNum);V=M(I(I(Q.currentCenterNum)));T=M(C(Q.currentCenterNum));Q.currentCenterNum=I(Q.currentCenterNum)}else{X=M(C(Q.currentCenterNum));U=M(C(C(Q.currentCenterNum)));V=M(Q.currentCenterNum);T=M(I(Q.currentCenterNum));Q.currentCenterNum=C(Q.currentCenterNum)}if(W){U.css("z-index",3)}else{V.css("z-index",3)}X.css("z-index",4);X.css("border-right","22px solid #ECF2F2");O(U,W);O(X,W);O(V,W);if(Q.totalFeatureCount>3){O(T,W)}};var K=function(V,U){if(Q.currentlyMoving==false){var T=U*Q.itemsToAnimate;Q.rotationsRemaining=T;L(V)}};var G=function(X,W){var U=1,T=1,V;V=X;while((V=C(V))!=W){U++}V=X;while((V=I(V))!=W){T++}return(U<T)?U*-1:T};A(F.leftButtonTag).on("click",function(){K(false,1)});A(F.rightButtonTag).on("click",function(){K(true,1)});Q.featuresContainer.find(".fb-l-carousel-feature, .fb-s-carousel-feature").click(function(){var T=A(this).data("position");if(T==2){K(true,1)}else{if(T==Q.totalFeatureCount){K(false,1)}}}).mouseover(function(){if(Q.currentlyMoving==false){var T=A(this).data("position");if(T==2||T==Q.totalFeatureCount){A(this).css("opacity",1)}}if(F.pauseOnHover){P(true)}if(F.stopOnHover){F.autoPlay=0}}).mouseout(function(){if(Q.currentlyMoving==false){var T=A(this).data("position");if(T==2||T==Q.totalFeatureCount){A(this).css("opacity",1)}}if(F.pauseOnHover){P(false)}});A("a",Q.containerIDTag).on("click",function(U){var T=A(this).parentsUntil(Q.containerIDTag);T.each(function(){var V=A(this).data("position");if(V!=undefined){if(V!=1){if(V==Q.totalFeatureCount){K(false,1)}else{if(V==2){K(true,1)}}U.preventDefault();return false}else{F.clickedCenter(A(this))}}})});A(".tracker-individual-blip",Q.containerIDTag).on("click",function(){var T=A(this).attr("id").substring(8);var V=Q.featuresContainer.find(".fb-l-carousel-feature, .fb-s-carousel-feature").eq(T-1).data("position");var U=Q.currentCenterNum;if(T!=U){var W=G(1,V);if(W<0){K(false,(W*-1))}else{K(true,W)}}});this.initialize=function(){J(function(){E();B();R();H();K(true,1)});return this};this.next=function(){K(true,1)};this.prev=function(){K(false,1)};this.pause=function(){P(true)};this.start=function(){P(false)};return this.initialize()};A.fn.featureCarousel.defaults={topPadding:26,sidePadding:0,smallFeatureOffset:0,startingFeature:1,carouselSpeed:1000,autoPlay:0,pauseOnHover:true,stopOnHover:false,trackerIndividual:true,trackerSummation:true,preload:0,displayCutoff:0,animationEasing:"swing",leftButtonTag:"#fb-l-carousel-left, #fb-s-carousel-left",rightButtonTag:"#fb-l-carousel-right, #fb-s-carousel-right",captionBelow:false,movedToCenter:A.noop,leavingCenter:A.noop,clickedCenter:A.noop}})(jQuery);
/*
 * jQuery Validation Plugin 1.11.1
 *
 * http://bassistance.de/jquery-plugins/jquery-plugin-validation/
 * http://docs.jquery.com/Plugins/Validation
 *
 * Copyright 2013 Jrn Zaefferer
 * Released under the MIT license:
 *   http://www.opensource.org/licenses/mit-license.php
 */
(function(A){A.extend(A.fn,{validate:function(B){if(!this.length){if(B&&B.debug&&window.console){console.warn("Nothing selected, can't validate, returning nothing.")}return }var C=A.data(this[0],"validator");if(C){return C}this.attr("novalidate","novalidate");C=new A.validator(B,this[0]);A.data(this[0],"validator",C);if(C.settings.onsubmit){this.validateDelegate(":submit","click",function(D){if(C.settings.submitHandler){C.submitButton=D.target}if(A(D.target).hasClass("cancel")){C.cancelSubmit=true}if(A(D.target).attr("formnovalidate")!==undefined){C.cancelSubmit=true}});this.submit(function(D){if(C.settings.debug){D.preventDefault()}function E(){var F;if(C.settings.submitHandler){if(C.submitButton){F=A("<input type='hidden'/>").attr("name",C.submitButton.name).val(A(C.submitButton).val()).appendTo(C.currentForm)}C.settings.submitHandler.call(C,C.currentForm,D);if(C.submitButton){F.remove()}return false}return true}if(C.cancelSubmit){C.cancelSubmit=false;return E()}if(C.form()){if(C.pendingRequest){C.formSubmitted=true;return false}return E()}else{C.focusInvalid();return false}})}return C},valid:function(){if(A(this[0]).is("form")){return this.validate().form()}else{var C=true;var B=A(this[0].form).validate();this.each(function(){C=C&&B.element(this)});return C}},removeAttrs:function(D){var B={},C=this;A.each(D.split(/\s/),function(E,F){B[F]=C.attr(F);C.removeAttr(F)});return B},rules:function(E,B){var G=this[0];if(E){var D=A.data(G.form,"validator").settings;var I=D.rules;var J=A.validator.staticRules(G);switch(E){case"add":A.extend(J,A.validator.normalizeRule(B));delete J.messages;I[G.name]=J;if(B.messages){D.messages[G.name]=A.extend(D.messages[G.name],B.messages)}break;case"remove":if(!B){delete I[G.name];return J}var H={};A.each(B.split(/\s/),function(K,L){H[L]=J[L];delete J[L]});return H}}var F=A.validator.normalizeRules(A.extend({},A.validator.classRules(G),A.validator.attributeRules(G),A.validator.dataRules(G),A.validator.staticRules(G)),G);if(F.required){var C=F.required;delete F.required;F=A.extend({required:C},F)}return F}});A.extend(A.expr[":"],{blank:function(B){return !A.trim(""+A(B).val())},filled:function(B){return !!A.trim(""+A(B).val())},unchecked:function(B){return !A(B).prop("checked")}});A.validator=function(B,C){this.settings=A.extend(true,{},A.validator.defaults,B);this.currentForm=C;this.init()};A.validator.format=function(B,C){if(arguments.length===1){return function(){var D=A.makeArray(arguments);D.unshift(B);return A.validator.format.apply(this,D)}}if(arguments.length>2&&C.constructor!==Array){C=A.makeArray(arguments).slice(1)}if(C.constructor!==Array){C=[C]}A.each(C,function(D,E){B=B.replace(new RegExp("\\{"+D+"\\}","g"),function(){return E})});return B};A.extend(A.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusInvalid:true,errorContainer:A([]),errorLabelContainer:A([]),onsubmit:true,ignore:":hidden",ignoreTitle:false,onfocusin:function(B,C){this.lastActive=B;if(this.settings.focusCleanup&&!this.blockFocusCleanup){if(this.settings.unhighlight){this.settings.unhighlight.call(this,B,this.settings.errorClass,this.settings.validClass)}this.addWrapper(this.errorsFor(B)).hide()}},onfocusout:function(B,C){if(!this.checkable(B)&&(B.name in this.submitted||!this.optional(B))){this.element(B)}},onkeyup:function(B,C){if(C.which===9&&this.elementValue(B)===""){return }else{if(B.name in this.submitted||B===this.lastElement){this.element(B)}}},onclick:function(B,C){if(B.name in this.submitted){this.element(B)}else{if(B.parentNode.name in this.submitted){this.element(B.parentNode)}}},highlight:function(D,B,C){if(D.type==="radio"){this.findByName(D.name).addClass(B).removeClass(C)}else{A(D).addClass(B).removeClass(C)}},unhighlight:function(D,B,C){if(D.type==="radio"){this.findByName(D.name).removeClass(B).addClass(C)}else{A(D).removeClass(B).addClass(C)}}},setDefaults:function(B){A.extend(A.validator.defaults,B)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",maxlength:A.validator.format("Please enter no more than {0} characters."),minlength:A.validator.format("Please enter at least {0} characters."),rangelength:A.validator.format("Please enter a value between {0} and {1} characters long."),range:A.validator.format("Please enter a value between {0} and {1}."),max:A.validator.format("Please enter a value less than or equal to {0}."),min:A.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:false,prototype:{init:function(){this.labelContainer=A(this.settings.errorLabelContainer);this.errorContext=this.labelContainer.length&&this.labelContainer||A(this.currentForm);this.containers=A(this.settings.errorContainer).add(this.settings.errorLabelContainer);this.submitted={};this.valueCache={};this.pendingRequest=0;this.pending={};this.invalid={};this.reset();var B=(this.groups={});A.each(this.settings.groups,function(E,F){if(typeof F==="string"){F=F.split(/\s/)}A.each(F,function(H,G){B[G]=E})});var D=this.settings.rules;A.each(D,function(E,F){D[E]=A.validator.normalizeRule(F)});function C(G){var F=A.data(this[0].form,"validator"),E="on"+G.type.replace(/^validate/,"");if(F.settings[E]){F.settings[E].call(F,this[0],G)}}A(this.currentForm).validateDelegate(":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'] ","focusin focusout keyup",C).validateDelegate("[type='radio'], [type='checkbox'], select, option","click",C);if(this.settings.invalidHandler){A(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)}},form:function(){this.checkForm();A.extend(this.submitted,this.errorMap);this.invalid=A.extend({},this.errorMap);if(!this.valid()){A(this.currentForm).triggerHandler("invalid-form",[this])}this.showErrors();return this.valid()},checkForm:function(){this.prepareForm();for(var B=0,C=(this.currentElements=this.elements());C[B];B++){this.check(C[B])}return this.valid()},element:function(C){C=this.validationTargetFor(this.clean(C));this.lastElement=C;this.prepareElement(C);this.currentElements=A(C);var B=this.check(C)!==false;if(B){delete this.invalid[C.name]}else{this.invalid[C.name]=true}if(!this.numberOfInvalids()){this.toHide=this.toHide.add(this.containers)}this.showErrors();return B},showErrors:function(C){if(C){A.extend(this.errorMap,C);this.errorList=[];for(var B in C){this.errorList.push({message:C[B],element:this.findByName(B)[0]})}this.successList=A.grep(this.successList,function(D){return !(D.name in C)})}if(this.settings.showErrors){this.settings.showErrors.call(this,this.errorMap,this.errorList)}else{this.defaultShowErrors()}},resetForm:function(){if(A.fn.resetForm){A(this.currentForm).resetForm()}this.submitted={};this.lastElement=null;this.prepareForm();this.hideErrors();this.elements().removeClass(this.settings.errorClass).removeData("previousValue")},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(D){var C=0;for(var B in D){C++}return C},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return this.size()===0},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid){try{A(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(B){}}},findLastActive:function(){var B=this.lastActive;return B&&A.grep(this.errorList,function(C){return C.element.name===B.name}).length===1&&B},elements:function(){var C=this,B={};return A(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){if(!this.name&&C.settings.debug&&window.console){console.error("%o has no name assigned",this)}if(this.name in B||!C.objectLength(A(this).rules())){return false}B[this.name]=true;return true})},clean:function(B){return A(B)[0]},errors:function(){var B=this.settings.errorClass.replace(" ",".");return A(this.settings.errorElement+"."+B,this.errorContext)},reset:function(){this.successList=[];this.errorList=[];this.errorMap={};this.toShow=A([]);this.toHide=A([]);this.currentElements=A([])},prepareForm:function(){this.reset();this.toHide=this.errors().add(this.containers)},prepareElement:function(B){this.reset();this.toHide=this.errorsFor(B)},elementValue:function(B){var C=A(B).attr("type"),D=A(B).val();if(C==="radio"||C==="checkbox"){return A("input[name='"+A(B).attr("name")+"']:checked").val()}if(typeof D==="string"){return D.replace(/\r/g,"")}return D},check:function(C){C=this.validationTargetFor(this.clean(C));var H=A(C).rules();var D=false;var G=this.elementValue(C);var B;for(var I in H){var F={method:I,parameters:H[I]};try{B=A.validator.methods[I].call(this,G,C,F.parameters);if(B==="dependency-mismatch"){D=true;continue}D=false;if(B==="pending"){this.toHide=this.toHide.not(this.errorsFor(C));return }if(!B){this.formatAndAdd(C,F);return false}}catch(E){if(this.settings.debug&&window.console){console.log("Exception occurred when checking element "+C.id+", check the '"+F.method+"' method.",E)}throw E}}if(D){return }if(this.objectLength(H)){this.successList.push(C)}return true},customDataMessage:function(B,C){return A(B).data("msg-"+C.toLowerCase())||(B.attributes&&A(B).attr("data-msg-"+C.toLowerCase()))},customMessage:function(C,D){var B=this.settings.messages[C];return B&&(B.constructor===String?B:B[D])},findDefined:function(){for(var B=0;B<arguments.length;B++){if(arguments[B]!==undefined){return arguments[B]}}return undefined},defaultMessage:function(B,C){return this.findDefined(this.customMessage(B.name,C),this.customDataMessage(B,C),!this.settings.ignoreTitle&&B.title||undefined,A.validator.messages[C],"<strong>Warning: No message defined for "+B.name+"</strong>")},formatAndAdd:function(C,E){var D=this.defaultMessage(C,E.method),B=/\$?\{(\d+)\}/g;if(typeof D==="function"){D=D.call(this,E.parameters,C)}else{if(B.test(D)){D=A.validator.format(D.replace(B,"{$1}"),E.parameters)}}this.errorList.push({message:D,element:C});this.errorMap[C.name]=D;this.submitted[C.name]=D},addWrapper:function(B){if(this.settings.wrapper){B=B.add(B.parent(this.settings.wrapper))}return B},defaultShowErrors:function(){var C,D;for(C=0;this.errorList[C];C++){var B=this.errorList[C];if(this.settings.highlight){this.settings.highlight.call(this,B.element,this.settings.errorClass,this.settings.validClass)}this.showLabel(B.element,B.message)}if(this.errorList.length){this.toShow=this.toShow.add(this.containers)}if(this.settings.success){for(C=0;this.successList[C];C++){this.showLabel(this.successList[C])}}if(this.settings.unhighlight){for(C=0,D=this.validElements();D[C];C++){this.settings.unhighlight.call(this,D[C],this.settings.errorClass,this.settings.validClass)}}this.toHide=this.toHide.not(this.toShow);this.hideErrors();this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return A(this.errorList).map(function(){return this.element})},showLabel:function(C,D){var B=this.errorsFor(C);if(B.length){B.removeClass(this.settings.validClass).addClass(this.settings.errorClass);B.html(D)}else{B=A("<"+this.settings.errorElement+">").attr("for",this.idOrName(C)).addClass(this.settings.errorClass).html(D||"");if(this.settings.wrapper){B=B.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()}if(!this.labelContainer.append(B).length){if(this.settings.errorPlacement){this.settings.errorPlacement(B,A(C))}else{B.insertAfter(C)}}}if(!D&&this.settings.success){B.text("");if(typeof this.settings.success==="string"){B.addClass(this.settings.success)}else{this.settings.success(B,C)}}this.toShow=this.toShow.add(B)},errorsFor:function(C){var B=this.idOrName(C);return this.errors().filter(function(){return A(this).attr("for")===B})},idOrName:function(B){return this.groups[B.name]||(this.checkable(B)?B.name:B.id||B.name)},validationTargetFor:function(B){if(this.checkable(B)){B=this.findByName(B.name).not(this.settings.ignore)[0]}return B},checkable:function(B){return(/radio|checkbox/i).test(B.type)},findByName:function(B){return A(this.currentForm).find("[name='"+B+"']")},getLength:function(C,B){switch(B.nodeName.toLowerCase()){case"select":return A("option:selected",B).length;case"input":if(this.checkable(B)){return this.findByName(B.name).filter(":checked").length}}return C.length},depend:function(C,B){return this.dependTypes[typeof C]?this.dependTypes[typeof C](C,B):true},dependTypes:{"boolean":function(C,B){return C},string:function(C,B){return !!A(C,B.form).length},"function":function(C,B){return C(B)}},optional:function(B){var C=this.elementValue(B);return !A.validator.methods.required.call(this,C,B)&&"dependency-mismatch"},startRequest:function(B){if(!this.pending[B.name]){this.pendingRequest++;this.pending[B.name]=true}},stopRequest:function(B,C){this.pendingRequest--;if(this.pendingRequest<0){this.pendingRequest=0}delete this.pending[B.name];if(C&&this.pendingRequest===0&&this.formSubmitted&&this.form()){A(this.currentForm).submit();this.formSubmitted=false}else{if(!C&&this.pendingRequest===0&&this.formSubmitted){A(this.currentForm).triggerHandler("invalid-form",[this]);this.formSubmitted=false}}},previousValue:function(B){return A.data(B,"previousValue")||A.data(B,"previousValue",{old:null,valid:true,message:this.defaultMessage(B,"remote")})}},classRuleSettings:{required:{required:true},email:{email:true},url:{url:true},date:{date:true},dateISO:{dateISO:true},number:{number:true},digits:{digits:true},creditcard:{creditcard:true}},addClassRules:function(B,C){if(B.constructor===String){this.classRuleSettings[B]=C}else{A.extend(this.classRuleSettings,B)}},classRules:function(C){var D={};var B=A(C).attr("class");if(B){A.each(B.split(" "),function(){if(this in A.validator.classRuleSettings){A.extend(D,A.validator.classRuleSettings[this])}})}return D},attributeRules:function(C){var F={};var B=A(C);var D=B[0].getAttribute("type");for(var G in A.validator.methods){var E;if(G==="required"){E=B.get(0).getAttribute(G);if(E===""){E=true}E=!!E}else{E=B.attr(G)}if(/min|max/.test(G)&&(D===null||/number|range|text/.test(D))){E=Number(E)}if(E){F[G]=E}else{if(D===G&&D!=="range"){F[G]=true}}}if(F.maxlength&&/-1|2147483647|524288/.test(F.maxlength)){delete F.maxlength}return F},dataRules:function(C){var F,D,E={},B=A(C);for(F in A.validator.methods){D=B.data("rule-"+F.toLowerCase());if(D!==undefined){E[F]=D}}return E},staticRules:function(C){var D={};var B=A.data(C.form,"validator");if(B.settings.rules){D=A.validator.normalizeRule(B.settings.rules[C.name])||{}}return D},normalizeRules:function(C,B){A.each(C,function(F,E){if(E===false){delete C[F];return }if(E.param||E.depends){var D=true;switch(typeof E.depends){case"string":D=!!A(E.depends,B.form).length;break;case"function":D=E.depends.call(B,B);break}if(D){C[F]=E.param!==undefined?E.param:true}else{delete C[F]}}});A.each(C,function(D,E){C[D]=A.isFunction(E)?E(B):E});A.each(["minlength","maxlength"],function(){if(C[this]){C[this]=Number(C[this])}});A.each(["rangelength","range"],function(){var D;if(C[this]){if(A.isArray(C[this])){C[this]=[Number(C[this][0]),Number(C[this][1])]}else{if(typeof C[this]==="string"){D=C[this].split(/[\s,]+/);C[this]=[Number(D[0]),Number(D[1])]}}}});if(A.validator.autoCreateRanges){if(C.min&&C.max){C.range=[C.min,C.max];delete C.min;delete C.max}if(C.minlength&&C.maxlength){C.rangelength=[C.minlength,C.maxlength];delete C.minlength;delete C.maxlength}}return C},normalizeRule:function(C){if(typeof C==="string"){var B={};A.each(C.split(/\s/),function(){B[this]=true});C=B}return C},addMethod:function(B,D,C){A.validator.methods[B]=D;A.validator.messages[B]=C!==undefined?C:A.validator.messages[B];if(D.length<3){A.validator.addClassRules(B,A.validator.normalizeRule(B))}},methods:{required:function(C,B,E){if(!this.depend(E,B)){return"dependency-mismatch"}if(B.nodeName.toLowerCase()==="select"){var D=A(B).val();return D&&D.length>0}if(this.checkable(B)){return this.getLength(C,B)>0}return A.trim(C).length>0},email:function(C,B){return this.optional(B)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(C)},url:function(C,B){return this.optional(B)||/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(C)},date:function(C,B){return this.optional(B)||!/Invalid|NaN/.test(new Date(C).toString())},dateISO:function(C,B){return this.optional(B)||/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/.test(C)},number:function(C,B){return this.optional(B)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(C)},digits:function(C,B){return this.optional(B)||/^\d+$/.test(C)},creditcard:function(F,C){if(this.optional(C)){return"dependency-mismatch"}if(/[^0-9 \-]+/.test(F)){return false}var G=0,E=0,B=false;F=F.replace(/\D/g,"");for(var H=F.length-1;H>=0;H--){var D=F.charAt(H);E=parseInt(D,10);if(B){if((E*=2)>9){E-=9}}G+=E;B=!B}return(G%10)===0},minlength:function(D,B,E){var C=A.isArray(D)?D.length:this.getLength(A.trim(D),B);return this.optional(B)||C>=E},maxlength:function(D,B,E){var C=A.isArray(D)?D.length:this.getLength(A.trim(D),B);return this.optional(B)||C<=E},rangelength:function(D,B,E){var C=A.isArray(D)?D.length:this.getLength(A.trim(D),B);return this.optional(B)||(C>=E[0]&&C<=E[1])},min:function(C,B,D){return this.optional(B)||C>=D},max:function(C,B,D){return this.optional(B)||C<=D},range:function(C,B,D){return this.optional(B)||(C>=D[0]&&C<=D[1])},equalTo:function(C,B,E){var D=A(E);if(this.settings.onfocusout){D.unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){A(B).valid()})}return C===D.val()},remote:function(F,C,G){if(this.optional(C)){return"dependency-mismatch"}var D=this.previousValue(C);if(!this.settings.messages[C.name]){this.settings.messages[C.name]={}}D.originalMessage=this.settings.messages[C.name].remote;this.settings.messages[C.name].remote=D.message;G=typeof G==="string"&&{url:G}||G;if(D.old===F){return D.valid}D.old=F;var B=this;this.startRequest(C);var E={};E[C.name]=F;A.ajax(A.extend(true,{url:G,mode:"abort",port:"validate"+C.name,dataType:"json",data:E,success:function(I){B.settings.messages[C.name].remote=D.originalMessage;var K=I===true||I==="true";if(K){var H=B.formSubmitted;B.prepareElement(C);B.formSubmitted=H;B.successList.push(C);delete B.invalid[C.name];B.showErrors()}else{var L={};var J=I||B.defaultMessage(C,"remote");L[C.name]=D.message=A.isFunction(J)?J(F):J;B.invalid[C.name]=true;B.showErrors(L)}D.valid=K;B.stopRequest(C,K)}},G));return"pending"}}});A.format=A.validator.format}(jQuery));(function(C){var A={};if(C.ajaxPrefilter){C.ajaxPrefilter(function(F,E,G){var D=F.port;if(F.mode==="abort"){if(A[D]){A[D].abort()}A[D]=G}})}else{var B=C.ajax;C.ajax=function(E){var F=("mode" in E?E:C.ajaxSettings).mode,D=("port" in E?E:C.ajaxSettings).port;if(F==="abort"){if(A[D]){A[D].abort()}A[D]=B.apply(this,arguments);return A[D]}return B.apply(this,arguments)}}}(jQuery));(function(A){A.extend(A.fn,{validateDelegate:function(D,C,B){return this.bind(C,function(E){var F=A(E.target);if(F.is(D)){return B.apply(F,arguments)}})}})}(jQuery));
var LP=function(){var B={},D;function G(H){return(B[H])?true:false}function F(J,I){var K=new RegExp("[\\?&]"+J+"=([^&#]*)"),L=I||window.location.search,H=K.exec(L);return H?H[1]:""}function C(K,L,H){var M={},N;K=(typeof K=="string")?jQuery("#"+K):K;N=K[(H||"className")].split("|");if(L){L=L.split(",");for(var J=0,I=L.length;J<I;J++){M[L[J]]=N[J]||null}return M}else{return N}}function A(H,I){if(I){if(!B[H]){B[H]=[]}if(I.constructor==Array){B[H]=B[H].concat(I)}else{B[H].push(I)}}else{B[H]=true}}var E=function(){var J=document.getElementsByTagName("head").item(0),L=null,I={},H=[],M=false;var K=function(){this.scope=this};K.prototype={scriptUrl:"",callback:null,useCache:true,id:null,params:null};var N=function(){if(H.length>0){M=true;var P="jsonCallback"+(new Date()).getTime();window[P]=O;P="callback="+P;if(H[0].scriptUrl.indexOf("?")==-1){P="?"+P}else{if(H[0].scriptUrl[H[0].scriptUrl.length-1]!="?"){P="&"+P}}L=document.createElement("script");L.setAttribute("type","text/javascript");L.setAttribute("src",H[0].scriptUrl+P);J.appendChild(L)}};var O=function(P){if(P){if(H[0].useCache){I[H[0].id]=P}H[0].callback.call(H[0].scope,P,H[0].params)}else{H[0].callback.call(H[0].scope,I[H[0].id],H[0].params)}H[0]=null;H.shift();if(L){J.removeChild(L);L=null}M=false;N()};return{getScript:function(P){if(!P.scriptUrl&&typeof P.scriptUrl!="string"&&!P.callback&&typeof P.callback!="object"){return false}var Q=LP.extendObject(new K(),P);Q.id=Q.scriptUrl.replace(/[^a-z]/gi,"");H.push(Q);if(Q.useCache&&I[Q.id]){O(null)}else{if(!M){N()}}}}}();return{pageVars:{loginURL:"",logoutURL:""},init:function(){if(!D){if(LP.Ads.DC){jQuery(document).ready(LP.Ads.DC.init);jQuery(document).ready(LP.Ads.DC.reposition)}if(location.host.search(/^directory\./)!=-1||location.host.indexOf("jobs")!=-1){var K=true;var H={navigation:{o:LP.Navigation}}}else{var H={abuse:{o:LP.Abuse},announcementQuickView:{o:LP.AnnouncementQuickView},articleHeadlines:{o:LP.ArticleHeadlines},autoPrompt:{o:LP.Prompt},bookmark:{o:LP.Bookmark},businessDashboard:{o:LP.BusinessDashboard},businessFileUpload:{o:LP.BusinessFileUpload},businessReview:{o:LP.BusinessReview},businessSubmission:{o:LP.BusinessSubmission,ll:true},businessWebsiteLink:{o:LP.BusinessWebsiteLink},channelActivity:{o:LP.ChannelActivity},discussionUpload:{o:LP.DiscussionUpload},comments:{o:LP.Comments,ll:true},commentRating:{o:LP.CommentRating},commentReview:{o:LP.CommentReview},eventDateList:{o:LP.Event.DateList},eventList:{o:LP.Events},eventSearch:{o:LP.Event.Search},eventSubmission:{o:LP.Event.Submission},fader:{o:LP.FaderManager},followUser:{o:LP.FollowUser},footballFixturesResults:{o:LP.FootballFixturesResults},formCountdown:{o:LP.Forms.CountdownManager},formHints:{o:LP.Forms.Hints},formSearchFields:{o:LP.Forms.SearchFields},galleries:{o:LP.Galleries},hintClearOnSubmit:{o:LP.Forms.HintClearOnSubmitManager},imageSelect:{o:LP.ImageSelect},imageUpload:{o:LP.ImageUpload},invites:{o:LP.Invites},likethis:{o:LP.LikeThisManager},profileConnect:{o:LP.Profile.Connect},profileCreate:{o:LP.Profile.Create},profileEdit:{o:LP.Profile.Edit},map:{o:LP.Map},mapPositioning:{o:LP.MapPositioning},multiFileUpload:{o:LP.MultiFileUpload},pmj:{o:LP.PMJ},polls:{o:LP.Polls},properties:{o:LP.Properties},repost:{o:LP.Repost},searchRefine:{o:LP.Search.Refine},shadowboxGallery:{o:LP.ShadowboxGallery},social:{o:LP.Social},sort:{o:LP.SortManager},sharing:{o:LP.Sharing},simpleEditor:{o:LP.SimpleEditor,ll:true},starRating:{o:LP.StarRatingManager},storyUpload:{o:LP.StoryUpload},swaps:{o:LP.SwapManager},voucher:{o:LP.Voucher,ll:true}}}for(var I in B){try{if(H[I]&&H[I].o){var J=(H[I].ll)?H[I].o.get().init:H[I].o.init;J.call((H[I].scope||H[I].o),B[I])}}catch(L){if(window.location.href.indexOf("anddevweb")){throw ("Javascript failed when executing module: "+I+" | "+L)}}}D=true;if(F("email-tobe-verified",window.location.href)){LP.Prompt.message("You need to verify your email before you can post any content to the site","Email has not been verified")}}},exists:G,has:A,extendObject:function(H,K,I){if(K){for(var J in K){if(K.hasOwnProperty(J)){if(I){if(typeof K[J]=="object"&&H[J]&&typeof H[J]=="object"){H[J]=LP.extendObject(H[J],K[J],true)}else{H[J]=K[J]}}else{H[J]=K[J]}}}}return H},mouseEnterOrLeave:function(I,J){var H=I.relatedTarget||(I.type==="mouseout"?I.toElement:I.fromElement);if(typeof H==="undefined"){return false}while(H&&H!=J){H=H.parentNode}return(H!=J)},forceRedraw:function(H,I){if(LP.isIE&&LP.IEv<8){if(I){H=jQuery(H).parents("."+I)}jQuery(H).css("zoom","0");jQuery(H).css("zoom","100%")}},currentUrl:window.location.href.replace(/http:\/\/.*?\//,"/").split("#")[0],getUrlParam:F,getClassParams:C,replaceNewLines:function(H){return H.replace(/(\r\n|[\r\n])/g,"<br />")},storeDomEls:function(L,I){var K={},M,H;typeof L=="string"&&(L=L.split(","));for(var J=L.length;J--;){H=null;M=L[J].split("|");if(M[0]=="c"){M.shift();H=M[0]}K[M[1]||M[0]]=(H)?jQuery("."+H,I)[0]:jQuery("#"+M[0])[0]}return K},dwrMethod:function(){return F("dwrMeth")}(),DWRWrapper:function(H){var I=function(J){H.callback.call(H.scope||this,J)};this.cancel=function(){I=LP.emptyFunction};H.fn.apply(this,(H.params)?H.params.concat([I]):[I])},JSONScriptRequest:E,addSelectOptions:function(N){var I=jQuery("#"+N.selectId)[0];if(N.items.length==1&&N.items[0].id==-1){I.innerHTML="";var L=document.createElement("option");L.value=N.items[0].id;L.innerHTML=N.items[0].name;I.appendChild(L)}else{if(LP.isIE){I.innerHTML="";M(-1);for(var K=0,H=N.items.length;K<H;K++){M(K)}}else{var J='<option value="-1">'+N["default"]+"</option>";for(var K=0,H=N.items.length;K<H;K++){J+='<option value="'+N.items[K].id+'">'+N.items[K].name+"</option>"}I.innerHTML=J}}function M(O){var P=document.createElement("option");if(O<0&&N["default"]){P.value=-1;P.innerHTML=N["default"]}else{P.value=N.items[O].id;P.innerHTML=N.items[O].name}I.appendChild(P)}},emptyFunction:function(){},getTarget:function(K,J,H){var K=K||window.event;var I=K.target||K.srcElement,L;if(J){if(!H||H=="class"){L=function(N,M){return !jQuery(N).hasClass(M)}}else{if(H=="node"){L=function(N,M){return N.nodeName.toLowerCase()!=M.toLowerCase()}}else{L=function(O,N,M){return O.getAttribute(M).indexOf(N)==-1}}}while(L(I,J,H)){I=I.parentNode}}return I},getChannelColour:function(H){var I=H.className.match(/cc\-[\w]+/gi);if(I==null||I==""){return""}else{return I[0]}}}}();
LP.Ads={};LP.Ads.DC=function(){var G=false,N=false,Q=20,R=0,K=100,A=[],D,U,Y,O,I,V,B,L,H,E,J="",T="",Z="999",M="N5765",C=[],S=[],X=false,F=false,W=false;var P=function(){if(!N){Y=adServer.toLowerCase();O=adAccountCode.toLowerCase();B=O.slice(-4);I=adSiteName.toLowerCase().replace(" ","");V=adAreaId.toLowerCase()||"area";L=adSubareaId.toLowerCase()||V;H=adArticleId.toLowerCase();N=true}};return{setLotameValues:function(a){J=a},setMediaForceValues:function(a){T=a},setWrapLinks:function(b){var c=document.getElementById("js-ewrap-left");var a=document.getElementById("js-ewrap-right");c.style.display="block";a.style.display="block";c.target="_blank";a.target="_blank";c.href=b;a.href=b},register:function(a){C.push(a)},init:function(){P();D=C.length;if(jQuery("#site")){U=window.setInterval(function(){var e,g,a,f,c,d,p,k,j=jQuery("#site").offset().left,q=D,l=false;R+=1;while(q){q-=1;c=q;reTest=false;if(R>1){c=A.shift()}a=jQuery("#"+C[c]+"-ad");p=!!a.find("img").length;richMediaLength=a.find("embed").length+a.find("object").length+a.find("iframe").length+a.find("div").length;isRichMedia=!!richMediaLength;k=p?1:0+richMediaLength;if(k>0){g=jQuery("#"+C[c]);d=a.height();if(!p||d>20){if(g.height()===0){l=true}jQuery(g).addClass("ad-active");if(p&&!isRichMedia){var r=new Image();r.src=a.find("img").get(0).src;d=r.height}if(d===0){reTest=true}if(g.height()<d){g.css("height",d+"px");jQuery(".grad",g).css("height",(d-2)+"px");l=true}var o=jQuery(g).offset().left;var h=jQuery(g).offset().top;var n=a.find(".GoogleActiveViewClass").width();var m=970;if(X&&((!(jQuery(a).hasClass("header-ad"))&&(F==true))||!F)){a.css("top","-50000px")}else{if(a.hasClass("header-ad")){n=n<700?m:n;var u=(m-n)/2;a.css({top:h+"px",left:u+"px",width:n+"px",visibility:"visible"})}else{var v=(o-j);a.css({top:h+"px",left:v+"px",width:n+"px",visibility:"visible"})}}}else{if(p){var t;var r=new Image();r.src=a.find("img").get(0).src;t=r.height;if(t===0||t>20){reTest=true}var b=a.find("img").get(0).style.display;if(b=="none"){reTest=true}}}if(reTest){A.push(c)}else{D-=1;G=true}}else{A.push(c)}}LP.Ads.DC.reposition();if(!D||(Q*1000/K)===R){U=window.clearInterval(U);G=true}},K)}},returnURL:function(h,a,f,g,b){P();var l="false";var e=g||"";var c=b||"";if(screen.width>=1280){l="true"}a=a||"";f=f||"";if(!E){E=Math.random()*10000000000000000}var j=(h=="468x60,728x90"||a==1)?"dcopt=ist;":"",d=Y+"/"+M+"/adj/"+O+"/"+O+"_"+B+V+"_"+L+";gs_channels="+gs_channels+";area="+V+";subarea="+L+";target=;article="+H+";tile="+a+";sz="+h+";weather="+e+";weatherBasic="+c+";pos="+f+";channel="+Z+";inskin_yes="+l+";"+J+";"+T+";"+segQS+j+";ord="+E;var k=amznads.getTokens();if(typeof k!="undefined"&&k.length>0){var i="amznslots="+k;d+=";"+i}return d},write:function(i,a,f,g,b){P();var m="false";var e=g||"";var c=b||"";if(screen.width>=1280){m="true"}a=a||"";f=f||"";if(!E){E=Math.random()*10000000000000000}var k=(i=="468x60,728x90"||a==1)?"dcopt=ist;":"",d=Y+"/"+M+"/adj/"+O+"/"+O+"_"+B+V+"_"+L+";gs_channels="+gs_channels+";area="+V+";subarea="+L+";target=;article="+H+";tile="+a+";sz="+i+";weather="+e+";weatherBasic="+c+";pos="+f+";channel="+Z+";inskin_yes="+m+";"+J+";"+T+";"+segQS+k+";ord="+E;var l=amznads.getTokens();if(typeof l!="undefined"&&l.length>0){var j="amznslots="+l;d+=";"+j}var h='<script language="JavaScript" src="'+d+'" type="text/javascript"><\/script>';document.writeln(h)},reposition:function(d,b){if(b==true){W=false}if(d==true&&!W){X=false;F=false}if(G&&!X&&!W){for(var c=C.length;c--;){var a=jQuery("#"+C[c]);if(a.length>0){var e=a.offset().top-$("#site").offset().top}if(e!=undefined){jQuery("#"+C[c]+"-ad").css("top",e+"px")}}}},hide:function(b,a){if(a==true){W=true}if(G){for(var c=C.length;c--;){var d=jQuery("#"+C[c]+"-ad");if(b!=true){jQuery(d).css("top","-50000px")}}}else{if(b==true){F=true}else{F=false}X=true}},hideBelow:function(g,d){if(G){var a=jQuery(".ad-active",d);if(a.length>0){for(var b=0,f;f=a[b++];){var e=jQuery(f).offset().top;var c=jQuery(g).offset().top;if(e>c){ad=jQuery("#"+f.id+"-ad");ad.css("top","-50000px");S.push(f)}}}}},repositionBelow:function(){},remove:function(d){var c=jQuery(".ad",d);for(var a=c.length;a--;){var b=c[a];b.parentNode.removeChild(b)}}}}();LP.Ads.Google=function(){var A=[],B;return{register:function(C){A.push(C)},init:function(){if(A.length){var C=function(L,P){if(L.length){var K=new LP.Template(LP.Templates.GOOGLE_AD_WIDE),I=new LP.Template(LP.Templates.GOOGLE_AD),N,R,J=false,Q;for(var M=0,O=A.length;Q=A[M++];){R=document.getElementById(Q.id);J=Q.wide;N="";while(Q.count--&&L.length){if(J){N+=K.apply(L.shift())}else{N+=I.apply(L.shift())}}if(Q.type=="regular"){if(window.google_info!=undefined){jQuery(".js-google-ads-div").html('<a class="w" target="_blank" href="'+google_info.feedback_url+'">Ads by Google</a>')}N="<ul>"+N+"</ul>"}R.innerHTML=N}}};var G=analyticsWebSiteType.toLowerCase()+":";var H=s.channel;H=H.replace(G,"");H=H.toLowerCase();H=jQuery.trim(H);H=H.replace(/ /g,"_");if(A[0].searchPhrase){var F="w3";if(A[0].count){F="w"+A[0].count}google_afs_request_done=C;google_afs_query=A[0].searchPhrase;google_afs_ad=F;google_afs_client="northcliffe-thisisnet";google_afs_channel=H;google_afs_gl="uk";google_afs_hl="en";google_afs_adpage=(LP.getUrlParam("pageOffset"))?LP.getUrlParam("pageOffset"):1}else{google_ad_request_done=C;console.log("ADVERTS LOADING",H);google_ad_client="northcliffe-thisisnet";google_ad_channel=H;google_language="uk";google_ad_width="300";google_ad_height="250";google_ad_format="300x250_pas_abgc";google_ad_type="text";google_encoding="utf8";google_safe="high";google_adtest="off";google_ad_section="default";google_max_num_ads=0;for(var E=0,D=A.length;E<D;E++){google_max_num_ads+=A[E].count}}}}}}();function processauds(D){var C="ccaud";var B="";if(typeof (D)!="undefined"){for(var A=0;A<D.Profile.Audiences.Audience.length;A++){if(A>0){B+=";"}B+=C+"="+D.Profile.Audiences.Audience[A].abbr}LP.Ads.DC.setLotameValues(B)}}function mediaForceCallback(D){var A="lwaud";var C="";if(typeof (D)!="undefined"){for(var B=0;B<D.Profile.Audiences.Audience.length;B++){if(B>0){C+=";"}C+=A+"="+D.Profile.Audiences.Audience[B].abbr}LP.Ads.DC.setMediaForceValues(C)}};
LP.Analytics=function(){function E(F,I,L){if(typeof s=="object"&&s.visitorNamespace=="associatednorthcliffedigital"){var N="None";var G="prop1,prop2,prop3,prop4,prop5,prop6,prop15,prop19,prop21,prop29";var K=[1,2,3,4,5,6,15,19,21,29];var J=[];var M=analyticsWebSiteType.toLowerCase()+": ";if(L!==null){N=L}s.linkTrackVars=G;if(F){for(var H=0;H<K.length;H++){if(F[K[H]]){var O={propNumber:K[H],propValue:s["prop"+K[H]]};J.push(O);s["prop"+K[H]]=M+F[K[H]]}}}s.tl(true,"o",M+I);if(F){for(var H=0;H<J.length;H++){if((s["prop"+J[H].propNumber]==undefined)||(s["prop"+J[H].propNumber]=="")){s["prop"+J[H].propNumber]="";s["eVar"+J[H].propNumber]=""}else{s["prop"+J[H].propNumber]=J[H].propValue;s["eVar"+J[H].propNumber]=J[H].propValue}}}}}function C(I){var K="This is web/email/business voucher";var F="0";var H=new Date();var J=document.location.protocol+"//track.searchignite.com/si/CM/Tracking/TransactionTracking.aspx?siclientid=6894&TransactionAmount="+F+"&SICustTransType="+I+"&timecode="+H.getTime()+"&jscript=0";var G=new Image(1,1);G.src=J;document.body.appendChild(G)}function D(){var G=parseInt(Math.random()*10000000000000000);var I=(document.location.protocol=="https:"?"https:":"http:");var H=I+"//app.struq.com/s/g/z6mQRbk0HUyw0v_5bP7v9Q/?v=2&qs=page&rnd="+G;var F=document.createElement("IFRAME");F.setAttribute("src",H);F.style.width=1+"px";F.style.height=1+"px";F.style.display="none";document.body.appendChild(F)}function A(){var G=parseInt(Math.random()*10000000000000000);var I=(document.location.protocol=="https:"?"https:":"http:");var H=I+"//app.struq.com/s/g/q35HzcpOO0Sk4ogf5rPIXA/?v=2&qs=page&rnd="+G;var F=document.createElement("IFRAME");F.setAttribute("src",H);F.style.width=1+"px";F.style.height=1+"px";F.style.display="none";document.body.appendChild(F)}function B(){var G=parseInt(Math.random()*10000000000000000);var I=(document.location.protocol=="https:"?"https:":"http:");var H=I+"//app.struq.com/s/g/HINW3vewHEOXjPq_xq919w/?v=2&qs=page&rnd="+G;var F=document.createElement("IFRAME");F.setAttribute("src",H);F.style.width=1+"px";F.style.height=1+"px";F.style.display="none";document.body.appendChild(F)}return{ignitionBusinessWebSiteClick:function(){C(30300)},ignitionBusinessEmailClick:function(){C(30301)},ignitionBusinessVoucherClick:function(){C(30302)},struqBusinessEmailClick:function(){D()},struqBusinessWebSiteClick:function(){A()},struqFollowUserClick:function(){B()},logError:function(F){if(F.error.code=="1000"||F.error.code=="1001"){LP.Analytics.log(F.omnitureProperties)}},log:function(F){if(typeof s=="object"&&s.visitorNamespace=="associatednorthcliffedigital"){LP.extendObject(LP.extendObject({},s),F).t()}},customLinkBusinessVoucherWebRedeem:function(G){var H=G.target;while(H.nodeName.toLowerCase()!="a"){H=H.parentNode}var I=LP.getClassParams(H,"voucherID,businessName");var F={5:I.businessName,6:I.voucherID};E(F,"Web redeem business voucher")},customLinkPrintBusinessVoucher:function(G){var H=G.target;while(H.nodeName.toLowerCase()!="a"){H=H.parentNode}var I=LP.getClassParams(H,"businessID,businessName");var F={5:I.businessName,6:I.businessID};E(F,"Print business voucher")},customLinkBusinessEmailClick:function(F){E(F,"Business email click")},customLinkBusinessWebsiteClick:function(F){E(F,"Business website click")},customLinkPhoneNumberClick:function(F){E(F,"Business phone click")}}}();
LP.AnnouncementQuickView=function(){var A,H,F,G=false;function E(J){J.preventDefault();J.stopPropagation();var I=J.target;while(I.nodeName.toLowerCase()!="a"){I=I.parentNode}H=LP.getClassParams(I,"contentType,contentId");A=jQuery(".js-quickview-item-htmlblock-container-"+H.contentId).dialog({resizable:false,zIndex:10000,width:550,height:(jQuery(".js-quickview-item-htmlblock-container-"+H.contentId).height()+45),modal:true,draggable:false,closeOnEscape:true,dialogClass:"no-title-popup"});A.show()}function D(I){if(I){I.preventDefault();I.stopPropagation()}A.hide();jQuery(".js-quickview-item-htmlblock-container-"+H.contentId).dialog("close")}var C=function(){jQuery(".js-announcement-quick-view-trigger").bind("click",E);jQuery(".js-announcement-quick-view-close-trigger").bind("click",D)};var B=function(){jQuery(".js-announcement-quick-view-trigger").unbind("click",E);jQuery(".js-announcement-quick-view-close-trigger").unbind("click",D)};return{addListeners:C,removeListeners:B,init:function(){C()}}}();
LP.ArticleHeadlines=function(){var B,A,C;return{init:function(E){B=E[0].siteId;A=E[0].type;C=E[0].mostReadArticles;var G=jQuery(".latest-most-commented");for(var D=0;D<G.length;D++){if(G[D]){var F=new LP.Tabs({container:G[D],activeClasses:"a-w ah-w bg-blu1",inactiveClasses:"bg-gry1",tabs:G[D].getElementsByTagName("ul")[0].getElementsByTagName("li"),tabPanes:jQuery(".tab-pane",G[D]),handler:function(H){jQuery.event.trigger(LP.PageEventManager.DOMUPDATE)}});LP.forceRedraw(G[D])}}}}}();
LP.Bookmark=function(){var A=function(B){jQuery("html,body").animate({scrollTop:jQuery(B).offset().top},1000)};return{init:function(){var B=jQuery(".js-bookmark");B.length&&jQuery(".js-bookmark").on("click",function(E){var C=new RegExp("#(.+)","i").exec(LP.getTarget(E,"a","node").href)[1];var D=jQuery("#"+C);if(D){E.stopPropagation();E.preventDefault();A(D)}})},scrollTo:A}}();
LP.BusinessDashboard=function(){var A=function(C){var B=C.target;if(B.nodeName.toLowerCase()!="a"){B=jQuery(B).parent("a").get()[0]}if(jQuery(B).hasClass("disabled")){C.stopPropagation();C.preventDefault();var D=LP.getClassParams(B,"title,message");LP.Prompt.message(D.message,D.title)}};return{init:function(){jQuery(".dash-btn","#dashboard").on("click",A);jQuery(".dash-link","#business-profile-completion").on("click",A)}}}();
LP.BusinessFileUpload={init:function(){var B=jQuery("#js-image-upload").get()[0].getElementsByTagName("form")[0],C=LP.getClassParams(B,"dummy_var,url,count,limit"),A={upload_url:C.url},D="Saving business images";if(jQuery("#js-image-upload").hasClass("business-docs")){A.file_types="*.pdf;*.xls;*.xlsx;*.doc;*.docx;*.txt;*.png;*.jpg;*.jpeg;*.gif";A.file_types_description="PDF XLS XLSX DOC DOCX TXT PNG JPG JPEG GIF";A.button_text='<span class="swf-btn">add documents <span class="sm">(3mb max)</span></span>';D="Saving business documents"}LP.ImageUpload.loadedImageCount=parseInt(C.count,10);LP.ImageUpload.imageIndex=parseInt(C.count,10);LP.ImageUpload.fileUploadLimit=parseInt(C.limit,10);LP.ImageUpload.setSWFU(new SWFUpload(LP.ImageUpload.createFlashObjectSettings(A)));LP.ImageUpload.init();LP.ImageUpload.addHandlers({ok:function(){LP.Forms.submitWithProgress(B,"Please wait a moment...",D,380)},cancel:function(F){var E=F.target;while(E.nodeName.toLowerCase()!="a"){E=E.parentNode}location.href=E.href}})}};
LP.BusinessReview=function(){var E,D,C,B;var F=function(H){LP.Prompt.hide();LP.Forms.Hints.reset(E);LP.StarRatingManager.resetAll();LP.Validation.clearAllErrors();if(H.underModeration){C=new LP.Template(LP.Templates.BUSINESS_REVIEW_MODERATED)}else{C=new LP.Template(LP.Templates.BUSINESS_REVIEW)}var G=document.createElement("li");G.className="hreview media";G.innerHTML=C.apply(LP.extendObject(H,{reviewText:LP.replaceNewLines(H.reviewText),date:LP.Date.getDateString(H.createdDate,"EEEE, MMMM dd yyyy, h:mma"),rating:LP.StarRatingManager.ratingClasses[H.reviewRating],bg:H.userOwnsBusiness?"bg-gry2":"bg-blu",colours:H.userOwnsBusiness?"":"w a-grn ah-w"}));jQuery("#business-reviews").removeClass("dis-n");jQuery("html, body").animate({scrollTop:jQuery(D).offset().top},700,function(){var I=jQuery(D).children()[0];jQuery(G).insertBefore(I);if(jQuery(I).hasClass("empty")){D.removeChild(I)}jQuery.event.trigger(LP.PageEventManager.DOMUPDATE);jQuery(G).animate({opacity:1,duration:"slow",complete:function(){if(LP.isIE&&this.nodeName==="LI"){this.removeAttribute("style")}}})});H.omnitureProperties&&LP.Analytics.log(H.omnitureProperties)};var A=function(G,H){AjaxBusinessReviewHelper.submitNewBusinessReview(B,LP.currentUrl,function(I){if(I.error){LP.Prompt.message(I.error.message,I.error.title);I.omnitureProperties&&LP.Analytics.logError(I)}else{if(I.success){F(I)}else{if(I.regRedirectUrl!=null){LP.Prompt.progress("You must be logged in to submit a review, redirecting...","Redirecting to Login");window.location=I.regRedirectUrl}else{LP.Prompt.message("There was an error submitting your review, please check errors","Submit Review Failed")}}}})};return{init:function(){if(D=jQuery("#js-business-reviews")[0]){if(jQuery("#choose-featured-review")[0]){jQuery(D).on("click",function(I){I.stopPropagation();I.preventDefault();var H=I.target;while(H.nodeName.toLowerCase()!="li"&&H!=D){H=H.parentNode}if(H.nodeName.toLowerCase()=="li"){var H=jQuery(".review-choice",H)[0];var G=jQuery(".featured-review",D)[0];if(H!=G){jQuery(G).removeClass("featured-review");jQuery(H).addClass("featured-review");jQuery(".radio",H).attr("checked",true)}}})}else{E=jQuery("#review-business")[0];if(LP.dwrMethod=="submitNewBusinessReview"){AjaxBusinessReviewHelper.getBusinessReviewAfterReg(function(G){B={reviewTitle:G.reviewTitle,reviewText:G.reviewText,reviewRating:G.reviewRating,businessId:G.businessId,emailAddress:G.emailAddress};if(!G.ignore){if(G.success){LP.Prompt.progress("Please wait a moment...","Submitting review");A(G,true)}else{if(G.error){LP.Prompt.alert("Failed to submit review")}}}else{}})}LP.registerButton(jQuery("#js-submit-review")[0],function(G){if(LP.LoginJanrain){if(LP.LoginJanrain.janrainNotLoggedIn()){LP.LoginJanrain.janrainFancyBoxImmediate();LP.LoginJanrain.janrainSaveClickedEl(G.target);return false}LP.LoginJanrain.janrainFancyBoxImmediateClose()}LP.Prompt.progress("Validating review, please wait...","Validating Review");B={reviewTitle:jQuery("#reviewTitle").val(),reviewText:jQuery("#reviewText").val(),reviewRating:jQuery(".js-rating-store",E).val(),businessId:jQuery("#businessId").val()};LP.FloodControl.addInput(B,E);LP.Validation.validate({form:E,method:AjaxValidationHelper.validateBusinessReview,params:[B,LP.currentUrl],callback:function(H){if(H.success){LP.Prompt.progress("Please wait a moment...","Submitting review");A(H,false)}else{jQuery.event.trigger(LP.PageEventManager.DOMUPDATE);LP.Prompt.hide()}}})})}}}}}();
LP.BusinessSubmission=function(){var A;var B=function(){var J,M,E,C,F,D,Q,O,G;var I=function(S){var U=jQuery("#category").val();if(U>0){if(LP.isIE){jQuery("#sub-category").html("");var T=document.createElement("option");T.value=-1;T.innerHTML="Loading...";jQuery("#sub-category").append(T)}else{jQuery("#sub-category").html('<option value="-1">Loading...</option>')}AjaxBusinessHelper.getChildBusinessCategories(U,function(V){LP.addSelectOptions({selectId:"sub-category",items:V,"default":"Select Place or Service"});if(S){jQuery("#sub-category").val(S)}})}};var R=function(S){var T=new google.maps.Geocoder();J=jQuery("#validate-postcode-status-message")[0];M=jQuery("#validate-postcode-status-loading")[0];T.geocode({address:S+" UK"},function(V,U){jQuery(M).css("visibility","hidden");J.innerHTML="";S=jQuery.trim(jQuery("#businessPostcode").val());if(U==google.maps.GeocoderStatus.OK){jQuery("#latitude").val(V[0].geometry.location.lat());jQuery("#longitude").val(V[0].geometry.location.lng());LP.Map.moveMarker(V[0].geometry.location.lat(),V[0].geometry.location.lng())}else{jQuery(J).hasClass("error");J.innerHTML="Sorry, we cannot find that postcode."}})};var N=function(){jQuery(J).removeClass("error");J.innerHTML="Checking postcode...";jQuery(M).css("visibility","visible");R(jQuery("#businessPostcode").val()+", UK")};var P=function(S){LP.Prompt.progress("Please wait...","Searching Existing Businesses");AjaxBusinessHelper.getBusinessMatchingPostcode(S,function(T){if(T){F=T;H()}else{LP.Prompt.hide()}})};function H(){if(!E){E=jQuery("#js-business-popup")[0];jQuery("#js-business-popup").dialog({resizable:false,zIndex:10000,width:500,modal:true,draggable:false,dialogClass:"no-title-popup"});jQuery("#js-business-popup").dialog("open");jQuery("#js-business-popup").dialog({close:function(){E=null}});jQuery("#js-biz-btn-ok").on("click",K);jQuery("#js-biz-btn-cancel").on("click",L);D=jQuery("#js-business-list")[0];Q=new LP.Template(LP.Templates.BP_CLAIMED);O=new LP.Template(LP.Templates.BP_UNCLAIMED)}for(var U="",T=0,S=F.length;T<S;T++){U+=(F[T].claimed)?Q.apply(F[T]):O.apply(F[T])}D.innerHTML=U;LP.Prompt.hide()}function L(S){S.stopPropagation();S.preventDefault();jQuery("#js-business-popup").dialog("close")}function K(U){var T;var V=Number($("input[name=business]:checked",D).val());for(var S=F.length;S--;){T=F[S];if(T.claimed==false&&T.id===V){jQuery("#businessPostcode").val(T.postcode);jQuery("#businessName").val(T.name);jQuery("#businessAddressLine1").val(T.addressLine1||"");jQuery("#businessAddressLine2").val(T.addressLine2||"");jQuery("#businessTown").val(T.town||"");jQuery("#businessTelephonePrimary").val(T.telephone1||"");jQuery("#businessDescription").val(T.description||"");jQuery("#openingTimes").val(T.openingTimes||"");jQuery("#category").val(T.parentCategoryId);jQuery("#businessId").val(T.id);LP.Forms.CountdownManager.getCountdownById("businessDescription").adjustValue();I(T.childCategoryId)}}L(U)}return{init:function(){R(jQuery("#businessPostcode").val()+", UK");jQuery("#category").on("change",I);setTimeout(function(){I(LP.getClassParams(jQuery("#sub-category")[0])[1])},300);if(jQuery("#business-submission").hasClass("js-init-map")){N()}G=$("#businessPostcode").val();$("#businessPostcode").on("blur.searchForExistingBusinesses",function(){var V=$(this),S,U,T=V.val();if(T.replace(/ /g,"")==G){return false}S=$(this.form).validate().settings.validClass;U=V.hasClass(S);if(U){T=V.val();G=T.replace(/ /g,"");P(T)}})},searchPostcode:N}};return{get:function(){return A||(A=B())}}}();
LP.BusinessWebsiteLink=function(){var B=function(D){if(LP.Analytics){if(LP.Analytics.customLinkBusinessWebsiteClick){LP.Analytics.customLinkBusinessWebsiteClick()}if(LP.Analytics.ignitionBusinessWebSiteClick){LP.Analytics.ignitionBusinessWebSiteClick()}if(LP.Analytics.struqBusinessWebSiteClick){LP.Analytics.struqBusinessWebSiteClick()}}};var C=function(D){if(LP.Analytics){if(LP.Analytics.customLinkBusinessEmailClick){LP.Analytics.customLinkBusinessEmailClick()}if(LP.Analytics.ignitionBusinessEmailClick){LP.Analytics.ignitionBusinessEmailClick()}if(LP.Analytics.struqBusinessEmailClick){LP.Analytics.struqBusinessEmailClick()}}};var A=function(F){var D=jQuery(".js-business-website-link",F);D.length&&jQuery(D).on("click",B);var E=jQuery(".js-contact-link",F);E.length&&jQuery(E).on("click",C)};return{init:function(){A()}}}();
LP.CalendarManager=function(){var A=[];return{register:function(B){A.push(new LP.Calendar(B))}}}();LP.Calendar=function(A){this.init(A)};LP.Calendar.prototype={config:null,init:function(C){var D,A;var B={title:"",mindate:new Date,maxdate:LP.Date.twelveMonthsHence(),alignment:"bottomLeft",beforeShow:function(G,H){var F=jQuery(document.body).outerWidth();var E=jQuery(document).outerWidth();H.dpDiv.css({marginLeft:"-"+((E-F)/2)+"px"})}};C.options=LP.extendObject(B,C.options);this.config=C;D=jQuery("#"+this.config.container);A=D.next();D.datepicker({dateFormat:"dd/mm/yy",minDate:B.mindate,maxDate:B.maxdate,alignment:B.alignment,beforeShow:B.beforeShow});if(A.hasClass("ui-form__control-icon-append")){A.click(function(){D.datepicker("show")})}}};
LP.ChannelActivity=function(){return{init:function(){var B=jQuery("#channel-activity").get(0),A={ARTICLE:new LP.Template(LP.Templates.PG_CA_STORY),GALLERY:new LP.Template(LP.Templates.PG_CA_GALLERY),DISCUSSION:new LP.Template(LP.Templates.PG_CA_DISCUSSION),articleImgTemplate:new LP.Template(LP.Templates.PG_CA_STORY_ITEM_IMG),articleCommentTemplate:new LP.Template(LP.Templates.PG_CA_STORY_ITEM_COMMENT)};new LP.Pagination({module:B,params:{type:"channel_activity",channelId:LP.getClassParams(B)[1],sortOrder:LP.getUrlParam("orderByOption")},renderer:function(C){var E="";var G=LP.getUrlParam("orderByOption");for(var D=0,F;F=C[D++];){if(F.contentId!=featuredContentTakenFromActivityChannel){if(G=="latest"||G=="mostRecommended"){F.actionString="published..."}else{F.whenString=LP.Date.getDateString(F.orderDate,"EEEE, MMMM dd yyyy");if(F.actionString=="published"&&F.commentCount==0){F.actionString="published..."}else{F.actionString="last commented..."}}E+=A[F.contentType].apply(LP.extendObject(F,{img:((F.contentType=="ARTICLE")&&F.imageURL!=null)?A.articleImgTemplate.apply(F):"",cmmnt:((F.contentType=="ARTICLE")&&F.readerCommentsEnabled==true)?A.articleCommentTemplate.apply(LP.extendObject(F,{commentText:(F.commentCount==1)?"comment":"comments"})):"",wideclass:((F.contentType=="ARTICLE")&&F.imageURL!=null)?"has-thumbnail-width-article":"",commentDiscussText:((F.contentType=="DISCUSSION")&&F.commentCount==1)?"reply":"replies",commentText:((F.contentType=="ARTICLE"||F.contentType=="GALLERY")&&F.commentCount==1)?"comment":"comments",likeText:(F.likeCount==1)?"recommendation":"recommendations",authorizedContributor:(F.authorizedPublisher)?"trusted":"unknown"}))}}return E},pageContainer:jQuery("#channel-activity-results")})}}}();
LP.CommentRating=function(){var B=function(C){jQuery(".js-rate",C||jQuery("#body")).on("click",function(){var D=false,E,L,H,M,I,J,G,F=false,N=false;if(jQuery(this).attr("class").indexOf("fb-announcement-comment")!=-1){N=true}E=jQuery(this).closest(".js-comment-li")[0];L=E.id.slice(E.id.indexOf("-")+1);if(N){if(Cookie.get("fbRatings")){G=Cookie.getSubs("fbRatings");if(typeof (G)==="object"){for(var K in G){if(K==L){F=true}}}}}else{if(Cookie.get("tinRatings")){G=Cookie.getSubs("tinRatings");if(typeof (G)==="object"){for(var K in G){if(K==L){F=true}}}}}if(!F){H=jQuery(".js-rating-count",E)[0];M=parseInt(H.innerHTML);if(jQuery(this).hasClass("js-rate-up")){D=true}I=(D)?M+1:M-1;if(N){J={commentId:L,commentType:"FAMILY_BOOK",rating:I}}else{J={commentId:L,commentType:"ARTICLE",rating:I}}AjaxCommentHelper.addRating(J,function(){H.innerHTML=I;if(!N){var Q=jQuery(".js-comment-rating",E)[0];var P=jQuery(".js-current-rating",Q)[0];jQuery(Q).removeClass("comment-rating-positive");jQuery(Q).removeClass("comment-rating-negative");if(I>0){jQuery(Q).addClass("comment-rating-positive");P.innerHTML="&nbsp;"}else{if(I<0){jQuery(Q).addClass("comment-rating-negative");P.innerHTML="&nbsp;"}else{P.innerHTML=""}}var O=new Date();O.setTime(O.getTime()+(2*365*24*60*60*1000));Cookie.setSub("tinRatings",L,"rated",{expires:O})}else{var Q=jQuery(".thumb-class",E)[0];var P=jQuery(".js-rating-count",Q)[0];jQuery(Q).removeClass("fb-like-this");jQuery(Q).removeClass("fb-no-like-drk");if(I>0){jQuery(Q).addClass("fb-like-this")}else{if(I<0){jQuery(Q).addClass("fb-no-like-drk")}}var O=new Date();O.setTime(O.getTime()+(2*365*24*60*60*1000));Cookie.setSub("fbRatings",L,"rated",{expires:O})}})}else{LP.Prompt.alert("You have rated this comment already.")}})};var A=function(C){jQuery(".js-rate",C||jQuery("#body")).on("click")};return{addListeners:B,removeListeners:A}}();
LP.CommentReview=function(){var I,A,K,E,C;function B(M){M.stopPropagation();M.preventDefault();var L=M.target;while(L.nodeName.toLowerCase()!="a"){L=L.parentNode}E=LP.getClassParams(L,"dummy,reviewId");if(!I){I=jQuery(A).dialog({resizable:false,zIndex:10000,width:500,modal:true,draggable:false,dialogClass:"no-title-popup"});jQuery("#js-comment-review").on("click",G);jQuery("#js-cancel-comment-review").on("click",D)}jQuery(A).dialog("open")}function F(N){var M=jQuery(".js-comment-review-link","#js-business-reviews"),R,Q;LP.Prompt.progress("Adding response, please wait...","Adding response");for(var O=M.length;O--;){if(M[O].className.indexOf(N.reviewId)!=-1){R=M[O];Q=jQuery(R.parentNode).children().last().get(0);break}}R.parentNode.removeChild(R);var L=document.createElement("div");L.className="response cld m10-t p10 bg-stone";if(!C){C=new LP.Template(LP.Templates.REVIEW_RESPONSE)}L.innerHTML=C.apply(LP.extendObject(N,{createdDate:LP.Date.getDateString(N.createdDate,"EEEE, MMMM dd yyyy, h:mma")}));LP.Prompt.hide();var P=jQuery(Q).parents("li")[0];jQuery("html,body").animate({scrollTop:jQuery(P).offset().top},1000,function(){jQuery(L).insertAfter(Q).hide().fadeIn(300);jQuery.event.trigger(LP.PageEventManager.DOMUPDATE)})}function D(L){if(L){L.stopPropagation();L.preventDefault()}K.value="";jQuery(A).dialog("close")}function G(M){M.stopPropagation();M.preventDefault();LP.Prompt.progress("Validating your comment, please wait...","Validating Comment");var L={reviewId:E.reviewId,reviewComment:K.value};LP.Validation.validate({form:jQuery("#js-comment-review-form").get(0).getElementsByTagName("form")[0],method:AjaxValidationHelper.validateCommentReview,params:[L],callback:function(N){if(N.success){AjaxBusinessReviewHelper.commentReview(L,LP.currentUrl,function(O){if(O.regRedirectUrl!=null){LP.Prompt.progress("You must be logged in to respond to a review, redirecting...","Redirecting");window.location=O.regRedirectUrl}else{if(O.success){F(O)}else{LP.Prompt.message(O.responseMessage,"")}}});D()}else{LP.Prompt.hide()}}})}function J(M){var L=jQuery(".js-comment-review-link",M);L.length&&jQuery(L).on("click",B)}var H=function(){if(LP.dwrMethod=="commentReview"){AjaxBusinessReviewHelper.commentReviewAfterReg({callback:function(L){if(L.ignore){}else{if(L.success){F(L)}else{if(!L.ignore){LP.Prompt.alert(L.responseMessage,"")}}}},errorHandler:function(M,L){LP.Prompt.alert("Sorry, failed to add response : "+M)}})}};return{addListeners:J,init:function(){H();A=jQuery("#js-comment-review-form")[0];K=jQuery("#js-comment-review-text")[0];J()}}}();
LP.Comments=function(){var A;var C=0;var B=function(){var c,O,e,b,X,U,Q,J,Y,S,E,a,L=false,K=false;var V=function(f){return f.charAt(0).toUpperCase()+f.slice(1).toLowerCase()};var H=function(f,i){var h=(f=="top")?"#comments":document.getElementById("js-comments").lastChild;var g=(f=="top")?0:-30;jQuery("html,body").animate({scrollTop:jQuery(h).offset().top},1000,(i)?i:function(){})};var T=function(g){jQuery(g).hide();jQuery(g).fadeIn(500);var f=jQuery(".comments")[0]||[jQuery(".discussion-thread")[0],jQuery(".create-discussion-post")[0]];LP.forceRedraw(f);jQuery("#commentText").val("").change()};var I=function(l){var h,k="",j;j=LP.Date.getDateString(l.time,"EEEE, MMMM dd yyyy, h:mma");if(K){j=LP.Date.getDateString(l.time,"MMMM dd yyyy")}if(l.ratingValue!=undefined){var g="",i="";if(l.ratingValue>0){g=" comment-rating-positive ";i="&nbsp;"}else{if(l.ratingValue<0){g=" comment-rating-negative ";i="&nbsp;"}}if(!l.underModeration){k=X.apply({ratingClass:g,spacer:i,rating:l.ratingValue,commentId:l.commentId,contentType:V(E.contentType)})}}else{if(X!=undefined){k=X.apply({commentId:l.commentId,contentType:V(E.contentType)})}}if(l.authorString!=null&&l.authorString!=""){if(l.underModeration){h=b.apply({username:l.userVO.usernameOrBusinessName,authorString:l.authorString,avatarUrl:l.userVO.smallImageUrl,comment:LP.replaceNewLines(l.comment),timeStamp:j,contentType:V(E.contentType),contentId:E.contentId,commentId:l.commentId})}else{h=O.apply({username:l.userVO.usernameOrBusinessName,authorString:l.authorString,avatarUrl:l.userVO.smallImageUrl,comment:LP.replaceNewLines(l.comment),timeStamp:j,contentType:V(E.contentType),contentId:E.contentId,commentId:l.commentId})}}else{if(l.underModeration){h=e.apply({username:l.userVO.usernameOrBusinessName,profileUrl:l.userVO.profileURL,avatarUrl:l.userVO.smallImageUrl,comment:LP.replaceNewLines(l.comment),timeStamp:j,contentType:V(E.contentType),contentId:E.contentId,commentId:l.commentId})}else{h=c.apply({username:l.userVO.usernameOrBusinessName,profileUrl:l.userVO.profileURL,avatarUrl:l.userVO.smallImageUrl,comment:LP.replaceNewLines(l.comment),timeStamp:j,contentType:V(E.contentType),contentId:E.contentId,commentId:l.commentId})}}var f=document.createElement("li");if(K){f.className="fb-posted-module"}else{f.className="comment js-comment-li cf";f.id="comment-"+l.commentId}f.innerHTML=h+k+"</div>";return f};var R=function(i,g){var h;var f;var j;if(L||K){f=I({userVO:i,authorString:g.authorString,comment:g.comment,commentId:g.commentId,contentType:g.contentType,underModeration:g.underModeration,time:new Date(),ratingValue:"0"})}else{f=I({userVO:i,authorString:g.authorString,comment:g.comment,commentId:g.commentId,contentType:g.contentType,underModeration:g.underModeration,time:new Date()})}h=f;if(g.underModeration&&L){j=Y}else{j=J}if(j.getElementsByTagName("li").length){jQuery(f).insertBefore(j.getElementsByTagName("li")[0])}else{j.appendChild(f)}if(g.underModeration&&L){jQuery("#commentsPreMod").removeClass("dis-n")}else{jQuery("#comments").removeClass("dis-n")}if(K){T(h);LP.CommentRating.addListeners(f);LP.Prompt.hide();jQuery.event.trigger(LP.PageEventManager.DOMUPDATE);LP.forceRedraw(jQuery(".comments"));if(!g.underModeration){Z()}}else{LP.CommentRating.addListeners(f);LP.Prompt.hide();jQuery.event.trigger(LP.PageEventManager.DOMUPDATE);H("top",function(){T(h)});if(!g.underModeration){Z()}}};var P=function(i,g){var f=I({userVO:i,authorString:g.authorString,comment:g.comment,underModeration:g.underModeration,commentId:g.commentId,time:new Date()});var h=f;J.appendChild(f);jQuery("#discussionComments").removeClass("dis-n");LP.CommentRating.addListeners(f);LP.Prompt.hide();jQuery.event.trigger(LP.PageEventManager.DOMUPDATE);H("bottom",function(){T(h)});if(!g.underModeration){Z()}};var D=function(g){var f;if(L){f=I({userVO:g.commentedBy,authorString:g.authorString,comment:g.text,commentId:g.id,time:g.createdDate,underModeration:g.underModeration,ratingValue:g.ratingValue})}else{f=I({userVO:g.commentedBy,authorString:g.authorString,comment:g.text,commentId:g.id,underModeration:g.underModeration,time:g.createdDate})}J.appendChild(f)};var Z=function(){if(K){jsCommentCount=parseInt($("#announcement-comment-count").val());jsCommentCount=jsCommentCount+1;$(".comment-count").html(jsCommentCount)}if(window.jsCommentCount!=undefined){jsCommentCount=jsCommentCount+1;var h=jQuery("#jsCommentCount")[0];if(h&&(jsCommentCount>1)){h.innerHTML=jsCommentCount}var f=jQuery(".comments-bubble");if(f.length>0){for(var g=0,j;j=f[g++];){j.innerHTML=jsCommentCount}}}};var F=function(g){var f=g.target;if(f.nodeName.toLowerCase()!="form"){f=jQuery(f).parents("form")[0]}addCommentVO=LP.FloodControl.addInput(LP.extendObject(E,{comment:jQuery("#commentText").val(),commentType:E.contentType}),f);LP.Prompt.progress("Validating comment, please wait...","Validating comment");LP.Validation.validate({form:f,method:AjaxValidationHelper.validateComment,params:[addCommentVO,LP.currentUrl],callback:function(h){if(h.success){M(addCommentVO)}else{LP.Prompt.hide()}jQuery.event.trigger(LP.PageEventManager.DOMUPDATE)}});return false};var M=function(f){LP.Prompt.progress("Adding comment, please wait...","Adding comment");AjaxCommentHelper.addComment(f,LP.currentUrl,{callback:function(g){if(g.error){LP.Prompt.message(g.error.message,g.error.title);g.omnitureProperties&&LP.Analytics.logError(g)}else{if(!g.validInput){LP.Prompt.alert("Must not contain any of the following characters '<>'")}else{if(g.exceedsMaxLength){LP.Prompt.alert("Sorry, the maximum comment length is 5000 characters.")}else{if(g.success){W(g)}else{if(g.regRedirectUrl!=null){LP.Prompt.progress("You must be logged in to add a comment, redirecting...","Redirecting to login");window.location=g.regRedirectUrl}else{LP.Prompt.alert(LP.Prompt.texts.sorry)}}}}}},errorHandler:function(h,g){LP.Prompt.alert("Sorry, failed to add comment : "+h)}});return false};var G=function(){if(LP.dwrMethod=="addComment"){AjaxCommentHelper.addCommentAfterReg({callback:function(f){if(f.error){LP.Prompt.message(f.error.message,f.error.title);f.omnitureProperties&&LP.Analytics.logError(f)}else{if(f.success){LP.Prompt.progress("Adding comment, please wait...","Adding comment");W(f)}else{if(!f.ignore){LP.Prompt.alert("Your comment submission failed, please try again.")}}}},errorHandler:function(g,f){LP.Prompt.alert("Sorry, failed to add comment : "+g)}})}};var W=function(f){f.omnitureProperties&&LP.Analytics.log(f.omnitureProperties);AjaxUserHelper.getUserDetails(function(g){if(f.commentType==Q.discussionType){P(g,f)}else{if(f.commentType==Q.articleType){if(!f.underModeration){LP.Comments.tabs.selectTab(0)}R(g,f)}else{if(f.commentType==Q.eventType||f.commentType==Q.galleryType||f.commentType==Q.announcementType){R(g,f)}}}})};var N=function(j){C=1;j.preventDefault();j.stopPropagation();if(L){var h=this;h.style.visibility="hidden";var k=LP.Comments.tabs.getCurrentTabPane();J=jQuery(".js-comments",U)[0];AjaxCommentListHelper.getSortedComments(E.contentId,E.contentType,k.id,C,function(n){LP.CommentRating.removeListeners(J);J.innerHTML="";for(var m=0,l=n.comments.length;m<l;m++){D(n.comments[m])}jQuery.event.trigger(LP.PageEventManager.DOMUPDATE);LP.forceRedraw(jQuery(".comments"));LP.CommentRating.addListeners(J)})}else{for(var g=0,f;f=viewAllAnchors[g++];){f.parentNode.parentNode.removeChild(f.parentNode)}AjaxCommentListHelper.getAllLiveComments(E.contentId,E.contentType,0,function(n){J.innerHTML="";for(var m=0,l=n.comments.length;m<l;m++){D(n.comments[m])}jQuery.event.trigger(LP.PageEventManager.DOMUPDATE);LP.forceRedraw(jQuery(".comments"))})}return false};function d(){var f=LP.Comments.tabs.getCurrentTabPane();AjaxCommentListHelper.getSortedComments(E.contentId,E.contentType,f.id,C,function(j){U=LP.Comments.tabs.getCurrentTabPane();J=jQuery(".js-comments",U)[0];LP.CommentRating.removeListeners(J);J.innerHTML="";for(var h=0,g=j.comments.length;h<g;h++){D(j.comments[h])}jQuery.event.trigger(LP.PageEventManager.DOMUPDATE);LP.forceRedraw(jQuery(".comments"));LP.CommentRating.addListeners(J)})}return{init:function(f){if((f[0]!=undefined)&&(f[0].isArticle==true)){L=true}if((f[0]!=undefined)&&(f[0].isAnnouncement==true)){K=true}if(L){this.container=jQuery("#comments").get(0);this.tabs=new LP.Tabs({container:this.container,activeClasses:"",inactiveClasses:"",tabs:this.container.getElementsByTagName("ul")[0].getElementsByTagName("li"),tabPanes:jQuery(".tab-pane",this.container),handler:function(){d()}});LP.forceRedraw(this.container);J=jQuery(".js-comments")[0];Y=jQuery("js-comments-moderation")[0];U=LP.Comments.tabs.getCurrentTabPane()}else{J=jQuery("#js-comments")[0]}G();c=new LP.Template(LP.Templates.COMMENT);O=new LP.Template(LP.Templates.COMMENT_WITH_AUTHOR_STRING);e=new LP.Template(LP.Templates.COMMENT_MODERATED);b=new LP.Template(LP.Templates.COMMENT_MODERATED_WITH_AUTHOR_STRING);if(L){X=new LP.Template(LP.Templates.COMMENT_RATING)}else{X=new LP.Template(LP.Templates.COMMENT_REPORT_BUTTON)}if(K){c=new LP.Template(LP.Templates.FAMILYBOOK_COMMENT);O=new LP.Template(LP.Templates.FAMILYBOOK_COMMENT);X=new LP.Template(LP.Templates.FB_COMMENT_RATINGFOOTER)}Q={articleType:"ARTICLE",discussionType:"DISCUSSION",galleryType:"GALLERY",eventType:"EVENT",announcementType:"FAMILY_BOOK"};form=jQuery("#story-comment-form")[0]||jQuery("#post-reply")[0];E=LP.getClassParams(form,"contentType,contentId,owner,lastContributor");if(L){jsAllCommentLink=jQuery(".js-all-comments",this.container)[0];jQuery(jsAllCommentLink).on("click",N)}else{viewAllAnchors=[];jsAllCommentDivs=jQuery(".js-all-comments","body");for(var g=0,h;h=jsAllCommentDivs[g++];){anchor=jQuery(h).find(">:first-child").get(0);viewAllAnchors.push(anchor);jQuery(anchor).on("click",N)}}if(L||K){LP.CommentRating.addListeners()}LP.registerButton("js-submit-comment",F)}}};return{get:function(){return A||(A=B())}}}();var refreshLocation=function(){var A=window.location.href.indexOf("?");window.location.href=window.location.href.substring(0,A)+"?random="+Math.floor(Math.random()*10000000)};
LP.Date=function(){function B(C){return(C<10?"0":"")+C}function A(C){return C+({1:"st",21:"st",31:"st",2:"nd",22:"nd",3:"rd",23:"rd"}[C]||"th")}return{getDateString:function(C,E){if(typeof C=="object"){if(E=="dd/MM/yyyy"){var D=C.getFullYear()}else{if(E.indexOf("EEEE, MMMM dd yyyy")!=-1){var F=LP.Date.getDayString(C)+", "+LP.Date.getMonthString(C)+" "+C.getDate()+" "+C.getFullYear();if(E=="EEEE, MMMM dd yyyy, h:mma"){F+=", "+LP.Date.getMeridiemHour(C)+":"+B(C.getMinutes())+LP.Date.getMeridiem(C)}return F}else{if(E.indexOf("MMMM dd yyyy")!=-1){var F=LP.Date.getMonthString(C)+" "+C.getDate()+" "+C.getFullYear();return F}else{var D=(C.getFullYear()+"").substring(2,4)}}}return B(C.getDate())+"/"+B(C.getMonth()+1)+"/"+D}else{return""}},getMeridiem:function(C){return(C.getHours()<11)?"AM":"PM"},getMeridiemHour:function(C){return((C.getHours()+11)%12)+1},getDayString:function(C){return(["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"])[C.getDay()]},getMonthString:function(C){return(["January","February","March","April","May","June","July","August","September","October","November","December"])[C.getMonth()]},getShortMonthString:function(C){return(["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"])[C.getMonth()]},getTodaysDate:function(){var C=new Date();return LP.Date.getDayString(C)+", "+A(C.getDate())+" "+LP.Date.getMonthString(C)+" "+C.getFullYear()},getTodaysDate2012:function(){var C=new Date();return LP.Date.getMonthString(C)+" "+A(C.getDate())+" "+C.getFullYear()},getDate:function(D){var C=D.split("/"),E=C[1];return new Date(C[2],E-1,C[0])},getTimeString:function(C){return B(C.getHours())+":"+B(C.getMinutes())},getTimeStamp:function(C){return this.getTimeString(C)+" on "+this.getDateString(C)},twelveMonthsHence:function(){var C=new Date();C.setMonth(C.getMonth()+12);C.setDate(C.getDate()-1);return C}}}();
LP.DiscussionUpload=function(){return{init:function(){var A=document.getElementById("postThreadForm"),B=LP.GroupPicker.get();LP.registerButton("js-discussion-submit",function(C){LP.Prompt.progress("Please wait a moment...","Validating discussion");LP.Validation.validate({form:A,method:AjaxValidationHelper.validateContent,params:[{contentType:"DISCUSSION",discussionVO:{discussionTitle:document.getElementById("discussionTitle").value}},LP.currentUrl],callback:function(D){if(D.success){B.addHandlers({ok:function(){var E=B.getChosenGroups();document.getElementById("upload-editorial-id").value=E.editorialId||"";document.getElementById("upload-specialist-id").value=E.specialistId||"";LP.Forms.submitWithProgress(A,"Please wait a moment...","Saving discussion")}});B.show()}else{LP.Prompt.hide()}}})})}}}();
LP.Event={};LP.Event.Form=function(){var B,A,G,C,E,F,H;function D(){jQuery(A).css("display",(G.value=="1")?"none":"block")}function I(){A=jQuery(".js-repeat-until-container");G=document.getElementById("repeatInterval");D();jQuery("#repeatInterval").on("change",function(){D();return false});B=new google.maps.Geocoder();E=document.getElementById("validate-postcode-status-message");F=document.getElementById("validate-postcode-status-loading");C=document.getElementById("postCode");jQuery(C).on("change",function(J){jQuery(E).removeClass("dis-n");jQuery(C).removeClass("failed");E.innerHTML="Validating postcode...";jQuery(F).removeClass("vis-h");B.geocode({address:C.value+" UK"},function(L,K){if(K==google.maps.GeocoderStatus.OK){document.getElementById("latitude").value=L[0].geometry.location.lat();document.getElementById("longitude").value=L[0].geometry.location.lng();E.innerHTML=""}else{E.innerHTML="Sorry we couldn't recognise your postcode";jQuery(E).addClass("error");jQuery(C).addClass("failed");document.getElementById("latitude").value="";document.getElementById("longitude").value=""}jQuery(F).addClass("vis-h")})});LP.CalendarManager.register({container:"startDate",options:{title:"The event start date:",alignment:"bottomLeft"},input:"startDate"});LP.CalendarManager.register({container:"repeatUntil",options:{title:"Repeat the event until this date:",alignment:"bottomLeft"},input:"endDate"})}return{init:I}}();LP.Event.Submission=function(){var F,G,D;function H(I){return LP.Forms.Hints.realValue(G[I])}function E(){LP.Prompt.progress("Please wait a moment...","Validating event details");var I={contentType:"EVENT",eventVO:{eventTitle:H("eventTitle"),eventDescription:H("eventDescription"),postCode:H("postCode"),latitude:G.latitude.value,longitude:G.longitude.value,startDate:(H("startDate")!="")?LP.Date.getDate(G.startDate.value):"",repeatUntil:(H("repeatUntil")!="")?LP.Date.getDate(G.repeatUntil.value):"",repeatInterval:G.repeatInterval.value,eventChannelCategory:H("eventChannelCategory")}};LP.Validation.validate({form:F,method:AjaxValidationHelper.validateContent,params:[I,LP.currentUrl],callback:function(J){(J.success)?C():LP.Prompt.hide()},errorHandler:function(K,J){LP.Prompt.alert("Sorry, failed to submit event : "+K)}})}function C(){if(parseInt(G.repeatInterval.value)==1){G.repeatUntil.value=""}LP.Forms.submitWithProgress(F,"Please wait a moment...",(D=="edit")?"Updating your Event":"Creating your Event")}function A(){LP.Event.Form.init();F=document.getElementById("eventSubmissionForm");G=LP.storeDomEls("eventTitle,eventDescription,eventChannelCategory,postCode,latitude,longitude,startDate,repeatUntil,repeatInterval",F);D=LP.getUrlParam("eventId")?"edit":"new";LP.registerButton("submit-event-btn",E)}function B(){var I=document.getElementById("js-image-upload").getElementsByTagName("form")[0],J=LP.getClassParams(I,"dummy_var,url,count,limit");LP.ImageUpload.uploadArticleImages=true;LP.ImageUpload.loadedImageCount=parseInt(J.count,10);LP.ImageUpload.imageIndex=parseInt(J.count,10);LP.ImageUpload.fileUploadLimit=parseInt(J.limit,10);LP.ImageUpload.setSWFU(new SWFUpload(LP.ImageUpload.createFlashObjectSettings({upload_url:J.url})));LP.ImageUpload.init();LP.ImageUpload.addHandlers({ok:function(){LP.Prompt.progress("Please wait a moment...","Validating event pictures");LP.Validation.validate({form:I,method:AjaxValidationHelper.validateImageUploadVO,params:[{contentType:"EVENT",imageFileVOs:LP.ImageUpload.getImageFileVOs()},LP.currentUrl],callback:function(K){if(K.success){LP.Forms.submitWithProgress(I,"Please wait a moment...","Posting event pictures",380)}else{LP.Prompt.hide()}}})},cancel:function(L){var L=L||window.event;var K=L.target||L.srcElement;while(K.nodeName.toLowerCase()!="a"){K=K.parentNode}location.href=K.href}})}return{init:function(){document.getElementById("js-image-upload")?B():A()}}}();LP.Event.Search=function(){return{init:function(){LP.CalendarManager.register({container:"startDate",options:{title:"Search from date:"},input:"startDate"});LP.CalendarManager.register({container:"endDate",options:{title:"Search to date:"},input:"endDate"})}}}();LP.Event.DateList=function(){return{init:function(A){jQuery("#js-event-dates").datepicker({numberOfMonths:2,dates:A.dates,beforeShowDay:function(D){var F=D.getFullYear(),G=D.getMonth(),C=D.getDate();for(var E=0;E<dates.length;++E){var B=dates[E].split("/");if(F==B[2]&&G==B[0]-1&&C==B[1]){return[true,"ui-state-highlight ui-state-active","Event on this date"]}}return[false]}})}}}();
LP.Events=function(){function B(){var C=document.getElementById("eventSearchForm");var E=document.getElementById("js-eventChannelCategory");var D=E[E.selectedIndex].value;if(D==="/other"){C.action="/entertainment"}else{C.action=E[E.selectedIndex].value}}function A(D){var C=document.getElementById("js-eventChannelCategory");C.value=D;B()}return{init:function(D){var C=document.getElementById("event-results");var F=document.getElementById("js-eventChannelCategory");jQuery(F).on("change",B);var E=new LP.Template(LP.Templates.PG_EVENT_ITEM_IMG);A(D[0].channelPath);new LP.Pagination({module:C,params:{type:"event",siteId:LP.site.id,channelId:LP.getClassParams(C)[1],startDate:document.getElementById("startDate").value,endDate:document.getElementById("endDate").value,searchPhrase:document.getElementById("searchPhrase").value,eventChannelCategory:document.getElementById("js-eventChannelCategory")[document.getElementById("js-eventChannelCategory").selectedIndex].value},renderer:function(G){var I="";for(var H=0,J;J=G[H++];){I+=this.itemTemplate.apply(LP.extendObject(J,{img:(J.thumbnailUrl!=null)?E.apply(J):""}))}return I},itemTemplate:new LP.Template(LP.Templates.PG_EVENT_ITEM),pageContainer:C.getElementsByTagName("ul")[0],callback:function(){}})}}}();
LP.FaderManager=function(){faderObjects=new Array();function C(D){var F=false;for(var E=0;E<faderObjects.length;E++){if(faderObjects[E]._container.id==D){F=faderObjects[E]}}return F}function B(D){var E=C(D);if(E!=false){if(E._currentItem!=undefined&&E._currentItem!=null){return E._items[E._currentItem]}else{return false}}else{return false}}function A(D,F){var E=C(D);if(E!=undefined&&E!=null){jQuery(E._container).on(E._afterCallBackEvent,jQuery.proxy(F,E))}else{return false}}return{init:function(F){faderParams={featuredContent:{staticFader:false,updateFrequency:8000,singleCycle:false},"default":{staticFader:true,updateFrequency:8000,singleCycle:true}};var D=jQuery(".js-fader");for(var G=0,I;I=D[G++];){J=faderParams[(I.type)];var H=new LP.Fader(I,J);faderObjects.push(H)}var J;for(var G=0,E=F.length;G<E;G++){J=faderParams[(F[G].type)];if(J==undefined){J=faderParams[("default")]}new LP.Fader(F[G].id,J)}},subscribeToAfterFadeEventByContainerId:function(E,D){A(D,E)},currentItemByFaderContainerId:function(D){return(B(D))}}}();LP.Fader=function(A,B){this.options=LP.extendObject({staticFader:true,updateFrequency:3000,singleCycle:false},B);this._fadeContainer=document.createElement("div");this._container=A;this._init(B);this._afterCallBackEvent="afterCallBackEvent"};LP.Fader.prototype={_currentItem:0,_animating:false,_init:function(I){this.changePermanentStop=false;this._items=jQuery(".fader-item",this._container);var H=this,F=jQuery(".fader-left")[0],A=jQuery(".fader-right")[0],B=jQuery(".fader-indicator"),D=this._items[this._currentItem],C="cc-site";if(D){C=LP.getChannelColour(D)}if(B.length){B=B[0];this._indicators=B.getElementsByTagName("li")}this._componentsContainer=F.parentNode;jQuery(this._fadeContainer).addClass("fader-container");jQuery(this._fadeContainer).addClass("dis-n");jQuery(this._fadeContainer).hide();if(D){jQuery(this._fadeContainer).insertAfter(D.parentNode)}C&&jQuery(this._componentsContainer).addClass(C);var G=function(J,K){K.stopPropagation();K.preventDefault();if(!H._animating){H._animating=true;LP.isIE6&&(H._prevItem=H._items[H._currentItem]);J.call(H)}};var E=function(){H.stopChangePermanent()};if(!this.options.staticFader){jQuery(this._container).on("mouseover",this.mouseoverContainer);jQuery(this._container).on("mouseout",this.mouseoutContainer);this.periodicallyChange()}jQuery(F).on("click",function(J){G(H.previous,J);E()});jQuery(A).on("click",function(J){G(H.next,J);E()})},mouseoverContainer:function(A){if(LP.mouseEnterOrLeave(A,this)){this.stopChange()}},mouseoutContainer:function(A){if(LP.mouseEnterOrLeave(A,this)){if(!this.options.staticFader){this.periodicallyChange()}}},_fadeItem:function(){var B=this,C=this._items[this._currentItem],E=C.getElementsByTagName("img");if(this.options.staticFader===true){if(LP.Analytics){LP.Analytics.log()}}for(var D=0,A;A=E[D++];){if(A.src.indexOf("1x1.gif")>-1){A.src=LP.getClassParams(A)[0]}}jQuery(B._fadeContainer).removeClass("dis-n");jQuery(this._fadeContainer).fadeIn(200,function(){var F=B._items[B._currentItem];jQuery(B._items).addClass("dis-n");jQuery(F).removeClass("dis-n");jQuery(F).trigger(B._afterCallBackEvent)}).fadeOut(500,function(){jQuery(B._fadeContainer).hide();B._animating=false});if(this._indicators){jQuery(this._indicators).removeClass("selected");jQuery(this._indicators[this._currentItem]).addClass("selected")}jQuery.event.trigger(LP.PageEventManager.DOMUPDATE)},previous:function(){if(--this._currentItem==-1){this._currentItem=this._items.length-1}this._fadeItem()},next:function(){this._currentItem=(this._currentItem+1)%this._items.length;this._fadeItem()},stopChange:function(){clearInterval(this.timer)},stopChangePermanent:function(){clearInterval(this.timer);jQuery(this._container).off("mouseover");jQuery(this._container).off("mouseout")},periodicallyChange:function(){var B=this;function A(){B.next()}if(!this.changePermanentStop){this.timer=setInterval(A,this.options.updateFrequency)}}};
LP.FloodControl={addInput:function(C,A){var B=jQuery(".email_address").val();return LP.extendObject(C,{emailAddress:B})}};
LP.FollowUser=function(){var F;function A(I){I.stopPropagation();I.preventDefault();var H=LP.getTarget(I,"a","node"),J=H.id.substr(7),G=H.className;if(LP.LoginJanrain){if(LP.LoginJanrain.janrainNotLoggedIn()){LP.LoginJanrain.janrainFancyBoxImmediate();LP.LoginJanrain.janrainSaveClickedEl(H);return false}LP.LoginJanrain.janrainFancyBoxImmediateClose()}if(G.indexOf("js-follow-user")>-1){LP.Prompt.message("Please wait a moment...","Following user",true);AjaxFollowUserHelper.followUser(J,LP.currentUrl,function(K){if(K.success){D(K,H,"follow");C()}else{if(K.regRedirectUrl!=null){LP.Prompt.progress("You must be logged in to follow this user, redirecting...","Redirecting to login");window.location=K.regRedirectUrl}else{if(K.ignore){}else{if(K.fatalError){LP.Prompt.message(LP.Prompt.texts.sorry,"Following user")}else{LP.Prompt.message('You are already following <br/>"'+K.username+'"',"Connecting")}}}}})}else{if(G.indexOf("js-unfollow-user")>-1){LP.Prompt.message("Please wait a moment...","Unfollowing user",true);AjaxFollowUserHelper.unFollowUser(J,LP.currentUrl,function(K){if(K.success){D(K,H,"unfollow")}else{if(K.regRedirectUrl!=null){window.location=K.regRedirectUrl}else{if(K.ignore){}else{if(K.fatalError){LP.Prompt.message(LP.Prompt.texts.sorry,"Unfollowing user")}else{LP.Prompt.message('You are not following <br/>"'+J+'"',"Unfollowing")}}}}})}}}function C(){LP.Analytics.struqFollowUserClick()}function B(){if(LP.dwrMethod=="followUser"){AjaxFollowUserHelper.followUserAfterReg(function(G){try{if(!G.ignore){LP.Prompt.message("Please wait a moment...","Following user",true)}if(G.success){D(G,LP.getTarget(e,"a","node"),"follow")}else{if(G.fatalError){LP.Prompt.message(LP.Prompt.texts.sorry,"Following user")}else{if(!G.ignore){LP.Prompt.message('You are already following <br/>"'+G.usernameOrBusinessName+'"',"Connecting")}}}}catch(H){LP.Prompt.hide()}})}}function D(I,K,J){var H=F[J];I.omnitureProperties&&LP.Analytics.log(I.omnitureProperties);var G=I.usernameOrBusinessName!=null?I.usernameOrBusinessName:I.username;LP.Prompt.message(H.message+'<br />"'+G+'"',H.messageHead);jQuery(".text",K)[0].innerHTML=H.buttonText;jQuery(K).removeClass(K.className.match(/js\-(un)*follow\-user/)[0]);jQuery(K).addClass(H.buttonClass)}function E(I){I.stopPropagation();I.preventDefault();var H=LP.getTarget(I,"a","node"),J=H.id.substr(6),G=H.className;if(G.indexOf("js-block-user")>-1){LP.Prompt.progress("Please wait a moment...","Blocking user",true);AjaxFollowUserHelper.blockUser(J,function(K){if(K.success){LP.Prompt.message('You have successfully blocked<br/> "'+J+'"',"Blocking user");jQuery(".text",H)[0].innerHTML="Unblock";H.className=H.className.replace("block","unblock")}else{if(K.regRedirectUrl!=null){window.location=K.regRedirectUrl}else{if(K.fatalError){LP.Prompt.message(LP.Prompt.texts.sorry,"Blocking user")}else{LP.Prompt.message('You have already blocked<br /> "'+J+'"',"Blocking user")}}}})}else{if(G.indexOf("js-unblock-user")>-1){LP.Prompt.progress("Please wait a moment...","Unblocking user",true);AjaxFollowUserHelper.unblockUser(J,function(K){if(K.success){LP.Prompt.message('You have successfully unblocked<br/>"'+J+'"',"Unblocking user");jQuery(".text",H)[0].innerHTML="Block";H.className=H.className.replace("block","unblock")}else{if(K.regRedirectUrl!=null){window.location=K.regRedirectUrl}else{if(K.fatalError){LP.Prompt.message(LP.Prompt.texts.sorry,"Unblocking user")}else{LP.Prompt.message('You have already unblocked <br/>"'+J+'"',"Connecting")}}}})}}}return{init:function(){B();F={follow:{prop17:"/Follow user",message:"You are now following",messageHead:"Following user",buttonText:"Unfollow",buttonClass:"js-unfollow-user"},unfollow:{prop17:"/Unfollow user",message:"You stopped following",messageHead:"Unfollowing user",buttonText:"Follow",buttonClass:"js-follow-user"}};var G=jQuery(".js-follow-user").add(jQuery(".js-unfollow-user"));G.length&&jQuery(G).on("click",A);var H=jQuery(".js-block-user").add(jQuery(".js-unblock-user")[0]);H.length&&jQuery(H).on("click",E)}}}();
LP.FootballFixturesResults=function(){FIXTURE_HIDDEN_ROW_TRIGGER_CLASS="fixture-trigger-element";FIXTURE_HIDDEN_ROW_TRIGGER_CLASS_HOVER="fixture-trigger-element-hover";FIXTURE_HIDE_ROW_CLASS="hidden-info";FIXTURE_SHOW_ROW_CLASS="visible-info";FIXTURE_HIDDEN_INFO_ROW_CLASS="extra-football-information";FIXTURE_SELECTED_ROW_CLASS="selected-fixture";FIXTURE_PAGE_NUMBER_PLACEHOLDER="fixtures-page-number-display";FIXTURE_FADER_CONTAINER_ID="football-fixtures-fader-container";FIXTURE_NAV_INFO_CONTAINER_ID="fixtures-nav-info-container";var D=false;function B(){jQuery.event.trigger(LP.PageEventManager.DOMUPDATE);if(D==false){LP.FaderManager.subscribeToAfterFadeEventByContainerId(E,FIXTURE_FADER_CONTAINER_ID);D=true}}function I(){}function H(){}function E(M){var K=jQuery(".page-indicator",M.target);var J=K[0].innerHTML;var L=jQuery("#fixtures-page-number-display");L.html("Page number: "+J);jQuery.event.trigger(LP.PageEventManager.DOMUPDATE)}function G(){var L=jQuery(".extra-football-information");var K=jQuery(".fixture-trigger-element");for(var J=0;J<L.length;J++){jQuery("#"+L[J].id).addClass(FIXTURE_HIDE_ROW_CLASS);jQuery("#"+L[J].id).removeClass(FIXTURE_SHOW_ROW_CLASS)}for(var J=0;J<K.length;J++){jQuery("#"+K[J].id).removeClass(FIXTURE_SELECTED_ROW_CLASS)}}function C(K){var L;var M;var N;var J;if(K==undefined){return false}G()}function A(){jQuery.event.trigger(LP.PageEventManager.DOMUPDATE)}function F(X){X.stopPropagation();var U=this.id;var R=jQuery(".extra-football-information");var J=jQuery(".fixture-trigger-element");var Q="#"+U+"-hidden-info";for(var Y=0;Y<R.length;Y++){if(R[Y].id!=U+"-hidden-info"){jQuery("#"+R[Y].id).addClass(FIXTURE_HIDE_ROW_CLASS);jQuery("#"+R[Y].id).removeClass(FIXTURE_SHOW_ROW_CLASS)}}for(var Y=0;Y<J.length;Y++){if(J[Y].id!=U){jQuery("#"+J[Y].id).removeClass(FIXTURE_SELECTED_ROW_CLASS)}}if(jQuery(Q).hasClass(FIXTURE_SHOW_ROW_CLASS)){jQuery(Q).addClass(FIXTURE_HIDE_ROW_CLASS);jQuery(Q).removeClass(FIXTURE_SHOW_ROW_CLASS);jQuery("#"+U).removeClass(FIXTURE_SELECTED_ROW_CLASS)}else{jQuery(Q).removeClass(FIXTURE_HIDE_ROW_CLASS);jQuery(Q).addClass(FIXTURE_SHOW_ROW_CLASS);jQuery("#"+U).addClass(FIXTURE_SELECTED_ROW_CLASS)}jQuery.event.trigger(LP.PageEventManager.DOMUPDATE);var L=jQuery("#"+FIXTURE_NAV_INFO_CONTAINER_ID);var N=jQuery("#"+U+"-hidden-info");var T=jQuery(".match-info-container","#"+U+"-hidden-info");var K=jQuery(N).position();var W=jQuery(T).height();var Z=K.top+W;var S=jQuery(L).position();var b=jQuery(L).height();var a=S.top;var M=Z>a;if(M){var P=jQuery("#"+U);var V=jQuery(P).height();var O=-10;O-=(V+W);jQuery(N).css("top",O+"px")}}return{init:function(){var J=jQuery(".fixture-trigger-element");jQuery(J).on("click",F);jQuery(document).on("click",C);jQuery(".match-info-container").click(function(K){K.stopPropagation()})}}}();
LP.Forms=LP.Forms||{};LP.Forms.ButtonManager=function(){var D={},B=0;function A(G){if(G=(typeof (G)=="string")?jQuery("#"+G)[0]:G){try{var F=G;F.id=F.id||"btn-"+B++;if(D[F.id]){return D[F.id]}else{var E=new LP.Forms.Button({container:G,btn:F});D[F.id]=E;return E}}catch(H){throw ("Trying to create a button on the wrong kind of html element")}}return false}function C(H,I,G){if(H.constructor==Array){for(var F=H.length;F--;){LP.registerButton(H[F],I)}return }var E=A(H);if(!E){return false}E.addListener(I,G);return E}return{register:C,enableButtons:function(H){var F=H||D;var G;var E=F.length-1;for(G=0;G<=E;G++){F[G].enable()}},disableButtons:function(H){var F=H||D;var G;var E=F.length-1;for(G=0;G<=E;G++){F[G].disable()}},getButton:A,init:function(){var E=Array.prototype.concat.call(jQuery(".btn-std"),jQuery(".btn-std-s"));C(E)}}}();LP.registerButton=LP.Forms.ButtonManager.register;LP.getButton=LP.Forms.ButtonManager.getButton;LP.Forms.Button=function(A){this._init(A);this._listeners=[]};LP.Forms.Button.prototype={_init:function(A){this._btn=A.btn;this._container=A.container;this._isInput=(this._btn.nodeName.toLowerCase()=="input");this._isSubmit=(this._isInput&&this._btn.type=="submit");this._form=(this._isSubmit)?jQuery(this._btn).parents("form").get(0):null;this._ieHoverEffect();this._enabled=!(jQuery(this._container).hasClass("btn-std-dis")||jQuery(this._container).hasClass("btn-std-s-dis"))},_ieHoverEffect:function(){if(this._isInput&&LP.isIE6){var B=(jQuery(this._container).hasClass("btn-std-s"))?"btn-hvr-s":"btn-hvr";var A=this;jQuery(this._container).on("mouseover",function(C){if(LP.mouseEnterOrLeave(C,this)&&A._enabled){jQuery(this).addClass(B)}});jQuery(this._container).on("mouseout",function(C){if(LP.mouseEnterOrLeave(C,this)&&A._enabled){jQuery(this).removeClass(B)}})}},_do_addListener:function(B,A){jQuery(B).on(A,jQuery.proxy(function(E){if(this._enabled){for(var D=0,C=this._listeners.length;D<C;D++){this._listeners[D].call(this,E)}}return false},this))},addListener:function(B,A){if(this._listeners.length==0){B=B||this.createDefaultListener();if(B){this._do_addListener.call(this,this._container,"click");if(this._isSubmit){this._do_addListener.call(this,this._form,"submit")}}}if(B){if(A||(this._listeners.length==1&&this._listeners[0]._isDefault)){this._listeners=[B]}else{this._listeners.push(B)}}},createDefaultListener:function(){var C=this._container.className.match(/js\-(progress|message|alert)\|/);if(C||this._isSubmit){if(C){var B=LP.getClassParams(this._container);switch(C[1]){case"alert":var A=function(D){D.stopPropagation();D.preventDefault();LP.Prompt.alert(B[1])};break;case"message":var A=function(D){D.stopPropagation();D.preventDefault();LP.Prompt.message(B[2],B[1])};break;case"progress":var A=function(){LP.Forms.submitWithProgress(this._form,B[2],B[1])};break}}else{var A=function(){this._form.submit()}}A._isDefault=true;return A}},enable:function(){this._enabled=true;(jQuery(this._container).hasClass("btn-std"))?jQuery(this._container).removeClass("btn-std-dis"):jQuery(this._container).removeClass("btn-std-s-dis");jQuery(this._container).removeAttr("disabled")},disable:function(){this._enabled=false;(jQuery(this._container).hasClass("btn-std"))?jQuery(this._container).addClass("btn-std-dis"):jQuery(this._container).addClass("btn-std-s-dis");jQuery(this._container).attr("disabled","disabled")},show:function(){jQuery(this._container).removeClass("dis-n")},hide:function(){jQuery(this._container).addClass("dis-n")},setText:function(A){(this._isInput)?this._btn.value=A:jQuery(".text",this._btn)[0].innerHTML=A},setTitle:function(A){(this._isInput)?this._btn.title=A:jQuery(".text",this._btn)[0].title=A},submitForm:function(){if(this._form){this._form.submit()}},getContainer:function(){return this._container}};LP.Forms.CountdownManager=function(){var A,B=[];return{init:function(){A=jQuery(".js-countdown");for(var C=A.length;C--;){A[C].id=A[C].id||"countdown-"+C;B[A[C].id]=new LP.Forms.Countdown(A[C])}},getCountdownById:function(C){return B[C]}}}();LP.Forms.Countdown=function(A){this.field=A;this.init()};LP.Forms.Countdown.prototype={init:function(){this.hinted=jQuery(this.field).hasClass("js-hint");var A=jQuery(this.field).siblings(".js-counter");if(A.length>0){this.counter=A[0]}else{this.counter=null}if(!this.counter){this.counter=jQuery(".js-counter",(jQuery(this.field).prev().length==0)?null:jQuery(this.field).prev())[0];if(!this.counter){return false}}this.maxLength=parseInt(this.counter.className.match(/js-max(\d*)/)[1],10);this.charactersLeft=this.maxLength;this.adjustValue();jQuery(this.field).on("keyup",jQuery.proxy(this.adjustValue,this));jQuery(this.field).on("change",jQuery.proxy(this.adjustValue,this));jQuery(this.field).on("blur",jQuery.proxy(this.adjustValue,this))},adjustValue:function(){this.currentLength=(this.hinted&&LP.Forms.Hints.hasDefaultValue(this.field))?0:this.field.value.length;this.charactersLeft=this.maxLength-this.currentLength;if(this.charactersLeft<0){this.field.value=this.field.value.substring(0,this.maxLength);this.charactersLeft=0}else{if(this.charactersLeft==0){jQuery(this.counter).addClass("js-error")}else{jQuery(this.counter).removeClass("js-error")}}this.counter.innerHTML="&#40;"+this.charactersLeft+" characters remaining&#41;"}};LP.Forms.submitWithProgress=function(B,A,D,C){LP.Prompt.progress(A,D);C=C||30;setTimeout(function(){B.submit()},20);setTimeout(function(){LP.Prompt.generic({message:"This page is taking longer than usual to respond",heading:"Sorry!",btnText:"cancel",progress:true,handler:function(){window.stop();LP.Prompt.message("Please note that your content may have been submitted.","Before you resubmit!")}})},C*1000)};LP.Forms.HintClearOnSubmitManager=function(){function A(D){for(var C=0,B=D.length;C<B;C++){new LP.Forms.HintClearOnSubmit(D[C].formId,D[C].hintId,D[C].submitId)}}return{init:A}}();LP.Forms.HintClearOnSubmit=function(F,G,D){var A=jQuery("#"+D).get(0);var E=jQuery("#"+G).get(0);var C=jQuery("#"+F).get(0);var B=function(I){var H=I||window.event;if(H.preventDefault){H.preventDefault()}else{H.returnValue=false;H.cancelBubble=true}if(E.value==E.title){E.value=""}if(C.id=="js-directory-search-property-first"&&E.value==""){document.location.href="/estate-agents"}else{if(C.id=="js-directory-search-property-second"&&E.value==""){document.location.href="/builders-and-construction/new-home-builders"}else{C.submit()}}};jQuery(A).on("click",B)};
LP.Forms=LP.Forms||{};LP.Forms.Hints=function(){var B=function(C,E){for(var D=C.length,F;F=C[--D];){(E||jQuery.trim(F.value)=="")&&(F.value=F.title)}};var A=function(C){return(jQuery.trim(C.value).replace(/\r/g,"")==C.title.replace(/\r/g,""))};return{init:function(){var C=jQuery(".js-hint");B(C);jQuery(C).on("focus",function(E){var D=E.target;A(D)&&(D.value="");(A(D))?jQuery(D).addClass("js-form-hint-on"):jQuery(D).removeClass("js-form-hint-on")});jQuery(C).on("blur",function(E){var D=E.target;!jQuery.trim(D.value)&&(D.value=D.title);(A(D))?jQuery(D).addClass("js-form-hint-on"):jQuery(D).removeClass("js-form-hint-on")})},reset:function(C){B(jQuery(".js-hint",C),true)},realValue:function(C){return(A(C))?"":C.value},hasDefaultValue:A}}();
LP.Forms=LP.Forms||{};LP.Forms.SearchFields=function(){return{init:function(){jQuery("#search-type-e").on("click",LP.Forms.SearchFields.hideLocation);jQuery("#search-type-b").on("click",LP.Forms.SearchFields.showLocation)},hideorShowLocationAfterLoad:function(){if(document.getElementById("search-type-e").checked){LP.Forms.SearchFields.hideLocation()}else{LP.Forms.SearchFields.showLocation()}},hideLocation:function(){document.getElementById("js-search-in").style.display="none";jQuery("#search-phrase").addClass("search-phrase-long");document.getElementById("search-where").value=""},showLocation:function(){jQuery("#search-phrase").removeClass("search-phrase-long");document.getElementById("js-search-in").style.display="block";document.getElementById("search-where").value=document.getElementById("search-where").title}}}();
LP.GroupPicker=function(C){var A;function B(){var F,E,L,M={},G={ok:null,cancel:null};var O=function(){E=C(F).modal("show");C(".ui-dialog").hide()};var I=function(){E.modal("hide");E=null;C(".ui-dialog").show()};var J=function(){D();K();Q()};var K=function(){if(M.specialistId){document.getElementById("l1-group-"+M.specialistId).checked=false;M.specialistId=null;M.specialistName=null}L.disable()};var D=function(){if(M.editorialId){document.getElementById("l2-group-"+M.editorialId).checked=false;M.editorialId=null;M.editorialName=null}C(document.getElementById("l2-groupset-"+M.specialistId)).addClass("dis-n")};var H=function(S){if(S){var R='<p class="blu2">Selected Groups</p>';if(M.editorialName||M.specialistName){R+="<ul>";if(M.specialistName){R+="<li>"+M.specialistName+"</li>"}if(M.editorialName){R+="<li>"+M.editorialName+"</li>"}R+="</ul>"}return R}else{return M}};var Q=function(){var R=C("#l1-groups").first();if(C(R).hasClass("discussion-group")){C(R).first().attr("checked",true);C(R).first().click();L.enable()}};var N=function(R){LP.extendObject(G,R)};var P=function(){F=document.getElementById("js-modal-group-picker");C("#l1-groups input").on("click",function(S){var R=LP.getTarget(S);if(M.specialistId!=R.value){D();M.specialistId=R.value;M.specialistName=LP.getClassParams(R)[0];C("#l2-groupset-"+M.specialistId).removeClass("dis-n");L.enable()}});C("#l2-groupsets input").on("click",function(S){var R=LP.getTarget(S);M.editorialId=R.value;M.editorialName=LP.getClassParams(R)[0]});L=LP.registerButton("gp-btn-ok",function(R){I();G.ok&&G.ok.call()});LP.registerButton("gp-btn-cancel",function(R){I();J();G.cancel&&G.cancel.call()});LP.registerButton("gp-btn-clear",J);Q()}();return{getChosenGroups:H,show:O,addHandlers:N}}return{get:function(){return A||(A=B())}}}(jQuery);
LP.ImageUpload=function(f){var C=20,W=true,V=[],c,E,L,H,S,J,A,I,K=[],Q=false,O=false,e=false,b=[];var X={ok:null,cancel:null};var a=function(){if(LP.ImageUpload.uploadAtATime!=null){LP.Prompt.alert("You can upload at the most "+LP.ImageUpload.uploadAtATime+" images at a time. Total images you can upload is "+LP.ImageUpload.fileUploadLimit)}else{LP.Prompt.alert("You can't upload more than "+LP.ImageUpload.fileUploadLimit+" images.")}};var G=function(g){var h=document.createElement("div");h.className="photo-container loading mod js-no-shadow";h.id="photo-container"+g;h.innerHTML=LP.Templates.IMAGE_UPLOADING;document.getElementById("thumbnails").appendChild(h);K.push(g);jQuery.event.trigger(LP.PageEventManager.DOMUPDATE)};var N=function(){document.getElementById("photo-container"+K[0]).innerHTML=LP.Templates.IMAGE_PROCESSING};var Y=function(i,h){if(!L){L=new LP.Template(LP.Templates.IMAGE_UPLOAD_ERROR)}var g=document.getElementById("photo-container"+K.shift());jQuery(g).replaceClass("loading","js-warning");if(h){jQuery(g).addClass("js-dialog")}else{J.setStats({successful_uploads:J.getStats().successful_uploads-1})}g.innerHTML=L.apply({error:i});jQuery.event.trigger(LP.PageEventManager.DOMUPDATE)};var R=function(i){var h=K.shift(),g=document.getElementById("photo-container"+h),j={id:i[0],filename:i[4],extension:i[1],caption:i[3],position:h,remove:false,thumbnailUrl:i[2]};if(I=="DOCS"){j.size=i[5]}LP.ImageUpload.loadedImageCount++;if(!c){c=new LP.Template((I=="DOCS")?LP.Templates.DOC_UPLOADED:LP.Templates.IMAGE_UPLOADED)}if(I=="IMAGES"){if(A){if(!E){E=new LP.Template(LP.Templates.FEATURED_FLASH)}if(LP.ImageUpload.loadedImageCount==1){j.checked='checked="checked"';jQuery(g).addClass("featured-photo")}}else{if(!E){E=new LP.Template(LP.Templates.FEATURED_NONE)}}j.featured=E.apply(j)}jQuery(g).removeClass("loading");g.innerHTML=c.apply(j);V.push(j);jQuery.event.trigger(LP.PageEventManager.DOMUPDATE)};var M=function(){if(document.getElementById("js-add-image").nodeName.toLowerCase()=="a"){location.href=document.getElementById("js-add-image").href}else{if(LP.ImageUpload.loadedImageCount<LP.ImageUpload.fileUploadLimit){var g=document.createElement("div"),h={position:++LP.ImageUpload.imageIndex};LP.ImageUpload.loadedImageCount++;if(!c){c=new LP.Template((I=="DOCS")?LP.Templates.DOC_UPLOAD_NO_FLASH:A?LP.Templates.IMAGE_NO_FLASH_BUSINESS:LP.Templates.IMAGE_NO_FLASH)}if(A){if(!E){E=new LP.Template(LP.Templates.FEATURED_NO_FLASH)}h.featured=E.apply(h)}g.className=A?"photo-container box clearfix":"panel panel--pad panel--blue l-half cf l-relative";g.innerHTML=c.apply(h);jQuery(g).insertAfter(document.getElementById("js-noflash-thumnail-hook"));(A)?F():T(true);P()}else{a()}}};var Z=function(i){var g=i||window.event,h=i.target;switch(g.type){case"click":while(!jQuery(h).hasClass("radio")&&!jQuery(h).hasClass("featured")&&!jQuery(h).hasClass("btn-close")&&!jQuery(h).hasClass("thumbnails")){h=h.parentNode}if(A&&(jQuery(h).hasClass("radio")||jQuery(h).hasClass("featured"))){B(jQuery(h).parents(".photo-container"))}if(jQuery(h).hasClass("btn-close")){U(h);i.stopPropagation();i.preventDefault()}break;case"change":while(!jQuery(h).hasClass("afile")&&!jQuery(h).hasClass("thumbnails")){h=h.parentNode}if(jQuery(h).hasClass("afile")){h.parentNode.parentNode.getElementsByTagName("textarea")[0].value=((h.value.substring(0,h.value.indexOf(".")||h.value.length-1)).replace("C:\\fakepath\\",""));var j=jQuery(".radio",h.parentNode).get();if(j.length){jQuery(".radio",h.parentNode).css("display","inline");jQuery(".featured",h.parentNode).css("display","inline");if(!jQuery(".featured-photo","js-image-upload").length){jQuery(".radio",h.parentNode).attr("checked",true);jQuery(h).parents(".photo-container").addClass("featured-photo")}}}break}};var B=function(g){jQuery(".featured-photo","#js-image-upload").removeClass("featured-photo");jQuery(g).addClass("featured-photo");jQuery(".radio",g).attr("checked",true)};var U=function(m){if(jQuery(m).hasClass("edit")){var j=m.parentNode.id.match(/photo\-container([0-9]+)/)[1];if(document.getElementById("imageFileVOs["+j+"].remove")){document.getElementById("imageFileVOs["+j+"].remove").value="true"}else{if(document.getElementById("docFileVOs["+j+"].remove")!=null){document.getElementById("docFileVOs["+j+"].remove").value="true"}}}else{if(W){var j=m.parentNode.id.match(/photo\-container([0-9]+)/)[1];for(var k=V.length;k--;){if(V[k].position==j){V.splice(k,1);break}}}}m.parentNode.parentNode.removeChild(m.parentNode);jQuery.event.trigger(LP.PageEventManager.DOMUPDATE);if(!jQuery(m.parentNode).hasClass("js-warning")){LP.ImageUpload.decrementUploadCount();if(A){F();P()}else{if(LP.ImageUpload.loadedImageCount<1&&(!LP.ImageUpload.uploadArticleImages||(LP.ImageUpload.uploadArticleImages&&!e))){T(false)}}}if(A&&LP.ImageUpload.loadedImageCount>1&&jQuery(m.parentNode).hasClass("featured-photo")){var l,h=jQuery(".afile","thumbnails-noflash");for(var k=0,g=h.length;k<g;k++){if(h[k].value!=""){l=jQuery(h[k]).parents(".photo-container");B(l);break}}if(!l){var n=jQuery(".photo-container","thumbnails");if(n.length>0){B(n[0])}}}};var d=function(){jQuery("#js-article-success").addClass("dis-n");if(jQuery("#js-no-thanks")){jQuery("#js-no-thanks").addClass("dis-n")}(A)?F():T(false);jQuery("#thumbnails").html("");LP.ImageUpload.loadedImageCount=0;if(W){J.setStats({successful_uploads:LP.ImageUpload.loadedImageCount})}jQuery.event.trigger(LP.PageEventManager.DOMUPDATE)};var T=function(g){if(g&&!Q){jQuery("#js-save-cancel").removeClass("dis-n");Q=true;jQuery.event.trigger(LP.PageEventManager.DOMUPDATE)}else{if(!g&&Q){jQuery("#js-save-cancel").addClass("dis-n");Q=false;jQuery.event.trigger(LP.PageEventManager.DOMUPDATE)}}};var F=function(){if(A){(LP.ImageUpload.loadedImageCount>LP.ImageUpload.fileUploadLimit)?T(false):T(true)}};var D=function(){LP.Forms.ButtonManager.disableButtons(b);J.setButtonTextStyle(".swf-btn { font-family: Trebuchet MS,arial,helvetica,sans-serif; font-size: 14px; color: #999999; font-weight:bold; width:183px; text-align:center;} .sm{ font-size: 10px; }");J.setButtonCursor(SWFUpload.CURSOR.ARROW)};var P=function(){LP.Forms.ButtonManager.enableButtons(b);J.setButtonDisabled(false);J.setButtonCursor(SWFUpload.CURSOR.HAND);J.setButtonTextStyle(".swf-btn { font-family: Trebuchet MS,arial,helvetica,sans-serif; font-size: 14px; color: #49717a; font-weight:bold; width:183px; text-align:center;} .sm{ font-size: 10px; }")};return{uploaded:false,init:function(){if(!O){I=jQuery("#js-image-upload").hasClass("business-docs")?"DOCS":"IMAGES";A=jQuery("#js-image-upload")[0].className.indexOf("business-")>-1;F();if(this.loadedImageCount>0){e=true;var j=jQuery(".radio","js-image-upload");for(var g=j.length;g--;){if(j[g].checked){B(j[g].parentNode);break}}}jQuery("#thumbnails").on("click",Z);jQuery("#thumbnails").on("keyup",function(k){var i=k.target;if(jQuery(i).hasClass("caption")&&!A){T(true)}});jQuery("#thumbnails-noflash").on("click",Z);jQuery("#thumbnails-noflash").on("change",Z);b.push(LP.registerButton("js-add-image",M));b.push(LP.registerButton("js-upload-save",function(l){for(var k=V.length;k--;){if(jQuery("#imageFileVOs["+V[k].position+"].caption").length>0){V[k].caption=jQuery("#imageFileVOs["+V[k].position+"].caption").val()}else{if(jQuery("#docFileVOs["+V[k].position+"].caption").length>0){V[k].caption=jQuery("#docFileVOs["+V[k].position+"].caption").val()}}}if(X.ok){X.ok.call(this,l)}}));var h=function(i){if(X.cancel){X.cancel.call(this,i)}};if(jQuery("#js-upload-cancel").length>0){b.push(LP.registerButton("js-upload-cancel",h))}if(jQuery("#js-no-thanks").length>0){b.push(LP.registerButton("js-no-thanks",h))}O=true}},uploadArticleImages:false,uploadGalleryImages:false,fileUploadLimit:C,uploadAtATime:null,loadedImageCount:0,imageIndex:0,createFlashObjectSettings:function(g){var h={minimum_flash_version:"9.0.28",upload_url:"/flash-upload-image.html",flash_url:"/flash/swfupload.swf",file_size_limit:"3 MB",file_upload_limit:LP.ImageUpload.fileUploadLimit,file_queue_limit:0,file_types:"*.jpg;*.jpeg;*.gif;*.png",file_types_description:"JPG, JPEG, GIF and PNG Images",file_post_name:"file",post_params:{cookieString:document.cookie},assume_success_timeout:120,file_dialog_start_handler:LP.ImageUpload.fileDialogStart,file_dialog_complete_handler:LP.ImageUpload.fileDialogComplete,upload_complete_handler:LP.ImageUpload.uploadComplete,upload_success_handler:LP.ImageUpload.uploadSuccess,upload_progress_handler:LP.ImageUpload.uploadProgress,upload_error_handler:LP.ImageUpload.uploadError,upload_start_handler:LP.ImageUpload.uploadStart,file_queue_error_handler:LP.ImageUpload.fileQueueError,swfupload_pre_load_handler:LP.ImageUpload.flashDetected,swfupload_load_failed_handler:LP.ImageUpload.flashNotDetected,button_placeholder_id:"flash-upload",button_image_url:"/images/thisis/components/buttons/flash-upload-button-v5.png",button_width:183,button_height:29,button_text:'<span class="swf-btn">add pictures <span class="sm">(3mb max)</span></span>',button_text_style:".swf-btn { font-family: Trebuchet MS,arial,helvetica,sans-serif; font-size: 14px; color: #49717a; font-weight:bold; width:183px; text-align:center;} .sm{ font-size: 10px; }",button_text_top_padding:3,button_text_left_padding:0,button_window_mode:SWFUpload.WINDOW_MODE.TRANSPARENT,button_cursor:SWFUpload.CURSOR.HAND,debug:false};if(g){LP.extendObject(h,g)}return h},setSWFU:function(g){J=g},decrementUploadCount:function(){var h=jQuery(".afile");if(h.length>0){h[0].disabled=false}LP.ImageUpload.loadedImageCount--;if(W){var g=J.getStats().successful_uploads;J.setStats({successful_uploads:(g>0)?--g:0})}},fileDialogStart:function(){var g=jQuery(".js-warning","#thumbnails");for(var h=g.length;h--;){if(LP.isIE){g[h].parentNode.removeChild(g[h])}else{LP.FX.fadeOut({el:g[h],onComplete:function(){this.parentNode.removeChild(this)}})}}H=false},fileDialogComplete:function(g,k){try{if(k>0){if(LP.ImageUpload.fileUploadLimit-LP.ImageUpload.loadedImageCount-g<0){a();for(var j=k;j--;){this.cancelUpload()}}else{for(var j=0;j<k;j++){G(LP.ImageUpload.imageIndex++)}D();this.startUpload()}}}catch(h){LP.Prompt.alert("Error"+h)}},fileQueueError:function(g,i,h){switch(i){case SWFUpload.QUEUE_ERROR.QUEUE_LIMIT_EXCEEDED:a();break;case SWFUpload.QUEUE_ERROR.ZERO_BYTE_FILE:G(LP.ImageUpload.imageIndex++);Y('"'+g.name+"\" can't be uploaded as it is empty",true);break;case SWFUpload.QUEUE_ERROR.FILE_EXCEEDS_SIZE_LIMIT:G(LP.ImageUpload.imageIndex++);Y('"'+g.name+"\" can't be uploaded as it is too large - max size is 3MB",true);break;case SWFUpload.QUEUE_ERROR.INVALID_FILETYPE:G(LP.ImageUpload.imageIndex++);Y('"'+g.name+"\" can't be uploaded as it is of the wrong type",true);break;default:break}},uploadStart:function(g){if(document.getElementById("contentId")){J.addPostParam("id",document.getElementById("contentId").value)}if(document.getElementById("imageType")){J.addPostParam("type",document.getElementById("imageType").value)}},uploadComplete:function(g){if(this.getStats().files_queued>0){this.startUpload()}else{jQuery(".js-dialog","#thumbnails").removeClass("js-dialog");P();K=[];if(H){T(true)}}},uploadSuccess:function(h,g){if(g!=null&&g.length>0){var i=g.split("|");if(i!=null&&i.length>=5){R(i);H=true}else{if(g=="AuthError"){Y("You need to <a href='"+LP.pageVars.loginURL+"'>log in</a> to upload \""+h.name+'"')}else{Y('Unable to upload "'+h.name+'", please try again')}}}else{Y('Unable to upload "'+h.name+'", please try again')}},uploadProgress:function(g,i,j){var h=Math.ceil((i/j)*100);jQuery(".bar","#photo-container"+K[0]).css("width",h+"%");if(h==100){N()}},uploadError:function(g,i,h){switch(i){case SWFUpload.UPLOAD_ERROR.QUEUE_LIMIT_EXCEEDED:a();break;default:break}},flashDetected:function(){W=true;if(e&&!A){T(true)}var g=document.getElementById("js-add-image");if(g){g=(!jQuery(g).hasClass("btn-std-input"))?jQuery(g).parents("btn-std-input")[0]:g;g.parentNode.removeChild(g)}var h=document.getElementById("picture-upload-no-flash");if(h){h.parentNode.removeChild(h)}},flashNotDetected:function(){W=false;if(e&&!A){T(true)}var h=document.getElementById("picture-upload-no-flash");if(h){jQuery(h).removeClass("js-hide");jQuery.event.trigger(LP.PageEventManager.DOMUPDATE)}if(LP.ImageUpload.loadedImageCount>=LP.ImageUpload.fileUploadLimit){var g=jQuery(".afile");if(g.length>0){g[0].disabled=true}}},getNewFlashFileVOs:function(){return V},getImageFileVOs:function(){var h=[];for(var k=0,j=LP.ImageUpload.imageIndex;k<=j;k++){var g="imageFileVOs["+k+"]";if(document.getElementById(g+".id")){h.push({filename:(document.getElementById(g+".filename"))?document.getElementById(g+".filename").value:document.getElementById(g+".file").value,caption:(document.getElementById(g+".caption"))?document.getElementById(g+".caption").value:"",position:k,remove:(document.getElementById(g+".remove"))?document.getElementById(g+".remove").value:false})}}return h},addHandlers:function(g){LP.extendObject(X,g)}}}();
LP.Invites=function(){var A,B;return{init:function(){A=jQuery("#recipientList")[0];if(jQuery("#js-send-invites")[0]){LP.registerButton("js-send-invites",this.sendEmails)}LP.registerButton("js-address-book",function(C){if(LP.IEv>7){LP.Prompt.message('If you see a security pop-up after selecting your email addresses click "No" to continue',"Important")}showPlaxoABChooser(A,"/thisis/include/plaxo-callback.html");return false});window.onABCommComplete=function(){LP.Prompt.hide();var C=A.value;C=C.match(/<([^>]+)>/g).join(", ");C=C.replace(/[<>]/g,"");A.value=C}},sendEmails:function(){var C=A.value;if(C&&jQuery.trim(C).length&&!LP.Forms.Hints.hasDefaultValue(A)){LP.Prompt.progress("Please wait a moment...","Sending Invite Emails");AjaxInviteEmailsHelper.sendInviteEmails(C,function(E){var D=E+" invitation"+((E>1)?"s":"");if(E>-1){if(E>0){if(B){LP.Prompt.hide();B.call()}else{LP.Prompt.message(D+" sent.<br/>Thank you.","Sending Invite Emails")}A.value=""}else{LP.Prompt.message("No emails sent.<br/>Please check the email addresses you entered and try again.","Sending Invite Emails")}}else{LP.Prompt.message("Sorry sending email invites failed.<br/>Please try again later.","Invite Emails Failed")}})}else{if(B){LP.Prompt.hide();B.call()}else{LP.Prompt.message("Sorry invite recipient list is empty.","Invite Emails Failed")}}},addHandler:function(C){B=C}}}();
LP.LikeThisManager=function(){return{init:function(){var A=jQuery(".like-this","body");for(var B=0,C;C=A[B++];){new LP.LikeThis(C)}var A=jQuery(".fb-announcement-like","body");for(var B=0,C;C=A[B++];){new LP.LikeThis(C)}}}}();LP.LikeThis=function(A){this.init(A)};LP.LikeThis.prototype.init=function(B){var D=jQuery(".like-count",B)[0],C=jQuery(".like-link",B)[0],F=parseInt(LP.getClassParams(B)[1]),A=parseInt(LP.getClassParams(B)[2]);var E=function(){var G=jQuery.cookie("likes");(G===undefined||G===null)&&(G="");return{addId:function(J){var H=G.length;G=G.split("|");if(H>4000){G.shift()}G=G.concat([J]).join("|");var I=new Date();I.setTime(I.getTime()+(2*365*24*60*60*1000));jQuery.cookie("likes",G,{path:"/",expires:I})},getId:function(H){return new RegExp("(^||)("+H+")(||$)").test(G)}}}();if(jQuery(C).hasClass("js-disabled")){C.setAttribute("title","")}else{if(E.getId(A+""+F)){C.setAttribute("title","You have recommended this")}else{jQuery(C).addClass("can-hover");jQuery(C).on("click",function(){AjaxLikeThisHelper.likeThis(F,A,{callback:function(G){if(jQuery(D).hasClass("fb-like-this")){D.innerHTML="<span class='m15-l'>"+G+"</span>"}else{D.innerHTML=G}jQuery(C).off("click");jQuery(C).off("mouseover");jQuery(C).off("mouseout");jQuery(C).removeClass("can-hover");jQuery(C).removeClass("hover");E.addId(A+""+F);C.setAttribute("title","You have recommended this")}})});jQuery(C).on("mouseover",function(G){jQuery(LP.getTarget(G)).addClass("hover")});jQuery(C).on("mouseout",function(G){jQuery(LP.getTarget(G)).removeClass("hover")})}}};
LP.LoginLinks=function(){var A;var B;return{init:function(){loginLinksParentEl=jQuery("#login");A=jQuery.cookie("ugcUserDetails");if(A){B=A.split("|")[1];var C='<a title="My Profile" href="/people/'+B+'/profile.html">My Profile</a><a title="Logout" href="'+LP.pageVars.logoutURL+'" onclick="logout()">Logout</a>';loginLinksParentEl.html(C)}if(LP.getUrlParam("emailVerified",document.location.search)!=""){LP.Prompt.message("Congratulations you have now successfully registered.","Email Verified")}}}}();
LP.Map=function(){var M,K=[],L,E,A,D,I=[["&#163;",""]];var B=function(Q,R){if((!Q instanceof Array)||(typeof (R)!="string")){return false}for(var P=0;P<Q.length;P++){R=R.replace(Q[P][0],Q[P][1])}return R};var O=function(R,Q){if(R.length!=Q.length){return false}for(var P=R.length;P--;){R[P].lat=Q[P].lat;R[P].lng=Q[P].lng}return R};var C=function(S,R){var Q="";for(var P=0;P<R.length;P++){for(Q in R[P]){if(R[P][Q]==S){return true}}}return false};function N(P){var T=[],Q,U;if((typeof P=="object")&&(P.length>0)){for(var S=0;S<P.length;S++){Q=P[S].lat;U=P[S].lng;if(C(P[S].lat,T)){var R=LP.extendObject({},{lat:(Q+=(Math.random()*0.00018)),lng:(U+=(Math.random()*0.00018))},true);T.push(R)}else{T.push(LP.extendObject({},{lat:Q,lng:U},true))}}P=O(P,T);return P}}function F(Q,P){return new M.LatLng(Q,P)}function G(Q){try{var P=F(Q.lat,Q.lng);delete Q.lng;delete Q.lat;return P}catch(R){}}function J(W,S,V,T,Q,U){var P=G(V);var R=new M.Marker(LP.extendObject(S.marker,{position:P,title:B(I,V.title)||""}));K.push(R);if(Q){M.event.addListener(R,"click",function(){if(E){E.close()}E=new M.InfoWindow({content:Q.apply(V),maxWidth:S.bubbleWidth});E.open(W,R)})}T&&T.extend(P);if(U=="draggableMarker"){D=R;M.event.addListener(D,"dragend",function(){jQuery("#latitude").val(D.position.lat());jQuery("#longitude").val(D.position.lng())})}}function H(S,R,Q){var P=new google.maps.Marker({map:A,position:F(S,R),html:Q});google.maps.event.addListener(P,"click",function(){var T=new google.maps.InfoWindow({content:P.html});T.open(A,P)});return P}return{init:function(X){M=google.maps;var W={map:{mapTypeId:M.MapTypeId.ROADMAP,navigationControl:true,navigationControlOptions:{style:M.NavigationControlStyle.SMALL},scaleControl:true,scaleControlOptions:{style:M.ScaleControlStyle.ZOOM},mapTypeControl:false,zoom:13},marker:{clickable:false,visible:true}};var Q=function(){this.clickable=true;this.cursor="pointer"};var Z={property:{bubbleTemplate:"PROPERTY_MAP_BUBBLE",bubbleWidth:140,marker:{clickable:true,cursor:"pointer"}},lp_towns:{map:{navigationControlOptions:{style:M.NavigationControlStyle.ZOOM_PAN},center:F(51.90948706250778,-1.69464111328125),zoom:6},marker:new Q(),bubbleTemplate:"LP_TOWNS_MAP_BUBBLE"},crimes:{map:{options:{streetViewControl:false,scaleControl:false},zoom:8},marker:LP.extendObject(new Q(),{clickable:true,draggable:false}),bubbleTemplate:"CRIME_BUBBLE"},business:{marker:LP.extendObject(new Q(),{clickable:false})},event:{bubbleTemplate:"BUSINESS_BUBBLE",bubbleWidth:100,marker:new Q()},businesses:{bubbleTemplate:"BUSINESS_BUBBLE",bubbleWidth:100,marker:new Q()},draggableMarker:{marker:LP.extendObject(new Q(),{clickable:false,draggable:true})}};for(var U=X.length;U--;){var V,S=X[U],T=LP.extendObject(W,(Z[S.mapType]||{}),true);if(S.coords){V=S.coords}else{if(S.markers&&S.markers.length==1){V=S.markers[0]}}if(V){T.map.center=F(V.lat,V.lng)}if(!V&&S.markers.length==0){T.map.center=F(51.90948706250778,-1.69464111328125);T.map.zoom=6}var P=(!(T.map.center&&T.map.zoom))?P=new M.LatLngBounds():false;var R=(T.bubbleTemplate)?new LP.Template(LP.Templates[T.bubbleTemplate]):false;A=new M.Map(jQuery("#"+S.elementId)[0],T.map);T.marker.map=A;if(S.markers&&S.markers.length>1){S.markers=N(S.markers);for(var Y=S.markers.length;Y--;){V=S.markers[Y];if(!(isNaN(V.lat)||isNaN(V.lng))&&(V.lat>49&&V.lat<61&&V.lng>-8.5&&V.lng<2)){J(A,T,V,P,R,S.mapType)}}P&&A.fitBounds(P);if(S.mapType=="crimes"){L=new MarkerClusterer(A,K)}}else{if(V){J(A,T,V,P,R,S.mapType)}}}jQuery(window).unload(M.Unload)},moveMarker:function(R,P){var Q=new google.maps.LatLng(R,P);A.panTo(Q);D.setPosition(Q)}}}();
LP.MLW=function(){var N=[];var I=[];var K;var D;var R;var O;var M="crime";var C="traffic";var L="health";var G="entertainment";var H="education";function T(c){if(!c.contains(O.getCenter())){var b=O.getCenter();var d=b.lng();var a=b.lat();var V=c.getNorthEast().lng();var U=c.getNorthEast().lat();var Z=c.getSouthWest().lng();var W=c.getSouthWest().lat();if(d<Z){d=Z}if(d>V){d=V}if(a<W){a=W}if(a>U){a=U}O.setCenter(new google.maps.LatLng(a,d))}}function F(U){return"<span class='fnt-12'>"+U+"</span>"}function Q(){jQuery("#"+LP.MLW.tabsId).tabs({activate:function(U,V){if(typeof U.currentTarget=="undefined"){}else{if(K){K.close()}jQuery(".js-listItem").removeClass("active");jQuery("#dtls-left"+U.currentTarget.attributes.id.value).scrollTop(0);jQuery("#"+U.currentTarget.attributes.id.value+"list-"+0).addClass("active")}}})}function J(){var U=200;jQuery.each(LP.MLW.tabs,function(V,W){jQuery("#scrollUp"+W).bind("click",function(X){X.preventDefault();jQuery("#dtls-left"+W).animate({scrollTop:"-="+U+"px"})});jQuery("#scrollDown"+W).bind("click",function(X){X.preventDefault();jQuery("#dtls-left"+W).animate({scrollTop:"+="+U+"px"})})})}function P(){var U=[];jQuery.each(LP.MLW.locations,function(a,Z){U[a]=Z});var Y=new OverlappingMarkerSpiderfier(O,{markersWontMove:true,markersWontHide:true,keepSpiderfied:true});Y.addListener("click",function(Z){if(K){K.close()}K=new google.maps.InfoWindow({content:Z.title,maxWidth:200})});Y.addListener("spiderfy",function(a){for(var Z=0;Z<a.length;Z++){}if(K){K.close()}});Y.addListener("unspiderfy",function(a){for(var Z=0;Z<a.length;Z++){}});jQuery.each(U,function(a,Z){var c={url:Z.icon,size:new google.maps.Size(25,38),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(25,38),scaledSize:new google.maps.Size(25,38)};var b=new google.maps.LatLng(Z.latitude,Z.longitude);D.extend(b);N[a]=new google.maps.Marker({map:O,position:b,title:Z.title,content:Z.content,tab:Z.tab,listIndex:Z.listIndex,tags:Z.tags,icon:c});Y.addMarker(N[a])});var W=new google.maps.LatLng(D.getNorthEast().lat()+((D.getNorthEast().lat()-D.getSouthWest().lat())/3),D.getNorthEast().lng());D.extend(W);google.maps.event.addListener(O,"center_changed",function(){T(D)});var V=google.maps.event.addListener(O,"idle",function(){google.maps.event.removeListener(V)});if(LP.MLW.mapType==M){var X={maxZoom:17};O.markerCluster=new MarkerClusterer(O,N,X);google.maps.event.addListener(O.markerCluster,"clusterclick",function(Z){O.setZoom(O.getZoom()+1)})}}function B(){jQuery.each(N,function(V,U){google.maps.event.addListener(U,"click",function(){var W=0;if(K){K.close()}K=new google.maps.InfoWindow({content:F(U.title),maxWidth:200});K.open(O,U);if(LP.MLW.mapType!=M){W=LP.MLW.tabs.indexOf(U.tab);jQuery("#"+LP.MLW.tabsId).tabs("option",{active:W,listIndex:U.listIndex});jQuery(".js-listItem").removeClass("active");jQuery("#"+U.tab+"list-"+U.listIndex).addClass("active");jQuery("#dtls-left"+U.tab).scrollTop(0);jQuery("#dtls-left"+U.tab).scrollTop(jQuery("#"+U.tab+"list-"+U.listIndex).position().top)}})})}function A(){jQuery(".js-listLink").on("click",function(X){X.stopPropagation();X.preventDefault();if(K){K.close()}var U=parseInt(X.currentTarget.attributes["data-loc-index"].value,10);var W=parseInt(X.currentTarget.attributes["data-list-index"].value,10);var V=X.currentTarget.attributes["data-tab"].value;K=new google.maps.InfoWindow({content:F(N[U].title),maxWidth:200});K.open(O,N[U]);jQuery(".js-listItem").removeClass("active");jQuery("#"+V+"list-"+W).addClass("active")})}function E(){jQuery(".js-filter").on("click",function(U){U.stopPropagation();U.preventDefault();jQuery(".js-filter").removeClass("active");jQuery(this).addClass("active");S(U.currentTarget.attributes.id.value)})}function S(U){I=[];I.push(U);O.markerCluster.clearMarkers();jQuery.each(N,function(W,V){var X=false;if(I.length>0&&U!="all-crime"){jQuery.each(I,function(Y,Z){if(V.tags.indexOf(Z)>-1){X=true}V.setVisible(X);if(X){O.markerCluster.addMarker(V)}else{O.markerCluster.removeMarker(V)}})}else{V.setVisible(true);O.markerCluster.addMarker(V)}})}return{MAP_TYPE_CRIME:M,MAP_TYPE_TRAFFIC:C,MAP_TYPE_HEALTH:L,MAP_TYPE_ENTERTAINMENT:G,MAP_TYPE_EDUCATION:H,myLatitude:51.90948706250778,myLongitude:-1.69464111328125,mapType:"",tabsId:"",locations:[],tabs:[],init:function(){var U=13;if(LP.MLW.mapType==LP.MLW.MAP_TYPE_CRIME){U=14}if(LP.MLW.mapType==LP.MLW.MAP_TYPE_TRAFFIC){U=10}google.maps.visualRefresh=true;D=new google.maps.LatLngBounds();R={zoom:U,center:new google.maps.LatLng(LP.MLW.myLatitude,LP.MLW.myLongitude),mapTypeId:google.maps.MapTypeId.ROADMAP};O=new google.maps.Map(document.getElementById("map-canvas"),R);if(LP.MLW.mapType!=M){J()}Q();P();B();if(LP.MLW.mapType!=M){A()}if(LP.MLW.mapType==M){E()}}}}();
LP.MultiFileUpload=function(C){var R,S,H,A={},P={ok:null,cancel:null},Q;var O=function(X,W){var V=W.context.find("input.data");W.formData=V.serializeArray()};var I=function(X,W){var V=W;var Y=C(W.context);Y.find("button[id*='save-caption']").attr("disabled","");Y.find("button.delete").unbind("click");Y.find("button.delete").bind("click",function(Z){Z.preventDefault();Z.stopPropagation();Y.remove()})};var U=function(W,V){};var T=function(W,V){};var F=function(W,V){var X=C(V.context);C(".fileupload-buttonbar .start, .fileupload-buttonbar .cancel, .fileupload-buttonbar .delete, .fileupload-buttonbar .toggle").addClass("show")};var G=function(W,V){};var N=function(X,W){var Y=C(W.context);var V=Y.position();Y.find(".row-delete-overlay").height(Y.height()).width(Y.width()).addClass("show")};var E=function(W,V){if(V.result.files.length>0){C(".fileupload-buttonbar .start, .fileupload-buttonbar .cancel, .fileupload-buttonbar .delete, .fileupload-buttonbar .toggle").addClass("show")}};var M=function(V){A.content_id=V;R=A.content_id;C("#"+A.upload_form_id).attr("data-contentid",A.content_id);C("#"+A.upload_form_id+"#id").val(A.content_id)};var K=function(V){A.content_type=V;S=A.content_type;C("#"+A.upload_form_id).attr("data-type",A.content_type);C("#"+A.upload_form_id+"#contentType").val(A.content_type)};var E=function(W,V){if(V.result.files.length>0){C(".fileupload-buttonbar .start, .fileupload-buttonbar .cancel, .fileupload-buttonbar .delete, .fileupload-buttonbar .toggle").addClass("show")}C(".js-multi-file-upload .save-caption").bind("click",L)};var D=function(W){Q.modal("hide");var V=C("#js-modal-caption-updated");if(W.error){C("#js-modal-caption-error").find(".modal-title").text(W.error.title).end().find(".modal-body").html("<p>"+W.error.message+"</p>").end().modal("show");W.omnitureProperties&&LP.Analytics.logError(W)}else{if(W.error==null){V.find('.modal-body [data-field="filename"]').text(W.filename);V.find('.modal-body [data-field="caption"]').text(W.caption);if(W.caption.length>0){V.find('.modal-body [data-field="caption-action"]').text("updated to:")}else{V.find('.modal-body [data-field="caption-action"]').text("set as blank")}V.modal("show")}else{if(W.ignore){}else{if(!W.ignore){C("#js-modal-caption-error").find(".modal-title").text("Error").end().find(".modal-body").html("<p>Your request to edit an image caption failed, please try again.</p>").end().modal("show")}}}}};var B=function(W,V){Q.modal("hide");C("#js-modal-caption-error").find(".modal-title").text("Error").end().find(".modal-body").html("<p>Sorry, failed to edit caption : "+W+"</p>").end().modal("show")};var L=function(W){Q=C("#js-modal-caption-updating").modal("show");W.preventDefault();W.stopPropagation();var Y=C(this)[0];var X;var V;X=LP.getClassParams(Y,"id,contentType,contentId,filename,position");if(X.filename){X.extension=X.filename.match(/(\.|\/)(gif|jpe?g|png)$/i)!=null?X.filename.match(/(\.|\/)(gif|jpe?g|png)$/i):""}else{X.filename=""}X.caption=C("#edit-caption-"+X.id).val();if(!X.id||X.caption==null||!X.contentId){Q.modal("hide");C("#js-modal-caption-failed").modal("show");return }J(X.id,X.contentType,X.contentId,X.filename,X.caption,D,B)};var J=function(Y,b,a,X,W,Z,V){imagevo={id:Y,contentType:b,contentId:a,filename:X,caption:W};AjaxImageHelper.updateImage(imagevo,{callback:Z,errorHandler:V})};return{init:function(V){A=this.createFileUploadSettings(V[0]);H=A.upload_url=window.location.protocol+"//"+window.location.host+"/upload.form";if(V[0].upload_form_id){C(".js-multi-file-upload").attr("id",V[0].upload_form_id)}if(A.content_id){M(A.content_id)}if(A.content_type){K(A.content_type)}C("#"+A.upload_form_id).fileupload({url:A.upload_url,autoUpload:A.auto_upload});C("#"+A.upload_form_id).fileupload("option","redirect",window.location.href.replace(/\/[^\/]*$/,"/cors/result.html?%s"));LP.MultiFileUpload.bindFileUploadCallback("fileuploadsubmit",A.file_upload_submit_callback);LP.MultiFileUpload.bindFileUploadCallback("fileuploadchange",A.file_upload_change_callback);LP.MultiFileUpload.bindFileUploadCallback("fileuploadfail",A.file_upload_fail_callback);LP.MultiFileUpload.bindFileUploadCallback("fileuploaddestroy",A.file_upload_destroy_callback);LP.MultiFileUpload.bindFileUploadCallback("fileuploaddestroyed",A.file_upload_destroyed_callback);LP.MultiFileUpload.bindFileUploadCallback("fileuploadcompleted",A.file_upload_completed_callback);LP.MultiFileUpload.bindFileUploadCallback("fileuploadprocessfail",A.file_upload_ajax_queue_item_fail_callback);LP.MultiFileUpload.bindFileUploadCallback("fileuploadfailed",A.file_upload_failed_after_ui_rendered_callback)},createFileUploadSettings:function(V){var W={upload_form_id:"fileupload",upload_url:"upload.form",auto_upload:false,file_upload_submit_callback:O,file_upload_change_callback:F,file_upload_destroy_callback:N,file_upload_destroyed_callback:G,file_upload_completed_callback:E,file_upload_fail_callback:U,file_upload_ajax_queue_item_fail_callback:T,file_upload_failed_after_ui_rendered_callback:I,content_id:"",content_type:"",};if(V){LP.extendObject(W,V)}return W},bindFileUploadCallback:function(W,V){C("#"+A.upload_form_id).bind(W,V)},setContentId:function(V){M(V)},setContentType:function(V){K(V)},getContentId:function(){return A.content_id},getContentType:function(){return A.content_type},loadImagesByContentIdAndContentType:function(W,V,X){C("#"+A.upload_form_id).addClass("fileupload-processing");C("#"+A.upload_form_id).find(".fileupload-loading").show();C.ajax({url:H,data:{id:W,contentType:V},dataType:"json",context:C("#"+A.upload_form_id)[0]}).always(function(){C(this).removeClass("fileupload-processing")}).done(function(Y){C(this).fileupload("option","done").call(this,null,{result:Y});C(".fileupload-loading").hide();X.call(this,null,{result:Y})})}}}(jQuery);
LP.PageEventManager=function(){return{DOMUPDATE:"domUpdateEventjQuery",init:function(){jQuery(document).on(LP.PageEventManager.DOMUPDATE,LP.Ads.DC.reposition)},registerPanel:function(A){}}}();
LP.Pagination=function(A){if(A.module&&A.pageContainer&&A.params.type){LP.extendObject(this,A);this._init()}};LP.Pagination.prototype={_init:function(){if(this._container=jQuery(".pagination",this.module).get(0)){this.params.siteId=LP.site.id;this._totalPageCount=parseInt(LP.getClassParams(this._container)[1]);this._pageLinkContainers=this._container.getElementsByTagName("li");this._displayPageCount=0;for(var C=this._pageLinkContainers.length,B;C--;){B=this._pageLinkContainers[C];!jQuery(B).hasClass("next")&&!jQuery(B).hasClass("prev")&&this._displayPageCount++}this.currentPage=parseInt(jQuery(".js-pagination-currentpage",this._container).html());this._tPage=new LP.Template(LP.Templates.PG);this._tPageCurrent=new LP.Template(LP.Templates.PG_CURRENT);this._tPageNext=new LP.Template(LP.Templates.PG_NEXT);this._tPagePrev=new LP.Template(LP.Templates.PG_PREV);this._update();var A=this;jQuery(this._container).on("click","a",function(D){D.stopPropagation();D.preventDefault();var E=D.target;A.getPage(parseInt(LP.getUrlParam("page",E.href)))})}},_update:function(){var E="",H=Math.floor(this._displayPageCount/2),A=this._displayPageCount-H-1,B,G;if(this.currentPage-A>0){if(this.currentPage+H<=this._totalPageCount){B=H;G=A}else{B=this._totalPageCount-this.currentPage;G=this._displayPageCount-B-1}}else{G=this.currentPage-1;B=this._displayPageCount-G-1}for(var D=this.currentPage-1,F=0;F<G;D--,F++){E=this._tPage.apply({page:D})+E}E=this._tPagePrev.apply({page:this.currentPage-1,hidden:this.currentPage>1?"":"hidden"})+E;E+=this._tPageCurrent.apply({page:this.currentPage});for(var C=this.currentPage+1,F=0;F<B;C++,F++){E+=this._tPage.apply({page:C})}E+=this._tPageNext.apply({page:this.currentPage+1,hidden:this.currentPage<this._totalPageCount?"":"hidden"});this._container.innerHTML=E},_toggleLoading:function(A){if(A){if(!this._loader){this._loader=document.createElement("div");document.body.appendChild(this._loader);this._loader.innerHTML=LP.Templates.PG_LOADING;jQuery(this._loader).css("display","inline-block")}var B=jQuery(this.pageContainer).offset().left;var C=jQuery(this.pageContainer).offset().top;jQuery(this._loader).css({position:"absolute",left:B+(this.pageContainer.offsetWidth/2)-8,top:C+(this.pageContainer.offsetHeight/2)-8})}else{jQuery(this._loader).css({left:-10000,top:0})}},getPage:function(B){jQuery(this.pageContainer).css("visibility","hidden");this._toggleLoading(true);this.params.pageNumber=B;var A=this;AjaxPaginationHelper.getPaginatedResults(this.params,function(C){A._toggleLoading(false);if(!C.error){if(LP.Analytics){LP.Analytics.log()}if(!A._adsRemoved){LP.Ads.DC.remove(A.module);A._adsRemoved=true}if(document.getElementById("channel-activity-results")){var D=jQuery("#channel-activity-results").offset();jQuery("body,html").animate({scrollTop:D.top-70,scrollLeft:D.left},600)}else{if(document.getElementById("galleries-list")){var D=jQuery("#galleries-list").offset();jQuery("body,html").animate({scrollTop:D.top-70,scrollLeft:D.left},600)}else{jQuery("html, body").animate({scrollTop:jQuery(".js-pagination-top").offset().top},600)}}A.pageContainer.innerHTML=(A.renderer)?A.renderer.call(A,C):function(){var G="";for(var F=0,E=C.length;F<E;F++){G+=A.itemTemplate.apply(C[F])}return G}();jQuery(A.pageContainer).css({opacity:0,visibility:"visible"});jQuery(A.pageContainer).animate({opacity:1},600);jQuery.event.trigger(LP.PageEventManager.DOMUPDATE);A.currentPage=parseInt(B);A._update();if(A.listeners&&A.listeners.oncomplete){A.listeners.oncomplete.fn.call(A.listeners.oncomplete.scope)}}else{}})}};
LP.Polls=function(){var H,G;var F="poll-voted";function B(O){var N=O.getElementsByTagName("li");for(var M=N.length;M--;){K(N[M])}function K(P){var S=document.createElement("span"),Q=P.getElementsByTagName("input")[0],R=P.getElementsByTagName("label")[0];S.className="js-checkbox polls__checkbox";jQuery(S).insertBefore(R);jQuery([S,R]).on("click",J)}function L(R){var Q=R.target;if(Q.checked==true){var P=jQuery(".selected",O);if(P.length>0){jQuery(P[0]).removeClass("selected")}jQuery(jQuery(Q).next()).addClass("selected")}}function J(R){var Q=R.target;if(Q.tagName=="LABEL"){Q=jQuery(Q).prev()}if(!jQuery(Q).hasClass("selected")){var P=jQuery(".selected",O);if(P.length>0){jQuery(P[0]).removeClass("selected")}jQuery(Q).addClass("selected");jQuery(Q).prev().attr("checked",true)}}}function D(J){J.stopPropagation();J.preventDefault();return false}function C(P){var O,Q,J,L,K,N,O,R;R=0;Q=P.target;P.stopPropagation();P.preventDefault();J=Q.id;L=J.slice(4);K="pollForm"+L;N=jQuery("#"+K)[0];O=jQuery(".radioButton",N);for(var M=O.length;M--;){if(jQuery(O[M]).attr("checked")=="checked"){R=O[M].value}}if(R!=0){jQuery(Q).off("click",C);jQuery(Q).on("click",D);AjaxPollHelper.registerVote(R,function(U){var X=U.answers;var W=jQuery("#pollList"+L)[0];var Y=jQuery("#buttonContainer"+L)[0];var T=Cookie.get(F);var S=new Date();S.setTime(S.getTime()+(2*365*24*60*60*1000));if(T){var V=T+"|"+L;Cookie.set(F,V,{raw:true,expires:S,path:"/"})}else{Cookie.set(F,L,{raw:true,expires:S,path:"/"})}if(W&&Y&&X.length>0){I(X,W,Y)}})}return false}function I(P,O,Q){var K;var N;var M;O.innerHTML="";jQuery(O).addClass("answers");jQuery(O).removeClass("bg-stone");jQuery(O).removeClass("p10-l");jQuery(O).removeClass("p10-r");for(var L=0;L<P.length;L++){M=P[L].answerText;N=P[L].percentage;K=G.apply({answerText:M,percentage:P[L].percentage,parcentageBarWidth:N});var J=document.createElement("li");J.className="cld";J.innerHTML=K;jQuery(J).appendTo(O);jQuery(J).css("opacity","0");M="";N=0;E(J)}Q.innerHTML="<div class='fg-action fnt-12 p10-t'>Thank you for your vote.</div>";jQuery.event.trigger(LP.PageEventManager.DOMUPDATE)}function A(J){for(var K=0;K<J.length;K++){if(J[K].checked==true){J[K].checked=false}}}function E(J){jQuery(J).animate({opacity:1,duration:"slow",complete:function(){if(LP.isIE&&this.nodeName==="LI"){this.removeAttribute("style")}}})}return{init:function(){G=new LP.Template(LP.Templates.POLL_ANSWER);var J=Cookie.get(F);var L=jQuery(".js-poll-form-not-voted");for(var K=L.length;K--;){if(J&&J.indexOf(L[K].value)!=-1){var M=L[K].value;AjaxPollHelper.getPollData(M,function(N){var P=N.answers;var O=jQuery("#pollList"+M);var Q=jQuery("#buttonContainer"+M);if(O&&Q&&P.length>0){I(P,O,Q)}})}}H=jQuery(".js-poll-options");for(var K=H.length;K--;){A(jQuery(".radioButton",H[K]));jQuery(H[K].getElementsByTagName("input")).css("display","none");B(H[K])}pollVoteButtons=jQuery(".js-poll-vote");for(var K=H.length;K--;){jQuery(pollVoteButtons[K]).on("click",C)}}}}();
LP.Profile={};LP.Profile.Create=function(){var E="Saving to profile",A,D;function B(G){var I=G.target;if(jQuery(".selected").length==1){var F=jQuery(" .selected img",A);jQuery("img").removeClass("selected");jQuery(I).addClass("selected");I.parentNode.getElementsByTagName("input")[0].checked=true;var H=jQuery("#selectedRandomImageTrue");if(H!=null){H.prop("checked",true)}E="Saving to profile"}}function C(F){F.stopPropagation();var G=jQuery("#selectedRandomImageTrue");if(G!=null){G.checked=true}LP.Prompt.progress("Please wait a moment...","");jQuery("#userProfileChoosePictureFormId").submit()}return{init:function(){var G=function(){A=jQuery(".choose-profile-picture").children();jQuery("#js-picture-chooser").addClass("js-enabled");D=jQuery(".js-enabled img");D.first().addClass("selected");D.click(B);LP.registerButton("submit-profile-picture-btn",function(){LP.Forms.submitWithProgress(jQuery("#userProfileChoosePictureFormId")[0],"Please wait a moment...",E)});jQuery("#js-skip").click(C);jQuery("#js-skip1").click(C);jQuery("#profileImageFile").change(function(){var I=jQuery("#selectedRandomImageFalse");if(I!=null){I.checked=true}E="Uploading Picture"});jQuery(".profile-creation-status").removeClass("dis-n");jQuery(".choose-profile-picture").removeClass("dis-n")};if(!LP.getUrlParam("morePhotos")){var H="Congratulations you have now successfully registered. Before we start...Are you the owner of a business in "+LP.site.location+"?";var F="Thanks for verifying your email.";if(LP.site.verifyAfterLogin){H="Are you the owner of a business in "+LP.site.location+"?";F="Before we start..."}LP.Prompt.question(H,F,function(I){if(I=="yes"){LP.Prompt.progress("Redirecting to claim business page...","Please wait");location.href="/claim-business-search.html"}else{G()}},LP.Prompt.YESNO)}else{G()}}}}();LP.Profile.Connect={init:function(){var A=LP.registerButton("js-connect-submit",function(){LP.Invites.addHandler(function(){A.submitForm()});LP.Invites.sendEmails()})}};LP.Profile.Edit=function(){return{init:function(){}}}();
LP.Prompt=function(){var H,D,K,B,M,G=[],F=false,L=true,A,J;var C=function(O){var N=O.target;while(N.nodeName.toLowerCase()!="a"){N=N.parentNode}O.stopPropagation();E();if(J){J.call(this,N.className.match(/ok|cancel|yes|no/)[0])}};var I=function(N){if(!H){J=N.handler;H=jQuery(function(){if(N.progress){if(N.type==LP.Prompt.YESNO){var P=null}}else{if(N.question){if(N.type==LP.Prompt.YESNO){var P={Yes:function(){if(typeof J=="function"){J.call(this,"yes")}jQuery(this).dialog("close")},No:function(){if(typeof J=="function"){J.call(this,"no")}jQuery(this).dialog("close")}}}else{var P={Ok:function(){jQuery(this).dialog("close")},Cancel:function(){jQuery(this).dialog("close")}}}}else{var P={Ok:function(){jQuery(this).dialog("close")}}}}var O=jQuery("body").prepend('<div style="display:none;" id="dialog-confirm">'+N.message+"</div>");jQuery("#dialog-confirm").dialog({resizable:false,zIndex:10000,height:"auto",modal:true,draggable:false,title:N.heading,closeOnEscape:false,buttons:P})})}else{jQuery("#dialog-confirm").html("option","title",N.title);jQuery("#dialog-confirm").dialog("option","buttons",N.btnText);jQuery("#dialog-confirm").html(N.message);jQuery("#dialog-confirm").dialog("open")}if(L){LP.PageEventManager.registerPanel(H)}if(!F){jQuery("#dialog-confirm").dialog("open");F=true}};var E=function(){if(A){clearTimeout(A);A=null}if(H&&F){jQuery("#dialog-confirm").dialog("close");F=false}};return{init:function(N){this.message(N[0].message,N[0].heading)},YESNO:1,OKCANCEL:2,texts:{sorry:"Sorry, we are unable to deal with your request at this time"},alert:function(O,N){this.message(O,"Sorry...",N)},message:function(O,P,N){I({message:O,heading:P,btnText:"ok",handler:N})},question:function(P,Q,O,N){I({message:P,heading:Q,type:N||LP.Prompt.OKCANCEL,question:true,handler:O})},generic:function(N){I(N)},progress:function(N,P,O){L=(O==undefined||O!=true)?false:true;I({message:N,heading:P,btnText:"",progress:true})},hide:E}}();
LP.Properties=function(){var A="property-search-results-container";var D="tab-rent";var E="tab-buy";var G="featured-properties";var B="tab-pane";var F;var C;return{init:function(L){function K(){if(!C){C=true;jQuery("#"+E).get(0).selectedIndex=0;jQuery("#"+D).get(0).selectedIndex=0;jQuery.event.trigger(LP.PageEventManager.DOMUPDATE)}}function I(){if(!F){F=true;jQuery("#"+E).get(0).selectedIndex=1;jQuery("#"+D).get(0).selectedIndex=1;jQuery.event.trigger(LP.PageEventManager.DOMUPDATE)}}var H=jQuery("."+G)[0];var J=new LP.Tabs({container:H,activeClasses:"a-w ah-w bg-blu1",inactiveClasses:"bg-gry2 blu1 ah-blu1 ah-bg-grn",tabs:H.getElementsByTagName("ul")[0].getElementsByTagName("li"),tabPanes:jQuery("."+B,H).get(),initialTabIndex:L[0],handler:function(){if(J.tabIndex==0){K()}else{if(J.tabIndex==1){I()}}}});if(J.tabIndex==0){K()}else{if(J.tabIndex==1){I()}}LP.forceRedraw(H)}}}();
LP.Search={};LP.Search.Refine=function(){var A;var B=function(){jQuery.event.trigger(LP.PageEventManager.DOMUPDATE)};return{init:function(){jQuery(".js-toggle-filters").on("click",function(D){D.stopPropagation();var C=D.target;params=LP.getClassParams(C,"minNumber,moreNumber"),list=C.parentNode.parentNode.getElementsByTagName("ol")[1],show=C.innerHTML.indexOf("more")>-1,listHeight=list.offsetHeight;C.innerHTML=(show)?"Top "+params.minNumber:params.moreNumber+" more&hellip;";if(show){jQuery(list).css({height:"auto",visibility:"visible"});B()}else{jQuery(list).css({height:"0px",visibility:"hidden"});B()}})}}}();
LP.ShadowboxGallery=function(){var B,C=false;var A=function A(){loaderElements=jQuery(".js-shadowbox-init").get();buyElements=jQuery(".buy-image").get();for(var G=0,F;F=loaderElements[G++];){F.style.display="none"}for(var G=0,E;E=buyElements[G++];){E.style.display="block"}};D=function D(){setTimeout(function(){if(Shadowbox.cache[B]){var F=Shadowbox.cache[B].content;var E=Shadowbox.skin.options;E.customWidth=555;E.customHeight=370;Shadowbox.open({content:F,player:"img",gallery:"Gallery",options:E})}A()},100)};return{fireShadowboxOpenEvent:function(){jQuery(".thumbNailImage").trigger("shadowboxOpenEvent")},fireShadowboxCloseEvent:function(){jQuery(".thumbNailImage").trigger("shadowboxCloseEvent")},init:function(E){if((E[0]!=undefined)&&(E[0].imageToDisplay!="")){B=E[0].imageToDisplay;C=true}jQuery(document).ready(function(){var G=Shadowbox.skin.options;G.customWidth=555;G.customHeight=370;var F=(C)?D:A;Shadowbox.init({handleOversize:"none",counterType:"default",counterLimit:11,continuous:true,overlayOpacity:0.7,onOpen:LP.ShadowboxGallery.fireShadowboxOpenEvent,onClose:LP.ShadowboxGallery.fireShadowboxCloseEvent},F)})}}}();
LP.Sharing=function(){var G,E;var B,C=false,H,F,A,I;var D=function(){AjaxSocialPublishingHelper.getSocialNetworksConfigured(function(K){if(K[H.test]){H.configured=true;if(B){H.msgEl.innerHTML='<span class="tick m5-r">&nbsp;</span>Setup complete';if(G.configured&&E.configured){jQuery("#js-share-text").innerHTML="Great, youre now set up to share your posts with both facebook and twitter. Please click the close button to continue."}else{jQuery("#js-share-text").innerHTML="Excellent! Youre now set up to share your posts with "+H.name+". How about setting up sharing with "+H.other+" too?"}}else{jQuery("#js-"+H.name+"-toggle").removeClass("dis-n");H.msgEl.innerHTML="Your "+H.name+" account has been setup!";H.configured=false}}else{H.msgEl.innerHTML="Click this button to setup "+H.name}C=false;if(B){I.enable()}})};var J=function(M,K){M.stopPropagation();M.preventDefault();if(!C&&!K.configured&&K.msgEl){C=true;if(B){I.disable()}var L=(M.target.nodeName.toLowerCase()=="a")?M.target:jQuery(M.target).parents("a").get(0);H=K;F=window.open(L.href+"","","top="+((jQuery(window).height()-400)/2)+",left="+((jQuery(window).width()-800)/2)+",width=800,height=400");A=setInterval(function(){if(F.closed){clearInterval(A);A=null;D()}},1000);H.msgEl.innerHTML='<img src="/images/thisis/components/loader/loader-16-action-white.gif" height="16" width="16" alt="waiting" class="m5-r" />Waiting'}};return{init:function(){G={name:"twitter",other:"facebook",test:"twitterConfigured",msgEl:jQuery("#js-twitter-msg")[0]},E={name:"facebook",other:"twitter",test:"facebookConfigured",msgEl:jQuery("#js-facebook-msg")[0]};jQuery("#js-share-facebook").on("click",function(K){J(K,E)});jQuery("#js-share-twitter").on("click",function(K){J(K,G)})},checkPrompt:function(){AjaxSocialPublishingHelper.displaySocialPublishingPrompt(function(K){if(K){if(!B){B=jQuery("#js-sharing-prompt").dialog({resizable:false,zIndex:10000,width:500,modal:true,draggable:false,dialogClass:"no-title-popup"});jQuery("#js-sharing-prompt")[0].removeClass("js-hide");I=LP.registerButton("js-sharing-close",function(L){if(jQuery("#js-show-sharing").attr("checked")){AjaxSocialPublishingHelper.disableSocialPublishingPrompt()}jQuery("#js-sharing-prompt").dialog("hide")})}jQuery("#js-sharing-prompt").dialog("open")}})}}}();
LP.SimpleEditor=function(){var A;var B=function(){var M,D=false,C,E,J,I;var H=function(){if(!J){var N=$D.getElementsByClassName("yui-spellcheck","span",this._getDoc().body);$D.removeClass(N,"yui-spellcheck");$D.addClass(N,"yui-none")}this.toolbar.set("disabled",false);this.checking=false;return false};var G=function(){this.nodeChange();var S=null;if(!(typeof (this.currentElement[0])=="undefined")){S=this.currentElement[0]}E=S;I=new YAHOO.widget.EditorWindow("spellcheck",{width:"170px"});if(S){var P=document.getElementById("spell_suggest");P.innerHTML="<p>Suggestions for <b>"+S.innerHTML+":</b></p>";var Q=document.createElement("ul");Q.className="yui-spellcheck-list";P.appendChild(Q);var T="";var U=S.innerHTML;var O=this._spellData[U];for(var R=0,N=O.length;R<N;R++){T=T+'<li title="Replace ('+U+") with ("+O[R]+')">'+O[R]+"</li>"}T=T+'<li class="js-spell_ignore" title="Ignore word">Ignore word</li>';Q.innerHTML=T;$E.on(Q,"click",function(a){var V=$E.getTarget(a);$E.stopEvent(a);if(this._isElement(V,"li")){if($D.hasClass(V,"js-spell_ignore")){}else{S.innerHTML=V.innerHTML}$D.removeClass(S,"yui-spellcheck");$D.addClass(S,"yui-non");var Z=null;var Y=null;for(var X=0,W=C.length;X<W;X++){if(C[X]==E){Z=X}}C=$D.getElementsByClassName("yui-spellcheck","span",this._getDoc().body);if(C.length>=Z){Y=C[Z]}else{Y=C[0]}if(Y){J=true;this.STOP_NODE_CHANGE=true;this.currentElement=[Y];G.call(this)}else{J=false;this.checking=false;this.toolbar.set("disabled",false);this.closeWindow()}this.nodeChange()}},this,true);this.on("afterOpenWindow",function(){this.get("panel").syncIframe();var V=parseInt(this.currentWindow._knob.style.left,10);if(V===40){this.currentWindow._knob.style.left="1px"}},this,true);I.setHeader("Spelling Suggestions");D=true;this.openWindow(I)}};var L=function(){LP.Prompt.message("No spelling errors","Congratulations");this.checking=false;this.toolbar.set("disabled",false)};var F=function(){var N=$G("articleBody");if($L.trim(N.value).replace(/\<div[^\/]+\/div\>/g,"").replace(/\<br[\s\/]*>/g,"")==N.title.replace(/\r/g,"").replace(/\<br[\s\/]*>/g,"")){N.value="";M._getDoc().body.innerHTML=""}};var K=function(O){var Q,N=O.length,P=[],R={};for(Q=0;Q<N;Q++){R[O[Q].word]=O[Q].suggestions}return R};return{editorMinHeight:330,init:function(){M=new YAHOO.widget.Editor("articleBody",{animate:true,handleSubmit:false,extracss:".yui-spellcheck { background-color: yellow; } body { color : #333333 }",toolbar:{buttons:[{group:"insertitem",label:["Linking&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Spellcheck"],buttons:[{type:"push",label:"HTML Link CTRL + SHIFT + L",value:"createlink",disabled:true},{type:"push",label:"Check Spelling",value:"spellcheck"},{type:"push",label:"Bold",value:"bold"},{type:"push",label:"Italic",value:"italic"},{type:"push",label:"Underline",value:"underline"},{type:"push",label:"Create an Unordered List",value:"insertunorderedlist"},{type:"push",label:"Create an Ordered List",value:"insertorderedlist"}]}]},filter_msword:true});M._handleClick=function(O){F();if(this._isNonEditable(O)){return false}this._setCurrentEvent(O);var N=$E.getTarget(O);if(this.currentWindow){if(!$D.hasClass(N,"yui-spellcheck")){this.closeWindow()}}if(!$D.hasClass(N,"yui-spellcheck")){if(YAHOO.widget.EditorInfo.window.win&&YAHOO.widget.EditorInfo.window.scope){YAHOO.widget.EditorInfo.window.scope.closeWindow.call(YAHOO.widget.EditorInfo.window.scope)}}if(this.browser.webkit){var N=$E.getTarget(O);if(this._isElement(N,"a")||this._isElement(N.parentNode,"a")){$E.stopEvent(O);this.nodeChange()}}else{this.nodeChange()}};M.checking=false;M._checkSpelling=function(T){if(T.length>0){var R=$D.getElementsByClassName("yui-spellcheck","span",M._getDoc().body);$D.removeClass(R,"yui-spellcheck");$D.addClass(R,"yui-none");var U=[];U=K(T);var P=M._getDoc().body.innerHTML;var O;for(O in U){var S=new RegExp("\\b"+O+"\\b","g");var N='<span class="yui-spellcheck">'+O+"</span>";P=P.replace(S,N)}M.setEditorHTML(P);M._spellData=U;C=$D.getElementsByClassName("yui-spellcheck","span",M._getDoc().body);var Q=$D.getElementsByClassName("yui-spellcheck","span",M._getDoc().body)[0];M.STOP_NODE_CHANGE=true;M.currentElement=[Q];G.call(M)}else{L.call(M)}};M.on("windowspellcheckClose",function(){H.call(this);D=false},M,true);M.on("editorMouseDown",function(N){var O=this._getSelectedElement();var O=$E.getTarget(N.ev);if($D.hasClass(O,"yui-spellcheck")){this.currentElement=[O];if(D){M.closeWindow();G.call(this)}else{G.call(this)}return false}},M,true);M.on("editorKeyDown",function(N){if(this.checking){$E.stopEvent(N.ev)}},M,true);M.on("editorWindowFocus",function(N){F()},M,true);M.on("afterNodeChange",function(){this.toolbar.enableButton("spellcheck");if(this.checking){this.toolbar.set("disabled",true);this.toolbar.getButtonByValue("spellcheck").set("disabled",false);this.toolbar.selectButton("spellcheck")}},M,true);M.on("editorContentLoaded",function(){this._getDoc().body.spellcheck=false},M,true);M.on("windowRender",function(){var N=document.createElement("div");N.id="spell_suggest";M.get("panel").body.getElementsByTagName("fieldset")[0].appendChild(N);M._windows.spellcheck={body:N}},M,true);M.on("toolbarLoaded",function(){this.toolbar.on("spellcheckClick",function(){if(this._getDoc().body.innerHTML.replace(/^\s+|\s+$/g,"")!="<br>"){if(!this.checking){this.checking=true;AjaxSpellCheckerHelper.getSpellCheckSuggestions(this._getDoc().body.innerHTML,this._checkSpelling)}else{this.checking=false;var N=$D.getElementsByClassName("yui-spellcheck","span",this._getDoc().body);$D.removeClass(N,"yui-spellcheck");$D.addClass(N,"yui-none");this.toolbar.set("disabled",false);this.nodeChange();this.closeWindow(I)}}return false},this,true)},M,true);M.on("editorKeyUp",function(){},this,true);M.render()},synchWithTextArea:function(){M.saveHTML()},resetText:function(){M._getDoc().body.innerHTML=$G("articleBody").title}}};return{get:function(){jQuery(document.body).addClass("yui-skin-sam hl-skin");return A||(A=B())}}}();
LP.Social=jQuery(document).ready(function(){jQuery(".js-social-link").click(function(){jQuery("#js-social-bookmarks").toggleClass("dis-n",4000);return false})});
LP.SortManager=function(){function A(D){for(var C=0,B=D.length;C<B;C++){new LP.Sort(D[C].id)}}return{init:A}}();LP.Sort=function(A){this.init(A)};LP.Sort.prototype={classes:{list:"js-list",listOption:"js-option",sortButton:"js-sort-button"},init:function(A){if(!(this.container=document.getElementById(A))){return false}this.list=jQuery("."+this.classes.list,this.container).get(0);this.sortButton=jQuery("."+this.classes.sortButton,this.container).get(0);this.listOptions=jQuery("."+this.classes.listOption,this.container).get(0);var B;var E;var D;var C=function(F,G){F.stopPropagation();if(!jQuery(".js-noclick",G.item)[0]){LP.Prompt.progress("Please wait...","Sorting list")}};jQuery(this.container).show();jQuery(this.container).menu({position:{my:"middle top",at:"top+25"},icons:{submenu:"ui-icon-triangle-1-s"},select:C});jQuery(this.container).menu().mouseleave(function(){jQuery(this).menu("collapseAll")})}};jQuery(function(){var A=jQuery("#js-sport-menu").menu({position:{my:"left top",at:"left+2 top+40"},icons:{submenu:"ui-icon-triangle-1-s"}});jQuery(A).mouseleave(function(){A.menu("collapseAll")})});jQuery(function(){var A=jQuery("#js-entertainment-menu").menu({position:{my:"left top",at:"left-53 top+40"},icons:{submenu:"ui-icon-triangle-1-s"}});jQuery(A).mouseleave(function(){A.menu("collapseAll")})});jQuery(function(){var A=jQuery("#js-news-menu").menu({position:{my:"left top",at:"left-0 top+40"},icons:{submenu:"ui-icon-triangle-1-s"}});jQuery(A).mouseleave(function(){A.menu("collapseAll")})});
LP.StarRating=function(B){var K,I,C,R,O,N,J;var G=function(S){jQuery(".js-rate",K).on("click",D);jQuery(K).on("mouseover",E);jQuery(K).on("mouseout",P);if(S){jQuery(K).on("mouseover",null,S,A);jQuery(K).on("mouseout",null,S,H)}};var D=function(S){var W=S.target,V=1,T=(jQuery(W).prev().length==0?null:jQuery(W).prev()[0]);while(T!=null){T=(jQuery(T).prev().length==0?null:jQuery(T).prev()[0]);V++}if(O){if(LP.LoginJanrain){if(LP.LoginJanrain.janrainNotLoggedIn()){LP.LoginJanrain.janrainFancyBoxImmediate();LP.LoginJanrain.janrainSaveClickedEl(W);return false}LP.LoginJanrain.janrainFancyBoxImmediateClose();var U=jQuery(".fill",I);U[0].className="fill "+LP.StarRatingManager.ratingClasses[V]}F();Q(O,V)}else{if(!N){N=document.createElement("input");N.setAttribute("type","hidden");N.className="js-rating-store";B.appendChild(N)}N.setAttribute("value",V);J=V}};var E=function(S){var X=S.target,W=1,T,U=(jQuery(X).prev().length==0?null:jQuery(X).prev()[0]);while(U!=null){U=(jQuery(U).prev().length==0?null:jQuery(U).prev()[0]);W++}var V=jQuery(".fill",I);V[0].className="fill "+LP.StarRatingManager.ratingClasses[W]};var P=function(){var S=jQuery(".fill",I);S[0].className="fill "+((J)?LP.StarRatingManager.ratingClasses[J]:"")};var A=function(T,S){jQuery(S).css("display","block")};var H=function(T,S){jQuery(S).css("display","none")};var Q=function(T,S){AjaxRatingHelper.rateContent(T,S,LP.currentUrl,function(U){if(!U.validInput){LP.Prompt.alert("Rating is valid from 1 to 5 only")}else{if(!U.success){if(U.regRedirectUrl!=null){window.location=U.regRedirectUrl}else{if(U.alreadyRated){LP.Prompt.alert("Sorry, you have rated this item already.")}else{LP.Prompt.alert("Error in submitting the rating.")}}}else{if(U.success){C.setAttribute((document.all?"className":"class"),"fill "+U.averageStarRating)}}}})};var M=function(S){if(LP.dwrMethod=="rateContent"){AjaxRatingHelper.rateContentAfterReg(function(T){if(T.success){C.setAttribute((document.all?"className":"class"),"fill "+T.averageStarRating);R.setAttribute((document.all?"className":"class"),"fill "+T.yourStarRating);F()}else{if(T.alreadyRated){LP.Prompt.alert("Sorry, you have rated this item already.")}else{if(!T.ignore){LP.Prompt.alert("Error in submitting the rating.")}}}})}};var F=function(){jQuery(K).off();jQuery(jQuery(".js-rate",K)).off()};var L=function(){C=jQuery(".fill",jQuery(".average",B)[0])[0];R=jQuery(".fill",jQuery(".vote",B)[0])[0];K=jQuery(".js-rating-selection",B)[0];I=jQuery(".js-rating",B)[0];N=jQuery(".js-rating-store",B)[0];hoverRatingText=jQuery(".js-rating-hover-text",B)[0];if(I){O=I.id}M(B);if(hoverRatingText){jQuery(hoverRatingText).css("display","none");G(hoverRatingText)}else{G()}};L();this.reset=function(){J=0;P();N.setAttribute("value",null)}};LP.StarRatingManager=function(){starRatings=[];return{starRatings:starRatings,init:function(){var B=jQuery(".js-star-rating");for(var A=B.length;A--;){starRatings.push(new LP.StarRating(B[A]))}},resetAll:function(){for(var A=starRatings.length;A--;){starRatings[A].reset()}},ratingClasses:["fill"," one"," two"," three"," four"," five"]}}();
LP.StoryUpload=function(){function A(){jQuery("#gallery-file-upload-container").show()}function B(){var E=jQuery("#storyForm")[0];type=LP.getUrlParam("id")?"edit":"new",groupPicker=LP.GroupPicker.get();LP.registerButton("js-article-submit",C);if(type=="edit"){LP.registerButton("js-article-submit2",C);jQuery("#js-edit-options").removeClass("dis-n is-hidden");LP.forceRedraw(E)}function C(){LP.Prompt.progress("Please wait a moment...","Validating story");LP.SimpleEditor.get().synchWithTextArea();LP.Validation.validate({form:E,method:AjaxValidationHelper.validateContent,params:[{contentType:"ARTICLE",storyVO:{storyHeadline:jQuery("#storyHeadline").val(),articleBody:jQuery("#articleBody").val()}},LP.currentUrl],callback:function(F){if(F.success){if(type=="edit"){D()}else{groupPicker.addHandlers({ok:D});groupPicker.show()}}else{LP.Prompt.hide()}}})}function D(){var F=groupPicker.getChosenGroups();jQuery("#upload-editorial-id").val(F.editorialId||"");jQuery("#upload-specialist-id").val(F.specialistId||"");LP.Forms.submitWithProgress(E,"Please wait a moment...","Saving story")}}return{init:function(C){if(Object.prototype.toString.call(C)==="[object Array]"&&C[0]!="undefined"){if(LP.MultiFileUpload&&C[0].articleId&&C[0].isEditStory){jQuery(document).ready(function(){LP.MultiFileUpload.loadImagesByContentIdAndContentType(C[0].articleId,"ARTICLE",A)})}else{if(C[0].isEditStory==false){B()}}}}}}();
LP.SwapManager=function(){var A=[];return{init:function(){var C=jQuery(".feat__categories"),B;for(var D=C.length;D--;){B=C[D].getElementsByTagName("ol")[0];A.push(new LP.Swap({links:B.getElementsByTagName("a"),handler:function(E){jQuery(E.parentNode.parentNode.getElementsByTagName("li")).removeClass("selected");jQuery(E.parentNode).addClass("selected")},swaps:[{source:"img",destination:B.parentNode.parentNode.getElementsByTagName("img")[0],prop:"src",fade:true},{source:"url",destination:B.parentNode.parentNode.getElementsByTagName("img")[0].parentNode,prop:"href"},{source:"text",destination:jQuery(B).parent().parent().find(".jsDetail")[0],fade:true},{source:"title",destination:jQuery(B).parent().parent().find(".jsFeaturedHeading")[0],fade:true},{source:"rating",destination:jQuery(B).parent().parent().find(".star-rating")[0],fade:true}]}))}}}}();LP.Swap=function(A){var B=A.links[0];jQuery(A.links).on("mouseover",function(F){var E=F.target;while(E.nodeName.toLowerCase()!="a"){E=E.parentNode}if(E!=B){for(var D=A.swaps.length;D--;){var C=jQuery("."+A.swaps[D].source,E)[0].innerHTML;A.swaps[D].destination[A.swaps[D].prop||"innerHTML"]=C;if(A.swaps[D].fade){if(A.swaps[D].source=="img"){jQuery(A.swaps[D].destination).hide().fadeIn(200,function(){})}}}if(A.handler){A.handler.call(this,E)}B=E}})};
LP.Tabs=function(B){var A=this;this.scope=this;this._callHandler=function(){if(A.beforeHandler){A.beforeHandler.call(A.scope)}A.handler.call(A.scope)};this._init(B)};LP.Tabs.prototype={tabs:[],tabPanes:null,initialTabIndex:0,tabIndex:0,previousTabIndex:0,activeClasses:"",inactiveClasses:"",borderCorners:false,handler:null,callbackOnLoad:false,getPreviousTab:function(){return this.tabs[this.previousTabIndex]},getPreviousTabPane:function(){return this.tabPanes[this.previousTabIndex]},getCurrentTab:function(){return this.tabs[this.tabIndex]},getCurrentTabPane:function(){return this.tabPanes[this.tabIndex]},selectTab:function(A){this._clickHandler(this.tabs[A])},_clickHandler:function(D){if(this.beforeHandler){this.beforeHandler.call(this.scope)}var C=D.target;if(C==undefined){C=D}while(!jQuery(C).hasClass("lp-tab")){C=C.parentNode;if(C.tagName=="BODY"){return }}if(!(D==C)){D.stopPropagation();D.preventDefault()}if(jQuery(C).hasClass("lp-tab-off")){var A=new RegExp("js-lp-tab-([0-9]+)","i").exec(C.className),B=parseInt(A[1]);this._setTabState(this.tabIndex,false);this._setTabState(B,true);this.previousTabIndex=this.tabIndex;this.tabIndex=B;if(this.handler){this.handler.call(this.scope,D)}LP.forceRedraw(this.container)}},_setTabState:function(A,C){var D=this.tabs[A];if(C){for(var B=this.inactiveClasses.length;B--;){jQuery(D).removeClass(this.inactiveClasses[B])}for(var B=this.activeClasses.length;B--;){jQuery(D).addClass(this.activeClasses[B])}if(this.tabPanes&&this.tabPanes.length==this.tabs.length){jQuery(this.tabPanes[A]).removeClass("lp-tab-pane-hidden")}}else{for(var B=this.activeClasses.length;B--;){jQuery(D).removeClass(this.activeClasses[B])}for(var B=this.inactiveClasses.length;B--;){jQuery(D).addClass(this.inactiveClasses[B])}if(this.tabPanes&&this.tabPanes.length==this.tabs.length){jQuery(this.tabPanes[A]).addClass("lp-tab-pane-hidden")}}},_init:function(A){if(!A.container){return false}LP.extendObject(this,A);this.container=((typeof this.container=="string")?jQueryG(this.container):this.container);this.activeClasses=(this.activeClasses=="")?["lp-tab-on"]:(this.activeClasses+" lp-tab-on").split(" ");this.inactiveClasses=(this.inactiveClasses=="")?["lp-tab-off"]:(this.inactiveClasses+" lp-tab-off").split(" ");this.tabIndex=this.initialTabIndex;this.previousTabIndex=this.initialTabIndex;for(var B=this.tabs.length;B--;){jQuery(this.tabs[B]).addClass("lp-tab");jQuery(this.tabs[B]).addClass("js-lp-tab-"+B);this._setTabState(B,(this.tabIndex==B))}jQuery(this.tabPanes).removeClass("js-hide");LP.forceRedraw(this.container);jQuery(this.container).on("click",jQuery.proxy(this._clickHandler,this));if(this.callbackOnLoad&&this.handler){setTimeout(this._callHandler,0)}}};
LP.Template=function(A){this.html=A;this._compile()};LP.Template.prototype={_compile:function(){this.compiled=function(A){function B(C,D){D=A[D];return(D==undefined)?"":D}return this.html.replace(/\\/g,"\\\\").replace(/(\r\n|\n)/g,"\\n").replace(/'/g,"\\'").replace(this.regex,B)};this.compiled2=function(A){function B(C,D){D=A[D];return(D==undefined)?"":D}return this.html.replace(this.regex,B)}},regex:/\{([\w-]+)\}/g,apply:function(A){return this.compiled(A)},apply2:function(A){return this.compiled2(A)},set:LP.Template};LP.Templates={IMAGE_UPLOADING:'<div class="aln-c p20-t"><span class="progress dis-b pos-r m5-b"><span class="bar dis-b" style="width: 0;"></span></span><p class="p10-b">Loading</p></div>',IMAGE_PROCESSING:'<div class="aln-c p20-t"><img class="m10-b" alt="Loading" src="/images/thisis/components/loader/loader-24-action-white.gif"/><p class="p10-b">Processing</p></div>',IMAGE_UPLOAD_ERROR:'<div class="aln-c p15-t"><div class="warning">&nbsp;</div><p>{error}</p></div>',IMAGE_UPLOADED:'<a href="#" class="btn-close l-float-right" title="Remove this picture"><i class="icon icon-remove-sign"></i></a><div class="l-float-left l-half"><label for="imageFileVOs[{position}].caption">Picture caption</label><textarea id="imageFileVOs[{position}].caption" name="imageFileVOs[{position}].caption" class="textarea caption">{caption}</textarea><span id="imageFileVOs[{position}].caption-error" class="error"></span></div>{featured}<input type="hidden" name="imageFileVOs[{position}].id" id="imageFileVOs[{position}].id" value="{id}" /><input type="hidden" name="imageFileVOs[{position}].position" id="imageFileVOs[{position}].position" value="{position}" /><input type="hidden" name="imageFileVOs[{position}].flashFile" id="imageFileVOs[{position}].flashFile" value="true" /><input type="hidden" name="imageFileVOs[{position}].extension" id="imageFileVOs[{position}].extension" value="{extension}" /><input type="hidden" name="imageFileVOs[{position}].filename" id="imageFileVOs[{position}].filename" value="{filename}" />',IMAGE_NO_FLASH:'<a href="#" class="btn-close" style="position: absolute; top: 10px; right: 10px;" title="Remove this picture"><i class="icon icon-remove-sign"></i></a><div class="media__img"><label for="imageFileVOs[{position}].file"><b>Upload picture</b></label><input id="imageFileVOs[{position}].file" type="file" class="afile" name="imageFileVOs[{position}].file" size="1" onkeydown="return false;" onbeforeeditfocus="return false;" onselectstart="return false;" /><span id="imageFileVOs[{position}].filename-error" class="error"></span><input type="hidden" id="imageFileVOs[{position}].id" name="imageFileVOs[{position}].id" />{featured}</div><div class="media__body"><div class="form-group"><label for="imageFileVOs[{position}].caption"><b>Picture caption</b></label><textarea id="imageFileVOs[{position}].caption" class="textarea caption form-control" name="imageFileVOs[{position}].caption"></textarea><div id="imageFileVOs[{position}].caption-error" class="error alert alert-danger is-hidden"></div></div></div>',IMAGE_NO_FLASH_BUSINESS:'<a href="#" class="btn-close" title="Remove this picture"><span>x</span></a><div class="right"><label class="heading heading--m" for="imageFileVOs[{position}].caption">Picture caption</label><textarea id="imageFileVOs[{position}].caption" class="textarea caption" name="imageFileVOs[{position}].caption"></textarea><span id="imageFileVOs[{position}].caption-error" class="error"></span></div><div class="left"><label class="heading heading--m" for="imageFileVOs[{position}].file">Upload picture</label><input id="imageFileVOs[{position}].file" type="file" class="afile" name="imageFileVOs[{position}].file" size="1" onkeydown="return false;" onbeforeeditfocus="return false;" onselectstart="return false;" /><span id="imageFileVOs[{position}].filename-error" class="error"></span><input type="hidden" id="imageFileVOs[{position}].id" name="imageFileVOs[{position}].id" /></div>',FEATURED_NONE:'<img title="{caption}" id="gallery-image-{position}" class="thumb" src="{thumbnailUrl}" alt="{caption}" />',FEATURED_FLASH:'<label class="featured" for="featureImage-{position}"><img title="{caption}" id="gallery-image-{position}" class="thumb" src="{thumbnailUrl}" alt="{caption}" /></label><input class="radio" type="radio" id="featureImage-{position}" value="{position}" name="featuredImagePosition" {checked} />',FEATURED_NO_FLASH:'<label class="featured clearfix" for="imageFileVOs[{position}].featuredImagePosition"><input class="radio" type="radio" id="imageFileVOs[{position}].featuredImagePosition" name="featuredImagePosition" value="{position}" {checked} />Featured</label>',DOC_UPLOADED:'<a href="#" class="btn-close" title="Remove this picture"><span>x</span></a><div class="flt-r"><label for="docFileVOs[{position}].caption">Document label</label><textarea id="docFileVOs[{position}].caption" name="docFileVOs[{position}].caption" class="textarea caption">{caption}</textarea><span id="docFileVOs[{position}].caption-error" class="error"></span></div><span class="icn icn-document">&nbsp;</span><input type="hidden" name="docFileVOs[{position}].id" id="docFileVOs[{position}].id" value="{id}" /><input type="hidden" name="docFileVOs[{position}].position" id="docFileVOs[{position}].position" value="{position}" /><input type="hidden" name="docFileVOs[{position}].flashFile" id="docFileVOs[{position}].flashFile" value="true" /><input type="hidden" name="docFileVOs[{position}].extension" id="docFileVOs[{position}].extension" value="{extension}" /><input type="hidden" name="docFileVOs[{position}].filename" id="docFileVOs[{position}].filename" value="{filename}" /><input type="hidden" name="docFileVOs[{position}].size" id="docFileVOs[{position}].size" value="{size}" />',DOC_UPLOAD_NO_FLASH:'<a href="#" class="btn-close" title="Remove this document"><span>x</span></a><div class="right"><label class="heading heading--m" for="docFileVOs[{position}].caption">Document label</label><textarea id="docFileVOs[{position}].caption" class="textarea caption" name="docFileVOs[{position}].caption"></textarea><span id="docFileVOs[{position}].caption-error" class="error"></span></div><div class="left"><label class="heading heading--m" for="docFileVOs[{position}].file">Upload document</label><input id="docFileVOs[{position}].file" type="file" class="afile" name="docFileVOs[{position}].file" size="1" onkeydown="return false;" onbeforeeditfocus="return false;" onselectstart="return false;" /><span id="docFileVOs[{position}].filename-error" class="error"></span><input type="hidden" id="docFileVOs[{position}].id" name="docFileVOs[{position}].id" /></div>',COMMENT:'<div class="avatar"><a class="avatar photo" href="{profileUrl}" title="Profile image for {username}"><img src="{avatarUrl}" alt="Profile image for {username}"></a></div><div class="comment-detail"><div class="comment-meta"><span class="author"><a href="{profileUrl}">{username}</a></span>&nbsp;|&nbsp;<span class="discussion-thread-timestamp">{timeStamp}</span></div><div class="comment-text"><p class="discussion-thread-comments-quotation">{comment}</p></div></div>',COMMENT_WITH_AUTHOR_STRING:'<div class="avatar"><a class="avatar photo" href="{profileUrl}" title="Profile image for {username}"><img src="{avatarUrl}" alt="Profile image for {username}"></a></div><div class="comment-detail"><div class="comment-meta"><span class="author"><a href="{profileUrl}">{username}</a></span>&nbsp;|&nbsp;<span class="discussion-thread-timestamp">{timeStamp}</span></div><div class="comment-text"><p class="discussion-thread-comments-quotation">{comment}</p></div></div>',COMMENT_MODERATED:'<div class="avatar"><a class="avatar photo" href="{profileUrl}" title="Profile image for {username}"><img src="{avatarUrl}" alt="Profile image for {username}"></a></div><div class="comment-detail"><div class="comment-meta"><span class="author"><a href="{profileUrl}">{username}</a></span>&nbsp;|&nbsp;<span class="discussion-thread-timestamp">{timeStamp}</span></div><div class="comment-text"><p class="discussion-thread-comments-quotation">{comment}</p><div class="alert alert-warning">Awaiting moderation. Please check back later.</div></div></div>',COMMENT_RATING:'<div class="comment-actions"><div class="js-comment-rating comment-rating {ratingClass}"><span class="text dimmed">Rate</span><a class="js-rate js-rate-up"><i class="fa fa-thumbs-up"></i></a><a class="js-rate js-rate-down"><i class="fa fa-thumbs-down"></i></a><span class="js-current-rating current-rating">&nbsp;</span><span class="js-rating-count rating-count">{rating}</span></div><a class="js-abuse-link report-link" data-content-type="Comment" data-content-id="{commentId}" data-comment-content-id="{commentId}" data-comment-content-type="{contentType}_Comment" href="#" title="Report">Report</a></div>',COMMENT_REPORT_BUTTON:'<div class="comment-actions"><a class="js-abuse-link report-link" data-content-id="{contentId}" href="#" title="Report"><span class="message acc">Report</span></a></div>',FAMILYBOOK_COMMENT:'<div class="fb-profile flt-l cld"><a class="avatar flt-r m5-b cld m25-l p20-l" title="Profile image for {username}" href="{avatarUrl}" target=""><img width="30" height="30" alt="Profile image for {username}" src="{avatarUrl}" class="dis-b bdr-grey bdr1 h-bdr-cc m20-l"></a><div class="cld flt-r aln-r m10-r"><div class="fb-avatar-text">From <a class="ah-fg-action " href="{profileUrl}" target="">{username}</a> at<span class="dtreviewed"><span class="value-title" title="{timeStamp}"><span class="fnt-11 dis-b "> {timeStamp} </span></span></span></div></div></div><div class="flt-l"><span class="fb-sprite-arrow"></span></div><div class="fb-published p10 flt-r bg-fb-ltblue"><div class="m10-b cld"><p class="fb-fg-midGrey m5-b fnt-11">Posted a message</p><div class="fb-published-text fb-no-img"><p class="text fnt-13">{comment}</p></div></div><div class="fb-divider cld"></div><span class="fnt-13 flt-l p5-t" ><a href="#" title="Report" class="Comment|${commentId}|FAMILY_BOOK_COMMENT|${commentId}| js-abuse-link fb-link fg-fb-link">Report</a></span>',FB_COMMENT_RATINGFOOTER:'<ul class="fb-social-modules m2-t flt-r js-comment-li" id="comment-{commentId}"><li class="fb-social-ratings flt-l bdr-rad m10-r"><a class="flt-l fnt-11 p5-r js-rate js-rate-up rate-up fb-announcement-comment" title="Like this"><span class="fb-like-this flt-l m5-r "></span></a></li><li class="fb-social-ratings flt-l bdr-rad m10-r bdr-rad-right"><a title="Dislike this" class="flt-l fnt-11 p5-r js-rate js-rate-down rate-down fb-announcement-comment" ><span class="fb-no-like-drk flt-l m5-r"></span></a></li><span class="fnt-13 p5 flt-r js-current-rating">Rating&nbsp;:&nbsp;<span class="p10-r"><span class="thumb-class flt-r {ratingClass}"></span><span class="js-rating-count">{rating}</span></ul></div>',GOOGLE_AD:'<li><div><h3><a href="{url}" title="go to {visible_url}" target="_blank">{line1}</a></h3><p>{line2} {line3}<br /> <a href="{url}" title="go to {visible_url}" target="_blank">{visible_url}</a></p></div></li>',GOOGLE_AD_WIDE:'<li><div class="googleAdWide"><h4><a href="{url}" title="go to {visible_url}" target="_blank">{line1}</a></h4><a class="url" href="{url}" title="go to {visible_url}" target="_blank">{visible_url}</a><br><p>{line2} {line3} </p></div></li>',PROMPT:'<div class="mod p10 cnr js-no-shadow"><div class="mod-t bdr1 bdr-no-t bdr-no-l bdr-no-r bdr-d m10-b p10-b"><h2 class="fnt-19 fnt-n fnt-serif">&nbsp;</h2></div><div class="mod-b rnd-b"><img src="/images/thisis/components/loader/loader-16-action-white.gif" height="16" width="16" alt="loading" class="flt-r m10-l m10-b" /><p class="m10-b fnt-13"></p><p class="aln-r"><a class="ok btn-std btn-std-s btn-shadow" href="#"><span><span class="body"><span class="arw">&nbsp;</span><span class="text">ok</span></span></span></a><a class="cancel btn-std btn-std-s btn-shadow m10-l" href="#"><span><span class="body"><span class="arw">&nbsp;</span><span class="text">cancel</span></span></span></a></p></div></div>',PROPERTY_MAP_BUBBLE:'<div class="mapBubble"><a href="{url}" target="_blank"><img src="{img}" alt="{title}" width="80" /></a><p><a href="{url}" target="_blank">{title}</a></p></div>',LP_TOWNS_MAP_BUBBLE:'<div class="mapBubble"><p><a class="fnt-b fnt-18 blu2 dis-ib p5-b" href="{url}">thisis <span class="grn fg-action">{styledSiteName}</span></a><br /><a class="fnt-12 fnt-b" href="{url}">{shortUrl}</a></p></div>',BUSINESS_BUBBLE:'<div class="mapBubble"><p class="fnt-15 fnt-b"><a href="{url}" target="_blank">{title}</a></p></div>',CRIME_BUBBLE:'<div class="mapBubble"><p class="fnt-12 fnt-b">{title}<br>{streetName}</p></div>',BUSINESS_REVIEW:'<div class="review-text flt-l item"><a class="avatar media__img" href="{contentCreatedByUserProfileUrl}" title="Profile image for {contentCreatedByUsername}"><img class="" src="{contentCreatedByUserProfileImageUrl}" alt="Profile image for {contentCreatedByUsername}" width="30" height="30" /></a><div class="review-text media__body item"><span class="author reviewer vcard"><a href="{contentCreatedByUserProfileUrl}" target="_blank" class="">{contentCreatedByUsername}</a></span>&nbsp;|&nbsp;  <span class="discussion-thread-timestamp">{date}</span> <h5 class="summary">{reviewTitle}</h5><p class="description">{reviewText}</p><div class="img-rating"><div class="rating"><span class="fill {rating}">&nbsp;</span><span class="stars bg-white str-{bg}">&nbsp;</span></div></div></div></div>',BUSINESS_REVIEW_MODERATED:'<div class="review-text flt-l item"><a class="avatar media__img" href="{contentCreatedByUserProfileUrl}" title="Profile image for {contentCreatedByUsername}"><img class="" src="{contentCreatedByUserProfileImageUrl}" alt="Profile image for {contentCreatedByUsername}" width="30" height="30" /></a><div class="review-text media__body item"><span class="author reviewer vcard"><a href="{contentCreatedByUserProfileUrl}" target="_blank" class="">{contentCreatedByUsername}</a></span>&nbsp;|&nbsp;  <span class="discussion-thread-timestamp">{date}</span> <h5 class="summary">{reviewTitle}</h5><p class="description">&#147;{reviewText}&#147;</p><p class="">Awaiting moderation. Please check back later.</p><div class="img-rating"><div class="rating"><span class="fill {rating}">&nbsp;</span><span class="stars bg-white str-{bg}">&nbsp;</span></div></div></div></div>',BP_CLAIMED:'<li class="p10-b claimed"><span>{name}</span></li>',BP_UNCLAIMED:'<li class="p10-b unclaimed"><input class="radio" type="radio" name="business" id="business-{id}" value="{id}" />&nbsp;<label for="business-{id}">{name}</label></li>',REVIEW_RESPONSE:'<a title="Profile image for {contentCreatedByUsername}" href="{contentCreatedByUserProfileUrl}" class="avatar media__img"><img height="50" width="50" alt="Profile image for {contentCreatedByUsername}" src="{contentCreatedByUserProfileImageUrl}" class="dis-b"></a><div class="response-text media__body item"><span><a class="" href="{contentCreatedByUserProfileUrl}">{contentCreatedByUsername}</a></span>&nbsp;|&nbsp;  <span class="discussion-thread-timestamp">{createdDate}</span><h5 class="summary">{reviewTitle}</h5><p class="">{reviewComment}</p></div>',HP_EMPTY:'<img class="loader p20" src="/images/thisis/components/loader/loader-16-action-white.gif" width="16px" height="16px" />',HP_BUSCAT:'<div class="buscat"><h2 class="fnt-15 fnt-b m10-b bg-w"><a href="{urlPrefix}">{name}</a></h2><div class="cld fnt-12 blu2 ie6-dis-i zm1"><a class="thumbnail flt-l" href="{urlPrefix}"><img width="105" height="70" border="0" alt="Business picture for {name}" src="{thumbnailImage}"></a><div class="details flt-l m10-l bg-w">{phone}<p>{address}</p></div></div></div>',POLL_ANSWER:'<p><strong>{answerText}: </strong>{parcentageBarWidth}%</p><div class="progress"><div class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="{parcentageBarWidth}" aria-valuemin="0" aria-valuemax="100" style="width: {parcentageBarWidth}%"><span class="sr-only">{parcentageBarWidth}% of the vote</span></div></div>',PG:'<li><a class="pagenumber" title="Page {page}" href="#?page={page}">{page}</a></li>',PG_PREV:'<li class="prev {hidden} l-absolute-left"><a class="pagenumber" title="Previous results page" rel="prev" href="#?page={page}"><i class="arrow-left icon-caret-left"></i>Previous</a></li>',PG_NEXT:'<li class="next {hidden} l-absolute-right"><a class="pagenumber" title="Next results page" rel="next" href="#?page={page}">Next<i class="arrow-right icon-caret-right"></i></a></li>',PG_CURRENT:'<li class="active"><span class="pagination-link pagenumber js-pagination-currentpage" >{page}</span></li>',PG_LOADING:'<img src="/images/thisis/components/loader/loader-16-action-white.gif" width="16px" height="16px" />',PG_GALLERY_ITEM:'<li class="gallery__grid__item"><a class="gallery__grid__link" href="{galleryUrl}"><img class="gallery__grid__img" src="{previewImagePromoUrl}" alt="{displayName}" width="172" height="115" /><div class="js-hide cf"><h2 class="heading heading--m gallery__grid__heading">{displayName}</h2><p class="gallery__grid__date"><span class="fnt-11 dis-b ">{createdDate}</span></p><div class="img-rating"><div class="rating"><span class="fill stars-{intRating}">&nbsp;</span><span class="stars bg-white">&nbsp;</span></div></div></div></a></li>',PG_CA_STORY_ITEM_IMG:'<a class="thumbnail m10 flt-l" href="{linkPath}"><img border="0" alt="Article thumbnail" src="{imageURL}"></a>',PG_CA_STORY_ITEM_COMMENT:'<a class="ah-fg-cc" href="{linkPath}#comments"><span class="dis-b h-fg-white bg-action bg-cc comments-bubble-wrap flt-l fnt-b  bubble-small ">{commentCount}</span><span class="p5-l fnt-12  fnt-b flt-l m10-r comments-bubble-text">{commentText}</span></a>',PG_CA_STORY:'<li class="m20-b cld pos-r bg-white"><div class="genericResult m0 p10-t bg-white  mod-2012 {colour} cld"><div class=" zm1 cld"><div class="icon-header bdr-cc bdr2 bdr-t fg-cc m15-b "><h2 class="title  fnt-19 m10-t  sp  fg-black  sp  "><a class="fg-link ah-fg-cc" href="{linkPath}">{title}</a></h2><div class="icon-container bg-cc"><div class="icon-sprite icon-sprite-news"></div></div></div><div class="resultContent"><div class="flt-l thumb-width m5-t">{img}</div><div class="genericResult-details {wideclass} flt-l"><img title="{authorizedContributor} contributor of content" width="66px" height="38px" class="{authorizedContributor}-contributor" src="/images/thisis/components/icons/{authorizedContributor}-contributor-png8.png"  alt="{authorizedContributor} article source icon" /><div class="fnt-13 m10-b">{bodyTagsStripped}</div><div class="cld m10-b"><div class="avatar-img flt-l"><a title="Profile image for {doer}" href="{profileURL}" class="avatar  avatar-baby  flt-l " target=""><img height="50" width="50" alt="Profile image for {doer}" src="{profileImageURL}" class="dis-b bdr-grey bdr1 h-bdr-cc"></a></div><div class="avatar-text"><span class="fg-action fnt-13 ah-fg-cc">By <a class="fnt-b" href="{profileURL}">{doer}</a> </span></div></div><span class="fnt-sans flt-r"><span class="fg-dkgrey fnt-11">{actionString} <span class="dis-b">{whenString}</span></span></span><div class="flt-l cld">{cmmnt}<div class="dummy||| like-this fnt-12 fnt-b fnt-n  flt-l"><a class="ah-fg-cc" href="{linkPath}"><span title="Recommend this" class="like-link  js-disabled"></span><span class="like-text"><span class="like-count">{likeCount}</span></span></a></div></div></div></div></div></div></li>',PG_CA_GALLERY:'<li class="m20-b cld pos-r bg-white"><div class="genericResult m0 p10-t bg-white  mod-2012 {colour} cld"><div class=" zm1 cld"><div class="icon-header bdr-cc bdr2 bdr-t fg-cc m15-b "><h2 class="title  fnt-19 m10-t  sp  fg-black  sp  "><a class="fg-link ah-fg-cc" href="{linkPath}">{title}</a></h2><div class="icon-container bg-cc"><div class="icon-sprite icon-sprite-galleries"></div></div></div><div class="resultContent"><div class="flt-l thumb-width m5-t"><a class="thumbnail flt-l" href="{linkPath}"><img border="0" alt="Gallery thumbnail" src="{imageURL}"></a></div><div class="genericResult-details has-thumbnail-width-gallery  flt-l"><img title="{authorizedContributor} contributor of content" width="66px" height="38px" class="{authorizedContributor}-contributor" src="/images/thisis/components/icons/{authorizedContributor}-contributor-png8.png"  alt="{authorizedContributor} article source icon" /><div class="fnt-13 m10-b">Gallery created by {doer}</div><div class="cld m10-b"><div class="avatar-img flt-l"><a title="Profile image for {doer}" href="{profileURL}" class="avatar  avatar-baby  flt-l " target=""><img height="50" width="50" alt="Profile image for {doer}" src="{profileImageURL}" class="dis-b bdr-grey bdr1 h-bdr-cc"></a></div><div class="avatar-text"><span class="fg-action fnt-13 ah-fg-cc">By <a class="fnt-b" href="{profileURL}">{doer}</a> </span></div></div><span class="fnt-sans flt-r"><span class="fg-dkgrey fnt-11">{actionString} <span class="dis-b">{whenString}</span></span></span><div class="cld flt-l"><a class="ah-fg-cc" href="{linkPath}#comments"><span class="dis-b h-fg-white bg-action bg-cc comments-bubble-wrap flt-l fnt-b  bubble-small ">{commentCount}</span> <span class="p5-l fnt-12  fnt-b flt-l m10-r comments-bubble-text">{commentText}</span></a><div class="dummy||| like-this fnt-12 fnt-b fnt-n  flt-l"><a class="ah-fg-cc" href="{linkPath}"><span class="like-link  js-disabled">&nbsp;</span><span class="like-text like-count">{likeCount}</span><span class="like-text"></span></a></div></div></div></div></div></div></li>',PG_CA_DISCUSSION:'<li class="m20-b cld pos-r bg-white"><div class="genericResult m0 p10-t bg-white  mod-2012 {colour} cld"><div class=" zm1 cld"><div class="icon-header bdr-cc bdr2 bdr-t fg-cc m15-b "><h2 class="title  fnt-19 m10-t  sp  fg-black  sp  "><a class="fg-link ah-fg-cc" href="{linkPath}"><span>&#147;</span>{body}<span>&#148;</span></a></h2><div class="icon-container bg-cc"><div class="icon-sprite icon-sprite-comments"></div></div></div><div class="resultContent"><div class="genericResult-details flt-l m5-t"><div class="cld m10-b"><div class="avatar-img flt-l"><a title="Profile image for {doer}" href="{profileURL}" class="avatar  avatar-baby  flt-l " target=""><img height="50" width="50" alt="Profile image for {doer}" src="{profileImageURL}" class="dis-b bdr-grey bdr1 h-bdr-cc"></a></div><div class="avatar-text"><span class="fg-action fnt-13 ah-fg-cc">By <a class="fnt-b" href="{profileURL}">{doer}</a> </span></div>{trustedContributor}</div><span class="fnt-sans flt-r"><span class="fg-dkgrey fnt-11">{actionString} <span class="dis-b">{whenString}</span></span></span><div class="flt-l cld"><a class="ah-fg-cc" href="{linkPath}#discussionComments"><span class="dis-b h-fg-white bg-action bg-cc comments-bubble-wrap flt-l fnt-b  bubble-small ">{commentCount}</span><span class="p5-l fnt-12  fnt-b flt-l m10-r comments-bubble-text">replies</span></a><div class="dummy||| like-this fnt-12 fnt-b fnt-n  flt-l"><a class="ah-fg-cc" href="{linkPath}"><span title="Recommend this" class="like-link  js-disabled"></span><span class="like-text"><span class="like-count">{likeCount}</span></span></a></div></div></div></div></div></div></li>',PG_EVENT_ITEM:'<li class="media">{img}<div class="media__body"><h2 class="heading"><a class="" href="{eventUrl}">{eventTitle}</a></h2><div>Times&#58; <div>{dateStr}</div></div><div>{eventDescription}</div></div></li>',PG_EVENT_ITEM_IMG:'<a class="media__img stub__img" href="{eventUrl}"><img border="0" alt="Event thumbnail" src="{thumbnailUrl}"></a>'};
LP.Validation=function(){var C,E,A,H,D,F;var B=function(){return{form:null,method:null,params:[],callback:null}};var G=function(I){if(!I.success){for(var J in I.fieldErrors){jQuery(jQuery("#"+J)[0]).addClass("failed");F=jQuery("#"+J+"-error")[0];if(F){F.innerHTML=I.fieldErrors[J];jQuery(F).removeClass("is-hidden").addClass("failed-msg")}}}if(C.callback){C.callback.call(this,I)}};return{validate:function(I){C=LP.extendObject(B(),I);this.clearErrors();C.params.push(G);C.method.apply(this,C.params)},clearErrors:function(J){if(!J&&C){J=C.form}if(J){A=jQuery(".failed",J);H=jQuery(".error",J);D=jQuery(".failed-msg",J);for(var I=D.length;I--;){jQuery(D[I]).removeClass("failed-msg").addClass("is-hidden")}for(var I=A.length;I--;){jQuery(A[I]).removeClass("failed")}for(var I=H.length;I--;){H[I].innerHTML="";jQuery(H[I]).css("display","none")}}},clearAllErrors:function(){A=jQuery(".failed");H=jQuery(".error");D=jQuery(".failed-msg",E);for(var I=D.length;I--;){jQuery(D[I]).removeClass("failed-msg").addClass("is-hidden")}for(var I=A.length;I--;){jQuery(A[I].removeClass("failed"))}for(var I=H.length;I--;){H[I].innerHTML="";jQuery(H[I]).css("display","none")}}}}();
LP.Voucher=function(){var A;var B=function(){var G,F,D,C;var K=function(N,O){var M={voucherId:O||LP.getClassParams(N,"dummy,voucherId").voucherId,vouchersRemainingCount:0};AjaxBusinessVoucherHelper.removeBusinessVoucher(M,LP.currentUrl,function(P){if(P.success){jQuery(".js-status",N.parentNode.parentNode).html(P.voucherStatus);N.parentNode.innerHTML=""}else{if(P.regRedirectUrl!=null){LP.Prompt.progress("You must be logged in to remove a voucher, redirecting...","Redirecting to Login");window.location=P.regRedirectUrl}else{LP.Prompt.message("There was an error removing the voucher","Remove Voucher Failed")}}})};var L=function(P){var M=LP.getTarget(P,"a","node");var N=jQuery(M).parent(".voucher").get();var O=jQuery(N).parent(".js-col").get();LP.Ads.DC.hideBelow(N,O);LP.Voucher.onVoucherClick(M)};var E=function(N){var M=N.target;N.stopPropagation();N.preventDefault();if(M.nodeName.toLowerCase()!="a"){M=jQuery(M).parent("a")[0]}var O=LP.getClassParams(M,"voucherID");if(LP.Analytics&&LP.Analytics.customLinkBusinessVoucherWebRedeem){LP.Analytics.customLinkBusinessVoucherWebRedeem(N)}AjaxBusinessVoucherHelper.webRedeemVoucher(O.voucherID,function(P){if(P.success){document.location.href=M.href}else{LP.Prompt.message(P.message,"This voucher is no longer redeemable")}})};function I(){if(!D){D=jQuery("#js-voucher-popup")[0];C=jQuery(D).dialog({resizable:false,zIndex:10000,width:500,modal:true,draggable:false,dialogClass:"no-title-popup"});LP.registerButton("js-v-btn-ok",function(M){J(M);LP.Forms.submitWithProgress(jQuery("#js-create-voucher")[0].getElementsByTagName("form")[0],"Please wait...","Creating Voucher")});LP.registerButton("js-v-btn-cancel",J)}jQuery("#js-v-title").html(jQuery("#voucher-title").val());jQuery("#js-v-description").html(jQuery("#voucher-description").val());jQuery("#js-v-terms").html(jQuery("#voucher-terms").val());jQuery("#js-v-expiry").html(jQuery("#voucher-expiry").val());if(jQuery("#voucher-url")&&jQuery("#voucher-url").val()!=""){if(jQuery("#js-v-more-deals-preview")){jQuery("#js-v-more-deals-preview").css("display","inline")}if(jQuery("#js-v-URL-text-preview")){jQuery("#js-v-URL-text-preview").css("display","inline")}if(jQuery("#voucher-url-text")&&jQuery("#voucher-url")&&jQuery("#js-v-URL-text-preview")){if(jQuery("#voucher-url-text")&&jQuery("#voucher-url-text").val()!=""){jQuery("#js-v-URL-text-preview").html(jQuery("#voucher-url-text").val())}else{jQuery("#js-v-URL-text-preview").html("Redeem voucher")}jQuery("#js-v-URL-text-preview").get().href=jQuery("#voucher-url").val()}}else{if(jQuery("#js-v-more-deals-preview")){jQuery("#js-v-more-deals-preview").css("display","none")}if(jQuery("#js-v-URL-text-preview")){jQuery("#js-v-URL-text-preview").css("display","none")}}jQuery("#js-v-terms").parent().css("display",(jQuery.trim(jQuery("#voucher-terms").val())=="")?"none":"block");jQuery(D).dialog("open")}function J(M){M.stopPropagation();M.preventDefault();jQuery(D).dialog("close")}var H=function(){jQuery(".js-v-redeem","body").on("click",E)};return{init:function(){slideToggleStart=true;H();LP.registerButton(jQuery(".js-v-show","body").get(),L);LP.registerButton(jQuery(".js-v-print","body").get(),function(N){N.stopPropagation();N.preventDefault();if(LP.Analytics){if(LP.Analytics.customLinkPrintBusinessVoucher){LP.Analytics.customLinkPrintBusinessVoucher(N)}if(LP.Analytics.ignitionBusinessVoucherClick){LP.Analytics.ignitionBusinessVoucherClick()}}G=window.open(LP.getTarget(N,"a","node").href,"win","left=100,top=150,width=650,height=400,toolbar=no,scrollbars=no,status=no");G.focus()});if(jQuery("#js-edit-vouchers")){var M=jQuery(".js-voucher-button","#js-edit-vouchers").get();LP.registerButton(M,function(N){K(LP.getTarget(N,"button","node"))});if(LP.dwrMethod=="removeBusinessVoucher"){AjaxBusinessVoucherHelper.removeBusinessVoucherAfterReg(function(N){if(!N.ignore){if(N.success){for(var O=M.length;O--;){if(M[O].className.indexOf(N.voucherId)>-1){K(M[O],N.voucherId);break}}}else{if(N.error){LP.Prompt.alert("Failed to remove voucher")}}}})}}if(jQuery("#js-create-voucher")){LP.CalendarManager.register({container:"voucher-expiry",options:{title:"The voucher expiry date:"},input:"voucher-expiry"});LP.registerButton("js-v-save",function(O){var N={title:jQuery("#voucher-title").val(),description:jQuery("#voucher-description").val(),termsAndConditions:jQuery("#voucher-terms").val(),expiryDate:(jQuery("#voucher-expiry").val()!="")?jQuery("#voucher-expiry").val():"",maxRedemption:jQuery("#voucher-redemptions").val()};LP.Validation.validate({form:jQuery("#js-create-voucher")[0].getElementsByTagName("form")[0],method:AjaxValidationHelper.validateVoucherSubmission,params:[N],callback:function(P){(P.success)?I():LP.forceRedraw(jQuery("#js-create-voucher"))}})})}},onVoucherLoad:function(){LP.Prompt.progress("Please wait a moment...","Creating a voucher");AjaxBusinessVoucherHelper.redeemVoucher(LP.getUrlParam("id"),function(M){if(M.success){jQuery("#voucherPrint").removeClass("dis-n");LP.Prompt.hide();var N=/chrome/.test(navigator.userAgent.toLowerCase());if(N){window.print();setTimeout("window.close();",60000)}else{window.print();window.close()}}else{LP.Prompt.message(M.message,"This voucher is no longer redeemable")}})}}};return{get:function(){return A||(A=B())},onVoucherClick:function(E){var D=jQuery(".v-details",E.parentNode.parentNode)[0],C=LP.getButton(E);LP.Ads.DC.hide("",true);jQuery(E).toggleClass(function(G,H,F){if(jQuery(E).hasClass("show-voucher")){C.setText("Hide details");C.setTitle("Hide voucher details")}else{C.setText("View details");C.setTitle("View voucher details")}return"show-voucher"});jQuery(D).slideToggle(150,function(){LP.Ads.DC.reposition("",true)})}}}();
(function(Ay,AN){var Ag={version:"3.0.3"};var Am=navigator.userAgent.toLowerCase();if(Am.indexOf("windows")>-1||Am.indexOf("win32")>-1){Ag.isWindows=true}else{if(Am.indexOf("macintosh")>-1||Am.indexOf("mac os x")>-1){Ag.isMac=true}else{if(Am.indexOf("linux")>-1){Ag.isLinux=true}}}Ag.isIE=Am.indexOf("msie")>-1;Ag.isIE6=Am.indexOf("msie 6")>-1;Ag.isIE7=Am.indexOf("msie 7")>-1;Ag.isGecko=Am.indexOf("gecko")>-1&&Am.indexOf("safari")==-1;Ag.isWebKit=Am.indexOf("applewebkit/")>-1;var BJ=/#(.+)$/,BF=/^(light|shadow)box\[(.*?)\]/i,Ao=/\s*([a-z_]*?)\s*=\s*(.+)\s*/,AS=/[0-9a-z]+$/i,BN=/(.+\/)shadowbox\.js/i;var A3=false,AX=false,AM={},K=0,Af,A5;Ag.current=-1;Ag.dimensions=null;Ag.ease=function(A){return 1+Math.pow(A-1,3)};Ag.errorInfo={fla:{name:"Flash",url:"http://www.adobe.com/products/flashplayer/"},qt:{name:"QuickTime",url:"http://www.apple.com/quicktime/download/"},wmp:{name:"Windows Media Player",url:"http://www.microsoft.com/windows/windowsmedia/"},f4m:{name:"Flip4Mac",url:"http://www.flip4mac.com/wmv_download.htm"}};Ag.gallery=[];Ag.onReady=BB;Ag.path=null;Ag.player=null;Ag.playerId="sb-player";Ag.options={animate:true,animateFade:true,autoplayMovies:true,continuous:false,enableKeys:true,flashParams:{bgcolor:"#000000",allowfullscreen:true},flashVars:{},flashVersion:"9.0.115",handleOversize:"resize",handleUnsupported:"link",onChange:BB,onClose:BB,onFinish:BB,onOpen:BB,showMovieControls:true,skipSetup:false,slideshowDelay:0,viewportPadding:20};Ag.getCurrent=function(){return Ag.current>-1?Ag.gallery[Ag.current]:null};Ag.hasNext=function(){return Ag.gallery.length>1&&(Ag.current!=Ag.gallery.length-1||Ag.options.continuous)};Ag.isOpen=function(){return A3};Ag.isPaused=function(){return A5=="pause"};Ag.applyOptions=function(A){AM=BO({},Ag.options);BO(Ag.options,A)};Ag.revertOptions=function(){BO(Ag.options,AM)};Ag.init=function(C,E){if(AX){return }AX=true;if(Ag.skin.options){BO(Ag.options,Ag.skin.options)}if(C){BO(Ag.options,C)}if(!Ag.path){var F,D=document.getElementsByTagName("script");for(var A=0,B=D.length;A<B;++A){F=BN.exec(D[A].src);if(F){Ag.path=F[1];break}}}if(E){Ag.onReady=E}Ah()};Ag.open=function(B){if(A3){return }var A=Ag.makeGallery(B);Ag.gallery=A[0];Ag.current=A[1];B=Ag.getCurrent();if(B==null){return }Ag.applyOptions(B.options||{});Ar();if(Ag.gallery.length){B=Ag.getCurrent();if(Ag.options.onOpen(B)===false){return }A3=true;Ag.skin.onOpen(B,AV)}};Ag.close=function(){if(!A3){return }A3=false;if(Ag.player){Ag.player.remove();Ag.player=null}if(typeof A5=="number"){clearTimeout(A5);A5=null}K=0;A4(false);Ag.options.onClose(Ag.getCurrent());Ag.skin.onClose();Ag.revertOptions()};Ag.play=function(){if(!Ag.hasNext()){return }if(!K){K=Ag.options.slideshowDelay*1000}if(K){Af=Au();A5=setTimeout(function(){K=Af=0;Ag.next()},K);if(Ag.skin.onPlay){Ag.skin.onPlay()}}};Ag.pause=function(){if(typeof A5!="number"){return }K=Math.max(0,K-(Au()-Af));if(K){clearTimeout(A5);A5="pause";if(Ag.skin.onPause){Ag.skin.onPause()}}};Ag.change=function(A){if(!(A in Ag.gallery)){if(Ag.options.continuous){A=(A<0?Ag.gallery.length+A:0);if(!(A in Ag.gallery)){return }}else{return }}Ag.current=A;if(typeof A5=="number"){clearTimeout(A5);A5=null;K=Af=0}Ag.options.onChange(Ag.getCurrent());AV(true)};Ag.next=function(){Ag.change(Ag.current+1)};Ag.previous=function(){Ag.change(Ag.current-1)};Ag.setDimensions=function(F,A,H,G,B,I,L,O){var M=F,C=A;var N=2*L+B;if(F+N>H){F=H-N}var D=2*L+I;if(A+D>G){A=G-D}var E=(M-F)/M,J=(C-A)/C,P=(E>0||J>0);if(O&&P){if(E>J){A=Math.round((C/M)*F)}else{if(J>E){F=Math.round((M/C)*A)}}}Ag.dimensions={height:F+B,width:A+I,innerHeight:F,innerWidth:A,top:Math.floor((H-(F+N))/2+L),left:Math.floor((G-(A+D))/2+L),oversized:P};return Ag.dimensions};Ag.makeGallery=function(F){var C=[],A=-1;if(typeof F=="string"){F=[F]}if(typeof F.length=="number"){BL(F,function(H,G){if(G.content){C[H]=G}else{C[H]={content:G}}});A=0}else{if(F.tagName){var D=Ag.getCache(F);F=D?D:Ag.makeObject(F)}if(F.gallery){C=[];var E;for(var B in Ag.cache){E=Ag.cache[B];if(E.gallery&&E.gallery==F.gallery){if(A==-1&&E.content==F.content){A=C.length}C.push(E)}}if(A==-1){C.unshift(F);A=0}}else{C=[F];A=0}}BL(C,function(H,G){C[H]=BO({},G)});return[C,A]};Ag.makeObject=function(A,C){var E={content:A.href,title:A.getAttribute("title")||"",link:A};if(C){C=BO({},C);BL(["player","title","height","width","gallery"],function(G,F){if(typeof C[F]!="undefined"){E[F]=C[F];delete C[F]}});E.options=C}else{E.options={}}if(!E.player){E.player=Ag.getPlayer(E.content)}var B=A.getAttribute("rel");if(B){var D=B.match(BF);if(D){E.gallery=escape(D[2])}BL(B.split(";"),function(G,F){D=F.match(Ao);if(D){E[D[1]]=D[2]}})}return E};Ag.getPlayer=function(C){if(C.indexOf("#")>-1&&C.indexOf(document.location.href)==0){return"inline"}var A=C.indexOf("?");if(A>-1){C=C.substring(0,A)}var D,B=C.match(AS);if(B){D=B[0].toLowerCase()}if(D){if(Ag.img&&Ag.img.ext.indexOf(D)>-1){return"img"}if(Ag.swf&&Ag.swf.ext.indexOf(D)>-1){return"swf"}if(Ag.flv&&Ag.flv.ext.indexOf(D)>-1){return"flv"}if(Ag.qt&&Ag.qt.ext.indexOf(D)>-1){if(Ag.wmp&&Ag.wmp.ext.indexOf(D)>-1){return"qtwmp"}else{return"qt"}}if(Ag.wmp&&Ag.wmp.ext.indexOf(D)>-1){return"wmp"}}return"iframe"};function Ar(){var C=Ag.errorInfo,B=Ag.plugins,L,J,G,D,H,E,I,F;for(var A=0;A<Ag.gallery.length;++A){L=Ag.gallery[A];J=false;G=null;switch(L.player){case"flv":case"swf":if(!B.fla){G="fla"}break;case"qt":if(!B.qt){G="qt"}break;case"wmp":if(Ag.isMac){if(B.qt&&B.f4m){L.player="qt"}else{G="qtf4m"}}else{if(!B.wmp){G="wmp"}}break;case"qtwmp":if(B.qt){L.player="qt"}else{if(B.wmp){L.player="wmp"}else{G="qtwmp"}}break}if(G){if(Ag.options.handleUnsupported=="link"){switch(G){case"qtf4m":H="shared";E=[C.qt.url,C.qt.name,C.f4m.url,C.f4m.name];break;case"qtwmp":H="either";E=[C.qt.url,C.qt.name,C.wmp.url,C.wmp.name];break;default:H="single";E=[C[G].url,C[G].name]}L.player="html";L.content='<div class="sb-message">'+AF(Ag.lang.errors[H],E)+"</div>"}else{J=true}}else{if(L.player=="inline"){D=BJ.exec(L.content);if(D){I=BH(D[1]);if(I){L.content=I.innerHTML}else{J=true}}else{J=true}}else{if(L.player=="swf"||L.player=="flv"){F=(L.options&&L.options.flashVersion)||Ag.options.flashVersion;if(Ag.flash&&!Ag.flash.hasFlashPlayerVersion(F)){L.width=310;L.height=177}}}}if(J){Ag.gallery.splice(A,1);if(A<Ag.current){--Ag.current}else{if(A==Ag.current){Ag.current=A>0?A-1:A}}--A}}}function A4(A){if(!Ag.options.enableKeys){return }(A?At:Ak)(document,"keydown",A7)}function A7(B){if(B.metaKey||B.shiftKey||B.altKey||B.ctrlKey){return }var C=AC(B),A;switch(C){case 81:case 88:case 27:A=Ag.close;break;case 37:A=Ag.previous;break;case 39:A=Ag.next;break;case 32:A=typeof A5=="number"?Ag.pause:Ag.play;break}if(A){AK(B);A()}}function AV(E){A4(false);var F=Ag.getCurrent();var C=(F.player=="inline"?"html":F.player);if(typeof Ag[C]!="function"){throw"unknown player "+C}if(E){Ag.player.remove();Ag.revertOptions();Ag.applyOptions(F.options||{})}Ag.player=new Ag[C](F,Ag.playerId);if(Ag.gallery.length>1){var A=Ag.gallery[Ag.current+1]||Ag.gallery[0];if(A.player=="img"){var D=new Image();D.src=A.content}var G=Ag.gallery[Ag.current-1]||Ag.gallery[Ag.gallery.length-1];if(G.player=="img"){var B=new Image();B.src=G.content}}Ag.skin.onLoad(E,Ab)}function Ab(){if(!A3){return }if(typeof Ag.player.ready!="undefined"){var A=setInterval(function(){if(A3){if(Ag.player.ready){clearInterval(A);A=null;Ag.skin.onReady(AT)}}else{clearInterval(A);A=null}},10)}else{Ag.skin.onReady(AT)}}function AT(){if(!A3){return }Ag.player.append(Ag.skin.body,Ag.dimensions);Ag.skin.onShow(An)}function An(){if(!A3){return }if(Ag.player.onLoad){Ag.player.onLoad()}Ag.options.onFinish(Ag.getCurrent());if(!Ag.isPaused()){Ag.play()}A4(true)}if(!Array.prototype.indexOf){Array.prototype.indexOf=function(C,B){var A=this.length>>>0;B=B||0;if(B<0){B+=A}for(;B<A;++B){if(B in this&&this[B]===C){return B}}return -1}}function Au(){return(new Date).getTime()}function BO(B,A){for(var C in A){B[C]=A[C]}return B}function BL(A,E){var D=0,C=A.length;for(var B=A[0];D<C&&E.call(B,D,B)!==false;B=A[++D]){}}function AF(B,A){return B.replace(/\{(\w+?)\}/g,function(D,C){return A[C]})}function BB(){}function BH(A){return document.getElementById(A)}function Az(A){A.parentNode.removeChild(A)}var AQ=true,AA=true;function AU(){var A=document.body,B=document.createElement("div");AQ=typeof B.style.opacity==="string";B.style.position="fixed";B.style.margin=0;B.style.top="20px";A.appendChild(B,A.firstChild);AA=B.offsetTop==20;A.removeChild(B)}Ag.getStyle=(function(){var A=/opacity=([^)]*)/,B=document.defaultView&&document.defaultView.getComputedStyle;return function(E,F){var C;if(!AQ&&F=="opacity"&&E.currentStyle){C=A.test(E.currentStyle.filter||"")?(parseFloat(RegExp.$1)/100)+"":"";return C===""?"1":C}if(B){var D=B(E,null);if(D){C=D[F]}if(F=="opacity"&&C==""){C="1"}}else{C=E.currentStyle[F]}return C}})();Ag.appendHTML=function(C,D){if(C.insertAdjacentHTML){C.insertAdjacentHTML("BeforeEnd",D)}else{if(C.lastChild){var B=C.ownerDocument.createRange();B.setStartAfter(C.lastChild);var A=B.createContextualFragment(D);C.appendChild(A)}else{C.innerHTML=D}}};Ag.getWindowSize=function(A){if(document.compatMode==="CSS1Compat"){return document.documentElement["client"+A]}return document.body["client"+A]};Ag.setOpacity=function(B,A){var C=B.style;if(AQ){C.opacity=(A==1?"":A)}else{C.zoom=1;if(A==1){if(typeof C.filter=="string"&&(/alpha/i).test(C.filter)){C.filter=C.filter.replace(/\s*[\w\.]*alpha\([^\)]*\);?/gi,"")}}else{C.filter=(C.filter||"").replace(/\s*[\w\.]*alpha\([^\)]*\)/gi,"")+" alpha(opacity="+(A*100)+")"}}};Ag.clearOpacity=function(A){Ag.setOpacity(A,1)};function AJ(A){return A.target}function Ac(A){return[A.pageX,A.pageY]}function AK(A){A.preventDefault()}function AC(A){return A.keyCode}function At(B,C,A){jQuery(B).bind(C,A)}function Ak(B,C,A){jQuery(B).unbind(C,A)}jQuery.fn.shadowbox=function(A){return this.each(function(){var C=jQuery(this);var B=jQuery.extend({},A||{},jQuery.metadata?C.metadata():jQuery.meta?C.data():{});var D=this.className||"";B.width=parseInt((D.match(/w:(\d+)/)||[])[1])||B.width;B.height=parseInt((D.match(/h:(\d+)/)||[])[1])||B.height;Shadowbox.setup(C,B)})};var S=false,A9;if(document.addEventListener){A9=function(){document.removeEventListener("DOMContentLoaded",A9,false);Ag.load()}}else{if(document.attachEvent){A9=function(){if(document.readyState==="complete"){document.detachEvent("onreadystatechange",A9);Ag.load()}}}}function AR(){if(S){return }try{document.documentElement.doScroll("left")}catch(A){setTimeout(AR,1);return }Ag.load()}function Ah(){if(document.readyState==="complete"){return Ag.load()}if(document.addEventListener){document.addEventListener("DOMContentLoaded",A9,false);Ay.addEventListener("load",Ag.load,false)}else{if(document.attachEvent){document.attachEvent("onreadystatechange",A9);Ay.attachEvent("onload",Ag.load);var A=false;try{A=Ay.frameElement===null}catch(B){}if(document.documentElement.doScroll&&A){AR()}}}}Ag.load=function(){if(S){return }if(!document.body){return setTimeout(Ag.load,13)}S=true;AU();Ag.onReady();if(!Ag.options.skipSetup){Ag.setup()}Ag.skin.init()};Ag.plugins={};if(navigator.plugins&&navigator.plugins.length){var AB=[];BL(navigator.plugins,function(A,B){AB.push(B.name)});AB=AB.join(",");var BC=AB.indexOf("Flip4Mac")>-1;Ag.plugins={fla:AB.indexOf("Shockwave Flash")>-1,qt:AB.indexOf("QuickTime")>-1,wmp:!BC&&AB.indexOf("Windows Media")>-1,f4m:BC}}else{var AI=function(B){var C;try{C=new ActiveXObject(B)}catch(A){}return !!C};Ag.plugins={fla:AI("ShockwaveFlash.ShockwaveFlash"),qt:AI("QuickTime.QuickTime"),wmp:AI("wmplayer.ocx"),f4m:false}}var Aa=/^(light|shadow)box/i,A8="shadowboxCacheKey",AW=1;Ag.cache={};Ag.select=function(D){var C=[];if(!D){var B;BL(document.getElementsByTagName("a"),function(G,F){B=F.getAttribute("rel");if(B&&Aa.test(B)){C.push(F)}})}else{var E=D.length;if(E){if(typeof D=="string"){if(Ag.find){C=Ag.find(D)}}else{if(E==2&&typeof D[0]=="string"&&D[1].nodeType){if(Ag.find){C=Ag.find(D[0],D[1])}}else{for(var A=0;A<E;++A){C[A]=D[A]}}}}else{C.push(D)}}return C};Ag.setup=function(A,B){BL(Ag.select(A),function(D,C){Ag.addCache(C,B)})};Ag.teardown=function(A){BL(Ag.select(A),function(C,B){Ag.removeCache(B)})};Ag.addCache=function(B,A){var C=B[A8];if(C==AN){C=AW++;B[A8]=C;At(B,"click",AD)}Ag.cache[C]=Ag.makeObject(B,A)};Ag.removeCache=function(A){Ak(A,"click",AD);delete Ag.cache[A[A8]];A[A8]=null};Ag.getCache=function(B){var A=B[A8];return(A in Ag.cache&&Ag.cache[A])};Ag.clearCache=function(){for(var A in Ag.cache){Ag.removeCache(Ag.cache[A].link)}Ag.cache={}};function AD(A){Ag.open(this);if(Ag.gallery.length){AK(A)}}Ag.lang={code:"en",of:"of",loading:"loading",cancel:"Cancel",next:"Next",previous:"Previous",play:"Play",pause:"Pause",close:"Close",errors:{single:'You must install the <a href="{0}">{1}</a> browser plugin to view this content.',shared:'You must install both the <a href="{0}">{1}</a> and <a href="{2}">{3}</a> browser plugins to view this content.',either:'You must install either the <a href="{0}">{1}</a> or the <a href="{2}">{3}</a> browser plugin to view this content.'}};var Ax,A0="sb-drag-proxy",Aw,AO,BE;function As(){Aw={x:0,y:0,startX:null,startY:null}}function BQ(){var A=Ag.dimensions;BO(AO.style,{height:A.innerHeight+"px",width:A.innerWidth+"px"})}function Ai(){As();var A=["position:absolute","cursor:"+(Ag.isGecko?"-moz-grab":"move"),"background-color:"+(Ag.isIE?"#fff;filter:alpha(opacity=0)":"transparent")].join(";");Ag.appendHTML(Ag.skin.body,'<div id="'+A0+'" style="'+A+'"></div>');AO=BH(A0);BQ();At(AO,"mousedown",Al)}function A1(){if(AO){Ak(AO,"mousedown",Al);Az(AO);AO=null}BE=null}function Al(B){AK(B);var A=Ac(B);Aw.startX=A[0];Aw.startY=A[1];BE=BH(Ag.player.id);At(document,"mousemove",Aq);At(document,"mouseup",AP);if(Ag.isGecko){AO.style.cursor="-moz-grabbing"}}function Aq(F){var C=Ag.player,E=Ag.dimensions,A=Ac(F);var B=A[0]-Aw.startX;Aw.startX+=B;Aw.x=Math.max(Math.min(0,Aw.x+B),E.innerWidth-C.width);var D=A[1]-Aw.startY;Aw.startY+=D;Aw.y=Math.max(Math.min(0,Aw.y+D),E.innerHeight-C.height);BO(BE.style,{left:Aw.x+"px",top:Aw.y+"px"})}function AP(){Ak(document,"mousemove",Aq);Ak(document,"mouseup",AP);if(Ag.isGecko){AO.style.cursor="-moz-grab"}}Ag.img=function(C,B){this.obj=C;this.id=B;this.ready=false;var A=this;Ax=new Image();Ax.onload=function(){A.height=C.height?parseInt(C.height,10):Ax.height;A.width=C.width?parseInt(C.width,10):Ax.width;A.ready=true;Ax.onload=null;Ax=null};Ax.src=C.content};Ag.img.ext=["bmp","gif","jpg","jpeg","png"];Ag.img.prototype={append:function(D,E){var C=document.createElement("img");C.id=this.id;C.src=this.obj.content;C.style.position="absolute";var B,A;if(E.oversized&&Ag.options.handleOversize=="resize"){B=E.innerHeight;A=E.innerWidth}else{B=this.height;A=this.width}C.setAttribute("height",B);C.setAttribute("width",A);D.appendChild(C)},remove:function(){var A=BH(this.id);if(A){Az(A)}A1();if(Ax){Ax.onload=null;Ax=null}},onLoad:function(){var A=Ag.dimensions;if(A.oversized&&Ag.options.handleOversize=="drag"){Ai()}},onWindowResize:function(){var A=Ag.dimensions;switch(Ag.options.handleOversize){case"resize":var C=BH(this.id);C.height=A.innerHeight;C.width=A.innerWidth;break;case"drag":if(BE){var B=parseInt(Ag.getStyle(BE,"top")),D=parseInt(Ag.getStyle(BE,"left"));if(B+this.height<A.innerHeight){BE.style.top=A.innerHeight-this.height+"px"}if(D+this.width<A.innerWidth){BE.style.left=A.innerWidth-this.width+"px"}BQ()}break}}};var A6=false,AZ=[],AH=["sb-nav-close","sb-nav-next","sb-nav-play","sb-nav-pause","sb-nav-previous"],BK,BG,AY,AL=true;function Aj(D,G,L,N,F){var H=(G=="opacity"),M=H?Ag.setOpacity:function(P,Q){P.style[G]=""+Q+"px"};if(N==0||(!H&&!Ag.options.animate)||(H&&!Ag.options.animateFade)){M(D,L);if(F){F()}return }var J=parseFloat(Ag.getStyle(D,G))||0;var I=L-J;if(I==0){if(F){F()}return }N*=1000;var C=Au(),O=Ag.ease,A=C+N,B;var E=setInterval(function(){B=Au();if(B>=A){clearInterval(E);E=null;M(D,L);if(F){F()}}else{M(D,J+O((B-C)/N)*I)}},10)}function BP(){BK.style.height=Ag.getWindowSize("Height")+"px";BK.style.width=Ag.getWindowSize("Width")+"px"}function BM(){BK.style.top=document.documentElement.scrollTop+"px";BK.style.left=document.documentElement.scrollLeft+"px"}function Ap(A){if(A){BL(AZ,function(C,B){B[0].style.visibility=B[1]||""})}else{AZ=[];BL(Ag.options.troubleElements,function(B,C){BL(document.getElementsByTagName(C),function(D,E){AZ.push([E,E.style.visibility]);E.style.visibility="hidden"})})}}function AG(B,A){var C=BH("sb-nav-"+B);if(C){C.style.display=A?"":"none"}}function BD(C,E){var F=BH("sb-loading"),B=Ag.getCurrent().player,A=(B=="img"||B=="html");if(C){Ag.setOpacity(F,0);F.style.display="block";var D=function(){Ag.clearOpacity(F);if(E){E()}};if(A){Aj(F,"opacity",1,Ag.options.fadeDuration,D)}else{D()}}else{var D=function(){F.style.display="none";Ag.clearOpacity(F);if(E){E()}};if(A){Aj(F,"opacity",0,Ag.options.fadeDuration,D)}else{D()}}}function AE(I){var A=Ag.getCurrent();BH("sb-title-inner").innerHTML=A.title||"";var H,M,E,G,L;if(Ag.options.displayNav){H=true;var J=Ag.gallery.length;if(J>1){if(Ag.options.continuous){M=L=true}else{M=(J-1)>Ag.current;L=Ag.current>0}}if(Ag.options.slideshowDelay>0&&Ag.hasNext()){G=!Ag.isPaused();E=!G}}else{H=M=E=G=L=false}AG("close",H);AG("next",M);AG("play",E);AG("pause",G);AG("previous",L);var F="";if(Ag.options.displayCounter&&Ag.gallery.length>1){var J=Ag.gallery.length;if(Ag.options.counterType=="skip"){var B=0,C=J,D=parseInt(Ag.options.counterLimit)||0;if(D<J&&D>2){var N=Math.floor(D/2);B=Ag.current-N;if(B<0){B+=J}C=Ag.current+(D-N);if(C>J){C-=J}}while(B!=C){if(B==J){B=0}F+='<a onclick="Shadowbox.change('+B+');"';if(B==Ag.current){F+=' class="sb-counter-current"'}F+=">"+(++B)+"</a>"}}else{F=[Ag.current+1,Ag.lang.of,J].join(" ")}}BH("sb-counter").innerHTML=F;I()}function Ad(A){var C=BH("sb-title-inner"),B=BH("sb-info-inner"),D=0.35;C.style.visibility=B.style.visibility="";if(C.innerHTML!=""){Aj(C,"marginTop",0,D)}Aj(B,"marginTop",0,D,A)}function Av(D,G){var I=BH("sb-title"),F=BH("sb-info"),C=I.offsetHeight,B=F.offsetHeight,A=BH("sb-title-inner"),H=BH("sb-info-inner"),E=(D?0.35:0);Aj(A,"marginTop",C,E);Aj(H,"marginTop",B*-1,E,function(){A.style.visibility=H.style.visibility="hidden";G()})}function BI(C,A,D,E){var F=BH("sb-wrapper-inner"),B=(D?Ag.options.resizeDuration:0);Aj(AY,"top",A,B);Aj(F,"height",C,B,E)}function A2(C,A,D,E){var B=(D?Ag.options.resizeDuration:0);Aj(AY,"left",A,B);Aj(AY,"width",C,B,E)}function BA(G,D){var B=BH("sb-body-inner"),G=parseInt(G),D=parseInt(D),E=AY.offsetHeight-B.offsetHeight,F=AY.offsetWidth-B.offsetWidth,I=BG.offsetHeight,H=BG.offsetWidth,A=parseInt(Ag.options.viewportPadding)||20,C=(Ag.player&&Ag.options.handleOversize!="drag");return Ag.setDimensions(G,D,I,H,E,F,A,C)}var Ae={};Ae.markup='<div id="sb-container"><div id="sb-overlay"></div><div id="sb-wrapper"><div id="sb-title"><div class="sb-closebar"><a id="sb-nav-close" title="{close}" onclick="Shadowbox.close()">Close window</a></div><div id="sb-title-inner"></div></div><a id="sb-nav-previous" title="{previous}" onclick="Shadowbox.previous()"></a><a id="sb-nav-next" title="{next}" onclick="Shadowbox.next()"></a><div id="sb-wrapper-inner"><div id="sb-body"><div id="sb-body-inner"></div><div id="sb-loading"><div id="sb-loading-inner"><span>{loading}</span></div></div></div></div><div id="sb-info"><div id="sb-info-inner"><div id="sb-counter"></div><div id="sb-nav"><a id="sb-nav-play" title="{play}" onclick="Shadowbox.play()"></a><a id="sb-nav-pause" title="{pause}" onclick="Shadowbox.pause()"></a></div></div></div></div></div>';Ae.options={animSequence:"sync",counterLimit:10,counterType:"default",displayCounter:true,displayNav:true,fadeDuration:0.35,initialHeight:160,initialWidth:320,modal:false,overlayColor:"#000",overlayOpacity:0.5,resizeDuration:0.35,showOverlay:true,troubleElements:["select","object","embed","canvas"]};Ae.init=function(){Ag.appendHTML(document.body,AF(Ae.markup,Ag.lang));Ae.body=BH("sb-body-inner");BK=BH("sb-container");BG=BH("sb-overlay");AY=BH("sb-wrapper");if(!AA){BK.style.position="absolute"}if(!AQ){var C,B,D=/url\("(.*\.png)"\)/;BL(AH,function(F,E){C=BH(E);if(C){B=Ag.getStyle(C,"backgroundImage").match(D);if(B){C.style.backgroundImage="none";C.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true,src="+B[1]+",sizingMethod=scale);"}}})}var A;At(Ay,"resize",function(){if(A){clearTimeout(A);A=null}if(A3){A=setTimeout(Ae.onWindowResize,10)}})};Ae.onOpen=function(B,A){AL=false;BK.style.display="block";BP();var C=BA(Ag.options.initialHeight,Ag.options.initialWidth);BI(C.innerHeight,C.top);A2(C.width,C.left);if(Ag.options.showOverlay){BG.style.backgroundColor=Ag.options.overlayColor;Ag.setOpacity(BG,0);if(!Ag.options.modal){At(BG,"click",Ag.close)}A6=true}if(!AA){BM();At(Ay,"scroll",BM)}Ap();BK.style.visibility="visible";if(A6){Aj(BG,"opacity",Ag.options.overlayOpacity,Ag.options.fadeDuration,A)}else{A()}};Ae.onLoad=function(B,A){BD(true);while(Ae.body.firstChild){Az(Ae.body.firstChild)}Av(B,function(){if(!A3){return }if(!B){AY.style.visibility="visible"}AE(A)})};Ae.onReady=function(A){if(!A3){return }var D=Ag.player,C=BA(D.height,D.width);var B=function(){Ad(A)};switch(Ag.options.animSequence){case"hw":BI(C.innerHeight,C.top,true,function(){A2(C.width,C.left,true,B)});break;case"wh":A2(C.width,C.left,true,function(){BI(C.innerHeight,C.top,true,B)});break;default:A2(C.width,C.left,true);BI(C.innerHeight,C.top,true,B)}};Ae.onShow=function(A){BD(false,A);AL=true};Ae.onClose=function(){if(!AA){Ak(Ay,"scroll",BM)}Ak(BG,"click",Ag.close);AY.style.visibility="hidden";var A=function(){BK.style.visibility="hidden";BK.style.display="none";Ap(true)};if(A6){Aj(BG,"opacity",0,Ag.options.fadeDuration,A)}else{A()}};Ae.onPlay=function(){AG("play",false);AG("pause",true)};Ae.onPause=function(){AG("pause",false);AG("play",true)};Ae.onWindowResize=function(){if(!AL){return }BP();var A=Ag.player,B=BA(A.height,A.width);A2(B.width,B.left);BI(B.innerHeight,B.top);if(A.onWindowResize){A.onWindowResize()}};Ag.skin=Ae;Ay.Shadowbox=Ag})(window);
(function(A){A.fn.ticker=function(C){var E=A.extend({},A.fn.ticker.defaults,C);if(A(this).length==0){if(window.console&&window.console.log){window.console.log("Element does not exist in DOM!")}else{alert("Element does not exist in DOM!")}return false}var B="#"+A(this).attr("id");var D=A(this).get(0).tagName;return this.each(function(){var G=O();var I={position:0,time:0,distance:0,newsArr:{},play:true,paused:false,contentLoaded:false,dom:{contentID:"#ticker-content-"+G,titleID:"#ticker-title-"+G,titleElem:"#ticker-title-"+G+" SPAN",tickerID:"#ticker-"+G,wrapperID:"#ticker-wrapper-"+G,revealID:"#ticker-swipe-"+G,revealElem:"#ticker-swipe-"+G+" SPAN",controlsID:"#ticker-controls-"+G,prevID:"#prev-"+G,nextID:"#next-"+G,playPauseID:"#play-pause-"+G}};if(D!="UL"&&D!="OL"&&E.htmlFeed===true){Q("Cannot use <"+D.toLowerCase()+"> type of element for this plugin - must of type <ul> or <ol>");return false}E.direction=="rtl"?E.direction="right":E.direction="left";F();function L(U){var T=0,S;for(S in U){if(U.hasOwnProperty(S)){T++}}return T}function O(){var S=new Date;return S.getTime()}function Q(S){if(E.debugMode){if(window.console&&window.console.log){window.console.log(S)}else{alert(S)}}}function F(){M();A(B).wrap('<div id="'+I.dom.wrapperID.replace("#","")+'"></div>');A(I.dom.wrapperID).children().remove();A(I.dom.wrapperID).append('<div id="'+I.dom.tickerID.replace("#","")+'"><div id="'+I.dom.titleID.replace("#","")+'" class="ticker-title"><span><!-- --></span></div><p id="'+I.dom.contentID.replace("#","")+'" class="ticker-content"></p><div id="'+I.dom.revealID.replace("#","")+'" class="ticker-swipe"><span><!-- --></span></div></div>');A(I.dom.wrapperID).removeClass("no-js").addClass("ticker-wrapper has-js "+E.direction);A(I.dom.tickerElem+","+I.dom.contentID).hide();if(E.displayType!="fade"){A(I.dom.contentID).mouseover(function(){if(I.paused==false){J()}}).mouseout(function(){if(I.paused==false){P()}})}if(!E.ajaxFeed){R()}}function M(){if(I.contentLoaded==false){if(E.ajaxFeed){if(E.feedType=="xml"){A.ajax({url:E.feedUrl,cache:false,dataType:E.feedType,async:true,success:function(W){count=0;for(var T=0;T<W.childNodes.length;T++){if(W.childNodes[T].nodeName=="rss"){xmlContent=W.childNodes[T]}}for(var U=0;U<xmlContent.childNodes.length;U++){if(xmlContent.childNodes[U].nodeName=="channel"){xmlChannel=xmlContent.childNodes[U]}}for(var S=0;S<xmlChannel.childNodes.length;S++){if(xmlChannel.childNodes[S].nodeName=="item"){xmlItems=xmlChannel.childNodes[S];var X,V=false;for(var Y=0;Y<xmlItems.childNodes.length;Y++){if(xmlItems.childNodes[Y].nodeName=="title"){X=xmlItems.childNodes[Y].lastChild.nodeValue}else{if(xmlItems.childNodes[Y].nodeName=="link"){V=xmlItems.childNodes[Y].lastChild.nodeValue}}if((X!==false&&X!="")&&V!==false){I.newsArr["item-"+count]={type:E.titleText,content:'<a href="'+V+'">'+X+"</a>"};count++;X=false;V=false}}}}if(L(I.newsArr<1)){Q("Couldn't find any content from the XML feed for the ticker to use!");return false}I.contentLoaded=true;R()}})}else{Q("Code Me!")}}else{if(E.htmlFeed){if(A(B+" LI").length>0){A(B+" LI").each(function(S){I.newsArr["item-"+S]={type:E.titleText,content:A(this).html()}})}else{Q("Couldn't find HTML any content for the ticker to use!");return false}}else{Q("The ticker is set to not use any types of content! Check the settings for the ticker.");return false}}}}function R(){I.contentLoaded=true;A(I.dom.titleElem).html(I.newsArr["item-"+I.position].type);A(I.dom.contentID).html(I.newsArr["item-"+I.position].content);if(I.position==(L(I.newsArr)-1)){I.position=0}else{I.position++}distance=A(I.dom.contentID).width();time=distance/E.speed;H()}function H(){A(I.dom.contentID).css("opacity","1");if(I.play){var S=A(I.dom.titleID).width()+20;A(I.dom.revealID).css(E.direction,S+"px");if(E.displayType=="fade"){A(I.dom.revealID).hide(0,function(){A(I.dom.contentID).css(E.direction,S+"px").fadeIn(E.fadeInSpeed,K)})}else{if(E.displayType=="scroll"){}else{A(I.dom.revealElem).show(0,function(){A(I.dom.contentID).css(E.direction,S+"px").show();animationAction=E.direction=="right"?{marginRight:distance+"px"}:{marginLeft:distance+"px"};A(I.dom.revealID).css("margin-"+E.direction,"0px").delay(20).animate(animationAction,time,"linear",K)})}}}else{return false}}function K(){if(I.play){A(I.dom.contentID).delay(E.pauseOnItems).fadeOut(E.fadeOutSpeed);if(E.displayType=="fade"){A(I.dom.contentID).fadeOut(E.fadeOutSpeed,function(){A(I.dom.wrapperID).find(I.dom.revealElem+","+I.dom.contentID).hide().end().find(I.dom.tickerID+","+I.dom.revealID).show().end().find(I.dom.tickerID+","+I.dom.revealID).removeAttr("style");R()})}else{A(I.dom.revealID).hide(0,function(){A(I.dom.contentID).fadeOut(E.fadeOutSpeed,function(){A(I.dom.wrapperID).find(I.dom.revealElem+","+I.dom.contentID).hide().end().find(I.dom.tickerID+","+I.dom.revealID).show().end().find(I.dom.tickerID+","+I.dom.revealID).removeAttr("style");R()})})}}else{A(I.dom.revealElem).hide()}}function J(){I.play=false;A(I.dom.tickerID+","+I.dom.revealID+","+I.dom.titleID+","+I.dom.titleElem+","+I.dom.revealElem+","+I.dom.contentID).stop(true,true);A(I.dom.revealID+","+I.dom.revealElem).hide();A(I.dom.wrapperID).find(I.dom.titleID+","+I.dom.titleElem).show().end().find(I.dom.contentID).show()}function P(){I.play=true;I.paused=false;K()}function N(S){J();switch(S){case"prev":if(I.position==0){I.position=L(I.newsArr)-2}else{if(I.position==1){I.position=L(I.newsArr)-1}else{I.position=I.position-2}}A(I.dom.titleElem).html(I.newsArr["item-"+I.position].type);A(I.dom.contentID).html(I.newsArr["item-"+I.position].content);break;case"next":A(I.dom.titleElem).html(I.newsArr["item-"+I.position].type);A(I.dom.contentID).html(I.newsArr["item-"+I.position].content);break}if(I.position==(L(I.newsArr)-1)){I.position=0}else{I.position++}}})};A.fn.ticker.defaults={speed:0.1,ajaxFeed:false,feedUrl:"",feedType:"xml",displayType:"reveal",htmlFeed:true,debugMode:true,controls:true,titleText:"BREAKING NEWS:",direction:"ltr",pauseOnItems:4000,fadeInSpeed:600,fadeOutSpeed:300}})(jQuery);
function ClusterIcon(A,B){A.getMarkerClusterer().extend(ClusterIcon,google.maps.OverlayView);this.cluster_=A;this.className_=A.getMarkerClusterer().getClusterClass();this.styles_=B;this.center_=null;this.div_=null;this.sums_=null;this.visible_=false;this.setMap(A.getMap())}ClusterIcon.prototype.onAdd=function(){var C=this;var A;var B;this.div_=document.createElement("div");this.div_.className=this.className_;if(this.visible_){this.show()}this.getPanes().overlayMouseTarget.appendChild(this.div_);google.maps.event.addListener(this.getMap(),"bounds_changed",function(){B=A});google.maps.event.addDomListener(this.div_,"mousedown",function(){A=true;B=false});google.maps.event.addDomListener(this.div_,"click",function(G){A=false;if(!B){var D;var E;var F=C.cluster_.getMarkerClusterer();google.maps.event.trigger(F,"click",C.cluster_);google.maps.event.trigger(F,"clusterclick",C.cluster_);if(F.getZoomOnClick()){E=F.getMaxZoom();D=C.cluster_.getBounds();F.getMap().fitBounds(D);setTimeout(function(){F.getMap().fitBounds(D);if(E!==null&&(F.getMap().getZoom()>E)){F.getMap().setZoom(E+1)}},100)}G.cancelBubble=true;if(G.stopPropagation){G.stopPropagation()}}});google.maps.event.addDomListener(this.div_,"mouseover",function(){var D=C.cluster_.getMarkerClusterer();google.maps.event.trigger(D,"mouseover",C.cluster_)});google.maps.event.addDomListener(this.div_,"mouseout",function(){var D=C.cluster_.getMarkerClusterer();google.maps.event.trigger(D,"mouseout",C.cluster_)})};ClusterIcon.prototype.onRemove=function(){if(this.div_&&this.div_.parentNode){this.hide();google.maps.event.clearInstanceListeners(this.div_);this.div_.parentNode.removeChild(this.div_);this.div_=null}};ClusterIcon.prototype.draw=function(){if(this.visible_){var A=this.getPosFromLatLng_(this.center_);this.div_.style.top=A.y+"px";this.div_.style.left=A.x+"px"}};ClusterIcon.prototype.hide=function(){if(this.div_){this.div_.style.display="none"}this.visible_=false};ClusterIcon.prototype.show=function(){if(this.div_){var A=this.getPosFromLatLng_(this.center_);this.div_.style.cssText=this.createCss(A);if(this.cluster_.printable_){this.div_.innerHTML="<img src='"+this.url_+"'><div style='position: absolute; top: 0px; left: 0px; width: "+this.width_+"px;'>"+this.sums_.text+"</div>"}else{this.div_.innerHTML=this.sums_.text}if(typeof this.sums_.title==="undefined"||this.sums_.title===""){this.div_.title=this.cluster_.getMarkerClusterer().getTitle()}else{this.div_.title=this.sums_.title}this.div_.style.display=""}this.visible_=true};ClusterIcon.prototype.useStyle=function(B){this.sums_=B;var A=Math.max(0,B.index-1);A=Math.min(this.styles_.length-1,A);var C=this.styles_[A];this.url_=C.url;this.height_=C.height;this.width_=C.width;this.anchor_=C.anchor;this.anchorIcon_=C.anchorIcon||[parseInt(this.height_/2,10),parseInt(this.width_/2,10)];this.textColor_=C.textColor||"black";this.textSize_=C.textSize||11;this.textDecoration_=C.textDecoration||"none";this.fontWeight_=C.fontWeight||"bold";this.fontStyle_=C.fontStyle||"normal";this.fontFamily_=C.fontFamily||"Arial,sans-serif";this.backgroundPosition_=C.backgroundPosition||"0 0"};ClusterIcon.prototype.setCenter=function(A){this.center_=A};ClusterIcon.prototype.createCss=function(B){var A=[];if(!this.cluster_.printable_){A.push("background-image:url("+this.url_+");");A.push("background-position:"+this.backgroundPosition_+";")}if(typeof this.anchor_==="object"){if(typeof this.anchor_[0]==="number"&&this.anchor_[0]>0&&this.anchor_[0]<this.height_){A.push("height:"+(this.height_-this.anchor_[0])+"px; padding-top:"+this.anchor_[0]+"px;")}else{A.push("height:"+this.height_+"px; line-height:"+this.height_+"px;")}if(typeof this.anchor_[1]==="number"&&this.anchor_[1]>0&&this.anchor_[1]<this.width_){A.push("width:"+(this.width_-this.anchor_[1])+"px; padding-left:"+this.anchor_[1]+"px;")}else{A.push("width:"+this.width_+"px; text-align:center;")}}else{A.push("height:"+this.height_+"px; line-height:"+this.height_+"px; width:"+this.width_+"px; text-align:center;")}A.push("cursor:pointer; top:"+B.y+"px; left:"+B.x+"px; color:"+this.textColor_+"; position:absolute; font-size:"+this.textSize_+"px; font-family:"+this.fontFamily_+"; font-weight:"+this.fontWeight_+"; font-style:"+this.fontStyle_+"; text-decoration:"+this.textDecoration_+";");return A.join("")};ClusterIcon.prototype.getPosFromLatLng_=function(B){var A=this.getProjection().fromLatLngToDivPixel(B);A.x-=this.anchorIcon_[1];A.y-=this.anchorIcon_[0];return A};function Cluster(A){this.markerClusterer_=A;this.map_=A.getMap();this.gridSize_=A.getGridSize();this.minClusterSize_=A.getMinimumClusterSize();this.averageCenter_=A.getAverageCenter();this.printable_=A.getPrintable();this.markers_=[];this.center_=null;this.bounds_=null;this.clusterIcon_=new ClusterIcon(this,A.getStyles())}Cluster.prototype.getSize=function(){return this.markers_.length};Cluster.prototype.getMarkers=function(){return this.markers_};Cluster.prototype.getCenter=function(){return this.center_};Cluster.prototype.getMap=function(){return this.map_};Cluster.prototype.getMarkerClusterer=function(){return this.markerClusterer_};Cluster.prototype.getBounds=function(){var A;var B=new google.maps.LatLngBounds(this.center_,this.center_);var C=this.getMarkers();for(A=0;A<C.length;A++){B.extend(C[A].getPosition())}return B};Cluster.prototype.remove=function(){this.clusterIcon_.setMap(null);this.markers_=[];delete this.markers_};Cluster.prototype.addMarker=function(B){var E;var D;var F;if(this.isMarkerAlreadyAdded_(B)){return false}if(!this.center_){this.center_=B.getPosition();this.calculateBounds_()}else{if(this.averageCenter_){var A=this.markers_.length+1;var G=(this.center_.lat()*(A-1)+B.getPosition().lat())/A;var C=(this.center_.lng()*(A-1)+B.getPosition().lng())/A;this.center_=new google.maps.LatLng(G,C);this.calculateBounds_()}}B.isAdded=true;this.markers_.push(B);D=this.markers_.length;F=this.markerClusterer_.getMaxZoom();if(F!==null&&this.map_.getZoom()>F){if(B.getMap()!==this.map_){B.setMap(this.map_)}}else{if(D<this.minClusterSize_){if(B.getMap()!==this.map_){B.setMap(this.map_)}}else{if(D===this.minClusterSize_){for(E=0;E<D;E++){this.markers_[E].setMap(null)}}else{B.setMap(null)}}}this.updateIcon_();return true};Cluster.prototype.isMarkerInClusterBounds=function(A){return this.bounds_.contains(A.getPosition())};Cluster.prototype.calculateBounds_=function(){var A=new google.maps.LatLngBounds(this.center_,this.center_);this.bounds_=this.markerClusterer_.getExtendedBounds(A)};Cluster.prototype.updateIcon_=function(){var B=this.markers_.length;var D=this.markerClusterer_.getMaxZoom();if(D!==null&&this.map_.getZoom()>D){this.clusterIcon_.hide();return }if(B<this.minClusterSize_){this.clusterIcon_.hide();return }var C=this.markerClusterer_.getStyles().length;var A=this.markerClusterer_.getCalculator()(this.markers_,C);this.clusterIcon_.setCenter(this.center_);this.clusterIcon_.useStyle(A);this.clusterIcon_.show()};Cluster.prototype.isMarkerAlreadyAdded_=function(A){var B;if(this.markers_.indexOf){return this.markers_.indexOf(A)!==-1}else{for(B=0;B<this.markers_.length;B++){if(A===this.markers_[B]){return true}}}return false};function MarkerClusterer(C,A,B){this.extend(MarkerClusterer,google.maps.OverlayView);A=A||[];B=B||{};this.markers_=[];this.clusters_=[];this.listeners_=[];this.activeMap_=null;this.ready_=false;this.gridSize_=B.gridSize||60;this.minClusterSize_=B.minimumClusterSize||2;this.maxZoom_=B.maxZoom||null;this.styles_=B.styles||[];this.title_=B.title||"";this.zoomOnClick_=true;if(B.zoomOnClick!==undefined){this.zoomOnClick_=B.zoomOnClick}this.averageCenter_=false;if(B.averageCenter!==undefined){this.averageCenter_=B.averageCenter}this.ignoreHidden_=false;if(B.ignoreHidden!==undefined){this.ignoreHidden_=B.ignoreHidden}this.printable_=false;if(B.printable!==undefined){this.printable_=B.printable}this.imagePath_=B.imagePath||MarkerClusterer.IMAGE_PATH;this.imageExtension_=B.imageExtension||MarkerClusterer.IMAGE_EXTENSION;this.imageSizes_=B.imageSizes||MarkerClusterer.IMAGE_SIZES;this.calculator_=B.calculator||MarkerClusterer.CALCULATOR;this.batchSize_=B.batchSize||MarkerClusterer.BATCH_SIZE;this.batchSizeIE_=B.batchSizeIE||MarkerClusterer.BATCH_SIZE_IE;this.clusterClass_=B.clusterClass||"cluster";if(navigator.userAgent.toLowerCase().indexOf("msie")!==-1){this.batchSize_=this.batchSizeIE_}this.setupStyles_();this.addMarkers(A,true);this.setMap(C)}MarkerClusterer.prototype.onAdd=function(){var A=this;this.activeMap_=this.getMap();this.ready_=true;this.repaint();this.listeners_=[google.maps.event.addListener(this.getMap(),"zoom_changed",function(){A.resetViewport_(false);if(this.getZoom()===(this.get("minZoom")||0)||this.getZoom()===this.get("maxZoom")){google.maps.event.trigger(this,"idle")}}),google.maps.event.addListener(this.getMap(),"idle",function(){A.redraw_()})]};MarkerClusterer.prototype.onRemove=function(){var A;for(A=0;A<this.markers_.length;A++){if(this.markers_[A].getMap()!==this.activeMap_){this.markers_[A].setMap(this.activeMap_)}}for(A=0;A<this.clusters_.length;A++){this.clusters_[A].remove()}this.clusters_=[];for(A=0;A<this.listeners_.length;A++){google.maps.event.removeListener(this.listeners_[A])}this.listeners_=[];this.activeMap_=null;this.ready_=false};MarkerClusterer.prototype.draw=function(){};MarkerClusterer.prototype.setupStyles_=function(){var B,A;if(this.styles_.length>0){return }for(B=0;B<this.imageSizes_.length;B++){A=this.imageSizes_[B];this.styles_.push({url:this.imagePath_+(B+1)+"."+this.imageExtension_,height:A,width:A})}};MarkerClusterer.prototype.fitMapToMarkers=function(){var A;var C=this.getMarkers();var B=new google.maps.LatLngBounds();for(A=0;A<C.length;A++){B.extend(C[A].getPosition())}this.getMap().fitBounds(B)};MarkerClusterer.prototype.getGridSize=function(){return this.gridSize_};MarkerClusterer.prototype.setGridSize=function(A){this.gridSize_=A};MarkerClusterer.prototype.getMinimumClusterSize=function(){return this.minClusterSize_};MarkerClusterer.prototype.setMinimumClusterSize=function(A){this.minClusterSize_=A};MarkerClusterer.prototype.getMaxZoom=function(){return this.maxZoom_};MarkerClusterer.prototype.setMaxZoom=function(A){this.maxZoom_=A};MarkerClusterer.prototype.getStyles=function(){return this.styles_};MarkerClusterer.prototype.setStyles=function(A){this.styles_=A};MarkerClusterer.prototype.getTitle=function(){return this.title_};MarkerClusterer.prototype.setTitle=function(A){this.title_=A};MarkerClusterer.prototype.getZoomOnClick=function(){return this.zoomOnClick_};MarkerClusterer.prototype.setZoomOnClick=function(A){this.zoomOnClick_=A};MarkerClusterer.prototype.getAverageCenter=function(){return this.averageCenter_};MarkerClusterer.prototype.setAverageCenter=function(A){this.averageCenter_=A};MarkerClusterer.prototype.getIgnoreHidden=function(){return this.ignoreHidden_};MarkerClusterer.prototype.setIgnoreHidden=function(A){this.ignoreHidden_=A};MarkerClusterer.prototype.getImageExtension=function(){return this.imageExtension_};MarkerClusterer.prototype.setImageExtension=function(A){this.imageExtension_=A};MarkerClusterer.prototype.getImagePath=function(){return this.imagePath_};MarkerClusterer.prototype.setImagePath=function(A){this.imagePath_=A};MarkerClusterer.prototype.getImageSizes=function(){return this.imageSizes_};MarkerClusterer.prototype.setImageSizes=function(A){this.imageSizes_=A};MarkerClusterer.prototype.getCalculator=function(){return this.calculator_};MarkerClusterer.prototype.setCalculator=function(A){this.calculator_=A};MarkerClusterer.prototype.getPrintable=function(){return this.printable_};MarkerClusterer.prototype.setPrintable=function(A){this.printable_=A};MarkerClusterer.prototype.getBatchSizeIE=function(){return this.batchSizeIE_};MarkerClusterer.prototype.setBatchSizeIE=function(A){this.batchSizeIE_=A};MarkerClusterer.prototype.getClusterClass=function(){return this.clusterClass_};MarkerClusterer.prototype.setClusterClass=function(A){this.clusterClass_=A};MarkerClusterer.prototype.getMarkers=function(){return this.markers_};MarkerClusterer.prototype.getTotalMarkers=function(){return this.markers_.length};MarkerClusterer.prototype.getClusters=function(){return this.clusters_};MarkerClusterer.prototype.getTotalClusters=function(){return this.clusters_.length};MarkerClusterer.prototype.addMarker=function(A,B){this.pushMarkerTo_(A);if(!B){this.redraw_()}};MarkerClusterer.prototype.addMarkers=function(C,B){var A;for(A=0;A<C.length;A++){this.pushMarkerTo_(C[A])}if(!B){this.redraw_()}};MarkerClusterer.prototype.pushMarkerTo_=function(A){if(A.getDraggable()){var B=this;google.maps.event.addListener(A,"dragend",function(){if(B.ready_){this.isAdded=false;B.repaint()}})}A.isAdded=false;this.markers_.push(A)};MarkerClusterer.prototype.removeMarker=function(A,B){var C=this.removeMarker_(A);if(!B&&C){this.repaint()}return C};MarkerClusterer.prototype.removeMarkers=function(E,B){var A,C;var D=false;for(A=0;A<E.length;A++){C=this.removeMarker_(E[A]);D=D||C}if(!B&&D){this.repaint()}return D};MarkerClusterer.prototype.removeMarker_=function(A){var C;var B=-1;if(this.markers_.indexOf){B=this.markers_.indexOf(A)}else{for(C=0;C<this.markers_.length;C++){if(A===this.markers_[C]){B=C;break}}}if(B===-1){return false}A.setMap(null);this.markers_.splice(B,1);return true};MarkerClusterer.prototype.clearMarkers=function(){this.resetViewport_(true);this.markers_=[]};MarkerClusterer.prototype.repaint=function(){var A=this.clusters_.slice();this.clusters_=[];this.resetViewport_(false);this.redraw_();setTimeout(function(){var B;for(B=0;B<A.length;B++){A[B].remove()}},0)};MarkerClusterer.prototype.getExtendedBounds=function(E){var C=this.getProjection();var F=new google.maps.LatLng(E.getNorthEast().lat(),E.getNorthEast().lng());var H=new google.maps.LatLng(E.getSouthWest().lat(),E.getSouthWest().lng());var D=C.fromLatLngToDivPixel(F);D.x+=this.gridSize_;D.y-=this.gridSize_;var B=C.fromLatLngToDivPixel(H);B.x-=this.gridSize_;B.y+=this.gridSize_;var G=C.fromDivPixelToLatLng(D);var A=C.fromDivPixelToLatLng(B);E.extend(G);E.extend(A);return E};MarkerClusterer.prototype.redraw_=function(){this.createClusters_(0)};MarkerClusterer.prototype.resetViewport_=function(C){var B,A;for(B=0;B<this.clusters_.length;B++){this.clusters_[B].remove()}this.clusters_=[];for(B=0;B<this.markers_.length;B++){A=this.markers_[B];A.isAdded=false;if(C){A.setMap(null)}}};MarkerClusterer.prototype.distanceBetweenPoints_=function(G,E){var D=6371;var B=(E.lat()-G.lat())*Math.PI/180;var C=(E.lng()-G.lng())*Math.PI/180;var A=Math.sin(B/2)*Math.sin(B/2)+Math.cos(G.lat()*Math.PI/180)*Math.cos(E.lat()*Math.PI/180)*Math.sin(C/2)*Math.sin(C/2);var H=2*Math.atan2(Math.sqrt(A),Math.sqrt(1-A));var F=D*H;return F};MarkerClusterer.prototype.isMarkerInBounds_=function(A,B){return B.contains(A.getPosition())};MarkerClusterer.prototype.addToClosestCluster_=function(C){var E,F,B,A;var G=40000;var D=null;for(E=0;E<this.clusters_.length;E++){B=this.clusters_[E];A=B.getCenter();if(A){F=this.distanceBetweenPoints_(A,C.getPosition());if(F<G){G=F;D=B}}}if(D&&D.isMarkerInClusterBounds(C)){D.addMarker(C)}else{B=new Cluster(this);B.addMarker(C);this.clusters_.push(B)}};MarkerClusterer.prototype.createClusters_=function(A){var E,C;var B;var D=this;if(!this.ready_){return }if(A===0){google.maps.event.trigger(this,"clusteringbegin",this);if(typeof this.timerRefStatic!=="undefined"){clearTimeout(this.timerRefStatic);delete this.timerRefStatic}}if(this.getMap().getZoom()>3){B=new google.maps.LatLngBounds(this.getMap().getBounds().getSouthWest(),this.getMap().getBounds().getNorthEast())}else{B=new google.maps.LatLngBounds(new google.maps.LatLng(85.02070771743472,-178.48388434375),new google.maps.LatLng(-85.08136444384544,178.00048865625))}var G=this.getExtendedBounds(B);var F=Math.min(A+this.batchSize_,this.markers_.length);for(E=A;E<F;E++){C=this.markers_[E];if(!C.isAdded&&this.isMarkerInBounds_(C,G)){if(!this.ignoreHidden_||(this.ignoreHidden_&&C.getVisible())){this.addToClosestCluster_(C)}}}if(F<this.markers_.length){this.timerRefStatic=setTimeout(function(){D.createClusters_(F)},0)}else{delete this.timerRefStatic;google.maps.event.trigger(this,"clusteringend",this)}};MarkerClusterer.prototype.extend=function(B,A){return(function(C){var D;for(D in C.prototype){this.prototype[D]=C.prototype[D]}return this}).apply(B,[A])};MarkerClusterer.CALCULATOR=function(F,D){var A=0;var E="";var C=F.length.toString();var B=C;while(B!==0){B=parseInt(B/10,10);A++}A=Math.min(A,D);return{text:C,index:A,title:E}};MarkerClusterer.BATCH_SIZE=2000;MarkerClusterer.BATCH_SIZE_IE=500;MarkerClusterer.IMAGE_PATH="http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclustererplus/images/m";MarkerClusterer.IMAGE_EXTENSION="png";MarkerClusterer.IMAGE_SIZES=[53,56,66,78,90];
!function(A){var B=function(E,C){var D=/[^\w\-\.:]/.test(E)?new Function(B.arg+",tmpl","var _e=tmpl.encode"+B.helper+",_s='"+E.replace(B.regexp,B.func)+"';return _s;"):B.cache[E]=B.cache[E]||B(B.load(E));return C?D(C,B):function(F){return D(F,B)}};B.cache={},B.load=function(C){return document.getElementById(C).innerHTML},B.regexp=/([\s'\\])(?![^%]*%\})|(?:\{%(=|#)([\s\S]+?)%\})|(\{%)|(%\})/g,B.func=function(F,H,D,E,G,C){return H?{"\n":"\\n","\r":"\\r","	":"\\t"," ":" "}[F]||"\\"+F:D?"="===D?"'+_e("+E+")+'":"'+"+E+"+'":G?"';":C?"_s+='":void 0},B.encReg=/[<>&"'\x00]/g,B.encMap={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&#39;"},B.encode=function(C){return String(C).replace(B.encReg,function(D){return B.encMap[D]||""})},B.arg="o",B.helper=",print=function(s,e){_s+=e&&(s||'')||_e(s);},include=function(s,d){_s+=tmpl(s,d);}","function"==typeof define&&define.amd?define(function(){return B}):A.tmpl=B}(this);
(function(C){var B=function(G,E,D){var I,F,H=document.createElement("img");if(H.onerror=E,H.onload=function(){!F||D&&D.noRevoke||B.revokeObjectURL(F),E&&E(B.scale(H,D))},B.isInstanceOf("Blob",G)||B.isInstanceOf("File",G)){I=F=B.createObjectURL(G),H._type=G.type}else{if("string"!=typeof G){return !1}I=G,D&&D.crossOrigin&&(H.crossOrigin=D.crossOrigin)}return I?(H.src=I,H):B.readFile(G,function(K){var J=K.target;J&&J.result?H.src=J.result:E&&E(K)})},A=window.createObjectURL&&window||window.URL&&URL.revokeObjectURL&&URL||window.webkitURL&&webkitURL;B.isInstanceOf=function(E,D){return Object.prototype.toString.call(D)==="[object "+E+"]"},B.transformCoordinates=function(){},B.getTransformedOptions=function(D){return D},B.renderImageToCanvas=function(I,L,H,K,F,D,E,M,J,G){return I.getContext("2d").drawImage(L,H,K,F,D,E,M,J,G),I},B.hasCanvasOption=function(D){return D.canvas||D.crop},B.scale=function(R,N){N=N||{};var W,K,H,J,G,T,M,U,F,P=document.createElement("canvas"),Q=R.getContext||B.hasCanvasOption(N)&&P.getContext,O=R.naturalWidth||R.width,L=R.naturalHeight||R.height,I=O,D=L,V=function(){var S=Math.max((H||I)/I,(J||D)/D);S>1&&(I=Math.ceil(I*S),D=Math.ceil(D*S))},E=function(){var S=Math.min((W||I)/I,(K||D)/D);1>S&&(I=Math.ceil(I*S),D=Math.ceil(D*S))};return Q&&(N=B.getTransformedOptions(N),M=N.left||0,U=N.top||0,N.sourceWidth?(G=N.sourceWidth,void 0!==N.right&&void 0===N.left&&(M=O-G-N.right)):G=O-M-(N.right||0),N.sourceHeight?(T=N.sourceHeight,void 0!==N.bottom&&void 0===N.top&&(U=L-T-N.bottom)):T=L-U-(N.bottom||0),I=G,D=T),W=N.maxWidth,K=N.maxHeight,H=N.minWidth,J=N.minHeight,Q&&W&&K&&N.crop?(I=W,D=K,F=G/T-W/K,0>F?(T=K*G/W,void 0===N.top&&void 0===N.bottom&&(U=(L-T)/2)):F>0&&(G=W*T/K,void 0===N.left&&void 0===N.right&&(M=(O-G)/2))):((N.contain||N.cover)&&(H=W=W||H,J=K=K||J),N.cover?(E(),V()):(V(),E())),Q?(P.width=I,P.height=D,B.transformCoordinates(P,N),B.renderImageToCanvas(P,R,M,U,G,T,0,0,I,D)):(R.width=I,R.height=D,R)},B.createObjectURL=function(D){return A?A.createObjectURL(D):!1},B.revokeObjectURL=function(D){return A?A.revokeObjectURL(D):!1},B.readFile=function(G,F,E){if(window.FileReader){var D=new FileReader;if(D.onload=D.onerror=F,E=E||"readAsDataURL",D[E]){return D[E](G),D}}return !1},"function"==typeof define&&define.amd?define(function(){return B}):C.loadImage=B})(this),function(A){"function"==typeof define&&define.amd?define(["load-image"],A):A(window.loadImage)}(function(B){if(window.navigator&&window.navigator.platform&&/iP(hone|od|ad)/.test(window.navigator.platform)){var A=B.renderImageToCanvas;B.detectSubsampling=function(E){var D,C;return E.width*E.height>1048576?(D=document.createElement("canvas"),D.width=D.height=1,C=D.getContext("2d"),C.drawImage(E,-E.width+1,0),0===C.getImageData(0,0,1,1).data[3]):!1},B.detectVerticalSquash=function(H,K){var G,J,E,C,D,L=H.naturalHeight||H.height,I=document.createElement("canvas"),F=I.getContext("2d");for(K&&(L/=2),I.width=1,I.height=L,F.drawImage(H,0,0),G=F.getImageData(0,0,1,L).data,J=0,E=L,C=L;C>J;){D=G[4*(C-1)+3],0===D?E=C:J=C,C=E+J>>1}return C/L||1},B.renderImageToCanvas=function(M,U,J,G,I,F,Q,L,R,E){if("image/jpeg"===U._type){var O,P,N,K,H=M.getContext("2d"),C=document.createElement("canvas"),T=1024,D=C.getContext("2d");if(C.width=T,C.height=T,H.save(),O=B.detectSubsampling(U),O&&(J/=2,G/=2,I/=2,F/=2),P=B.detectVerticalSquash(U,O),O||1!==P){for(G*=P,R=Math.ceil(T*R/I),E=Math.ceil(T*E/F/P),L=0,K=0;F>K;){for(Q=0,N=0;I>N;){D.clearRect(0,0,T,T),D.drawImage(U,J,G,I,F,-N,-K,I,F),H.drawImage(C,0,0,T,T,Q,L,R,E),N+=T,Q+=R}K+=T,L+=E}return H.restore(),M}}return A(M,U,J,G,I,F,Q,L,R,E)}}}),function(A){"function"==typeof define&&define.amd?define(["load-image"],A):A(window.loadImage)}(function(B){var A=B.hasCanvasOption;B.hasCanvasOption=function(C){return A(C)||C.orientation},B.transformCoordinates=function(G,E){var D=G.getContext("2d"),C=G.width,H=G.height,F=E.orientation;if(F){switch(F>4&&(G.width=H,G.height=C),F){case 2:D.translate(C,0),D.scale(-1,1);break;case 3:D.translate(C,H),D.rotate(Math.PI);break;case 4:D.translate(0,H),D.scale(1,-1);break;case 5:D.rotate(0.5*Math.PI),D.scale(1,-1);break;case 6:D.rotate(0.5*Math.PI),D.translate(0,-H);break;case 7:D.rotate(0.5*Math.PI),D.translate(C,-H),D.scale(-1,1);break;case 8:D.rotate(-0.5*Math.PI),D.translate(-C,0)}}},B.getTransformedOptions=function(E){if(!E.orientation||1===E.orientation){return E}var D,C={};for(D in E){E.hasOwnProperty(D)&&(C[D]=E[D])}switch(E.orientation){case 2:C.left=E.right,C.right=E.left;break;case 3:C.left=E.right,C.top=E.bottom,C.right=E.left,C.bottom=E.top;break;case 4:C.top=E.bottom,C.bottom=E.top;break;case 5:C.left=E.top,C.top=E.left,C.right=E.bottom,C.bottom=E.right;break;case 6:C.left=E.top,C.top=E.right,C.right=E.bottom,C.bottom=E.left;break;case 7:C.left=E.bottom,C.top=E.right,C.right=E.top,C.bottom=E.left;break;case 8:C.left=E.bottom,C.top=E.left,C.right=E.top,C.bottom=E.right}return E.orientation>4&&(C.maxWidth=E.maxHeight,C.maxHeight=E.maxWidth,C.minWidth=E.minHeight,C.minHeight=E.minWidth,C.sourceWidth=E.sourceHeight,C.sourceHeight=E.sourceWidth),C}}),function(A){"function"==typeof define&&define.amd?define(["load-image"],A):A(window.loadImage)}(function(B){var A=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice);B.blobSlice=A&&function(){var C=this.slice||this.webkitSlice||this.mozSlice;return C.apply(this,arguments)},B.metaDataParsers={jpeg:{65505:[]}},B.parseMetaData=function(E,D,C){C=C||{};var I=this,G=C.maxMetaDataSize||262144,H={},F=!(window.DataView&&E&&E.size>=12&&"image/jpeg"===E.type&&B.blobSlice);(F||!B.readFile(B.blobSlice.call(E,0,G),function(R){var J,S,O,K,P=R.target.result,Q=new DataView(P),M=2,N=Q.byteLength-4,L=M;if(65496===Q.getUint16(0)){for(;N>M&&(J=Q.getUint16(M),J>=65504&&65519>=J||65534===J);){if(S=Q.getUint16(M+2)+2,M+S>Q.byteLength){console.log("Invalid meta data: Invalid segment size.");break}if(O=B.metaDataParsers.jpeg[J]){for(K=0;O.length>K;K+=1){O[K].call(I,Q,M,S,H,C)}}M+=S,L=M}!C.disableImageHead&&L>6&&(H.imageHead=P.slice?P.slice(0,L):new Uint8Array(P).subarray(0,L))}else{console.log("Invalid JPEG file: Missing JPEG marker.")}D(H)},"readAsArrayBuffer"))&&D(H)}}),function(A){"function"==typeof define&&define.amd?define(["load-image","load-image-meta"],A):A(window.loadImage)}(function(A){A.ExifMap=function(){return this},A.ExifMap.prototype.map={Orientation:274},A.ExifMap.prototype.get=function(B){return this[B]||this[this.map[B]]},A.getExifThumbnail=function(F,D,C){var B,G,E;if(!C||D+C>F.byteLength){return console.log("Invalid Exif data: Invalid thumbnail data."),void 0}for(B=[],G=0;C>G;G+=1){E=F.getUint8(D+G),B.push((16>E?"0":"")+E.toString(16))}return"data:image/jpeg,%"+B.join("%")},A.exifTagTypes={1:{getValue:function(C,B){return C.getUint8(B)},size:1},2:{getValue:function(C,B){return String.fromCharCode(C.getUint8(B))},size:1,ascii:!0},3:{getValue:function(D,C,B){return D.getUint16(C,B)},size:2},4:{getValue:function(D,C,B){return D.getUint32(C,B)},size:4},5:{getValue:function(D,C,B){return D.getUint32(C,B)/D.getUint32(C+4,B)},size:8},9:{getValue:function(D,C,B){return D.getInt32(C,B)},size:4},10:{getValue:function(D,C,B){return D.getInt32(C,B)/D.getInt32(C+4,B)},size:8}},A.exifTagTypes[7]=A.exifTagTypes[1],A.getExifValue=function(M,F,K,D,B,C){var N,I,E,J,L,G,H=A.exifTagTypes[D];if(!H){return console.log("Invalid Exif data: Invalid tag type."),void 0}if(N=H.size*B,I=N>4?F+M.getUint32(K+8,C):K+8,I+N>M.byteLength){return console.log("Invalid Exif data: Invalid data offset."),void 0}if(1===B){return H.getValue(M,I,C)}for(E=[],J=0;B>J;J+=1){E[J]=H.getValue(M,I+J*H.size,C)}if(H.ascii){for(L="",J=0;E.length>J&&(G=E[J],"\0"!==G);J+=1){L+=G}return L}return E},A.parseExifTag=function(D,C,B,G,E){var F=D.getUint16(B,G);E.exif[F]=A.getExifValue(D,C,B,D.getUint16(B+2,G),D.getUint32(B+4,G),G)},A.parseExifTags=function(G,D,C,B,I){var F,H,E;if(C+6>G.byteLength){return console.log("Invalid Exif data: Invalid directory offset."),void 0}if(F=G.getUint16(C,B),H=C+2+12*F,H+4>G.byteLength){return console.log("Invalid Exif data: Invalid directory size."),void 0}for(E=0;F>E;E+=1){this.parseExifTag(G,D,C+2+12*E,B,I)}return G.getUint32(H,B)},A.parseExifData=function(I,F,H,D,B){if(!B.disableExif){var C,J,G,E=F+10;if(1165519206===I.getUint32(F+4)){if(E+8>I.byteLength){return console.log("Invalid Exif data: Invalid segment size."),void 0}if(0!==I.getUint16(F+8)){return console.log("Invalid Exif data: Missing byte alignment offset."),void 0}switch(I.getUint16(E)){case 18761:C=!0;break;case 19789:C=!1;break;default:return console.log("Invalid Exif data: Invalid byte alignment marker."),void 0}if(42!==I.getUint16(E+2,C)){return console.log("Invalid Exif data: Missing TIFF marker."),void 0}J=I.getUint32(E+4,C),D.exif=new A.ExifMap,J=A.parseExifTags(I,E,E+J,C,D),J&&!B.disableExifThumbnail&&(G={exif:{}},J=A.parseExifTags(I,E,E+J,C,G),G.exif[513]&&(D.exif.Thumbnail=A.getExifThumbnail(I,E+G.exif[513],G.exif[514]))),D.exif[34665]&&!B.disableExifSub&&A.parseExifTags(I,E,E+D.exif[34665],C,D),D.exif[34853]&&!B.disableExifGps&&A.parseExifTags(I,E,E+D.exif[34853],C,D)}}},A.metaDataParsers.jpeg[65505].push(A.parseExifData)}),function(A){"function"==typeof define&&define.amd?define(["load-image","load-image-exif"],A):A(window.loadImage)}(function(D){var C,B,A;D.ExifMap.prototype.tags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright",36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",42240:"Gamma",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubSecTime",37521:"SubSecTimeOriginal",37522:"SubSecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"PhotographicSensitivity",34856:"OECF",34864:"SensitivityType",34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRatio",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:"LensSpecification",42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber",0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential",31:"GPSHPositioningError"},D.ExifMap.prototype.stringValues={ExposureProgram:{0:"Undefined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Undefined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},ComponentsConfiguration:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"},Orientation:{1:"top-left",2:"top-right",3:"bottom-right",4:"bottom-left",5:"left-top",6:"right-top",7:"right-bottom",8:"left-bottom"}},D.ExifMap.prototype.getText=function(F){var E=this.get(F);switch(F){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":case"Orientation":return this.stringValues[F][E];case"ExifVersion":case"FlashpixVersion":return String.fromCharCode(E[0],E[1],E[2],E[3]);case"ComponentsConfiguration":return this.stringValues[F][E[0]]+this.stringValues[F][E[1]]+this.stringValues[F][E[2]]+this.stringValues[F][E[3]];case"GPSVersionID":return E[0]+"."+E[1]+"."+E[2]+"."+E[3]}return E+""},C=D.ExifMap.prototype.tags,B=D.ExifMap.prototype.map;for(A in C){C.hasOwnProperty(A)&&(B[C[A]]=A)}D.ExifMap.prototype.getAll=function(){var G,F,E={};for(G in this){this.hasOwnProperty(G)&&(F=C[G],F&&(E[F]=this.getText(F)))}return E}});
!function(B){var D=B.HTMLCanvasElement&&B.HTMLCanvasElement.prototype,F=B.Blob&&function(){try{return Boolean(new Blob)}catch(G){return !1}}(),E=F&&B.Uint8Array&&function(){try{return 100===new Blob([new Uint8Array(100)]).size}catch(G){return !1}}(),C=B.BlobBuilder||B.WebKitBlobBuilder||B.MozBlobBuilder||B.MSBlobBuilder,A=(F||C)&&B.atob&&B.ArrayBuffer&&B.Uint8Array&&function(K){var L,J,H,G,I,M;for(L=K.split(",")[0].indexOf("base64")>=0?atob(K.split(",")[1]):decodeURIComponent(K.split(",")[1]),J=new ArrayBuffer(L.length),H=new Uint8Array(J),G=0;G<L.length;G+=1){H[G]=L.charCodeAt(G)}return I=K.split(",")[0].split(":")[1].split(";")[0],F?new Blob([E?H:J],{type:I}):(M=new C,M.append(J),M.getBlob(I))};B.HTMLCanvasElement&&!D.toBlob&&(D.mozGetAsFile?D.toBlob=function(G,I,H){H&&D.toDataURL&&A?G(A(this.toDataURL(I,H))):G(this.mozGetAsFile("blob",I))}:D.toDataURL&&A&&(D.toBlob=function(G,H,I){G(A(this.toDataURL(H,I)))})),"function"==typeof define&&define.amd?define(function(){return A}):B.dataURLtoBlob=A}(this);
(function(A){if(typeof define==="function"&&define.amd){define(["jquery"],A)}else{A(window.jQuery)}}(function(B){var A=0;B.ajaxTransport("iframe",function(C){if(C.async){var E,D,F;return{send:function(G,H){E=B('<form style="display:none;"></form>');E.attr("accept-charset",C.formAcceptCharset);F=/\?/.test(C.url)?"&":"?";if(C.type==="DELETE"){C.url=C.url+F+"_method=DELETE";C.type="POST"}else{if(C.type==="PUT"){C.url=C.url+F+"_method=PUT";C.type="POST"}else{if(C.type==="PATCH"){C.url=C.url+F+"_method=PATCH";C.type="POST"}}}A+=1;D=B('<iframe src="javascript:false;" name="iframe-transport-'+A+'"></iframe>').bind("load",function(){var I,J=B.isArray(C.paramName)?C.paramName:[C.paramName];D.unbind("load").bind("load",function(){var K;try{K=D.contents();if(!K.length||!K[0].firstChild){throw new Error()}}catch(L){K=undefined}H(200,"success",{iframe:K});B('<iframe src="javascript:false;"></iframe>').appendTo(E);window.setTimeout(function(){E.remove()},0)});E.prop("target",D.prop("name")).prop("action",C.url).prop("method",C.type);if(C.formData){B.each(C.formData,function(K,L){B('<input type="hidden"/>').prop("name",L.name).val(L.value).appendTo(E)})}if(C.fileInput&&C.fileInput.length&&C.type==="POST"){I=C.fileInput.clone();C.fileInput.after(function(K){return I[K]});if(C.paramName){C.fileInput.each(function(K){B(this).prop("name",J[K]||C.paramName)})}E.append(C.fileInput).prop("enctype","multipart/form-data").prop("encoding","multipart/form-data")}E.submit();if(I&&I.length){C.fileInput.each(function(L,K){var M=B(I[L]);B(K).prop("name",M.prop("name"));M.replaceWith(K)})}});E.append(D).appendTo(document.body)},abort:function(){if(D){D.unbind("load").prop("src","javascript".concat(":false;"))}if(E){E.remove()}}}}});B.ajaxSetup({converters:{"iframe text":function(C){return C&&B(C[0].body).text()},"iframe json":function(C){return C&&B.parseJSON(B(C[0].body).text())},"iframe html":function(C){return C&&B(C[0].body).html()},"iframe xml":function(C){var D=C&&C[0];return D&&B.isXMLDoc(D)?D:B.parseXML((D.XMLDocument&&D.XMLDocument.xml)||B(D.body).html())},"iframe script":function(C){return C&&B.globalEval(B(C[0].body).text())}}})}));
(function(A){if(typeof define==="function"&&define.amd){define(["jquery","jquery.ui.widget"],A)}else{A(window.jQuery)}}(function(A){A.support.fileInput=!(new RegExp("(Android (1\\.[0156]|2\\.[01]))|(Windows Phone (OS 7|8\\.0))|(XBLWP)|(ZuneWP)|(WPDesktop)|(w(eb)?OSBrowser)|(webOS)|(Kindle/(1\\.0|2\\.[05]|3\\.0))").test(window.navigator.userAgent)||A('<input type="file">').prop("disabled"));A.support.xhrFileUpload=!!(window.XMLHttpRequestUpload&&window.FileReader);A.support.xhrFormDataFileUpload=!!window.FormData;A.support.blobSlice=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice);A.widget("blueimp.fileupload",{options:{dropZone:A(document),pasteZone:A(document),fileInput:undefined,replaceFileInput:true,paramName:undefined,singleFileUploads:true,limitMultiFileUploads:undefined,sequentialUploads:false,limitConcurrentUploads:undefined,forceIframeTransport:false,redirect:undefined,redirectParamName:undefined,postMessage:undefined,multipart:true,maxChunkSize:undefined,uploadedBytes:undefined,recalculateProgress:true,progressInterval:100,bitrateInterval:500,autoUpload:true,messages:{uploadedBytes:"Uploaded bytes exceed file size"},i18n:function(C,B){C=this.messages[C]||C.toString();if(B){A.each(B,function(D,E){C=C.replace("{"+D+"}",E)})}return C},formData:function(B){return B.serializeArray()},add:function(C,B){if(B.autoUpload||(B.autoUpload!==false&&A(this).fileupload("option","autoUpload"))){B.process().done(function(){B.submit()})}},processData:false,contentType:false,cache:false},_specialOptions:["fileInput","dropZone","pasteZone","multipart","forceIframeTransport"],_blobSlice:A.support.blobSlice&&function(){var B=this.slice||this.webkitSlice||this.mozSlice;return B.apply(this,arguments)},_BitrateTimer:function(){this.timestamp=((Date.now)?Date.now():(new Date()).getTime());this.loaded=0;this.bitrate=0;this.getBitrate=function(D,C,B){var E=D-this.timestamp;if(!this.bitrate||!B||E>B){this.bitrate=(C-this.loaded)*(1000/E)*8;this.loaded=C;this.timestamp=D}return this.bitrate}},_isXHRUpload:function(B){return !B.forceIframeTransport&&((!B.multipart&&A.support.xhrFileUpload)||A.support.xhrFormDataFileUpload)},_getFormData:function(B){var C;if(typeof B.formData==="function"){return B.formData(B.form)}if(A.isArray(B.formData)){return B.formData}if(A.type(B.formData)==="object"){C=[];A.each(B.formData,function(D,E){C.push({name:D,value:E})});return C}return[]},_getTotal:function(C){var B=0;A.each(C,function(D,E){B+=E.size||1});return B},_initProgressObject:function(C){var B={loaded:0,total:0,bitrate:0};if(C._progress){A.extend(C._progress,B)}else{C._progress=B}},_initResponseObject:function(B){var C;if(B._response){for(C in B._response){if(B._response.hasOwnProperty(C)){delete B._response[C]}}}else{B._response={}}},_onProgress:function(E,D){if(E.lengthComputable){var C=((Date.now)?Date.now():(new Date()).getTime()),B;if(D._time&&D.progressInterval&&(C-D._time<D.progressInterval)&&E.loaded!==E.total){return }D._time=C;B=Math.floor(E.loaded/E.total*(D.chunkSize||D._progress.total))+(D.uploadedBytes||0);this._progress.loaded+=(B-D._progress.loaded);this._progress.bitrate=this._bitrateTimer.getBitrate(C,this._progress.loaded,D.bitrateInterval);D._progress.loaded=D.loaded=B;D._progress.bitrate=D.bitrate=D._bitrateTimer.getBitrate(C,B,D.bitrateInterval);this._trigger("progress",E,D);this._trigger("progressall",E,this._progress)}},_initProgressListener:function(B){var C=this,D=B.xhr?B.xhr():A.ajaxSettings.xhr();if(D.upload){A(D.upload).bind("progress",function(E){var F=E.originalEvent;E.lengthComputable=F.lengthComputable;E.loaded=F.loaded;E.total=F.total;C._onProgress(E,B)});B.xhr=function(){return D}}},_isInstanceOf:function(B,C){return Object.prototype.toString.call(C)==="[object "+B+"]"},_initXHRData:function(C){var E=this,G,D=C.files[0],B=C.multipart||!A.support.xhrFileUpload,F=C.paramName[0];C.headers=C.headers||{};if(C.contentRange){C.headers["Content-Range"]=C.contentRange}if(!B||C.blob||!this._isInstanceOf("File",D)){C.headers["Content-Disposition"]='attachment; filename="'+encodeURI(D.name)+'"'}if(!B){C.contentType=D.type;C.data=C.blob||D}else{if(A.support.xhrFormDataFileUpload){if(C.postMessage){G=this._getFormData(C);if(C.blob){G.push({name:F,value:C.blob})}else{A.each(C.files,function(H,I){G.push({name:C.paramName[H]||F,value:I})})}}else{if(E._isInstanceOf("FormData",C.formData)){G=C.formData}else{G=new FormData();A.each(this._getFormData(C),function(H,I){G.append(I.name,I.value)})}if(C.blob){G.append(F,C.blob,D.name)}else{A.each(C.files,function(H,I){if(E._isInstanceOf("File",I)||E._isInstanceOf("Blob",I)){G.append(C.paramName[H]||F,I,I.name)}})}}C.data=G}}C.blob=null},_initIframeSettings:function(B){var C=A("<a></a>").prop("href",B.url).prop("host");B.dataType="iframe "+(B.dataType||"");B.formData=this._getFormData(B);if(B.redirect&&C&&C!==location.host){B.formData.push({name:B.redirectParamName||"redirect",value:B.redirect})}},_initDataSettings:function(B){if(this._isXHRUpload(B)){if(!this._chunkedUpload(B,true)){if(!B.data){this._initXHRData(B)}this._initProgressListener(B)}if(B.postMessage){B.dataType="postmessage "+(B.dataType||"")}}else{this._initIframeSettings(B)}},_getParamName:function(B){var C=A(B.fileInput),D=B.paramName;if(!D){D=[];C.each(function(){var E=A(this),F=E.prop("name")||"files[]",G=(E.prop("files")||[1]).length;while(G){D.push(F);G-=1}});if(!D.length){D=[C.prop("name")||"files[]"]}}else{if(!A.isArray(D)){D=[D]}}return D},_initFormSettings:function(B){if(!B.form||!B.form.length){B.form=A(B.fileInput.prop("form"));if(!B.form.length){B.form=A(this.options.fileInput.prop("form"))}}B.paramName=this._getParamName(B);if(!B.url){B.url=B.form.prop("action")||location.href}B.type=(B.type||B.form.prop("method")||"").toUpperCase();if(B.type!=="POST"&&B.type!=="PUT"&&B.type!=="PATCH"){B.type="POST"}if(!B.formAcceptCharset){B.formAcceptCharset=B.form.attr("accept-charset")}},_getAJAXSettings:function(C){var B=A.extend({},this.options,C);this._initFormSettings(B);this._initDataSettings(B);return B},_getDeferredState:function(B){if(B.state){return B.state()}if(B.isResolved()){return"resolved"}if(B.isRejected()){return"rejected"}return"pending"},_enhancePromise:function(B){B.success=B.done;B.error=B.fail;B.complete=B.always;return B},_getXHRPromise:function(E,D,C){var B=A.Deferred(),F=B.promise();D=D||this.options.context||F;if(E===true){B.resolveWith(D,C)}else{if(E===false){B.rejectWith(D,C)}}F.abort=B.promise;return this._enhancePromise(F)},_addConvenienceMethods:function(E,D){var C=this,B=function(F){return A.Deferred().resolveWith(C,[F]).promise()};D.process=function(G,F){if(G||F){D._processQueue=this._processQueue=(this._processQueue||B(this)).pipe(G,F)}return this._processQueue||B(this)};D.submit=function(){if(this.state()!=="pending"){D.jqXHR=this.jqXHR=(C._trigger("submit",E,this)!==false)&&C._onSend(E,this)}return this.jqXHR||C._getXHRPromise()};D.abort=function(){if(this.jqXHR){return this.jqXHR.abort()}return C._getXHRPromise()};D.state=function(){if(this.jqXHR){return C._getDeferredState(this.jqXHR)}if(this._processQueue){return C._getDeferredState(this._processQueue)}};D.progress=function(){return this._progress};D.response=function(){return this._response}},_getUploadedBytes:function(D){var B=D.getResponseHeader("Range"),E=B&&B.split("-"),C=E&&E.length>1&&parseInt(E[1],10);return C&&C+1},_chunkedUpload:function(M,G){M.uploadedBytes=M.uploadedBytes||0;var F=this,D=M.files[0],E=D.size,B=M.uploadedBytes,C=M.maxChunkSize||E,I=this._blobSlice,J=A.Deferred(),L=J.promise(),H,K;if(!(this._isXHRUpload(M)&&I&&(B||C<E))||M.data){return false}if(G){return true}if(B>=E){D.error=M.i18n("uploadedBytes");return this._getXHRPromise(false,M.context,[null,"error",D.error])}K=function(){var O=A.extend({},M),N=O._progress.loaded;O.blob=I.call(D,B,B+C,D.type);O.chunkSize=O.blob.size;O.contentRange="bytes "+B+"-"+(B+O.chunkSize-1)+"/"+E;F._initXHRData(O);F._initProgressListener(O);H=((F._trigger("chunksend",null,O)!==false&&A.ajax(O))||F._getXHRPromise(false,O.context)).done(function(P,R,Q){B=F._getUploadedBytes(Q)||(B+O.chunkSize);if(N+O.chunkSize-O._progress.loaded){F._onProgress(A.Event("progress",{lengthComputable:true,loaded:B-O.uploadedBytes,total:B-O.uploadedBytes}),O)}M.uploadedBytes=O.uploadedBytes=B;O.result=P;O.textStatus=R;O.jqXHR=Q;F._trigger("chunkdone",null,O);F._trigger("chunkalways",null,O);if(B<E){K()}else{J.resolveWith(O.context,[P,R,Q])}}).fail(function(P,R,Q){O.jqXHR=P;O.textStatus=R;O.errorThrown=Q;F._trigger("chunkfail",null,O);F._trigger("chunkalways",null,O);J.rejectWith(O.context,[P,R,Q])})};this._enhancePromise(L);L.abort=function(){return H.abort()};K();return L},_beforeSend:function(C,B){if(this._active===0){this._trigger("start");this._bitrateTimer=new this._BitrateTimer();this._progress.loaded=this._progress.total=0;this._progress.bitrate=0}this._initResponseObject(B);this._initProgressObject(B);B._progress.loaded=B.loaded=B.uploadedBytes||0;B._progress.total=B.total=this._getTotal(B.files)||1;B._progress.bitrate=B.bitrate=0;this._active+=1;this._progress.loaded+=B.loaded;this._progress.total+=B.total},_onDone:function(B,G,F,D){var E=D._progress.total,C=D._response;if(D._progress.loaded<E){this._onProgress(A.Event("progress",{lengthComputable:true,loaded:E,total:E}),D)}C.result=D.result=B;C.textStatus=D.textStatus=G;C.jqXHR=D.jqXHR=F;this._trigger("done",null,D)},_onFail:function(D,F,E,C){var B=C._response;if(C.recalculateProgress){this._progress.loaded-=C._progress.loaded;this._progress.total-=C._progress.total}B.jqXHR=C.jqXHR=D;B.textStatus=C.textStatus=F;B.errorThrown=C.errorThrown=E;this._trigger("fail",null,C)},_onAlways:function(D,E,C,B){this._trigger("always",null,B)},_onSend:function(G,E){if(!E.submit){this._addConvenienceMethods(G,E)}var F=this,I,B,H,C,J=F._getAJAXSettings(E),D=function(){F._sending+=1;J._bitrateTimer=new F._BitrateTimer();I=I||(((B||F._trigger("send",G,J)===false)&&F._getXHRPromise(false,J.context,B))||F._chunkedUpload(J)||A.ajax(J)).done(function(K,M,L){F._onDone(K,M,L,J)}).fail(function(K,M,L){F._onFail(K,M,L,J)}).always(function(M,N,L){F._onAlways(M,N,L,J);F._sending-=1;F._active-=1;if(J.limitConcurrentUploads&&J.limitConcurrentUploads>F._sending){var K=F._slots.shift();while(K){if(F._getDeferredState(K)==="pending"){K.resolve();break}K=F._slots.shift()}}if(F._active===0){F._trigger("stop")}});return I};this._beforeSend(G,J);if(this.options.sequentialUploads||(this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending)){if(this.options.limitConcurrentUploads>1){H=A.Deferred();this._slots.push(H);C=H.pipe(D)}else{this._sequence=this._sequence.pipe(D,D);C=this._sequence}C.abort=function(){B=[undefined,"abort","abort"];if(!I){if(H){H.rejectWith(J.context,B)}return D()}return I.abort()};return this._enhancePromise(C)}return D()},_onAdd:function(I,F){var H=this,L=true,K=A.extend({},this.options,F),D=K.limitMultiFileUploads,G=this._getParamName(K),C,B,J,E;if(!(K.singleFileUploads||D)||!this._isXHRUpload(K)){J=[F.files];C=[G]}else{if(!K.singleFileUploads&&D){J=[];C=[];for(E=0;E<F.files.length;E+=D){J.push(F.files.slice(E,E+D));B=G.slice(E,E+D);if(!B.length){B=G}C.push(B)}}else{C=G}}F.originalFiles=F.files;A.each(J||F.files,function(M,N){var O=A.extend({},F);O.files=J?N:[N];O.paramName=C[M];H._initResponseObject(O);H._initProgressObject(O);H._addConvenienceMethods(I,O);L=H._trigger("add",I,O);return L});return L},_replaceFileInput:function(B){var C=B.clone(true);A("<form></form>").append(C)[0].reset();B.after(C).detach();A.cleanData(B.unbind("remove"));this.options.fileInput=this.options.fileInput.map(function(D,E){if(E===B[0]){return C[0]}return E});if(B[0]===this.element[0]){this.element=C}},_handleFileTreeEntry:function(F,G){var E=this,B=A.Deferred(),C=function(H){if(H&&!H.entry){H.entry=F}B.resolve([H])},D;G=G||"";if(F.isFile){if(F._file){F._file.relativePath=G;B.resolve(F._file)}else{F.file(function(H){H.relativePath=G;B.resolve(H)},C)}}else{if(F.isDirectory){D=F.createReader();D.readEntries(function(H){E._handleFileTreeEntries(H,G+F.name+"/").done(function(I){B.resolve(I)}).fail(C)},C)}else{B.resolve([])}}return B.promise()},_handleFileTreeEntries:function(B,D){var C=this;return A.when.apply(A,A.map(B,function(E){return C._handleFileTreeEntry(E,D)})).pipe(function(){return Array.prototype.concat.apply([],arguments)})},_getDroppedFiles:function(C){C=C||{};var B=C.items;if(B&&B.length&&(B[0].webkitGetAsEntry||B[0].getAsEntry)){return this._handleFileTreeEntries(A.map(B,function(E){var D;if(E.webkitGetAsEntry){D=E.webkitGetAsEntry();if(D){D._file=E.getAsFile()}return D}return E.getAsEntry()}))}return A.Deferred().resolve(A.makeArray(C.files)).promise()},_getSingleFileInputFiles:function(D){D=A(D);var B=D.prop("webkitEntries")||D.prop("entries"),C,E;if(B&&B.length){return this._handleFileTreeEntries(B)}C=A.makeArray(D.prop("files"));if(!C.length){E=D.prop("value");if(!E){return A.Deferred().resolve([]).promise()}C=[{name:E.replace(/^.*\\/,"")}]}else{if(C[0].name===undefined&&C[0].fileName){A.each(C,function(F,G){G.name=G.fileName;G.size=G.fileSize})}}return A.Deferred().resolve(C).promise()},_getFileInputFiles:function(B){if(!(B instanceof A)||B.length===1){return this._getSingleFileInputFiles(B)}return A.when.apply(A,A.map(B,this._getSingleFileInputFiles)).pipe(function(){return Array.prototype.concat.apply([],arguments)})},_onChange:function(D){var B=this,C={fileInput:A(D.target),form:A(D.target.form)};this._getFileInputFiles(C.fileInput).always(function(E){C.files=E;if(B.options.replaceFileInput){B._replaceFileInput(C.fileInput)}if(B._trigger("change",D,C)!==false){B._onAdd(D,C)}})},_onPaste:function(D){var B=D.originalEvent&&D.originalEvent.clipboardData&&D.originalEvent.clipboardData.items,C={files:[]};if(B&&B.length){A.each(B,function(E,G){var F=G.getAsFile&&G.getAsFile();if(F){C.files.push(F)}});if(this._trigger("paste",D,C)===false||this._onAdd(D,C)===false){return false}}},_onDrop:function(E){E.dataTransfer=E.originalEvent&&E.originalEvent.dataTransfer;var B=this,D=E.dataTransfer,C={};if(D&&D.files&&D.files.length){E.preventDefault();this._getDroppedFiles(D).always(function(F){C.files=F;if(B._trigger("drop",E,C)!==false){B._onAdd(E,C)}})}},_onDragOver:function(C){C.dataTransfer=C.originalEvent&&C.originalEvent.dataTransfer;var B=C.dataTransfer;if(B){if(this._trigger("dragover",C)===false){return false}if(A.inArray("Files",B.types)!==-1){B.dropEffect="copy";C.preventDefault()}}},_initEventHandlers:function(){if(this._isXHRUpload(this.options)){this._on(this.options.dropZone,{dragover:this._onDragOver,drop:this._onDrop});this._on(this.options.pasteZone,{paste:this._onPaste})}if(A.support.fileInput){this._on(this.options.fileInput,{change:this._onChange})}},_destroyEventHandlers:function(){this._off(this.options.dropZone,"dragover drop");this._off(this.options.pasteZone,"paste");this._off(this.options.fileInput,"change")},_setOption:function(B,C){var D=A.inArray(B,this._specialOptions)!==-1;if(D){this._destroyEventHandlers()}this._super(B,C);if(D){this._initSpecialOptions();this._initEventHandlers()}},_initSpecialOptions:function(){var B=this.options;if(B.fileInput===undefined){B.fileInput=this.element.is('input[type="file"]')?this.element:this.element.find('input[type="file"]')}else{if(!(B.fileInput instanceof A)){B.fileInput=A(B.fileInput)}}if(!(B.dropZone instanceof A)){B.dropZone=A(B.dropZone)}if(!(B.pasteZone instanceof A)){B.pasteZone=A(B.pasteZone)}},_getRegExp:function(D){var C=D.split("/"),B=C.pop();C.shift();return new RegExp(C.join("/"),B)},_isRegExpOption:function(B,C){return B!=="url"&&A.type(C)==="string"&&/^\/.*\/[igm]{0,3}$/.test(C)},_initDataAttributes:function(){var C=this,B=this.options;A.each(A(this.element[0].cloneNode(false)).data(),function(D,E){if(C._isRegExpOption(D,E)){E=C._getRegExp(E)}B[D]=E})},_create:function(){this._initDataAttributes();this._initSpecialOptions();this._slots=[];this._sequence=this._getXHRPromise(true);this._sending=this._active=0;this._initProgressObject(this);this._initEventHandlers()},active:function(){return this._active},progress:function(){return this._progress},add:function(C){var B=this;if(!C||this.options.disabled){return }if(C.fileInput&&!C.files){this._getFileInputFiles(C.fileInput).always(function(D){C.files=D;B._onAdd(null,C)})}else{C.files=A.makeArray(C.files);this._onAdd(null,C)}},send:function(F){if(F&&!this.options.disabled){if(F.fileInput&&!F.files){var D=this,B=A.Deferred(),G=B.promise(),C,E;G.abort=function(){E=true;if(C){return C.abort()}B.reject(null,"abort","abort");return G};this._getFileInputFiles(F.fileInput).always(function(H){if(E){return }F.files=H;C=D._onSend(null,F).then(function(I,K,J){B.resolve(I,K,J)},function(I,K,J){B.reject(I,K,J)})});return this._enhancePromise(G)}F.files=A.makeArray(F.files);if(F.files.length){return this._onSend(null,F)}}return this._getXHRPromise(false,F&&F.context)}})}));
(function(A){if(typeof define==="function"&&define.amd){define(["jquery","./jquery.fileupload"],A)}else{A(window.jQuery)}}(function(A){var B=A.blueimp.fileupload.prototype.options.add;A.widget("blueimp.fileupload",A.blueimp.fileupload,{options:{processQueue:[],add:function(E,C){var D=A(this);C.process(function(){return D.fileupload("process",C)});B.call(this,E,C)}},processActions:{},_processFile:function(F){var E=this,C=A.Deferred().resolveWith(E,[F]),D=C.promise();this._trigger("process",null,F);A.each(F.processQueue,function(G,H){var I=function(J){return E.processActions[H.action].call(E,J,H)};D=D.pipe(I,H.always&&I)});D.done(function(){E._trigger("processdone",null,F);E._trigger("processalways",null,F)}).fail(function(){E._trigger("processfail",null,F);E._trigger("processalways",null,F)});return D},_transformProcessQueue:function(C){var D=[];A.each(C.processQueue,function(){var E={},G=this.action,F=this.prefix===true?G:this.prefix;A.each(this,function(H,I){if(A.type(I)==="string"&&I.charAt(0)==="@"){E[H]=C[I.slice(1)||(F?F+H.charAt(0).toUpperCase()+H.slice(1):H)]}else{E[H]=I}});D.push(E)});C.processQueue=D},processing:function(){return this._processing},process:function(E){var D=this,C=A.extend({},this.options,E);if(C.processQueue&&C.processQueue.length){this._transformProcessQueue(C);if(this._processing===0){this._trigger("processstart")}A.each(E.files,function(F){var H=F?A.extend({},C):C,G=function(){return D._processFile(H)};H.index=F;D._processing+=1;D._processingQueue=D._processingQueue.pipe(G,G).always(function(){D._processing-=1;if(D._processing===0){D._trigger("processstop")}})})}return this._processingQueue},_create:function(){this._super();this._processing=0;this._processingQueue=A.Deferred().resolveWith(this).promise()}})}));
(function(A){if(typeof define==="function"&&define.amd){define(["jquery","load-image","load-image-meta","load-image-exif","load-image-ios","canvas-to-blob","./jquery.fileupload-process"],A)}else{A(window.jQuery,window.loadImage)}}(function(A,B){A.blueimp.fileupload.prototype.options.processQueue.unshift({action:"loadImageMetaData",disableImageHead:"@",disableExif:"@",disableExifThumbnail:"@",disableExifSub:"@",disableExifGps:"@",disabled:"@disableImageMetaDataLoad"},{action:"loadImage",prefix:true,fileTypes:"@",maxFileSize:"@",noRevoke:"@",disabled:"@disableImageLoad"},{action:"resizeImage",prefix:"image",maxWidth:"@",maxHeight:"@",minWidth:"@",minHeight:"@",crop:"@",disabled:"@disableImageResize"},{action:"saveImage",disabled:"@disableImageResize"},{action:"saveImageMetaData",disabled:"@disableImageMetaDataSave"},{action:"resizeImage",prefix:"preview",maxWidth:"@",maxHeight:"@",minWidth:"@",minHeight:"@",crop:"@",orientation:"@",thumbnail:"@",canvas:"@",disabled:"@disableImagePreview"},{action:"setImage",name:"@imagePreviewName",disabled:"@disableImagePreview"});A.widget("blueimp.fileupload",A.blueimp.fileupload,{options:{loadImageFileTypes:/^image\/(gif|jpeg|png)$/,loadImageMaxFileSize:10000000,imageMaxWidth:1920,imageMaxHeight:1080,imageCrop:false,disableImageResize:true,previewMaxWidth:80,previewMaxHeight:80,previewOrientation:true,previewThumbnail:true,previewCrop:false,previewCanvas:true},processActions:{loadImage:function(G,D){if(D.disabled){return G}var F=this,E=G.files[G.index],C=A.Deferred();if((A.type(D.maxFileSize)==="number"&&E.size>D.maxFileSize)||(D.fileTypes&&!D.fileTypes.test(E.type))||!B(E,function(H){if(H.src){G.img=H}C.resolveWith(F,[G])},D)){return G}return C.promise()},resizeImage:function(I,E){if(E.disabled){return I}var F=this,C=A.Deferred(),H=function(K){I[K.getContext?"canvas":"img"]=K;C.resolveWith(F,[I])},J,D,G;E=A.extend({canvas:true},E);if(I.exif){if(E.orientation===true){E.orientation=I.exif.get("Orientation")}if(E.thumbnail){J=I.exif.get("Thumbnail");if(J){B(J,H,E);return C.promise()}}}D=(E.canvas&&I.canvas)||I.img;if(D){G=B.scale(D,E);if(G.width!==D.width||G.height!==D.height){H(G);return C.promise()}}return I},saveImage:function(H,E){if(!H.canvas||E.disabled){return H}var G=this,F=H.files[H.index],D=F.name,C=A.Deferred(),I=function(J){if(!J.name){if(F.type===J.type){J.name=F.name}else{if(F.name){J.name=F.name.replace(/\..+$/,"."+J.type.substr(6))}}}H.files[H.index]=J;C.resolveWith(G,[H])};if(H.canvas.mozGetAsFile){I(H.canvas.mozGetAsFile((/^image\/(jpeg|png)$/.test(F.type)&&D)||((D&&D.replace(/\..+$/,""))||"blob")+".png",F.type))}else{if(H.canvas.toBlob){H.canvas.toBlob(I,F.type)}else{return H}}return C.promise()},loadImageMetaData:function(F,D){if(D.disabled){return F}var E=this,C=A.Deferred();B.parseMetaData(F.files[F.index],function(G){A.extend(F,G);C.resolveWith(E,[F])},D);return C.promise()},saveImageMetaData:function(F,D){if(!(F.imageHead&&F.canvas&&F.canvas.toBlob&&!D.disabled)){return F}var E=F.files[F.index],C=new Blob([F.imageHead,this._blobSlice.call(E,20)],{type:E.type});C.name=E.name;F.files[F.index]=C;return F},setImage:function(E,D){var C=E.canvas||E.img;if(C&&!D.disabled){E.files[E.index][D.name||"preview"]=C}return E}}})}));
(function(A){if(typeof define==="function"&&define.amd){define(["jquery","./jquery.fileupload-process"],A)}else{A(window.jQuery)}}(function(A){A.blueimp.fileupload.prototype.options.processQueue.push({action:"validate",always:true,acceptFileTypes:"@",maxFileSize:"@",minFileSize:"@",maxNumberOfFiles:"@",disabled:"@disableValidation"});A.widget("blueimp.fileupload",A.blueimp.fileupload,{options:{getNumberOfFiles:A.noop,messages:{maxNumberOfFiles:"Maximum number of files exceeded",acceptFileTypes:"File type not allowed",maxFileSize:"File is too large",minFileSize:"File is too small"}},processActions:{validate:function(G,C){if(C.disabled){return G}var B=A.Deferred(),F=this.options,D=G.files[G.index],E=F.getNumberOfFiles();if(E&&A.type(C.maxNumberOfFiles)==="number"&&E+G.files.length>C.maxNumberOfFiles){D.error=F.i18n("maxNumberOfFiles")}else{if(C.acceptFileTypes&&!(C.acceptFileTypes.test(D.type)||C.acceptFileTypes.test(D.name))){D.error=F.i18n("acceptFileTypes")}else{if(C.maxFileSize&&D.size>C.maxFileSize){D.error=F.i18n("maxFileSize")}else{if(A.type(D.size)==="number"&&D.size<C.minFileSize){D.error=F.i18n("minFileSize")}else{delete D.error}}}}if(D.error||G.files.error){G.files.error=true;B.rejectWith(this,[G])}else{B.resolveWith(this,[G])}return B.promise()}}})}));
(function(A){if(typeof define==="function"&&define.amd){define(["jquery","tmpl","./jquery.fileupload-image","./jquery.fileupload-audio","./jquery.fileupload-video","./jquery.fileupload-validate"],A)}else{A(window.jQuery,window.tmpl)}}(function(B,A,C){B.blueimp.fileupload.prototype._specialOptions.push("filesContainer","uploadTemplateId","downloadTemplateId");B.widget("blueimp.fileupload",B.blueimp.fileupload,{options:{autoUpload:false,uploadTemplateId:"template-upload",downloadTemplateId:"template-download",filesContainer:undefined,prependFiles:false,dataType:"json",getNumberOfFiles:function(){return this.filesContainer.children().length},getFilesFromResponse:function(D){if(D.result&&B.isArray(D.result.files)){return D.result.files}return[]},add:function(I,G){var H=B(this),F=H.data("blueimp-fileupload")||H.data("fileupload"),D=F.options,E=G.files;G.process(function(){return H.fileupload("process",G)}).always(function(){G.context=F._renderUpload(E).data("data",G);F._renderPreviews(G);D.filesContainer[D.prependFiles?"prepend":"append"](G.context);F._forceReflow(G.context);F._transition(G.context).done(function(){if((F._trigger("added",I,G)!==false)&&(D.autoUpload||G.autoUpload)&&G.autoUpload!==false&&!G.files.error){G.submit()}})})},send:function(F,E){var D=B(this).data("blueimp-fileupload")||B(this).data("fileupload");if(E.context&&E.dataType&&E.dataType.substr(0,6)==="iframe"){E.context.find(".progress").addClass(!B.support.transition&&"progress-animated").attr("aria-valuenow",100).find(".bar").css("width","100%")}return D._trigger("sent",F,E)},done:function(J,I){var H=B(this).data("blueimp-fileupload")||B(this).data("fileupload"),E=I.getFilesFromResponse||H.options.getFilesFromResponse,G=E(I),F,D;if(I.context){I.context.each(function(L){var M=G[L]||{error:"Empty file upload result"},K=H._addFinishedDeferreds();H._transition(B(this)).done(function(){var N=B(this);F=H._renderDownload([M]).replaceAll(N);H._forceReflow(F);H._transition(F).done(function(){I.context=B(this);H._trigger("completed",J,I);H._trigger("finished",J,I);K.resolve()})})})}else{F=H._renderDownload(G).appendTo(H.options.filesContainer);H._forceReflow(F);D=H._addFinishedDeferreds();H._transition(F).done(function(){I.context=B(this);H._trigger("completed",J,I);H._trigger("finished",J,I);D.resolve()})}},fail:function(H,G){var F=B(this).data("blueimp-fileupload")||B(this).data("fileupload"),E,D;if(G.context){G.context.each(function(I){if(G.errorThrown!=="abort"){var J=G.files[I];J.error=J.error||G.errorThrown||true;D=F._addFinishedDeferreds();F._transition(B(this)).done(function(){var K=B(this);E=F._renderDownload([J]).replaceAll(K);F._forceReflow(E);F._transition(E).done(function(){G.context=B(this);F._trigger("failed",H,G);F._trigger("finished",H,G);D.resolve()})})}else{D=F._addFinishedDeferreds();F._transition(B(this)).done(function(){B(this).remove();F._trigger("failed",H,G);F._trigger("finished",H,G);D.resolve()})}})}else{if(G.errorThrown!=="abort"){G.context=F._renderUpload(G.files).appendTo(F.options.filesContainer).data("data",G);F._forceReflow(G.context);D=F._addFinishedDeferreds();F._transition(G.context).done(function(){G.context=B(this);F._trigger("failed",H,G);F._trigger("finished",H,G);D.resolve()})}else{F._trigger("failed",H,G);F._trigger("finished",H,G);F._addFinishedDeferreds().resolve()}}},progress:function(F,E){if(E.context){var D=Math.floor(E.loaded/E.total*100);E.context.find(".progress").attr("aria-valuenow",D).find(".bar").css("width",D+"%")}},progressall:function(H,F){var G=B(this),E=Math.floor(F.loaded/F.total*100),D=G.find(".fileupload-progress"),I=D.find(".progress-extended");if(I.length){I.html((G.data("blueimp-fileupload")||G.data("fileupload"))._renderExtendedProgress(F))}D.find(".progress").attr("aria-valuenow",E).find(".bar").css("width",E+"%")},start:function(E){var D=B(this).data("blueimp-fileupload")||B(this).data("fileupload");D._resetFinishedDeferreds();D._transition(B(this).find(".fileupload-progress")).done(function(){D._trigger("started",E)})},stop:function(F){var E=B(this).data("blueimp-fileupload")||B(this).data("fileupload"),D=E._addFinishedDeferreds();B.when.apply(B,E._getFinishedDeferreds()).done(function(){E._trigger("stopped",F)});E._transition(B(this).find(".fileupload-progress")).done(function(){B(this).find(".progress").attr("aria-valuenow","0").find(".bar").css("width","0%");B(this).find(".progress-extended").html("&nbsp;");D.resolve()})},processstart:function(){B(this).addClass("fileupload-processing")},processstop:function(){B(this).removeClass("fileupload-processing")},destroy:function(F,E){var D=B(this).data("blueimp-fileupload")||B(this).data("fileupload"),G=function(){D._transition(E.context).done(function(){B(this).remove();D._trigger("destroyed",F,E)})};if(E.url){B.ajax(E).done(G)}else{G()}}},_resetFinishedDeferreds:function(){this._finishedUploads=[]},_addFinishedDeferreds:function(D){if(!D){D=B.Deferred()}this._finishedUploads.push(D);return D},_getFinishedDeferreds:function(){return this._finishedUploads},_enableDragToDesktop:function(){var G=B(this),E=G.prop("href"),D=G.prop("download"),F="application/octet-stream";G.bind("dragstart",function(H){try{H.originalEvent.dataTransfer.setData("DownloadURL",[F,D,E].join(":"))}catch(I){}})},_formatFileSize:function(D){if(typeof D!=="number"){return""}if(D>=1000000000){return(D/1000000000).toFixed(2)+" GB"}if(D>=1000000){return(D/1000000).toFixed(2)+" MB"}return(D/1000).toFixed(2)+" KB"},_formatBitrate:function(D){if(typeof D!=="number"){return""}if(D>=1000000000){return(D/1000000000).toFixed(2)+" Gbit/s"}if(D>=1000000){return(D/1000000).toFixed(2)+" Mbit/s"}if(D>=1000){return(D/1000).toFixed(2)+" kbit/s"}return D.toFixed(2)+" bit/s"},_formatTime:function(E){var D=new Date(E*1000),F=Math.floor(E/86400);F=F?F+"d ":"";return F+("0"+D.getUTCHours()).slice(-2)+":"+("0"+D.getUTCMinutes()).slice(-2)+":"+("0"+D.getUTCSeconds()).slice(-2)},_formatPercentage:function(D){return(D*100).toFixed(2)+" %"},_renderExtendedProgress:function(D){return this._formatBitrate(D.bitrate)+" | "+this._formatTime((D.total-D.loaded)*8/D.bitrate)+" | "+this._formatPercentage(D.loaded/D.total)+" | "+this._formatFileSize(D.loaded)+" / "+this._formatFileSize(D.total)},_renderTemplate:function(F,E){if(!F){return B()}var D=F({files:E,formatFileSize:this._formatFileSize,options:this.options});if(D instanceof B){return D}return B(this.options.templatesContainer).html(D).children()},_renderPreviews:function(D){D.context.find(".preview").each(function(E,F){B(F).append(D.files[E].preview)})},_renderUpload:function(D){return this._renderTemplate(this.options.uploadTemplate,D)},_renderDownload:function(D){return this._renderTemplate(this.options.downloadTemplate,D).find("a[download]").each(this._enableDragToDesktop).end()},_startHandler:function(G){G.preventDefault();var D=B(G.currentTarget),E=D.closest(".template-upload"),F=E.data("data");if(F&&F.submit&&!F.jqXHR&&F.submit()){D.prop("disabled",true)}},_cancelHandler:function(F){F.preventDefault();var D=B(F.currentTarget).closest(".template-upload"),E=D.data("data")||{};if(!E.jqXHR){E.errorThrown="abort";this._trigger("fail",F,E)}else{E.jqXHR.abort()}},_deleteHandler:function(E){E.preventDefault();var D=B(E.currentTarget);this._trigger("destroy",E,B.extend({context:D.closest(".template-download"),type:"DELETE"},D.data()))},_forceReflow:function(D){return B.support.transition&&D.length&&D[0].offsetWidth},_transition:function(E){var D=B.Deferred();if(B.support.transition&&E.hasClass("fade")&&E.is(":visible")){E.bind(B.support.transition.end,function(F){if(F.target===E[0]){E.unbind(B.support.transition.end);D.resolveWith(E)}}).toggleClass("in")}else{E.toggleClass("in");D.resolveWith(E)}return D},_initButtonBarEventHandlers:function(){var D=this.element.find(".fileupload-buttonbar"),E=this.options.filesContainer;this._on(D.find(".start"),{click:function(F){F.preventDefault();E.find(".start").click()}});this._on(D.find(".cancel"),{click:function(F){F.preventDefault();E.find(".cancel").click()}});this._on(D.find(".delete"),{click:function(F){F.preventDefault();E.find(".toggle:checked").closest(".template-download").find(".delete").click();D.find(".toggle").prop("checked",false)}});this._on(D.find(".toggle"),{change:function(F){E.find(".toggle").prop("checked",B(F.currentTarget).is(":checked"))}})},_destroyButtonBarEventHandlers:function(){this._off(this.element.find(".fileupload-buttonbar").find(".start, .cancel, .delete"),"click");this._off(this.element.find(".fileupload-buttonbar .toggle"),"change.")},_initEventHandlers:function(){this._super();this._on(this.options.filesContainer,{"click .start":this._startHandler,"click .cancel":this._cancelHandler,"click .delete":this._deleteHandler});this._initButtonBarEventHandlers()},_destroyEventHandlers:function(){this._destroyButtonBarEventHandlers();this._off(this.options.filesContainer,"click");this._super()},_enableFileInputButton:function(){this.element.find(".fileinput-button input").prop("disabled",false).parent().removeClass("disabled")},_disableFileInputButton:function(){this.element.find(".fileinput-button input").prop("disabled",true).parent().addClass("disabled")},_initTemplates:function(){var D=this.options;D.templatesContainer=this.document[0].createElement(D.filesContainer.prop("nodeName"));if(A){if(D.uploadTemplateId){D.uploadTemplate=A(D.uploadTemplateId)}if(D.downloadTemplateId){D.downloadTemplate=A(D.downloadTemplateId)}}},_initFilesContainer:function(){var D=this.options;if(D.filesContainer===undefined){D.filesContainer=this.element.find(".files")}else{if(!(D.filesContainer instanceof B)){D.filesContainer=B(D.filesContainer)}}},_initSpecialOptions:function(){this._super();this._initFilesContainer();this._initTemplates()},_create:function(){this._super();this._resetFinishedDeferreds();if(!B.support.fileInput){this._disableFileInputButton()}},enable:function(){var D=false;if(this.options.disabled){D=true}this._super();if(D){this.element.find("input, button").prop("disabled",false);this._enableFileInputButton()}},disable:function(){if(!this.options.disabled){this.element.find("input, button").prop("disabled",true);this._disableFileInputButton()}this._super()}})}));
(function(A){A.flexslider=function(F,Q){var C=A(F);C.vars=A.extend({},A.flexslider.defaults,Q);var J=C.vars.namespace,E=window.navigator&&window.navigator.msPointerEnabled&&window.MSGesture,K=(("ontouchstart" in window)||E||window.DocumentTouch&&document instanceof DocumentTouch)&&C.vars.touch,D="click touchend MSPointerUp",B="",P,I=C.vars.direction==="vertical",L=C.vars.reverse,O=(C.vars.itemWidth>0),H=C.vars.animation==="fade",M=C.vars.asNavFor!=="",G={},N=true;A.data(F,"flexslider",C);G={init:function(){C.animating=false;C.currentSlide=parseInt((C.vars.startAt?C.vars.startAt:0),10);if(isNaN(C.currentSlide)){C.currentSlide=0}C.animatingTo=C.currentSlide;C.atEnd=(C.currentSlide===0||C.currentSlide===C.last);C.containerSelector=C.vars.selector.substr(0,C.vars.selector.search(" "));C.slides=A(C.vars.selector,C);C.container=A(C.containerSelector,C);C.count=C.slides.length;C.syncExists=A(C.vars.sync).length>0;if(C.vars.animation==="slide"){C.vars.animation="swing"}C.prop=(I)?"top":"marginLeft";C.args={};C.manualPause=false;C.stopped=false;C.started=false;C.startTimeout=null;C.transitions=!C.vars.video&&!H&&C.vars.useCSS&&(function(){var T=document.createElement("div"),S=["perspectiveProperty","WebkitPerspective","MozPerspective","OPerspective","msPerspective"];for(var R in S){if(T.style[S[R]]!==undefined){C.pfx=S[R].replace("Perspective","").toLowerCase();C.prop="-"+C.pfx+"-transform";return true}}return false}());C.ensureAnimationEnd="";if(C.vars.controlsContainer!==""){C.controlsContainer=A(C.vars.controlsContainer).length>0&&A(C.vars.controlsContainer)}if(C.vars.manualControls!==""){C.manualControls=A(C.vars.manualControls).length>0&&A(C.vars.manualControls)}if(C.vars.randomize){C.slides.sort(function(){return(Math.round(Math.random())-0.5)});C.container.empty().append(C.slides)}C.doMath();C.setup("init");if(C.vars.controlNav){G.controlNav.setup()}if(C.vars.directionNav){G.directionNav.setup()}if(C.vars.keyboard&&(A(C.containerSelector).length===1||C.vars.multipleKeyboard)){A(document).bind("keyup",function(S){var R=S.keyCode;if(!C.animating&&(R===39||R===37)){var T=(R===39)?C.getTarget("next"):(R===37)?C.getTarget("prev"):false;C.flexAnimate(T,C.vars.pauseOnAction)}})}if(C.vars.mousewheel){C.bind("mousewheel",function(T,V,S,R){T.preventDefault();var U=(V<0)?C.getTarget("next"):C.getTarget("prev");C.flexAnimate(U,C.vars.pauseOnAction)})}if(C.vars.pausePlay){G.pausePlay.setup()}if(C.vars.slideshow&&C.vars.pauseInvisible){G.pauseInvisible.init()}if(C.vars.slideshow){if(C.vars.pauseOnHover){C.hover(function(){if(!C.manualPlay&&!C.manualPause){C.pause()}},function(){if(!C.manualPause&&!C.manualPlay&&!C.stopped){C.play()}})}if(!C.vars.pauseInvisible||!G.pauseInvisible.isHidden()){(C.vars.initDelay>0)?C.startTimeout=setTimeout(C.play,C.vars.initDelay):C.play()}}if(M){G.asNav.setup()}if(K&&C.vars.touch){G.touch()}if(!H||(H&&C.vars.smoothHeight)){A(window).bind("resize orientationchange focus",G.resize)}C.find("img").attr("draggable","false");setTimeout(function(){C.vars.start(C)},200)},asNav:{setup:function(){C.asNav=true;C.animatingTo=Math.floor(C.currentSlide/C.move);C.currentItem=C.currentSlide;C.slides.removeClass(J+"active-slide").eq(C.currentItem).addClass(J+"active-slide");if(!E){C.slides.on(D,function(T){T.preventDefault();var S=A(this),R=S.index();var U=S.offset().left-A(C).scrollLeft();if(U<=0&&S.hasClass(J+"active-slide")){C.flexAnimate(C.getTarget("prev"),true)}else{if(!A(C.vars.asNavFor).data("flexslider").animating&&!S.hasClass(J+"active-slide")){C.direction=(C.currentItem<R)?"next":"prev";C.flexAnimate(R,C.vars.pauseOnAction,false,true,true)}}})}else{F._slider=C;C.slides.each(function(){var R=this;R._gesture=new MSGesture();R._gesture.target=R;R.addEventListener("MSPointerDown",function(S){S.preventDefault();if(S.currentTarget._gesture){S.currentTarget._gesture.addPointer(S.pointerId)}},false);R.addEventListener("MSGestureTap",function(U){U.preventDefault();var T=A(this),S=T.index();if(!A(C.vars.asNavFor).data("flexslider").animating&&!T.hasClass("active")){C.direction=(C.currentItem<S)?"next":"prev";C.flexAnimate(S,C.vars.pauseOnAction,false,true,true)}})})}}},controlNav:{setup:function(){if(!C.manualControls){G.controlNav.setupPaging()}else{G.controlNav.setupManual()}},setupPaging:function(){var U=(C.vars.controlNav==="thumbnails")?"control-thumbs":"control-paging",S=1,V,R;C.controlNavScaffold=A('<ol class="'+J+"control-nav "+J+U+'"></ol>');if(C.pagingCount>1){for(var T=0;T<C.pagingCount;T++){R=C.slides.eq(T);V=(C.vars.controlNav==="thumbnails")?'<img src="'+R.attr("data-thumb")+'"/>':"<a>"+S+"</a>";if("thumbnails"===C.vars.controlNav&&true===C.vars.thumbCaptions){var W=R.attr("data-thumbcaption");if(""!=W&&undefined!=W){V+='<span class="'+J+'caption">'+W+"</span>"}}C.controlNavScaffold.append("<li>"+V+"</li>");S++}}(C.controlsContainer)?A(C.controlsContainer).append(C.controlNavScaffold):C.append(C.controlNavScaffold);G.controlNav.set();G.controlNav.active();C.controlNavScaffold.delegate("a, img",D,function(X){X.preventDefault();if(B===""||B===X.type){var Z=A(this),Y=C.controlNav.index(Z);if(!Z.hasClass(J+"active")){C.direction=(Y>C.currentSlide)?"next":"prev";C.flexAnimate(Y,C.vars.pauseOnAction)}}if(B===""){B=X.type}G.setToClearWatchedEvent()})},setupManual:function(){C.controlNav=C.manualControls;G.controlNav.active();C.controlNav.bind(D,function(R){R.preventDefault();if(B===""||B===R.type){var T=A(this),S=C.controlNav.index(T);if(!T.hasClass(J+"active")){(S>C.currentSlide)?C.direction="next":C.direction="prev";C.flexAnimate(S,C.vars.pauseOnAction)}}if(B===""){B=R.type}G.setToClearWatchedEvent()})},set:function(){var R=(C.vars.controlNav==="thumbnails")?"img":"a";C.controlNav=A("."+J+"control-nav li "+R,(C.controlsContainer)?C.controlsContainer:C)},active:function(){C.controlNav.removeClass(J+"active").eq(C.animatingTo).addClass(J+"active")},update:function(R,S){if(C.pagingCount>1&&R==="add"){C.controlNavScaffold.append(A("<li><a>"+C.count+"</a></li>"))}else{if(C.pagingCount===1){C.controlNavScaffold.find("li").remove()}else{C.controlNav.eq(S).closest("li").remove()}}G.controlNav.set();(C.pagingCount>1&&C.pagingCount!==C.controlNav.length)?C.update(S,R):G.controlNav.active()}},directionNav:{setup:function(){var R=A('<ul class="'+J+'direction-nav"><li><a class="'+J+'prev" href="#">'+C.vars.prevText+'</a></li><li><a class="'+J+'next" href="#">'+C.vars.nextText+"</a></li></ul>");if(C.controlsContainer){A(C.controlsContainer).append(R);C.directionNav=A("."+J+"direction-nav li a",C.controlsContainer)}else{C.append(R);C.directionNav=A("."+J+"direction-nav li a",C)}G.directionNav.update();C.directionNav.bind(D,function(S){S.preventDefault();var T;if(B===""||B===S.type){T=(A(this).hasClass(J+"next"))?C.getTarget("next"):C.getTarget("prev");C.flexAnimate(T,C.vars.pauseOnAction)}if(B===""){B=S.type}G.setToClearWatchedEvent()})},update:function(){var R=J+"disabled";if(C.pagingCount===1){C.directionNav.addClass(R).attr("tabindex","-1")}else{if(!C.vars.animationLoop){if(C.animatingTo===0){C.directionNav.removeClass(R).filter("."+J+"prev").addClass(R).attr("tabindex","-1")}else{if(C.animatingTo===C.last){C.directionNav.removeClass(R).filter("."+J+"next").addClass(R).attr("tabindex","-1")}else{C.directionNav.removeClass(R).removeAttr("tabindex")}}}else{C.directionNav.removeClass(R).removeAttr("tabindex")}}}},pausePlay:{setup:function(){var R=A('<div class="'+J+'pauseplay"><a></a></div>');if(C.controlsContainer){C.controlsContainer.append(R);C.pausePlay=A("."+J+"pauseplay a",C.controlsContainer)}else{C.append(R);C.pausePlay=A("."+J+"pauseplay a",C)}G.pausePlay.update((C.vars.slideshow)?J+"pause":J+"play");C.pausePlay.bind(D,function(S){S.preventDefault();if(B===""||B===S.type){if(A(this).hasClass(J+"pause")){C.manualPause=true;C.manualPlay=false;C.pause()}else{C.manualPause=false;C.manualPlay=true;C.play()}}if(B===""){B=S.type}G.setToClearWatchedEvent()})},update:function(R){(R==="play")?C.pausePlay.removeClass(J+"pause").addClass(J+"play").html(C.vars.playText):C.pausePlay.removeClass(J+"play").addClass(J+"pause").html(C.vars.pauseText)}},touch:function(){var c,Z,X,d,g,e,b=false,U=0,T=0,W=0;if(!E){F.addEventListener("touchstart",Y,false);function Y(h){if(C.animating){h.preventDefault()}else{if((window.navigator.msPointerEnabled)||h.touches.length===1){C.pause();d=(I)?C.h:C.w;e=Number(new Date());U=h.touches[0].pageX;T=h.touches[0].pageY;X=(O&&L&&C.animatingTo===C.last)?0:(O&&L)?C.limit-(((C.itemW+C.vars.itemMargin)*C.move)*C.animatingTo):(O&&C.currentSlide===C.last)?C.limit:(O)?((C.itemW+C.vars.itemMargin)*C.move)*C.currentSlide:(L)?(C.last-C.currentSlide+C.cloneOffset)*d:(C.currentSlide+C.cloneOffset)*d;c=(I)?T:U;Z=(I)?U:T;F.addEventListener("touchmove",S,false);F.addEventListener("touchend",f,false)}}}function S(h){U=h.touches[0].pageX;T=h.touches[0].pageY;g=(I)?c-T:c-U;b=(I)?(Math.abs(g)<Math.abs(U-Z)):(Math.abs(g)<Math.abs(T-Z));var i=500;if(!b||Number(new Date())-e>i){h.preventDefault();if(!H&&C.transitions){if(!C.vars.animationLoop){g=g/((C.currentSlide===0&&g<0||C.currentSlide===C.last&&g>0)?(Math.abs(g)/d+2):1)}C.setProps(X+g,"setTouch")}}}function f(j){F.removeEventListener("touchmove",S,false);if(C.animatingTo===C.currentSlide&&!b&&!(g===null)){var i=(L)?-g:g,h=(i>0)?C.getTarget("next"):C.getTarget("prev");if(C.canAdvance(h)&&(Number(new Date())-e<550&&Math.abs(i)>50||Math.abs(i)>d/2)){C.flexAnimate(h,C.vars.pauseOnAction)}else{if(!H){C.flexAnimate(C.currentSlide,C.vars.pauseOnAction,true)}}}F.removeEventListener("touchend",f,false);c=null;Z=null;g=null;X=null}}else{F.style.msTouchAction="none";F._gesture=new MSGesture();F._gesture.target=F;F.addEventListener("MSPointerDown",R,false);F._slider=C;F.addEventListener("MSGestureChange",a,false);F.addEventListener("MSGestureEnd",V,false);function R(h){h.stopPropagation();if(C.animating){h.preventDefault()}else{C.pause();F._gesture.addPointer(h.pointerId);W=0;d=(I)?C.h:C.w;e=Number(new Date());X=(O&&L&&C.animatingTo===C.last)?0:(O&&L)?C.limit-(((C.itemW+C.vars.itemMargin)*C.move)*C.animatingTo):(O&&C.currentSlide===C.last)?C.limit:(O)?((C.itemW+C.vars.itemMargin)*C.move)*C.currentSlide:(L)?(C.last-C.currentSlide+C.cloneOffset)*d:(C.currentSlide+C.cloneOffset)*d}}function a(k){k.stopPropagation();var j=k.target._slider;if(!j){return }var i=-k.translationX,h=-k.translationY;W=W+((I)?h:i);g=W;b=(I)?(Math.abs(W)<Math.abs(-i)):(Math.abs(W)<Math.abs(-h));if(k.detail===k.MSGESTURE_FLAG_INERTIA){setImmediate(function(){F._gesture.stop()});return }if(!b||Number(new Date())-e>500){k.preventDefault();if(!H&&j.transitions){if(!j.vars.animationLoop){g=W/((j.currentSlide===0&&W<0||j.currentSlide===j.last&&W>0)?(Math.abs(W)/d+2):1)}j.setProps(X+g,"setTouch")}}}function V(k){k.stopPropagation();var h=k.target._slider;if(!h){return }if(h.animatingTo===h.currentSlide&&!b&&!(g===null)){var j=(L)?-g:g,i=(j>0)?h.getTarget("next"):h.getTarget("prev");if(h.canAdvance(i)&&(Number(new Date())-e<550&&Math.abs(j)>50||Math.abs(j)>d/2)){h.flexAnimate(i,h.vars.pauseOnAction)}else{if(!H){h.flexAnimate(h.currentSlide,h.vars.pauseOnAction,true)}}}c=null;Z=null;g=null;X=null;W=0}}},resize:function(){if(!C.animating&&C.is(":visible")){if(!O){C.doMath()}if(H){G.smoothHeight()}else{if(O){C.slides.width(C.computedW);C.update(C.pagingCount);C.setProps()}else{if(I){C.viewport.height(C.h);C.setProps(C.h,"setTotal")}else{if(C.vars.smoothHeight){G.smoothHeight()}C.newSlides.width(C.computedW);C.setProps(C.computedW,"setTotal")}}}}},smoothHeight:function(R){if(!I||H){var S=(H)?C:C.viewport;(R)?S.animate({height:C.slides.eq(C.animatingTo).height()},R):S.height(C.slides.eq(C.animatingTo).height())}},sync:function(R){var T=A(C.vars.sync).data("flexslider"),S=C.animatingTo;switch(R){case"animate":T.flexAnimate(S,C.vars.pauseOnAction,false,true);break;case"play":if(!T.playing&&!T.asNav){T.play()}break;case"pause":T.pause();break}},uniqueID:function(R){R.find("[id]").each(function(){var S=A(this);S.attr("id",S.attr("id")+"_clone")});return R},pauseInvisible:{visProp:null,init:function(){var T=["webkit","moz","ms","o"];if("hidden" in document){return"hidden"}for(var S=0;S<T.length;S++){if((T[S]+"Hidden") in document){G.pauseInvisible.visProp=T[S]+"Hidden"}}if(G.pauseInvisible.visProp){var R=G.pauseInvisible.visProp.replace(/[H|h]idden/,"")+"visibilitychange";document.addEventListener(R,function(){if(G.pauseInvisible.isHidden()){if(C.startTimeout){clearTimeout(C.startTimeout)}else{C.pause()}}else{if(C.started){C.play()}else{(C.vars.initDelay>0)?setTimeout(C.play,C.vars.initDelay):C.play()}}})}},isHidden:function(){return document[G.pauseInvisible.visProp]||false}},setToClearWatchedEvent:function(){clearTimeout(P);P=setTimeout(function(){B=""},3000)}};C.flexAnimate=function(Z,a,T,V,W){if(!C.vars.animationLoop&&Z!==C.currentSlide){C.direction=(Z>C.currentSlide)?"next":"prev"}if(M&&C.pagingCount===1){C.direction=(C.currentItem<Z)?"next":"prev"}if(!C.animating&&(C.canAdvance(Z,W)||T)&&C.is(":visible")){if(M&&V){var S=A(C.vars.asNavFor).data("flexslider");C.atEnd=Z===0||Z===C.count-1;S.flexAnimate(Z,true,false,true,W);C.direction=(C.currentItem<Z)?"next":"prev";S.direction=C.direction;if(Math.ceil((Z+1)/C.visible)-1!==C.currentSlide&&Z!==0){C.currentItem=Z;C.slides.removeClass(J+"active-slide").eq(Z).addClass(J+"active-slide");Z=Math.floor(Z/C.visible)}else{C.currentItem=Z;C.slides.removeClass(J+"active-slide").eq(Z).addClass(J+"active-slide");return false}}C.animating=true;C.animatingTo=Z;if(a){C.pause()}C.vars.before(C);if(C.syncExists&&!W){G.sync("animate")}if(C.vars.controlNav){G.controlNav.active()}if(!O){C.slides.removeClass(J+"active-slide").eq(Z).addClass(J+"active-slide")}C.atEnd=Z===0||Z===C.last;if(C.vars.directionNav){G.directionNav.update()}if(Z===C.last){C.vars.end(C);if(!C.vars.animationLoop){C.pause()}}if(!H){var Y=(I)?C.slides.filter(":first").height():C.computedW,X,U,R;if(O){X=C.vars.itemMargin;R=((C.itemW+X)*C.move)*C.animatingTo;U=(R>C.limit&&C.visible!==1)?C.limit:R}else{if(C.currentSlide===0&&Z===C.count-1&&C.vars.animationLoop&&C.direction!=="next"){U=(L)?(C.count+C.cloneOffset)*Y:0}else{if(C.currentSlide===C.last&&Z===0&&C.vars.animationLoop&&C.direction!=="prev"){U=(L)?0:(C.count+1)*Y}else{U=(L)?((C.count-1)-Z+C.cloneOffset)*Y:(Z+C.cloneOffset)*Y}}}C.setProps(U,"",C.vars.animationSpeed);if(C.transitions){if(!C.vars.animationLoop||!C.atEnd){C.animating=false;C.currentSlide=C.animatingTo}C.container.unbind("webkitTransitionEnd transitionend");C.container.bind("webkitTransitionEnd transitionend",function(){clearTimeout(C.ensureAnimationEnd);C.wrapup(Y)});clearTimeout(C.ensureAnimationEnd);C.ensureAnimationEnd=setTimeout(function(){C.wrapup(Y)},C.vars.animationSpeed+100)}else{C.container.animate(C.args,C.vars.animationSpeed,C.vars.easing,function(){C.wrapup(Y)})}}else{if(!K){C.slides.eq(C.currentSlide).css({zIndex:1}).animate({opacity:0},C.vars.animationSpeed,C.vars.easing);C.slides.eq(Z).css({zIndex:2}).animate({opacity:1},C.vars.animationSpeed,C.vars.easing,C.wrapup)}else{C.slides.eq(C.currentSlide).css({opacity:0,zIndex:1});C.slides.eq(Z).css({opacity:1,zIndex:2});C.wrapup(Y)}}if(C.vars.smoothHeight){G.smoothHeight(C.vars.animationSpeed)}}};C.wrapup=function(R){if(!H&&!O){if(C.currentSlide===0&&C.animatingTo===C.last&&C.vars.animationLoop){C.setProps(R,"jumpEnd")}else{if(C.currentSlide===C.last&&C.animatingTo===0&&C.vars.animationLoop){C.setProps(R,"jumpStart")}}}C.animating=false;C.currentSlide=C.animatingTo;C.vars.after(C)};C.animateSlides=function(){if(!C.animating&&N){C.flexAnimate(C.getTarget("next"))}};C.pause=function(){clearInterval(C.animatedSlides);C.animatedSlides=null;C.playing=false;if(C.vars.pausePlay){G.pausePlay.update("play")}if(C.syncExists){G.sync("pause")}};C.play=function(){if(C.playing){clearInterval(C.animatedSlides)}C.animatedSlides=C.animatedSlides||setInterval(C.animateSlides,C.vars.slideshowSpeed);C.started=C.playing=true;if(C.vars.pausePlay){G.pausePlay.update("pause")}if(C.syncExists){G.sync("play")}};C.stop=function(){C.pause();C.stopped=true};C.canAdvance=function(T,R){var S=(M)?C.pagingCount-1:C.last;return(R)?true:(M&&C.currentItem===C.count-1&&T===0&&C.direction==="prev")?true:(M&&C.currentItem===0&&T===C.pagingCount-1&&C.direction!=="next")?false:(T===C.currentSlide&&!M)?false:(C.vars.animationLoop)?true:(C.atEnd&&C.currentSlide===0&&T===S&&C.direction!=="next")?false:(C.atEnd&&C.currentSlide===S&&T===0&&C.direction==="next")?false:true};C.getTarget=function(R){C.direction=R;if(R==="next"){return(C.currentSlide===C.last)?0:C.currentSlide+1}else{return(C.currentSlide===0)?C.last:C.currentSlide-1}};C.setProps=function(U,R,S){var T=(function(){var V=(U)?U:((C.itemW+C.vars.itemMargin)*C.move)*C.animatingTo,W=(function(){if(O){return(R==="setTouch")?U:(L&&C.animatingTo===C.last)?0:(L)?C.limit-(((C.itemW+C.vars.itemMargin)*C.move)*C.animatingTo):(C.animatingTo===C.last)?C.limit:V}else{switch(R){case"setTotal":return(L)?((C.count-1)-C.currentSlide+C.cloneOffset)*U:(C.currentSlide+C.cloneOffset)*U;case"setTouch":return(L)?U:U;case"jumpEnd":return(L)?U:C.count*U;case"jumpStart":return(L)?C.count*U:U;default:return U}}}());return(W*-1)+"px"}());if(C.transitions){T=(I)?"translate3d(0,"+T+",0)":"translate3d("+T+",0,0)";S=(S!==undefined)?(S/1000)+"s":"0s";C.container.css("-"+C.pfx+"-transition-duration",S);C.container.css("transition-duration",S)}C.args[C.prop]=T;if(C.transitions||S===undefined){C.container.css(C.args)}C.container.css("transform",T)};C.setup=function(S){if(!H){var T,R;if(S==="init"){C.viewport=A('<div class="'+J+'viewport"></div>').css({overflow:"hidden",position:"relative"}).appendTo(C).append(C.container);C.cloneCount=0;C.cloneOffset=0;if(L){R=A.makeArray(C.slides).reverse();C.slides=A(R);C.container.empty().append(C.slides)}}if(C.vars.animationLoop&&!O){C.cloneCount=2;C.cloneOffset=1;if(S!=="init"){C.container.find(".clone").remove()}G.uniqueID(C.slides.first().clone().addClass("clone").attr("aria-hidden","true")).appendTo(C.container);G.uniqueID(C.slides.last().clone().addClass("clone").attr("aria-hidden","true")).prependTo(C.container)}C.newSlides=A(C.vars.selector,C);T=(L)?C.count-1-C.currentSlide+C.cloneOffset:C.currentSlide+C.cloneOffset;if(I&&!O){C.container.height((C.count+C.cloneCount)*200+"%").css("position","absolute").width("100%");setTimeout(function(){C.newSlides.css({display:"block"});C.doMath();C.viewport.height(C.h);C.setProps(T*C.h,"init")},(S==="init")?100:0)}else{C.container.width((C.count+C.cloneCount)*200+"%");C.setProps(T*C.computedW,"init");setTimeout(function(){C.doMath();C.newSlides.css({width:C.computedW,"float":"left",display:"block"});if(C.vars.smoothHeight){G.smoothHeight()}},(S==="init")?100:0)}}else{C.slides.css({width:"100%","float":"left",marginRight:"-100%",position:"relative"});if(S==="init"){if(!K){if(C.vars.fadeFirstSlide==false){C.slides.css({opacity:0,display:"block",zIndex:1}).eq(C.currentSlide).css({zIndex:2}).css({opacity:1})}else{C.slides.css({opacity:0,display:"block",zIndex:1}).eq(C.currentSlide).css({zIndex:2}).animate({opacity:1},C.vars.animationSpeed,C.vars.easing)}}else{C.slides.css({opacity:0,display:"block",webkitTransition:"opacity "+C.vars.animationSpeed/1000+"s ease",zIndex:1}).eq(C.currentSlide).css({opacity:1,zIndex:2})}}if(C.vars.smoothHeight){G.smoothHeight()}}if(!O){C.slides.removeClass(J+"active-slide").eq(C.currentSlide).addClass(J+"active-slide")}C.vars.init(C)};C.doMath=function(){var R=C.slides.first(),U=C.vars.itemMargin,S=C.vars.minItems,T=C.vars.maxItems;C.w=(C.viewport===undefined)?C.width():C.viewport.width();C.h=R.height();C.boxPadding=R.outerWidth()-R.width();if(O){C.itemT=C.vars.itemWidth+U;C.minW=(S)?S*C.itemT:C.w;C.maxW=(T)?(T*C.itemT)-U:C.w;C.itemW=(C.minW>C.w)?(C.w-(U*(S-1)))/S:(C.maxW<C.w)?(C.w-(U*(T-1)))/T:(C.vars.itemWidth>C.w)?C.w:C.vars.itemWidth;C.visible=Math.floor(C.w/(C.itemW));C.move=(C.vars.move>0&&C.vars.move<C.visible)?C.vars.move:C.visible;C.pagingCount=Math.ceil(((C.count-C.visible)/C.move)+1);C.last=C.pagingCount-1;C.limit=(C.pagingCount===1)?0:(C.vars.itemWidth>C.w)?(C.itemW*(C.count-1))+(U*(C.count-1)):((C.itemW+U)*C.count)-C.w-U}else{C.itemW=C.w;C.pagingCount=C.count;C.last=C.count-1}C.computedW=C.itemW-C.boxPadding};C.update=function(S,R){C.doMath();if(!O){if(S<C.currentSlide){C.currentSlide+=1}else{if(S<=C.currentSlide&&S!==0){C.currentSlide-=1}}C.animatingTo=C.currentSlide}if(C.vars.controlNav&&!C.manualControls){if((R==="add"&&!O)||C.pagingCount>C.controlNav.length){G.controlNav.update("add")}else{if((R==="remove"&&!O)||C.pagingCount<C.controlNav.length){if(O&&C.currentSlide>C.last){C.currentSlide-=1;C.animatingTo-=1}G.controlNav.update("remove",C.last)}}}if(C.vars.directionNav){G.directionNav.update()}};C.addSlide=function(R,T){var S=A(R);C.count+=1;C.last=C.count-1;if(I&&L){(T!==undefined)?C.slides.eq(C.count-T).after(S):C.container.prepend(S)}else{(T!==undefined)?C.slides.eq(T).before(S):C.container.append(S)}C.update(T,"add");C.slides=A(C.vars.selector+":not(.clone)",C);C.setup();C.vars.added(C)};C.removeSlide=function(R){var S=(isNaN(R))?C.slides.index(A(R)):R;C.count-=1;C.last=C.count-1;if(isNaN(R)){A(R,C.slides).remove()}else{(I&&L)?C.slides.eq(C.last).remove():C.slides.eq(R).remove()}C.doMath();C.update(S,"remove");C.slides=A(C.vars.selector+":not(.clone)",C);C.setup();C.vars.removed(C)};G.init()};A(window).blur(function(B){focused=false}).focus(function(B){focused=true});A.flexslider.defaults={namespace:"flex-",selector:".slides > li",animation:"fade",easing:"swing",direction:"horizontal",reverse:false,animationLoop:true,smoothHeight:false,startAt:0,slideshow:true,slideshowSpeed:7000,animationSpeed:600,initDelay:0,randomize:false,fadeFirstSlide:true,thumbCaptions:false,pauseOnAction:true,pauseOnHover:false,pauseInvisible:true,useCSS:true,touch:true,video:false,controlNav:true,directionNav:true,prevText:"Previous",nextText:"Next",keyboard:true,multipleKeyboard:false,mousewheel:false,pausePlay:false,pauseText:"Pause",playText:"Play",controlsContainer:"",manualControls:"",sync:"",asNavFor:"",itemWidth:0,itemMargin:0,minItems:1,maxItems:0,move:0,allowOneSlide:true,start:function(){},before:function(){},after:function(){},end:function(){},added:function(){},removed:function(){},init:function(){}};A.fn.flexslider=function(B){if(B===undefined){B={}}if(typeof B==="object"){return this.each(function(){var F=A(this),D=(B.selector)?B.selector:".slides > li",E=F.find(D);if((E.length===1&&B.allowOneSlide===true)||E.length===0){E.fadeIn(400);if(B.start){B.start(F)}}else{if(F.data("flexslider")===undefined){new A.flexslider(this,B)}}})}else{var C=A(this).data("flexslider");switch(B){case"play":C.play();break;case"pause":C.pause();break;case"stop":C.stop();break;case"next":C.flexAnimate(C.getTarget("next"),true);break;case"prev":case"previous":C.flexAnimate(C.getTarget("prev"),true);break;default:if(typeof B==="number"){C.flexAnimate(B,true)}}}}})(jQuery);
var LW={};
LW.abuse=(function(E){var F={},I={},A={},C={},D={},G={};var J=function(L){L.preventDefault();H();var K=E(this);A=K;F=K.data();E("#js-abuse-form").modal("show")};var H=function(K){I.name.val("").removeAttr("disabled");I.email.val("").removeAttr("disabled");I.comment.val("").removeAttr("disabled");I.type.val(1).removeAttr("disabled");I.nameError.text("").hide();I.emailError.text("").hide();I.commentError.text("").hide();G.text("").hide();C.text("Cancel");D.removeClass("btn-success").addClass("btn-primary").text("Report Abuse").removeAttr("disabled");A=null};var B=function(K){K.preventDefault();K.stopPropagation();D.append('<i class="fa fa-refresh fa-spin" />').attr("disabled","disabled");var L=LP.FloodControl.addInput({contentType:F.contentType,commentContentType:F.commentContentType,commentContentId:F.commentContentId,contentId:F.contentId,comment:I.comment.val(),name:I.name.val(),email:I.email.val(),abuseTypeId:I.type.val()});AjaxReportAbuseHelper.reportAbuse(L,function(M){if(M.error){M.omnitureProperties&&LP.Analytics.logError(M);D.removeAttr("disabled")}else{if(M.fieldErrors&&!M.success){E.each(M.fieldErrors,function(N,O){I[N+"Error"].text(O).show()});D.removeAttr("disabled")}else{if(M.success){M.omnitureProperties&&LP.Analytics.log(M.omnitureProperties);I.nameError.text("").hide();I.emailError.text("").hide();I.commentError.text("").hide();D.removeClass("btn-primary").addClass("btn-success").text("Success").attr("disabled","disabled");C.text("close");G.text(M.responseMessage).show();I.name.attr("disabled","disabled");I.type.attr("disabled","disabled");I.email.attr("disabled","disabled");I.comment.attr("disabled","disabled");A.removeClass("btn-default").addClass("btn btn-xs btn-warning").text("Reported").attr("disabled","disabled");E('.js-abuse-link[data-content-id="'+F.contentId+'"]').addClass("btn btn-xs btn-warning").text("Reported").attr("disabled","disabled");A.off("click")}}}D.children().remove()})};return{init:function(){I.name=E("#js-abuse-name");I.email=E("#js-abuse-email");I.comment=E("#js-abuse-comment");I.type=E("#js-abuse-type");I.nameError=E("#js-name-error");I.emailError=E("#js-email-error");I.commentError=E("#js-comment-error");C=E("#js-cancel-report-abuse");D=E("#js-report-abuse");G=E("#js-success-message");E(document).on("click",".js-abuse-link",J);E("#js-abuse-form").on("hide.bs.modal",H);E("#js-report-abuse").on("click",B)}}})(jQuery);
LW.Map=(function(E){function C(H){var J={el:false,directionsEl:false,lat:51.5,lng:-0.12,zoom:8,country:"uk",maxMkrs:130,mapUpdateCallback:function(){},businessWeights:["Basic","Premium","Superior","Platinum"],businessesTemplates:{},onStreetViewShown:null,onStreetViewHidden:null},I=this;this.markers=[];this.filteredMarkers=[];this.markersEventReferences=[];this.placedMarkers=[];this.locations={};this.options=jQuery.extend({},J,H);this.infoWindows={};if(this.options.el){this.options.center=B(this.options.lat,this.options.lng);this.map=new google.maps.Map(this.options.el,{zoom:this.options.zoom,center:this.options.center,mapTypeControl:false});if(this.options.directionsEl){this.travelsMode={driving:google.maps.TravelMode.DRIVING,walking:google.maps.TravelMode.WALKING,transit:google.maps.TravelMode.TRANSIT,bicycling:google.maps.TravelMode.BICYCLING};this.directionsService=new google.maps.DirectionsService();this.directionsDisplay=new google.maps.DirectionsRenderer({suppressMarkers:true});this.directionsDisplay.setMap(this.map);this.directionsDisplay.setPanel(this.options.directionsEl);google.maps.event.addListener(this.map,"dragend",E.proxy(this.options.mapUpdateCallback,this));google.maps.event.addListener(this.map,"zoom_changed",E.proxy(this.options.mapUpdateCallback,this))}else{google.maps.event.addListener(this.map,"dragend",E.proxy(this._placeMarkers,this));google.maps.event.addListener(this.map,"zoom_changed",E.proxy(this._placeMarkers,this))}if(this.options.onStreetViewShown||this.options.onStreetViewHidden){this.streetView=this.map.getStreetView();google.maps.event.addListener(this.streetView,"visible_changed",function(){if(I.streetView.getVisible()&&I.options.onStreetViewShown){I.options.onStreetViewShown()}else{if(I.options.onStreetViewHidden){I.options.onStreetViewHidden()}}})}}}var B=function(I,H){return new google.maps.LatLng(I,H)};var A=function(H){var I=H.businessPackage;if(!(I in this.options.businessesTemplates)){I="basic"}H.ratingHtml=new LP.Template(E("#stars-"+H.rating).html()).apply2(H);return this.options.businessesTemplates[I].apply2(H)};var G=function(H){var I=H.businessPackage;if(!(I in this.infoWindows)){this.infoWindows[I]=new google.maps.InfoWindow({maxWidth:550,content:""})}var J=this.infoWindows[I];J.setContent(A.call(this,H));return J};var F=function(I,H){return I>50&&I<60&&H>-8&&H<2};var D=function(H){var I=this;this.markersEventReferences.push(google.maps.event.addListener(H,"click",function(){var J=G.call(I,H);I.closeInfoWindows();J.open(I.map,H)}))};C.prototype={reset:function(){console.log(this);this.clearMarkers();this.clearCircle();this.clearDirections();this.markers=[];this.filteredMarkers=[];this.map.panTo(this.options.center)},clearMarkers:function(){for(var H=0;H<this.placedMarkers.length;H++){this.placedMarkers[H].setMap(null);google.maps.event.removeListener(this.markersEventReferences[H])}this.markersEventReferences=[];this.placedMarkers=[]},addMarkers:function(J){var H;this.markers=J.slice(0);function I(L,K){var M=this.options.businessWeights.indexOf(L.businessPackage);var N=this.options.businessWeights.indexOf(K.businessPackage);if(M===N){if(L.createdDate&&K.createdDate){if(L.createdDate===K.createdDate){return 0}return L.createdDate>K.createdDate?-1:1}return 0}return M>N?-1:1}this.markers.sort(E.proxy(I,this));this._placeMarkers()},_placeMarkers:function(){var J,I,H;this.clearMarkers();this.filteredMarkers=[];var L=this.getBounds();for(var K=0;K<this.markers.length;K++){J=this.markers[K];if(J.latitude<L.n&&J.latitude>L.s&&J.longitude>L.w&&J.longitude<L.e){this.filteredMarkers.push(J)}}for(var K=0;K<Math.min(this.options.maxMkrs,this.filteredMarkers.length);K++){J=this.filteredMarkers[K];I=B(J.latitude,J.longitude);H=new google.maps.Marker(E.extend({},{icon:this.getMarkerByPackage(J.businessPackage),position:I,map:this.map,title:J.name},J));this.placedMarkers.push(H);D.call(this,H)}this.options.mapUpdateCallback()},getMarkerByPackage:function(I){var H={};I=I||"basic";I=I.toLowerCase();if(I==="platinum"){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACYAAAAvCAYAAACPMrhmAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyNpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDIxIDc5LjE1NDkxMSwgMjAxMy8xMC8yOS0xMTo0NzoxNiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjNGRjJCQjc5RDJCNjExRTM5OEM1RkU1NERCM0Y1QUZGIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjNGRjJCQjdBRDJCNjExRTM5OEM1RkU1NERCM0Y1QUZGIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6M0ZGMkJCNzdEMkI2MTFFMzk4QzVGRTU0REIzRjVBRkYiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6M0ZGMkJCNzhEMkI2MTFFMzk4QzVGRTU0REIzRjVBRkYiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6JMYnLAAAIVElEQVR42sRYe1BU1xn/sSysy0Ney0MEIbyEBVsKiKxKNcorjnYqmNgmaENaY0lmms5kMv2jttNpm3QMzaTt2G6sQ6p1YCKhUrUQtCOKPMQnyqMQEAwuW5bwWh7yZul3zl52WAS565L0m/lmzzn37r2/+/u+8z2OzezsLJaSw4cPL3XJnXQvaSJpFGkAqUK41k3aSXqftIK0iHQQForN04AtAvRl+nnV0dExOTo6GqGhofD19YWHhwecnJz4PUNDQxgYGEBnZycePHiA2tpajI2NldKlvwogVw4YAfoO/WTHx8enbd68GRERERZ9fWNjIyoqKhjIYpqqSYutAkaAGA3vh4SEZO/atQuRkZF8fWLagDsdQ6hq1eNh7yi6hyYxODYNfc8Q3Jxl8HaXQ+nvgh0RCsQFrobU1ob/r76+HhcuXEBHRwcD91PSSYuBESgVYyklJeVARkYGXxsen8bHlVpcauzj4BZKb5fe/OGkrq5yZKj88IMta+G8SsrXCwoKcPny5ZMCezdFAyNQ2xiorKys/QkJCXztk5s65NX8F2NThiUZXgjMbLe4yfHjlGC8tNGHz6urq3Hq1Kl8AVzlwvuli4CKZaAOHTq0Py4ujgP5XXE7qtv0sEb6B8bw/tkm1H4xiF/tDQXzValU+nJubi67PEJ6b/79kkWekX3w4EEOipnuJ/lNVoOak+mpGVy81YnXc+vweGIGtJmQmZnJdnr2wnslC9g6QIB+uGXLFkzPzOLXF9rIucewkmIwzKKhvR+/KPwcBnKjxMREtqlep0v7FwVGoJjxs3fu3MnnH5VrUPtoGF+FzMwYcK1eh4/KNHyelpYGgTX5Yoxl79mzRxUUFIS2L0fxz9ov8VXKNO3qk5fbodVPICwsDElJSdvmm1QisGUrkUh+GRsba2LLUmGxSum3GhKJjQXgZvD74jY+Ft69b+GufFWlUmHNmjWo6xy2yITPKeR4KykAUWudTGtXG3uQc64F2v6xZf3tWp0ObcmBCCZLxcTEqO7evcvAFc6ZMlmpVPLBxYY+0aC2r3eHOlNpBoqvR3ri07cTEB/ivuwzWBwtvNXFxwKG5Pk+lkhphw9YqhEjCid7vJ0ayE3IdtfFxl78prAJ/64z+qaDzBZHM6P473LArjcbyRAwbOXAyL+eUygUvq6urtANTqB3ZFIUsCSlO+R2xu/64GIHckq/wD9qtHjn73X4U8kDvu5G4LcpPZcBBjzqHsYQ5VrmSlS5MNo82JPXe3t785s0A+OizRikcDDlT8bWfCmo7jSN2YYQI6wYYCJgCWPAPJ2dnfmifnRafCwScqzExoarmVNbUOPNyeDoDP8lxnhqZcDkdnZ2fHFy2iD6QXMZwZF86KWN3mbX3kwLNo0bNCKKV/qOx5NGUmQyGftxYuFiZGJigi/K7WxFA/usvhcHVL7cz36U6AelrxM6u0cQ6OVg2o06/TjK6ntElKv0gfbGyCVgGZHyj+81+oiPi71oYMy3iut6sC/WyNbmYFeA6Tw5eaUDUzPirODnLjOWTkYsD5kpm3Q6HV8M8JA/4S9Pk4JbOp7sF5MB2t1FN7WinmNPllrnbkyTPT2c4TbJ8ePH9aOjo/VarZb7S4DHKvE11uMpfNbQu+i1vEoNJqaWZ4vxEOZvLL/b2tooTU1XMYvOBdhK1tEw+XaYm0W76QyxtnAXjlKt9UmluHxrQ8hSo41VbWtrK4SWzxT5CylH8UFqpMLUPIgRFpSvNg+YrX16vRMj4+JCj5z6gN3f9OJjAUOhCRiZs6y5uZkpvFbbIz3G2yLW8m50mcbM2U+Xd4j6n62tBFnJwXCRS3mLR90T6z/vLKzH1GVlZXzw/XgfU0cjRjr6xlDW1M/H+RUa9A5PiokQ8KQO6pUEXz4vLS2F0JiYF4rEWuH9+/fPk3JQ76QFWrRD3ytpx4sf1ODDf7WKun8VsfTeK1E8Dt6+fRstLS1naPn8Us2IOj8/H3q9nsel17autcikrV0jou6zo2D6s3QlYtY5o7u7G3l5eWZsPQGMWCslUEdOnDjB598jkzJdSbGXSfHWnvX47re85t4JClesKy9/avtGN75LoUN97NgxPmfp5sjuIMikEqtBuZFP/eG1aGSq1vB5Tk4OKH4ypv5oyRHBXzZs2MC6cZ7xNf3j+FuVFtdaBizuxBlLaRt98cbzAZT2ZNxVmFUYAXT5jWc5VPmtp6fnz6kpRXh4OF9r1j2G+qoGjdqRZYExQFujfPDmznUI9nIwnfwwn+rr6ztC03ef+RiKwO0T+s0dmzZtQkBAAF8/VvboiRZvPjAnF2pSXgjGi3FGH21vb0dNTQ3Ky8tLBUc/vxLnY/ZCz3cgPT09NjU1lZ9pZH3cYFaKzwFjTG2M8MKfM40Nzrlz51BSUnKdhqcX7r6lRJRH04aYJGUOmnH27NkzLO6w+LPUjnVwXoXD2/35+NKlSwwUA7NbLCjRwOYBZLlGLURpvLBBwdOJuV/ZIdLfBd/wc0ZXVxeKivjpZg4rRix5l8UxgMCVazSaIna2ykJIstLDnC0nmSnXshNEg8HAQD209D3PGpxO37hxgw92RHiYJWUXArY11FjJXrlyBZaYz2pgxBpj7D/MVGHeDrzy5QHUazW2h7tzJlnO7e/vP/8sbFnDmFlxOd+czO8W1lZfN7DTLC4xSYn04MUlYy/cx5HVVSxm3RHCw9cLjMzJGOPFpbujHbaGuGGv4PQCk5XW5FVrM3PRvXv3TMXl8+uN/aRQcKr/n8DUtPOus3TDciEzZ1VVFesNc4nRz615sNSaP9PLZyhdqY8ePQp/f38V26XUfuVay5aY6sKSZ0Wz5pn1hCtRUP5PgAEAPSln1gvZO40AAAAASUVORK5CYII="}else{if(I==="superior"){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAlCAYAAABVjVnMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyNpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDIxIDc5LjE1NDkxMSwgMjAxMy8xMC8yOS0xMTo0NzoxNiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjNGRjJCQjdERDJCNjExRTM5OEM1RkU1NERCM0Y1QUZGIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjNGRjJCQjdFRDJCNjExRTM5OEM1RkU1NERCM0Y1QUZGIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6M0ZGMkJCN0JEMkI2MTFFMzk4QzVGRTU0REIzRjVBRkYiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6M0ZGMkJCN0NEMkI2MTFFMzk4QzVGRTU0REIzRjVBRkYiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz59spvzAAAF9UlEQVR42qRYa0xURxT+gMUuIi9lRaRIrUClxoqxwUBBYhMN6Q8TTf1RtFbbAlmjNpramtj08cumbQzGpgSiBmrYJm3TRmyttdYXCASMglAMD3mICAIlgKsiottvZu7Cru7dhz3J7Mzdu+d8c2a+OefM+tlsNngjeXl5q9hlsmWwxbLN114NsfWxlbOdYvvFk63CwkL4eQIm4GZ2m5OSkjITExORkJCAiIgIREZGyvd3797F6OgoWltb0dTUhCtXrpzn1z8UCutuRBeYgFnszGlpaWtSU1MhQL2RlpYW1NbW4sKFCyf4WED837wGJugH4eHh+dnZ2ViyZIn68kEH8G8xYKVD4zfUcze/D5sFBM8BZq8GYj4EAufKnzc2NqK0tBRDQ0NbCF7sEZig+6Kjo/eYzWZERUUBD7l9tz5RoLZHztrdT1gzBACJbwELDgIB4ejs7ERxcTF6e3t3E/wbXWCCvmcymQ7t3bsXQUFBwJ0zQPt6YGLI9bp266z3jFAgjbrTl2FwcBD5+fkYGBhYT/Cf7T/xdwBNCQwMPJSTk6NAhyxA62p9UHdiHQXOLAdG/pQk3LhxIwwGw0/EePUpYEEksadxcXGkag3Q9f7TS+uLTFC3ei0w1oyFCxdC2BYYTsCcyeKYmJjNZDDBxoGODcDj+64NGkzAvO+ARf8AWb1A6h9AZKbr396njfo1cpicnAwS9l1ivezosTkzU1MePEzGtrk2ZHxJAZo4cSP1jWRzFE9d+jkgfpdrnd4WbtuPCA4ORlZW1qTXduD0+Ph4NRoo0DnxZOwL3yuPH40ANz8C6vI40fPq/aKvgIgU17rt+2SnYaRLYG2ZRePSNKjmSqbTaLBm+Po64PbXQGcRUEkC3mlSE3txm2vdPtqcGERsbCxCQkKSiWnyd/LWWqFPlue00PzYqo6ZXR6TE/1/qXHQPH2i3Sl38loAz7fHXRmNdFk6oNFxhtprRwlfpvrxAX39sXbZMU6IboEADjEajVPe6J7NiinwBceo9boCfIVRala6FlAs+vrjvbILCwsTXbSBH8P37t1TLwPC9BXF8bq9n/F4n/I48W82x4k1cy/L9PUDZ05mM5FKhccdIqw57aOeCMYLRrtMS1+6DzjGBNn19/eLrlUAV7W3q/VHcKp7YAHa/62LQMFsddPNMvv5AaEr5VDkbVE0+DNwN/T09LTJmQQtptfx7sH7Dzwd1dr2K3brSXQSz3+kyFIYGRlpImavPYBUtLVp0Spql4cYTIINFk09P+Bz12H3OvGfq/kpjArHyFVw+vRpNYrMVeHQnQiS2TQPO7j0E25Ow1zamrkeVqsVx48fl1iTwHS9hstdVF5eriLQ/FK+CXJzNLinN7aqfb1+QP93Ir0mn5RD1mJimYuIVfdkWiwQpYok2vRkBe43Td+oSCaXmMUe6rA8kCf1NRad02Jx7do1WQbZvXUCFjNhNbLpyJEjsmpEOHNpwimVFHyVMJ7ZlbWsRNLBlZSgtL3O7q1ezfUpa60vRM3F2kuR6dZnilDe1FxJW5jFyIGAELl6JSUl6Ovr20rQAm+qzG2hoaEHRdWwdOlSjb3XgeYVXNpbroFNTBDL6aVhtnysr6+HxWLB8PDwJoIe9aWuFjcHc0pKytqMjAxVVwtSNSZMMdoOHEGwFd2SE6KurqysRFVVVZlWV590CSCA3bXc3NzsnTt32kgQm5Qus812Car9qrXbBfLV5cuXbTt27LBR5x1Pdv29uOdYGNg3XLx4UQswu9WRmyRSBJc5Rw7LysowNja2ijolHgnoaWYOnp9rbm5WXresmvK462P5FfdUeFrmrT1/Hw7JGQKr0czsqeA/R5U7MvgARd4a8wXYUlNTo5HpTZW7F73BAPG8zDhXr14t17ug/S9gGhUZ7PeGhgZV/sx6mxe1bZMXNMoJX2KMv48x6Wh1dbUazdnDHJsl70Znz551CodeibdkcCDZsbq6Okko0W/fvl2Qarevdvy8/SviyQs7ryNrGJXcB4ln+UfAA7joeANAz7Pc58S/FP8JMAD2q0zeRtdoXgAAAABJRU5ErkJggg=="}else{if(I==="premium"){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAfCAYAAAD5h919AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyNpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDIxIDc5LjE1NDkxMSwgMjAxMy8xMC8yOS0xMTo0NzoxNiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjhBMEFEMzgyRDJCNzExRTM5OEM1RkU1NERCM0Y1QUZGIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjhBMEFEMzgzRDJCNzExRTM5OEM1RkU1NERCM0Y1QUZGIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6M0ZGMkJCN0ZEMkI2MTFFMzk4QzVGRTU0REIzRjVBRkYiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6M0ZGMkJCODBEMkI2MTFFMzk4QzVGRTU0REIzRjVBRkYiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5+LuDgAAAFZ0lEQVR42qxWeUiUaRh/HG9t1ElHXY8s1wPyyGxXDFz8I7HaFUpKE2tJal2dXTBUXOifZYvESCWNyoMkM5WMSERcMKUSE2VR1LzWY13ve3TymNTx2Od555tZRz+Ptn3g5f2+5z1+73M/Wuvr67ATRUVFOeEUjOMbHO44DnFLQziacVTjyMUxvtM9WtsBIYAfThJLS8twLy8vcHZ2BhsbG7CwsGDrMzMzMDQ0BN3d3VBbWwuzs7MEloHjjz0DIcivQqHwRmhoKPj4+MBuNDc3By0tLVBYWAgKheIHZOXsCoQgD93c3CQRERFgYmIC6woFyEpKYLa8HBY7O2F5cBCks7MgdHAAE09PsLxwAUxPn2Zn+/v7IScnB8bHx5Px95dtgVQgMTEx7J8uH7l5ExQjIxqPIaCNZObqCi4ZGWB05AgsLS1BUlISjI6OXsOle6o9gg0g3zs4OKhBxlNToT86egsIH8lQ0oZTp2D65UvQ19eHaDwnEonScelbDSAE2UeGDwsLY8ypx49h4v59jcsERkZgFRsLB3NzwePRI7C7dEljfXV5GVolEphHx7C2tobw8HBiS1TrOtwsCQwMPO7o6AiL7e0wlpiocYkuHnR8/hz07O3VPPPgYDBH2zRfvKjmra2sQNvly/B1czN4ov3c3d2DWltbSarfVar7zsPDQ6myu3dhfXVVA8j29m0GIscL+q5ehb/i4kAxOQkiVNfBqCiNvR+lUhi7pzSNr68vTUx0AarN1crKyt/FxQVWZTKYe/NG46C2mRkI/f1hbXER+tAT516/hsEnT6D3+nW2Lj53bovNRouK2OzkRLHOAp3ZyI9jMC/bLI22UKhUi1zOHqKiRc5JBMbGW+MK3Xx5YIAcAsRisR2yviQgJ4x+tmEJN2wm8roVVJPO/v0gOn9eebmeHthducK+5a2tvJ74sa2NzfZKux4lIDMj9Cj2aozwzUQSkhcS2SUng8urV3C8sRHMOdCBBw94gVa5uwwNDWkyISDp/Py82h58NJ2frz6ojzmPvJDow9u38OH9e94zupgX2dnpaZoGCahleHiYMQ0wwrd7HYFtpsG0tG2DWP+QMslPTEzQ1E1A73p6ehhzn58faGlr8x4k9ZHnqWihoQGmqqt595qi1Hq2tjA1NQVSqfRvZPUJsrKyhmUyWVVXVxdTnWlQEO9hcoiZFy/+lSY9fVtpbDEMiDgBqjfmuqL6+nr2YRUfDwIDA36psrNZNiePGisr490jPHAAxJGR7LuqqoqmTDUQSpWBzIqOjg6WAci7+IhKRNeJE9B49izvug4+0O3ZM6Z+enhvby9Fbq1G9qbqWFBQAAsLC0x9BKalq8sLtqz0JA0yQLUfLS5mDkVVl+7iKq5mmUCpiicnJxNTUlKoSrLgdMTXGWJy3FItBQL10NPRgS8CAsAbU5cxVuMRDPC8vDyQy+WUvqt2qrCpmPviIlHPXFQzjxu9dQsjek2j8Blj/+CG5dvo2DH234a2y8cwwNj5GX8f7qVn+JFKR0hIiFcAvpZoEivo2J07ykDlAvwrNLbB4cOsSWlqaoLS0tJyTl0ln9IFOeMUiwlXkpCQwJLqn5j2VRnC5ORJcMjMJINDNnojdkU3OBDetkuwXSygzbpx/ISxUEYdDlVYs+Bg9bpYoiyeDRi4CBKPn7/t1NsJYHd6WldXp2xCzpxRpypqRCh1VVZWtmz0rv8MhFJRMLdjVwNG3t4sqYqwxdoQ+e+oKnw2EEfqfCjGUi7iVFhTUwN8zeLnAGVUVFTACjYfJA3lRIp8bBgp8hv2coHWbk3+Bi9Mw/i6RmWfpMNutIizTdX/CsSBUcHy4+zSCZ9A/wgwAKqxVNk5WSnMAAAAAElFTkSuQmCC"}else{if(I==="user"){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACYAAAAvCAYAAACPMrhmAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyNpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDIxIDc5LjE1NDkxMSwgMjAxMy8xMC8yOS0xMTo0NzoxNiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjIzRkMyMjA3RDM2OTExRTM5MTVBOURDQTIyQjJDRjI4IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjIzRkMyMjA4RDM2OTExRTM5MTVBOURDQTIyQjJDRjI4Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MjNGQzIyMDVEMzY5MTFFMzkxNUE5RENBMjJCMkNGMjgiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MjNGQzIyMDZEMzY5MTFFMzkxNUE5RENBMjJCMkNGMjgiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4MUW+RAAAIJ0lEQVR42sSYC1CUVRSAD/t02V2WpwiJjISkKIViykLkGMKihlOiMRYYamY4lmVjOdY0PW189ZxijPAxJk1kkjgaOgMOg4AyJphZhAoRbIDIa+PNsnTO3X+33WV32QW04xz++9/9d//Pc84995zrMjw8DLZk06ZNtj7yRH0SNQZ1Dmogqjf3WTNqA+pV1GLUXNROcFJc7IFZAX0aL2lSqTQuPDwcZsyYAf7+/uDl5QUymYw9o9FooL29HRoaGuDmzZtQUVEBvb29+fjRVxzkxIEh0Aq8pC9YsCAhKioKZs2a5dT//vr161BcXEyQp/E2A/X0uMAQiMywJzg4OH3ZsmUwe/ZsNt8/PAClvZVQ0F0G1QN10KhtgfahThjq1YJCIAdvkSfMkQTDUrdHIUoyF4QuAva9a9euwalTp6Curo7gXkYdcBoMoZRkpfj4+NSkpCQ216n7Bz5r+wZ+/KeAwVmKtntwxJyrWAKrPRJgs9caUPDkbC4nJwcKCgoOc9YrdxgMoRYR1Lp165IjIyPZ3Ncdx+Grjhzo0fXZtLA1MINIxa7w4uRUSHN/gt2XlpbCkSNHsjm4C6OCIVQEXrZv3Lgxef78+Qzk9dv74HxP+aixZA+MvYznAovdI+Fj/x0gdhFBeXk5ZGVlEdxe1ErTZ3lWvp++du1aBkWue+bv7Q5BOSLDumEobC+D5D+3QZeuB3AxQUpKCq30dMtneRbWSkWgDdHR0TA4rIVtzbvhBgb3hAo6qKq7BraqPwAd/ouJiaFF9Tx+kmwVDKGmEHlsbCy739uaBZd6f4G7Ihg+pZoK2NdyiN0mJCQAZzWJNYulJyYmKoOCgqBqoAayNafhbgq59XDLCfhrsBFCQkJgyZIli0xdyuOsxefxeG9FRERw1jro1EtWu6ng16A8qAr7ielGn9UOfU+n08E7TV+wMffuVZYWS1MqleDn5weX+34dtws7h7ocjreSzivMQ+SpefPmKQ1wBrC40NBQNqDk6aw0DDaZ3WscBePovmnLYyOOIc4ULAa3HX3i6620+zNKyUOQ6fcec5/RQrpus2fqB/4DTVDEwMHpu9jVlpR16d/JMTxCfwQYX9O9vb393d3dQa1thtvaVrtg8dJHGBzpK57PQlbHD/C95qwFWCM85bkUklFnS2YYrZjfWWzVneq+ZujQaVgoYeUS2t3d7UW76wO+vr7smdoB9aiGV8mijWM3nozBrZarQKPrYvcE8EPw5xAgmmL2vSjZXHDjy2y6+UZfHTzsGgbEUlNTE0Ku9JHL9Ztru85+PaeSRrOXW8pU4RTjPL3cEsowb8+d7WgxtqdKpawQJYtJhEIhm+zTDdgFO9tdAvXqbcyNLE2gpQjKlpB1Mlty9LGLcXS994bNZ7uGethVLBbTRUZgXf39/foShTdpVFf+1n+TKQnFV6g4GL72e3eEJV/+a5f1mLIhMr6rvtbTs3SRK2vv3Lmjd4nA16k0YQuK5JNpO42B74gECu9jV46llsB+b2rSL+/7RdMwf/DGDLW+dqfZM4cwTViLN0sRugghSDSVjVtaWuhyi3fgwIGOnp6ea2q1GmQ8V4QLGBPUx21HMI4qMKa+Nwv4g9M/ZFfbRRrmL8k0Vn7funULtFptCXnUYJ4L1NHo81T0qGBve282g6LMT/FGQsFumhLIYpTP7Mky90X6lHGDLY5i08x//MqVK2zwhDzW2DzYkuca32Ir1CDbbu8xW4n7mv4rAvbj2NSKljKJL4JVing25hiOG8HQnYVVVVWk4CfwgRTFCrtglExfxSKS3EeWMqxSg+S0/cRWJMWcPSjAUnv95CTw4CtYi4fdE/WfP1vWYxmFhYV6i7gnGTsae0JQBGdNKF1QzNkTT6ECnvN4io3z8/OBa0zMC0W02vGrV6/moTKo9ydvdXiFjkWEAgF8FLCD5c7Lly9DdXX1dzidZ6sZycjOzoaOjg5Y7LoAXvJMuStQLnwX2On/AkTiDtLc3AzHjh0zs9YIMLRaPkK9mZmZybl0FdOJhto65VlYo1hueCdguqKuvMiRhvfLsLCw9C1btuj931UMb7R8arX7dqavpK58/9QdzBushN+7lw5eyFKbnTkiYHDYjbMd/89BNTseOGeSJhwFIyupPGJgu896uA+3PQoV8ootKEcOVd738fF5A5tSmDlzpv5gpL8a9mBrV9H3+6hgBBSlmItAG2CmKMh48kMx1dra+ibefjDmYyiEW8X1m48tXLgQAgMD2fyuOwdGtHimYDwxH17z3QBpiifZPRZ/cPHiRSgqKsrnAj1vIs7HRFzPl7py5coIlUrFzjQeb0g3K8UNYGSpcLdQ+HbqPnZ/8uRJOHPmTBkOj1quPpu515GHcOUMoH6Kw6QTJ058R3mH8o+tFcsT8eFV7zQ2PnfuHEERzOOOQjkMZgJIBxkZXJaGJHkc204s4+pByQMwf9IcaGxshNxcdrpJpzltzrzL6dSOcEX19fW5dLZKR0krZItHWCtFkWg8QcRum6BqnX3PWPeco5cuXWKD5bJHzTZlBV8OS6RKdnv+/Hlwxn3jBkOrkcV+I1dR0WgoLgUSAajk0cyStOe2tbEWu/aegVkWl4km7lwpjxtRW91rsKOUl0yLS7JemDiE6irKWT9z6eHegqE7yWKsuPTme0AsxlUqF/ScJS+MZ7Mfb8GVW1lZaSwuE6T6TpsrODP+T7AMXHlltN3QXkjuLCkpod4wCy36x3h+WDCeL+PLh3C7yti9ezcEBAQoaZVi+5U1Xms5Ul0481vh1DxTTzgRBeW/AgwA9LpyWpGi76IAAAAASUVORK5CYII="}else{if(I==="destination"){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAxCAYAAACoJ+s+AAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAAB1NJREFUeNrsmXtQlNcVwH/fvthddpfHghAMJMKOUdHmIWmKSBWzKsSApoFitQTTUh2bJlHBxE7SRzKlMYk7qZlMGw11mmpbzdBCNWmZSDQZSdC41hBU1ABFJKCR9/Jalt2vf8huWdyFRZeSP3pm9o/v3G/P/c255zv33HMFURT5OouEr7nIbuG/ocAjQDIwF7gDCBseuwo0AVXAMaAE6LqpWURRnOhvjSiK74sTl3+KovjIROcTJhCDC4HngFSAAXGQyr7TlPdW8oX1Ei1D12i3d2HrdKCXBxOhCiNeG8tS3QKS1PciF1yL9R7wC6PJfMrTJOX5CW7PvgJuBV4B6LJbeL19H6Xd5QyIgze8ONhqv0GnCVSRHZHGRn02QVKtU73JaDLv9AfgH4EcgKKOYnZ1HKDPMeD1ZU+ATtEFanhq+lpyQ1c6VX8wmsyPjwU43le8H8jpcwzwk5Zf8Vrb22PCjSfdvT0U1u/mycsvOb2/rjw/4U83m2aKgOwuu4W1TVs52nvCL2lDHBIpaznG2rpnsTh6AdaU5yfsmihgNvBDmzjE5ivbuTjY4N/k5oDqjgsUNJqw4wBYX56fkDoRwKcBXmn9PSf6P5+UBCza4ei14+y8us+p2uYr4AtA4nlrPX/uetdtQCkoWKZJIkwa4jfIty6/Q6OtBWBReX7ClvEApUCm03ujZZM+l9cit7FneuENY3JBxu3yiDGBpIIErTTQTTfkcPBSk2uuzPG2unXAnJP9Zzwu7RfDsVg32AjADMV0snSpLNMkcZss/PpLd0BldxV/++owZe0VDDgGUUoUZE1bzoao71LZXcXW2h1u8fhB6yecj6pnVkBs4jBksTcPLgUotZR79MBfuw9zffwDfjntCd6NeZOF6vns7/oHP2r+mSsFJeru5lVDASfm/4WD896g+pulbI5+DJtoI1im8bDdwjtth90YvHkwGaCy77Mxl0ojUZOlS6Xw2i63OLXjnqTP9NZS1l5Be3MXRztP8mzMD4gKCPcQjPBxx78gyrWlegScAUQ12a5ydajNpyA/b61nnnImKzSLiFca+HHzi/R09PPt4ATWRKygtr+RvVcOARAuD8GgiqHP0e8RsL73Mp12C8FS7RxAD7SNBrwLoMHW5PNXuCPyGSJk+hExeom23m7O9NbyVnMxqyPSeGHGE0QFhJMUdB9yQcaHnZ96tVdvbeI+9WyAmUDlaMBwgHZ7t8+AETI9NnGIE/1VnLXWsUn/GGep43RPDRf6GrCLDtZErPAx50DnkGVkrXnDEqsArKLVZ8C3O0sp6iim3X69Fj0eu5/VQQ8BcNpSw6eWaj7vucC5vno+7DjJ4pD7iVTovdrrFV37vMYTYA+AWlD5DFjeU4kdBxnaFOYEGFAKAa6xe7Wzqemr59Ezm126VP3CMe0FCko3ltGA/waYPk6yHSn5YY8TH2AA4OJgA6WWckLtwSTq7kYtVWFQxbAqbAmh8iDSw1KYG2hgZ9M+z8YEiA6IdGMZDVgDEKeIRorEuYl7FJs4RJ9jALkg47mvfkOZ5Zjr/cFWO2qpitXTUlkauoDtcVuo7W/keHcVT178NU3WKx5tKiUK7lREOR/rPAF2AtVaSeC8OEXMmBWMVRxk+aU8V+yNlj57P3taStjTUuLbUggwW2twHgs+BqzedpIKgGWapHFteoO7KREgTZ/sfDo2VrFQDLBK9+DIQ86ki1qmZGXIYjcGb4BHgCO3ycLJCc7wGn820eY/50lhfXQ2odIggDLg1HiHpgzg7112C2mNG+iyWyY04ViHJk9LG6EO4/343aglSoDFwEfjFawHgYNBUi2F055GOondEYVczg5DgRPugNFk/sjXkn8j8GVK4AM8pc+ZFDhBLvB87Aa+pfoGwIXhOX0+kzQDqwHyQjLJC8n0b8dKIVBw5zq+F/yQU5VlNJk7JnrsrAAeBtisz2VH5DMoBcUtw2kCVbx5189Zr89y1aBGk7n6Zttv7w1DtqdpkimOft2nHOnNaxnRKRya9VtSAh8A+HIYrmLMUPCxNxMH7AaWAFQPXOTl1iJOD9SM+xVLFALJYQkUROQyKyDWqS4DNhpN5gZ/NY9GnpdzgPnADSX/aECZRsK22/PIDV7lVFUCe40m8++8VkgT7M2Mlp1AAvCyMzZHVtSjPXePbtZIuOeNJvOCseD82QLeBhxQS5Rev3CpWmBL+Drn46tGk7nwf92j3g7wHd0y5zbl7j31bO5XzQU4B/x0KpronwElSkFBujbF3XsqgbUhD7sygdFktk8FIMBegBXaRW6bf5BCx4OaRKfqjanq8jPcvT8XH2CYE6eIpm7wMvIQKcu1Sc6kfjC+Nr2Rld4NnDUcmlQPuorcDO0Sl+JR3VKPtd1ULLFrmZ1FbnyAgXnKmQCn4mvT9045YHxtegVwJEwagjEwke//t9Ct8Edh4a+6vgRYkheSSZwiZmRS90OXc+I3Td5+n4y4VSryl13Bz7ed9wyfr63+Mij8/zr2FuU/AwAdcoFPpOHdfQAAAABJRU5ErkJggg=="}else{return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAASCAYAAABrXO8xAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyNpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDIxIDc5LjE1NDkxMSwgMjAxMy8xMC8yOS0xMTo0NzoxNiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjhBMEFEMzg2RDJCNzExRTM5OEM1RkU1NERCM0Y1QUZGIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjhBMEFEMzg3RDJCNzExRTM5OEM1RkU1NERCM0Y1QUZGIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6OEEwQUQzODREMkI3MTFFMzk4QzVGRTU0REIzRjVBRkYiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6OEEwQUQzODVEMkI3MTFFMzk4QzVGRTU0REIzRjVBRkYiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7D5GV1AAACRElEQVR42mxTTYhSURg9vtfPKsZmpp+BoMF5U5SRhhRTNhljCxmiRbUId8ogCdEiokXtahMtilaCq8BN0mIwSEXSjc5KilEzHDSGQmPGGZTHG8eZNOl+t2vzaPzgcL973zn3fPd79xp8Ph90sY/BzzDNcJFBZsgwpBkCDL/6xD06kYtETqfzhqIoMJlMkCQJlUrlFiGZTLqE+D2RDcLxttFofOd2u2GxWDAoisUiQqEQms3mHTYNS/3yPB4PFzW3VhH4fB8Pk1fw4KOd5+ubVZjNZni9XoijDMs2m+0eK8/vcDiw0lrGs8xNfFeL2Oq2sP17Ez83vmGhOg/r0RmMj02i1+uNl8tljRxdtBvF/NIrtDoqzhyaxstrCxyUt7sawl+fcw6dn5pHwstigsJamo9z1hcY2j/KQTlFuflJL7RLgxrR7XUG5vogYYa1m09OjUzx8U3+CdTtdQ7K9d8EN0P/MVUqlfg5XaY5LK6m8IWVTB3VB32jYFwaUuQYSCQShVqthslhG06OXNhVFq0TiENc0pBwg25DLpfjpOvK3V3C2Ym/17JQIA0+kKbfnEA0GkW9XsfpUTuOD5n/iY4dOIGzh6+i0WggHo9DXDv0hbVOp/Na7Mhc/Ttuyo5bu90m0Q+9kO8Ui8V4Yj0yw886cfAczo/N8jW92//CJU3Tgul0GpJBxqOpEB5festzWmOlBsm4T6a7qu9DNZ/PS7Is80VVVZHNZhEOh4PCbWXQe6RYZHgaiUTWxGPeKx4yiZb1xD8CDAAD7Oj2Car9XgAAAABJRU5ErkJggg=="}}}}}return H},centerOnLatLng:function(I,H){this.map.panTo(B(I,H))},getBounds:function(){var I=this.map.getBounds(),H=I.getSouthWest(),J=I.getNorthEast();return{n:J.lat(),e:J.lng(),s:H.lat(),w:H.lng()}},getCenter:function(){var I=this.map.getCenter(),H={lat:I.lat(),lng:I.lng()};return H},getLatLng:function(H){var J=new google.maps.Geocoder,K=this.options.country,I=new jQuery.Deferred(),L;if(H in this.locations){I.resolve(this.locations[H])}else{L=function(N,M){if(M==google.maps.GeocoderStatus.OK){this.locations[H]={lat:N[0].geometry.location.lat(),lng:N[0].geometry.location.lng()};if(F(this.locations[H].lat,this.locations[H].lng)){I.resolve(this.locations[H])}else{I.reject("Unfortunately we can only search in the UK. Please update your search to a location within the UK.")}}else{I.reject("Your location has not been recognized, please try making your search more specific (e.g. Ely, Cambridgeshire) or insert a different location.")}};J.geocode({address:H+", "+K},E.proxy(L,this))}return I.promise()},setCircle:function(L,I,H,K){var J=B(L,I);H=parseInt(H,10);H=H*1609.344;this.clearCircle();this.circle=new google.maps.Circle({center:J,radius:H,fillColor:"#b8cceb",fillOpacity:0.4,strokeColor:"#000",strokeOpacity:0.6,strokeWeight:1});this.circle.setMap(this.map);if(K){this.map.fitBounds(this.circle.getBounds())}},clearCircle:function(){this.circle&&this.circle.setMap(null)},getFilteredMarkers:function(L){var K,I,H;L=Math.max(L,1);var J=this.filteredMarkers.slice(0,L);for(K=0;L>J.length;K++){if(K>=this.markers.length){break}H=this.markers[K];for(I=0;I<J.length;I++){if(J[I].id===H.id){H=false;break}}if(H){J.push(H)}}return J},displayDirections:function(I){var H=new jQuery.Deferred(),L=I.from,K=I.to;this.clearMarkers();if(typeof L==="object"){L=new google.maps.LatLng(L.latitude,L.longitude)}if(typeof K==="object"){K=new google.maps.LatLng(K.latitude,K.longitude)}var J={origin:L,destination:K,travelMode:this._getTravelModeFromString(I.travelMode)};this.directionsService.route(J,E.proxy(function(N,M){if(M==google.maps.DirectionsStatus.OK){this.directionsDisplay.setDirections(N);this._addDirectionsMarkers({latitude:N.routes[0].legs[0].start_location.k,longitude:N.routes[0].legs[0].start_location.A},I.to)}else{if(!N){H.reject("Directions error")}else{if(N.status==="ZERO_RESULTS"){H.reject("Sorry, we can't evaluate this route. Try entering a different town, city or postcode.")}else{if(N.status==="NOT_FOUND"){H.reject("Could not determine searched location. Try entering a town, city or a postcode.")}else{H.reject("Directions error")}}}}},this));return H.promise()},clearDirections:function(){this.directionsDisplay&&this.directionsDisplay.set("directions",null)},_getTravelModeFromString:function(H){if(H in this.travelsMode){return this.travelsMode[H]}},_addDirectionsMarkers:function(I,H){this.placedMarkers.push(new google.maps.Marker({icon:this.getMarkerByPackage("user"),position:B(I.latitude,I.longitude),map:this.map}));this.placedMarkers.push(new google.maps.Marker({icon:this.getMarkerByPackage("destination"),position:B(H.latitude,H.longitude),map:this.map}))},closeInfoWindows:function(I,H){E.each(this.infoWindows,function(J,K){K.close()})}};return C})(jQuery);
LW.businessDirectorySearch=(function(A){var D,Q,T,R,M,S,J=[],H={},C;function B(U){N();S.html(U).slideDown(300)}function F(){var U=new jQuery.Deferred(),V=Q.where.value;if(V==""){U.resolve({lwLocationEntered:false})}else{LW.googleMapsAPI.load().then(function(){new LW.Map({cachedLocations:C}).getLatLng(V).then(function(W){W.lwLocationEntered=true;U.resolve(W)},function(W){U.reject({message:W})})},function(W){U.reject({message:W.message})})}return U.promise()}function N(){S.slideUp(300)}function P(){N();if(D.valid()){T.attr("disabled","disabled");if(!A("#business-directory-search-keyword").val()){A("#business-directory-search-keyword").val(H.search)}if(!D.find("#business-directory-search-location").val()){D.find("#business-directory-search-location").val(H.location)}F().then(function(U){if(U.lwLocationEntered){Q.clat.value=U.lat;Q.clon.value=U.lng}I(Q);T.removeAttr("disabled")}).fail(function(U){B(U.message);A.map(J,function(W,V){W()});T.removeAttr("disabled")})}}function I(U){U.submit()}return{init:function O(U){U=U||{};U.defaults=U.defaults||{};H.location=U.defaults.location||"London";H.search=U.defaults.search||"Restaurant";U.searchOnChange=U.searchOnChange===false?false:true;D=A("#business-directory-search form");Q=D.get(0);S=A(".user-message-bar");C=U.cachedMapLocations;LW.validation.init();D.validate({submitHandler:P});T=D.find('[type="submit"]');R=A("#business-directory-search-map-view").get(0);M=A("#business-directory-search-list-view").get(0);if(U.searchOnChange){A("#business-directory-search-map-view, #business-directory-search-list-view, #business-directory-search-distance").change(function(){D.submit()})}},setSubmitFunction:function E(U){I=U},setListView:function(){A("#business-directory-search-list-view").prop("checked",true)},submit:function K(){D.submit()},showMessage:function G(U){B(U)},onGeocodingError:function L(U){J.push(U)}}})(jQuery);
LW.gallery=(function(F){var H={$slider:{},$carousel:{},$countText:{},$creditText:{},$captionText:{},hidden:"gallery__hidden",slider:"#js-gallery-slider",carousel:"#js-gallery-carousel",fragment:window.location.hash.replace(/^#/,""),totalSlides:0,processedSlides:6,omniturePageName:""};var J=function(K){B(K);I(K.animatingTo+1);if(H.totalSlides>H.processedSlides){var L=E(K);D(L)}if(!H.omniturePageName){H.omniturePageName=s.pageName}s.pageName=H.omniturePageName+" slide #"+(K.animatingTo+1);s.pageURL=window.location.href;s.t()};var A=function(K){C();if(H.fragment<1){return false}else{D(F(K.slides[(H.fragment-1)]).find("img[data-src]"));B(K);H.processedSlides++}};var B=function(L){var K=L.animatingTo,M=F(L.slides[K]).data();H.$countText.text(K+1);H.$creditText.text(M.credit?"Photo by "+M.credit:"");H.$captionText.text(M.caption?M.caption:"")};var G=function(){return window.location.hash.replace(/^#/,"")};var I=function(K){window.location.replace("#"+K)};var C=function(){F("."+H.hidden).removeClass(H.hidden)};var E=function(K){var L=K.animatingTo;if(K.direction=="prev"){return F(K.slides).slice((L-2),(L+1)).find("img[data-src]")}else{return F(K.slides).slice(L,(L+3)).find("img[data-src]")}};var D=function(K){K.each(function(){var M=F(this),L=M.data();M.removeAttr("data-src");M.attr("src",L.src);H.processedSlides++})};return{init:function(){H.$slider=F("#js-gallery-slider");H.$carousel=F("#js-gallery-carousel");H.$countText=F("#js-gallery-slide-count");H.$creditText=F("#js-gallery-slide-credit");H.$captionText=F("#js-gallery-slide-caption");H.totalSlides=F(".gallery__carousel__slides > .gallery__carousel__slides__slide").length;H.$carousel.flexslider({selector:".gallery__carousel__slides > .gallery__carousel__slides__slide",startAt:H.fragment>1?parseInt(H.fragment-1):0,animation:"slide",controlNav:false,animationLoop:true,slideshow:false,itemWidth:105,itemMargin:10,asNavFor:H.slider,});H.$slider.flexslider({selector:".gallery__slider__slides > .gallery__slider__slides__slide",startAt:H.fragment>1?parseInt(H.fragment-1):0,animation:"fade",controlNav:false,animationLoop:true,slideshow:false,sync:H.carousel,before:J,start:A})}}})(jQuery);
LW.galleryUpload=(function(E){var B,V,a,O,Z,I,Y,A=true,M=false,U,f,W,C,F=false,X=false,T;var Q=function(){var g=E("#js-modal-gallery-validating").modal("show");LP.Validation.validate({form:null,method:AjaxValidationHelper.validateRequest,params:[{contentId:V,galleryName:a,standFirst:O,explanation:Z,editorialChannelId:I,specialistChannelId:Y,newGallery:A},LP.currentUrl],callback:function(h){g.modal("hide");if(h.success){c(false);L(false);P(false)}else{c(true);L(true);P(true)}}})};var D=function(j,i,o,h,l,m,g,k,n){var p={contentId:j,galleryName:i,editorialChannelId:o,specialistChannelId:h,newGallery:l,standFirst:m,explanation:g};AjaxGalleryHelper.createGallery(p,{callback:k,errorHandler:n})};var R=function(g){T.modal("hide");if(g.error){E("#js-modal-gallery-save-other-error").find(".modal-title").text(g.error.title).end().find(".modal-body").html("<p>"+g.error.message+"</p>").end().modal("show");g.omnitureProperties&&LP.Analytics.logError(g)}else{if(g.error==null){if(g.contentId&&g.validInput){V=g.contentId;a=g.galleryName;I=g.editorialChannelId;Y=g.specialistChannelId;if(A){M=true;E("#picture-upload-no-flash").unbind("click").removeClass("show").addClass("hide");E("#gallery-file-upload-container").removeClass("hide").addClass("show")}H(g.contentId);E("#js-save-cancel").removeClass("hide").addClass("show");E("#js-upload-save").attr("href",g.url).removeClass("hide").addClass("show");if(F){E("#js-upload-save").removeClass("show").addClass("hide");E("#js-modal-gallery-saved-redirecting").find('.modal-body [data-field="galleryName"]').text(g.galleryName).end().modal("show");window.setTimeout(function(){window.location=g.url},1000)}else{E("#js-modal-gallery-saved").find('.modal-body [data-field="galleryName"]').text(g.galleryName).end().modal("show")}}else{LP.Prompt.question('Your gallery title "'+g.galleryName+'" has been set as blank',null,LP.Prompt.YESNO)}}else{if(g.ignore){}else{if(!g.ignore){E("#js-modal-gallery-save-failed").modal("show")}}}}};var H=function(g){LP.MultiFileUpload.setContentId(g)};var S=function(h,g){};var c=function(g){if(g){E("#step1").find(".form-group").removeClass("has-success").addClass("has-error");E("#galleryTitle-error").html("Please enter a title for your gallery").removeClass("hide").addClass("show")}else{E("#step1").find(".form-group").removeClass("has-error").addClass("has-success");E("#galleryTitle-error").removeClass("show").addClass("hide").html("")}};var L=function(g){if(g){E("#step1").find(".form-group").removeClass("has-success").addClass("has-error");E("#gallerySummary-error").html("Please enter a summary for your gallery").removeClass("hide").addClass("show")}else{E("#step1").find(".form-group").removeClass("has-error").addClass("has-success");E("#gallerySummary-error").removeClass("show").addClass("hide").html("")}};var P=function(g){if(g){E("#step1").find(".form-group").removeClass("has-success").addClass("has-error");E("#galleryDescription-error").html("Please enter a summary for your gallery").removeClass("hide").addClass("show")}else{E("#step1").find(".form-group").removeClass("has-error").addClass("has-success");E("#galleryDescription-error").removeClass("show").addClass("hide").html("")}};var b=function(h,g){T.modal("hide");E("#js-modal-gallery-save-error").find('.modal-body [data-field="errorString"]').text(h).end().modal("show")};var J=function(h,g){};var e=function(h,g){};var G=function(g){g.preventDefault();g.stopPropagation();F=true;N()};var d=function(g){g.preventDefault();g.stopPropagation();F=false;N()};var K=function(h,g){if(!A){E("#gallery-file-upload-container").removeClass("hide").addClass("show");E("#js-save-cancel").removeClass("hide").addClass("show")}};var N=function(){inputElement1=E("#"+f);a=inputElement1.val();inputElement2=E("#"+W);O=inputElement2.val();inputElement3=E("#"+C);Z=inputElement3.val();if(!a||a==inputElement1.attr("title")){c(true);return false}else{c(false)}if(!O||O==inputElement2.attr("title")){L(true);return false}else{c(false)}if(!Z||Z==inputElement3.attr("title")){Z=""}var g=LP.GroupPicker.get();if(typeof V==="undefined"){V=0}if(M==false){A=true}else{A=false}g.addHandlers({ok:function(){T=E("#js-modal-gallery-saving").modal("show");var h=LP.GroupPicker.get().getChosenGroups();I=h.editorialId;Y=h.specialistId;D(V,a,I,Y,A,O,Z,R,b)}});g.show()};return{init:function(g){if(g.isNewGallery){A=g.isNewGallery}if(g.galleryTitleInputElementId){f=g.galleryTitleInputElementId}if(g.gallerySummaryInputElementId){W=g.gallerySummaryInputElementId}if(g.galleryDescriptionInputElementId){C=g.galleryDescriptionInputElementId}if(g.galleryId){V=g.galleryId;A=false}if(A){E("#picture-upload-no-flash").removeClass("hide").addClass("show").bind("click",d)}E("#js-upload-save").bind("click",G);E(document).ready(function(){LP.MultiFileUpload.bindFileUploadCallback("fileuploaddestroy",e);LP.MultiFileUpload.bindFileUploadCallback("fileuploadcompleted",J);if(V!=0&&typeof V!="undefined"){LP.MultiFileUpload.loadImagesByContentIdAndContentType(V,"GALLERY",K)}})},createNewGallery:function(j,l,h,n,i,k,g){var m=setGallery(j,l,h,n,i,k,g);return m},updateGallery:function(p,n,i,j,g,l,h,o,k){var m=setGallery(p,n,i,j,g,l,h,o,k);return m},}})(jQuery);
LW.googleMapsAPI=(function(C){var I="https://maps.googleapis.com/maps/api/js?client=gme-localworldlimited&v=3.exp&sensor=false",H=null,B=1000*30,E="Sorry, the Google Maps API failed to load. Please refresh the page and try again.";loadingDeferredObject=false;function A(){return(!(window.google===undefined)&&!(window.google.maps===undefined))}function F(){return !(loadingDeferredObject===false)}function G(){if(F()){loadingDeferredObject.reject({threwError:true,message:E});loadingDeferredObject=false}window.clearTimeout(H)}function D(){if(F()){loadingDeferredObject.reject({timedOut:true,message:E});loadingDeferredObject=false}}return{load:function K(){var M,L;if(A()){M=new jQuery.Deferred();M.resolve({isLoaded:true});return M}else{if(F()){return loadingDeferredObject}else{loadingDeferredObject=new jQuery.Deferred();L=document.createElement("script");L.src=I+"&callback=LW.googleMapsAPI.loadedCallback";L.onerror=function(){G()};document.body.appendChild(L);H=window.setTimeout(function(){D()},B);return loadingDeferredObject}}},loadedCallback:function J(){window.clearTimeout(H);loadingDeferredObject.resolve({isLoaded:true});loadingDeferredObject=false}}})(jQuery);
LW.hidePhoneNumber=(function(){return{init:function(){$(".hidePhoneNumber").each(function(){var B=$(this);if(B.attr("data-phoneNumberHidden")=="true"){return }B.hide();var A=$('<button class="btn btn-primary btn-xs">View Number</button>');A.click(function(){B.show();A.remove();LP.Analytics.customLinkPhoneNumberClick()});B.after(A);B.attr("data-phoneNumberHidden","true")})}}})();
LW.truncateNicely=(function(){return function A(I,H){if(I==""||!H||(H&&!H.upper)){return I}var F={append:"...",lower:0},C=$.extend(F,H);C.upper=C.upper-C.append.length;if(C.lower){C.lower=C.lower-C.append.length}if(C.upper<C.lower){C.upper=C.lower}if(I.length<=C.upper){return I}var E=I.split(/\s+/);var G="";for(var D=E.length;D>0;D--){var B=E.slice(0,D).join(" ");if(B.length<=C.upper){if(B.length>C.lower){G=B}break}}if(G==""){G=I.substr(0,C.upper)}return G+C.append}})();
LW.validation=(function(B){var A=B.fn.validate;return{init:function(){B.extend(B.fn,{validate:function(E){var D=A.call(this,E);this.on("blur","[required], .required, .js-validate-required",function(F){B(this.form).data("validator").element(this)});return D}});B.validator.setDefaults({onkeyup:function(D,E){if(B(D).is(".js-validate-ukphone, .js-validate-stripHTML")){return }else{this.element(D)}}});B.each(["required","email","url","number","digits","creditcard"],function(F,E){var D="js-validate-"+E,G={};G[E]=true;B.validator.addClassRules(D,G)});B.validator.addMethod("ukpostcode",function(F,E){var D=/^[a-zA-Z]{1,2}[0-9][0-9A-Za-z]{0,1}\s*([0-9][A-Za-z]{2}){0,1}$/;return this.optional(E)||D.test(F)},"Please enter a valid postcode.");B.validator.addClassRules("js-validate-ukpostcode",{ukpostcode:true});B.validator.addMethod("ukpostcode-complete",function(F,E){var D=/^[A-Z]([0-9]{1,2}|([A-Z][0-9]([0-9A-Z])?)|[0-9][A-Z]) ?[0-9][A-Z]{2}$/i;return this.optional(E)||D.test(F)},"Please enter a complete valid UK postcode.");B.validator.addClassRules("js-validate-ukpostcode-complete",{"ukpostcode-complete":true});B.validator.addMethod("ukphone",function(G,E){var F=G.replace(/[\+\-\(\)\.]/g,"");E.value=F;var H=/^[0-9]{8,11}$/;var D=F.replace(/\s/g,"");return this.optional(E)||H.test(D)},"Please enter a valid UK phone number.");B.validator.addClassRules("js-validate-ukphone",{ukphone:true});B.validator.addMethod("stripHTML",function(F,D){var E=F.replace(/(<([^>]+)>)/ig,"").replace(/\s{2,}/g," ");D.value=E;return true});B.validator.addClassRules("js-validate-stripHTML",{stripHTML:true});B.validator.addMethod("alphaNumericPlus",function(F,D){var E=/^[A-Za-z0-9 \-]*$/;return this.optional(D)||E.test(F)},"Please enter only letters, numbers, spaces and hyphens.");B.validator.addClassRules("js-validate-alphaNumericPlus",{alphaNumericPlus:true});jQuery.validator.addMethod("url-lw",function(F,E,G){var D=/^((http:\/\/)|(https:\/\/)|(\/\/))?([^\/\.]+\.)+[a-z]+(\/.*)?$/i;return this.optional(E)||D.test(F)},"Please enter a valid URL.");B.validator.addClassRules("js-validate-url-lw",{"url-lw":true});function C(E,F){var D="^(http:|https:)?(//)?(www.)?"+F+"/.*$";return new RegExp(D).test(E)}B.validator.addMethod("facebookUrl",function(E,D){return this.optional(D)||C(E,"facebook.com")},"Please enter a valid Facebook URL.");B.validator.addClassRules("js-validate-facebookUrl",{facebookUrl:true});B.validator.addMethod("twitterUrl",function(E,D){return this.optional(D)||C(E,"twitter.com")},"Please enter a valid Twitter URL.");B.validator.addClassRules("js-validate-twitterUrl",{twitterUrl:true})}}})(jQuery);
LW.businesssDirectoryMenu=(function(){return{init:function(){var C=$(".lvl1-Cat");var D=$(".business-landing-hero-categories");var F=$(".business-landing-hero-categories li");var B=$(".business-landing-hero-categories h4");var E=$(".business-landing-hero-allCategories");var G=$(".section__heading-allCategory");var A=$(".section__heading-popularCategory");C.on("click",function(H){F.removeClass("active");$(this).addClass("active");D.addClass("business-landing-hero-categories-bg");B.removeClass("selectedCategory");A.addClass("selectedCategory")});$(".back-to-category").on("click",function(H){F.removeClass("active");B.removeClass("selectedCategory");D.removeClass("business-landing-hero-categories-bg");H.stopPropagation();H.preventDefault()});A.on("click",function(H){if($(".business-landing-hero-categories li.active").length>0){F.removeClass("active");B.removeClass("selectedCategory");D.removeClass("business-landing-hero-categories-bg");H.stopPropagation()}else{E.addClass("hideElement");D.removeClass("business-landing-hero-categories-bg");G.removeClass("selectedCategory")}});G.on("click",function(){B.removeClass("selectedCategory");if($(".business-landing-hero-allCategories").hasClass("hideElement")){E.removeClass("hideElement");D.addClass("business-landing-hero-categories-bg");G.addClass("selectedCategory");F.removeClass("active")}else{E.addClass("hideElement");D.removeClass("business-landing-hero-categories-bg");G.removeClass("selectedCategory")}})}}})();
if(dwr==null){var dwr={}}if(dwr.engine==null){dwr.engine={}}if(DWREngine==null){var DWREngine=dwr.engine}dwr.engine.setErrorHandler=function(A){dwr.engine._errorHandler=A};dwr.engine.setWarningHandler=function(A){dwr.engine._warningHandler=A};dwr.engine.setTextHtmlHandler=function(A){dwr.engine._textHtmlHandler=A};dwr.engine.setTimeout=function(A){dwr.engine._timeout=A};dwr.engine.setPreHook=function(A){dwr.engine._preHook=A};dwr.engine.setPostHook=function(A){dwr.engine._postHook=A};dwr.engine.setHeaders=function(A){dwr.engine._headers=A};dwr.engine.setParameters=function(A){dwr.engine._parameters=A};dwr.engine.XMLHttpRequest=1;dwr.engine.IFrame=2;dwr.engine.ScriptTag=3;dwr.engine.setRpcType=function(A){if(A!=dwr.engine.XMLHttpRequest&&A!=dwr.engine.IFrame&&A!=dwr.engine.ScriptTag){dwr.engine._handleError(null,{name:"dwr.engine.invalidRpcType",message:"RpcType must be one of dwr.engine.XMLHttpRequest or dwr.engine.IFrame or dwr.engine.ScriptTag"});return }dwr.engine._rpcType=A};dwr.engine.setHttpMethod=function(A){if(A!="GET"&&A!="POST"){dwr.engine._handleError(null,{name:"dwr.engine.invalidHttpMethod",message:"Remoting method must be one of GET or POST"});return }dwr.engine._httpMethod=A};dwr.engine.setOrdered=function(A){dwr.engine._ordered=A};dwr.engine.setAsync=function(A){dwr.engine._async=A};dwr.engine.setActiveReverseAjax=function(A){if(A){if(dwr.engine._activeReverseAjax){return }dwr.engine._activeReverseAjax=true;dwr.engine._poll()}else{if(dwr.engine._activeReverseAjax&&dwr.engine._pollReq){dwr.engine._pollReq.abort()}dwr.engine._activeReverseAjax=false}};dwr.engine.defaultErrorHandler=function(B,A){dwr.engine._debug("Error: "+A.name+", "+A.message,true);if(B==null||B==""){alert("A server error has occured.")}else{if(B.indexOf("0x80040111")!=-1){dwr.engine._debug(B)}else{alert(B)}}};dwr.engine.defaultWarningHandler=function(B,A){dwr.engine._debug(B)};dwr.engine.beginBatch=function(){if(dwr.engine._batch){dwr.engine._handleError(null,{name:"dwr.engine.batchBegun",message:"Batch already begun"});return }dwr.engine._batch=dwr.engine._createBatch()};dwr.engine.endBatch=function(B){var A=dwr.engine._batch;if(A==null){dwr.engine._handleError(null,{name:"dwr.engine.batchNotBegun",message:"No batch in progress"});return }dwr.engine._batch=null;if(A.map.callCount==0){return }if(B){dwr.engine._mergeBatch(A,B)}if(dwr.engine._ordered&&dwr.engine._batchesLength!=0){dwr.engine._batchQueue[dwr.engine._batchQueue.length]=A}else{dwr.engine._sendData(A)}};dwr.engine.setPollMethod=function(A){dwr.engine.setPollType(A)};dwr.engine.setMethod=function(A){dwr.engine.setRpcType(A)};dwr.engine.setVerb=function(A){dwr.engine.setHttpMethod(A)};dwr.engine.setPollType=function(){dwr.engine._debug("Manually setting the Poll Type is not supported")};dwr.engine._origScriptSessionId="12673AE88C12F6614A2E7DEB86EA4FE6";dwr.engine._sessionCookieName="JSESSIONID";dwr.engine._allowGetForSafariButMakeForgeryEasier="true";dwr.engine._scriptTagProtection="throw 'allowScriptTagRemoting is false.';";dwr.engine._defaultPath="/dwr";dwr.engine._pollWithXhr="false";dwr.engine._scriptSessionId=null;dwr.engine._getScriptSessionId=function(){if(dwr.engine._scriptSessionId==null){dwr.engine._scriptSessionId=dwr.engine._origScriptSessionId+Math.floor(Math.random()*1000)}return dwr.engine._scriptSessionId};dwr.engine._errorHandler=dwr.engine.defaultErrorHandler;dwr.engine._warningHandler=dwr.engine.defaultWarningHandler;dwr.engine._preHook=null;dwr.engine._postHook=null;dwr.engine._batches={};dwr.engine._batchesLength=0;dwr.engine._batchQueue=[];dwr.engine._rpcType=dwr.engine.XMLHttpRequest;dwr.engine._httpMethod="POST";dwr.engine._ordered=false;dwr.engine._async=true;dwr.engine._batch=null;dwr.engine._timeout=0;dwr.engine._DOMDocument=["Msxml2.DOMDocument.6.0","Msxml2.DOMDocument.5.0","Msxml2.DOMDocument.4.0","Msxml2.DOMDocument.3.0","MSXML2.DOMDocument","MSXML.DOMDocument","Microsoft.XMLDOM"];dwr.engine._XMLHTTP=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.5.0","Msxml2.XMLHTTP.4.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"];dwr.engine._activeReverseAjax=false;dwr.engine._outstandingIFrames=[];dwr.engine._pollReq=null;dwr.engine._pollCometInterval=200;dwr.engine._pollRetries=0;dwr.engine._maxPollRetries=0;dwr.engine._textHtmlHandler=null;dwr.engine._headers=null;dwr.engine._parameters=null;dwr.engine._postSeperator="\n";dwr.engine._defaultInterceptor=function(A){return A};dwr.engine._urlRewriteHandler=dwr.engine._defaultInterceptor;dwr.engine._contentRewriteHandler=dwr.engine._defaultInterceptor;dwr.engine._replyRewriteHandler=dwr.engine._defaultInterceptor;dwr.engine._nextBatchId=0;dwr.engine._propnames=["rpcType","httpMethod","async","timeout","errorHandler","warningHandler","textHtmlHandler"];dwr.engine._partialResponseNo=0;dwr.engine._partialResponseYes=1;dwr.engine._partialResponseFlush=2;dwr.engine._execute=function(K,B,I,H){var E=false;if(dwr.engine._batch==null){dwr.engine.beginBatch();E=true}var D=dwr.engine._batch;var G=[];for(var C=0;C<arguments.length-3;C++){G[C]=arguments[C+3]}if(D.path==null){D.path=K}else{if(D.path!=K){dwr.engine._handleError(D,{name:"dwr.engine.multipleServlets",message:"Can't batch requests to multiple DWR Servlets."});return }}var A;var J=G[G.length-1];if(typeof J=="function"||J==null){A={callback:G.pop()}}else{A=G.pop()}dwr.engine._mergeBatch(D,A);D.handlers[D.map.callCount]={exceptionHandler:A.exceptionHandler,callback:A.callback};var F="c"+D.map.callCount+"-";D.map[F+"scriptName"]=B;D.map[F+"methodName"]=I;D.map[F+"id"]=D.map.callCount;for(C=0;C<G.length;C++){dwr.engine._serializeAll(D,[],G[C],F+"param"+C)}D.map.callCount++;if(E){dwr.engine.endBatch()}};dwr.engine._poll=function(){if(!dwr.engine._activeReverseAjax){return }var A=dwr.engine._createBatch();A.map.id=0;A.map.callCount=1;A.isPoll=true;if(dwr.engine._pollWithXhr=="true"){A.rpcType=dwr.engine.XMLHttpRequest;A.map.partialResponse=dwr.engine._partialResponseNo}else{if(navigator.userAgent.indexOf("Gecko/")!=-1){A.rpcType=dwr.engine.XMLHttpRequest;A.map.partialResponse=dwr.engine._partialResponseYes}else{A.rpcType=dwr.engine.XMLHttpRequest;A.map.partialResponse=dwr.engine._partialResponseNo}}A.httpMethod="POST";A.async=true;A.timeout=0;A.path=dwr.engine._defaultPath;A.preHooks=[];A.postHooks=[];A.errorHandler=dwr.engine._pollErrorHandler;A.warningHandler=dwr.engine._pollErrorHandler;A.handlers[0]={callback:function(B){dwr.engine._pollRetries=0;setTimeout("dwr.engine._poll()",B)}};dwr.engine._sendData(A);if(A.rpcType==dwr.engine.XMLHttpRequest&&A.map.partialResponse==dwr.engine._partialResponseYes){dwr.engine._checkCometPoll()}};dwr.engine._pollErrorHandler=function(B,A){dwr.engine._pollRetries++;dwr.engine._debug("Reverse Ajax poll failed (pollRetries="+dwr.engine._pollRetries+"): "+A.name+" : "+A.message);if(dwr.engine._pollRetries<dwr.engine._maxPollRetries){setTimeout("dwr.engine._poll()",10000)}else{dwr.engine._activeReverseAjax=false;dwr.engine._debug("Giving up.")}};dwr.engine._createBatch=function(){var A={map:{callCount:0,page:window.location.pathname+window.location.search,httpSessionId:dwr.engine._getJSessionId(),scriptSessionId:dwr.engine._getScriptSessionId()},charsProcessed:0,paramCount:0,parameters:{},headers:{},isPoll:false,handlers:{},preHooks:[],postHooks:[],rpcType:dwr.engine._rpcType,httpMethod:dwr.engine._httpMethod,async:dwr.engine._async,timeout:dwr.engine._timeout,errorHandler:dwr.engine._errorHandler,warningHandler:dwr.engine._warningHandler,textHtmlHandler:dwr.engine._textHtmlHandler};if(dwr.engine._preHook){A.preHooks.push(dwr.engine._preHook)}if(dwr.engine._postHook){A.postHooks.push(dwr.engine._postHook)}var C,B;if(dwr.engine._headers){for(C in dwr.engine._headers){B=dwr.engine._headers[C];if(typeof B!="function"){A.headers[C]=B}}}if(dwr.engine._parameters){for(C in dwr.engine._parameters){B=dwr.engine._parameters[C];if(typeof B!="function"){A.parameters[C]=B}}}return A};dwr.engine._mergeBatch=function(A,D){var E,C;for(var B=0;B<dwr.engine._propnames.length;B++){E=dwr.engine._propnames[B];if(D[E]!=null){A[E]=D[E]}}if(D.preHook!=null){A.preHooks.unshift(D.preHook)}if(D.postHook!=null){A.postHooks.push(D.postHook)}if(D.headers){for(E in D.headers){C=D.headers[E];if(typeof C!="function"){A.headers[E]=C}}}if(D.parameters){for(E in D.parameters){C=D.parameters[E];if(typeof C!="function"){A.map["p-"+E]=""+C}}}};dwr.engine._getJSessionId=function(){var C=document.cookie.split(";");for(var B=0;B<C.length;B++){var A=C[B];while(A.charAt(0)==" "){A=A.substring(1,A.length)}if(A.indexOf(dwr.engine._sessionCookieName+"=")==0){return A.substring(dwr.engine._sessionCookieName.length+1,A.length)}}return""};dwr.engine._checkCometPoll=function(){for(var B=0;B<dwr.engine._outstandingIFrames.length;B++){var E="";var C=dwr.engine._outstandingIFrames[B];try{E=dwr.engine._getTextFromCometIFrame(C)}catch(A){dwr.engine._handleWarning(C.batch,A)}if(E!=""){dwr.engine._processCometResponse(E,C.batch)}}if(dwr.engine._pollReq){var D=dwr.engine._pollReq;var E=D.responseText;if(E!=null){dwr.engine._processCometResponse(E,D.batch)}}if(dwr.engine._outstandingIFrames.length>0||dwr.engine._pollReq){setTimeout("dwr.engine._checkCometPoll()",dwr.engine._pollCometInterval)}};dwr.engine._getTextFromCometIFrame=function(B){var A=B.contentWindow.document.body;if(A==null){return""}var C=A.innerHTML;if(C.indexOf("<PRE>")==0||C.indexOf("<pre>")==0){C=C.substring(5,C.length-7)}return C};dwr.engine._processCometResponse=function(D,E){if(E.charsProcessed==D.length){return }if(D.length==0){E.charsProcessed=0;return }var B=D.indexOf("//#DWR-START#",E.charsProcessed);if(B==-1){E.charsProcessed=D.length;return }var A=D.lastIndexOf("//#DWR-END#");if(A==-1){return }if(D.charCodeAt(A+11)==13&&D.charCodeAt(A+12)==10){E.charsProcessed=A+13}else{E.charsProcessed=A+11}var C=D.substring(B+13,A);dwr.engine._receivedBatch=E;dwr.engine._eval(C);dwr.engine._receivedBatch=null};dwr.engine._sendData=function(E){E.map.batchId=dwr.engine._nextBatchId;dwr.engine._nextBatchId++;dwr.engine._batches[E.map.batchId]=E;dwr.engine._batchesLength++;E.completed=false;for(var D=0;D<E.preHooks.length;D++){E.preHooks[D]()}E.preHooks=null;if(E.timeout&&E.timeout!=0){E.interval=setInterval(function(){dwr.engine._abortRequest(E)},E.timeout)}if(E.rpcType==dwr.engine.XMLHttpRequest){if(window.XMLHttpRequest){E.req=new XMLHttpRequest()}else{if(window.ActiveXObject&&!(navigator.userAgent.indexOf("Mac")>=0&&navigator.userAgent.indexOf("MSIE")>=0)){E.req=dwr.engine._newActiveXObject(dwr.engine._XMLHTTP)}}}var A,C;if(E.req){if(E.async){E.req.onreadystatechange=function(){if(typeof dwr!="undefined"){dwr.engine._stateChange(E)}}}if(E.isPoll){dwr.engine._pollReq=E.req;if(!document.all){E.req.batch=E}}var B=navigator.userAgent.indexOf("Safari/");if(B>=0){var G=navigator.userAgent.substring(B+7);if(parseInt(G,10)<400){if(dwr.engine._allowGetForSafariButMakeForgeryEasier=="true"){E.httpMethod="GET"}else{dwr.engine._handleWarning(E,{name:"dwr.engine.oldSafari",message:"Safari GET support disabled. See getahead.org/dwr/server/servlet and allowGetForSafariButMakeForgeryEasier."})}}}E.mode=E.isPoll?dwr.engine._ModePlainPoll:dwr.engine._ModePlainCall;C=dwr.engine._constructRequest(E);try{E.req.open(E.httpMethod,C.url,E.async);try{for(A in E.headers){var I=E.headers[A];if(typeof I=="string"){E.req.setRequestHeader(A,I)}}if(!E.headers["Content-Type"]){E.req.setRequestHeader("Content-Type","text/plain")}}catch(H){dwr.engine._handleWarning(E,H)}E.req.send(C.body);if(!E.async){dwr.engine._stateChange(E)}}catch(H){dwr.engine._handleError(E,H)}}else{if(E.rpcType!=dwr.engine.ScriptTag){var F=E.isPoll?"dwr-if-poll-"+E.map.batchId:"dwr-if-"+E.map["c0-id"];if(E.isPoll&&window.ActiveXObject){E.htmlfile=new window.ActiveXObject("htmlfile");E.htmlfile.open();E.htmlfile.write("<html>");E.htmlfile.write("<div><iframe className='wibble' src='javascript:void(0)' id='"+F+"' name='"+F+"' onload='dwr.engine._iframeLoadingComplete("+E.map.batchId+");'></iframe></div>");E.htmlfile.write("</html>");E.htmlfile.close();E.htmlfile.parentWindow.dwr=dwr;E.document=E.htmlfile}else{E.div=document.createElement("div");document.body.appendChild(E.div);E.div.innerHTML="<iframe src='javascript:void(0)' frameborder='0' style='width:0px;height:0px;border:0;' id='"+F+"' name='"+F+"' onload='dwr.engine._iframeLoadingComplete ("+E.map.batchId+");'></iframe>";E.document=document}E.iframe=E.document.getElementById(F);E.iframe.batch=E;E.mode=E.isPoll?dwr.engine._ModeHtmlPoll:dwr.engine._ModeHtmlCall;if(E.isPoll){dwr.engine._outstandingIFrames.push(E.iframe)}C=dwr.engine._constructRequest(E);if(E.httpMethod=="GET"){E.iframe.setAttribute("src",C.url)}else{E.form=E.document.createElement("form");E.form.setAttribute("id","dwr-form");E.form.setAttribute("action",C.url);E.form.setAttribute("target",F);E.form.target=F;E.form.setAttribute("method",E.httpMethod);for(A in E.map){var I=E.map[A];if(typeof I!="function"){var J=E.document.createElement("input");J.setAttribute("type","hidden");J.setAttribute("name",A);J.setAttribute("value",I);E.form.appendChild(J)}}E.document.body.appendChild(E.form);E.form.submit()}}else{E.httpMethod="GET";E.mode=E.isPoll?dwr.engine._ModePlainPoll:dwr.engine._ModePlainCall;C=dwr.engine._constructRequest(E);E.script=document.createElement("script");E.script.id="dwr-st-"+E.map["c0-id"];E.script.src=C.url;document.body.appendChild(E.script)}}};dwr.engine._ModePlainCall="/call/plaincall/";dwr.engine._ModeHtmlCall="/call/htmlcall/";dwr.engine._ModePlainPoll="/call/plainpoll/";dwr.engine._ModeHtmlPoll="/call/htmlpoll/";dwr.engine._constructRequest=function(A){var B={url:A.path+A.mode,body:null};if(A.isPoll==true){B.url+="ReverseAjax.dwr"}else{if(A.map.callCount==1){B.url+=A.map["c0-scriptName"]+"."+A.map["c0-methodName"]+".dwr"}else{B.url+="Multiple."+A.map.callCount+".dwr"}}var D=location.href.match(/jsessionid=([^?]+)/);if(D!=null){B.url+=";jsessionid="+D[1]}var C;if(A.httpMethod=="GET"){A.map.callCount=""+A.map.callCount;B.url+="?";for(C in A.map){if(typeof A.map[C]!="function"){B.url+=encodeURIComponent(C)+"="+encodeURIComponent(A.map[C])+"&"}}B.url=B.url.substring(0,B.url.length-1)}else{B.body="";for(C in A.map){if(typeof A.map[C]!="function"){B.body+=C+"="+A.map[C]+dwr.engine._postSeperator}}B.body=dwr.engine._contentRewriteHandler(B.body)}B.url=dwr.engine._urlRewriteHandler(B.url);return B};dwr.engine._stateChange=function(C){var B;if(C.completed){dwr.engine._debug("Error: _stateChange() with batch.completed");return }var F=C.req;try{if(F.readyState!=4){return }}catch(D){dwr.engine._handleWarning(C,D);dwr.engine._clearUp(C);return }try{var E=F.responseText;E=dwr.engine._replyRewriteHandler(E);var A=F.status;if(E==null||E==""){dwr.engine._handleWarning(C,{name:"dwr.engine.missingData",message:"No data received from server"})}else{if(A!=200){dwr.engine._handleError(C,{name:"dwr.engine.http."+A,message:F.statusText})}else{var G=F.getResponseHeader("Content-Type");if(!G.match(/^text\/plain/)&&!G.match(/^text\/javascript/)){if(G.match(/^text\/html/)&&typeof C.textHtmlHandler=="function"){C.textHtmlHandler({status:A,responseText:E,contentType:G})}else{dwr.engine._handleWarning(C,{name:"dwr.engine.invalidMimeType",message:"Invalid content type: '"+G+"'"})}}else{if(C.isPoll&&C.map.partialResponse==dwr.engine._partialResponseYes){dwr.engine._processCometResponse(E,C)}else{if(E.search("//#DWR")==-1){dwr.engine._handleWarning(C,{name:"dwr.engine.invalidReply",message:"Invalid reply from server"})}else{B=E}}}}}}catch(D){dwr.engine._handleWarning(C,D)}dwr.engine._callPostHooks(C);dwr.engine._receivedBatch=C;if(B!=null){B=B.replace(dwr.engine._scriptTagProtection,"")}dwr.engine._eval(B);dwr.engine._receivedBatch=null;dwr.engine._validateBatch(C);dwr.engine._clearUp(C)};dwr.engine._validateBatch=function(A){if(!A.completed){for(var B=0;B<A.map.callCount;B++){if(A.handlers[B]!=null){dwr.engine._handleWarning(A,{name:"dwr.engine.incompleteReply",message:"Incomplete reply from server"});break}}}};dwr.engine._iframeLoadingComplete=function(A){var B=dwr.engine._batches[A];if(B){dwr.engine._validateBatch(B)}};dwr.engine._remoteHandleCallback=function(A,F,E){var C=dwr.engine._batches[A];if(C==null){dwr.engine._debug("Warning: batch == null in remoteHandleCallback for batchId="+A,true);return }try{var B=C.handlers[F];C.handlers[F]=null;if(!B){dwr.engine._debug("Warning: Missing handlers. callId="+F,true)}else{if(typeof B.callback=="function"){B.callback(E)}}}catch(D){dwr.engine._handleError(C,D)}};dwr.engine._remoteHandleException=function(A,E,D){var C=dwr.engine._batches[A];if(C==null){dwr.engine._debug("Warning: null batch in remoteHandleException",true);return }var B=C.handlers[E];C.handlers[E]=null;if(B==null){dwr.engine._debug("Warning: null handlers in remoteHandleException",true);return }if(D.message==undefined){D.message=""}if(typeof B.exceptionHandler=="function"){B.exceptionHandler(D.message,D)}else{if(typeof C.errorHandler=="function"){C.errorHandler(D.message,D)}}};dwr.engine._remoteHandleBatchException=function(C,A){var B=(dwr.engine._receivedBatch==null&&A!=null);if(B){dwr.engine._receivedBatch=dwr.engine._batches[A]}if(C.message==undefined){C.message=""}dwr.engine._handleError(dwr.engine._receivedBatch,C);if(B){dwr.engine._receivedBatch=null;dwr.engine._clearUp(dwr.engine._batches[A])}};dwr.engine._remotePollCometDisabled=function(C,A){dwr.engine.setActiveReverseAjax(false);var B=(dwr.engine._receivedBatch==null&&A!=null);if(B){dwr.engine._receivedBatch=dwr.engine._batches[A]}if(C.message==undefined){C.message=""}dwr.engine._handleError(dwr.engine._receivedBatch,C);if(B){dwr.engine._receivedBatch=null;dwr.engine._clearUp(dwr.engine._batches[A])}};dwr.engine._remoteBeginIFrameResponse=function(B,A){if(B!=null){dwr.engine._receivedBatch=B.batch}dwr.engine._callPostHooks(dwr.engine._receivedBatch)};dwr.engine._remoteEndIFrameResponse=function(A){dwr.engine._clearUp(dwr.engine._receivedBatch);dwr.engine._receivedBatch=null};dwr.engine._eval=function(script){if(script==null){return null}if(script==""){dwr.engine._debug("Warning: blank script",true);return null}return eval(script)};dwr.engine._abortRequest=function(A){if(A&&!A.completed){clearInterval(A.interval);dwr.engine._clearUp(A);if(A.req){A.req.abort()}dwr.engine._handleError(A,{name:"dwr.engine.timeout",message:"Timeout"})}};dwr.engine._callPostHooks=function(A){if(A.postHooks){for(var B=0;B<A.postHooks.length;B++){A.postHooks[B]()}A.postHooks=null}};dwr.engine._clearUp=function(B){if(!B){dwr.engine._debug("Warning: null batch in dwr.engine._clearUp()",true);return }if(B.completed=="true"){dwr.engine._debug("Warning: Double complete",true);return }if(B.div){B.div.parentNode.removeChild(B.div)}if(B.iframe){for(var C=0;C<dwr.engine._outstandingIFrames.length;C++){if(dwr.engine._outstandingIFrames[C]==B.iframe){dwr.engine._outstandingIFrames.splice(C,1)}}B.iframe.parentNode.removeChild(B.iframe)}if(B.form){B.form.parentNode.removeChild(B.form)}if(B.req){if(B.req==dwr.engine._pollReq){dwr.engine._pollReq=null}delete B.req}if(B.map&&(B.map.batchId||B.map.batchId==0)){delete dwr.engine._batches[B.map.batchId];dwr.engine._batchesLength--}B.completed=true;if(dwr.engine._batchQueue.length!=0){var A=dwr.engine._batchQueue.shift();dwr.engine._sendData(A)}};dwr.engine._handleError=function(A,B){if(typeof B=="string"){B={name:"unknown",message:B}}if(B.message==null){B.message=""}if(B.name==null){B.name="unknown"}if(A&&typeof A.errorHandler=="function"){A.errorHandler(B.message,B)}else{if(dwr.engine._errorHandler){dwr.engine._errorHandler(B.message,B)}}if(A){dwr.engine._clearUp(A)}};dwr.engine._handleWarning=function(A,B){if(typeof B=="string"){B={name:"unknown",message:B}}if(B.message==null){B.message=""}if(B.name==null){B.name="unknown"}if(A&&typeof A.warningHandler=="function"){A.warningHandler(B.message,B)}else{if(dwr.engine._warningHandler){dwr.engine._warningHandler(B.message,B)}}if(A){dwr.engine._clearUp(A)}};dwr.engine._serializeAll=function(B,D,C,A){if(C==null){B.map[A]="null:null";return }switch(typeof C){case"boolean":B.map[A]="boolean:"+C;break;case"number":B.map[A]="number:"+C;break;case"string":B.map[A]="string:"+encodeURIComponent(C);break;case"object":if(C instanceof String){B.map[A]="String:"+encodeURIComponent(C)}else{if(C instanceof Boolean){B.map[A]="Boolean:"+C}else{if(C instanceof Number){B.map[A]="Number:"+C}else{if(C instanceof Date){B.map[A]="Date:"+C.getTime()}else{if(C&&C.join){B.map[A]=dwr.engine._serializeArray(B,D,C,A)}else{B.map[A]=dwr.engine._serializeObject(B,D,C,A)}}}}}break;case"function":break;default:dwr.engine._handleWarning(null,{name:"dwr.engine.unexpectedType",message:"Unexpected type: "+typeof C+", attempting default converter."});B.map[A]="default:"+C;break}};dwr.engine._lookup=function(E,C,A){var D;for(var B=0;B<E.length;B++){if(E[B].data==C){D=E[B];break}}if(D){return"reference:"+D.name}E.push({data:C,name:A});return null};dwr.engine._serializeObject=function(C,H,G,B){var F=dwr.engine._lookup(H,G,B);if(F){return F}if(G.nodeName&&G.nodeType){return dwr.engine._serializeXml(C,H,G,B)}var E="Object_"+dwr.engine._getObjectClassName(G)+":{";var D;for(D in G){if(typeof G[D]!="function"){C.paramCount++;var A="c"+dwr.engine._batch.map.callCount+"-e"+C.paramCount;dwr.engine._serializeAll(C,H,G[D],A);E+=encodeURIComponent(D)+":reference:"+A+", "}}if(E.substring(E.length-2)==", "){E=E.substring(0,E.length-2)}E+="}";return E};dwr.engine._errorClasses={Error:Error,EvalError:EvalError,RangeError:RangeError,ReferenceError:ReferenceError,SyntaxError:SyntaxError,TypeError:TypeError,URIError:URIError};dwr.engine._getObjectClassName=function(C){if(C&&C.constructor&&C.constructor.toString){var D=C.constructor.toString();var A=D.match(/function\s+(\w+)/);if(A&&A.length==2){return A[1]}}if(C&&C.constructor){for(var B in dwr.engine._errorClasses){if(C.constructor==dwr.engine._errorClasses[B]){return B}}}if(C){var D=Object.prototype.toString.call(C);var A=D.match(/\[object\s+(\w+)/);if(A&&A.length==2){return A[1]}}return"Object"};dwr.engine._serializeXml=function(C,F,E,B){var D=dwr.engine._lookup(F,E,B);if(D){return D}var A;if(window.XMLSerializer){A=new XMLSerializer().serializeToString(E)}else{if(E.toXml){A=E.toXml}else{A=E.innerHTML}}return"XML:"+encodeURIComponent(A)};dwr.engine._serializeArray=function(C,H,G,B){var F=dwr.engine._lookup(H,G,B);if(F){return F}var E="Array:[";for(var D=0;D<G.length;D++){if(D!=0){E+=","}C.paramCount++;var A="c"+dwr.engine._batch.map.callCount+"-e"+C.paramCount;dwr.engine._serializeAll(C,H,G[D],A);E+="reference:";E+=A}E+="]";return E};dwr.engine._unserializeDocument=function(A){var C;if(window.DOMParser){var E=new DOMParser();C=E.parseFromString(A,"text/xml");if(!C.documentElement||C.documentElement.tagName=="parsererror"){var B=C.documentElement.firstChild.data;B+="\n"+C.documentElement.firstChild.nextSibling.firstChild.data;throw B}return C}else{if(window.ActiveXObject){C=dwr.engine._newActiveXObject(dwr.engine._DOMDocument);C.loadXML(A);return C}else{var D=document.createElement("div");D.innerHTML=A;return D}}};dwr.engine._newActiveXObject=function(A){var D;for(var C=0;C<A.length;C++){try{D=new ActiveXObject(A[C]);break}catch(B){}}return D};dwr.engine._debug=function(F,D){var A=false;try{if(window.console){if(D&&window.console.trace){window.console.trace()}window.console.log(F);A=true}else{if(window.opera&&window.opera.postError){window.opera.postError(F);A=true}}}catch(C){}if(!A){var B=document.getElementById("dwr-debug");if(B){var E=F+"<br/>"+B.innerHTML;if(E.length>2048){E=E.substring(0,2048)}B.innerHTML=E}}};
if(dwr==null){var dwr={}}if(dwr.engine==null){dwr.engine={}}if(DWREngine==null){var DWREngine=dwr.engine}if(AjaxBusinessHelper==null){var AjaxBusinessHelper={}}AjaxBusinessHelper._path="/dwr";AjaxBusinessHelper.getChildBusinessCategories=function(B,A){dwr.engine._execute(AjaxBusinessHelper._path,"AjaxBusinessHelper","getChildBusinessCategories",B,A)};AjaxBusinessHelper.getBusinessMatchingPostcode=function(B,A){dwr.engine._execute(AjaxBusinessHelper._path,"AjaxBusinessHelper","getBusinessMatchingPostcode",B,A)};AjaxBusinessHelper.getRelatedBusinessesForCategory=function(B,A){dwr.engine._execute(AjaxBusinessHelper._path,"AjaxBusinessHelper","getRelatedBusinessesForCategory",B,A)};AjaxBusinessHelper.sendContactUsMessage=function(B,A){dwr.engine._execute(AjaxBusinessHelper._path,"AjaxBusinessHelper","sendContactUsMessage",B,A)};
if(dwr==null){var dwr={}}if(dwr.engine==null){dwr.engine={}}if(DWREngine==null){var DWREngine=dwr.engine}if(AjaxBusinessReviewHelper==null){var AjaxBusinessReviewHelper={}}AjaxBusinessReviewHelper._path="/dwr";AjaxBusinessReviewHelper.submitNewBusinessReview=function(C,A,B){dwr.engine._execute(AjaxBusinessReviewHelper._path,"AjaxBusinessReviewHelper","submitNewBusinessReview",C,A,B)};AjaxBusinessReviewHelper.getBusinessReviewAfterReg=function(A){dwr.engine._execute(AjaxBusinessReviewHelper._path,"AjaxBusinessReviewHelper","getBusinessReviewAfterReg",A)};AjaxBusinessReviewHelper.commentReview=function(C,A,B){dwr.engine._execute(AjaxBusinessReviewHelper._path,"AjaxBusinessReviewHelper","commentReview",C,A,B)};AjaxBusinessReviewHelper.commentReviewAfterReg=function(A){dwr.engine._execute(AjaxBusinessReviewHelper._path,"AjaxBusinessReviewHelper","commentReviewAfterReg",A)};
if(dwr==null){var dwr={}}if(dwr.engine==null){dwr.engine={}}if(DWREngine==null){var DWREngine=dwr.engine}if(AjaxBusinessVoucherHelper==null){var AjaxBusinessVoucherHelper={}}AjaxBusinessVoucherHelper._path="/dwr";AjaxBusinessVoucherHelper.redeemVoucher=function(B,A){dwr.engine._execute(AjaxBusinessVoucherHelper._path,"AjaxBusinessVoucherHelper","redeemVoucher",B,A)};AjaxBusinessVoucherHelper.webRedeemVoucher=function(B,A){dwr.engine._execute(AjaxBusinessVoucherHelper._path,"AjaxBusinessVoucherHelper","webRedeemVoucher",B,A)};AjaxBusinessVoucherHelper.removeBusinessVoucher=function(C,A,B){dwr.engine._execute(AjaxBusinessVoucherHelper._path,"AjaxBusinessVoucherHelper","removeBusinessVoucher",C,A,B)};AjaxBusinessVoucherHelper.removeBusinessVoucherAfterReg=function(A){dwr.engine._execute(AjaxBusinessVoucherHelper._path,"AjaxBusinessVoucherHelper","removeBusinessVoucherAfterReg",A)};
if(dwr==null){var dwr={}}if(dwr.engine==null){dwr.engine={}}if(DWREngine==null){var DWREngine=dwr.engine}if(AjaxCommentHelper==null){var AjaxCommentHelper={}}AjaxCommentHelper._path="/dwr";AjaxCommentHelper.addRating=function(B,A){dwr.engine._execute(AjaxCommentHelper._path,"AjaxCommentHelper","addRating",B,A)};AjaxCommentHelper.addComment=function(C,A,B){dwr.engine._execute(AjaxCommentHelper._path,"AjaxCommentHelper","addComment",C,A,B)};AjaxCommentHelper.addCommentAfterReg=function(A){dwr.engine._execute(AjaxCommentHelper._path,"AjaxCommentHelper","addCommentAfterReg",A)};
if(dwr==null){var dwr={}}if(dwr.engine==null){dwr.engine={}}if(DWREngine==null){var DWREngine=dwr.engine}if(AjaxCommentListHelper==null){var AjaxCommentListHelper={}}AjaxCommentListHelper._path="/dwr";AjaxCommentListHelper.getAllLiveComments=function(D,B,A,C){dwr.engine._execute(AjaxCommentListHelper._path,"AjaxCommentListHelper","getAllLiveComments",D,B,A,C)};AjaxCommentListHelper.getSortedComments=function(E,C,B,A,D){dwr.engine._execute(AjaxCommentListHelper._path,"AjaxCommentListHelper","getSortedComments",E,C,B,A,D)};
if(dwr==null){var dwr={}}if(dwr.engine==null){dwr.engine={}}if(DWREngine==null){var DWREngine=dwr.engine}if(AjaxCreateGroupHelper==null){var AjaxCreateGroupHelper={}}AjaxCreateGroupHelper._path="/dwr";AjaxCreateGroupHelper.createNewGroup=function(B,A){dwr.engine._execute(AjaxCreateGroupHelper._path,"AjaxCreateGroupHelper","createNewGroup",B,A)};
if(dwr==null){var dwr={}}if(dwr.engine==null){dwr.engine={}}if(DWREngine==null){var DWREngine=dwr.engine}if(AjaxFollowUserHelper==null){var AjaxFollowUserHelper={}}AjaxFollowUserHelper._path="/dwr";AjaxFollowUserHelper.followUser=function(C,A,B){dwr.engine._execute(AjaxFollowUserHelper._path,"AjaxFollowUserHelper","followUser",C,A,B)};AjaxFollowUserHelper.unFollowUser=function(C,A,B){dwr.engine._execute(AjaxFollowUserHelper._path,"AjaxFollowUserHelper","unFollowUser",C,A,B)};AjaxFollowUserHelper.followUserAfterReg=function(A){dwr.engine._execute(AjaxFollowUserHelper._path,"AjaxFollowUserHelper","followUserAfterReg",A)};AjaxFollowUserHelper.blockUser=function(B,A){dwr.engine._execute(AjaxFollowUserHelper._path,"AjaxFollowUserHelper","blockUser",B,A)};AjaxFollowUserHelper.unblockUser=function(B,A){dwr.engine._execute(AjaxFollowUserHelper._path,"AjaxFollowUserHelper","unblockUser",B,A)};
if(dwr==null){var dwr={}}if(dwr.engine==null){dwr.engine={}}if(DWREngine==null){var DWREngine=dwr.engine}if(AjaxGalleryHelper==null){var AjaxGalleryHelper={}}AjaxGalleryHelper._path="/dwr";AjaxGalleryHelper.createGallery=function(B,A){dwr.engine._execute(AjaxGalleryHelper._path,"AjaxGalleryHelper","createGallery",B,A)};
if(dwr==null){var dwr={}}if(dwr.engine==null){dwr.engine={}}if(DWREngine==null){var DWREngine=dwr.engine}if(AjaxInviteEmailsHelper==null){var AjaxInviteEmailsHelper={}}AjaxInviteEmailsHelper._path="/dwr";AjaxInviteEmailsHelper.sendInviteEmails=function(B,A){dwr.engine._execute(AjaxInviteEmailsHelper._path,"AjaxInviteEmailsHelper","sendInviteEmails",B,A)};
if(dwr==null){var dwr={}}if(dwr.engine==null){dwr.engine={}}if(DWREngine==null){var DWREngine=dwr.engine}if(AjaxJoinGroupHelper==null){var AjaxJoinGroupHelper={}}AjaxJoinGroupHelper._path="/dwr";AjaxJoinGroupHelper.joinGroup=function(D,B,A,C){dwr.engine._execute(AjaxJoinGroupHelper._path,"AjaxJoinGroupHelper","joinGroup",D,B,A,C)};AjaxJoinGroupHelper.leaveGroup=function(D,B,A,C){dwr.engine._execute(AjaxJoinGroupHelper._path,"AjaxJoinGroupHelper","leaveGroup",D,B,A,C)};AjaxJoinGroupHelper.joinGroupAfterReg=function(A){dwr.engine._execute(AjaxJoinGroupHelper._path,"AjaxJoinGroupHelper","joinGroupAfterReg",A)};
if(dwr==null){var dwr={}}if(dwr.engine==null){dwr.engine={}}if(DWREngine==null){var DWREngine=dwr.engine}if(AjaxLogoutHelper==null){var AjaxLogoutHelper={}}AjaxLogoutHelper._path="/dwr";AjaxLogoutHelper.logout=function(A){dwr.engine._execute(AjaxLogoutHelper._path,"AjaxLogoutHelper","logout",A)};
if(dwr==null){var dwr={}}if(dwr.engine==null){dwr.engine={}}if(DWREngine==null){var DWREngine=dwr.engine}if(AjaxNavigationHelper==null){var AjaxNavigationHelper={}}AjaxNavigationHelper._path="/dwr";AjaxNavigationHelper.getSecondNavigationCounts=function(A){dwr.engine._execute(AjaxNavigationHelper._path,"AjaxNavigationHelper","getSecondNavigationCounts",A)};
if(dwr==null){var dwr={}}if(dwr.engine==null){dwr.engine={}}if(DWREngine==null){var DWREngine=dwr.engine}if(AjaxPostThreadHelper==null){var AjaxPostThreadHelper={}}AjaxPostThreadHelper._path="/dwr";AjaxPostThreadHelper.determineRedirect=function(C,A,B){dwr.engine._execute(AjaxPostThreadHelper._path,"AjaxPostThreadHelper","determineRedirect",C,A,B)};AjaxPostThreadHelper.createDiscussion=function(E,C,B,A,D){dwr.engine._execute(AjaxPostThreadHelper._path,"AjaxPostThreadHelper","createDiscussion",E,C,B,A,D)};AjaxPostThreadHelper.getContentAfterReg=function(A){dwr.engine._execute(AjaxPostThreadHelper._path,"AjaxPostThreadHelper","getContentAfterReg",A)};AjaxPostThreadHelper.createContent=function(C,A,B){dwr.engine._execute(AjaxPostThreadHelper._path,"AjaxPostThreadHelper","createContent",C,A,B)};AjaxPostThreadHelper.saveImages=function(C,A,B){dwr.engine._execute(AjaxPostThreadHelper._path,"AjaxPostThreadHelper","saveImages",C,A,B)};AjaxPostThreadHelper.saveEventImages=function(C,A,B){dwr.engine._execute(AjaxPostThreadHelper._path,"AjaxPostThreadHelper","saveEventImages",C,A,B)};AjaxPostThreadHelper.getInclude=function(B,A){dwr.engine._execute(AjaxPostThreadHelper._path,"AjaxPostThreadHelper","getInclude",B,A)};AjaxPostThreadHelper.getBusinessCategories=function(A){dwr.engine._execute(AjaxPostThreadHelper._path,"AjaxPostThreadHelper","getBusinessCategories",A)};AjaxPostThreadHelper.getBusinessesForCategory=function(B,A){dwr.engine._execute(AjaxPostThreadHelper._path,"AjaxPostThreadHelper","getBusinessesForCategory",B,A)};
if(dwr==null){var dwr={}}if(dwr.engine==null){dwr.engine={}}if(DWREngine==null){var DWREngine=dwr.engine}if(AjaxRatingHelper==null){var AjaxRatingHelper={}}AjaxRatingHelper._path="/dwr";AjaxRatingHelper.rateContent=function(D,B,A,C){dwr.engine._execute(AjaxRatingHelper._path,"AjaxRatingHelper","rateContent",D,B,A,C)};AjaxRatingHelper.rateContentAfterReg=function(A){dwr.engine._execute(AjaxRatingHelper._path,"AjaxRatingHelper","rateContentAfterReg",A)};
if(dwr==null){var dwr={}}if(dwr.engine==null){dwr.engine={}}if(DWREngine==null){var DWREngine=dwr.engine}if(AjaxReportAbuseHelper==null){var AjaxReportAbuseHelper={}}AjaxReportAbuseHelper._path="/dwr";AjaxReportAbuseHelper.reportAbuse=function(B,A){dwr.engine._execute(AjaxReportAbuseHelper._path,"AjaxReportAbuseHelper","reportAbuse",B,A)};
if(dwr==null){var dwr={}}if(dwr.engine==null){dwr.engine={}}if(DWREngine==null){var DWREngine=dwr.engine}if(AjaxSocialPublishingHelper==null){var AjaxSocialPublishingHelper={}}AjaxSocialPublishingHelper._path="/dwr";AjaxSocialPublishingHelper.displaySocialPublishingPrompt=function(A){dwr.engine._execute(AjaxSocialPublishingHelper._path,"AjaxSocialPublishingHelper","displaySocialPublishingPrompt",A)};AjaxSocialPublishingHelper.disableSocialPublishingPrompt=function(A){dwr.engine._execute(AjaxSocialPublishingHelper._path,"AjaxSocialPublishingHelper","disableSocialPublishingPrompt",A)};AjaxSocialPublishingHelper.getSocialNetworksConfigured=function(A){dwr.engine._execute(AjaxSocialPublishingHelper._path,"AjaxSocialPublishingHelper","getSocialNetworksConfigured",A)};
if(dwr==null){var dwr={}}if(dwr.engine==null){dwr.engine={}}if(DWREngine==null){var DWREngine=dwr.engine}if(AjaxSpellCheckerHelper==null){var AjaxSpellCheckerHelper={}}AjaxSpellCheckerHelper._path="/dwr";AjaxSpellCheckerHelper.getSpellCheckSuggestions=function(B,A){dwr.engine._execute(AjaxSpellCheckerHelper._path,"AjaxSpellCheckerHelper","getSpellCheckSuggestions",B,A)};
if(dwr==null){var dwr={}}if(dwr.engine==null){dwr.engine={}}if(DWREngine==null){var DWREngine=dwr.engine}if(AjaxUserHelper==null){var AjaxUserHelper={}}AjaxUserHelper._path="/dwr";AjaxUserHelper.getUserDetails=function(A){dwr.engine._execute(AjaxUserHelper._path,"AjaxUserHelper","getUserDetails",A)};AjaxUserHelper.synchronizeUserProfile=function(A){dwr.engine._execute(AjaxUserHelper._path,"AjaxUserHelper","synchronizeUserProfile",A)};
if(dwr==null){var dwr={}}if(dwr.engine==null){dwr.engine={}}if(DWREngine==null){var DWREngine=dwr.engine}if(AjaxValidationHelper==null){var AjaxValidationHelper={}}AjaxValidationHelper._path="/dwr";AjaxValidationHelper.validateContent=function(C,A,B){dwr.engine._execute(AjaxValidationHelper._path,"AjaxValidationHelper","validateContent",C,A,B)};AjaxValidationHelper.validateComment=function(C,A,B){dwr.engine._execute(AjaxValidationHelper._path,"AjaxValidationHelper","validateComment",C,A,B)};AjaxValidationHelper.validateReportAbuse=function(B,A){dwr.engine._execute(AjaxValidationHelper._path,"AjaxValidationHelper","validateReportAbuse",B,A)};AjaxValidationHelper.validateBusinessContactUsMessage=function(B,A){dwr.engine._execute(AjaxValidationHelper._path,"AjaxValidationHelper","validateBusinessContactUsMessage",B,A)};AjaxValidationHelper.validateVoucherSubmission=function(B,A){dwr.engine._execute(AjaxValidationHelper._path,"AjaxValidationHelper","validateVoucherSubmission",B,A)};AjaxValidationHelper.validateRequest=function(B,A){dwr.engine._execute(AjaxValidationHelper._path,"AjaxValidationHelper","validateRequest",B,A)};AjaxValidationHelper.validateBusinessReview=function(C,A,B){dwr.engine._execute(AjaxValidationHelper._path,"AjaxValidationHelper","validateBusinessReview",C,A,B)};AjaxValidationHelper.validateCommentReview=function(B,A){dwr.engine._execute(AjaxValidationHelper._path,"AjaxValidationHelper","validateCommentReview",B,A)};AjaxValidationHelper.validateGroupVO=function(C,A,B){dwr.engine._execute(AjaxValidationHelper._path,"AjaxValidationHelper","validateGroupVO",C,A,B)};AjaxValidationHelper.validateImageUploadVO=function(C,A,B){dwr.engine._execute(AjaxValidationHelper._path,"AjaxValidationHelper","validateImageUploadVO",C,A,B)};
if(dwr==null){var dwr={}}if(dwr.engine==null){dwr.engine={}}if(DWREngine==null){var DWREngine=dwr.engine}if(AjaxWhatsHappeningHelper==null){var AjaxWhatsHappeningHelper={}}AjaxWhatsHappeningHelper._path="/dwr";AjaxWhatsHappeningHelper.getContentAfterReg=function(A){dwr.engine._execute(AjaxWhatsHappeningHelper._path,"AjaxWhatsHappeningHelper","getContentAfterReg",A)};AjaxWhatsHappeningHelper.determineRedirectForRepost=function(C,A,B){dwr.engine._execute(AjaxWhatsHappeningHelper._path,"AjaxWhatsHappeningHelper","determineRedirectForRepost",C,A,B)};AjaxWhatsHappeningHelper.repostActivity=function(B,A){dwr.engine._execute(AjaxWhatsHappeningHelper._path,"AjaxWhatsHappeningHelper","repostActivity",B,A)};
if(dwr==null){var dwr={}}if(dwr.engine==null){dwr.engine={}}if(DWREngine==null){var DWREngine=dwr.engine}if(PollAjaxController==null){var PollAjaxController={}}PollAjaxController._path="/dwr";PollAjaxController.getResult=function(B,A){dwr.engine._execute(PollAjaxController._path,"PollAjaxController","getResult",B,A)};PollAjaxController.isAlreadyVoted=function(B,A){dwr.engine._execute(PollAjaxController._path,"PollAjaxController","isAlreadyVoted",B,A)};PollAjaxController.vote=function(C,A,B){dwr.engine._execute(PollAjaxController._path,"PollAjaxController","vote",C,A,B)};
if(dwr==null){var dwr={}}if(dwr.engine==null){dwr.engine={}}if(DWREngine==null){var DWREngine=dwr.engine}if(AjaxLikeThisHelper==null){var AjaxLikeThisHelper={}}AjaxLikeThisHelper._path="/dwr";AjaxLikeThisHelper.likeThis=function(C,A,B){dwr.engine._execute(AjaxLikeThisHelper._path,"AjaxLikeThisHelper","likeThis",C,A,B)};
if(dwr==null){var dwr={}}if(dwr.engine==null){dwr.engine={}}if(DWREngine==null){var DWREngine=dwr.engine}if(AjaxPaginationHelper==null){var AjaxPaginationHelper={}}AjaxPaginationHelper._path="/dwr";AjaxPaginationHelper.getPaginatedResults=function(B,A){dwr.engine._execute(AjaxPaginationHelper._path,"AjaxPaginationHelper","getPaginatedResults",B,A)};
if(dwr==null){var dwr={}}if(dwr.engine==null){dwr.engine={}}if(DWREngine==null){var DWREngine=dwr.engine}if(AjaxPollHelper==null){var AjaxPollHelper={}}AjaxPollHelper._path="/dwr";AjaxPollHelper.registerVote=function(B,A){dwr.engine._execute(AjaxPollHelper._path,"AjaxPollHelper","registerVote",B,A)};AjaxPollHelper.getPollData=function(B,A){dwr.engine._execute(AjaxPollHelper._path,"AjaxPollHelper","getPollData",B,A)};
if(dwr==null){var dwr={}}if(dwr.engine==null){dwr.engine={}}if(DWREngine==null){var DWREngine=dwr.engine}if(AjaxImageHelper==null){var AjaxImageHelper={}}AjaxImageHelper._path="/dwr";AjaxImageHelper.updateImage=function(B,A){dwr.engine._execute(AjaxImageHelper._path,"AjaxImageHelper","updateImage",B,A)};
