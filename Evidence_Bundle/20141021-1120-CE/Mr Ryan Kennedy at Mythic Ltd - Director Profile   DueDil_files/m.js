var JSON;JSON||(JSON={}),function(){"use strict";function f(e){return e<10?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return typeof t=="string"?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,r,i,s,o=gap,u,a=t[e];a&&typeof a=="object"&&typeof a.toJSON=="function"&&(a=a.toJSON(e)),typeof rep=="function"&&(a=rep.call(t,e,a));switch(typeof a){case"string":return quote(a);case"number":return isFinite(a)?String(a):"null";case"boolean":case"null":return String(a);case"object":if(!a)return"null";gap+=indent,u=[];if(Object.prototype.toString.apply(a)==="[object Array]"){s=a.length;for(n=0;n<s;n+=1)u[n]=str(n,a)||"null";return i=u.length===0?"[]":gap?"[\n"+gap+u.join(",\n"+gap)+"\n"+o+"]":"["+u.join(",")+"]",gap=o,i}if(rep&&typeof rep=="object"){s=rep.length;for(n=0;n<s;n+=1)typeof rep[n]=="string"&&(r=rep[n],i=str(r,a),i&&u.push(quote(r)+(gap?": ":":")+i))}else for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&(i=str(r,a),i&&u.push(quote(r)+(gap?": ":":")+i));return i=u.length===0?"{}":gap?"{\n"+gap+u.join(",\n"+gap)+"\n"+o+"}":"{"+u.join(",")+"}",gap=o,i}}typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(e){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(e){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;typeof JSON.stringify!="function"&&(JSON.stringify=function(e,t,n){var r;gap="",indent="";if(typeof n=="number")for(r=0;r<n;r+=1)indent+=" ";else typeof n=="string"&&(indent=n);rep=t;if(!t||typeof t=="function"||typeof t=="object"&&typeof t.length=="number")return str("",{"":e});throw new Error("JSON.stringify")}),typeof JSON.parse!="function"&&(JSON.parse=function(text,reviver){function walk(e,t){var n,r,i=e[t];if(i&&typeof i=="object")for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(r=walk(i,n),r!==undefined?i[n]=r:delete i[n]);return reviver.call(e,t,i)}var j;text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),typeof reviver=="function"?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),Array.prototype.toJSON&&delete Array.prototype.toJSON,Date.now||(Date.now=function(){return(new Date).valueOf()});var EmailChecker={check:function(e){return e==null?!1:(e=e.toString(),e.indexOf(".")>2&&e.indexOf("@")>0)}};Array.prototype.indexOf||(Array.prototype.indexOf=function(e){"use strict";if(this==null)throw new TypeError;var t=Object(this),n=t.length>>>0;if(n===0)return-1;var r=0;arguments.length>1&&(r=Number(arguments[1]),r!=r?r=0:r!=0&&r!=Infinity&&r!=-Infinity&&(r=(r>0||-1)*Math.floor(Math.abs(r))));if(r>=n)return-1;var i=r>=0?r:Math.max(n-Math.abs(r),0);for(;i<n;i++)if(i in t&&t[i]===e)return i;return-1}),Array.prototype.map||(Array.prototype.map=function(e,t){var n,r,i;if(this==null)throw new TypeError(" this is null or not defined");var s=Object(this),o=s.length>>>0;if(typeof e!="function")throw new TypeError(e+" is not a function");t&&(n=t),r=new Array(o),i=0;while(i<o){var u,a;i in s&&(u=s[i],a=e.call(n,u,i,s),r[i]=a),i++}return r}),Array.prototype.filter||(Array.prototype.filter=function(e){"use strict";if(this==null)throw new TypeError;var t=Object(this),n=t.length>>>0;if(typeof e!="function")throw new TypeError;var r=[],i=arguments[1];for(var s=0;s<n;s++)if(s in t){var o=t[s];e.call(i,o,s,t)&&r.push(o)}return r});var QueryString=function(){var e={},t=window.location.search.substring(1),n=t.split("&");for(var r=0;r<n.length;r++){var i=n[r].split("=");if(typeof e[i[0]]=="undefined")e[i[0]]=i[1];else if(typeof e[i[0]]=="string"){var s=[e[i[0]],i[1]];e[i[0]]=s}else e[i[0]].push(i[1])}return e}(),Cookies={create:function(e,t,n,r){if(n){var i=new Date;i.setTime(i.getTime()+n*24*60*60*1e3);var s="; expires="+i.toGMTString()}else var s="";if(r==null)var o=e+"="+t+s+"; path=/";else var o=e+"="+t+s+"; path=/; domain=."+r+";";document.cookie=o},read:function(e){var t=e+"=",n=document.cookie.split(";");for(var r=0;r<n.length;r++){var i=n[r];while(i.charAt(0)==" ")i=i.substring(1,i.length);if(i.indexOf(t)==0)return i.substring(t.length,i.length)}return null},destroy:function(e){Cookies.create(e,"",-1)}},Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){var t="",n,r,i,s,o,u,a,f=0;e=Base64._utf8_encode(e);while(f<e.length)n=e.charCodeAt(f++),r=e.charCodeAt(f++),i=e.charCodeAt(f++),s=n>>2,o=(n&3)<<4|r>>4,u=(r&15)<<2|i>>6,a=i&63,isNaN(r)?u=a=64:isNaN(i)&&(a=64),t=t+Base64._keyStr.charAt(s)+Base64._keyStr.charAt(o)+Base64._keyStr.charAt(u)+Base64._keyStr.charAt(a);return t},decode:function(e){var t="",n,r,i,s,o,u,a,f=0;e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(f<e.length)s=Base64._keyStr.indexOf(e.charAt(f++)),o=Base64._keyStr.indexOf(e.charAt(f++)),u=Base64._keyStr.indexOf(e.charAt(f++)),a=Base64._keyStr.indexOf(e.charAt(f++)),n=s<<2|o>>4,r=(o&15)<<4|u>>2,i=(u&3)<<6|a,t+=String.fromCharCode(n),u!=64&&(t+=String.fromCharCode(r)),a!=64&&(t+=String.fromCharCode(i));return t=Base64._utf8_decode(t),t},_utf8_encode:function(e){e=e.replace(/\r\n/g,"\n");var t="";for(var n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t+=String.fromCharCode(r):r>127&&r<2048?(t+=String.fromCharCode(r>>6|192),t+=String.fromCharCode(r&63|128)):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128),t+=String.fromCharCode(r&63|128))}return t},_utf8_decode:function(e){var t="",n=0,r=0,i=0,s=0;while(n<e.length)r=e.charCodeAt(n),r<128?(t+=String.fromCharCode(r),n++):r>191&&r<224?(i=e.charCodeAt(n+1),t+=String.fromCharCode((r&31)<<6|i&63),n+=2):(i=e.charCodeAt(n+1),s=e.charCodeAt(n+2),t+=String.fromCharCode((r&15)<<12|(i&63)<<6|s&63),n+=3);return t}};(function(){window.console||(window.console={log:function(){return{}}}),window.Semblance={Vero:{API:{}}},window.veroCallback=function(e){var t;t=window._veroq;if(e.status===200)return t.command_store.removeJob(e.job_id)},window.veroCallback__=function(e){}}).call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};Semblance.Vero.API.BaseListener=function(){function e(){}return e.prototype.load=function(e,t){},e.prototype.target=function(){return this._target||this.defaultTarget()},e.prototype.setupTarget=function(e){var t;t=e!=null?(this._target=e,e):this.target();if(t!=null)return t._vero_delegate=this},e.prototype.log=function(e){if(window.__vero!=null)return window.__vero.log(e)},e}(),Semblance.Vero.API.KISSMetricsListener=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.load=function(e,t){return this.target()._track=this.target().record,this.target().record=this.track,this.target()._identify=this.target().identify,this.target().identify=this.identify,this.target()._set=this.target().set,this.target().set=this.set,e.log("Listening for KISSMetrics events...")},n.prototype.track=function(e,t,n){var r;return r=this._vero_delegate,r.target()._track(e,t,n),r.log("KM.record: "+e),window._veroq.push(["track",e,t])},n.prototype.identify=function(e){var t;t=this._vero_delegate,t.target()._identify(e),t.log("KM.identify: "+e);if(EmailChecker.check(e))return window._veroq.push(["user",{email:e}])},n.prototype.set=function(e){var t;return t=this._vero_delegate,t.target()._set(e),t.log("KM.set: "+JSON.stringify(e)),window._veroq.push(["user",e])},n.prototype.defaultTarget=function(){return window.KM},n}(Semblance.Vero.API.BaseListener),Semblance.Vero.API.MixpanelListener=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.load=function(e,t){return this.target()._track=this.target().track,this.target().track=this.track,this.target()._identify=this.target().identify,this.target().identify=this.identify,this.target()._register=this.target().register,this.target().register=this.register,e.log("Listening for Mixpanel events...")},n.prototype.track=function(e,t){var n;return n=this._vero_delegate,n.target()._track(e,t),n.log("mixpanel.track: "+e),window._veroq.push(["track",e,t])},n.prototype.identify=function(e){var t;t=this._vero_delegate,t.target()._identify(e),t.log("mixpanel.identify: "+e);if(EmailChecker.check(e))return window._veroq.push(["user",{email:e}])},n.prototype.register=function(e){var t;return t=this._vero_delegate,t.target()._register(e),t.log("mixpanel.register: "+JSON.stringify(e)),window._veroq.push(["user",e])},n.prototype.defaultTarget=function(){return window.mixpanel},n}(Semblance.Vero.API.BaseListener),Semblance.Vero.API.Listeners=function(){function e(){}return e.prototype.sources={kissmetrics:Semblance.Vero.API.KISSMetricsListener,mixpanel:Semblance.Vero.API.MixpanelListener},e.prototype.load=function(e,t){var n;return n=new this.sources[e],n.setupTarget(t),n.load(n,this.delegate)},e.prototype.attach_to_mixpanel=function(){return window.__vero.listeners.load("mixpanel",this)},e.prototype.attach_to_kissmetrics=function(){return window.__vero.listeners.load("kissmetrics")},e}()}.call(this),function(){Semblance.Vero.API.Networking=function(){function e(e){e==null&&(e=null),this._domain=e!=null?e:this.defaultDomain()}return e.prototype.defaultDomain=function(){return"https://api.getvero.com"},e.prototype.setCredentials=function(e){return this.validateCredentialsObject(e)?this.api_key=e.api_key:!1},e.prototype.send=function(e,t){var n,r;return e=""+e+"&callback=veroCallback&job_id="+t,r=document.createElement("script"),r.src=e,n=document.getElementsByTagName("script")[0],n.parentNode.insertBefore(r,n)},e.prototype.buildTrackUrl=function(e,t,n,r,i){var s;return s={event_name:e,api_key:this.api_key,development_mode:r,identity:t,data:n,extras:i},s=JSON.stringify(s),s=encodeURIComponent(s),""+this._domain+"/api/v2/events/track.json?params="+s},e.prototype.buildUserUrl=function(e,t,n,r){var i;return i={api_key:this.api_key,data:n,development_mode:r},e!=null&&(i.id=e),t!=null&&(i.email=t),i=JSON.stringify(i),i=encodeURIComponent(i),""+this._domain+"/api/v2/users/track.json?params="+i},e.prototype.buildTagsUrl=function(e,t,n){var r;return r={id:e,api_key:this.api_key,development_mode:n},t!=null&&t.add!=null&&(r.add=t.add),t!=null&&t.remove!=null&&(r.remove=t.remove),r=JSON.stringify(r),r=encodeURIComponent(r),""+this._domain+"/api/v2/users/tags/edit.json?params="+r},e.prototype.buildReidentifyUrl=function(e,t,n){var r;return r={api_key:this.api_key,id:e,new_id:t,development_mode:n},r=JSON.stringify(r),r=encodeURIComponent(r),""+this._domain+"/api/v2/users/reidentify.json?params="+r},e.prototype.buildUnsubscribeUrl=function(e){var t;return t={api_key:this.api_key,id:e},t=JSON.stringify(t),t=encodeURIComponent(t),""+this._domain+"/api/v2/users/unsubscribe.json?params="+t},e.prototype.validateCredentialsObject=function(e){return e!=null&&e.api_key!=null},e}()}.call(this),function(){Semblance.Vero.API.Processor=function(){function e(e){this.vero=e}return e.prototype.currentUser=function(){return this.vero.current_user},e.prototype.networking=function(){return this.vero.networking},e.prototype.processJob=function(e){var t,n,r,i;this.vero.command_store.lockJob(e),i=this.vero.command_store.find(e);if(i!=null)return r=i.command,n=this[r.splice(0,1)],t=r,t.push(e),n.apply(this,t)},e.prototype.events_track=function(e,t,n,r){var i,s,o;o=this.currentUser().toObject();if(this.currentUser().isIdentified())return i=this.vero.development_mode,s=this.networking().buildTrackUrl(e,o,t,i,n),this.networking().send(s,r)},e.prototype.users_track=function(e,t){var n,r;this.currentUser().update(e);if(r=this.currentUser().toObject())return n=this.networking().buildUserUrl(r.id,r.email,r,this.vero.development_mode),this.networking().send(n,t),this.vero.processStoredCommands(),this.vero.trackVisitIfRequired()},e.prototype.users_tags=function(e,t){var n,r,i;if(i=this.currentUser().toObject())return r=i.id||i.email,n=this.networking().buildTagsUrl(r,e,this.vero.development_mode),this.networking().send(n,t)},e.prototype.users_unsubscribe=function(e,t){var n,r;return e==null&&(r=this.currentUser().toObject(),e=r.id),n=this.networking().buildUnsubscribeUrl(e),this.networking().send(n,t)},e.prototype.users_reidentify=function(e,t,n){var r,i;return t==null&&(i=this.currentUser().toObject(),t=i.id),this.currentUser().update({id:e}),r=this.networking().buildReidentifyUrl(t,e,this.vero.development_mode),this.networking().send(r,n)},e}()}.call(this),function(){Semblance.Vero.API.Store=function(){function e(){this.cookieDomain=null,this.maxCookieSize=2048,this._store=this.fetchAll(),this._locked_jobs=[],this._store==null&&(this._store=[])}return e.prototype.storeWithJobId=function(e,t){return e={command:e,job_id:t},this._store.push(e),t},e.prototype.store=function(e){return this.storeWithJobId(e,this.getNextJobId())},e.prototype.shift=function(){return this._store.length===0?null:this._store.shift()},e.prototype.find=function(e){var t,n;t=this.indexOfJobWithId(e);if(t>=0)return n=JSON.stringify(this._store[t]),JSON.parse(n)},e.prototype.removeJob=function(e){var t;t=this.indexOfJobWithId(e);if(t>=0)return this._store.splice(t,1)},e.prototype.length=function(){return this.getStore().length},e.prototype.lockJob=function(e){return this._locked_jobs.push(e)},e.prototype.availableJobIds=function(){var e,t,n,r,i;t=[],i=this.jobIds();for(n=0,r=i.length;n<r;n++)e=i[n],this._locked_jobs.indexOf(e)<0&&t.push(e);return t},e.prototype.jobIds=function(){return this.getStore().map(function(e){return e.job_id})},e.prototype.save=function(){return this.saveToCookie(this._store)},e.prototype.saveToCookie=function(e){return Cookies.create(this.cookieKey(),this.encodeValue(e,this.maxCookieSize),null,this.cookieDomain)},e.prototype.readFromCookie=function(){var e;return e=Cookies.read(this.cookieKey()),e!=null?this.decodeValue(e):[]},e.prototype.encodeValue=function(e,t){var n,r,i;t==null&&(t=2048),i=e.slice(),n=JSON.stringify(i),r=encodeURIComponent(n);while(r.length>t)i.shift(),n=JSON.stringify(i),r=encodeURIComponent(n);return r},e.prototype.decodeValue=function(e){return JSON.parse(decodeURIComponent(e))},e.prototype.fetchAll=function(){var e;return e=this.readFromCookie(),this.saveToCookie([]),e},e.prototype.purge=function(){return this._store=[],Cookies.destroy(this.cookieKey())},e.prototype.getStore=function(){return this._store},e.prototype.getNextJobId=function(){return Date.now()+"_"+Math.floor(Math.random()*1e4)},e.prototype.indexOfJobWithId=function(e){var t,n,r,i,s,o;n=-1,t=0,o=this._store;for(i=0,s=o.length;i<s;i++){r=o[i];if(""+r.job_id==""+e){n=t;break}t+=1}return n},e.prototype.cookieKey=function(){return"__veroc4"},e}()}.call(this),function(){var e=[].slice;Semblance.Vero.API.User=function(){function t(){this.user_cookie="__vero_user",this.cookieDomain=null,this.clear()}return t.prototype.clear=function(){return this.user={}},t.prototype.purge=function(){return this.user={},Cookies.destroy(this.user_cookie)},t.prototype.update=function(e){if(e==null||e==="")return;return this.user=this._merge(this.user,e),this.updateCookie(),this.user},t.prototype.toObject=function(){var e,t;return t=this.isIdentified()?this.user:(e=this.readCookie())!=null?this._merge(this.user,{id:e}):null,t&&isNaN(parseInt(t.timezone))&&(t.timezone=this._userTimezone()),t},t.prototype.isIdentified=function(){var e,t;return this.user!=null?(t=this.user.id!=null,e=EmailChecker.check(this.user.email),t||e):!1},t.prototype.updateCookie=function(){var e;e=this.user.id!=null?this.user.id:this.user.email;if(e!=null&&e!=="")return Cookies.create(this.user_cookie,e,60,this.cookieDomain)},t.prototype.readCookie=function(){return Cookies.read(this.user_cookie)},t.prototype.email=function(){return this.user.email},t.prototype.id=function(){return this.user.id},t.prototype._merge=function(){var t,n,r,i,s,o,u,a;t=arguments[0],i=2<=arguments.length?e.call(arguments,1):[];for(u=0,a=i.length;u<a;u++){r=i[u];for(n in r){o=r[n];if(this.dedupe&&n==="email"||n==="id")o=this._dedupeValue(o);s=n==="email"?!!o:o!=null,s&&(t[n]=o)}}return t},t.prototype._userTimezone=function(){var e;return e=new Date,-(e.getTimezoneOffset()/60)},t.prototype._dedupeValue=function(e){return e!=null&&e.trim!=null&&(e=e.toLowerCase().trim()),e},t}()}.call(this),function(){var e;Semblance.Vero.API.Vero=function(){function e(){this.order=0,this.networking=new Semblance.Vero.API.Networking,this.listeners=new Semblance.Vero.API.Listeners,this.processor=new Semblance.Vero.API.Processor(this),this.current_user=new Semblance.Vero.API.User,this.command_store=new Semblance.Vero.API.Store,this.development_mode=!1,this.response=null,this.ready=!1,this.conversion_cookie=null}return e.prototype.setup=function(){var e,t;e=window._veroq,t=e===this||typeof e=="undefined",this.cleanupOldCookies(),t||(e=this.processInitCommand(e)),window._veroq=this,this.checkParamsForCredentials(),this.checkParamsForConversion();if(!t)return this.processVeroArray(e)},e.prototype.push=function(e){var t;return t=this.processCommand(e),t["function"]!==this.init&&this.checkLibIsReady(),t["function"].apply(this,t.arguments),typeof t.callback=="function"&&t.callback(this,!0),this.log("VERO::"+t.functionName+": "+JSON.stringify(t.arguments))},e.prototype.processCommand=function(e){var t,n,r,i,s;return e!=null&&e.constructor===Array&&e.length>0?(s=r=i=null,s=e.shift(),t=e[e.length-1],n=t===null||typeof t=="function",n&&(i=e.pop()),r=e,{functionName:s,"function":this[s],arguments:r,callback:i}):null},e.prototype.processInitCommand=function(e){var t;return t=null,e=e.filter(function(e){return e[0]==="init"?(t=e,!1):!0}),t!=null&&this.push(t),e},e.prototype.cleanupOldCookies=function(){var e,t,n,r,i;e=["__veroc","__veroc1","__veroc2","__veroc3"],i=[];for(n=0,r=e.length;n<r;n++)t=e[n],i.push(Cookies.destroy(t));return i},e.prototype.processVeroArray=function(e){var t,n,r,i;i=[];for(t=n=0,r=e.length;0<=r?n<r:n>r;t=0<=r?++n:--n)i.push(this.push(e.shift()));return i},e.prototype.processStoredCommands=function(){var e,t,n,r,i;r=this.command_store.availableJobIds(),i=[];for(t=0,n=r.length;t<n;t++)e=r[t],i.push(this.processor.processJob(e));return i},e.prototype.trackVisitIfRequired=function(){if(Cookies.read("__vero_visit")==null)return Cookies.create("__vero_visit",!0,null,this.cookieDomain),this.track("Visited site")},e.prototype.checkParamsForConversion=function(){var e;return e=QueryString.vero_conv,e!=null&&e!==""?this.conversion_cookie=e:null},e.prototype.checkParamsForCredentials=function(){var e,t,n;n=QueryString.vero_id,t=QueryString.vero_e,e={},n!=null&&n!==""&&(n=decodeURIComponent(n),e.id=n),t!=null&&(t=decodeURIComponent(t),EmailChecker.check(t)&&(e.email=t));if(e["id"]!=null||e["email"]!=null)return this.user(e)},e.prototype.checkLibIsReady=function(){if(!this.ready)return this.log("Vero: You must run init before you can perform an other actions.",!0)},e.prototype.log=function(e,t){return t==null&&(t=!1),this.development_mode||t?(console.log(e),!0):!1},e.prototype.timeForEvent=function(e){var t;return t=e["time"]!=null?e.time:Date.now(),t+=this.order,t},e.prototype.getNavigator=function(){return window.navigator},e.prototype.domain=function(e){return this.networking._domain=e},e.prototype.dev_mode=function(e){return this.development_mode=e},e.prototype.cookie_domain=function(e){return this.cookieDomain=this.current_user.cookieDomain=this.command_store.cookieDomain=e,e},e.prototype.userCookie=function(e){return this.user_cookie=this.current_user.user_cookie=e},e.prototype.maxCookieSize=function(e){return this.command_store.maxCookieSize=e},e.prototype.enableDedupe=function(e){return this.dedupe=this.current_user.dedupe=e,e},e.prototype.clearUser=function(){return Cookies.destroy("__vero_user"),this.current_user.clear()},e.prototype.init=function(e){if(this.networking.setCredentials(e))return this.order=0,e.cookie_domain!=null&&this.cookie_domain(e.cookie_domain),e.dedupe!=null&&this.enableDedupe(e.dedupe),e.user!=null&&this.user(e.user),e.development_mode!=null&&this.dev_mode(e.development_mode),e.domain!=null&&this.domain(e.domain),e.user_cookie!=null&&this.userCookie(e.user_cookie),e.maxCookieSize!=null&&this.maxCookieSize(e.maxCookieSize),this.ready=!0,this.processStoredCommands(),this.trackVisitIfRequired()},e.prototype.track=function(e,t,n){var r;return t==null&&(t={}),n==null&&(n={}),this.order+=1,n.time=this.timeForEvent(n),n.order=this.order,this.conversion_cookie&&(n.vero_conv=this.conversion_cookie),t.userAgent=this.getNavigator().userAgent,t.platform=this.getNavigator().platform,t.language=this.getNavigator().language,r=this.command_store.store(["events_track",e,t,n]),this.processor.processJob(r)},e.prototype.trackOnce=function(e,t,n,r){var i;return n==null&&(n={}),r==null&&(r={}),this.order+=1,r.time=this.timeForEvent(r),r.order=this.order,this.conversion_cookie&&(r.vero_conv=this.conversion_cookie),n.userAgent=this.getNavigator().userAgent,n.platform=this.getNavigator().platform,n.language=this.getNavigator().language,i=this.command_store.storeWithJobId(["events_track",e,n,r],t),this.processor.processJob(i)},e.prototype.trackPageview=function(){return this.track("viewed_page",{url:window.location.href},{time:Date.now()})},e.prototype.user=function(e){var t;return e==null&&(e=null),e!==null&&(e.userAgent=this.getNavigator().userAgent,e.platform=this.getNavigator().platform,e.language=this.getNavigator().language),t=this.command_store.store(["users_track",e]),this.processor.processJob(t)},e.prototype.tags=function(e){var t;return e==null&&(e=null),t=this.command_store.store(["users_tags",e]),this.processor.processJob(t)},e.prototype.reidentify=function(e,t){var n;return t==null&&(t=null),n=this.command_store.store(["users_reidentify",e,t]),this.processor.processJob(n)},e.prototype.unsubscribe=function(e){var t;return e==null&&(e=null),t=this.command_store.store(["users_unsubscribe",e]),this.processor.processJob(t)},e}(),window.__vero=new Semblance.Vero.API.Vero,e=function(){return window.__vero.command_store.save()},window.addEventListener?window.addEventListener("unload",e,!1):window.attachEvent&&window.attachEvent("unload",e),__vero.setup()}.call(this);